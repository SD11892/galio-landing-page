;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:import-issues', location = 'js/form/import-issues/import-issues.js' */
define("quick-edit/form/import-issues",[],function(){"use strict";var t=function(){},e=AJS.contextPath();return t.setForm=function(t){this.form=t},t.bindImportIssueUrl=function(){var i=t.getImportIssue();i.click(function(t){const i="/secure/BulkCreateSetupPage!default.jspa?externalSystem=com.atlassian.jira.plugins.jim-plugin:bulkCreateCsv";window.location=e+i})},t.getImportIssue=function(){return this.form.$element.find("#import-issues")},t});;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar.js' */
Calendar=function(e,t,a,n,r){if(this.activeDiv=null,this.currentDateEl=null,this.getDateStatus=null,this.getDateToolTip=null,this.getDateText=null,this.timeout=null,this.onSelected=n||null,this.onClose=r||null,this.dragging=!1,this.hidden=!1,this.minYear=1970,this.maxYear=2050,this.dateFormat=Calendar._TT.DEF_DATE_FORMAT,this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT,this.isPopup=!0,this.weekNumbers=!0,this.firstDayOfWeek="number"==typeof e?e:Calendar._FD,this.showsOtherMonths=!1,this.dateStr=t,this.todayDateStr=a,this.ar_days=null,this.showsTime=!1,this.time24=!0,this.yearStep=2,this.hiliteToday=!0,this.multiple=null,this.table=null,this.element=null,this.tbody=null,this.firstdayname=null,this.monthsCombo=null,this.yearsCombo=null,this.hilitedMonth=null,this.activeMonth=null,this.hilitedYear=null,this.activeYear=null,this.dateClicked=!1,"undefined"==typeof Calendar._SDN){"undefined"==typeof Calendar._SDN_len&&(Calendar._SDN_len=3);for(var l=new Array,i=8;i>0;)l[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);Calendar._SDN=l,"undefined"==typeof Calendar._SMN_len&&(Calendar._SMN_len=3),l=new Array;for(var i=12;i>0;)l[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);Calendar._SMN=l}},Calendar._C=null,Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent),Calendar.is_ie6=Calendar.is_ie&&/msie 6\.0/i.test(navigator.userAgent),Calendar.is_opera=/opera/i.test(navigator.userAgent),Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent),Calendar.getAbsolutePos=function(e){var t=jQuery(e).offset();return t.x=t.left,t.y=t.top,t},Calendar.isRelated=function(e,t){var a=t.relatedTarget;if(!a){var n=t.type;"mouseover"==n?a=t.fromElement:"mouseout"==n&&(a=t.toElement)}for(;a;){if(a==e)return!0;a=a.parentNode}return!1},Calendar.removeClass=function(e,t){if(e&&e.className){for(var a=e.className.split(" "),n=new Array,r=a.length;r>0;)a[--r]!=t&&(n[n.length]=a[r]);e.className=n.join(" ")}},Calendar.addClass=function(e,t){Calendar.removeClass(e,t),e.className+=" "+t},Calendar.getElement=function(e){for(var t=Calendar.is_ie?window.event.srcElement:e.currentTarget;1!=t.nodeType||/^div$/i.test(t.tagName);)t=t.parentNode;return t},Calendar.getTargetElement=function(e){for(var t=Calendar.is_ie?window.event.srcElement:e.target;1!=t.nodeType;)t=t.parentNode;return t},Calendar.stopEvent=function(e){return e||(e=window.event),e.stopPropagation?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1),!1},Calendar.addEvent=function(e,t,a){e.attachEvent?e.attachEvent("on"+t,a):e.addEventListener?e.addEventListener(t,a,!0):e["on"+t]=a},Calendar.removeEvent=function(e,t,a){e.detachEvent?e.detachEvent("on"+t,a):e.removeEventListener?e.removeEventListener(t,a,!0):e["on"+t]=null},Calendar.createElement=function(e,t){var a=null;return a=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",e):document.createElement(e),"undefined"!=typeof t&&t.appendChild(a),a},Calendar._add_evs=function(e){Calendar.addEvent(e,"mouseover",Calendar.dayMouseOver),Calendar.addEvent(e,"mousedown",Calendar.dayMouseDown),Calendar.addEvent(e,"mouseout",Calendar.dayMouseOut),Calendar.is_ie&&(Calendar.addEvent(e,"dblclick",Calendar.dayMouseDblClick),e.setAttribute("unselectable",!0))},Calendar.findMonth=function(e){return"undefined"!=typeof e.month?e:"undefined"!=typeof e.parentNode.month?e.parentNode:null},Calendar.findYear=function(e){return"undefined"!=typeof e.year?e:"undefined"!=typeof e.parentNode.year?e.parentNode:null},Calendar.showMonthsCombo=function(){var e=Calendar._C;if(!e)return!1;var e=e,t=e.activeDiv,a=e.monthsCombo;e.hilitedMonth&&Calendar.removeClass(e.hilitedMonth,"hilite"),e.activeMonth&&Calendar.removeClass(e.activeMonth,"active");var n=e.monthsCombo.getElementsByTagName("div")[e.date.getMonth()];Calendar.addClass(n,"active"),e.activeMonth=n;var r=a.style;if(r.display="block",t.navtype<0)r.left=t.offsetLeft+"px";else{var l=a.offsetWidth;"undefined"==typeof l&&(l=50),r.left=t.offsetLeft+t.offsetWidth-l+"px"}r.top=t.offsetTop+t.offsetHeight+"px"},Calendar.showYearsCombo=function(e){var t=Calendar._C;if(!t)return!1;var t=t,a=t.activeDiv,n=t.yearsCombo;t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),t.activeYear&&Calendar.removeClass(t.activeYear,"active"),t.activeYear=null;for(var r=t.date.getFullYear()+(e?1:-1),l=n.firstChild,i=!1,s=12;s>0;--s)r>=t.minYear&&r<=t.maxYear?(l.innerHTML=r,l.year=r,l.style.display="block",i=!0):l.style.display="none",l=l.nextSibling,r+=e?t.yearStep:-t.yearStep;if(i){var o=n.style;if(o.display="block",a.navtype<0)o.left=a.offsetLeft+"px";else{var d=n.offsetWidth;"undefined"==typeof d&&(d=50),o.left=a.offsetLeft+a.offsetWidth-d+"px"}o.top=a.offsetTop+a.offsetHeight+"px"}},Calendar.tableMouseUp=function(e){var t=Calendar._C;if(!t)return!1;t.timeout&&clearTimeout(t.timeout);var a=t.activeDiv;if(!a)return!1;var n=Calendar.getTargetElement(e);e||(e=window.event),Calendar.removeClass(a,"active"),n!=a&&n.parentNode!=a||Calendar.cellClick(a,e);var r=Calendar.findMonth(n),l=null;if(r)l=new Date(t.date),r.month!=l.getMonth()&&(l.setMonth(r.month),t.setDate(l),t.dateClicked=!1,t.callHandler());else{var i=Calendar.findYear(n);i&&(l=new Date(t.date),i.year!=l.getFullYear()&&(l.setFullYear(i.year),t.setDate(l),t.dateClicked=!1,t.callHandler()))}return Calendar.removeEvent(document,"mouseup",Calendar.tableMouseUp),Calendar.removeEvent(document,"mouseover",Calendar.tableMouseOver),Calendar.removeEvent(document,"mousemove",Calendar.tableMouseOver),t._hideCombos(),Calendar._C=null,Calendar.stopEvent(e)},Calendar.tableMouseOver=function(e){var t=Calendar._C;if(t){var a=t.activeDiv,n=Calendar.getTargetElement(e);if(n==a||n.parentNode==a?(Calendar.addClass(a,"hilite active"),Calendar.addClass(a.parentNode,"rowhilite")):(("undefined"==typeof a.navtype||50!=a.navtype&&(0==a.navtype||Math.abs(a.navtype)>2))&&Calendar.removeClass(a,"active"),Calendar.removeClass(a,"hilite"),Calendar.removeClass(a.parentNode,"rowhilite")),e||(e=window.event),50==a.navtype&&n!=a){var r,l=Calendar.getAbsolutePos(a),i=a.offsetWidth,s=e.clientX,o=!0;s>l.x+i?(r=s-l.x-i,o=!1):r=l.x-s,r<0&&(r=0);for(var d=a._range,u=a._current,h=Math.floor(r/10)%d.length,c=d.length;--c>=0&&d[c]!=u;);for(;h-- >0;)o?--c<0&&(c=d.length-1):++c>=d.length&&(c=0);var C=d[c];a.innerHTML=C,t.onUpdateTime()}var m=Calendar.findMonth(n);if(m)m.month!=t.date.getMonth()?(t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite"),Calendar.addClass(m,"hilite"),t.hilitedMonth=m):t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");else{t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");var p=Calendar.findYear(n);p&&p.year!=t.date.getFullYear()?(t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),Calendar.addClass(p,"hilite"),t.hilitedYear=p):t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite")}return Calendar.stopEvent(e)}},Calendar.tableMouseDown=function(e){if(Calendar.getTargetElement(e)==Calendar.getElement(e))return Calendar.stopEvent(e)},Calendar.calDragIt=function(e){var t=Calendar._C;if(!t||!t.dragging)return!1;var a,n;Calendar.is_ie?(n=window.event.clientY+document.body.scrollTop,a=window.event.clientX+document.body.scrollLeft):(a=e.pageX,n=e.pageY);var r=t.element.style;return r.left=a-t.xOffs+"px",r.top=n-t.yOffs+"px",Calendar.stopEvent(e)},Calendar.calDragEnd=function(e){var t=Calendar._C;return!!t&&(t.dragging=!1,Calendar.removeEvent(document,"mousemove",Calendar.calDragIt),Calendar.removeEvent(document,"mouseup",Calendar.calDragEnd),void Calendar.tableMouseUp(e))},Calendar.dayMouseDown=function(e){var t=Calendar.getElement(e);if(t.disabled)return!1;var a=t.calendar;return a.activeDiv=t,Calendar._C=a,300!=t.navtype?(50==t.navtype?(t._current=t.innerHTML,Calendar.addEvent(document,"mousemove",Calendar.tableMouseOver)):Calendar.addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",Calendar.tableMouseOver),Calendar.addClass(t,"hilite active"),Calendar.addEvent(document,"mouseup",Calendar.tableMouseUp)):a.isPopup&&a._dragStart(e),t.navtype==-1||1==t.navtype?(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout("Calendar.showMonthsCombo()",250)):t.navtype==-2||2==t.navtype?(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(t.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):a.timeout=null,Calendar.stopEvent(e)},Calendar.dayMouseDblClick=function(e){Calendar.cellClick(Calendar.getElement(e),e||window.event),Calendar.is_ie&&document.selection.empty()},Calendar.dayMouseOver=function(e){var t=Calendar.getElement(e);return!(Calendar.isRelated(t,e)||Calendar._C||t.disabled)&&(t.ttip&&("_"==t.ttip.substr(0,1)&&(t.ttip=t.caldate.print(t.calendar.ttDateFormat)+t.ttip.substr(1)),t.calendar.tooltips.innerHTML=t.ttip),300!=t.navtype&&(Calendar.addClass(t,"hilite"),t.caldate&&Calendar.addClass(t.parentNode,"rowhilite")),Calendar.stopEvent(e))},Calendar.dayMouseOut=function(e){var t=Calendar.getElement(e);return!(Calendar.isRelated(t,e)||Calendar._C||t.disabled)&&(Calendar.removeClass(t,"hilite"),t.caldate&&Calendar.removeClass(t.parentNode,"rowhilite"),t.calendar&&(t.calendar.tooltips.innerHTML=Calendar._TT.SEL_DATE),Calendar.stopEvent(e))},Calendar.cellClick=function(e,t){function a(e){var t=i.getDate(),a=i.getMonthDays(e);t>a&&i.setDate(a),i.setMonth(e)}var n=e.calendar,r=!1,l=!1,i=null;if("undefined"==typeof e.navtype){n.currentDateEl&&(Calendar.removeClass(n.currentDateEl,"selected"),Calendar.addClass(e,"selected"),r=n.currentDateEl==e,r||(n.currentDateEl=e)),n.date.setDateOnly(e.caldate),i=n.date;var s=!(n.dateClicked=!e.otherMonth);s||n.currentDateEl?l=!e.disabled:n._toggleMultipleDate(new Date(i)),s&&n._init(n.firstDayOfWeek,i)}else{if(200==e.navtype)return Calendar.removeClass(e,"hilite"),void n.callCloseHandler();i=new Date(n.date),0==e.navtype&&(n.todayDateStr?i=new Date(n.todayDateStr):i.setDateOnly(new Date)),n.dateClicked=!1;var o=i.getFullYear(),d=i.getMonth();switch(e.navtype){case 400:Calendar.removeClass(e,"hilite");var u=Calendar._TT.ABOUT;return"undefined"!=typeof u?u+=n.showsTime?Calendar._TT.ABOUT_TIME:"":u='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n',void alert(u);case-2:o>n.minYear&&i.setFullYear(o-1);break;case-1:d>0?a(d-1):o-- >n.minYear&&(i.setFullYear(o),a(11));break;case 1:d<11?a(d+1):o<n.maxYear&&(i.setFullYear(o+1),a(0));break;case 2:o<n.maxYear&&i.setFullYear(o+1);break;case 100:return void n.setFirstDayOfWeek(e.fdow);case 50:for(var h=e._range,c=e.innerHTML,C=h.length;--C>=0&&h[C]!=c;);t&&t.shiftKey?--C<0&&(C=h.length-1):++C>=h.length&&(C=0);var m=h[C];return e.innerHTML=m,void n.onUpdateTime();case 0:if("function"==typeof n.getDateStatus&&n.getDateStatus(i,i.getFullYear(),i.getMonth(),i.getDate()))return!1}i.equalsTo(n.date)?0==e.navtype&&(l=r=!0):(n.setDate(i),l=!0)}l&&t&&n.callHandler(),r&&(Calendar.removeClass(e,"hilite"),t&&n.callCloseHandler())},Calendar.prototype.create=function(e){var t=null;e?(t=e,this.isPopup=!1):(t=document.getElementsByTagName("body")[0],this.isPopup=!0),this.dateStr&&(this.date=new Date(this.dateStr)),this.date&&!isNaN(this.date)||(this.date=new Date);var a=Calendar.createElement("table");this.table=a,a.cellSpacing=0,a.cellPadding=0,a.calendar=this,Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var n=Calendar.createElement("div");this.element=n,n.className="calendar",this.isPopup&&(n.style.position="absolute",n.style.display="none"),n.appendChild(a);var r=Calendar.createElement("thead",a),l=null,i=null,s=this,o=function(e,t,a){return l=Calendar.createElement("td",i),l.colSpan=t,l.className="button",0!=a&&Math.abs(a)<=2&&(l.className+=" nav"),Calendar._add_evs(l),l.calendar=s,l.navtype=a,l.innerHTML="<div unselectable='on'>"+e+"</div>",l};i=Calendar.createElement("tr",r);var d=6;this.isPopup&&--d,this.weekNumbers&&++d,o("?",1,400).ttip=Calendar._TT.INFO,this.title=o("",d,300),this.title.className="title",this.isPopup&&(this.title.ttip=Calendar._TT.DRAG_TO_MOVE,this.title.style.cursor="move",o("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE),i=Calendar.createElement("tr",r),i.className="headrow",this._nav_py=o("&#x00ab;",1,-2),this._nav_py.ttip=Calendar._TT.PREV_YEAR,this._nav_pm=o("&#x2039;",1,-1),this._nav_pm.ttip=Calendar._TT.PREV_MONTH,this._nav_now=o(Calendar._TT.TODAY,this.weekNumbers?4:3,0),this._nav_now.ttip=Calendar._TT.GO_TODAY,this._nav_nm=o("&#x203a;",1,1),this._nav_nm.ttip=Calendar._TT.NEXT_MONTH,this._nav_ny=o("&#x00bb;",1,2),this._nav_ny.ttip=Calendar._TT.NEXT_YEAR,i=Calendar.createElement("tr",r),i.className="daynames",this.weekNumbers&&(l=Calendar.createElement("td",i),l.className="name wn",l.innerHTML=Calendar._TT.WK);for(var u=7;u>0;--u)l=Calendar.createElement("td",i),u||(l.navtype=100,l.calendar=this,Calendar._add_evs(l));this.firstdayname=this.weekNumbers?i.firstChild.nextSibling:i.firstChild,this._displayWeekdays();var h=Calendar.createElement("tbody",a);for(this.tbody=h,u=6;u>0;--u){i=Calendar.createElement("tr",h),this.weekNumbers&&(l=Calendar.createElement("td",i));for(var c=7;c>0;--c)l=Calendar.createElement("td",i),l.calendar=this,Calendar._add_evs(l)}this.showsTime?(i=Calendar.createElement("tr",h),i.className="time",l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,l.innerHTML=Calendar._TT.TIME||"&nbsp;",l=Calendar.createElement("td",i),l.className="time",l.colSpan=this.weekNumbers?4:3,function(){function e(e,t,a,n){var r=Calendar.createElement("span",l);if(r.className=e,r.innerHTML=t,r.calendar=s,r.ttip=Calendar._TT.TIME_PART,r.navtype=50,r._range=[],"number"!=typeof a)r._range=a;else for(var i=a;i<=n;++i){var o;o=i<10&&n>=10?"0"+i:""+i,r._range[r._range.length]=o}return Calendar._add_evs(r),r}var t=s.date.getHours(),a=s.date.getMinutes(),n=!s.time24,r=t>12;n&&r&&(t-=12);var o=e("hour",t,n?1:0,n?12:23),d=Calendar.createElement("span",l);d.innerHTML=":",d.className="colon";var u=e("minute",a,0,59),h=null;l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,n?h=e("ampm",r?Calendar._TT.PM:Calendar._TT.AM,[Calendar._TT.am,Calendar._TT.pm]):l.innerHTML="&nbsp;",s.onSetTime=function(){var e,t=this.date.getHours(),a=this.date.getMinutes();n&&(e=t>=12,e&&(t-=12),0==t&&(t=12),h.innerHTML=e?Calendar._TT.pm:Calendar._TT.am),o.innerHTML=t<10?"0"+t:t,u.innerHTML=a<10?"0"+a:a},s.onUpdateTime=function(){var e=this.date,t=parseInt(o.innerHTML,10);n&&(new RegExp(Calendar._TT.pm,"i").test(h.innerHTML)&&t<12?t+=12:new RegExp(Calendar._TT.am,"i").test(h.innerHTML)&&12==t&&(t=0));var a=e.getDate(),r=e.getMonth(),l=e.getFullYear();e.setHours(t),e.setMinutes(parseInt(u.innerHTML,10)),e.setFullYear(l),e.setMonth(r),e.setDate(a),this.dateClicked=!1,this.callHandler()}}()):this.onSetTime=this.onUpdateTime=function(){};var C=Calendar.createElement("tfoot",a);for(i=Calendar.createElement("tr",C),i.className="footrow",l=o(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300),l.className="ttip",this.isPopup&&(l.ttip=Calendar._TT.DRAG_TO_MOVE,l.style.cursor="move"),this.tooltips=l,n=Calendar.createElement("div",this.element),this.monthsCombo=n,n.className="combo",u=0;u<Calendar._MN.length;++u){var m=Calendar.createElement("div");m.className=Calendar.is_ie?"label-IEfix":"label",m.month=u,m.innerHTML=Calendar._SMN[u],n.appendChild(m)}for(n=Calendar.createElement("div",this.element),this.yearsCombo=n,n.className="combo",u=12;u>0;--u){var p=Calendar.createElement("div");p.className=Calendar.is_ie?"label-IEfix":"label",n.appendChild(p)}this._init(this.firstDayOfWeek,this.date),t.appendChild(this.element),Calendar.addEvent(this.element,"mousedown",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1})},Calendar._upkeyEvent=function(e){27===e.keyCode&&window.setTimeout(function(){var e=window._dynarch_popupCalendar;return!(!e||e.multiple)&&void e.callCloseHandler()},0)},Calendar._keyEvent=function(e){function t(){h=r.currentDateEl;var e=h.pos;o=15&e,d=e>>4,u=r.ar_days[d][o]}function a(){var e=new Date(r.date);e.setDate(e.getDate()-c),r.setDate(e)}function n(){var e=new Date(r.date);e.setDate(e.getDate()+c),r.setDate(e)}var r=window._dynarch_popupCalendar;if(!r||r.multiple)return!1;var l=Calendar.is_ie||"keydown"==e.type,i=e.keyCode;if(e.ctrlKey)switch(i){case 37:l&&Calendar.cellClick(r._nav_pm);break;case 38:l&&Calendar.cellClick(r._nav_py);break;case 39:l&&Calendar.cellClick(r._nav_nm);break;case 40:l&&Calendar.cellClick(r._nav_ny)}else switch(i){case 32:Calendar.cellClick(r._nav_now);break;case 37:case 38:case 39:case 40:if(l){var s,o,d,u,h,c;for(s=37==i||38==i,c=37==i||39==i?1:7,t();;){switch(i){case 37:if(!(--o>=0)){o=6,i=38;continue}u=r.ar_days[d][o];break;case 38:--d>=0?u=r.ar_days[d][o]:(a(),t());break;case 39:if(!(++o<7)){o=0,i=40;continue}u=r.ar_days[d][o];break;case 40:++d<r.ar_days.length?u=r.ar_days[d][o]:(n(),t())}break}u&&(u.disabled?s?a():n():Calendar.cellClick(u))}break;case 13:l&&Calendar.cellClick(r.currentDateEl,e)}return Calendar.stopEvent(e)},Calendar.prototype._init=function(e,t){var a=new Date(t);a.setHours(13);var n=new Date,r=n.getFullYear(),l=n.getMonth(),i=n.getDate();this.table.style.visibility="hidden";var s=a.getFullYear();s<this.minYear?(s=this.minYear,a.setFullYear(s)):s>this.maxYear&&(s=this.maxYear,a.setFullYear(s)),this.firstDayOfWeek=e;var o=a.getMonth(),d=a.getDate();a.getMonthDays();a.setDate(1);var u=(a.getDay()-this.firstDayOfWeek)%7;u<0&&(u+=7),a.setDate(-u),a.setDate(a.getDate()+1);for(var h=this.tbody.firstChild,c=(Calendar._SMN[o],this.ar_days=new Array),C=Calendar._TT.WEEKEND,m=this.multiple?this.datesCells={}:null,p=0;p<6;++p,h=h.nextSibling){var v=h.firstChild;if(this.weekNumbers){v.className="day wn";var f=a;0==o&&0==p&&0==Date.useISO8601WeekNumbers&&(f=new Date(s,o,1)),v.innerHTML=f.getWeekNumber(this.firstDayOfWeek),v=v.nextSibling}h.className="daysrow";for(var y,g=!1,_=c[p]=[],D=0;D<7;++D,v=v.nextSibling,a.setDate(y+1)){y=a.getDate();var b=a.getDay();v.className="day day-"+y,v.pos=p<<4|D,_[D]=v;var T=a.getMonth()==o;if(T)v.otherMonth=!1,g=!0;else{if(!this.showsOtherMonths){v.className="emptycell",v.innerHTML="&nbsp;",v.disabled=!0;continue}v.className+=" othermonth",v.otherMonth=!0}if(v.disabled=!1,v.innerHTML=this.getDateText?this.getDateText(a,y):y,m&&(m[a.print("%Y%m%d")]=v),this.getDateStatus){var w=this.getDateStatus(a,s,o,y);if(this.getDateToolTip){var M=this.getDateToolTip(a,s,o,y);M&&(v.title=M)}w===!0?(v.className+=" disabled",v.disabled=!0):(/disabled/i.test(w)&&(v.disabled=!0),v.className+=" "+w)}v.disabled||(v.caldate=new Date(a),v.ttip="_",!this.multiple&&T&&y==d&&this.hiliteToday&&(v.className+=" selected",this.currentDateEl=v),a.getFullYear()==r&&a.getMonth()==l&&y==i&&(v.className+=" today",v.ttip+=Calendar._TT.PART_TODAY),C.indexOf(b.toString())!=-1&&(v.className+=v.otherMonth?" oweekend":" weekend"))}g||this.showsOtherMonths||(h.className="emptyrow")}this.date=new Date(t),this.onSetTime(),this.title.innerHTML=Calendar._MN[o]+", "+s,this.table.style.visibility="visible",this._initMultipleDates()},Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var e in this.multiple){var t=this.datesCells[e],a=this.multiple[e];a&&t&&(t.className+=" selected")}},Calendar.prototype._toggleMultipleDate=function(e){if(this.multiple){var t=e.print("%Y%m%d"),a=this.datesCells[t];if(a){var n=this.multiple[t];n?(Calendar.removeClass(a,"selected"),delete this.multiple[t]):(Calendar.addClass(a,"selected"),this.multiple[t]=e)}}},Calendar.prototype.setDateToolTipHandler=function(e){this.getDateToolTip=e},Calendar.prototype.setDate=function(e){e.equalsTo(this.date)||this._init(this.firstDayOfWeek,e)},Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)},Calendar.prototype.setFirstDayOfWeek=function(e){this._init(e,this.date),this._displayWeekdays()},Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(e){this.getDateStatus=e},Calendar.prototype.setRange=function(e,t){this.minYear=e,this.maxYear=t},Calendar.prototype.callHandler=function(){this.onSelected&&this.onSelected(this,this.date.print(this.dateFormat))},Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this)},Calendar.prototype.destroy=function(){var e=this.element.parentNode;e.removeChild(this.element),Calendar._C=null,window._dynarch_popupCalendar=null},Calendar.prototype.reparent=function(e){var t=this.element;t.parentNode.removeChild(t),e.appendChild(t)},Calendar._checkCalendar=function(e){var t=window._dynarch_popupCalendar;if(!t)return!1;for(var a=Calendar.is_ie?Calendar.getElement(e):Calendar.getTargetElement(e);null!=a&&a!=t.element;a=a.parentNode);return null==a?(window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(e)):void 0},Calendar.prototype.show=function(){if(!this.params.inputField.disabled){for(var e=this.table.getElementsByTagName("tr"),t=e.length;t>0;){var a=e[--t];Calendar.removeClass(a,"rowhilite");for(var n=a.getElementsByTagName("td"),r=n.length;r>0;){var l=n[--r];Calendar.removeClass(l,"hilite"),Calendar.removeClass(l,"active")}}Calendar.current=this,this.element.style.display="block",this.element.className+=" active",this.hidden=!1,this.isPopup&&(window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keyup",Calendar._upkeyEvent),Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"mousedown",Calendar._checkCalendar))}},Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keyup",Calendar._upkeyEvent),Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)),Calendar.current=null,this.element.style.display="none",this.element.className=this.element.className.replace(/active/gi,""),this.hidden=!0},Calendar.prototype.showAt=function(e,t){var a=this.element.style;a.left=e+"px",a.top=t+"px",this.show()},Calendar.prototype.showAtElement=function(e,t){function a(e){e.x<0&&(e.x=0),e.y<0&&(e.y=0);var t=document.createElement("div"),a=t.style;a.position="absolute",a.right=a.bottom=a.width=a.height="0px",document.body.appendChild(t);var n=Calendar.getAbsolutePos(t);document.body.removeChild(t),n.y+=jQuery(window).scrollTop(),n.x+=jQuery(window).scrollLeft();var r=e.x+e.width-n.x;r>0&&(e.x-=r),r=e.y+e.height-n.y,r>0&&(e.y-=r)}var n=this,r=Calendar.getAbsolutePos(e);return t&&"string"==typeof t?(this.element.style.display="block",Calendar.continuation_for_the_khtml_browser=function(){var l=jQuery(n.element).outerWidth(),i=jQuery(n.element).outerHeight();n.element.style.display="none";var s=t.substr(0,1),o="l";switch(t.length>1&&(o=t.substr(1,1)),s){case"T":r.y-=i;break;case"B":r.y+=jQuery(e).outerHeight();break;case"C":r.y+=(jQuery(e).outerHeight()-i)/2;break;case"t":r.y+=jQuery(e).outerHeight()-i;break;case"b":}switch(o){case"L":r.x-=l;break;case"R":r.x+=jQuery(e).outerWidth();break;case"C":r.x+=(jQuery(e).outerWidth()-l)/2;break;case"l":r.x+=jQuery(e).outerWidth()-l;break;case"r":}r.width=l,r.height=i+40,n.monthsCombo.style.display="none",a(r),n.showAt(r.x,r.y)},void Calendar.continuation_for_the_khtml_browser()):(this.showAt(r.x,r.y+e.offsetHeight),!0)},Calendar.prototype.setDateFormat=function(e){this.dateFormat=e},Calendar.prototype.setTtDateFormat=function(e){this.ttDateFormat=e},Calendar.prototype.parseDate=function(e,t){t||(t=this.dateFormat),this.setDate(Date.parseDate(e,t))},Calendar.prototype._displayWeekdays=function(){for(var e=this.firstDayOfWeek,t=this.firstdayname,a=Calendar._TT.WEEKEND,n=0;n<7;++n){t.className="day name";var r=(n+e)%7;n&&(t.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[r]),t.navtype=100,t.calendar=this,t.fdow=r,Calendar._add_evs(t)),a.indexOf(r.toString())!=-1&&Calendar.addClass(t,"weekend"),t.innerHTML=Calendar._SDN[(n+e)%7],t=t.nextSibling}},Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none",this.yearsCombo.style.display="none"},Calendar.prototype._dragStart=function(e){if(!this.dragging){this.dragging=!0;var t,a;Calendar.is_ie?(a=window.event.clientY+document.body.scrollTop,t=window.event.clientX+document.body.scrollLeft):(a=e.clientY+window.scrollY,t=e.clientX+window.scrollX);var n=this.element.style;this.xOffs=t-parseInt(n.left),this.yOffs=a-parseInt(n.top),Calendar.addEvent(document,"mousemove",Calendar.calDragIt),Calendar.addEvent(document,"mouseup",Calendar.calDragEnd)}},Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date._multisplit=function(e,t){if(null==e)return null;null==t&&(t="");var a=[],n=e.length,r="",l=!1;for(i=0;i<n;i++){var s=e.charAt(i);t.indexOf(s)==-1?(l=!0,r+=s):l&&(a[a.length]=r,r="",l=!1)}return r.length>0&&(a[a.length]=r),0==a.length&&(a[a.length]=""),a},Date._parseNonDateFormatChars=function(e){var t="aAbBCdeHIJklmMnpPRSstUWVuwyY%",a="",n=e.length;for(i=0;i<n;i++){var r=e.charAt(i);if("%"==r){var l="";if(i+1<n&&(l=e.charAt(i+1)),i+=1,l.length>0&&t.indexOf(l)!=-1)continue;a.indexOf(r)==-1&&(a+=r),l.length>0&&a.indexOf(l)==-1&&(a+=l)}else a.indexOf(r)==-1&&(a+=r)}return a},Date.splitDate=function(e,t){var a=0,n=-1,r=0,l=Date._parseNonDateFormatChars(t),i=Date._multisplit(e,l),s=t.match(/%./g),o=0,d=0,u=0,h=0;for(o=0;o<i.length;++o)if(i[o])switch(s[o]){case"%d":case"%e":r=Number(i[o]);break;case"%m":n=Number(i[o])-1;break;case"%Y":case"%y":a=Number(i[o]),a<100&&(a+=a>29?1900:2e3);break;case"%b":case"%B":var c=i[o].toLowerCase(),C=!1;if("%b"==s[o])for(d=0;d<12;++d)if(Calendar._SMN[d].substr(0,c.length).toLowerCase()==c){n=d,C=!0;break}if(!C)for(d=0;d<12;++d)if(Calendar._MN[d].substr(0,c.length).toLowerCase()==c){n=d;break}break;case"%H":case"%I":case"%k":case"%l":u=Number(i[o]);break;case"%P":case"%p":/pm/i.test(i[o])&&u<12?u+=12:/am/i.test(i[o])&&u>=12&&(u-=12);break;case"%M":h=Number(i[o]);break;case"%R":var m=i[o],p=m.indexOf(":"),v=m.substring(0,p),f=p==-1?0:m.substring(p+1);u=Number(v),h=Number(f)}return{parts:i,year:a,month:n,day:r,hour:u,minute:h}},Date.parseDate=function(e,t){var a=new Date,n=Date.splitDate(e,t),r=n.parts,l=n.year,i=n.month,s=n.day,o=n.hour,d=n.minute,u=0,h=0;if(isNaN(l)&&(l=a.getFullYear()),isNaN(i)&&(i=a.getMonth()),isNaN(s)&&(s=a.getDate()),isNaN(o)&&(o=a.getHours()),isNaN(d)&&(d=a.getMinutes()),0!=l&&i!=-1&&0!=s)return new Date(l,i,s,o,d,0);for(l=0,i=-1,s=0,u=0;u<r.length;++u)if(r[u].search(/[a-zA-Z]+/)!=-1){var c=-1;for(h=0;h<12;++h)if(Calendar._MN[h].substr(0,r[u].length).toLowerCase()==r[u].toLowerCase()){c=h;break}c!=-1&&(i!=-1&&(s=i+1),i=c)}else Number(r[u])<=12&&i==-1?i=r[u]-1:Number(r[u])>31&&0==l?(l=Number(r[u]),l<100&&(l+=l>29?1900:2e3)):0==s&&(s=r[u]);return 0==l&&(l=a.getFullYear()),i!=-1&&0!=s?new Date(l,i,s,o,d,0):a},Date.prototype.getMonthDays=function(e){var t=this.getFullYear();return"undefined"==typeof e&&(e=this.getMonth()),0!=t%4||0==t%100&&0!=t%400||1!=e?Date._MD[e]:29},Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),13,0,0),t=new Date(this.getFullYear(),0,0,13,0,0),a=e-t;return Math.floor(a/Date.DAY)},Date.prototype.getWeekNumber=function(e){return Date.useISO8601WeekNumbers?this.getISO8601WeekNumber():this.getSimpleWeekNumber(e)},Date.prototype.getISO8601WeekNumber=function(){function e(e,t,a){return y=e,m=t,t<3&&(y-=1),t<3&&(m+=12),Math.floor(365.25*y)-Math.floor(y/100)+Math.floor(y/400)+Math.floor(30.6*(m+1))+a-62}function t(t){return year=t.getFullYear(),month=t.getMonth(),day=t.getDate(),wday=t.getDay(),weekday=(wday+6)%7+1,isoyear=year,d0=e(year,1,0),weekday0=(d0+4)%7+1,d=e(year,month+1,day),isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),11==month&&day-weekday>27&&(isoweeknr=1,isoyear+=1),0==month&&weekday-day>3&&(d0=e(year-1,1,0),weekday0=(d0+4)%7+1,isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),isoyear-=1),isoweeknr}return t(this)},Date.prototype.getSimpleWeekNumber=function(e){function t(e,t,a){var n,r=e.getFullYear(),l=new Date(r,0,1);return n=Math.round((e-l)/864e5),null!=t&&(n-=(7+t-l.getDay())%7),null!=a&&(n+=a),[r,1+n/7|0,1+(7+n)%7]}return t(this,e?e:6,6)[1]},Date.prototype.equalsTo=function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getHours()==e.getHours()&&this.getMinutes()==e.getMinutes()},Date.prototype.setDateOnly=function(e){var t=new Date(e);this.setDate(1),this.setFullYear(t.getFullYear()),this.setMonth(t.getMonth()),this.setDate(t.getDate())},Date.prototype.print=function(e){var t=this.getMonth(),a=this.getDate(),n=this.getFullYear(),r=this.getWeekNumber(),l=this.getDay(),i={},s=this.getHours(),o=s>=12,d=o?s-12:s,u=this.getDayOfYear();0==d&&(d=12);var h=this.getMinutes(),c=this.getSeconds();i["%a"]=Calendar._SDN[l],i["%A"]=Calendar._DN[l],i["%b"]=Calendar._SMN[t],i["%B"]=Calendar._MN[t],i["%C"]=1+Math.floor(n/100),i["%d"]=a<10?"0"+a:a,i["%e"]=a,i["%H"]=s<10?"0"+s:s,i["%I"]=d<10?"0"+d:d,i["%j"]=u<100?u<10?"00"+u:"0"+u:u,i["%k"]=s,i["%l"]=d,i["%m"]=t<9?"0"+(1+t):1+t,i["%M"]=h<10?"0"+h:h,i["%n"]="\n",i["%p"]=o?Calendar._TT.PM:Calendar._TT.AM,i["%P"]=o?Calendar._TT.PM:Calendar._TT.AM,i["%R"]=i["%k"]+":"+i["%M"],i["%s"]=Math.floor(this.getTime()/1e3),i["%S"]=c<10?"0"+c:c,i["%t"]="\t",i["%U"]=i["%W"]=i["%V"]=r<10?"0"+r:r,i["%u"]=l+1,i["%w"]=l,i["%y"]=(""+n).slice(-2),i["%Y"]=n,i["%%"]="%";var C=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return e.replace(C,function(e){return i[e]||e});for(var m=e.match(C),p=0;p<m.length;p++){var v=i[m[p]];v&&(C=new RegExp(m[p],"g"),e=e.replace(C,v))}return e},Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear,Date.prototype.setFullYear=function(e){var t=new Date(this);t.__msh_oldSetFullYear(e),t.getMonth()!=this.getMonth()&&this.setDate(28),this.__msh_oldSetFullYear(e)},window._dynarch_popupCalendar=null;;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar.setup.js' */
Calendar.setup=function(e){function t(t,a){"undefined"==typeof e[t]&&(e[t]=a)}function a(e){var t=e.params,a=e.dateClicked||t.electric;a&&t.inputField&&(t.inputField.value=e.date.print(t.ifFormat),jQuery(t.inputField).change()),a&&t.displayArea&&(t.displayArea.innerHTML=e.date.print(t.daFormat)),a&&"function"==typeof t.onUpdate&&t.onUpdate(e),a&&t.flat&&"function"==typeof t.flatCallback&&t.flatCallback(e),"true"===t.singleClick?t.singleClick=!0:"false"===t.singleClick&&(t.singleClick=!1),a&&t.singleClick&&e.dateClicked&&e.callCloseHandler()}function n(){if(Calendar._UNSUPPORTED===!0)return void alert("The JIRA Calendar does not currently support your language.");var t=e.inputField||e.displayArea,n=e.inputField?e.ifFormat:e.daFormat,l=!1,i=window.calendar;if(i&&i.hide(),t&&(t.value||t.innerHTML)&&(e.date=Date.parseDate(t.value||t.innerHTML,n)),i&&e.cache?(e.date&&i.setDate(e.date),i.hide()):(window.calendar=i=new Calendar(e.firstDay,e.date,e.todayDate,e.onSelect||a,e.onClose||function(e){e.hide()}),i.showsTime=e.showsTime,i.time24="24"==e.timeFormat,i.weekNumbers=e.weekNumbers,Date.useISO8601WeekNumbers=e.useISO8601WeekNumbers,e.useISO8601WeekNumbers&&(i.firstDayOfWeek=1),l=!0),e.multiple){i.multiple={};for(var r=e.multiple.length;--r>=0;){var u=e.multiple[r],s=u.print("%Y%m%d");i.multiple[s]=u}}return i.showsOtherMonths=e.showOthers,i.yearStep=e.step,i.setRange(e.range[0],e.range[1]),i.params=e,i.setDateStatusHandler(e.dateStatusFunc),i.getDateText=e.dateText,i.setDateFormat(n),l&&i.create(),i.refresh(),e.position?i.showAt(e.position[0],e.position[1]):i.showAtElement(e.button||e.displayArea||e.inputField,e.align),!1}function l(){var t=jQuery(e.inputField);e.button&&jQuery(e.button).mousedown(function(e){e.preventDefault(),!t.is(":focus")&&t.is(":enabled")&&t.focus()}),t.keydown(function(e){var t=window.calendar;40===e.keyCode&&(t&&!t.hidden||setTimeout(function(){n()},1))})}e=e||{},t("inputField",null),t("context",null),t("displayArea",null),t("button",null),t("eventName","click"),t("ifFormat","%Y/%m/%d"),t("daFormat","%Y/%m/%d"),t("singleClick",!0),t("disableFunc",null),t("dateStatusFunc",e.disableFunc),t("dateText",null),t("firstDay",null),t("align","Br"),t("range",[1900,2999]),t("weekNumbers",!0),t("useISO8601WeekNumbers",!1),t("flat",null),t("flatCallback",null),t("onSelect",null),t("onClose",null),t("onUpdate",null),t("date",null),t("todayDate",null),t("showsTime",!1),t("timeFormat","24"),t("electric",!0),t("step",1),t("position",null),t("cache",!1),t("showOthers",!1),t("multiple",null);var i,r,u=["context","inputField","button","displayArea"];for(i in u)r=u[i],e[r]instanceof jQuery&&(e[r]=e[r][0]);var s=["inputField","displayArea","button"];for(i in s)if(r=s[i],"string"==typeof e[r]){var o="#"+e[r].escapejQuerySelector(),d=jQuery(e.context||document.body).find(o);e[r]=d[0]}if(!(e.flat||e.multiple||e.inputField||e.displayArea||e.button))return AJS.log("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(e.firstDay&&null!==e.firstDay&&(e.firstDay=+e.firstDay),null!=e.flat){if("string"==typeof e.flat&&(e.flat=document.getElementById(e.flat)),!e.flat)return AJS.log("Calendar.setup:\n  Flat specified but can't find parent."),!1;var p=new Calendar(e.firstDay,e.date,e.todayDate,e.onSelect||a);return p.showsOtherMonths=e.showOthers,p.showsTime=e.showsTime,p.time24="24"==e.timeFormat,p.params=e,p.weekNumbers=e.weekNumbers,p.setRange(e.range[0],e.range[1]),p.setDateStatusHandler(e.dateStatusFunc),p.getDateText=e.dateText,e.ifFormat&&p.setDateFormat(e.ifFormat),e.inputField&&"string"==typeof e.inputField.value&&p.parseDate(e.inputField.value),p.create(e.flat),p.show(),!1}var f=e.button||e.displayArea||e.inputField;return jQuery(f).bind(e.eventName,function(e){e.preventDefault(),n()}),e.inputField&&l(),p};;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jquery"),d=[];return{current:null,addInstance:function(){d.push(this)},hideInstances:function(){var i=this;t(d).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var i=this.dropdown;o()||setTimeout(function(){var o=t(window),n=i.offset().top+i.prop("offsetHeight")-o.height()+10;o.scrollTop()<n&&t("html,body").animate({scrollTop:n},300,"linear")},100)}},hideDropdown:function(){this.displayed!==!1&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=t(o),this.dropdown.css({display:"none"}),t(document).keydown(function(i){9===i.keyCode&&n.hideDropdown()}),i.target?t.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",t(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),t(document.body).click(function(){n.displayed&&n.hideDropdown()})}}}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/objects","jquery","jira/featureflags/feature-manager"],function(e,t,o,n){return function(){var i,s=function(e,t){s.t&&(clearTimeout(s.t),s.t=void 0),s.t=setTimeout(e,1e3*t)},r={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeField:function(e){e&&(this.field.val(e).focus(),this.field.trigger("change"))},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(o){var n=this,i=t.copyObject(o);return this.pendingRequest&&this.pendingRequest.abort(),i.complete=function(){n.pendingRequest=null},i.error=function(e){!e.aborted&&0!==e.status&&o.error&&o.error.apply(this,arguments)},this.pendingRequest=e.makeRequest(i)},addSuggestionControls:function(e){function t(e){d.dropdownController.displayed&&a(e.data.index)}function s(e){0===e.data.index&&(d.selectedIndex=-1),o(this).removeClass("active")}function r(e){d.completeField(d.suggestionNodes[e.data.index][1])}var d=this,l=function(e,t){var o=d.autoSelectFirst===!1?-1:0;return d.allowArrowCarousel?e>t?o:e<o?t:e:e>t?t:e<o?(d.responseContainer.scrollTop(0),o):e},a=function(e){void 0!==d.selectedIndex&&d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].removeClass("active"),d.selectedIndex=l(e,d.suggestionNodes.length-1),d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].addClass("active")},u=function(){return d.suggestionNodes&&d.suggestionNodes[d.selectedIndex]&&d.suggestionNodes[d.selectedIndex][0].hasClass("active")},p=function(){return n.isFeatureEnabled("jira.jql.autoselectfirst")},c=function(e){d.responseContainer.is(":visible")&&13===e.keyCode&&(u()&&!d.pendingRequest&&(d.completeField(d.suggestionNodes[d.selectedIndex][1]),p()&&d.dispatcher(d.field.val())),e.preventDefault(),e.stopPropagation())},h=function(e){if(d.responseContainer.is(":visible"))if(d.field[0]!==document.activeElement&&d.field.focus(),40===e.keyCode){if(a(d.selectedIndex+1),d.selectedIndex>=0){var t=d.responseContainer.height(),o=d.suggestionNodes[d.selectedIndex][0].position().top+d.suggestionNodes[d.selectedIndex][0].outerHeight();o-t>0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+o-t+2)}else d.responseContainer.scrollTop(0);e.preventDefault()}else if(38===e.keyCode){if(a(d.selectedIndex-1),d.selectedIndex>=0){var n=d.suggestionNodes[d.selectedIndex][0].position().top;n<0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+n-2)}e.preventDefault()}else 9===e.keyCode&&(u()?(d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault()):d.dropdownController.hideDropdown())};if(e.length){this.selectedIndex=0,this.suggestionNodes=e;for(var f=0;f<d.suggestionNodes.length;f++){var g={instance:this,index:f};this.suggestionNodes[f][0].bind("mouseover",g,t).bind("mouseout",g,s).bind("click",g,r).bind("mousedown",function(e){e.preventDefault()})}this.keyboardHandlerBinded||(o(this.field).keypress(c),o(this.field).keydown(h),this.keyboardHandlerBinded=!0),a(d.autoSelectFirst===!1?-1:0),i=this}},clearResponseContainer:function(){this.responseContainer.empty(),this.suggestionNodes=void 0},delay:s,buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=o(document.createElement("div")),this.responseContainer.addClass("suggestions"),this.positionResponseContainer(),this.responseContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer(),this.dispatcher(this.field.val())}return function(t){return this.field.val().length>=this.minQueryLength&&(t.keyCode in r&&(!this.responseContainer||this.responseContainer.is(":visible")||38!==t.keyCode&&40!==t.keyCode)||e.call(this)),t}}(),addMultiSelectAdvice:function(e){var t=this,n=function(e){if(!n.isAlerting){n.isAlerting=!0;var i=o(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+e+"</em>").appendTo(t.field.parent()).show("fast",function(){t.delay(function(){i.hide("fast",function(){i.remove(),n.isAlerting=!1})},4)})}};o.aop.before({target:this,method:"dispatcher"},function(t){var n=this.field.val();return t[0]=o.trim(n.slice(n.lastIndexOf(e)+1)),t}),o.aop.before({target:this,method:"completeField"},function(t){var i=t[0],s=this.field.val().split(e),r=o(s).map(function(){return o.trim(this)}).get();return!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+i+"\\s*"+e).test(this.field.val())?(n(i),r[r.length-1]=""):(r[r.length-1]=i,r[r.length]=""),t[0]=r.join(e.replace(/([^\s]$)/,"$1 ")),t})},addDropdownAdvice:function(){o.aop.after({target:this,method:"buildResponseContainer"},function(e){return this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer),o.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready")}),e}),o.aop.after({target:this,method:"renderSuggestions"},function(e){return e&&e.length>0?(this.dropdownController.displayDropdown(),this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""}),this.dropdownController.dropdown.addClass("dropdown-ready")):this.dropdownController.hideDropdown(),e}),o.aop.after({target:this,method:"completeField"},function(e){return this.dropdownController.hideDropdown(),e}),o.aop.after({target:this,method:"keyUpHandler"},function(e){return this.field.val().length>=this.minQueryLength&&27!==e.keyCode||!this.dropdownController||!this.dropdownController.displayed||(this.dropdownController.hideDropdown(),27===e.keyCode&&e.stopPropagation()),e})},init:function(e){var t=this;this.set(e),this.field=this.field||o("#"+this.fieldID),this.field.attr("autocomplete","off").keyup(function(e){t.disabled||t.keyUpHandler(e)}).keydown(function(e){var o=27;e.keyCode===o&&t.responseContainer&&t.responseContainer.is(":visible")&&e.preventDefault()}).click(function(e){i===t&&e.stopPropagation()}).blur(function(){t.pendingRequest&&t.pendingRequest.abort()}),this.addDropdownAdvice(),e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}}}()}),AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete")),AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(e,t){return function(){var s=t.begetObject(e);return s.dispatcher=function(e){var t=this;e.length<this.minQueryLength||(this.getSavedResponse(e)?(t.renderSuggestions(t.getSavedResponse(e)),t.responseContainer.scrollTop(0)):this.delay(function(){var s=t.getAjaxParams();s.data.query=e,s.success=function(s){t.saveResponse(e,s),t.responseContainer.scrollTop(0),t.renderSuggestions(s)},t._makeRequest(s)},t.queryDelay))},s.getAjaxParams=function(){},s.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},s.saveResponse=function(e,t){"string"==typeof e&&"object"==typeof t&&(this.requested||(this.requested={}),this.requested[e]=t)},s}()}),AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete")),AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],function(e,t,s,a,i,n){var r=i(),d=function(e){var t=a.begetObject(s);return t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}},t.renderSuggestions=function(s){var a,i=[];if(this.clearResponseContainer(),s&&s.sections&&s.sections.length>0)return a=n("<ul/>").appendTo(this.responseContainer),n(s.sections).each(function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);if(t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")")),a.append(n("<li/>").append(s).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")})),t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")}))}t.issues&&t.issues.length>0&&n(t.issues).each(function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d),i.push([d,this.key])})}),t.addSuggestionControls(i),i},e.minQueryLength=1,e.queryDelay=.25,t.init(e),t};return d.init=function(){n("fieldset.issue-picker-params").each(function(){var s=e(n(this)),a=n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container");a.find("a.popup-trigger").click(function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&",a+="singleSelectOnly="+s.singleSelectOnly+"&",a+="showSubTasks="+s.showSubTasks+"&",a+="showSubTasksParent="+s.showSubTaskParent,s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId),t.callback=function(e){var t,a=[];e=JSON.parse(e),s.fieldId&&a&&(t=n("#"+s.fieldId),t&&(n.each(e,function(){a.push(this.value)}),t.val(a.join(", "))))};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self,i.focus(),e.preventDefault()}),s.fieldId||(s.fieldId=s.fieldName),s.issuePickerEnabled===!0&&d({fieldID:s.fieldId,delimChar:s.singleSelectOnly===!0?void 0:",",ajaxData:s})})},d}),AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete")),AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/util/browser","jira/util/elements","jira/util/objects","jquery"],function(e,t,i,r,o,a){var n=function(t){function n(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var s=o.begetObject(e);return s.getAjaxParams=function(){return{url:contextPath+"/rest/api/1.0/users/picker",data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}},s.renderSuggestions=function(e){if(n(this.field)||!i.isSelenium()&&!r.elementIsFocused(this.field))return!1;var t,o=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=a("<ul/>").appendTo(this.responseContainer),a(e.users).each(function(){o.push([a("<li/>").html(this.html).appendTo(t),this.name])})),e.footer&&this.responseContainer.append(a("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),o.length>0&&(s.addSuggestionControls(o),a(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),o},t.minQueryLength=2,t.queryDelay=.25,s.init(t),s};return n.init=function(e){a("fieldset.user-picker-params",e).each(function(){var i=t(a(this)),r=i.fieldId||i.fieldName,o=a("#"+r+"_container");o.find("a.popup-trigger").click(function(e){var t,n=contextPath;if(e.preventDefault(),i.formName||(i.formName=o.find("#"+r).parents("form").attr("name")),n+=i.actionToOpen?i.actionToOpen:"/secure/popups/UserPickerBrowser.jspa",n+="?formName="+i.formName+"&",n+="multiSelect="+i.multiSelect+"&",n+="decorator=popup&",n+="element="+r,i.fieldConfigId&&(n+="&fieldConfigId="+i.fieldConfigId),i.projectId)if(a.isArray(i.projectId))for(var s in i.projectId)n+="&projectId="+s;else n+="&projectId="+i.projectId;t=window.open(n,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes"),t.opener=self,t.focus()}),i.userPickerEnabled===!0&&n({field:e?e.find("#"+r):null,fieldID:r,fieldConfigID:i.fieldConfigId,projectId:i.projectId,delimChar:i.multiSelect===!1?void 0:",",ajaxData:{fieldName:i.fieldName}})})},n}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t,i){i!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&(JIRA.UserAutoComplete.init(t),JIRA.IssueAutoComplete.init(t))}),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t,i){i!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&AJS.$("fieldset.user-searcher-params",t).each(function(){var e=JIRA.parseOptionsFromFieldset(AJS.$(this)),i=AJS.$("#"+e.fieldId+"_container",t);if(e.userPickerEnabled===!0)var r=JIRA.UserAutoComplete({fieldID:e.fieldId,delimChar:e.multiSelect===!0?",":void 0,ajaxData:{fieldName:e.fieldName}});var s=function(i){var s=AJS.$("#"+e.fieldId,t),o=AJS.$("#"+e.fieldId+"Image",t),l=AJS.$("#"+e.fieldId+"GroupImage",t),a=AJS.$("#"+e.fieldId+"_desc",t);"select.list.none"===i?(s.val("").attr("disabled","true"),o.hide(),l.hide(),a.hide()):(s.removeAttr("disabled"),"select.list.group"===i?(o.hide(),l.show(),e.userPickerEnabled===!0&&(r.disable(),a.hide())):(o.show(),l.hide(),e.userPickerEnabled===!0&&(r.enable(),a.show())))};AJS.$("#"+e.userSelect,t).change(function(){var e=AJS.$(this).find("option:selected").attr("rel");s(e)}).find("option:selected").each(function(){s(AJS.$(this).attr("rel"))}),i.find("a.user-popup-trigger").click(function(t){var i=contextPath+"/secure/popups/UserPickerBrowser.jspa?";i+="formName="+e.formName+"&",i+="multiSelect="+e.multiSelect+"&",i+="decorator=popup&",i+="element="+e.fieldId;var r=window.open(i,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");r.opener=self,r.focus(),t.preventDefault()}),i.find("a.group-popup-trigger").click(function(t){var i=contextPath+"/secure/popups/GroupPickerBrowser.jspa?";i+="formName="+e.formName+"&",i+="multiSelect="+e.multiSelect+"&",i+="decorator=popup&",i+="element="+e.fieldId;var r=window.open(i,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");r.opener=self,r.focus(),t.preventDefault()})})})}();;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.js' */
define("jira/admin/group-browser/group-label-lozenge",["jquery","jira/skate"],function(e,t){t("group-label-lozenge",{type:t.type.CLASSNAME,attached:function(t){e(t).tooltip({gravity:"w",html:!0})}})});;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = 'includes/jira/admin/group-browser/group-label-lozenge.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),JIRA.Templates.groupLabelLozenge=function(e,l){return""+aui.lozenges.lozenge({text:e.label.text,title:e.label.title,isSubtle:!0,extraClasses:"group-label-lozenge"})};;
;
/* module-key = 'jira.webresources:groupbrowser', location = '/includes/jira/admin/group-browser/group-browser.js' */
require(["jquery","jira/admin/group-browser/group-label-lozenge"],function(i){i(function(){i(".operations-list .aui-button[disabled]").tooltip({gravity:"e",html:!1})})});;
;
/* module-key = 'jira.webresources:group-pickers', location = 'includes/jira/field/templates/groupPickerUtil.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.GroupPickerUtil&&(JIRA.Templates.GroupPickerUtil={}),JIRA.Templates.GroupPickerUtil.formatResponseWithLabels=function(e,s){return""+JIRA.Templates.GroupPickerUtil.formatResponse(soy.$$augmentMap(e,{showLabels:!0}))},JIRA.Templates.GroupPickerUtil.formatResponse=function(e,s){var t='<div class="group-suggestion-item"><span class="group-suggestion-item__name">'+soy.$$filterNoAutoescape(e.html)+"</span>";if(e.showLabels){t+='<span class="group-suggestion-item__labels group-labels-lozenges">';for(var a=e.labels,o=a.length,l=0;l<o;l++){var p=a[l];t+=JIRA.Templates.groupLabelLozenge({label:p})+" "}t+="</span>"}return t+="</div>"};;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/templates/group-picker-util-template-wrapper.js' */
define("jira/field/group-picker-util/templates",[],function(){"use strict";return window.JIRA.Templates.GroupPickerUtil});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/groupPickerUtil.js' */
define("jira/field/group-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery","jira/field/group-picker-util/templates"],function(e,i,r,t){var a=function(a,n){var s=[],u=n?t.formatResponseWithLabels:t.formatResponse;return r(a).each(function(t,a){var n=new i({weight:t,label:a.header});r(a.groups).each(function(){n.addItem(new e({value:this.name,label:this.name,title:this.name,html:u(this),highlighted:!0}))}),s.push(n)}),s};return{formatResponseWithLabels:function(e){return a(e,!0)},formatResponse:function(e,i){return a(e,i)}}}),AJS.namespace("JIRA.GroupPickerUtil",null,require("jira/field/group-picker-util"));;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initMultiGroupPickers.js' */
define("jira/field/init-multi-group-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,r,n){function s(i){i.find(".js-default-multi-group-picker").each(function(){var i=e(this),a=i.data("show-labels")===!0,r=i.data("user-name");new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,ajaxOptions:{data:function(e){return{userName:r,query:e,exclude:i.val()}},url:contextPath+"/rest/api/2/groups/picker",query:!0,formatResponse:a?n.formatResponseWithLabels:n.formatResponse}})})}r.bind(a.NEW_CONTENT_ADDED,function(e,t,a){a!==i.panelRefreshed&&s(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initSingleGroupPickers.js' */
define("jira/field/init-single-group-pickers",["jira/ajs/select/single-select","jquery","jira/ajs/list/item-descriptor","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,n,a,r,s){function l(n){n.find(".js-default-single-group-picker").each(function(){var n=t(this),a=n.find("option[data-empty]"),r=n.data("show-labels")===!0,l=n.data("user-name");new e({element:this,itemAttrDisplayed:"label",revertOnInvalid:!0,ajaxOptions:{data:function(e){return{userName:l,query:e,exclude:n.val()}},url:contextPath+"/rest/api/2/groups/picker",query:!0,formatResponse:function(e){var t=s.formatResponse(e,r);return a.length&&""!==n.val()&&t.unshift(new i({value:"",label:a.text(),highlighted:!0})),t}}})})}r.bind(a.NEW_CONTENT_ADDED,function(e,t,i){i!==n.panelRefreshed&&l(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/init/init-group-pickers-webresource.js' */
require("jira/field/init-multi-group-pickers"),require("jira/field/init-single-group-pickers");;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){return{formatResponse:function(t){var a=[];return r(t).each(function(t,l){var s=new i({weight:t,label:l.footer});r(l.users).each(function(){s.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),a.push(s)}),a}}}),AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
define("jira/field/init-single-user-pickers",["jquery","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/user-picker-util","jira/util/formatter"],function(e,t,i,a,r,s,n){function u(i){var a="/rest/api/1.0/users/picker";e(".js-default-user-picker",i).each(function(){var i=e(this);if(!i.data("aui-ss")){var r={showAvatar:!0},u=i.data("inputValue");new t({element:i,submitInputVal:!0,showDropdownButton:!!i.data("show-dropdown-button"),errorMessage:n.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+a,query:!0,data:r,formatResponse:s.formatResponse},inputText:u})}})}r.bind(a.NEW_CONTENT_ADDED,function(e,t,a){a!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
define("jira/field/no-browser-user-name-picker",["require"],function(e){var t=e("jquery"),r=e("jira/ajs/list/item-descriptor"),a=e("jira/ajs/select/multi-select"),i=e("jira/util/formatter");return a.extend({_getDefaultOptions:function(){return t.extend(!0,this._super(),{errorMessage:"The requested user does not exist.",showDropdownButton:!1,removeOnUnSelect:!0,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(e){404===e.status?this.showErrorMessage():this._super()},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var e=this;""===t.trim(this.$field.val())?this.hideErrorMessage():t.ajax({url:contextPath+"/rest/api/2/user",data:{username:t.trim(e.getQueryVal())},success:function(t){e.hideErrorMessage(),e.$field.val(""),e.addItem(new r({label:t.displayName,value:t.name}))},error:function(){e.showErrorMessage()}})},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage(),this.handleFreeInput()},handleFreeInput:function(){var e=t.trim(this.$field.val());""!==e&&(this.addItem({value:e,label:e}),this.model.$element.trigger("change")),this.$field.val("")},keys:{Return:function(e){e.preventDefault(),this.validateAndAdd()},Spacebar:function(e){e.preventDefault(),this.validateAndAdd()}}})}),AJS.namespace("AJS.NoBrowseUserNamePicker",null,require("jira/field/no-browser-user-name-picker"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
define("jira/field/init-multi-user-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/no-browser-user-name-picker","jira/field/user-picker-util"],function(e,t,r,i,n,s,a){function u(r){r.find(".js-default-multi-user-picker").each(function(){var r=e(this);AJS.params.currentUserCanBrowseUsers?new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:contextPath+"/rest/api/1.0/users/picker",query:!0,data:function(e){return{showAvatar:!0,query:e,exclude:r.val()}},formatResponse:a.formatResponse}}):new s({element:this})})}n.bind(i.NEW_CONTENT_ADDED,function(e,t,i){i!==r.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/init/init-user-pickers-webresource.js' */
require("jira/field/init-multi-user-pickers"),require("jira/field/init-single-user-pickers");;
;
/* module-key = 'jira.webresources:ie-imitation-placeholder', location = '/includes/jira/field/IEImitationPlaceholder.js' */
require(["jquery"],function(e){e.fn.ieImitationPlaceholder=function(){function a(){var a=e(this);""===a.val()&&(a.val(a.attr("placeholder")),a.addClass("input-placeholder"))}function l(){var a=e(this);a.val()===a.attr("placeholder")&&(a.val(""),a.removeClass("input-placeholder"))}function i(){t.each(l)}if(e.browser.msie){var r=this,t=r.find("[placeholder]");t.focus(l),t.blur(a),r.submit(i),t.each(a)}}});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/ProjectIssueTypeSelect.js' */
define("jira/field/project-issue-type-select",["jira/lib/class"],function(e){return e.extend({init:function(e){var s,t=this;this.$project=e.project,this.issueTypeSelect=e.issueTypeSelect,this.$projectIssueTypesSchemes=e.projectIssueTypesSchemes,this.$issueTypeSchemeIssueDefaults=e.issueTypeSchemeIssueDefaults,this.projectIssueTypeSchemes=JSON.parse(this.$projectIssueTypesSchemes.html()),this.issueTypesSchemeDefaults=JSON.parse(this.$issueTypeSchemeIssueDefaults.html()||"[]"),t.$project.length>0&&(s=t.$project.val(),t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(s)),this.$project.change(function(){var e=t.$project.val();t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(e))}))},getIssueTypeSchemeForProject:function(e){return this.projectIssueTypeSchemes[e]},getDefaultIssueTypeForScheme:function(e){return this.issueTypesSchemeDefaults[e]},setIssueTypeScheme:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueType(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setDefaultIssueType:function(e){var s=this.getDefaultIssueTypeForScheme(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)}})}),AJS.namespace("JIRA.ProjectIssueTypeSelect",null,require("jira/field/project-issue-type-select"));;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectIssueTypeSelect.js' */
define("jira/field/init-project-issue-type-select",["jira/ajs/select/suggestion-collection-model","jquery","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/project-issue-type-select"],function(e,t,i,s,n,l,r){function c(s){var n=s||t("body");n.find(".issuetype-field").each(function(s){var l=n.find(".project-field, .project-field-readonly"),c=t(this),d=n.find("#"+c.attr("id")+"-projects"),o=n.find("#"+c.attr("id")+"-defaults"),a=new i({element:c,revertOnInvalid:!0,model:e});a.model.remove(""),l.length>0&&new r({project:l.eq(s),issueTypeSelect:a,projectIssueTypesSchemes:d,issueTypeSchemeIssueDefaults:o})})}l.bind(n.NEW_CONTENT_ADDED,function(e,t,i){i!==s.panelRefreshed&&c(t)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initIssueTypePickers.js' */
;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectPickers.js' */
define("jira/field/init-project-pickers",["jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t,l){function s(n){n.find(".project-field").each(function(){new e({element:this,revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:i})})}l.bind(t.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/init/init-jira-project-issuetype-fields-webresource.js' */
require("jira/field/init-project-issue-type-select"),require("jira/field/init-project-pickers");;
;
/* module-key = 'jira.webresources:jira-fields', location = 'includes/jira/field/field-templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),JIRA.Templates.Fields.username=function(e,s){return""+(e.escape?soy.$$escapeHtml(e.displayName):soy.$$filterNoAutoescape(e.displayName))},JIRA.Templates.Fields.recipientUsername=function(e,s){return'<li data-username="'+soy.$$escapeHtml(e.username)+'" title='+soy.$$escapeHtml(e.username)+'><span><span class="user-hover" rel="'+soy.$$escapeHtml(e.username)+'"><img alt="" src="'+soy.$$escapeHtml(e.icon)+'" title="'+JIRA.Templates.Fields.username(e)+'"><span title="'+JIRA.Templates.Fields.username(e)+'">'+JIRA.Templates.Fields.username(e)+"</span></span>"+(e.readOnly?"":'<button type="button" class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml(AJS.format("Remove watcher: {0}",e.username))+"</span></button>")+"</span></li>"},JIRA.Templates.Fields.recipientEmail=function(e,s){return'<li data-email="'+soy.$$escapeHtml(e.email)+'" title='+soy.$$escapeHtml(e.email)+'><span><img src="'+soy.$$escapeHtml(e.icon)+'" title="'+soy.$$escapeHtml(e.email)+'"><span title="'+soy.$$escapeHtml(e.email)+'">'+soy.$$escapeHtml(e.email)+'</span><span class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete"></span></span></span></li>'};;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPicker.js' */
define("jira/field/label-picker",["jira/util/formatter","jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery"],function(e,t,i,s,a,l){var n=a();return t.extend({_getDefaultOptions:function(){return l.extend(!0,this._super(),{ajaxOptions:{url:n+"/includes/js/ajs/layer/labeldata.js",query:!0,formatResponse:this._formatResponse},removeDuplicates:!0,removeOnUnSelect:!0,userEnteredOptionsMsg:"New Label"})},isValidItem:function(e){return!/\s/.test(e)},_handleServerSuggestions:function(e){e&&e.token&&l.trim(this.$field.val())!==e.token||this._super(e)},_handleSpace:function(){""!==l.trim(this.$field.val())&&this.handleFreeInput()&&this.hideSuggestions()},keys:{Spacebar:function(e){this._handleSpace(),e.preventDefault()}},_formatResponse:function(t){var a=new i({label:"Suggestions",type:"optgroup",styleClass:"labels-suggested"});return t&&t.suggestions&&l.each(t.suggestions,function(){a.addItem(new s({value:this.label,label:this.label,html:this.html,highlighted:!0}))}),[a]},handleFreeInput:function(){var e=l.trim(this.$field.val()).match(/\S+/g);if(e){for(var t,i=0;t=e[i];i++)this.addItem({value:t,label:t});this.model.$element.trigger("change")}this.$field.val("")}})}),AJS.namespace("AJS.LabelPicker",null,require("jira/field/label-picker")),AJS.namespace("JIRA.LabelPicker",null,require("jira/field/label-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPickerFactory.js' */
define("jira/field/label-picker-factory",["jira/field/label-picker","jira/data/parse-options-from-fieldset","jquery","exports"],function(e,i,t,a){a.createPicker=function(a,r){var s=i(a),d=t("#"+s.id,r),l=s.issueId,c={};/customfield_\d/.test(s.id)&&(c.customFieldId=parseInt(s.id.replace("customfield_",""),10)),new e({element:d,ajaxOptions:{url:contextPath+"/rest/api/1.0/labels"+(l?"/"+l:"")+"/suggest",data:c}})}});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.Item.js' */
define("jira/field/multi-user-list-picker/item",["jira/util/data/meta","jira/ajs/control","jquery"],function(e,t,i){return t.extend({init:function(e){this._setOptions(e),this.$lozenge=this._render("item"),this.$removeButton=this.$lozenge.find(".remove-recipient"),this._assignEvents("instance",this),this._assignEvents("lozenge",this.$lozenge),this._assignEvents("removeButton",this.$removeButton),this.$lozenge.prependTo(this.options.container)},_getDefaultOptions:function(){return{label:null,title:null,container:null,focusClass:"focused"}},_renders:{item:function(){var t,n=this.options.descriptor;return n.noExactMatch()!==!0?(t={escape:!1,username:n.value(),icon:n.icon(),displayName:AJS.escapeHtml(n.label())},i(JIRA.Templates.Fields.recipientUsername(t))):(t={email:n.value(),icon:e.get("default-avatar-url")},i(JIRA.Templates.Fields.recipientEmail(t)))}},_events:{instance:{remove:function(){this.$lozenge.remove()}},removeButton:{click:function(e){e.stopPropagation(),this.trigger("remove")}}}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.js' */
define("jira/field/multi-user-list-picker",["jira/util/formatter","jira/field/multi-user-list-picker/item","jira/ajs/select/suggestions/user-list-suggest-handler","jira/ajs/select/multi-select","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jira/ajs/group","jquery"],function(e,t,i,r,s,n,a,l){return r.extend({init:function(r){function u(e){var t=[];return l(e).each(function(e,i){var r=new n({weight:e,label:i.footer});l(i.users).each(function(){r.addItem(new s({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),t.push(r)}),t}var o="/rest/api/1.0/users/picker";l.extend(r,{itemAttrDisplayed:"label",userEnteredOptionsMsg:"Email address",showDropdownButton:!1,removeOnUnSelect:!0,ajaxOptions:{url:contextPath+o,query:!0,data:{showAvatar:!0},formatResponse:u},suggestionsHandler:i,itemGroup:new a,itemBuilder:function(e){return new t({descriptor:e,container:this.$selectedItemsContainer})}}),this._super(r)},_createFurniture:function(e){this._super(e),this.options.description&&this._render("description",this.options.description).insertAfter(this.$field)},updateItemsIndent:l.noop,_renders:{selectedItemsWrapper:function(){return l('<div class="recipients" />')},selectedItemsContainer:function(){return l("<ol />")},description:function(e){return l("<div />").addClass("description").text(e)}}})}),AJS.namespace("JIRA.MultiUserListPicker",null,require("jira/field/multi-user-list-picker")),AJS.namespace("JIRA.MultiUserListPicker.Item",null,require("jira/field/multi-user-list-picker/item"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCascadingSelects.js' */
define("jira/field/init-cascading-selects",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function a(i){e(i||document.body).find("div.aui-field-cascadingselect").add("tr.aui-field-cascadingselect").add("td.aui-field-cascadingselect").each(function(){function i(){var i,n=t.find("option:selected").attr("class");n!==a&&(i=e("<span />").insertAfter(d),d.detach(),d.find("option").each(function(e,i){i.parentNode.removeChild(this)}),d.insertAfter(i),i.remove(),c.filter("."+t.find("option:selected").attr("class")).appendTo(d),s.hasClass(t.find("option:selected").attr("class"))?d.val(s.val()):d.val(d.find("option:first").val()),a=n)}var n=e(this),t=n.find(".cascadingselect-parent"),a=(t.find("option"),""),d=n.find(".cascadingselect-child"),c=d.find("option"),s=d.find(":selected");t.bind("cascadingSelectChanged",i).change(function(){e(this).trigger("cascadingSelectChanged")}).trigger("cascadingSelectChanged")})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&a(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/ComponentPicker.js' */
define("jira/field/component-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,n,s,i,r){return s.extend({init:function(e){this._super(e),this.suggestionsHandler=new n(this.options,this.model)},_getDefaultOptions:function(t){var n=!1;return t&&t.element&&(n=r(t.element).data("create-permission")),n?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Component"}):this._super(t)},_selectionHandler:function(e,n){var s=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor"),o=i.find(s,function(e){return e.label()===r.label()});o||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Component.new.selected",[r.value()])),this._super(e,n)}})}),AJS.namespace("JIRA.ComponentPicker",null,require("jira/field/component-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initComponentPickers.js' */
define("jira/field/init-component-pickers",["jira/field/component-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,n,r,t,i,o){function l(r){new e({element:r,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid component.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var n,r=o(e);return n=r.is("select")?r:r.find("select")}function c(e,n){n=n||s.join(", "),o(n,e).each(function(){var e=a(this);e.length&&l(e)})}var s=["div.aui-field-componentspicker.frother-control-renderer","td.aui-field-componentspicker.frother-control-renderer","tr.aui-field-componentspicker.frother-control-renderer"];r.bind(t.NEW_CONTENT_ADDED,function(e,n,r){r!==i.panelRefreshed&&c(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initMultiselectPickers.js' */
define("jira/field/init-multi-select-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/util/formatter"],function(e,t,i,n,l,r){function s(e){new t({element:e,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,submitInputVal:!0,expandAllResults:!0})}function a(t){var i,n=e(t);return i=n.is("select")?n:n.find("select")}function u(t,i){i=i||c.join(", "),e(i,t).each(function(){var e=a(this);e.length&&s(e)})}var c=["div.aui-field-multiselectpicker.frother-control-renderer"];l.bind(n.NEW_CONTENT_ADDED,function(e,t,n){n!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initDatePickers.js' */
define("jira/field/init-date-pickers",["jquery","jira/data/parse-options-from-fieldset","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,t,d,n){function a(t){e(t||document.body).find("div.aui-field-datepicker").add("tr.aui-field-datepicker").add("td.aui-field-datepicker").each(function(){function d(){a.prop("disabled",r.is(":checked"))}var n=e(this),a=n.find("input:text"),r=n.find("#useCurrentDate"),f=i(n.find("fieldset.datepicker-params"));f.context=t,Calendar.setup(f),r.length&&(d(),r.click(d))})}n.bind(d.NEW_CONTENT_ADDED,function(e,i,d){d!==t.panelRefreshed&&a(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLegacyGroupPickers.js' */
define("jira/field/init-legacy-group-pickers",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,r,t){function n(i){e(i||document.body).find("div.aui-field-grouppicker").add("tr.aui-field-grouppicker").add("td.aui-field-grouppicker").each(function(){function i(e){e.preventDefault(),window.open(n,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes")}var r=e(this),t=r.find("a.grouppicker-trigger"),n=t.attr("href");t.click(i)})}t.bind(r.NEW_CONTENT_ADDED,function(e,r,t){t!==i.panelRefreshed&&n(r)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initIssuePickers.js' */
define("jira/field/init-issue-pickers",["jira/field/issue-picker","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/util/formatter"],function(e,i,n,t,s,r){function u(i){s(i||document.body).find(".aui-field-issuepicker").each(function(){new e({element:s(this),userEnteredOptionsMsg:"Enter issue key",uppercaseUserEnteredOnSelect:!0})})}i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&u(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLabelPickers.js' */
define("jira/field/init-label-pickers",["jira/field/label-picker-factory","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,a){function t(e){var i,n=a(e);return i=n.is(c)?n:n.find(c)}function l(i,n){n=n||".aui-field-labelpicker",a(n,i).each(function(){var n=t(this);n.length>0&&e.createPicker(n,i)})}var c="fieldset.labelpicker-params";i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==r.panelRefreshed&&l(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/VersionPicker.js' */
define("jira/field/version-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,s,i,n,r){return i.extend({init:function(e){this._super(e),this.suggestionsHandler=new s(this.options,this.model)},_getDefaultOptions:function(t){var s=!1;return t&&t.element&&(s=r(t.element).data("create-permission")),s?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Version"}):this._super(t)},_selectionHandler:function(e,s){var i=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor"),l=n.find(i,function(e){return e.label()===r.label()});l||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Version.new.selected",[r.value()])),this._super(e,s)}})}),AJS.namespace("JIRA.VersionPicker",null,require("jira/field/version-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initVersionPickers.js' */
define("jira/field/init-version-pickers",["jira/field/version-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,t,s){function l(n){new e({element:n,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid version.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var i,n=s(e);return i=n.is("select")?n:n.find("select")}function o(e,i){i=i||".aui-field-versionspicker.frother-control-renderer",s(i,e).each(function(){var e=a(this);e.length&&l(e)})}n.bind(r.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&o(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCommentControls.js' */
define("jira/field/init-comment-controls",["jira/skate","jira/ajs/select/security-level-select","jira/wikipreview/wiki-preview"],function(e,i,t){e("jira-wikifield",{type:e.type.CLASSNAME,created:function(e){var i={fieldId:e.getAttribute("field-id"),trigger:e.querySelector(".wiki-preview").id,issueKey:e.getAttribute("issue-key"),rendererType:e.getAttribute("renderer-type")};t(i,e).init()}}),e("security-level",{type:e.type.CLASSNAME,created:function(e){var t=e.querySelector("#commentLevel");t&&new i(t)}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLogWorkControls.js' */
define("jira/field/init-log-work-controls",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,t,a,i){function n(e,t){var a=i(e).find("#worklog-logworkcontainer"),n=i(e).find("#worklog-timetrackingcontainer"),d=i(e).find("#log-work-activate");t?(a.removeClass("hidden"),n.addClass("hidden"),d.prop("checked",!0)):(a.addClass("hidden"),n.removeClass("hidden"),d.prop("checked",!1))}function d(e){i("#log-work-adjust-estimate-new-value, #log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked",e).val()+"-value",e).removeAttr("disabled"),i("input[name=worklog_adjustEstimate],input[name=adjustEstimate]",e).change(function(){i("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i(this).val()+"-value",e).removeAttr("disabled")}),i("#delete-log-work-adjust-estimate-new-value").change(function(){i("#delete-log-work-adjust-estimate-new").prop("checked",!0)}),i("#delete-log-work-adjust-estimate-manual-value").change(function(){i("#delete-log-work-adjust-estimate-manual").prop("checked",!0)}),i(e).find("#log-work-activate").change(function(){n(e,i(this).is(":checked"))})}e.bind(t.VALIDATE_TIMETRACKING,function(e,t){n(t,!0)}),e.bind(t.NEW_CONTENT_ADDED,function(e,t,i){i!==a.panelRefreshed&&d(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initPriorityPickers.js' */
define("jira/field/init-priority-pickers",["jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function r(i){i.find("select#priority").each(function(i,n){new e({element:n,revertOnInvalid:!0})})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&r(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initInlineAttach.js' */
define("jira/field/init-inline-attach",["jquery","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/analytics","jira/jquery/plugins/attachment/inline-attach"],function(i,n,e,t,a){function r(i){i.find("input[type=file]:not('.ignore-inline-attach')").inlineAttach()}n.bind(e.NEW_CONTENT_ADDED,function(i,n,e){if(e!==t.panelRefreshed)try{r(n)}catch(i){a.send({name:"field.inline.attach.error",properties:{reason:i}})}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/issue/initIssueFields.js' */
require(["jira/skate","jira/ajs/select/single-select","jira/ajs/select/multi-select","jira/util/formatter","jquery"],function(e,t,l,s,a){e("single-select-issue-field",{type:e.type.CLASSNAME,attached:function(e){a(e).hasClass("aui-ss-select")||new t({element:e,revertOnInvalid:!0})}}),e("multi-select-issue-field",{type:e.type.CLASSNAME,attached:function(e){a(e).hasClass("multi-select-select")||new l({element:e,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,expandAllResults:!0})}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/init/init-jira-fields-webresource.js' */
require("jira/field/init-cascading-selects"),require("jira/field/init-component-pickers"),require("jira/field/init-multi-select-pickers"),require("jira/field/init-date-pickers"),require("jira/field/init-legacy-group-pickers"),require("jira/field/init-issue-pickers"),require("jira/field/init-label-pickers"),require("jira/field/init-version-pickers"),require("jira/field/init-comment-controls"),require("jira/field/init-log-work-controls"),require("jira/field/init-priority-pickers"),require("jira/field/init-inline-attach");;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'soy/quickform.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.QuickForm&&(JIRA.Templates.QuickForm={}),JIRA.Templates.QuickForm.field=function(e,i){return""+soy.$$filterNoAutoescape(e.editHtml)},JIRA.Templates.QuickForm.fieldPicker=function(e,i){return'<div class="qf-picker"><div class="qf-picker-header"><dl><dt>'+soy.$$escapeHtml("Show Fields:")+"</dt>"+(e.isConfigurable?'<dd><a class="qf-unconfigurable" href="#">'+soy.$$escapeHtml("All")+"</a></dd><dd>"+soy.$$escapeHtml("Custom")+"</dd>":"<dd>"+soy.$$escapeHtml("All")+'</dd><dd><a class="qf-configurable" href="#">'+soy.$$escapeHtml("Custom")+"</a></dd>")+'<div class="whereismycf-qfpicker-link" id="qf-picker-custom-link"/></dl></div><div class="qf-picker-content '+(e.isConfigurable?"":"qf-picker-unconfigurable")+'"></div><div class="qf-picker-footer"></div></div>'},JIRA.Templates.QuickForm.configurablePickerButton=function(e,i){return'<a title="'+soy.$$escapeHtml(e.label)+'" data-field-id="'+soy.$$escapeHtml(e.fieldId)+'" class="qf-picker-button'+(e.isActive?" qf-active":"")+'" href="#">'+soy.$$escapeHtml(e.label)+(e.required?'<span class="aui-icon icon-required"></span>':"")+"</a>"},JIRA.Templates.QuickForm.unconfigurablePickerButton=function(e,i){return'<span title="'+soy.$$escapeHtml(e.label)+'" data-field-id="'+soy.$$escapeHtml(e.fieldId)+'" class="qf-picker-button'+(e.isActive?" qf-active":"")+'" href="#">'+soy.$$escapeHtml(e.label)+(e.required?'<span class="aui-icon icon-required"></span>':"")+"</span>"},JIRA.Templates.QuickForm.errorMessage=function(e,i){return""+aui.message.error({closeable:"true",content:e.message})};;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'soy/issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),JIRA.Templates.Issue.editIssueError=function(e,s){return"<h2>"+soy.$$escapeHtml("Edit issue")+'</h2><div class="form-body">'+soy.$$filterNoAutoescape(e.errorHtml)+"</div>"},JIRA.Templates.Issue.editIssueForm=function(e,s){return'<form action="#" name="jiraform" class="aui"><h2>'+(e.showFieldConfigurationToolBar?JIRA.Templates.Issue.fieldConfigurationToolbar(null):"")+soy.$$filterNoAutoescape(e.title)+'</h2><div class="form-body"><input type="hidden" name="id" value="'+soy.$$escapeHtml(e.issueId)+'" /><input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'" /><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'" /><input type="hidden" name="pid" value="'+soy.$$escapeHtml(e.pid)+'" /><div class="content">'+(e.fieldsHtml?soy.$$filterNoAutoescape(e.fieldsHtml):"")+(e.commentField?soy.$$filterNoAutoescape(e.commentField.editHtml):"")+'<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons"><input accesskey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.modifierKey))+'" class="aui-button aui-button-primary" id="edit-issue-submit" name="Edit" type="submit" value="'+soy.$$escapeHtml("Update")+'" /><a href="#" accesskey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.modifierKey))+'" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Issue.fieldConfigurationToolbar=function(e,s){return""+aui.toolbar2.toolbar2({extraClasses:"qf-form-operations",content:""+aui.toolbar2.item({item:"secondary",content:""+aui.buttons.button({text:" "+soy.$$escapeHtml("Configure fields"),id:"qf-field-picker-trigger",extraClasses:"toolbar-trigger",iconText:"Configure fields",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-configure"})})})},JIRA.Templates.Issue.issueFields=function(e,s){var t="";if(e.hasTabs){t+='<div class="aui-tabs horizontal-tabs" id="horizontal"><ul class="tabs-menu">';for(var i=e.tabs,o=i.length,a=0;a<o;a++){var l=i[a];t+=l?'<li class="menu-item '+(l.isFirst?"first active-tab":"")+' "><a href="#tab-'+soy.$$escapeHtml(l.position)+'" ><strong>'+soy.$$escapeHtml(l.label)+"</strong></a></li>":""}t+="</ul>";for(var n=e.tabs,r=n.length,c=0;c<r;c++){var d=n[c];if(d){if(t+='<div class="tabs-pane '+(d.isFirst?"active-pane":"")+'" id="tab-'+soy.$$escapeHtml(d.position)+'">',e.simpleCreate)t+=JIRA.Templates.Issue.issueFieldSection({tabPosition:d.position,fields:d.fields});else for(var u=d.fields,m=u.length,f=0;f<m;f++){var p=u[f];t+=p.editHtml?soy.$$filterNoAutoescape(p.editHtml):""}t+="</div>"}}t+="</div>"}else if(e.simpleCreate)t+=JIRA.Templates.Issue.issueFieldSection({tabPosition:0,fields:e.fields});else for(var $=e.fields,y=$.length,I=0;I<y;I++){var v=$[I];t+=v.editHtml?soy.$$filterNoAutoescape(v.editHtml):""}return t},JIRA.Templates.Issue.issueFieldSection=function(e,s){return""+JIRA.Templates.Issue.issueFieldsContentPrimary({fields:e.fields.primary})+(e.fields.secondary.length>0?JIRA.Templates.Issue.issueFieldsContentSecondary({tabPosition:e.tabPosition,fields:e.fields.secondary}):"")},JIRA.Templates.Issue.issueFieldsContentPrimary=function(e,s){for(var t='<div class="issue-field-section-primary">',i=e.fields,o=i.length,a=0;a<o;a++){var l=i[a];t+=l.editHtml?soy.$$filterNoAutoescape(l.editHtml):""}return t+="</div>"},JIRA.Templates.Issue.issueFieldsContentSecondary=function(e,s){for(var t='<div style="text-align: center"><a id="issue-field-section-secondary-show-trigger" data-replace-text="'+soy.$$escapeHtml("Show less")+'" class="aui-expander-trigger" aria-controls="issue-field-section-secondary-'+soy.$$escapeHtml(e.tabPosition)+'">'+soy.$$escapeHtml("Show more")+'</a></div><div id="issue-field-section-secondary-'+soy.$$escapeHtml(e.tabPosition)+'" class="aui-expander-content issue-field-section-secondary">',i=e.fields,o=i.length,a=0;a<o;a++){var l=i[a];t+=l.editHtml?soy.$$filterNoAutoescape(l.editHtml):""}return t+="</div>"},JIRA.Templates.Issue.createIssueForm=function(e,s){var t='<form name="jiraform" action="#" class="aui"><h2>'+(e.showFieldConfigurationToolBar?JIRA.Templates.Issue.fieldConfigurationToolbar(null):"")+(e.isImportIssueButtonEnabled?'<button class= "aui-button" id="import-issues">'+soy.$$escapeHtml("Import issues")+"</button>":"")+soy.$$escapeHtml(e.title)+'</h2><div class="form-body">';if(e.issueSetupFields){t+='<div class="issue-setup-fields">';for(var i=e.issueSetupFields,o=i.length,a=0;a<o;a++){var l=i[a];t+='<div class="qf-field qf-field-'+soy.$$escapeHtml(l.id)+' qf-required" data-field-id="'+soy.$$escapeHtml(l.id)+'">'+soy.$$filterNoAutoescape(l.editHtml)+"</div>"}t+="</div>"}return t+=(e.parentIssueId?'<input type="hidden" name="parentIssueId" value="'+soy.$$escapeHtml(e.parentIssueId)+'" />':"")+'<input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'" /><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'" /><div class="content">'+(e.fieldsHtml?soy.$$filterNoAutoescape(e.fieldsHtml):"")+'<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons">'+(e.disallowCreateAnother?"":'<label for="qf-create-another" class="qf-create-another"><input id="qf-create-another" type="checkbox" '+(e.multipleMode?'checked="checked"':"")+" />"+soy.$$escapeHtml("Create another")+"</label>")+'<input accesskey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.modifierKey))+'" class="aui-button aui-button-primary" id="create-issue-submit" name="Edit" type="submit" value="'+soy.$$escapeHtml("Create")+'" /><a href="#" accesskey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.modifierKey))+'" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Issue.checkBoxField=function(e,s){return'<fieldset class="group"><legend><span></span></legend><div class="checkbox"><input class="checkbox" type="checkbox" name="'+soy.$$escapeHtml(e.name)+'" id="'+soy.$$escapeHtml(e.name)+'" value="true" '+(e.checked?"checked":"")+'><label for="'+soy.$$escapeHtml(e.name)+'">'+soy.$$escapeHtml(e.label)+"</label></div></fieldset>"},JIRA.Templates.Issue.createIssueError=function(e,s){return"<h2>"+soy.$$escapeHtml("Create issue")+'</h2><div class="form-footer">'+soy.$$filterNoAutoescape(e.errorHtml)+"</div>"},JIRA.Templates.Issue.undealtErrors=function(e,s){for(var t="<div>"+soy.$$escapeHtml("There were some errors when trying to create this issue")+"</div><ul>",i=e.errors,o=i.length,a=0;a<o;a++){var l=i[a];t+="<li>"+soy.$$escapeHtml(l)+"</li>"}return t+="</ul>"};;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/templates/form.js' */
define("quick-edit/templates/form",function(){return JIRA.Templates.QuickForm});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/templates/issue.js' */
define("quick-edit/templates/issue",function(){return JIRA.Templates.Issue});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/extension-mixin.js' */
define("quick-edit/util/extension-mixin",["jquery"],function(e){"use strict";var t=function(t,i,n){return e(this).trigger(t,i),n&&this.globalEventNamespaces&&e.each(this.globalEventNamespaces,function(n,r){e(document).trigger(r+"."+t,i)}),this};return{triggerEvent:t}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/class.js' */
define("quick-edit/util/class",["quick-edit/util/extension-mixin","jira/lib/class"],function(i,e){return e.extend(i)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/control.js' */
define("quick-edit/util/control",["quick-edit/util/extension-mixin","jira/ajs/control"],function(i,n){return n.extend(i)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/dialog.js' */
define("quick-edit/util/dialog",["jira/dialog/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(e,i,t){"use strict";var u=JIRA.Issues,s=function(i){var t=e.current,u=t.$activeTrigger;if(u)return u.attr(i)},r=function(){var e=s("data-issueKey");return!e&&i.getIssueKey()&&(e=i.getIssueKey()),!e&&t.getSelectedIssueKey()&&(e=t.getSelectedIssueKey()),!e&&u&&(e=u.Api.getSelectedIssueKey()),e},a=function(e){var i=r();return i?e+": "+i:e},g=function(){return u||t.isNavigator()||s("data-issueKey")};return{getActionIssueKey:r,getAttrFromActiveTrigger:s,getIssueActionTitle:a,shouldShowIssueKeyInTitle:g}}),AJS.namespace("JIRA.Dialog.getActionIssueKey",null,require("quick-edit/util/dialog").getActionIssueKey),AJS.namespace("JIRA.Dialog.getAttrFromActiveTrigger",null,require("quick-edit/util/dialog").getAttrFromActiveTrigger),AJS.namespace("JIRA.Dialog.getIssueActionTitle",null,require("quick-edit/util/dialog").getIssueActionTitle),AJS.namespace("JIRA.Dialog.shouldShowIssueKeyInTitle",null,require("quick-edit/util/dialog").shouldShowIssueKeyInTitle);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/jira.js' */
define("quick-edit/util/jira",["quick-edit/templates/issue","jira/util/data/meta","aui/message","jquery"],function(e,r,i,a){"use strict";var t=function(e){var r,i,a,t=e.closest(".tabs-pane");t.length&&(i=t.closest(".aui-tabs"),r=t.attr("id"),a=i.find("a[href='#"+r+"']"),a.click())},s=function(e,r){n("error",e,AJS.escapeHtml(r),!1)},o=function(e,r){n("error",e,r,!1)},u=function(r,i){var s,u=[];a.each(i,function(e,i){var t,o,n=r.find(":input[name='"+e+"']").last();1===n.length?(s||(s=n),o=a("<div class='error' />").attr("data-field",e).text(i),t=n.closest(".field-group, .group"),t.find(".error").remove(),t.append(o)):0===n.length&&u.push(i)}),u.length>0&&o(r,e.undealtErrors({errors:u})),t(r.find(".error:first")),s&&s.focus()},n=function(e,r,t,s){var o=r.find(".aui-message-context");o.length||(o=a("<div class='aui-message-context' />"),o.prependTo(r.find(".form-body"))),o.empty(),i[e](o,{shadowed:!1,closeable:s,body:t})},c=function(e,r){return n("success",e,r,!0)},l=function(e){var r=a(e);return{html:r.not("script"),scripts:r.filter("script")}},p=function(e){return a.isFunction(e)?e:function(){return e}},m=function(){r.get("keyboard-accesskey-modifier")};return{activateTabWithChild:t,applyErrorMessageToForm:s,applyErrorMessageWithHTMLToForm:o,applyErrorsToForm:u,applyMessageToForm:n,applySuccessMessageToForm:c,getModifierKey:m,extractScripts:l,makePropertyFunc:p}}),AJS.namespace("JIRA.activateTabWithChild",null,require("quick-edit/util/jira").activateTabWithChild),AJS.namespace("JIRA.applyErrorMessageWithHTMLToForm",null,require("quick-edit/util/jira").applyErrorMessageWithHTMLToForm),AJS.namespace("JIRA.applyErrorMessageToForm",null,require("quick-edit/util/jira").applyErrorMessageToForm),AJS.namespace("JIRA.applyErrorsToForm",null,require("quick-edit/util/jira").applyErrorsToForm),AJS.namespace("JIRA.applyMessageToForm",null,require("quick-edit/util/jira").applyMessageToForm),AJS.namespace("JIRA.applySuccessMessageToForm",null,require("quick-edit/util/jira").applySuccessMessageToForm),AJS.namespace("JIRA.extractScripts",null,require("quick-edit/util/jira").extractScripts),AJS.namespace("JIRA.makePropertyFunc",null,require("quick-edit/util/jira").makePropertyFunc);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field/configurable.js' */
define("quick-edit/form/field/configurable",["quick-edit/util/jira","quick-edit/util/control","quick-edit/templates/form","jira/util/events","jira/util/events/types","jquery"],function(e,t,i,r,n,s){"use strict";return t.extend({init:function(e){this.descriptor=e,this.$element=s("<div />").attr("id","qf-field-"+this.getId())},focus:function(){this.$element.find(":input:first").focus()},highlight:function(){var e=this;this.$element.css("backgroundColor","#fff").animate({backgroundColor:"lightyellow"},function(){e.$element.animate({backgroundColor:"#fff"},function(){e.$element.css("backgroundColor","")})})},getLabel:function(){return this.descriptor.label},getId:function(){return this.descriptor.id},activate:function(e){var t;this.active=!0,this.$element.addClass("qf-field-active").show(),this.$element.find("textarea").trigger("refreshInputHeight"),e||(t=this.render(),this.$element.append(t.scripts),this.focus(),r.trigger(n.NEW_CONTENT_ADDED,[this.$element]),this.$element.scrollIntoView(),this.triggerEvent("activated"))},hasVisibilityFeature:function(){return!!this.descriptor.hasVisibilityFeature},hasRetainFeature:function(){return!!this.descriptor.hasRetainFeature},isActive:function(){return this.active},disable:function(e){this.render(),this.active=!1,this.$element.removeClass("qf-field-active").hide(),e||this.triggerEvent("disabled")},render:function(){var t=i.field(this.descriptor),r=e.extractScripts(t);return this.$element.html(r.html).addClass("qf-field").data("model",this),{element:this.$element,scripts:r.scripts}}})}),AJS.namespace("JIRA.Forms.ConfigurableField",null,require("quick-edit/form/field/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/model.js' */
define("quick-edit/form/model",["quick-edit/util/class","jira/util/data/meta","jira/util/objects","jira/ajs/ajax/smart-ajax","jquery","jira/featureflags/feature-manager"],function(e,i,t,r,s,n){"use strict";return e.extend({init:function(e){this.userFieldsResource=e.userFieldsResource,this.fieldsResource=e.fieldsResource,this.retainedFields=[],this._hasRetainFeature=!1,this._hasVisibilityFeature=!0},getFieldsResource:function(){return this.fieldsResource},getAtlToken:function(){return this.atlToken},getPid:function(){return this.pid},isSimplified:function(){return this.simplified},getFormToken:function(){return this.formToken},getActiveFieldIds:function(){return this.getUserFields()},addFieldToRetainValue:function(e){if(!this._hasRetainFeature)throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]");this.removeFieldToRetainValue(e),this.retainedFields.push(e)},serializePreFilledFields:function(e){return s.param(s.extend(e,{preFillFields:!0}))},clearRetainedFields:function(){this.retainedFields=[]},removeFieldToRetainValue:function(e){if(!this._hasRetainFeature)throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]");var i=s.inArray(e,this.retainedFields);i!=-1&&this.retainedFields.splice(i,1)},getFieldsWithRetainedValues:function(){if(this._hasRetainFeature)return this.retainedFields;throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")},hasRetainedValue:function(e){if(this._hasRetainFeature)return s.inArray(e.id,this.retainedFields)!==-1;throw new Error("HasRetainedValue: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")},refresh:function(e){var i,t=this,a=s.Deferred();e&&(i=e+"&retainValues=true"),!i&&this.preFilledFields&&(i=this.serializePreFilledFields(this.preFilledFields));var u=n.isFeatureEnabled("jira.simplify.issue.create");return u&&(null==i?i="simple="+u:i+="&simple="+u),r.makeRequest({url:this.getFieldsResource(),type:"POST",data:i,success:function(e){t._update(e)},complete:function(e,i,r){r.successful?a.resolveWith(t,arguments):(t.triggerEvent("serverError",[r]),a.rejectWith(t,[r]))}}),a.promise()},_update:function(e){this.atlToken=e.atl_token,this.formToken=e.formToken,this.pid=e.pid,this.simplified=e.simplified,this.fields=e.fields,this.sortedTabs=e.sortedTabs,this.userPreferences=e.userPreferences},setFields:function(e){this.fields=e},getConfigurableFields:function(){return this.getFields()},getFields:function(){var e=this,i=s.Deferred();return this.fields?i.resolve(e.fields):this.refresh().done(function(){i.resolve(e.fields)}),i.promise()},_mungeTabs:function(e){var i=0,r=[];return s.each(e,function(e,s){i++,s.tab&&(r[s.tab.position]||(r[s.tab.position]=t.copyObject(s.tab)),0===s.tab.position&&(r[s.tab.position].isFirst=!0),r[s.tab.position].fields||(r[s.tab.position].fields=[]),r[s.tab.position].fields.push(t.copyObject(s)))}),r},getTabs:function(){var e=this,i=s.Deferred();return this.getFields().done(function(t){var r=e._mungeTabs(t);i.resolve(r)}),i.promise()},getSortedTabs:function(){var e=s.Deferred();return this.sortedTabs?e.resolve(this.sortedTabs):this.refresh().done(function(){e.resolve(this.sortedTabs)}),e.promise()},getUserFields:function(){var e=this,i=s.Deferred();return this.userPreferences?i.resolve(e.userPreferences.fields):this.refresh().done(function(){i.resolve(e.userPreferences.fields)}),i.promise()},setUserFields:function(e){var i={};return i.fields=e,this.updateUserPrefs(i)},hasRetainFeature:function(){return!!this._hasRetainFeature},hasVisibilityFeature:function(){return!!this._hasVisibilityFeature},getUseConfigurableForm:function(){var e=this,i=s.Deferred();return this.userPreferences?i.resolve(e.userPreferences.useQuickForm):this.refresh().done(function(){i.resolve(e.userPreferences.useQuickForm)}).fail(function(){i.reject()}),i.promise()},setUseConfigurableForm:function(e){var i={};return i.useQuickForm=e,this.updateUserPrefs(i)},updateUserPrefs:function(e){var t=s.Deferred(),n=this;return""===i.get("remote-user")?(t.done(),t.promise()):this.userPreferences?(e.fields||(e.fields=this.userPreferences.fields),"undefined"==typeof e.showWelcomeScreen&&(e.showWelcomeScreen=this.userPreferences.showWelcomeScreen),"undefined"==typeof e.useQuickForm&&(e.useQuickForm=this.userPreferences.useQuickForm),r.makeRequest({url:this.userFieldsResource,type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json",complete:function(i,t,r){r.successful?n.userPreferences=e:n.triggerEvent("serverError",[r])}})):(t.reject(),t.promise())}})}),AJS.namespace("JIRA.Forms.Model",null,require("quick-edit/form/model"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/create-issue.js' */
define("quick-edit/form/model/create-issue",["quick-edit/form/model","wrm/context-path","underscore","jquery"],function(e,i,t,s){"use strict";return e.extend({DEFAULT_NON_RETAINED_FIELDS:["summary","description","timetracking","timetracking_originalestimate","timetracking_remainingestimate","worklog","worklog_startDate","worklog_timeLogged","worklog_newEstimate","worklog_adjustmentAmount","attachment"],CUSTOMFIELD_PATTERN:/^(customfield_(\d+))(?:|\:(?:\d+))$/,TIMETRACKING_PATTERN:/^timetracking_/,init:function(e){e=e||{},this.userFieldsResource=i()+"/rest/quickedit/1.0/userpreferences/create",this._hasRetainFeature=!0,this._hasVisibilityFeature=!0,this.retainedFields=[],this.dirtyFields=[],this.initIssueType=e.issueType,this.initProjectId=e.projectId,this.parentIssueId=e.parentIssueId,this.preFilledFields=e.fields,this.nonRetainedFields=this.DEFAULT_NON_RETAINED_FIELDS,e.nonRetainedFields&&(this.nonRetainedFields=t.union(e.nonRetainedFields,this.DEFAULT_NON_RETAINED_FIELDS))},getParentIssueId:function(){return this.parentIssueId},isInMultipleMode:function(){return this.multipleMode},setIsMultipleMode:function(e){this.multipleMode=e},getActiveFieldIds:function(){var e=this,i=s.Deferred(),t=[];return this.getUserFields().done(function(n){s.each(n,function(e,i){t.push(i)}),e.getRequiredFields().done(function(e){s.each(e,function(e,i){s.inArray(i.id,t)===-1&&t.push(i.id)}),i.resolve(t)})}),i.promise()},hasVisibilityFeature:function(e){return!e.required},getFieldsResource:function(){var e=i()+"/secure/QuickCreateIssue!default.jspa?decorator=none";return this.parentIssueId?e+"&parentIssueId="+this.parentIssueId:(this.initIssueType&&(e=e+"&issuetype="+this.initIssueType,delete this.initIssueType),this.initProjectId&&(e=e+"&pid="+this.initProjectId,delete this.initProjectId),e)},addFieldToRetainValue:function(e,i){var s=!t.contains(this.nonRetainedFields,e),n=null!==e.match(/^filetoconvert/);(s||n||i)&&this._super(e)},getRequiredFields:function(){var e=s.Deferred(),i=[];return this.getFields().done(function(t){s.each(t,function(e,t){t.required&&i.push(t)}),e.resolve(i)}),e.promise()},getConfigurableFields:function(){var e=s.Deferred(),i=[];return this.getFields().done(function(t){s.each(t,function(e,t){"project"!==t.id&&"issuetype"!==t.id&&i.push(t)}),e.resolve(i)}),e.promise()},getIssueSetupFields:function(){var e=s.Deferred(),i=[];return this.getFields().done(function(t){s.each(t,function(e,t){"project"!==t.id&&"issuetype"!==t.id||i.push(t)}),e.resolve(i)}),e.promise()},markFieldAsDirty:function(e){e=this.normalizeCustomFieldId(e),this.fieldIsDirty(e)||this.dirtyFields.push(e)},fieldIsDirty:function(e){return t.contains(this.dirtyFields,e)},isCustomFieldId:function(e){return e&&!!e.match(this.CUSTOMFIELD_PATTERN)},isTimetrackingFieldId:function(e){return e&&!!e.match(this.TIMETRACKING_PATTERN)},normalizeCustomFieldId:function(e){return this.isCustomFieldId(e)?e.match(this.CUSTOMFIELD_PATTERN)[1]:e},normalizeFieldParam:function(e,i){return"filetoconvert"==e?e+"-"+i:this.isCustomFieldId(e)?this.normalizeCustomFieldId(e):this.isTimetrackingFieldId(e)?"timetracking":e}})}),AJS.namespace("JIRA.Forms.CreateIssueModel",null,require("quick-edit/form/model/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/edit-issue.js' */
define("quick-edit/form/model/edit-issue",["quick-edit/form/model","underscore","jquery"],function(e,i,r){"use strict";return e.extend({getUnconfigurableTabs:function(){var e=this,i=r.Deferred();return e.getTabs().done(function(e){var n=e.slice(0);n[0].fields=n[0].fields.slice(0),r.each(n[0].fields,function(e,i){if("comment"===i.id)return n[0].fields.splice(e,1),!1}),i.resolve(n)}),i.promise()},getCommentField:function(){var e=r.Deferred();return this.getFields().done(function(i){r.each(i,function(i,r){"comment"===r.id&&e.resolve(r)}),e.reject()}),e.promise()}})}),AJS.namespace("JIRA.Forms.EditIssueModel",null,require("quick-edit/form/model/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/factory/edit-issue.js' */
define("quick-edit/form/model/factory/edit-issue",["quick-edit/form/model/edit-issue","wrm/context-path"],function(e,i){"use strict";return function(s){return new e({fieldsResource:i()+"/secure/QuickEditIssue!default.jspa?issueId="+s+"&decorator=none",userFieldsResource:i()+"/rest/quickedit/1.0/userpreferences/edit"})}}),AJS.namespace("JIRA.Forms.Model.createQuickEditIssueModel",null,require("quick-edit/form/model/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/helper/helper.js' */
define("quick-edit/form/helper/helper",["quick-edit/util/jira","quick-edit/form/model","quick-edit/util/class","jira/jquery/plugins/isdirty","jira/util/events","jira/dialog/dialog","jira/featureflags/feature-manager","underscore","jquery"],function(e,i,t,r,s,n,o,a,u){"use strict";var d=AJS.escapeHTML,l=function(e){if(e&&e.fields&&e.fields.issuetype&&e.fields.issuetype.subtask){const i=e.fields.issuetype,t={id:e.id,issueLink:contextPath+"/browse/"+e.key,issueSummary:e.fields.summary,issueTypeIconUrl:i.iconUrl,issueTypeId:i.id},r={type:"SUBTASK_CREATED",payload:{subtask:t}},n=e.fields.parent.key;s.trigger("modify-issue-view-via-external-action",{issueKey:n,externalAction:r})}};return t.extend({init:function(e){this.form=e},handleSubmitSuccess:function(i){function t(e,i,t){var r='<a href="'+t+'">'+e+" - "+d(i)+"</a>";return AJS.format("Issue {0} has been successfully created",r)}var r=this,s=this.form.$element.find("#summary").val();i.summary=s,this.form.triggerEvent("submitted",[i,this]),this.form.triggerEvent("issueCreated",[i,this],!0),r.form.model.isInMultipleMode()?this.form.render().done(function(){var n=t(i.issueKey,s,contextPath+"/browse/"+i.issueKey);e.applySuccessMessageToForm(r.form.getForm(),n)}):this.form.triggerEvent("sessionComplete"),l(i.createdIssueDetails)},getCreateAnotherCheckbox:function(){return this.form.$element.find("#qf-create-another")},isInMultipleMode:function(){return this.getCreateAnotherCheckbox().is(":checked")},getProjectField:function(){return this.form.$element.find(".issue-setup-fields #project")},getIssueTypeField:function(){return this.form.$element.find(".issue-setup-fields #issuetype")},serializeForToggle:function(e){if(!this.form.model.hasRetainFeature())return this.form.getForm().serialize();var i=this.form.model.prevActiveFields||[],t=this.form.getForm().serializeArray(),r=function(e){return this.form.model.normalizeFieldParam(e.name,e.value)}.bind(this),s=this.form.getActiveFieldIds(),n=u.grep(t,function(e){return u.inArray(r(e),s)!==-1}),o=u.grep(i,function(e){return u.inArray(r(e),s)===-1}),a=u.map(o,function(e){return r(e)}),d=u.merge(n,o),l=u.merge(s,a);this.form.model.prevActiveFields=u.extend(!0,[],d),e&&(l=this.executeProjectChangedSecuritySettingAction(l)),l=l.filter(function(e){return!this.form.model.isCustomFieldId(e)||this.form.model.fieldIsDirty(e)}.bind(this));var f=u.merge([{name:"retainValues",value:!0}],d);return u.each(t,function(e,i){"pid"!==i.name&&"issuetype"!==i.name||f.push(i)}),f.push({name:"toggle",value:!0}),u.each(l,function(e,i){f.push({name:"fieldsToRetain",value:i})}),f.push({name:"formToken",value:this.form.model.getFormToken()}),u.param(f)},executeProjectChangedSecuritySettingAction:function(e){return a.reject(e,function(e){return"security"===e})},prepareFieldsToRetain:function(e,i){return u.each(e,function(e,t){i.push({name:"fieldsToRetain",value:t})}),i},setIssueType:function(){var e=this,i=this.serializeForToggle();this.form.invalidateFieldsCache(),this.form.disable(),this.form.render(i).done(function(){e.form.enable()})},setProjectId:function(){var e=this,i=this.serializeForToggle(!0);this.form.invalidateFieldsCache(),this.form.disable(),this.form.render(i).done(function(){e.form.enable()})},saveFormDirtyStatus:function(){this.form.isDirty=this.form.getForm().isDirty()},restoreFormDirtyStatus:function(){this.form.isDirty&&this.form.getForm().addClass(r.ClassNames.BY_DEFAULT)},decorate:function(){var e=this;this.getProjectField().change(function(){e.saveFormDirtyStatus(),s.trigger("dialogBeforeContentChange",["projectId",this.value,n.current.options.id]),e.setProjectId(this.value)}),this.getIssueTypeField().change(function(){e.saveFormDirtyStatus(),s.trigger("dialogBeforeContentChange",["issueType",this.value,n.current.options.id]),e.setIssueType(this.value)}),this.getCreateAnotherCheckbox().change(function(){e.form.model.setIsMultipleMode(this.checked)})},decorateFields:function(){var e=this;this.form.$element.find('*[id^="customfield_"]').off("change.customField").on("change.customField",function(){e.form.model.isCustomFieldId(this.name)&&e.form.model.markFieldAsDirty(this.name)})},sendQuickEditAnalyticsEvent:function(e){var i,t,r=e.instance,s=e.name,n=r.model.fields.map(function(e){return{id:e.id,required:e.required}});e.field&&(t={id:e.field.descriptor.id,required:e.field.descriptor.required}),r.model.getActiveFieldIds().then(function(r){i=n.filter(function(e){return r.some(function(i){return i===e.id})}),AJS.trigger("analyticsEvent",{name:s,data:{allFieldsShown:e.allFieldsShown,field:JSON.stringify(t),allFields:JSON.stringify(n),displayedFields:e.allFieldsShown?JSON.stringify(n):JSON.stringify(i)}})})}})}),AJS.namespace("JIRA.Forms.CreateIssueHelper",null,require("quick-edit/form/helper/helper"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/abstract.js' */
define("quick-edit/form/abstract",["quick-edit/util/jira","quick-edit/util/control","jira/ajs/ajax/smart-ajax","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/events/types","jira/util/events","jira/util/browser","jquery","underscore"],function(e,t,i,r,n,s,a,o,d,l){"use strict";var u=AJS.extractBodyFromResponse,c=AJS.log;return t.extend({submit:function(){var e=this;return e.getForm().addClass("submitting"),this.triggerEvent("submitting",[],!0),i.makeRequest({url:this.getAction(),type:"POST",beforeSend:function(){e.disable()},data:this.serialize(),complete:function(t,i,n){var s=n.data;if(e.getForm().find(".aui-message-context").remove(),e.enable(),e.getForm().find(".error").remove(),n.successful)if(e.performAnalytics(),s&&s.fields&&(e.invalidateFieldsCache(),e.model.setFields(s.fields)),"string"==typeof s){var a=d(u(s)),o=a.find("#atl_token").val();o&&(e.model.atlToken=o,e.getForm().find('input[name="atl_token"]').val(o));var l=new r({offsetTarget:"body",content:a});l._handleServerSuccess=function(){l.prev&&(l.prev._removeStackState(),l.prev._resetWindowTitle(),l._removeStackState()),l.hide(),e.triggerEvent("sessionComplete",[],!0),e.handleSubmitSuccess()},l._handleServerError=function(t){l.hide(),e.handleSubmitError(t)},l.show()}else e.handleSubmitSuccess(n.data);else e.handleSubmitError(t);e.getForm().removeClass("submitting")}})},disable:function(){this.getForm().find(":input").attr("disabled","disabled").trigger("disable"),this.getForm().find(":submit").attr("disabled","disabled")},enable:function(){this.getForm().find(":input").removeAttr("disabled").trigger("enable"),this.getForm().find(":submit").removeAttr("disabled")},getActiveFieldIds:function(){throw new Error("getActiveFieldIds: Abstract, must be implemented by sub class")},serialize:function(e){var t=this,i=this.getForm().serialize();return this.model.isInMultipleMode&&this.model.isInMultipleMode()&&(i+="&multipleMode=true"),this.model.hasRetainFeature()&&(this.model.clearRetainedFields(),d.each(this.getActiveFieldIds(),function(i,r){t.model.addFieldToRetainValue(r,e)}),d.each(this.model.getFieldsWithRetainedValues(),function(e,t){i=i+"&fieldsToRetain="+t})),i},invalidateFieldsCache:function(){delete this.fields},setInitialFocus:function(){this.getFormContent().find(":input:first").focus()},handleSubmitSuccess:function(){this.triggerEvent("submitted"),o.reloadViaWindowLocation()},performAnalytics:function(){var e=function(e,t){var i="***** Analytics log ["+e+"]";t&&(i+="["+JSON.stringify(t)+"]"),c(i),AJS.EventQueue&&AJS.EventQueue.push({name:e,properties:t||{}})},t=function(e){var t={},i=l.filter(e,function(e){return!l.contains(["isCreateIssue","isEditIssue","atl_token","hasWorkStarted"],e.name)}),r=l.filter(i,function(e){return""!=e.value});return l.each(r,function(e){var i=e.name;l.has(t,i)||(t[i]=[]),t[i].push(e.value)}),t};this.previousAnalytics=function(i,r){var s=t(i),a=l.keys(s),o=l.keys(r.data),d=l.difference(a,o),u=l.difference(o,a),c=l.intersection(o,a),m=l.filter(c,function(e){return l.isEqual(r.data[e],s[e])}),f=l.difference(c,m),h=r.count+1,g="edit-issue-dialog"===n.current.options.id,v={"atlassian.numCreates":h,"edit.form":g};return l.each(d,function(e){v[e]="added"}),l.each(u,function(e){v[e]="removed"}),l.each(m,function(e){v[e]="same"}),l.each(f,function(e){v[e]="changed"}),e("quick.create.fields",v),{data:s,count:h}}(this.getForm().serializeArray(),this.previousAnalytics||{data:{},count:0})},addErrorMessage:function(t){e.applyErrorMessageToForm(this.getForm(),[t])},handleSubmitError:function(t){var r,n=this;if(t.responseText){try{r=JSON.parse(t.responseText)}catch(e){}if(r){r.errorMessages&&r.errorMessages.length&&e.applyErrorMessageToForm(this.getForm(),r.errorMessages[0]),r&&r.errors&&400===t.status&&(this.getFieldById&&d.each(r.errors,function(e){/^timetracking/.test(e)?n.getFieldById("timetracking").done(function(e){a.trigger(s.VALIDATE_TIMETRACKING,[n.$element]),e.activate(!0)}):/^worklog/.test(e)?n.getFieldById("worklog").done(function(e){a.trigger(s.VALIDATE_TIMETRACKING,[n.$element]),e.activate(!0)}):n.getFieldById(e).done(function(e){e.activate(!0)})}),e.applyErrorsToForm(this.getForm(),r.errors),this.triggerEvent("validationError",[this,r.errors],!0));var o=n.$element.find(".error");o.length&&o[0].scrollIntoView(!1)}}else{var l=i.SmartAjaxResult(t,void 0,t.statusText,"",!1,void 0),u=i.buildSimpleErrorContent(l);n.addErrorMessage(u)}},getAction:function(){return this.action},getFormContent:function(){return this.$element.find("div.content")},getForm:function(){return this.$element.find("form")},createField:function(){throw new Error("AbstractForm: You must implement [createField] method in subclass.")},_getActiveAttachments:function(e){var t=[];if(!e)return t;for(var i=e.split("&"),r=0;r<i.length;r++){var n=i[r].split("=");"filetoconvert"==n[0]&&t.push(n[1])}return t},_setActiveAttachments:function(e){var t=this.$element.find("input[name=filetoconvert]");t.each(function(){var t=d(this),i=l.contains(e,t.attr("value"));t.prop("checked",i)})},render:function(e){var t=d.Deferred(),i=this,r=i._getActiveAttachments(e);return e?(this.invalidateFieldsCache(),this.model.refresh(e).done(function(){i._render().done(function(e,r){i.triggerEvent("rendered",[i.$element]),t.resolveWith(i,[i.$element,r])})})):i._render().done(function(e,r){i.triggerEvent("rendered",[i.$element]),t.resolveWith(i,[i.$element,r])}),t.always(function(){i._setActiveAttachments(r)}),t.promise()}})}),AJS.namespace("JIRA.Forms.AbstractForm",null,require("quick-edit/form/abstract"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/configurable.js' */
define("quick-edit/form/abstract/configurable",["quick-edit/form/abstract","quick-edit/form/field/configurable","quick-edit/form/helper/helper","jquery"],function(e,i,t,n){"use strict";return e.extend({getFields:function(){var e=n.Deferred(),i=this;return this.fields?e.resolveWith(this,[this.fields]):(this.fields=[],this.model.getConfigurableFields().done(function(t){n.each(t,function(e,t){var n=i.createField(t);i.fields.push(n)}),e.resolveWith(i,[i.fields])})),e.promise()},getActiveFieldIds:function(){var e=[],i=this.$element.find(".qf-field.qf-field-active:not(.qf-required), .qf-field.qf-required:not(.qf-field-active)");return n.each(i,function(i,t){var r=n(t),d=r.data("model"),s=r.data("field-id")||d&&d.getId();null!=s&&e.push(s),"attachment"===s&&r.find("input[name=filetoconvert]").each(function(){e.push(this.id)})}),e},createField:function(e){e.hasVisibilityFeature=this.model.hasVisibilityFeature(e),this.model.hasRetainFeature(e)&&(e.hasRetainFeature=!0,e.retainValue=this.model.hasRetainedValue(e));var n=this,r=new i(e),d=new t(n);return e.hasVisibilityFeature&&r.bind("activated",function(){n.model.setUserFields(n.getActiveFieldIds()),r.highlight(),n.triggerEvent("QuickForm.fieldAdded",[r]),d.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.added",field:r,instance:n})}).bind("disabled",function(){n.model.setUserFields(n.getActiveFieldIds()),n.triggerEvent("QuickForm.fieldRemoved",[r]),d.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.removed",field:r,instance:n})}),r},getFieldById:function(e){var i=this,t=n.Deferred();return this.getFields().done(function(r){n.each(r,function(n,r){r.getId()===e&&t.resolveWith(i,[r])}),t.rejectWith(i,[])}),t.promise()},hasNoVisibleFields:function(){var e=n.Deferred();return e.resolve(0===this.getActiveFieldIds().length),e.promise()},renderFormContents:function(){var e=n.Deferred(),i=n(),t=this;return t.getFields().done(function(r){var d=t.reorderFieldsToRender(r);t.model.getActiveFieldIds().done(function(r){n.each(d,function(){var e=this.render();i=i.add(e.scripts),t.getFormContent().append(e.element)}),n.each(r,function(e,i){n.each(d,function(){this.getId()===i&&this.activate(!0)})}),n.each(d,function(){this.isActive()||this.disable(!0)}),t.hasNoVisibleFields().done(function(n){if(n===!0)for(var r=0;r<3;r++)d[r]&&d[r].activate(!0);e.resolveWith(this,[t.$element,i])})})}),e.promise()},reorderFieldsToRender:function(e){return e}})}),AJS.namespace("JIRA.Forms.AbstractConfigurableForm",null,require("quick-edit/form/abstract/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/unconfigurable.js' */
define("quick-edit/form/abstract/unconfigurable",["quick-edit/form/abstract","quick-edit/templates/issue","jquery","underscore","jira/featureflags/feature-manager"],function(e,i,t,r,n){"use strict";var s=function(e){return function(i){return"secondary"===e[i.id]}},a=function(e){return function(i){return!s(e)(i)}},u=function(e,i){return{primary:e.filter(a(i)),secondary:e.filter(s(i))}},d=function(e){var i=e.reduce(function(e,i){return e.concat(i.fields)},[]);return i.reduce(function(e,i){return e[i.id]=i.section||"primary",e},{})};return e.extend({getFieldsHtml:function(){var e=this,s=t.Deferred(),a={};return this.model.getTabs().done(function(t){a.simpleCreate=!1;var f=n.isFeatureEnabled("jira.simplify.issue.create");if(f){if(e.model&&e.model.sortedTabs){var o=d(e.model.sortedTabs);1===t.length?t[0].fields&&(a.fields=u(t[0].fields,o)):(a.tabs=t.map(function(e){return e.isFirst===!0?r.extend(e,{fields:u(e.fields,o)}):r.extend(e,{fields:{primary:e.fields,secondary:[]}})}),a.hasTabs=!0),a.simpleCreate=f}}else 1===t.length?a.fields=t[0].fields:(a.tabs=t,a.hasTabs=!0);s.resolveWith(e,[i.issueFields(a)])}),s.promise()},getActiveFieldIds:function(){var e=[];if(this.model.getFields().done(function(i){t.each(i,function(i,t){e.push(t.id)})}),e.indexOf("attachment")){var i=this.$element.find("input[name=filetoconvert]").map(function(e,i){return i.id}).toArray();e.push.apply(e,i)}return e},getFields:function(){var e=t.Deferred(),i=this;return this.fields?e.resolveWith(this,[this.fields]):(this.fields=[],this.model.getFields().done(function(r){t.each(r,function(e,t){var r=i.createField(t);i.fields.push(r)}),e.resolveWith(i,[i.fields])})),e.promise()}})}),AJS.namespace("JIRA.Forms.AbstractUnconfigurableForm",null,require("quick-edit/form/abstract/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/configurable/create-issue.js' */
define("quick-edit/form/configurable/create-issue",["quick-edit/form/abstract/configurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery","jira/featureflags/simplified-ux-feature-manager"],function(e,t,i,s,r,o,n,u){"use strict";return e.extend({init:function(e){this.model=e.model,this.helper=new t(this),this.globalEventNamespaces=e.globalEventNamespaces||[],this.issueId=e.issueId,this.title=e.title,this._serialization={},this.action=o()+"/secure/QuickCreateIssue.jspa?decorator=none",this.$element=n("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(e){return this.helper.handleSubmitSuccess(e)},_render:function(){var e=n.Deferred(),t=this;return t.model.getIssueSetupFields().done(function(o){var n=i.createIssueForm({issueSetupFields:o,atlToken:t.model.getAtlToken(),formToken:t.model.getFormToken(),isImportIssueButtonEnabled:u.isImportIssueButtonEnabled(),isConfigurable:!0,title:t.title,parentIssueId:t.model.getParentIssueId(),multipleMode:t.model.isInMultipleMode(),showFieldConfigurationToolBar:!r.isAnonymous(),modifierKey:s.getModifierKey()});t.$element.html(n),t.helper.decorate(),t.renderFormContents().done(function(i,s){t.helper.decorateFields(),e.resolveWith(t,[t.$element,s])}),t.bind("QuickForm.fieldAdded",function(){t.helper.decorateFields()})}),e.promise()}})}),AJS.namespace("JIRA.Forms.ConfigurableCreateIssueForm",null,require("quick-edit/form/configurable/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/configurable/edit-issue.js' */
define("quick-edit/form/configurable/edit-issue",["quick-edit/form/abstract/configurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(e,t,i,s,n,o){"use strict";return e.extend({init:function(e){this.model=e.model,this.globalEventNamespaces=e.globalEventNamespaces||[],this.issueId=e.issueId,this.title=e.title,this.action=n()+"/secure/QuickEditIssue.jspa?issueId="+e.issueId+"&decorator=none",this.$element=o("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(e){this.triggerEvent("submitted",[e]),this.triggerEvent("issueEdited",[e],!0),this.triggerEvent("sessionComplete")},hasNoVisibleFields:function(){var e=o.Deferred(),t=this.getActiveFieldIds();return this.model.getUserFields().done(function(i){1===i.length&&"comment"===i[0]?e.resolve(!1):0===t.length||1===t.length&&"comment"===t[0]?e.resolve(!0):e.resolve(!1)}),e.promise()},_render:function(){var e=o.Deferred(),n=this,r=i.editIssueForm({issueId:this.issueId,title:this.title,atlToken:n.model.getAtlToken(),formToken:n.model.getFormToken(),pid:n.model.getPid(),isConfigurable:!0,modifierKey:t.getModifierKey(),showFieldConfigurationToolBar:!s.isAnonymous()});return this.$element.html(r),n.renderFormContents().done(function(t,i){n.getFieldById("comment").done(function(e){n.getFormContent().append(e.$element)}),e.resolveWith(n,[n.$element,i])}),e.promise()}})}),AJS.namespace("JIRA.Forms.ConfigurableEditIssueForm",null,require("quick-edit/form/configurable/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/button/configurable.js' */
define("quick-edit/form/field-picker/button/configurable",["quick-edit/util/control","quick-edit/templates/form"],function(e,i){"use strict";return e.extend({init:function(e){var i=this;this.field=e.field,this.field.bind("disabled",function(){i.$element.removeClass("qf-active")}).bind("activated",function(){i.$element.addClass("qf-active")})},toggle:function(){this.field.isActive()?this.field.disable():this.field.activate()},getId:function(){return this.field.getId()},render:function(){return this.$element=jQuery(i.configurablePickerButton({required:this.field.descriptor.required,label:this.field.getLabel(),fieldId:this.field.getId(),isActive:this.field.isActive()})),this._assignEvents("button",this.$element),this.$element},_events:{button:{click:function(e){this.toggle(),e.preventDefault()}}}})}),AJS.namespace("JIRA.Forms.FieldPicker.ConfigurableButton",null,require("quick-edit/form/field-picker/button/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/button/unconfigurable.js' */
define("quick-edit/form/field-picker/button/unconfigurable",["quick-edit/util/control","quick-edit/templates/form","jquery"],function(e,i,t){"use strict";return e.extend({init:function(e){this.descriptor=e},render:function(){return this.$element=t(i.unconfigurablePickerButton({required:this.descriptor.required,label:this.descriptor.label,fieldId:this.descriptor.id,isActive:!0})),this.$element}})}),AJS.namespace("JIRA.Forms.FieldPicker.UnconfigurableButton",null,require("quick-edit/form/field-picker/button/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/field-picker.js' */
define("quick-edit/form/field-picker",["quick-edit/form/field-picker/button/configurable","quick-edit/form/field-picker/button/unconfigurable","quick-edit/templates/form","quick-edit/util/control","aui/inline-dialog","jquery"],function(i,e,n,t,o,l){"use strict";return t.extend({INLINE_DIALOG_ID:"field_picker_popup",init:function(){this.buttons=[]},switchToAll:function(i){this.isConfigurable=!1,i!==!0&&(this.hideCallback=function(){this.remove()},this.inlineDialog.hide(),this.triggerEvent("switchedToAll"))},setForm:function(i){this.form=i},switchToCustom:function(i){this.isConfigurable=!0,i!==!0&&(this.hideCallback=function(){this.remove()},this.inlineDialog.hide(),this.triggerEvent("switchedToCustom"))},hideCallback:function(){},bindInlineDialog:function(){function i(i,t,o){e.render().done(function(e){0===i.find(".qf-picker").length&&(i.html(e),i.click(function(i){i.stopPropagation()}));var t=n.offset().top-l(window).scrollTop(),s=l(window).height(),r=s-t-110;i.find(".qf-picker-content").css("maxHeight",r),this.form.model.isSimplified()?i.find("#qf-picker-custom-link").hide():i.find("#qf-picker-custom-link").show(),o()})}var e=this,n=this.getInlineDialogTrigger();return this.inlineDialog&&this.inlineDialog.remove(),this.inlineDialog=o(n,this.INLINE_DIALOG_ID,i,{width:450,upfrontCallback:function(){n.parent().addClass("active")},hideCallback:function(){n.parent().removeClass("active")},nobind:!0}),n.click(function(i){l("#inline-dialog-"+e.INLINE_DIALOG_ID).is(":visible")?e.inlineDialog.hide():e.inlineDialog.show()}),this.inlineDialog},getInlineDialogTrigger:function(){return this.form.$element.find("#qf-field-picker-trigger")},renderButtons:function(n){var t=this,o=l('<ul class="qf-picker-buttons" />').appendTo(this.$content);l.each(n,function(n,s){var r,c;t.isConfigurable?t.form.getFieldById(s.id).done(function(e){if(e&&e.hasVisibilityFeature()){var n=l("<li />").appendTo(o),s=new i({field:e});s.render().appendTo(n),t.buttons.push(s)}}):(c=new e(s),r=l("<li />").appendTo(o),c.render().appendTo(r))}),0===o.children().length&&o.addClass("qf-no-fields").append("<li><em>"+"No fields can be configured for this tab"+"</em></li>")},renderContents:function(){var i=this,e=l.Deferred();return this.form.model.getSortedTabs().done(function(n){1===n.length?i.renderButtons(n[0].fields):l.each(n,function(e,n){n.fields.length>0&&(l("<h4><span></span></h4>").appendTo(i.$content).find("span").text(n.label),i.renderButtons(n.fields))}),e.resolveWith(i,[i.$element])}),e.promise()},show:function(){this.inlineDialog.show()},render:function(){return this.$element=l(n.fieldPicker({isConfigurable:this.isConfigurable})),this.$content=this.$element.find(".qf-picker-content"),this._assignEvents("switchToCustom",this.$element.find(".qf-configurable")),this._assignEvents("switchToAll",this.$element.find(".qf-unconfigurable")),this.renderContents()},_events:{switchToCustom:{click:function(i){this.switchToCustom(),i.preventDefault()}},switchToAll:{click:function(i){this.switchToAll(),i.preventDefault()}}}})}),AJS.namespace("JIRA.Forms.FieldPicker",null,require("quick-edit/form/field-picker"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/container/container.js' */
define("quick-edit/form/container",["quick-edit/form/field-picker","quick-edit/form/import-issues","quick-edit/util/jira","quick-edit/util/control","quick-edit/form/helper/helper","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/navigator","jira/issue","jira/issuenavigator/issue-navigator","jquery","jira/featureflags/feature-manager","wrm/require"],function(e,i,t,n,r,o,s,a,c,l,d,u,m){"use strict";return n.extend({init:function(i){this.$element=d("<div />").addClass("qf-container"),this.options=t.makePropertyFunc(i),this.fieldPicker=new e,this.successData=[],this.helper=new r(this);var n=this;m(["wr!com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api"]).then(function(){n.metrics=require("internal/browser-metrics")})},decorateRenderers:function(){var e=this;this.fieldPicker.decorated||(this.fieldPicker.bind("switchedToAll",function(){e.unconfigurableForm.render(e.currentView.serialize(!0)).done(function(){e.fieldPicker.show()}),e.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.switched.all",allFieldsShown:!0,instance:e})}),this.fieldPicker.bind("switchedToCustom",function(){e.configurableForm.render(e.currentView.serialize(!0)).done(function(){e.fieldPicker.show()}),e.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.switched.custom",allFieldsShown:!1,instance:e})}),this.fieldPicker.decorated=!0),this.configurableForm.decorated||(this.configurableForm.bind("rendered",function(t,n){e.currentView=e.configurableForm,e.fieldPicker.switchToCustom(!0),e.fieldPicker.setForm(e.configurableForm),e.fieldPicker.bindInlineDialog(),i.setForm(e.configurableForm),i.bindImportIssueUrl(),e.applyGlobalDecorator(n),e.model.setUseConfigurableForm(!0),e.triggerEvent("configurableFormRendered")}),this.configurableForm.bind("submitted",function(i,t){e.successData.push(t),e.triggerEvent("configurableFormSubmitted"),e.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.submit.success",allFieldsShown:!1,instance:e})}),this.configurableForm.bind("issueCreated",function(i,t){e.triggerEvent("issueCreated",t),e.metrics&&e.metrics.end({key:"jira.create.issue.dialog.submit"})}),this.configurableForm.decorated=!0),this.unconfigurableForm.decorated||(this.unconfigurableForm.bind("rendered",function(t,n){e.fieldPicker.switchToAll(!0),e.fieldPicker.setForm(e.unconfigurableForm),e.fieldPicker.bindInlineDialog(),i.setForm(e.unconfigurableForm),i.bindImportIssueUrl(),e.currentView=e.unconfigurableForm,e.applyGlobalDecorator(n),e.model.setUseConfigurableForm(!1),e.triggerEvent("unconfigurableFormRendered")}),this.unconfigurableForm.bind("submitted",function(i,t){e.successData.push(t),e.triggerEvent("unconfigurableFormSubmitted"),e.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.submit.success",allFieldsShown:!0,instance:e})}),this.unconfigurableForm.bind("issueCreated",function(i,t){e.triggerEvent("issueCreated",t),e.metrics&&e.metrics.end({key:"jira.create.issue.dialog.submit"})}),this.unconfigurableForm.decorated=!0)},applyGlobalDecorator:function(e){function i(){t.currentView.setInitialFocus&&t.currentView.setInitialFocus()}var t=this;e.detach(),this.$element.html(e),this.triggerEvent("contentRefreshed",[this.$element]),a.isIE()?window.setTimeout(i,0):i()},asDialog:function(e){e=d.extend(!0,{},e);var i,t=this,n=!!e.modeless;return this.dialog=i=new o({id:e.id,trigger:e.trigger,windowTitle:void 0!==e.windowTitle?e.windowTitle:!n,width:n?s.WIDTH_PRESETS.medium:s.WIDTH_PRESETS.large,fixedToTop:u.isFeatureEnabled("jira.simplify.issue.create"),defineResources:function(){this.requireContext("jira.create.issue")},content:function(e){t.render().done(function(){t.triggerEvent("dialogRendered"),e(t.$element)}),t.triggerEvent("dialogShown")},submitHandler:function(e,i){e.preventDefault(),t.metrics&&t.metrics.start({isInitial:!1,key:"jira.create.issue.dialog.submit"}),t.currentView.submit().then(i,i)},stacked:!0,modeless:n}),"edit-issue-dialog"===e.id&&d(this.dialog).on("beforeShow",function(e){c.getIssueKey()||l.isRowSelected()||e.preventDefault()}),this.dialog._focusFirstField=function(){o.prototype._focusFirstField.apply(this,["div.content :input:visible:first"])},this.bind("initialized",function(){this.unconfigurableForm.bind("sessionComplete",function(){i.hide()}),this.configurableForm.bind("sessionComplete",function(){i.hide()})}).bind("contentRefreshed",function(){i.notifyOfNewContent()}),i.bind("Dialog.hide",function(){t.successData.length&&(t.triggerEvent("sessionComplete",[t.successData],!0),t.successData=[])}),t.$element.ajaxStart(function(){i.showFooterLoadingIndicator()}).ajaxStop(function(){i.hideFooterLoadingIndicator()}),i.getQuickForm=function(){return t},i.dirtyFormWarning(),i},lazyInit:function(){var e=this,i=this.options.call(this);this.model=i.model,this.errorHandler=i.errorHandler,this.globalEventNamespaces=i.globalEventNamespaces,this.configurableForm=i.configurableForm,this.unconfigurableForm=i.unconfigurableForm,this.sessionComplete=i.sessionComplete,this.model.clearRetainedFields(),this.configurableForm.invalidateFieldsCache(),this.model.bind("serverError",function(i,t){e.$element.html(e.errorHandler.render(t)),e.triggerEvent("contentRefreshed",[this.$element])}),this.triggerEvent("initialized"),this.decorateRenderers()},render:function(){var e=this,i=d.Deferred();return this.lazyInit(),e.model.getUseConfigurableForm().done(function(t){t===!0?e.configurableForm.render().done(function(t,n){i.resolveWith(e,[e.$element]),e.$element.append(n)}):e.unconfigurableForm.render().done(function(t,n){i.resolveWith(e,[e.$element,n]),e.$element.append(n)})}).fail(function(){i.resolveWith(e,[e.$element])}),i.promise()}})}),AJS.namespace("JIRA.Forms.Container",null,require("quick-edit/form/container"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/error.js' */
define("quick-edit/form/error",["quick-edit/util/control","quick-edit/templates/form","jira/ajs/ajax/smart-ajax"],function(r,e,t){"use strict";return r.extend({getErrorMessageFromSmartAjax:function(r){var a,s;if(r.hasData&&401!==r.status)try{s=JSON.parse(r.data),a=s.errorMessages&&s.errorMessages.length>0?e.errorMessage({message:s.errorMessages[0]}):t.buildDialogErrorContent(r,!0).html()}catch(e){a=t.buildDialogErrorContent(r,!0).html()}else a=t.buildDialogErrorContent(r,!0).html();return a},render:function(r){var e=this.getErrorMessageFromSmartAjax(r);return this._render(e)}})}),AJS.namespace("JIRA.Forms.Error",null,require("quick-edit/form/error"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/create-issue.js' */
define("quick-edit/form/error/create-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(e,r,t){"use strict";return e.extend({_render:function(e){return t(r.createIssueError({errorHtml:e}))}})}),AJS.namespace("JIRA.Forms.CreateIssueError",null,require("quick-edit/form/error/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/edit-issue.js' */
define("quick-edit/form/error/edit-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(e,r,i){"use strict";return e.extend({_render:function(e){return i(r.editIssueError({errorHtml:e}))}})}),AJS.namespace("JIRA.Forms.EditIssueError",null,require("quick-edit/form/error/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/unconfigurable/create-issue.js' */
define("quick-edit/form/unconfigurable-create-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery","jira/featureflags/simplified-ux-feature-manager"],function(e,t,i,s,r,o,n,l){"use strict";return e.extend({init:function(e){this._serialization={},this.globalEventNamespaces=e.globalEventNamespaces||[],this.model=e.model,this.helper=new t(this),this.title=e.title,this.action=o()+"/secure/QuickCreateIssue.jspa?decorator=none",this.$element=n("<div class='qf-unconfigurable-form' />")},handleSubmitSuccess:function(e){this.helper.handleSubmitSuccess(e)},_render:function(){var e=n.Deferred(),t=this;return this.getFieldsHtml().done(function(o){t.model.getIssueSetupFields().done(function(n){var u=i.createIssueForm({issueSetupFields:n,fieldsHtml:o,parentIssueId:t.model.getParentIssueId(),atlToken:t.model.getAtlToken(),formToken:t.model.getFormToken(),isImportIssueButtonEnabled:l.isImportIssueButtonEnabled(),title:t.title,multipleMode:t.model.isInMultipleMode(),showFieldConfigurationToolBar:!r.isAnonymous(),modifierKey:s.getModifierKey()}),a=s.extractScripts(u);t.$element.empty().append(a.html),t.helper.restoreFormDirtyStatus(),t.helper.decorate(),t.helper.decorateFields(),e.resolveWith(t,[t.$element,a.scripts])})}),e.promise()}})}),AJS.namespace("JIRA.Forms.UnconfigurableCreateIssueForm",null,require("quick-edit/form/unconfigurable-create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/unconfigurable/edit-issue.js' */
define("quick-edit/form/unconfigurable-edit-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery","underscore","jira/featureflags/feature-manager"],function(e,t,i,s,r,n,o,l){"use strict";return e.extend({init:function(e){this.globalEventNamespaces=e.globalEventNamespaces||[],this.model=e.model,this.issueId=e.issueId,this.title=e.title,this.action=r()+"/secure/QuickEditIssue.jspa?issueId="+e.issueId+"&decorator=none",this.$element=n("<div class='qf-unconfigurable-form' />")},getFieldsHtml:function(){var e=this,t=n.Deferred(),s={};return this.model.getUnconfigurableTabs().done(function(r){var n=l.isFeatureEnabled("jira.simplify.issue.create");n?1===r.length?s.fields={primary:r[0].fields,secondary:[]}:(s.tabs=r.map(function(e){return o.extend(e,{fields:{primary:e.fields,secondary:[]}})}),s.hasTabs=!0):1===r.length?s.fields=r[0].fields:(s.tabs=r,s.hasTabs=!0),s.simpleCreate=n||!1,t.resolveWith(e,[i.issueFields(s)])}),t.promise()},handleSubmitSuccess:function(e){this.triggerEvent("submitted",[e]),this.triggerEvent("issueEdited",[e],!0),this.triggerEvent("sessionComplete")},_render:function(){var e=n.Deferred(),r=this;return this.getFieldsHtml().done(function(n){var o={fieldsHtml:n,title:r.title,issueId:r.issueId,atlToken:r.model.getAtlToken(),formToken:r.model.getFormToken(),pid:r.model.getPid(),modifierKey:t.getModifierKey(),showFieldConfigurationToolBar:!s.isAnonymous()};this.model.getCommentField().then(function(s){var n,l;o.commentField=s,n=i.editIssueForm(o),l=t.extractScripts(n),r.$element.html(l.html),e.resolveWith(r,[r.$element,l.scripts])},function(){var s=i.editIssueForm(o),n=t.extractScripts(s);r.$element.html(n.html),e.resolveWith(r,[r.$element,n.scripts])})}),e.promise()}})}),AJS.namespace("JIRA.Forms.UnconfigurableEditIssueForm",null,require("quick-edit/form/unconfigurable-edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/create-issue.js' */
define("quick-edit/form/factory/create-issue",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue"],function(e,a,r,s,t){"use strict";return function(i){return i=i||{},new e(function(){i.globalEventNamespaces=i.globalEventNamespaces||["QuickCreateIssue"];var e="Create issue",o=new t({projectId:i.pid,issueType:i.issueType,fields:i.fields}),c=new a({model:o,title:e,globalEventNamespaces:i.globalEventNamespaces}),n=new r({model:o,title:e,globalEventNamespaces:i.globalEventNamespaces});return{globalEventNamespaces:i.globalEventNamespaces,model:o,errorHandler:new s,configurableForm:c,unconfigurableForm:n}})}}),AJS.namespace("JIRA.Forms.createCreateIssueForm",null,require("quick-edit/form/factory/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/create-subtask.js' */
define("quick-edit/form/factory/create-subtask",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/util/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(e,t,s,a,r,i,u,n){"use strict";function c(e){return e.parentIssueId||u.getIssueId()||n.getSelectedIssueId()}return function(u){return u=u||{},new e(function(){u.globalEventNamespaces=u.globalEventNamespaces||["QuickCreateSubtask"];var e=c(u),n=i.getIssueActionTitle("Create Subtask"),o=new a({parentIssueId:e,projectId:u.pid,issueType:u.issueType,fields:u.fields}),l=new t({model:o,title:n,globalEventNamespaces:u.globalEventNamespaces}),d=new r({model:o,title:n,globalEventNamespaces:u.globalEventNamespaces});return{globalEventNamespaces:u.globalEventNamespaces,model:o,errorHandler:new s,configurableForm:l,unconfigurableForm:d}})}}),AJS.namespace("JIRA.Forms.createSubtaskForm",null,require("quick-edit/form/factory/create-subtask"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/edit-issue.js' */
define("quick-edit/form/factory/edit-issue",["quick-edit/form/container","quick-edit/form/configurable/edit-issue","quick-edit/form/error/edit-issue","quick-edit/util/dialog","quick-edit/form/model/factory/edit-issue","quick-edit/form/unconfigurable-edit-issue","jira/issue","jira/issuenavigator/issue-navigator","jquery"],function(e,i,t,s,u,r,n,o,d){"use strict";function a(e){var i=s.getAttrFromActiveTrigger("data-issueId");return d.isFunction(e.issueId)?e.issueId(e):e.issueId?e.issueId:i?i:n.getIssueId()||o.getSelectedIssueId()}function c(){var e="Edit issue";return s.shouldShowIssueKeyInTitle()?s.getIssueActionTitle(e):e}return function(s){return s=s||{},new e(function(){var e=a(s),n=c(),o=u(e),d=new i({title:n,model:o,issueId:e,globalEventNamespaces:["QuickEdit"]}),l=new r({title:n,model:o,issueId:e,globalEventNamespaces:["QuickEdit"]});return{globalEventNamespaces:["QuickEdit"],model:o,errorHandler:new t,configurableForm:d,unconfigurableForm:l}})}}),AJS.namespace("JIRA.Forms.createEditIssueForm",null,require("quick-edit/form/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:loading-indicator', location = 'js/util/loading-indicator.js' */
define("quick-edit/util/loading-indicator",["jira/loading/loading","jira/flag"],function(i,n){var o=AJS.dim,a=AJS.undim;return{showLoadingIndicator:function(){o(),i.showLoadingIndicator()},hideLoadingIndicator:function(o){a(),i.hideLoadingIndicator(),o&&n.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")}}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue-bootstrap', location = 'js/init/edit-bootstrap-wrm.js' */
require(["jquery","underscore","wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(i,e,t,n,r){var a,u=function(){r.disable(),n.showLoadingIndicator()},c=function(){n.hideLoadingIndicator(!0),r.enable()},o=function(e){e.preventDefault(),u();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue",o=t([n]);o.then(function(){var t=require("quick-edit/init/edit");a||(a=t.initDialog()),a._events.trigger.simpleClick.call(a,e,i(e.target)),r.enable()},function(){c()})};i(document).delegate(".issueaction-edit-issue","click",o)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue', location = 'js/init/edit.js' */
define("quick-edit/init/edit",["quick-edit/form/factory/edit-issue","quick-edit/util/dialog","aui/tabs","jquery"],function(i,t,e,n){"use strict";var u=function(){var u=i().asDialog({windowTitle:function(){return t.getIssueActionTitle("Edit issue")},id:"edit-issue-dialog"});return n(document).bind("dialogContentReady",function(){e.setup()}),u};return{initDialog:u}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'js/init/create-dialogs.js' */
define("quick-edit/init/create-dialogs",["wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(i,e,a){var t=function(){a.disable(),e.showLoadingIndicator()},n=function(){e.hideLoadingIndicator(!0),a.enable()},r=!1,u=function(e){if(!r){r=!0,t();var u="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue",o=i([u]);o.then(function(){var i=require("quick-edit/init/create");i.initIssueDialog(e),a.enable(),r=!1},function(){n(),r=!1})}},o=!1,c=function(e){if(!o){o=!0,t();var r="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue",u=i([r]);u.then(function(){var i=require("quick-edit/init/create");i.initSubtaskDialog(e),a.enable(),o=!1},function(){n(),o=!1})}};return{showCreateDialog:u,showCreateSubtaskDialog:c}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'js/init/create-bootstrap-wrm.js' */
require(["jquery","quick-edit/init/create-dialogs","jira/featureflags/simplified-ux-feature-manager"],function(e,t,i){i.isGlobalSidebarEnabled()&&JIRA.API.getSidebar().then(function(e){e.on(e.events.JIRA_SUMMON_CREATE_ISSUE_DIALOG,function(e){t.showCreateDialog(e)})}),e(function(){var e=document.getElementById("stqc_show");e&&(e.onclick=null)}),e(document).on("simpleClick",".create-issue, .create-issue-type",function(e){e.preventDefault(),t.showCreateDialog(e)}),e(document).on("simpleClick",".issueaction-create-subtask",function(e){e.preventDefault(),t.showCreateSubtaskDialog(e)})});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue', location = 'js/init/create.js' */
define("quick-edit/init/create",["quick-edit/form/factory/create-issue","quick-edit/form/factory/create-subtask","quick-edit/util/dialog","jira/analytics/web-client","jira/analytics/transformers/issue-type","jira/featureflags/feature-manager","jquery"],function(e,t,a,i,s,r,n){"use strict";var d=function(t){var a=n(t.target),r=a.is("a")?a:a.find("a"),d=parseUri(r.attr("href")).queryKey,u={pid:d.pid,issueType:d.issuetype};u=n.extend(u,{pid:a.attr("data-pid"),issueType:a.attr("data-issue-type")});var c=e(u);n(c).on("dialogRendered",function(){JIRA.trace("create.issue.dialog.rendered"),i.sendPageEvent("createIssueModal")}),n(c).on("issueCreated",function(e,t){JIRA.trace("create.issue.dialog.issue.created");var a=t.createdIssueDetails.fields,r=String(a.project.id),n=a.project.projectTypeKey,d=String(t.createdIssueDetails.id),u=s.map(a.issuetype.name),c=String(a.issuetype.id);i.sendTrackEvent({containerType:"project",containerId:r,source:"createIssueModal",objectType:"issue",objectId:d,actionSubject:"issue",action:"created",attributes:{issueType:u,issueTypeId:c,projectType:n}})}),c.asDialog({trigger:document.createElement("a"),id:"create-issue-dialog",windowTitle:"Create issue"}).show()},u=function(e){var s=n(e.target),r=s.is("a")?s:s.find("a"),d=r.attr("data-issueid");d=d||n("#fallback-subtask-dialog-issueid").data("issueid");var u={parentIssueId:d},c=t(u);n(c).on("dialogRendered",function(){i.sendPageEvent("createSubTaskModal")}),c.asDialog({windowTitle:function(){return a.getIssueActionTitle("Create Subtask")},trigger:document.createElement("a"),id:"create-subtask-dialog"}).show()};return{initIssueDialog:d,initSubtaskDialog:u}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/viewissue/devstatus-panel.soy' */
// This file was automatically generated from devstatus-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }


JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon = function(opt_data, opt_ignored) {
  return '' + aui.message.info({content: '' + JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages({errorInstances: opt_data.instances, notConfiguredInstances: opt_data.notConfiguredInstances, showContactAdminForm: opt_data.showContactAdminForm})});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon';
}


JIRA.Templates.DevStatus.connectionProblemAsWarning = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '' + JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages({errorInstances: opt_data.instances, notConfiguredInstances: opt_data.notConfiguredInstances, showContactAdminForm: opt_data.showContactAdminForm})});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAsWarning.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAsWarning';
}


JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages = function(opt_data, opt_ignored) {
  return '' + (((! opt_data.errorInstances || opt_data.errorInstances.length == 0) && (! opt_data.notConfiguredInstances || opt_data.notConfiguredInstances.length == 0)) ? '<p class="connection-error">' + soy.$$filterNoAutoescape('JIRA is having difficulty contacting the applications that supply development status information.') + ' ' + JIRA.Templates.DevStatus.contactAdmin(opt_data) + '</p>' : ((opt_data.errorInstances.length > 0) ? '<p class="connection-error">' + JIRA.Templates.DevStatus.connectionProblemMultipleInstances({instances: opt_data.errorInstances}) + ' ' + JIRA.Templates.DevStatus.contactAdmin(opt_data) + '</p>' : '') + ((opt_data.notConfiguredInstances && opt_data.notConfiguredInstances.length > 0) ? '<p class="config-errors">' + JIRA.Templates.DevStatus.configProblem(opt_data) + '</p>' : ''));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages.soyTemplateName = 'JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages';
}


JIRA.Templates.DevStatus.contactAdmin = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + soy.$$filterNoAutoescape(AJS.format('If this condition persists, please contact your {0}JIRA administrators{1}.',opt_data.showContactAdminForm ? '<a id="contact-admin" href="' + "" + '/secure/ContactAdministrators!default.jspa">' : '',opt_data.showContactAdminForm ? '</a>' : ''));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.contactAdmin.soyTemplateName = 'JIRA.Templates.DevStatus.contactAdmin';
}


JIRA.Templates.DevStatus.connectionProblem = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.adminError) {
    output += JIRA.Templates.DevStatus.connectionProblemAdminError(opt_data);
  } else {
    output += '<p class="connection-error">' + ((! opt_data.instances || opt_data.instances.length == 0) ? soy.$$filterNoAutoescape('JIRA is having difficulty contacting the applications that supply development status information.') : JIRA.Templates.DevStatus.connectionProblemMultipleInstances(opt_data)) + ' ';
    var contactAdminAnchor__soy57 = '<a id="contact-admin" href="' + soy.$$escapeHtml("") + '/secure/ContactAdministrators!default.jspa">';
    output += soy.$$filterNoAutoescape(AJS.format('If this condition persists, please contact your {0}JIRA administrators{1}.',opt_data.showContactAdminForm ? contactAdminAnchor__soy57 : '',opt_data.showContactAdminForm ? '</a>' : '')) + '</p>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblem.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblem';
}


JIRA.Templates.DevStatus.connectionProblemAdminError = function(opt_data, opt_ignored) {
  var output = '<p class="connection-error admin-error">' + soy.$$escapeHtml(opt_data.adminError.message) + '</p><p class="configure-applinks-link"><a href="' + soy.$$escapeHtml("") + '/plugins/servlet/applinks/listApplicationLinks">' + soy.$$escapeHtml('Configure Application Links') + '</a></p>';
  if (opt_data.adminError.details) {
    output += '<p class="connection-error"><a id="replace-text-trigger" data-replace-text="' + soy.$$escapeHtml('Hide error details') + '" class="aui-expander-trigger" aria-controls="expander-with-replace-text-content">' + soy.$$escapeHtml('Show error details') + '</a></p><div id="expander-with-replace-text-content" class="aui-expander-content admin-error-details"><ul>';
    var detailList79 = opt_data.adminError.details;
    var detailListLen79 = detailList79.length;
    for (var detailIndex79 = 0; detailIndex79 < detailListLen79; detailIndex79++) {
      var detailData79 = detailList79[detailIndex79];
      output += '<li>' + soy.$$escapeHtml(detailData79) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAdminError.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAdminError';
}


JIRA.Templates.DevStatus.configProblem = function(opt_data, opt_ignored) {
  var output = '';
  var servers__soy86 = opt_data.notConfiguredInstances;
  output += '<span class="description">';
  var server0__soy88 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[0]});
  if (servers__soy86.length == 1) {
    output += soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}.',server0__soy88));
  } else {
    var server1__soy96 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[1]});
    if (servers__soy86.length == 2) {
      output += soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0} and {1}.',server0__soy88,server1__soy96));
    } else {
      var server2__soy104 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[2]});
      output += (servers__soy86.length == 3) ? soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}, {1}, and {2}.',server0__soy88,server1__soy96,server2__soy104)) : soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}, {1}, {2}, and {3} other {3,choice,1#application|1\x3capplications}.',server0__soy88,server1__soy96,server2__soy104,servers__soy86.length - 3));
    }
  }
  output += '</span> <span class="hints">';
  var helpUrl__soy115 = ({"alt":"Get help!","title":"JIRA Application Development panel displays error - Couldn't read data","url":"https://confluence.atlassian.com/display/JIRAKB/JIRA+Application+Development+panel+displays+error+-+Couldn%27t+read+data"});
  output += soy.$$filterNoAutoescape(AJS.format('Learn {0}about this issue{1} or go to {2}application links{3} to fix it.','<a href="' + helpUrl__soy115.url + '" target="_blank">','</a>','<a href="' + "" + '/plugins/servlet/applinks/listApplicationLinks">','</a>')) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.configProblem.soyTemplateName = 'JIRA.Templates.DevStatus.configProblem';
}


JIRA.Templates.DevStatus.connectionProblemMultipleInstances = function(opt_data, opt_ignored) {
  var output = '';
  var instance0__soy120 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[0]});
  if (opt_data.instances.length == 1) {
    output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0}.',instance0__soy120));
  } else {
    var instance1__soy128 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[1]});
    if (opt_data.instances.length == 2) {
      output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0} and {1}.',instance0__soy120,instance1__soy128));
    } else {
      var instance2__soy136 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[2]});
      output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0}, {1}, {3,choice,0#and {2}|1#{2}, and another application|1\x3c{2}, and {3} more applications}.',instance0__soy120,instance1__soy128,instance2__soy136,opt_data.instances.length - 3));
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemMultipleInstances.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemMultipleInstances';
}


JIRA.Templates.DevStatus.connectionProblemSingleInstance = function(opt_data, opt_ignored) {
  return '<span class="instance" data-name="' + soy.$$escapeHtml(opt_data.instance.name) + '"><a href="' + soy.$$escapeHtml(opt_data.instance.baseUrl) + '" title="' + soy.$$escapeHtml(opt_data.instance.name) + '">' + soy.$$escapeHtml(opt_data.instance.name) + '</a></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemSingleInstance.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemSingleInstance';
}


JIRA.Templates.DevStatus.lastUpdated = function(opt_data, opt_ignored) {
  return '' + ((opt_data.lastUpdated) ? '<dd class="sub-text' + ((opt_data.extraClass) ? ' ' + soy.$$escapeHtml(opt_data.extraClass) : '') + '">' + JIRA.Templates.DevStatus.transitionContainer({content: '<div>' + soy.$$escapeHtml(opt_data.text) + ' <time class="livestamp date user-tz allow-future" ' + ((opt_data.datetimeFormat) ? 'data-datetime-format="' + soy.$$escapeHtml(opt_data.datetimeFormat) + '" ' : '') + 'datetime="' + soy.$$escapeHtml(opt_data.lastUpdated) + '">$' + soy.$$escapeHtml(opt_data.lastUpdated) + '</time></div>'}) + '</dd>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.lastUpdated.soyTemplateName = 'JIRA.Templates.DevStatus.lastUpdated';
}


JIRA.Templates.DevStatus.transitionContainer = function(opt_data, opt_ignored) {
  return '<div class="rolling-container sliding-container"><div class="rolling-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.transitionContainer.soyTemplateName = 'JIRA.Templates.DevStatus.transitionContainer';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/viewissue/devstatus-cta-dialog.soy' */
// This file was automatically generated from devstatus-cta-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Dialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Dialog == 'undefined') { JIRA.Templates.DevStatus.Dialog = {}; }


JIRA.Templates.DevStatus.Dialog.content = function(opt_data, opt_ignored) {
  var output = '<div class="jira-dialog-heading">' + ((opt_data.prompt) ? '<h2>' + soy.$$escapeHtml(opt_data.prompt) + '</h2>' : '') + '</div><div class="jira-dialog-content"><ul class="targets">';
  var remoteAppList10 = opt_data.remoteApps;
  var remoteAppListLen10 = remoteAppList10.length;
  for (var remoteAppIndex10 = 0; remoteAppIndex10 < remoteAppListLen10; remoteAppIndex10++) {
    var remoteAppData10 = remoteAppList10[remoteAppIndex10];
    output += '<li>' + JIRA.Templates.DevStatus.Dialog.remoteApp(remoteAppData10) + '</li>';
  }
  output += '</ul><div class="buttons-container"><div class="buttons"><button class="aui-button aui-button-link cancel" id="aui-dialog-close">' + soy.$$escapeHtml('Cancel') + '</button></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Dialog.content.soyTemplateName = 'JIRA.Templates.DevStatus.Dialog.content';
}


JIRA.Templates.DevStatus.Dialog.remoteApp = function(opt_data, opt_ignored) {
  return '<a class="target ' + ((opt_data.primary) ? 'primary' : '') + '" data-application-type="' + soy.$$escapeHtml(opt_data.applicationType) + '" href="' + soy.$$escapeHtml(opt_data.url) + '">' + ((opt_data.iconUrl) ? '<img class="application-icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '">' : '<span class="application-icon ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span>') + '<div class="title" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</div><div class="base-url" title="' + soy.$$escapeHtml(opt_data.baseUrl) + '">' + soy.$$escapeHtml(opt_data.baseUrl) + '</div></a>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Dialog.remoteApp.soyTemplateName = 'JIRA.Templates.DevStatus.Dialog.remoteApp';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/common/devstatus-common.soy' */
// This file was automatically generated from devstatus-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Common == 'undefined') { JIRA.Templates.DevStatus.Common = {}; }


JIRA.Templates.DevStatus.Common.learnMoreLink = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.devToolsLearnMoreLink) ? ' <a href="' + soy.$$escapeHtml(opt_data.devToolsLearnMoreLink) + '" class="learn-more-link" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Common.learnMoreLink.soyTemplateName = 'JIRA.Templates.DevStatus.Common.learnMoreLink';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-backbone-define', location = 'js/util/DevStatusBackboneDefine.js' */
"use strict";Backbone&&!Backbone.define&&(Backbone.define=function(name,ctor){eval("Backbone['Class: "+name+"'] = function() { Backbone['Class: "+name+"'].__ctor.apply(this, arguments); }");var cls=Backbone["Class: "+name];cls.__ctor=ctor,ctor.prototype.name=name,cls.prototype=ctor.prototype,_.extend(cls,ctor),_.each(ctor.prototype,function(t,e){"function"==typeof t&&(t.displayName=name+"."+e)});var context=window,parts=name.split(".");return _.each(parts,function(t,e){e===parts.length-1?context[t]=cls:context=null==context[t]?context[t]={}:context[t]}),cls});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:event-publisher', location = 'js/util/EventPublisher.js' */
"use strict";define("jira-development-status/util/event-publisher",function(){return{trigger:AJS.trigger}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-wrm', location = 'js/util/DevStatusWRM.js' */
"use strict";define("jira-development-status/util/WRM",["underscore","jira-development-status/util/event-publisher"],function(e,r){var n="wrc!com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources-ctx",i="jira.devsummary.dialog-resources.wrm.load",t=function(){return window.performance.now()},a=function(e){var r=t();WRM.require([n],function(){o(r),e&&e()})},u=function(e){var n=Math.round(t()-e);r.trigger("analyticsEvent",{name:i,data:{durationInMillis:n}})},o=e.once(u);return{ANALYTIC_EVENT:i,requireDetailDialogResources:a}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/devstatus-analytics.js' */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/dev-status/analytics",["require","exports"],function(e,i){var n=e("jira/util/events"),t=e("jira/util/events/types"),a=e("jira/util/data/meta"),l=e("jquery"),c=e("underscore"),r=".edit-permission-link";i.Analytics={fireEvent:function(e,i){var n="devstatus."+e,t="object"!==("undefined"==typeof i?"undefined":_typeof(i))?{}:i;AJS.trigger("analyticsEvent",{name:n,data:t})},fireAgileDevStatusLinkClicked:function(){return i.Analytics.fireEvent("panel.agile.icon.clicked")}},i.SummaryAnalytics={fireSummaryShownEvent:function(e){var n=e.isAssignee,t=e.eventProperties,a=n?"assignee":"nonassignee";return i.Analytics.fireEvent("summary.shown."+a,t)},fireSummaryClickedEvent:function(e,n){var t=a.get("fusion-analytics-new-context-link"),l=".clicked";return t&&(a.set("fusion-analytics-new-context-link",void 0),l+=".newcontext"),i.Analytics.fireEvent(e+".summary"+l,n)},fireDetailTabClicked:function(e,n){return i.Analytics.fireEvent(n+".detail.tab.clicked",{applicationName:e})}},i.BuildsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("builds",e)},fireDetailProjectClicked:function(){return i.Analytics.fireEvent("builds.detail.project.clicked")},fireDetailPlanClicked:function(){return i.Analytics.fireEvent("builds.detail.plan.clicked")},fireDetailBuildClicked:function(){return i.Analytics.fireEvent("builds.detail.build.clicked")}},i.DeploymentsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("deployments",e)},fireDetailProjectClicked:function(){return i.Analytics.fireEvent("deployments.detail.project.clicked")},fireDetailEnvironmentClicked:function(){return i.Analytics.fireEvent("deployments.detail.environment.clicked")},fireDetailReleaseClicked:function(){return i.Analytics.fireEvent("deployments.detail.release.clicked")}},i.CommitsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("commits",e)},fireDetailRepoClicked:function(e){return i.Analytics.fireEvent("commits.detail.repo.clicked",{applicationName:e})},fireDetailCommitClicked:function(e){return i.Analytics.fireEvent("commits.detail.commit.clicked",{applicationName:e})},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"commits")},fireDetailFileExpandedClicked:function(e){return i.Analytics.fireEvent("commits.detail.file.expanded.clicked",{applicationName:e})},fireDetailFilesExpandedClicked:function(e){return i.Analytics.fireEvent("commits.detail.files.expanded.clicked",{applicationName:e})},fireDetailFileClicked:function(e){return i.Analytics.fireEvent("commits.detail.file.clicked",{applicationName:e})},fireDetailReviewsShown:function(e){return i.Analytics.fireEvent("commits.detail.reviews.shown",{applicationName:e})},fireDetailReviewClicked:function(e){return i.Analytics.fireEvent("commits.detail.review.clicked",{applicationName:e})},fireDetailBranchesShown:function(e){return i.Analytics.fireEvent("commits.detail.branches.shown",{applicationName:e})},fireDetailCreateReviewClicked:function(e,n){return i.Analytics.fireEvent("commits.detail.review.create"+(n?".all":""),{applicationName:e})}},i.ReviewsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("reviews",e)},fireDetailReviewClicked:function(){return i.Analytics.fireEvent("reviews.detail.review.clicked")}},i.BranchesAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("branches",e)},_fireDetailClickedEvent:function(e,n){return i.Analytics.fireEvent("branches.detail."+n+".clicked",{applicationName:e})},_fireDetailClickedEventAssignable:function(e,i,n,t){"undefined"!=typeof n&&"undefined"!=typeof t&&(n?e+=".assignee":(e+=".nonassignee",e+=t?".assignable":".nonassignable")),this._fireDetailClickedEvent(i,e)},fireDetailRepoClicked:function(e){this._fireDetailClickedEvent(e,"repo")},fireDetailBranchClicked:function(e){this._fireDetailClickedEvent(e,"branch")},fireDetailPullRequestLozengeClick:function(e){this._fireDetailClickedEvent(e,"pullrequest.lozenge")},fireDetailReviewLozengeClick:function(e){this._fireDetailClickedEvent(e,"review.lozenge")},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"branches")},fireDetailCreatePullRequestClicked:function(e,i,n){this._fireDetailClickedEventAssignable("pullrequest.create",e,i,n)},fireDetailCreateReviewClicked:function(e,i,n){this._fireDetailClickedEventAssignable("review.create",e,i,n)}},i.PullRequestsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("pullrequests",e)},fireDetailPullRequestClicked:function(e){return i.Analytics.fireEvent("pullrequests.detail.pullrequest.clicked",{applicationName:e})},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"pullrequests")}},i.LearnMoreAnalytics={fireLearnMoreEvent:function(e,n){return i.Analytics.fireEvent("learnmore."+e,n)}},i.CtaDialogAnalytics={issueDetails:{},fireCreateBranchEvent:function(e,n){n="object"!==("undefined"==typeof n?"undefined":_typeof(n))?{}:n;var t=l.extend({issueStatus:this.issueDetails.status,issueType:this.issueDetails.type},n);return i.Analytics.fireEvent("createbranch."+e+"."+(this.issueDetails.isAssignee?"assignee":"nonassignee"),t)},_populateIssueDetails:function(e){this.issueDetails={status:""+e.data("issueStatus"),type:""+e.data("issueType"),isAssignee:e.data("isAssignee")}},_initHandler:function(e,i,n,t){if(n&&i.not(document).is(n)){var a=this;i.find(t).on("simpleClick",function(){var e=l(this);a._fireCreateBranchEvent(e)})}},_fireCreateBranchEvent:function(e){this._populateIssueDetails(e);var i="click",n=a.get("fusion-analytics-new-context-link");n&&(a.set("fusion-analytics-new-context-link",void 0),i+=".newcontext"),this.fireCreateBranchEvent(i)},initialize:function(e,a,r){var s=this;n.bind(t.NEW_CONTENT_ADDED,c.bind(function(i,n){this._initHandler(i,n,e,a)},this)),n.bind("GH.DetailView.updated",c.bind(function(i){this._initHandler(i,l(e),e,a)},this)),l(a).on("simpleClick",function(){var e=l(this);s._fireCreateBranchEvent(e)}),l(document).on("click","#"+r+" .jira-dialog-content .target",function(){var e=l(this);s.fireCreateBranchEvent("dialog.click",{title:e.find(".title").attr("title"),applicationType:e.data("applicationType")})}),l(document).on("click","#"+r+" .jira-dialog-content button.cancel",function(){s.fireCreateBranchEvent("dialog.cancel")}),l(document).on("click",".cta-tooltip .cta-learn-more-link",function(){i.LearnMoreAnalytics.fireLearnMoreEvent("click.ctahelptipbranching")})}},i.AdminAnalytics={fireAdminEvent:function(e,n){return i.Analytics.fireEvent("admin."+e,n)},initialize:function(){var e=this,n=l("#project-config-panel-dev-status");n.find(r).on("click",function(){e.fireAdminEvent("editpermissionlink.config."+(l("ul.permissions-list li.devstatus-admin-permission-item").length>0?"withpermissions":"nopermissions"))}),n.find(".learn-more-link").on("click",function(){i.LearnMoreAnalytics.fireLearnMoreEvent("click.adminappvertisementlink")}),n.find("#project-config-applinks-connect").on("click",function(){e.fireAdminEvent("connect")}),n.find(".devstatus-admin-connect-button-option").on("click",function(){var i=l(this).data("key")||"unknown";e.fireAdminEvent("connect."+i)})}},i.AdminSummaryAnalytics={initialize:function(){l("#project-config-webpanel-devstatus-admin-summary-panel").find(r).on("click",function(){i.AdminAnalytics.fireAdminEvent("editpermissionlink.summary.nopermissions")})}}}),function(e){AJS.namespace("JIRA.DevStatus.AdminAnalytics",null,e.AdminAnalytics),AJS.namespace("JIRA.DevStatus.AdminSummaryAnalytics",null,e.AdminSummaryAnalytics),AJS.namespace("JIRA.DevStatus.Analytics",null,e.Analytics),AJS.namespace("JIRA.DevStatus.BranchesAnalytics",null,e.BranchesAnalytics),AJS.namespace("JIRA.DevStatus.BuildsAnalytics",null,e.BuildsAnalytics),AJS.namespace("JIRA.DevStatus.CommitsAnalytics",null,e.CommitsAnalytics),AJS.namespace("JIRA.DevStatus.CtaDialogAnalytics",null,e.CtaDialogAnalytics),AJS.namespace("JIRA.DevStatus.DeploymentsAnalytics",null,e.DeploymentsAnalytics),AJS.namespace("JIRA.DevStatus.LearnMoreAnalytics",null,e.LearnMoreAnalytics),AJS.namespace("JIRA.DevStatus.PullRequestsAnalytics",null,e.PullRequestsAnalytics),AJS.namespace("JIRA.DevStatus.ReviewsAnalytics",null,e.ReviewsAnalytics),AJS.namespace("JIRA.DevStatus.SummaryAnalytics",null,e.SummaryAnalytics)}(require("jira/dev-status/analytics"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/devstatus-rest-duration-analytics.js' */
"use strict";define("jira/dev-status/rest-duration-analytics",["jquery","underscore","jira/dev-status/time-tracking-analytics-event"],function(e,r,t){var n={ISSUE_SUMMARY_EVENT:"issue.summary.fetch.duration",ISSUE_DETAIL_EVENT:"issue.detail.fetch.duration",RR_TAB_EVENT:"release.report.tab.content.fetch.duration",ISSUE_BULK_SUMMARY_EVENT:"issue.bulksummary.fetch.duration",STALE_ISSUE_EVENT:"issue.stale.issue.fetch.duration"},s={},u=function(e){return e.indexOf("rest/dev-status/1.0/")>=0},a=function(e){return e.indexOf("rest/release-report/1.0")>=0},i=function(e){return e&&e.responseText?e.responseText.length:0},E=function(e,t){if(t){r.isArray(t)||(t=[t]);var n={};return e.split("?")[1].split("&").map(function(e){return e.split("=")}).filter(function(e){return r.include(t,e[0])}).reduce(function(e,t){var s=n[t[0]];s?r.isArray(s)?s.push(t[1]):n[t[0]]=[s,t[1]]:n[t[0]]=t[1]},{}),n}},o=function(e){return e.indexOf("issue/detail")>=0?n.ISSUE_DETAIL_EVENT:e.indexOf("issue/summary")>=0?n.ISSUE_SUMMARY_EVENT:e.indexOf("issue/bulksummary")>=0?n.ISSUE_BULK_SUMMARY_EVENT:e.indexOf("issue/stale-issues")>=0?n.STALE_ISSUE_EVENT:e.indexOf("release-report/1.0/tab/content")>=0?n.RR_TAB_EVENT:void 0},c=function(e,n,u){n||(n=[]),r.isArray(n)||(n=[n]),n.push("_");var a=E(e,n),i=new t(o(e),a._,r.extend(a,u));i.start(),s[i.getFullId()]=i},l=function(e){var r=o(e);if(r){var n=E(e,"_");return s[t.generateFullId(r,n?n._:void 0)]}},d=function(e,r){var t=l(e);t&&(t.endAndFire(r),delete s[t.getFullId()])},S=function(e){return e.status>=200&&e.status<300},_=function(e,r,t){c(t.url)},f=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasData:!(!s||!s.summary),hasErrors:!!(s&&s.errors&&s.errors.length)};d(t.url,u)},T=function(e,r,t){c(t.url,["applicationType","dataType"])},h=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasData:!!(s&&s.detail&&s.detail.length),hasErrors:!!(s&&s.errors&&s.errors.length)};d(t.url,u)},v=function(e,t,n){var s=E(n.url,["issueId"]).issueId,u=s?r.isArray(s)?s.length:1:0;c(n.url,[],{issues:u})},I=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasErrors:!!(s&&s.errors&&s.errors.length),changedIssues:n&&s.changedIssues?s.changedIssues.length:0,changed:n&&s.changed,devSummaryStale:n&&s.devSummaryStale};d(t.url,u)},U=function(e,r,t){c(t.url)},A=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),issues:n&&s?s.length:0};d(t.url,u)},p=function(e,r,t){c(t.url,"selectedTab")},N=function(e,r,t){var n=S(r),s={successful:n,contentLength:i(r)};d(t.url,s)},g={};g[n.ISSUE_DETAIL_EVENT]=T,g[n.ISSUE_SUMMARY_EVENT]=_,g[n.ISSUE_BULK_SUMMARY_EVENT]=v,g[n.STALE_ISSUE_EVENT]=U,g[n.RR_TAB_EVENT]=p;var V={};V[n.ISSUE_DETAIL_EVENT]=h,V[n.ISSUE_SUMMARY_EVENT]=f,V[n.ISSUE_BULK_SUMMARY_EVENT]=I,V[n.STALE_ISSUE_EVENT]=A,V[n.RR_TAB_EVENT]=N;var m=function(e,r,t,n){if(u(n.url)||a(n.url)){var s=e?g:V,i=s[o(n.url)];i&&i(r,t,n)}};e(document).ajaxSend(m.bind(null,!0)),e(document).ajaxComplete(m.bind(null,!1))});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/time-tracking-analytics-event.js' */
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();define("jira/dev-status/time-tracking-analytics-event",["underscore","jquery","jira/dev-status/analytics"],function(t,e,n){return function(){function e(t,n,r){_classCallCheck(this,e),this.category=t,2===arguments.length&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(r=n,n=void 0),this.id=n,this.data=r||{}}return _createClass(e,[{key:"start",value:function(t){return this.addData(t),this.startTime=window.performance.now(),this}},{key:"end",value:function(t){return this.addData(t),this.endTime=window.performance.now(),this.data.timeElapsed=Math.round(this.endTime-this.startTime),this}},{key:"endAndFire",value:function(t){return this.end(t).fire()}},{key:"fire",value:function(){return n.Analytics.fireEvent(this.category,this.data),this}},{key:"addData",value:function(e){return t.extend(this.data,e),this}},{key:"getFullId",value:function(){return this.constructor.generateFullId(this.category,this.id)}}],[{key:"generateFullId",value:function(t,e){return t+(e?"_"+e:"")}}]),e}()});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/AnalyticsModel.js' */
"use strict";define("jira/devstatus/analytics-model",["backbone","underscore","jira/dev-status/rest-duration-analytics"],function(t,a){return t.Model.extend({TO_ANALYTIC_KEY_OVERRIDE:{repository:"commit"},properties:["issue","summary"],initialize:function(t){this.devStatusContainer=t.devStatusContainer,this.devStatusData=t.devStatusData,this._getAllAnalyticData()},getIssue:function(){return this.get("issue")},getSummary:function(){return this.get("summary")},_getAllAnalyticData:function(){this.set("issue",this._getAnalyticIssueData()),this._initListenerToData()},_getAnalyticIssueData:function(){return{isAssignee:this.devStatusContainer.data("is-assignee"),isAssignable:this.devStatusContainer.data("is-assignable"),issueStatus:this.devStatusContainer.data("issue-status"),issueType:this.devStatusContainer.data("issue-type"),issueId:this.devStatusContainer.data("issue-id"),projectId:this.devStatusContainer.data("project-id")}},_getAnalyticSummaryData:function(t){var e=this,s={};return a.each(t.summary,function(t,a){s[e.TO_ANALYTIC_KEY_OVERRIDE[a]||a]=t.overall.count>0}),s},_initListenerToData:function(){var t=this;this.devStatusData.on("requestSuccess",function(){t.set("summary",t._getAnalyticSummaryData(t.devStatusData.get("aggregatedData")))})}})}),Backbone.define("JIRA.DevStatus.AnalyticsModel",require("jira/devstatus/analytics-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DateUtils.js' */
"use strict";define("jira/dev-status/util/date",["jquery"],function(t){return{addTooltip:function(e){var a=e.find("time.livestamp");a.livestamp(),a.each(function(){var e=t(this),a=e.attr("datetime"),i=isNaN(a)?a:+a,n=moment(i).zone(i);n.isValid()||(n=moment(i)),e.attr("title",n.format(JIRA.DevStatus.Date.format))})},format:"LLL"}}),function(t){AJS.namespace("JIRA.DevStatus.Date",null,t)}(require("jira/dev-status/util/date"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/dev-status-console.js' */
"use strict";define("jira-development-status/util/console",[],function(){if(console)return console;var e=function(){};return{log:e,info:e,warn:e,debug:e,error:e}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/dev-status-constants.js' */
"use strict";define("jira-development-status/util/constants",function(){return{PLUGIN_KEY:"com.atlassian.jira.plugins.jira-development-integration-plugin",RELEASE_REPORT_SELECTED_TAB:"release-report-selected-tab"}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/LocalStorage.js' */
"use strict";define("jira-development-status/util/local-storage",[],function(){return localStorage?localStorage:{setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/ApplinksUtils.js' */
"use strict";define("jira-development-status/util/applinks-utils",[],function(){return ApplinksUtils});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusLocalStorage.js' */
"use strict";define("jira-development-status/util/dev-status-local-storage",["underscore","jira-development-status/util/console","jira-development-status/util/local-storage"],function(e,t,r){var o=e.extend({},r);return o.setItem=function(e,o){try{r.setItem(e,o)}catch(a){var l="";(22===a.code||1014===a.code&&"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&(l=". Browser local storage is full. For more information please follow https://confluence.atlassian.com/jirakb/functionality-in-jira-fails-due-to-exceeding-chrome-quota-762874705.html"),t.error("Couldn't store '"+e+"' & '"+o+"' key-value pair locally: "+a.name+l)}},o.getItem=function(e){try{return r.getItem(e)}catch(o){t.error("Couldn't retrieve locally stored value for key '"+e+"': "+o.name)}},o.removeItem=function(e){try{r.removeItem(e)}catch(o){t.error("Couldn't remove locally stored value for key '"+e+"': "+o.name)}},o.clear=function(){try{r.clear()}catch(e){t.error("Couldn't clear local storage: "+e.name)}},o});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/Listeners.js' */
"use strict";define("jira/devstatus/util/listeners",["underscore"],function(t){return Class.extend({init:function(){this._listening=[]},startListening:function(t,i,n,s){var e={start:function(){return t.on(i,n,s),this},stop:function(){return t.off(i,n,s),this}};this._listening.push(e.start())},stopListening:function(){t.each(this._listening,function(t){t.stop()}),this._listening=[]}})}),Backbone.define("JIRA.DevStatus.Util.Listeners",require("jira/devstatus/util/listeners"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusNavigation.js' */
"use strict";define("jira-development-status/util/navigate",["underscore"],function(n){return{getUrl:function(){return window.location.href},reload:function(){n.defer(function(){window.location.reload()})},navigate:function(t){n.defer(function(){window.location=t})},redirectToLogin:function(){this.navigate(AJS.contextPath()+"/login.jsp?permissionViolation=true&os_destination="+encodeURIComponent(window.location.href))}}}),function(n){AJS.namespace("JIRA.DevStatus.Navigate",null,n)}(require("jira-development-status/util/navigate"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusURLUtils.js' */
"use strict";define("jira/dev-status/util/url",["jquery","underscore"],function(e,t){return{getDetailDialogParam:function(){var e=this._removeKickAssIHashFromUrl(JIRA.DevStatus.Navigate.getUrl()),t=parseUri(e);return t&&t.queryKey&&t.queryKey.devStatusDetailDialog},getUrlWithDetailDialogParam:function(e){var t=this._removeKickAssIHashFromUrl(JIRA.DevStatus.Navigate.getUrl()),r=parseUri(t);return r.queryKey.devStatusDetailDialog=encodeURIComponent(e),this.createUrlFromParsedUri(r)},getCreateReviewDetailUrl:function(e){return this.getUrlWithDetailDialogParam("create-review-"+e)},isCreateReviewDetailDialogLink:function(e){return e&&e.lastIndexOf&&0===e.lastIndexOf("create-review-",0)},getCreateReviewDetailDialogApplicationType:function(e){return e.substring("create-review-".length)},_removeKickAssIHashFromUrl:function(e){return e.replace("i#","")},createUrlFromParsedUri:function(r){var a=[];e.each(r.queryKey,function(r,i){t.isObject(i)?e.each(i,function(e,t){a.push(r+"="+t)}):a.push(r+"="+i)});var i="";return r.protocol&&(i+=r.protocol+"://"),r.authority&&(i+=r.authority),r.path&&(i+=r.path),a.length>0&&(i+="?"+a.join("&")),r.anchor&&(i+="#"+r.anchor),i}}}),function(e){AJS.namespace("JIRA.DevStatus.URL",null,e)}(require("jira/dev-status/util/url"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/ES6Utils.js' */
"use strict";define("jira/dev-status/util/es6",["exports"],function(t){t.stringStartsWith=function(t,n){return t.slice(0,0+n.length)===n},t.findIndex=function(t,n){for(var e=0;e<t.length;++e)if(n(t[e]))return e;return-1}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:fusion-widget-common-clientside', location = 'templates/fusion-widget/fusion-widget-common.soy' */
// This file was automatically generated from fusion-widget-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.FusionWidget.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.FusionWidget == 'undefined') { JIRA.Templates.FusionWidget = {}; }
if (typeof JIRA.Templates.FusionWidget.Common == 'undefined') { JIRA.Templates.FusionWidget.Common = {}; }


JIRA.Templates.FusionWidget.Common.branches = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#branch|1\x3cbranches}','<span class="count">',opt_data.count,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.branches.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.branches';
}


JIRA.Templates.FusionWidget.Common.buildsText = function(opt_data, opt_ignored) {
  var output = '';
  var tagStart__soy6 = '<span class="count">';
  var tagEnd__soy7 = '</span>';
  output += (opt_data.successfulBuildCount > 0) ? (opt_data.failedBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.failedBuildCount,tagEnd__soy7)) : (opt_data.unknownBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds}',tagStart__soy6,opt_data.successfulBuildCount,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds}',tagStart__soy6,opt_data.count,tagEnd__soy7)) : (opt_data.failedBuildCount > 0) ? (opt_data.unknownBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.failedBuildCount,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.count,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} incomplete',tagStart__soy6,opt_data.count,tagEnd__soy7));
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.buildsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.buildsText';
}


JIRA.Templates.FusionWidget.Common.buildsIconClass = function(opt_data, opt_ignored) {
  return '' + ((opt_data.failedBuildCount > 0) ? 'aui-iconfont-error' : (opt_data.successfulBuildCount > 0) ? 'aui-iconfont-approve' : (opt_data.unknownBuildCount > 0) ? 'aui-iconfont-devtools-task-cancelled' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.buildsIconClass.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.buildsIconClass';
}


JIRA.Templates.FusionWidget.Common.commits = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#commit|1\x3ccommits}','<span class="count">',opt_data.count,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.commits.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.commits';
}


JIRA.Templates.FusionWidget.Common.deployments = function(opt_data, opt_ignored) {
  var output = '';
  var instanceOne__soy43 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[0], showProjects: opt_data.showProjects});
  var instanceTwo__soy47 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[1], showProjects: opt_data.showProjects});
  var instanceThree__soy51 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[2], showProjects: opt_data.showProjects});
  output += soy.$$filterNoAutoescape(AJS.format('{5}Deployed{6} to {0,choice,1#{1}|2#{1} and {2}|3#{1}, {2} and {3}|3\x3c{1}, {2}, {3}, and {4} more}',opt_data.successfulCount,instanceOne__soy43,instanceTwo__soy47,instanceThree__soy51,opt_data.successfulCount - 3,opt_data.anchorStart,opt_data.anchorEnd));
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.deployments.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.deployments';
}


JIRA.Templates.FusionWidget.Common.deploymentsInstance = function(opt_data, opt_ignored) {
  return '' + ((opt_data.environment) ? '<span class="environment" ' + ((opt_data.showProjects) ? 'title="' + soy.$$escapeHtml(AJS.format('Project: {0}',opt_data.environment.project)) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.environment.title) + '</span>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.deploymentsInstance.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.deploymentsInstance';
}


JIRA.Templates.FusionWidget.Common.pullRequestsText = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#pull request|1\x3cpull requests}','<span class="count">',opt_data.stateCount,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsText';
}


JIRA.Templates.FusionWidget.Common.reviewsText = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#review|1\x3creviews}','<span class="count">',opt_data.stateCount,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsText';
}


JIRA.Templates.FusionWidget.Common.reviewsState = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.stateLozenge({isSubtle: opt_data.isSubtle, lozengeClass: opt_data.stateClasses[opt_data.state], text: opt_data.stateText[opt_data.state], classes: opt_data.classes, tooltip: opt_data.tooltip, tooltipClass: opt_data.tooltipClass, tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsState.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsState';
}


JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: 'OPEN', MERGED: 'MERGED', DECLINED: 'DECLINED'}, classes: 'pullrequest-state'});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue';
}


JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: 'Under Review', MERGED: 'MERGED', DECLINED: 'DECLINED'}, tooltip: true, tooltipClass: 'fusion-widget-tooltip', tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport';
}


JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {REVIEW: 'aui-lozenge-complete', CLOSED: 'aui-lozenge-success', DRAFT: 'aui-lozenge-complete', DEAD: 'aui-lozenge-error', REJECTED: 'aui-lozenge-error', UNKNOWN: 'aui-lozenge-error', APPROVAL: 'aui-lozenge-current', SUMMARIZE: 'aui-lozenge-complete'}, stateText: {REVIEW: 'Open', CLOSED: 'Closed', DRAFT: 'Draft', DEAD: 'Abandoned', REJECTED: 'Rejected', UNKNOWN: 'Unknown', APPROVAL: 'Approval', SUMMARIZE: 'Summarize'}});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue';
}


JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {REVIEW: 'aui-lozenge-complete', CLOSED: 'aui-lozenge-success', DRAFT: 'aui-lozenge-complete', DEAD: 'aui-lozenge-error', REJECTED: 'aui-lozenge-error', UNKNOWN: 'aui-lozenge-error', APPROVAL: 'aui-lozenge-complete', SUMMARIZE: 'aui-lozenge-complete'}, stateText: {REVIEW: 'Under Review', CLOSED: 'Closed', DRAFT: 'Draft', DEAD: 'Abandoned', REJECTED: 'Rejected', UNKNOWN: 'Unknown', APPROVAL: 'Under Review', SUMMARIZE: 'Under Review'}, tooltip: true, tooltipClass: 'fusion-widget-tooltip', tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport';
}


JIRA.Templates.FusionWidget.Common.stateLozenge = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge aui-lozenge-overflow ' + ((opt_data.isSubtle) ? 'aui-lozenge-subtle' : '') + ' ' + soy.$$escapeHtml(opt_data.lozengeClass) + ' ' + ((opt_data.tooltip) ? soy.$$escapeHtml(opt_data.tooltipClass) : '') + ' ' + ((opt_data.classes) ? soy.$$escapeHtml(opt_data.classes) : '') + '"' + ((opt_data.tooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipText) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.stateLozenge.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.stateLozenge';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-instance-picker-view', location = 'js/viewissue/dialog/InstancePickerView.js' */
"use strict";define("jira/devstatus/instance-picker-view",["backbone","jquery","underscore","jira-development-status/util/navigate"],function(e,t,s,i){return e.View.extend({ARROW_KEY_UP_CODE:38,ARROW_KEY_DOWN_CODE:40,template:JIRA.Templates.DevStatus.Dialog.content,events:{"keydown .jira-dialog-content":"_onTargetKeyboardSelect","focus .target":"_onTargetFocus"},initialize:function(e){this.currentSelected=null,this.link=e.activeTrigger,this.cta=e.cta,this.processTargets=e.processTargets,this.issueId=e.issueId,this.uniqueResultAction=e.uniqueResultAction||function(e){i.navigate(e.url)}},render:function(){var e=this._getIssueId(this.link),i=t.Deferred();return this._fetchTargets(this.cta,e).done(s.bind(function(e){this.processTargets&&(e.remoteApps=this.processTargets(e.remoteApps));var s=this._isUniqueResult(e);if(s)this.uniqueResultAction(s);else{var n=t(this.template(e));i.resolve(n)}},this)).fail(function(e){i.resolve(e)}),i.promise()},_fetchTargets:function(e,s){var i=t.Deferred();return t.ajax({url:contextPath+"/rest/dev-status/1.0/issue/targets?cta="+encodeURIComponent(e)+"&issueId="+encodeURIComponent(s)}).done(function(e){i.resolve(e)}).fail(function(e,t){i.reject(JIRA.SmartAjax.buildDialogErrorContent(e).html())}),i.promise()},_getIssueId:function(e){return this.issueId||e&&e.data("issueid")||t("#devstatus-container").data("issue-id")},_isUniqueResult:function(e){return 1===e.remoteApps.length&&e.remoteApps[0]},_toggleEntry:function(e,t,s){var i=e.eq(t);s&&i.focus(),i.addClass("selected"),this.currentSelected=i},_removeSelected:function(){this.currentSelected&&(this.currentSelected.removeClass("selected"),this.currentSelected=null)},_onTargetKeyboardSelect:function(e){if("keydown"===e.type){var t=0;if(e.keyCode===this.ARROW_KEY_UP_CODE?t=-1:e.keyCode===this.ARROW_KEY_DOWN_CODE&&(t=1),0!==t){e.preventDefault();var s=this.$el.find(".target"),i=s.index(this.$el.find(".selected"));i!==-1&&s.eq((i+t)%s.size()).focus()}}},_onTargetFocus:function(e){this._removeSelected(),this._toggleEntry(t(e.target),0,!1)}})}),Backbone.define("JIRA.DevStatus.InstancePickerView",require("jira/devstatus/instance-picker-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/dialog/CreateBranchFormDialog.js' */
"use strict";define("jira/devstatus/create-branch-form-dialog",["backbone","jquery","require","jira/dialog/form-dialog","jira-development-status/util/WRM"],function(e,t,i,a,r){return e.View.extend({initialize:function(e){AJS.namespace("JIRA.DevStatus.CtaDialog"),this.parentContainerSelector=e.parentContainerSelector,this.panelSelector=e.panelSelector,this.linkSelector=e.linkSelector,this.dialogId="devstatus-cta-dialog",JIRA.DevStatus.CtaDialogAnalytics.initialize(this.parentContainerSelector,this.linkSelector,this.dialogId),this._initFormDialog()},_initFormDialog:function(){var e=this,n=JIRA.DevStatus.CtaDialog.dialog=new a({id:this.dialogId,width:560,content:function(a){var o=this;r.requireDetailDialogResources(function(){var r=i("jira/devstatus/instance-picker-view");o.pickerView=new r({el:o.$popup,activeTrigger:o.$activeTrigger,cta:e._getCta(o.$activeTrigger)}),o.pickerView.render().always(function(e){a(e),t(n.$popup).find(".target").eq(0).focus(),JIRA.DevStatus.CtaDialogAnalytics.fireCreateBranchEvent("dialog.open")})})},trigger:this.linkSelector,autoClose:!0})},_getCta:function(e){var t=e.data("cta");if(t)return t;var i=e.attr("href"),a=i&&/\#([a-zA-Z\.]+)/.exec(i);return a&&a[1]}})}),Backbone.define("JIRA.DevStatus.CreateBranchFormDialog",require("jira/devstatus/create-branch-form-dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusModule.js' */
"use strict";define("jira/devstatus/dev-status-module",["backbone","jquery","require","underscore","jira/util/data/meta"],function(t,e,i,a,s){return t.Model.extend({initialize:function(t){a.defaults(this,t),this._listeners=new JIRA.DevStatus.Util.Listeners;var e=i("jira/devstatus/create-branch-form-dialog");this.createBranchFormDialog=new e(t),this.devSummaryJson=null,this.triggerHelpTipShown=!1,this.aitHelptip=null,this._initFocusHandler()},initializePanel:function(t){return this._listeners.stopListening(),this._renderedData=null,this._getContainers(t),this._createCreateBranchView(t),this.devSummaryJson=this.devStatusContainer.find(".dev-summary.json-blob").data("json"),this._createDevStatusData(t),this._createAnalyticsModel(t),this._createSummaryViews(t),this._setupDataEventHandlers(),this.devStatusPanelVisibilityToggler=t.devStatusPanelVisibilityToggler,this._startDevStatus(),this},_createCreateBranchView:function(t){var e=i("jira/devstatus/create-branch-view");this.createBranchView=new e({el:this.createBranchContainer,showTooltip:t.showTooltip})},_createDevStatusData:function(t){this.devStatusData=new JIRA.DevStatus.DevStatusData({issueId:this.devStatusContainer.data("issue-id"),issueKey:this.devStatusContainer.data("issue-key")})},_createSummaryViews:function(t){var i=this,s=this.devStatusContainer.data();this._summaryModules=a.clone(this.statusPanelContainer.find(".status-panel").map(function(){var t=e(this);return new(JIRA.DevStatus[t.data("module")])({dataAttrs:s,el:t,analyticsModel:i.analyticsModel})})),this._errorModule=new JIRA.DevStatus.SummaryErrorModule({el:this.messagePanelContainer,dataAttrs:s})},_createAnalyticsModel:function(t){this.analyticsModel=new JIRA.DevStatus.AnalyticsModel({devStatusContainer:this.devStatusContainer,devStatusData:this.devStatusData})},_getContainers:function(t){this.devStatusContainer=t.container,this.parentContainer=t.container.closest(this.parentContainerSelector),this.createBranchContainer=t.container.find(this.linkSelector),this.statusPanelContainer=t.container.find(this.statusPanelSelector),this.headerContainer=this.parentContainer.find(t.headerSelector),this.messagePanelContainer=t.container.find(".message-panel")},_onLoadingStarted:function(){this._startLoadingModuleData()},_onLoadingSuccess:function(t,e,i){var a=this.devStatusData.get("aggregatedData");this._renderModules({success:!0,renderData:a}),this._postRender(!e,i,a)},_onLoadingFailure:function(){this._renderModules({success:!1}),this._postRender(!1,!0)},_setupDataEventHandlers:function(){this._listeners.startListening(this.devStatusData,"beforeRequest",this._onLoadingStarted,this),this._listeners.startListening(this.devStatusData,"requestSuccess",this._onLoadingSuccess,this),this._listeners.startListening(this.devStatusData,"requestFail",this._onLoadingFailure,this)},_startDevStatus:function(){var t=!this.devSummaryJson||this.devSummaryJson.isStale===!0;this.devSummaryJson&&this.devStatusData.setAggregateData(this.devSummaryJson.cachedValue,!0,!t),t&&(this._startLoadingModuleData(),this.devStatusData.retrieveAggregateData())},_initFocusHandler:function(){var t=JIRA.DevStatus.DevStatusModule.MAX_REFRESH_WINDOW;e(window).on("focus",a.throttle(a.bind(this.refreshSummaryData,this),t,{trailing:!1}))},refreshSummaryData:function(){this.devStatusData&&this.devStatusData.retrieveAggregateData()},_postRender:function(t,e,i){function s(){e&&(u.addClass("js-animation-completed"),r._attachAutomaticTransitionsHelpTip(i))}var n=this._isAnySummaryViewVisibleOnPanel()||this._isAnyErrorViewVisible(),r=this;if(n){var o=this.analyticsModel.getIssue();JIRA.DevStatus.SummaryAnalytics.fireSummaryShownEvent({isAssignee:o.isAssignee,eventProperties:a.extend({},o,this.analyticsModel.getSummary())}),this._openDetailDialogUrlLink()}this._togglePanelEmptyStatus(!this._isAnySummaryViewVisibleOnPanel());var u=this.parentContainer,l=n||this.createBranchContainer.size()>0;this.devStatusPanelVisibilityToggler&&u.is(":visible")!==l?(this.devStatusPanelVisibilityToggler(this.parentContainer,l,t,s),!l&&this.aitHelptip&&this.aitHelptip.isVisible()&&this.aitHelptip.hide()):s()},_attachAutomaticTransitionsHelpTip:function(t){var i=this.parentContainer.is(":visible"),s=this._shouldRenderAITTooltip(t);!s&&this.aitHelptip&&this.aitHelptip.isVisible()?this.aitHelptip.hide():s&&!this.triggerHelpTipShown&&JIRA.DevStatus.showAITTooltip&&i&&(a.defer(a.bind(function(){this.aitHelptip=new AJS.HelpTip({id:"automaticTransitionDevSummaryTooltip",title:"Automate your status updates",bodyHtml:JIRA.Templates.DevStatus.Tooltip.automaticTransitions({aitHelpLinkUrl:this.devStatusContainer.data("ait-help-url-json")}),anchor:"#viewissue-devstatus-panel_heading .toggle-title",isSequence:!0,callbacks:{init:function(){e("#trigger-docs-link").on("click",function(){AJS.trigger("analyticsEvent",{name:"devstatus.automatic.transitions.learn.more.clicked",data:{}})})}},inlineDialogOpts:{width:400}}),AJS.HelpTip.Manager.showSequences()},this)),this.triggerHelpTipShown=!0)},_shouldRenderAITTooltip:function(t){return!!t&&(t.summary.branch.overall.count>0||t.summary.repository.overall.count>0||t.summary.pullrequest.overall.count>0||t.summary.review.overall.count>0)},_getModuleByType:function(t){return a.find(this._summaryModules,function(e){return e.data&&e.data.getType&&a.isEqual(e.data.getType(),t)})},_openDetailDialogUrlLink:function(){var t=s.get("fusion-open-detail-dialog");if(t){var e;if(JIRA.DevStatus.URL.isCreateReviewDetailDialogLink(t)?e=this._getModuleByType("repository"):(e=this._getModuleByType(t),e&&s.set("fusion-open-detail-dialog",void 0)),e){var i=e.view;i&&i.isVisible()&&(s.set("fusion-analytics-new-context-link",!0),i.getSummaryLink().click())}}},_togglePanelEmptyStatus:function(t){this.statusPanelContainer&&this.statusPanelContainer.toggleClass("empty-status",t)},_isAnySummaryViewVisibleOnPanel:function(){return!!a.find(this._summaryModules,function(t){return t.isViewVisible()})},_isAnyErrorViewVisible:function(){return this._errorModule.isViewVisible()},_renderModules:function(t){var e=this._renderedData=t.renderData||this._renderedData;a.each(this._summaryModules,function(t){t.render(e)}),this._errorModule.render(t.success?e:void 0)},_startLoadingModuleData:function(){a.each(this._summaryModules,function(t){t.startLoading()})}},{MAX_REFRESH_WINDOW:3e4})}),Backbone.define("JIRA.DevStatus.DevStatusModule",require("jira/devstatus/dev-status-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusData.js' */
"use strict";define("jira/devstatus/dev-status-data",["backbone","jquery","underscore"],function(e,t,s){return e.Model.extend({properties:["aggregatedData"],namedEvents:["beforeRequest","requestFail","requestSuccess"],initialize:function(e){this.issueId=e.issueId,this.issueKey=e.issueKey},retrieveAggregateData:function(){var e=AJS.contextPath()+"/rest/dev-status/1.0/issue/summary?issueId="+this.issueId;return this.trigger("beforeRequest"),t.ajax(e).done(s.bind(this.setAggregateData,this)).fail(s.bind(this.setAggregateDataError,this)).promise()},setAggregateData:function(e,t,s){this.set("aggregatedData",e),this.trigger("requestSuccess",this,t===!0,!!s)},setAggregateDataError:function(e,t){this.set("aggregatedData",void 0),this.trigger("requestFail",this,e)}})}),Backbone.define("JIRA.DevStatus.DevStatusData",require("jira/devstatus/dev-status-data"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/CreateBranchView.js' */
"use strict";define("jira/devstatus/create-branch-view",["backbone","underscore","jira/util/data/meta"],function(t,e,i){return t.View.extend({initialize:function(t){this.tooltipShown=!t.showTooltip,this.linkTextSelector=".devstatus-cta-link-text",this.issueContainer=".issue-container",this._processLinkForNavigableURL(),this._initTooltip(),e.defer(e.bind(this._openCreateBranchDialog,this))},getCreateBranchLink:function(){return this.$el},_processLinkForNavigableURL:function(){this.getCreateBranchLink().data("cta",this._getCta(this.$el)),this.getCreateBranchLink().attr("href",JIRA.DevStatus.URL.getUrlWithDetailDialogParam("create-branch"))},_openCreateBranchDialog:function(){var t=i.get("fusion-open-detail-dialog");"create-branch"===t&&(i.set("fusion-open-detail-dialog",void 0),i.set("fusion-analytics-new-context-link",!0),this.getCreateBranchLink().click())},_initTooltip:function(){!this.tooltipShown&&this.$el.length>0&&e.defer(e.bind(function(){var t=this.$el.data("cta");t&&(new AJS.HelpTip({id:t+".tooltip",title:"Start development",bodyHtml:JIRA.Templates.DevStatus.Tooltip.createBranch(),anchor:this.$el.find(this.linkTextSelector),isSequence:!0,inlineDialogOpts:{container:this.issueContainer,width:400}}),this.tooltipShown=!0,AJS.HelpTip.Manager.showSequences())},this))},_getCta:function(t){var e=t.attr("href"),i=e&&/\#([a-zA-Z\.]+)/.exec(e);return i&&i[1]}})}),Backbone.define("JIRA.DevStatus.CreateBranchView",require("jira/devstatus/create-branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BasePanelModule.js' */
"use strict";define("jira/devstatus/base-panel-module",["backbone","underscore"],function(e,t){return e.Model.extend({initialize:function(e){this.options=t.defaults({},e),this.data=this.createModel()},render:function(e){this.startViews(),this.data.updateData(e),this.view.render()},startLoading:function(){this.data.startLoadingData&&this.data.startLoadingData()},startViews:function(){this.view||(this.view=this.createView())},stopViews:function(){this.view&&(this.view.undelegateEvents(),this.view.$el.empty(),this.view.hide(),this.view=null)},isViewVisible:function(){return this.view&&this.view.isVisible()},createView:function(){},createModel:function(){}})}),Backbone.define("JIRA.DevStatus.BasePanelModule",require("jira/devstatus/base-panel-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryView.js' */
"use strict";define("jira/devstatus/base-summary-view",["backbone","jquery","underscore"],function(t,e,i){return t.View.extend({template:void 0,events:{"simpleClick .summary":"_onSummaryLinkClick"},initialize:function(t){this.options=i.clone(t),this.model.on("change:hasData",this._addOrRemoveHasDataClass,this),this.model.on("change:dataLoading",this._addOrRemoveDataLoadingClass,this),this.transitionView=new JIRA.DevStatus.SummaryTransitionView({model:this.model,el:this.$el})},render:function(){var t=this.isVisible();if(t){var s=e(this.template(i.extend({issueKey:this.options.dataAttrs.issueKey},this.model.getOverall())));this._shouldAnimateDataTransition()?this.transitionView.renderVisible(s):(this.$el.html(s),JIRA.DevStatus.Date.addTooltip(s)),this._renderNavigableSummaryLink(),this.show()}else this._isHidden()||(this._shouldAnimateDataTransition()?this.transitionView.renderHidden(i.bind(this.hide,this)):this.hide());this._addOrRemoveDataLoadingClass(),this._addOrRemoveHasDataClass()},getDefaultDetailDialogParameters:function(){return{issueKey:this.options.dataAttrs.issueKey,issueId:this.options.dataAttrs.issueId,tabs:this.model.get("byInstanceType"),dataType:this.model.getType(),showContactAdminForm:this.options.dataAttrs&&this.options.dataAttrs.showContactAdminForm}},getSummaryLink:function(){return this.$el.find("a.summary")},isVisible:function(){return this.model.getOverall().count>0},_addOrRemoveHasDataClass:function(){var t=this.model.get("hasData");this.$el.toggleClass("js-has-data",t)},_renderNavigableSummaryLink:function(){this.getSummaryLink().attr("href",JIRA.DevStatus.URL.getUrlWithDetailDialogParam(this.model.getType()))},_addOrRemoveDataLoadingClass:function(){var t=this.model.get("dataLoading");this.$el.toggleClass("data-loading",t)},_onSummaryLinkClick:function(t){t.preventDefault(),console.log("Summary view not supported: ",this)},_shouldAnimateDataTransition:function(){return!!this.model.getPreviousOverall()},_isHidden:function(){return this.$el.hasClass("hidden")},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")}})}),Backbone.define("JIRA.DevStatus.BaseSummaryView",require("jira/devstatus/base-summary-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryTransitionView.js' */
"use strict";define("jira/devstatus/summary-transition-view",["backbone","jquery","underscore","jira/dev-status/util/date"],function(i,t,n,s){return i.View.extend({slideTransitionTime:500,initialize:function(){},renderVisible:function(i){var e=!t.contains(document,this.$el[0]);this._hasPreviousData()?this._hasDataChanged()&&(this._prepareContentsForTransition(i,this.$el),this.$el.addClass("roll-transition")):(this._preStartSlideTransition(),this.$el.addClass("slide-down-transition"),e=!0),this.$el.html(i),s.addTooltip(i),e?n.defer(n.bind(this._initiateTransition,this)):this._initiateTransition()},renderHidden:function(i){var t=this;this.$el.slideUp(this.slideTransitionTime,function(){t.$el.css("display",""),i()})},_initiateTransition:function(){if(this.$el.hasClass("slide-down-transition"))this._postStartSlideTransition(),this.$el.removeClass("slide-down-transition"),this._startSlideDownTransition(this.$el,0);else{this.$el.hasClass("roll-transition")&&(this.$el.removeClass("roll-transition"),this._startRollTransition());var i=this.$el.find(".sliding-container");if(i.length>0){var n=this;i.each(function(i,s){var e=t(s),a=e.data("prevHeight");n._startSlideDownTransition(e,a)})}}},_startSlideDownTransition:function(i,t){var n=i.height();t!==n&&i.height(t).animate({height:n},this.slideTransitionTime,function(){i.css("height","auto"),i.find(".rolling-content").removeClass("transit")})},_startRollTransition:function(){this.$el.find(".rolling-container").each(n.bind(function(i,n){var s=t(n),e=s.find(".rolling-content"),a=e.find(":not(.old-content)"),r=a.height();s.height(r),e.addClass("transit"),a.css("margin-top","-"+r+"px").animate({"margin-top":"0"},this.slideTransitionTime,function(){s.css("height","auto"),s.find(".old-content").remove(),e.removeClass("transit"),a.css("margin-top","")})},this))},_prepareContentsForTransition:function(i,n){i=t("<div></div>").append(i);var s=i.find(".sliding-container"),e=n.find(".sliding-container");s.each(function(i,n){var s=e.get(i);if(s){var a=t(s);t(n).data("prevHeight",a.height())}});var a=i.find(".rolling-container"),r=n.find(".rolling-container");a.each(function(i,n){var s=t(n).find(".rolling-content"),e=r.get(i);if(e){var a=t(e).find(".rolling-content").children();a.addClass("old-content"),s.append(a)}})},_hasPreviousData:function(){var i=this.model.getPreviousOverall();return i&&i.count>0},_hasDataChanged:function(){return!n.isEqual(this.model.getOverall(),this.model.getPreviousOverall())},_preStartSlideTransition:function(){this.$el.css("height","0"),this.$el.css("opacity","0")},_postStartSlideTransition:function(){this.$el.css("height",""),this.$el.css("opacity","")}})}),Backbone.define("JIRA.DevStatus.SummaryTransitionView",require("jira/devstatus/summary-transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryModule.js' */
"use strict";define("jira/devstatus/base-summary-module",["underscore","jira/devstatus/base-panel-module"],function(e,t){return t.extend({model:void 0,viewType:void 0,createModel:function(){return new this.model({})},createView:function(){return new this.viewType(e.extend(e.clone(this.options),{model:this.data}))}})}),Backbone.define("JIRA.DevStatus.BaseSummaryModule",require("jira/devstatus/base-summary-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryModel.js' */
"use strict";define("jira/devstatus/base-summary-model",["backbone"],function(e){return e.Model.extend({typeId:void 0,properties:["byInstanceType","overall","previousOverall","hasData","dataLoading"],startLoadingData:function(){this.set("dataLoading",!0)},updateData:function(e){if(this.set("hasData",void 0!==e),this.set("dataLoading",!1),this.set("previousOverall",this.getOverall()),e&&e.summary&&e.summary[this.typeId]){var t=e.summary[this.typeId];this.set("byInstanceType",t.byInstanceType),this.set("overall",t.overall)}else this.set("byInstanceType",{}),this.set("overall",{count:0})},getType:function(){return this.typeId},getOverall:function(){return this.get("overall")},getPreviousOverall:function(){return this.get("previousOverall")}})}),Backbone.define("JIRA.DevStatus.BaseSummaryModel",require("jira/devstatus/base-summary-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorModule.js' */
"use strict";define("jira/devstatus/summary-error-module",["jira/devstatus/base-panel-module"],function(t){return t.extend({createModel:function(){return new JIRA.DevStatus.SummaryErrorModel({})},createView:function(){var t=this.options.dataAttrs&&this.options.dataAttrs.showContactAdminForm;return new JIRA.DevStatus.SummaryErrorView({model:this.data,el:this.options.el,showContactAdminForm:t})}})}),Backbone.define("JIRA.DevStatus.SummaryErrorModule",require("jira/devstatus/summary-error-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorModel.js' */
"use strict";define("jira/devstatus/summary-error-model",["backbone","underscore"],function(r,e){return r.Model.extend({properties:["hasErrors","errorInstances","configInstances"],defaults:function(){return{hasErrors:!1,errorInstances:[],configInstances:[]}},updateData:function(r){var t=this._extractErrors(r&&r.errors),s=this._extractErrors(r&&r.configErrors);this.set("hasErrors",!r||!e.isEmpty(t)||!e.isEmpty(s)),this.set("errorInstances",t),this.set("configInstances",s)},_extractErrors:function(r){return r?e.map(e.filter(r,function(r){return r.error}),function(r){return r.instance}):[]}})}),Backbone.define("JIRA.DevStatus.SummaryErrorModel",require("jira/devstatus/summary-error-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorView.js' */
"use strict";define("jira/devstatus/summary-error-view",["jira/devstatus/base-summary-view"],function(t){return t.extend({initialize:function(t){this.showContactAdminForm=t.showContactAdminForm},render:function(){return this.isVisible()?(this.$el.html(JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon({instances:this.model.get("errorInstances"),notConfiguredInstances:this.model.get("configInstances"),showContactAdminForm:this.showContactAdminForm})),this.show()):this.hide(),this},isVisible:function(){return this.model.get("hasErrors")}})}),Backbone.define("JIRA.DevStatus.SummaryErrorView",require("jira/devstatus/summary-error-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusInit.js' */
"use strict";!function(){JIRA.DevStatus.setDetailDialogParam=function(){AJS.Meta.set("fusion-open-detail-dialog",JIRA.DevStatus.URL.getDetailDialogParam())},JIRA.DevStatus.setDetailDialogParam()}(),AJS.$(function(){function e(e){return e.find("body").hasClass("page-type-dashboard")}function t(e){return e.find("body").hasClass("ghx-agile")}function a(e){return e.find("body").hasClass("ka ajax-issue-search-and-view")}function n(){return AJS.Meta.get("is-servicedesk-rendered")}function i(e,t,a){JIRA.DevStatus.devStatusModule.initializePanel({container:e,showTooltip:JIRA.DevStatus.showTooltip,headerSelector:t,devStatusPanelVisibilityToggler:a})}function s(e,t,a,n){_.defer(function(){var i=a?1e3:0,s={duration:i,complete:n};t?e.slideDown(s):e.slideUp(s)})}JIRA.DevStatus.showTooltip=!0,JIRA.DevStatus.showAITTooltip=!0;var o={devStatusContainer:"#devstatus-container",parentContainer:"[id$='devstatus-panel']",link:"a.devstatus-cta-link",statusPanel:".status-panels",viewIssueHeader:".mod-header",agileHeader:".ghx-header",agileNavMenuLink:'a[href="#ghx-tab-com-atlassian-jira-plugins-jira-development-integration-plugin-greenhopper-devstatus-panel"]'};JIRA.DevStatus.documentReadyInit=function(u){if(JIRA.DevStatus.devStatusModule=new JIRA.DevStatus.DevStatusModule({parentContainerSelector:o.parentContainer,linkSelector:o.link,panelSelector:o.devStatusContainer,statusPanelSelector:o.statusPanel}),e(u)||t(u))u.find("body").on("click",o.agileNavMenuLink,JIRA.DevStatus.Analytics.fireAgileDevStatusLinkClicked),JIRA.DevStatus.showTooltip=!1,JIRA.DevStatus.showAITTooltip=!1;else if(a(u)&&JIRA.Issues.Api.isFullScreenIssueVisible()){var l=AJS.$(o.devStatusContainer);l.length>0&&i(l,o.viewIssueHeader,s)}n()&&(JIRA.DevStatus.showTooltip=!1,JIRA.DevStatus.showAITTooltip=!1),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t){return!!t.not(document).is(o.parentContainer)&&(i(t.find(o.devStatusContainer),o.viewIssueHeader,s),JIRA.DevStatus.showTooltip=!1,!0)}),JIRA.bind("GH.DetailView.updated",function(e,t){var a=AJS.$(o.devStatusContainer);a.length&&i(a,o.agileHeader)}),require(["jira-development-status/util/WRM"],function(e){e.requireDetailDialogResources()})},AJS.$(function(){JIRA.DevStatus.documentReadyInit(AJS.$(document))})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitModel.js' */
"use strict";define("jira/devstatus/commit-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"repository"})}),Backbone.define("JIRA.DevStatus.CommitModel",require("jira/devstatus/commit-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'templates/viewissue/commit/devstatus-panel-commit.soy' */
// This file was automatically generated from devstatus-panel-commit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Commit.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Commit == 'undefined') { JIRA.Templates.DevStatus.Commit = {}; }


JIRA.Templates.DevStatus.Commit.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Commits related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.commits(opt_data) + '</a></div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Latest', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Commit.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Commit.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitView.js' */
"use strict";define("jira/devstatus/commit-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,i){return t.extend({template:JIRA.Templates.DevStatus.Commit.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;i.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-commit-view");a.detailDialogCommitView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-commit-detail-dialog",count:a.model.getOverall().count})),JIRA.DevStatus.CommitsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogCommitView.show()})}})}),Backbone.define("JIRA.DevStatus.CommitView",require("jira/devstatus/commit-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitModule.js' */
"use strict";define("jira/devstatus/commit-module",["jira/devstatus/base-summary-module","jira/devstatus/commit-model","jira/devstatus/commit-view"],function(e,t,i){return e.extend({model:t,viewType:i})}),Backbone.define("JIRA.DevStatus.CommitModule",require("jira/devstatus/commit-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestModel.js' */
"use strict";define("jira/devstatus/pull-request-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"pullrequest"})}),Backbone.define("JIRA.DevStatus.PullRequestModel",require("jira/devstatus/pull-request-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'templates/viewissue/pullrequest/devstatus-panel-pullrequest.soy' */
// This file was automatically generated from devstatus-panel-pullrequest.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.PullRequest.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.PullRequest == 'undefined') { JIRA.Templates.DevStatus.PullRequest = {}; }


JIRA.Templates.DevStatus.PullRequest.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Pull requests related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.pullRequestsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Updated', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.PullRequest.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.PullRequest.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestView.js' */
"use strict";define("jira/devstatus/pull-request-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,u){return t.extend({template:JIRA.Templates.DevStatus.PullRequest.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;u.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-pull-request-view");a.detailDialogPullRequestView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-pullrequest-detail-dialog",count:a.model.getOverall().count,reviewersThreshold:2})),JIRA.DevStatus.PullRequestsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogPullRequestView.show()})}})}),Backbone.define("JIRA.DevStatus.PullRequestView",require("jira/devstatus/pull-request-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestModule.js' */
"use strict";define("jira/devstatus/pull-request-module",["jira/devstatus/base-summary-module","jira/devstatus/pull-request-model","jira/devstatus/pull-request-view"],function(e,u,t){return e.extend({model:u,viewType:t})}),Backbone.define("JIRA.DevStatus.PullRequestModule",require("jira/devstatus/pull-request-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewModel.js' */
"use strict";define("jira/devstatus/review-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"review"})}),Backbone.define("JIRA.DevStatus.ReviewModel",require("jira/devstatus/review-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'templates/viewissue/review/devstatus-panel-review.soy' */
// This file was automatically generated from devstatus-panel-review.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Review.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Review == 'undefined') { JIRA.Templates.DevStatus.Review = {}; }


JIRA.Templates.DevStatus.Review.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Reviews related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.reviewsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.Review.reviewDate(soy.$$augmentMap(opt_data, {showUpdatedText: true})) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Review.summaryPanel';
}


JIRA.Templates.DevStatus.Review.reviewDate = function(opt_data, opt_ignored) {
  return '' + ((opt_data.dueDate && ! opt_data.completed) ? JIRA.Templates.DevStatus.lastUpdated({text: 'Due', lastUpdated: opt_data.dueDate, extraClass: opt_data.overDue ? 'overdue' : undefined, datetimeFormat: 'fullAge'}) : (opt_data.lastUpdated) ? JIRA.Templates.DevStatus.lastUpdated({text: opt_data.showUpdatedText ? 'Updated' : '', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.reviewDate.soyTemplateName = 'JIRA.Templates.DevStatus.Review.reviewDate';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewView.js' */
"use strict";define("jira/devstatus/review-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,i){return t.extend({template:JIRA.Templates.DevStatus.Review.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;i.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-review-view");a.detailDialogReviewView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-review-detail-dialog",count:a.model.getOverall().count,reviewersThreshold:2,completed:a.model.getOverall().completed})),JIRA.DevStatus.ReviewsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogReviewView.show()})}})}),Backbone.define("JIRA.DevStatus.ReviewView",require("jira/devstatus/review-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewModule.js' */
"use strict";define("jira/devstatus/review-module",["jira/devstatus/base-summary-module","jira/devstatus/review-model","jira/devstatus/review-view"],function(e,i,t){return e.extend({model:i,viewType:t})}),Backbone.define("JIRA.DevStatus.ReviewModule",require("jira/devstatus/review-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchModel.js' */
"use strict";define("jira/devstatus/branch-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"branch"})}),Backbone.define("JIRA.DevStatus.BranchModel",require("jira/devstatus/branch-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'templates/viewissue/branch/devstatus-panel-branch.soy' */
// This file was automatically generated from devstatus-panel-branch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Branches.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Branches == 'undefined') { JIRA.Templates.DevStatus.Branches = {}; }


JIRA.Templates.DevStatus.Branches.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Branches related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.branches(opt_data) + '</a></div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Updated', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Branches.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Branches.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchView.js' */
"use strict";define("jira/devstatus/branch-view",["require","underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,a,t,i){return t.extend({template:JIRA.Templates.DevStatus.Branches.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var r=this;i.requireDetailDialogResources(function(){var t=e("jira/devstatus/detail-dialog-branch-view");r.detailDialogBranchView=new t(a.extend(r.getDefaultDetailDialogParameters(),{id:"devstatus-branch-detail-dialog",count:r.model.getOverall().count,analyticIssueData:r.options.analyticsModel.getIssue()})),JIRA.DevStatus.BranchesAnalytics.fireSummaryClickedEvent(r.options.analyticsModel.getSummary()),r.detailDialogBranchView.show()})}})}),Backbone.define("JIRA.DevStatus.BranchView",require("jira/devstatus/branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchModule.js' */
"use strict";define("jira/devstatus/branch-module",["jira/devstatus/base-summary-module","jira/devstatus/branch-model","jira/devstatus/branch-view"],function(e,a,t){return e.extend({model:a,viewType:t})}),Backbone.define("JIRA.DevStatus.BranchModule",require("jira/devstatus/branch-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildModel.js' */
"use strict";define("jira/devstatus/build-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"build"})}),Backbone.define("JIRA.DevStatus.BuildModel",require("jira/devstatus/build-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'templates/viewissue/build/devstatus-panel-build.soy' */
// This file was automatically generated from devstatus-panel-build.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Build.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Build == 'undefined') { JIRA.Templates.DevStatus.Build = {}; }


JIRA.Templates.DevStatus.Build.summaryPanel = function(opt_data, opt_ignored) {
  var output = '<dl><dt>';
  var param4 = '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Builds related to {0}',opt_data.issueKey)) + '">';
  var countText__soy8 = '' + JIRA.Templates.FusionWidget.Common.buildsText(opt_data);
  param4 += soy.$$filterNoAutoescape(countText__soy8) + '</a> ' + JIRA.Templates.DevStatus.Build.statusIcon(opt_data) + '</div>';
  output += JIRA.Templates.DevStatus.transitionContainer({content: param4});
  output += '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Latest', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Build.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Build.summaryPanel';
}


JIRA.Templates.DevStatus.Build.statusIcon = function(opt_data, opt_ignored) {
  var output = '';
  var iconClass__soy27 = '' + JIRA.Templates.FusionWidget.Common.buildsIconClass(opt_data);
  output += '<span class="aui-icon aui-icon-small ' + soy.$$escapeHtml(iconClass__soy27) + '">' + soy.$$escapeHtml(opt_data.iconText) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Build.statusIcon.soyTemplateName = 'JIRA.Templates.DevStatus.Build.statusIcon';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildView.js' */
"use strict";define("jira/devstatus/build-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,i,t){return i.extend({template:JIRA.Templates.DevStatus.Build.summaryPanel,_onSummaryLinkClick:function(i){i.preventDefault();var a=this;t.requireDetailDialogResources(function(){var i=require("jira/devstatus/detail-dialog-build-view");a.detailDialogBuildView=new i(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-build-detail-dialog",count:a.model.getOverall().count})),JIRA.DevStatus.BuildsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogBuildView.show()})}})}),Backbone.define("JIRA.DevStatus.BuildView",require("jira/devstatus/build-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildModule.js' */
"use strict";define("jira/devstatus/build-module",["jira/devstatus/base-summary-module","jira/devstatus/build-model","jira/devstatus/build-view"],function(e,u,d){return e.extend({model:u,viewType:d})}),Backbone.define("JIRA.DevStatus.BuildModule",require("jira/devstatus/build-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentModel.js' */
"use strict";define("jira/devstatus/deployment-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"deployment-environment"})}),Backbone.define("JIRA.DevStatus.DeploymentModel",require("jira/devstatus/deployment-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'templates/viewissue/deployment/devstatus-panel-deployment.soy' */
// This file was automatically generated from devstatus-panel-deployment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Deployment.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Deployment == 'undefined') { JIRA.Templates.DevStatus.Deployment = {}; }


JIRA.Templates.DevStatus.Deployment.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dd>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content" title="' + soy.$$escapeHtml(AJS.format('Deployments related to {0}',opt_data.issueKey)) + '">' + ((opt_data.topEnvironments.length) ? JIRA.Templates.FusionWidget.Common.deployments({anchorStart: '<a class="summary">', anchorEnd: '</a>', showProjects: opt_data.showProjects, successfulCount: opt_data.successfulCount, topEnvironments: opt_data.topEnvironments}) : soy.$$escapeHtml('No deployments contain latest commits')) + '</div>'}) + '</dd></dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Deployment.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Deployment.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentView.js' */
"use strict";define("jira/devstatus/deployment-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,a){return t.extend({template:JIRA.Templates.DevStatus.Deployment.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var i=this;a.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-deployment-view");i.detailDialogDeploymentView=new t(e.extend(i.getDefaultDetailDialogParameters(),{id:"devstatus-deployment-detail-dialog",count:i.model.getOverall().count})),JIRA.DevStatus.DeploymentsAnalytics.fireSummaryClickedEvent(i.options.analyticsModel.getSummary()),i.detailDialogDeploymentView.show()})}})}),Backbone.define("JIRA.DevStatus.DeploymentView",require("jira/devstatus/deployment-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentModule.js' */
"use strict";define("jira/devstatus/deployment-module",["jira/devstatus/base-summary-module","jira/devstatus/deployment-model","jira/devstatus/deployment-view"],function(e,t,d){return e.extend({model:t,viewType:d})}),Backbone.define("JIRA.DevStatus.DeploymentModule",require("jira/devstatus/deployment-module"));;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:analytics', location = 'util/analytics.js' */
define("jira-help-tips/util/analytics",function(){"use strict";function t(t){return t=""+(t||""),t.replace(/\./g,"-")}function e(){return AJS&&AJS.EventQueue}function i(i,n){if(e()&&n&&n.attributes.id){var r={},u=t(n.attributes.id),a="";n.attributes.eventPrefix&&(a=n.attributes.eventPrefix,"."!==a.charAt(a.length-1)&&(a+=".")),r.name=a+"helptips."+u+"."+i,r.properties={},e().push(r)}}return{clean:t,send:i}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager', location = 'js/HelpTipManager.js' */
define("jira-help-tips/feature/help-tip-manager",["require"],function(s){var e=s("jquery"),i=s("underscore"),t=s("wrm/context-path"),n=s("wrm/data"),r=t()+"/rest/helptips/1.0/tips",d=n.claim("com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"),a={dismissedTipIds:[],sequences:[],loaded:e.Deferred(),url:function(){return r},sync:function(s,i){var t=e.Deferred();return s||(s="get"),i||(i=null),"get"===s&&d&&d.dismissed?t.resolve(d.dismissed):e.ajax(this.url(),{type:s,dataType:"json",contentType:"application/json",data:i&&JSON.stringify(i),processData:!1}).done(function(s){t.resolve(s)}).fail(function(){t.reject()}),t.promise()},fetch:function(){var s=this.sync();return s.done(e.proxy(function(s){e.merge(this.dismissedTipIds,s),this.loaded.resolve()},this)),s.promise()},show:function(s){this.loaded.done(s)},dismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.push(e),this.sync("post",{id:e})):s._dismissed=!0},undismiss:function(s){var i=s.attributes.id;i?(this.dismissedTipIds.splice(e.inArray(i,this.dismissedTipIds),1),this.sync("delete",{id:i})):s._dismissed=!1},isDismissed:function(s){var i=s.attributes.id;return i?e.inArray(i,this.dismissedTipIds)>=0:s._dismissed},clearSequences:function(){this.sequences=[]},hideSequences:function(){i.each(this.sequences,function(s){s.view.dismiss()})},showSequences:function(){if(!this._showStarted){var s=this,t=0;this._showStarted=!0,e.when(this.loaded).done(function(){s.sequences.sort(function(s,e){return s.attributes.weight-e.attributes.weight}),s.sequences=i.filter(s.sequences,function(e){var n=i.indexOf(s.dismissedTipIds,e.attributes.id)===-1;return n&&(e.attributes.position=t++),n}),s.sequences.length>0&&(i.last(s.sequences).attributes.showCloseButton=!0,s.sequences[0].show({force:!0})),s._showStarted=!1})}}};return a});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'templates/HelpTip.soy' */
// This file was automatically generated from HelpTip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace AJS.Templates.HelpTip.
 */

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_ignored) {
  return ((opt_data.title) ? '<h2 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<p class="helptip-body">' + soy.$$filterNoAutoescape(opt_data.bodyHtml) + '</p>' + ((opt_data.url) ? '<p><a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + ((opt_data.linkText) ? soy.$$escapeHtml(opt_data.linkText) : soy.$$escapeHtml('Learn more')) + '</a></p>' : '') + AJS.Templates.HelpTip.tipFooter(opt_data);
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipContent.soyTemplateName = 'AJS.Templates.HelpTip.tipContent';
}


AJS.Templates.HelpTip.tipFooter = function(opt_data, opt_ignored) {
  return '<form class="tip-footer">' + AJS.Templates.HelpTip.nextButton(opt_data) + AJS.Templates.HelpTip.closeButton(opt_data) + AJS.Templates.HelpTip.sequencePaging(opt_data) + '</form>';
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipFooter.soyTemplateName = 'AJS.Templates.HelpTip.tipFooter';
}


AJS.Templates.HelpTip.nextButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showNextButton) ? '<button class="aui-button helptip-next" type="button">' + ((opt_data.nextButtonText) ? soy.$$escapeHtml(opt_data.nextButtonText) : soy.$$escapeHtml('Next')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.nextButton.soyTemplateName = 'AJS.Templates.HelpTip.nextButton';
}


AJS.Templates.HelpTip.closeButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showCloseButton) ? '<button class="aui-button ' + ((opt_data.showNextButton) ? ' aui-button-link ' : '') + ' helptip-close" type="button">' + ((opt_data.closeButtonText) ? soy.$$escapeHtml(opt_data.closeButtonText) : soy.$$escapeHtml('Close')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.closeButton.soyTemplateName = 'AJS.Templates.HelpTip.closeButton';
}


AJS.Templates.HelpTip.sequencePaging = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isSequence && opt_data.length > 1) ? '<span class="helptip-sequence-paging">' + soy.$$escapeHtml(opt_data.position + 1) + '/' + soy.$$escapeHtml(opt_data.length) + '</span>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.sequencePaging.soyTemplateName = 'AJS.Templates.HelpTip.sequencePaging';
}
;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'js/HelpTip.js' */
define("jira-help-tips/feature/help-tip",["require"],function(i){"use strict";function t(){return!1}function e(){return!0}function s(){return"jira-help-tip-"+d+c++}var n=i("jquery"),o=i("underscore"),h=i("jira-help-tips/feature/help-tip-manager"),l=i("jira-help-tips/util/analytics"),r=i("aui/inline-dialog"),a=AJS.Popups,u=AJS.Templates.HelpTip,c=0,d=(new Date).getTime(),p="jira-help-tip aui-help",f=function(i){var t;this.attributes=n.extend({},i),this.attributes.id||(this.attributes.id=!1),this.attributes.callbacks||(this.attributes.callbacks={}),this.attributes.isSequence&&(this.attributes.weight||(this.attributes.weight=Number.MAX_VALUE),h.sequences.push(this)),this.attributes.body&&(this.attributes.bodyHtml=this.attributes.body,delete this.attributes.body),this.cid=s(),t=this.attributes.anchor,delete this.attributes.anchor,this.view=t?new b(this,t):new m(this)};n.extend(f.prototype,{show:function(i){i=i||{};var t=this,e=n.Deferred();if(this.attributes.callbacks.beforeShow){var s=this.attributes.callbacks.beforeShow();s&&o.isFunction(s.done)?s.done(e.resolve):e.resolve()}else e.resolve();e.done(function(){h.show(function(){t.isDismissed()||(!i.force&&a&&a.DisplayController?a.DisplayController.request({name:t.id,weight:1e3,show:function(){t.view.show()}}):t.view.show(),l.send("shown",t))})})},dismiss:function(){var i=l.clean(arguments[0]||"programmatically");this.view.dismiss(),"close-button"===i&&this.attributes.isSequence&&h.clearSequences(),this.isDismissed()||(h.dismiss(this),l.send("dismissed."+i,this))},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return h.isDismissed(this)},refresh:function(){this.isDismissed()||this.view.refresh()},hide:function(){this.isDismissed()||this.view.dismiss()},showNextHelpTipInSequence:function(){this.view.clickNext()}});var b=function(i,t){this.initialize(i,t)};n.extend(b.prototype,{initialize:function(i,e){this.model=i,this.anchorSelector=e,this.anchor=n(e),this._initDialog(e),n(document).bind("showLayer",function(e,s,o){"inlineDialog"===s&&o.id===i.cid&&(r.current=null,n(document.body).unbind("click."+i.cid+".inline-dialog-check"),o._validateClickToClose=t,o.hide=t)})},show:function(){this.beforeHide=t,this.popup.show()},refresh:function(){var i=n(this.anchorSelector);i.is(":visible")?i.get(0)!==this.anchor.get(0)?this.changeAnchor(i):this.isVisible()?this.popup.refresh():this.show():this.dismiss()},changeAnchor:function(i){var t=this.isVisible();this.dismiss(),this.$el.remove(),this.anchor=i,this._initDialog(i),t&&this.show()},dismiss:function(){this.beforeHide=e,this._popupHide()},clickNext:function(){var i=n(this.$el).find(".helptip-next");i.length>0&&i.click()},isVisible:function(){return this.$el.is(":visible")},_initDialog:function(i){var e=this,s=this.model;this.popup=r(n(i),s.cid,o.bind(this._createDialog,this),o.extend({container:"#content",noBind:!0,preHideCallback:function(){return e.beforeHide()},calculatePositions:function(i,t,e,s){var o=r.opts.calculatePositions(i,t,e,s),h=n(this.container),l=h.offset();return"auto"!==o.popupCss.left&&(o.popupCss.left-=l.left,o.popupCss.right="auto"),o.popupCss.top-=l.top,o},addActiveClass:!1,initCallback:s.attributes.callbacks.init,hideCallback:s.attributes.callbacks.hide,persistent:!0},s.attributes.inlineDialogOpts)),this._popupHide=this.popup.hide,this.popup.hide=t,this.$el=n(this.popup[0]),this.$el.addClass(p)},_createDialog:function(i,t,e){var s=this,r=h.sequences,a=this.model.attributes.position,c=this.model.attributes.isSequence;i.removeClass("contents"),i.html(n(u.tipContent(o.extend({showNextButton:c&&r.length>1&&a+1<r.length,length:r.length,position:a,showCloseButton:!0},this.model.attributes)))),i.unbind("mouseover mouseout"),i.find(".helptip-link").click(function(){l.send("learn-more.clicked",s.model)}),i.find(".helptip-close").click(function(i){i.preventDefault(),s.model.dismiss("close-button")}),i.find(".helptip-next").click(function(i){i.preventDefault(),s.model.dismiss("next-button");var t=a+1;r[t]&&r[t].show({force:!0})}),e()}});var m=function(i){this.initialize(i)};return n.extend(m.prototype,{initialize:function(){this.$el=n("<div></div>"),this.$el.addClass(p)},show:function(){},dismiss:function(){}}),f});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:initialiser', location = 'js/initialiser.js' */
define("jira-help-tips/page/initialiser",["jira-help-tips/feature/help-tip-manager","jira/util/users/logged-in-user","underscore"],function(e,i,n){function r(){i.isAnonymous()||e.fetch()}return{init:n.once(r)}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'js/legacy.js' */
!function(){"use strict";AJS.namespace("AJS.HelpTip",null,require("jira-help-tips/feature/help-tip")),AJS.namespace("AJS.HelpTip.Manager",null,require("jira-help-tips/feature/help-tip-manager")),require("jira-help-tips/page/initialiser").init()}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-cta-tooltip-resources', location = 'templates/viewissue/devstatus-cta-tooltips.soy' */
// This file was automatically generated from devstatus-cta-tooltips.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Tooltip.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Tooltip == 'undefined') { JIRA.Templates.DevStatus.Tooltip = {}; }


JIRA.Templates.DevStatus.Tooltip.createBranch = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.DevStatus.Tooltip.tooltipLayout({extraClasses: 'create-branch', content: '<span class="branch-illustration"></span><div class="branch-text"><p>' + soy.$$escapeHtml('Create a branch for this issue in your source repository') + '.<br /> <a class="cta-learn-more-link" href="https://www.atlassian.com/git/workflows" target="_blank">' + soy.$$escapeHtml('Learn more about branching strategies') + '.</a></p></div>'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.createBranch.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.createBranch';
}


JIRA.Templates.DevStatus.Tooltip.automaticTransitions = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.DevStatus.Tooltip.tooltipLayout({extraClasses: 'dev-summary-automatic-transitions', content: '<p>' + soy.$$escapeHtml('Now JIRA can automatically update your issue status when pull requests and other actions occur.') + '</p><p><a href="' + soy.$$escapeHtml(opt_data.aitHelpLinkUrl.url) + '" id="trigger-docs-link" target="_blank" title="' + soy.$$escapeHtml('Learn about automating your workflow') + '">' + soy.$$escapeHtml('Learn about automating your workflow') + '</a></p>'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.automaticTransitions.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.automaticTransitions';
}


JIRA.Templates.DevStatus.Tooltip.tooltipLayout = function(opt_data, opt_ignored) {
  return '<div class="cta-tooltip' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.tooltipLayout.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.tooltipLayout';
}
;
;
/* module-key = 'com.atlassian.plugin.jslibs:underscore-1.5.2', location = 'libs/underscore/1.5.2/underscore-1.5.2.js' */
(function(l){define("atlassian/libs/underscore-1.5.2",function(){var o={};l.call(o);return"undefined"!==typeof exports?"undefined"!==typeof module&&module.exports?module.exports.noConflict():exports.noConflict():o._.noConflict()})})(function(){(function(){var l=this,o=l._,p={},k=Array.prototype,q=Object.prototype,t=k.push,i=k.slice,r=k.concat,m=q.toString,L=q.hasOwnProperty,A=k.forEach,B=k.map,C=k.reduce,D=k.reduceRight,E=k.filter,F=k.every,G=k.some,s=k.indexOf,H=k.lastIndexOf,q=Array.isArray,M=Object.keys,
u=Function.prototype.bind,b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):l._=b;b.VERSION="1.5.2";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(A&&a.forEach===A)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(c.call(d,a[e],e,a)===p)break}else for(var g=b.keys(a),e=0,f=g.length;e<f;e++)if(c.call(d,
a[g[e]],g[e],a)===p)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(B&&a.map===B)return a.map(c,b);j(a,function(a,g,h){e.push(c.call(b,a,g,h))});return e};b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(C&&a.reduce===C){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,N){if(f)d=c.call(e,d,a,b,N);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=
function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(D&&a.reduceRight===D){e&&(c=b.bind(c,e));return f?a.reduceRight(c,d):a.reduceRight(c)}var g=a.length;if(g!==+g)var h=b.keys(a),g=h.length;j(a,function(b,i,j){i=h?h[--g]:--g;if(f)d=c.call(e,d,a[i],i,j);else{d=a[i];f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.find=b.detect=function(a,c,b){var e;I(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,
c,b){var e=[];if(a==null)return e;if(E&&a.filter===E)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&e.push(a)});return e};b.reject=function(a,c,d){return b.filter(a,function(a,b,g){return!c.call(d,a,b,g)},d)};b.every=b.all=function(a,c,d){c||(c=b.identity);var e=true;if(a==null)return e;if(F&&a.every===F)return a.every(c,d);j(a,function(a,b,h){if(!(e=e&&c.call(d,a,b,h)))return p});return!!e};var I=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(G&&a.some===
G)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return p});return!!e};b.contains=b.include=function(a,c){return a==null?false:s&&a.indexOf===s?a.indexOf(c)!=-1:I(a,function(a){return a===c})};b.invoke=function(a,c){var d=i.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){return(e?c:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.where=function(a,c,d){return b.isEmpty(c)?d?void 0:[]:b[d?"find":"filter"](a,function(a){for(var b in c)if(c[b]!==
a[b])return false;return true})};b.findWhere=function(a,c){return b.where(a,c,true)};b.max=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var e={computed:-Infinity,value:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;
var e={computed:Infinity,value:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});return e.value};b.shuffle=function(a){var c,d=0,e=[];j(a,function(a){c=b.random(d++);e[d-1]=e[c];e[c]=a});return e};b.sample=function(a,c,d){return arguments.length<2||d?a[b.random(a.length-1)]:b.shuffle(a).slice(0,Math.max(0,c))};var v=function(a){return b.isFunction(a)?a:function(c){return c[a]}};b.sortBy=function(a,c,d){var e=v(c);return b.pluck(b.map(a,function(a,c,b){return{value:a,
index:c,criteria:e.call(d,a,c,b)}}).sort(function(a,c){var b=a.criteria,d=c.criteria;if(b!==d){if(b>d||b===void 0)return 1;if(b<d||d===void 0)return-1}return a.index-c.index}),"value")};var w=function(a){return function(c,d,e){var f={},g=d==null?b.identity:v(d);j(c,function(b,d){var i=g.call(e,b,d,c);a(f,i,b)});return f}};b.groupBy=w(function(a,c,d){(b.has(a,c)?a[c]:a[c]=[]).push(d)});b.indexBy=w(function(a,c,b){a[c]=b});b.countBy=w(function(a,c){b.has(a,c)?a[c]++:a[c]=1});b.sortedIndex=function(a,
c,d,e){for(var d=d==null?b.identity:v(d),c=d.call(e,c),f=0,g=a.length;f<g;){var h=f+g>>>1;d.call(e,a[h])<c?f=h+1:g=h}return f};b.toArray=function(a){return!a?[]:b.isArray(a)?i.call(a):a.length===+a.length?b.map(a,b.identity):b.values(a)};b.size=function(a){return a==null?0:a.length===+a.length?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,c,b){return a==null?void 0:c==null||b?a[0]:i.call(a,0,c)};b.initial=function(a,c,b){return i.call(a,0,a.length-(c==null||b?1:c))};b.last=function(a,
c,b){return a==null?void 0:c==null||b?a[a.length-1]:i.call(a,Math.max(a.length-c,0))};b.rest=b.tail=b.drop=function(a,b,d){return i.call(a,b==null||d?1:b)};b.compact=function(a){return b.filter(a,b.identity)};var J=function(a,c,d){if(c&&b.every(a,b.isArray))return r.apply(d,a);j(a,function(a){b.isArray(a)||b.isArguments(a)?c?t.apply(d,a):J(a,c,d):d.push(a)});return d};b.flatten=function(a,b){return J(a,b,[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,
c,d,e){if(b.isFunction(c)){e=d;d=c;c=false}var d=d?b.map(a,d,e):a,f=[],g=[];j(d,function(d,e){if(c?!e||g[g.length-1]!==d:!b.contains(g,d)){g.push(d);f.push(a[e])}});return f};b.union=function(){return b.uniq(b.flatten(arguments,true))};b.intersection=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=r.apply(k,i.call(arguments,1));return b.filter(a,function(a){return!b.contains(c,a)})};
b.zip=function(){for(var a=b.max(b.pluck(arguments,"length").concat(0)),c=Array(a),d=0;d<a;d++)c[d]=b.pluck(arguments,""+d);return c};b.object=function(a,b){if(a==null)return{};for(var d={},e=0,f=a.length;e<f;e++)b?d[a[e]]=b[e]:d[a[e][0]]=a[e][1];return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e=0,f=a.length;if(d)if(typeof d=="number")e=d<0?Math.max(0,f+d):d;else{e=b.sortedIndex(a,c);return a[e]===c?e:-1}if(s&&a.indexOf===s)return a.indexOf(c,d);for(;e<f;e++)if(a[e]===c)return e;return-1};
b.lastIndexOf=function(a,b,d){if(a==null)return-1;var e=d!=null;if(H&&a.lastIndexOf===H)return e?a.lastIndexOf(b,d):a.lastIndexOf(b);for(d=e?d:a.length;d--;)if(a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var x=function(){};b.bind=function(a,c){var d,e;if(u&&a.bind===u)return u.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;d=i.call(arguments,
2);return e=function(){if(!(this instanceof e))return a.apply(c,d.concat(i.call(arguments)));x.prototype=a.prototype;var b=new x;x.prototype=null;var g=a.apply(b,d.concat(i.call(arguments)));return Object(g)===g?g:b}};b.partial=function(a){var b=i.call(arguments,1);return function(){return a.apply(this,b.concat(i.call(arguments)))}};b.bindAll=function(a){var c=i.call(arguments,1);if(c.length===0)throw Error("bindAll must be passed function names");j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=
function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,b,d){var e,f,g,h=null,i=0;d||(d={});var j=function(){i=d.leading===false?0:new Date;h=null;g=a.apply(e,f)};return function(){var k=new Date;!i&&d.leading===
false&&(i=k);var K=b-(k-i);e=this;f=arguments;if(K<=0){clearTimeout(h);h=null;i=k;g=a.apply(e,f)}else!h&&d.trailing!==false&&(h=setTimeout(j,K));return g}};b.debounce=function(a,b,d){var e,f,g,h,i;return function(){g=this;f=arguments;h=new Date;var j=function(){var k=new Date-h;if(k<b)e=setTimeout(j,b-k);else{e=null;d||(i=a.apply(g,f))}},k=d&&!e;e||(e=setTimeout(j,b));k&&(i=a.apply(g,f));return i}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;d=a.apply(this,arguments);a=
null;return d}};b.wrap=function(a,b){return function(){var d=[a];t.apply(d,arguments);return b.apply(this,d)}};b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};b.keys=M||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&c.push(d);return c};b.values=function(a){for(var c=b.keys(a),d=
c.length,e=Array(d),f=0;f<d;f++)e[f]=a[c[f]];return e};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;e<f;e++)c[a[d[e]]]=d[e];return c};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var b={},d=r.apply(k,i.call(arguments,
1));j(d,function(d){d in a&&(b[d]=a[d])});return b};b.omit=function(a){var c={},d=r.apply(k,i.call(arguments,1)),e;for(e in a)b.contains(d,e)||(c[e]=a[e]);return c};b.defaults=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]===void 0&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};var y=function(a,c,d,e){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a instanceof
b)a=a._wrapped;if(c instanceof b)c=c._wrapped;var f=m.call(a);if(f!=m.call(c))return false;switch(f){case "[object String]":return a==String(c);case "[object Number]":return a!=+a?c!=+c:a==0?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==+c;case "[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if(typeof a!="object"||typeof c!="object")return false;for(var g=d.length;g--;)if(d[g]==a)return e[g]==c;var g=a.constructor,
h=c.constructor;if(g!==h&&(!b.isFunction(g)||!(g instanceof g&&b.isFunction(h)&&h instanceof h)))return false;d.push(a);e.push(c);g=0;h=true;if(f=="[object Array]"){g=a.length;if(h=g==c.length)for(;g--;)if(!(h=y(a[g],c[g],d,e)))break}else{for(var i in a)if(b.has(a,i)){g++;if(!(h=b.has(c,i)&&y(a[i],c[i],d,e)))break}if(h){for(i in c)if(b.has(c,i)&&!g--)break;h=!g}}d.pop();e.pop();return h};b.isEqual=function(a,b){return y(a,b,[],[])};b.isEmpty=function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===
0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType===1)};b.isArray=q||function(a){return m.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};j("Arguments Function String Number Date RegExp".split(" "),function(a){b["is"+a]=function(b){return m.call(b)=="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});"function"!==typeof/./&&(b.isFunction=function(a){return typeof a===
"function"});b.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&a!=+a};b.isBoolean=function(a){return a===true||a===false||m.call(a)=="[object Boolean]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===void 0};b.has=function(a,b){return L.call(a,b)};b.noConflict=function(){l._=o;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=Array(Math.max(0,a)),f=0;f<a;f++)e[f]=b.call(d,f);return e};
b.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};var n={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};n.unescape=b.invert(n.escape);var O={escape:RegExp("["+b.keys(n.escape).join("")+"]","g"),unescape:RegExp("("+b.keys(n.unescape).join("|")+")","g")};b.each(["escape","unescape"],function(a){b[a]=function(b){return b==null?"":(""+b).replace(O[a],function(b){return n[a][b]})}});b.result=function(a,c){if(a!=null){var d=a[c];return b.isFunction(d)?
d.call(a):d}};b.mixin=function(a){j(b.functions(a),function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];t.apply(a,arguments);a=d.apply(b,a);return this._chain?b(a).chain():a}})};var P=0;b.uniqueId=function(a){var b=++P+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,Q={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=
function(a,c,d){var e,d=b.defaults({},d,b.templateSettings),f=RegExp([(d.escape||z).source,(d.interpolate||z).source,(d.evaluate||z).source].join("|")+"|$","g"),g=0,h="__p+='";a.replace(f,function(b,c,d,e,f){h=h+a.slice(g,f).replace(R,function(a){return"\\"+Q[a]});c&&(h=h+("'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"));d&&(h=h+("'+\n((__t=("+d+"))==null?'':__t)+\n'"));e&&(h=h+("';\n"+e+"\n__p+='"));g=f+b.length;return b});h=h+"';\n";d.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
h+"return __p;\n";try{e=new Function(d.variable||"obj","_",h)}catch(i){i.source=h;throw i;}if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+h+"}";return c};b.chain=function(a){return b(a).chain()};b.mixin(b);j("pop push reverse shift sort splice unshift".split(" "),function(a){var c=k[a];b.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);(a=="shift"||a=="splice")&&d.length===0&&delete d[0];return this._chain?b(d).chain():d}});
j(["concat","join","slice"],function(a){var c=k[a];b.prototype[a]=function(){var a=c.apply(this._wrapped,arguments);return this._chain?b(a).chain():a}});b.extend(b.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)});;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone-1.0.0-factory', location = 'factories/backbone/1.0.0/backbone-1.0.0-factory.js' */
(function(k){define("atlassian/libs/factories/backbone-1.0.0",function(){return function(t,i){var p={_:t,$:i};k.call(p);return"undefined"!==typeof exports?exports.noConflict():p.Backbone.noConflict()}})})(function(){var k=this,t=k.Backbone,i=[],p=i.push,u=i.slice,C=i.splice,g;g="undefined"!==typeof exports?exports:k.Backbone={};g.VERSION="1.0.0";var e=k._;!e&&"undefined"!==typeof require&&(e=require("underscore"));g.$=k.jQuery||k.Zepto||k.ender||k.$;g.noConflict=function(){k.Backbone=t;return this};
g.emulateHTTP=!1;g.emulateJSON=!1;var h=g.Events={on:function(a,b,c){if(!q(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!q(this,"once",a,[b,c])||!b)return this;var d=this,f=e.once(function(){d.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,c)},off:function(a,b,c){var d,f,v,g,j,w,l,h;if(!this._events||!q(this,"off",a,[b,c]))return this;if(!a&&
!b&&!c)return this._events={},this;g=a?[a]:e.keys(this._events);j=0;for(w=g.length;j<w;j++)if(a=g[j],v=this._events[a]){this._events[a]=d=[];if(b||c){l=0;for(h=v.length;l<h;l++)f=v[l],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&d.push(f)}d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=u.call(arguments,1);if(!q(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&x(c,b);d&&x(d,arguments);return this},stopListening:function(a,
b,c){var d=this._listeners;if(!d)return this;var f=!b&&!c;"object"===typeof b&&(c=this);a&&((d={})[a._listenerId]=a);for(var e in d)d[e].off(b,c,this),f&&delete this._listeners[e];return this}},y=/\s+/,q=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(y.test(c)){c=c.split(y);f=0;for(var e=c.length;f<e;f++)a[b].apply(a,[c[f]].concat(d));return!1}return!0},x=function(a,b){var c,d=-1,f=a.length,e=b[0],g=b[1],j=b[2];switch(b.length){case 0:for(;++d<
f;)(c=a[d]).callback.call(c.ctx);break;case 1:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e);break;case 2:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g);break;case 3:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g,j);break;default:for(;++d<f;)(c=a[d]).callback.apply(c.ctx,b)}};e.each({listenTo:"on",listenToOnce:"once"},function(a,b){h[b]=function(b,d,f){var g=this._listeners||(this._listeners={}),o=b._listenerId||(b._listenerId=e.uniqueId("l"));g[o]=b;"object"===typeof d&&(f=this);b[a](d,f,this);return this}});
h.bind=h.on;h.unbind=h.off;e.extend(g,h);var n=g.Model=function(a,b){var c,d=a||{};b||(b={});this.cid=e.uniqueId("c");this.attributes={};e.extend(this,e.pick(b,D));b.parse&&(d=this.parse(d,b)||{});if(c=e.result(this,"defaults"))d=e.defaults({},d,c);this.set(d,b);this.changed={};this.initialize.apply(this,arguments)},D=["url","urlRoot","collection"];e.extend(n.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},
sync:function(){return g.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return e.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,f,g,o,j,h,l;if(null==a)return this;"object"===typeof a?(f=a,c=b):(f={})[a]=b;c||(c={});if(!this._validate(f,c))return!1;g=c.unset;o=c.silent;a=[];j=this._changing;this._changing=!0;j||(this._previousAttributes=e.clone(this.attributes),this.changed={});l=this.attributes;h=this._previousAttributes;
this.idAttribute in f&&(this.id=f[this.idAttribute]);for(d in f)b=f[d],e.isEqual(l[d],b)||a.push(d),e.isEqual(h[d],b)?delete this.changed[d]:this.changed[d]=b,g?delete l[d]:l[d]=b;if(!o){a.length&&(this._pending=!0);b=0;for(d=a.length;b<d;b++)this.trigger("change:"+a[b],this,l[a[b]],c)}if(j)return this;if(!o)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,e.extend({},b,{unset:!0}))},clear:function(a){var b=
{},c;for(c in this.attributes)b[c]=void 0;return this.set(b,e.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!e.isEmpty(this.changed):e.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?e.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes,f;for(f in a)if(!e.isEqual(d[f],b=a[f]))(c||(c={}))[f]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return e.clone(this._previousAttributes)},
fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return false;c&&c(b,d,a);b.trigger("sync",b,d,a)};r(this,a);return this.sync("read",this,a)},save:function(a,b,c){var d,f=this.attributes;null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;if(d&&(!c||!c.wait)&&!this.set(d,c))return!1;c=e.extend({validate:!0},c);if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=e.extend({},f,d));void 0===c.parse&&(c.parse=
!0);var g=this,h=c.success;c.success=function(a){g.attributes=f;var b=g.parse(a,c);c.wait&&(b=e.extend(d||{},b));if(e.isObject(b)&&!g.set(b,c))return false;h&&h(g,a,c);g.trigger("sync",g,a,c)};r(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=f);return a},destroy:function(a){var a=a?e.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(e){(a.wait||b.isNew())&&d();c&&
c(b,e,a);b.isNew()||b.trigger("sync",b,e,a)};if(this.isNew())return a.success(),!1;r(this,a);var f=this.sync("delete",this,a);a.wait||d();return f},url:function(){var a=e.result(this,"urlRoot")||e.result(this.collection,"url")||z();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},e.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;var a=e.extend({},this.attributes,a),c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,e.extend(b||{},{validationError:c}));return!1}});e.each("keys values pairs invert pick omit".split(" "),function(a){n.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.attributes);return e[a].apply(e,b)}});var s=g.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&
(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,e.extend({silent:!0},b))},E={add:!0,remove:!0,merge:!0},F={add:!0,merge:!1,remove:!1};e.extend(s.prototype,h,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){return this.set(a,e.defaults(b||{},F))},remove:function(a,b){a=e.isArray(a)?
a.slice():[a];b||(b={});var c,d,f,g;c=0;for(d=a.length;c<d;c++)if(g=this.get(a[c]))delete this._byId[g.id],delete this._byId[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g);return this},set:function(a,b){b=e.defaults(b||{},E);b.parse&&(a=this.parse(a,b));e.isArray(a)||(a=a?[a]:[]);var c,d,f,g,h,j=b.at,k=this.comparator&&null==j&&!1!==b.sort,l=e.isString(this.comparator)?this.comparator:null,i=[],m=[],n={};c=
0;for(d=a.length;c<d;c++)if(f=this._prepareModel(a[c],b))(g=this.get(f))?(b.remove&&(n[g.cid]=!0),b.merge&&(g.set(f.attributes,b),k&&(!h&&g.hasChanged(l))&&(h=!0))):b.add&&(i.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f));if(b.remove){c=0;for(d=this.length;c<d;++c)n[(f=this.models[c]).cid]||m.push(f);m.length&&this.remove(m,b)}i.length&&(k&&(h=!0),this.length+=i.length,null!=j?C.apply(this.models,[j,0].concat(i)):p.apply(this.models,i));h&&this.sort({silent:!0});
if(b.silent)return this;c=0;for(d=i.length;c<d;c++)(f=i[c]).trigger("add",f,this,b);h&&this.trigger("sort",this,b);return this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,e.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-
1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return e.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var d in a)if(a[d]!==b.get(d))return!1;return!0})},findWhere:function(a){return this.where(a,
!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=e.isFunction(b)?b:function(a){return a.get(b)};return e.sortedIndex(this.models,a,d,c)},pluck:function(a){return e.invoke(this.models,"get",
a)},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};r(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?e.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(e){b.wait&&c.add(a,b);d&&d(a,e,b)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?(this.trigger("invalid",this,a,b),!1):c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&
(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});e.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){s.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.models);return e[a].apply(e,b)}});
e.each(["groupBy","countBy","sortBy"],function(a){s.prototype[a]=function(b,c){var d=e.isFunction(b)?b:function(a){return a.get(b)};return e[a](this.models,d,c)}});var i=g.View=function(a){this.cid=e.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},G=/^(\S+)\s*(.*)$/,H="model collection el id attributes className tagName events".split(" ");e.extend(i.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof g.$?a:g.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=e.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];e.isFunction(c)||(c=this[a[b]]);if(c){var d=b.match(G),f=d[1],d=d[2],c=e.bind(c,this),f=f+(".delegateEvents"+this.cid);
if(""===d)this.$el.on(f,c);else this.$el.on(f,d,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=e.extend({},e.result(this,"options"),a));e.extend(this,e.pick(a,H));this.options=a},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var a=e.extend({},e.result(this,"attributes"));this.id&&(a.id=e.result(this,"id"));this.className&&(a["class"]=e.result(this,"className"));a=g.$("<"+
e.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});g.sync=function(a,b,c){var d=I[a];e.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var f={type:d,dataType:"json"};c.url||(f.url=e.result(b,"url")||z());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))f.contentType="application/json",f.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{});if(c.emulateHTTP&&("PUT"===
d||"DELETE"===d||"PATCH"===d)){f.type="POST";c.emulateJSON&&(f.data._method=d);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(h)return h.apply(this,arguments)}}"GET"!==f.type&&!c.emulateJSON&&(f.processData=!1);if("PATCH"===f.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};a=c.xhr=g.ajax(e.extend(f,c));b.trigger("request",b,a,c);return a};var I=
{create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var A=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},J=/\((.*?)\)/g,K=/(\(\?)?:\w+/g,L=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(A.prototype,h,{initialize:function(){},route:function(a,b,c){e.isRegExp(a)||(a=this._routeToRegExp(a));e.isFunction(b)&&(c=b,b="");c||(c=this[b]);var d=this;g.history.route(a,
function(e){e=d._extractParameters(a,e);c&&c.apply(d,e);d.trigger.apply(d,["route:"+b].concat(e));d.trigger("route",b,e);g.history.trigger("route",d,b,e)});return this},navigate:function(a,b){g.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var a,b=e.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(M,"\\$&").replace(J,"(?:$1)?").replace(K,function(a,c){return c?a:"([^/]+)"}).replace(L,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return e.map(c,function(a){return a?decodeURIComponent(a):null})}});var m=g.History=function(){this.handlers=[];e.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,O=/msie [\w.]+/,P=/\/$/;m.started=!1;e.extend(m.prototype,h,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){var a=this.location.pathname,c=this.root.replace(P,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(B,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0;this.options=e.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;
this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var a=this.getFragment(),b=document.documentMode,b=O.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(N,"/");b&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)g.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&
!b)g.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(B,
""),this.history.replaceState({},document.title,this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&
this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return e.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,
a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});g.history=new m;n.extend=s.extend=A.extend=i.extend=m.extend=function(a,b){var c=this,d;d=a&&e.has(a,"constructor")?a.constructor:function(){return c.apply(this,
arguments)};e.extend(d,c,b);var f=function(){this.constructor=d};f.prototype=c.prototype;d.prototype=new f;a&&e.extend(d.prototype,a);d.__super__=c.prototype;return d};var z=function(){throw Error('A "url" property or function must be specified');},r=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-2014.09.03-factory', location = 'factories/brace/2014.09.03/brace-2104.09.03-factory.js' */
(function(j){define("atlassian/libs/factories/brace-2014.09.03",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="2014.09.03";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==
""+a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?
b:p(a)?new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));
h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=
w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=
e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=c.uniq(e.namedEvents.concat(b[d]))}else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+
d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=
function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;
if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g))throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,a))throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=
g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:brace', location = '/inline-issue-create/lib/backbone.brace/backbone.brace-amd.js' */
define("jira/inline-issue-create/lib/backbone",["atlassian/libs/factories/backbone-1.0.0","atlassian/libs/underscore-1.5.2","jquery"],function(a,b,c){return a(b,c)});define("jira/inline-issue-create/lib/brace",["jira/inline-issue-create/lib/backbone","atlassian/libs/underscore-1.5.2","atlassian/libs/factories/brace-2014.09.03"],function(b,a,c){return c(a,Backbone)});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-2.1.0-factory', location = 'factories/marionette/2.1.0/marionette-2.1.0-factory.js' */
(function(l){define("atlassian/libs/factories/marionette-2.1.0",function(){return function(f,c){var i={_:f,Backbone:c};l.call(i);return i.Marionette.noConflict()}})})(function(){var l=this,f=this.Backbone,c=this._,i=function(a,b){var e=Error(a);e.name=b||"Error";throw e;},r=f.ChildViewContainer,m=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();c.each(a,this.add,this)};c.extend(m.prototype,{add:function(a,b){var e=a.cid;this._views[e]=a;a.model&&(this._indexByModel[a.model.cid]=
e);b&&(this._indexByCustom[b]=e);this._updateLength();return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return c.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];c.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],
!0},this);delete this._views[b];this._updateLength();return this},call:function(a){this.apply(a,c.tail(arguments))},apply:function(a,b){c.each(this._views,function(e){c.isFunction(e[a])&&e[a].apply(e,b||[])})},_updateLength:function(){this.length=c.size(this._views)}});c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){m.prototype[a]=function(){var b=[c.values(this._views)].concat(c.toArray(arguments));
return c[a].apply(c,b)}});f.ChildViewContainer=m;f.ChildViewContainer.VERSION="0.1.4";f.ChildViewContainer.noConflict=function(){f.ChildViewContainer=r;return this};var s=f.Wreqr,h=f.Wreqr={};f.Wreqr.VERSION="1.3.1";f.Wreqr.noConflict=function(){f.Wreqr=s;return this};var g=function(a){this.options=a;this._wreqrHandlers={};c.isFunction(this.initialize)&&this.initialize(a)};g.extend=f.Model.extend;c.extend(g.prototype,f.Events,{setHandlers:function(a){c.each(a,function(a,e){var d=null;c.isObject(a)&&
!c.isFunction(a)&&(d=a.context,a=a.callback);this.setHandler(e,a,d)},this)},setHandler:function(a,b,e){this._wreqrHandlers[a]={callback:b,context:e};this.trigger("handler:add",a,b,e)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers=
{}}});h.Handlers=g;g=function(a){this.options=a;this._commands={};c.isFunction(this.initialize)&&this.initialize(a)};c.extend(g.prototype,f.Events,{getCommands:function(a){var b=this._commands[a];b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});h.CommandStorage=g;g=h.Handlers.extend({storageType:h.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);
this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);h.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,e){var d=this.storage.getCommands(a);c.each(d.instances,function(a){b.apply(e,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;
this.storage=c.isFunction(a)?new a:a}});h.Commands=g;h.RequestResponse=h.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);if(this.hasHandler(a))return this.getHandler(a).apply(this,b)}});g=function(){};g.extend=f.Model.extend;c.extend(g.prototype,f.Events);h.EventAggregator=g;g=function(a){this.vent=new h.EventAggregator;this.reqres=new h.RequestResponse;this.commands=new h.Commands;this.channelName=a};c.extend(g.prototype,{reset:function(){this.vent.off();
this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(a,b){this._connect("vent",a,b);return this},connectCommands:function(a,b){this._connect("commands",a,b);return this},connectRequests:function(a,b){this._connect("reqres",a,b);return this},_connect:function(a,b,e){if(b){var e=e||this,d="vent"===a?"on":"setHandler";c.each(b,function(b,f){this[a][d](f,c.bind(b,e))},this)}}});h.Channel=g;g=function(){this._channels={};this.vent=
{};this.commands={};this.reqres={};this._proxyMethods()};c.extend(g.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(a){var b=this._channels[a];b||(b=new h.Channel(a),this._channels[a]=b);return b},_proxyMethods:function(){c.each(["vent","commands","reqres"],function(a){c.each(t[a],function(b){var e=this;this[a][b]=function(c){var d=e._getChannel(c)[a],f=Array.prototype.slice.call(arguments,1);return d[b].apply(d,f)}},
this)},this)}});var t={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},g=new g;h.radio=g;var u=f.ChildViewContainer.noConflict(),v=f.Wreqr.noConflict(),w=l.Marionette,d=f.Marionette={};d.VERSION="2.1.0";d.noConflict=function(){l.Marionette=w;return this};f.Marionette=d;d.Deferred=f.$.Deferred;var j=Array.prototype.slice;
d.extend=f.Model.extend;d.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]};d.proxyGetOption=function(a){return d.getOption(this,a)};d.normalizeMethods=function(a){var b={};c.each(a,function(a,d){c.isFunction(a)||(a=this[a]);a&&(b[d]=a)},this);return b};d.normalizeUIKeys=function(a,b){if("undefined"!==typeof a)return c.each(c.keys(a),function(e){var c=/@ui\.[a-zA-Z_$0-9]*/g;e.match(c)&&(a[e.replace(c,function(a){return b[a.slice(4)]})]=a[e],delete a[e])}),
a};d.actAsCollection=function(a,b){c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(e){a[e]=function(){var a=[c.values(c.result(this,b))].concat(c.toArray(arguments));return c[e].apply(c,a)}})};var x=function(a,b,e){return e.toUpperCase()},y=/(^|:)(\w)/gi;d.triggerMethod=function(a){var b=this["on"+a.replace(y,x)],e;c.isFunction(b)&&(e=b.apply(this,c.tail(arguments)));c.isFunction(this.trigger)&&
this.trigger.apply(this,arguments);return e};var z=document.documentElement,o=function(a){a._isShown&&a._isRendered&&f.$.contains(z,a.el)&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};d.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;o(a)});a.listenTo(a,"render",function(){a._isRendered=!0;o(a)})};var A=function(a,b,e,d){d=d.split(/\s+/);c.each(d,function(c){var d=a[c];d||i('Method "'+c+'" was configured as an event handler, but does not exist.');a.listenTo(b,
e,d)})},B=function(a,b,e,c){a.listenTo(b,e,c)},C=function(a,b,e,d){d=d.split(/\s+/);c.each(d,function(c){a.stopListening(b,e,a[c])})},D=function(a,b,c,d){a.stopListening(b,c,d)},p=function(a,b,e,d,f){b&&e&&(c.isFunction(e)&&(e=e.call(a)),c.each(e,function(e,g){c.isFunction(e)?d(a,b,g,e):f(a,b,g,e)}))};d.bindEntityEvents=function(a,b,c){p(a,b,c,B,A)};d.unbindEntityEvents=function(a,b,c){p(a,b,c,D,C)};d.proxyBindEntityEvents=function(a,b){return d.bindEntityEvents(this,a,b)};d.proxyUnbindEntityEvents=
function(a,b){return d.unbindEntityEvents(this,a,b)};d.Callbacks=function(){this._deferred=d.Deferred();this._callbacks=[]};c.extend(d.Callbacks.prototype,{add:function(a,b){var e=c.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b});e.then(function(c){b&&(c.context=b);a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=d.Deferred();this._callbacks=[];c.each(a,function(a){this.add(a.cb,
a.ctx)},this)}});d.Controller=function(a){this.options=a||{};c.isFunction(this.initialize)&&this.initialize(this.options)};d.Controller.extend=d.extend;c.extend(d.Controller.prototype,f.Events,{destroy:function(){var a=j.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.triggerMethod.apply(this,["destroy"].concat(a));this.stopListening();this.off();return this},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Object=function(a){this.options=c.extend({},c.result(this,
"options"),a);this.initialize(this.options)};d.Object.extend=d.extend;c.extend(d.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy");this.triggerMethod("destroy");this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});c.extend(d.Object.prototype,f.Events);d.Region=function(a){this.options=a||{};this.el=this.getOption("el");(this.el=this.el instanceof
f.$?this.el[0]:this.el)||i('An "el" must be specified for a region.',"NoElError");this.$el=this.getEl(this.el);if(this.initialize){var b=j.apply(arguments);this.initialize.apply(this,b)}};c.extend(d.Region,{buildRegion:function(a,b){if(c.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(c.isFunction(a))return this._buildRegionFromRegionClass(a);i("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")},
_buildRegionFromSelector:function(a,b){return new b({el:a})},_buildRegionFromObject:function(a,b){var e=a.regionClass||b,d=c.omit(a,"selector","regionClass");a.selector&&!d.el&&(d.el=a.selector);e=new e(d);a.parentEl&&(e.getEl=function(b){if(c.isObject(b))return f.$(b);var e=a.parentEl;c.isFunction(e)&&(e=e());return e.find(b)});return e},_buildRegionFromRegionClass:function(a){return new a}});c.extend(d.Region.prototype,f.Events,{show:function(a,b){this._ensureElement();var e=b||{},d=a!==this.currentView,
f=!!e.forceShow,g=!!this.currentView;!e.preventDestroy&&d&&this.empty();if(d||f)a.once("destroy",c.bind(this.empty,this)),a.render(),g&&this.triggerMethod("before:swap",a),this.triggerMethod("before:show",a),c.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):this.triggerMethod.call(a,"before:show"),this.attachHtml(a),this.currentView=a,g&&this.triggerMethod("swap",a),this.triggerMethod("show",a),c.isFunction(a.triggerMethod)?a.triggerMethod("show"):this.triggerMethod.call(a,"show");return this},
_ensureElement:function(){c.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);(!this.$el||0===this.$el.length)&&i('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(a){return f.$(a)},attachHtml:function(a){this.el.innerHTML="";this.el.appendChild(a.el)},empty:function(){var a=this.currentView;if(a)return this.triggerMethod("before:empty",a),this._destroyView(),this.triggerMethod("empty",a),delete this.currentView,this},_destroyView:function(){var a=this.currentView;
a.destroy&&!a.isDestroyed?a.destroy():a.remove&&a.remove()},attachView:function(a){this.currentView=a;return this},hasView:function(){return!!this.currentView},reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el;return this},getOption:d.proxyGetOption,triggerMethod:d.triggerMethod});d.Region.extend=d.extend;g=d.Controller.extend({constructor:function(a){this._regions={};d.Controller.call(this,a)},addRegions:function(a,b){c.isFunction(a)&&(a=a.apply(this,arguments));
var e={};c.each(a,function(a,d){c.isString(a)&&(a={selector:a});a.selector&&(a=c.defaults({},a,b));var f=this.addRegion(d,a);e[d]=f},this);return e},addRegion:function(a,b){var e;e=c.isObject(b);var n=c.isString(b),f=!!b.selector;e=n||e&&f?d.Region.buildRegion(b,d.Region):c.isFunction(b)?d.Region.buildRegion(b,d.Region):b;this.triggerMethod("before:add:region",a,e);this._store(a,e);this.triggerMethod("add:region",a,e);return e},get:function(a){return this._regions[a]},getRegions:function(){return c.clone(this._regions)},
removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b},removeRegions:function(){var a=this.getRegions();c.each(this._regions,function(a,c){this._remove(c,a)},this);return a},emptyRegions:function(){var a=this.getRegions();c.each(a,function(a){a.empty()},this);return a},destroy:function(){this.removeRegions();return d.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){this.triggerMethod("before:remove:region",
a,b);b.empty();b.stopListening();delete this._regions[a];this._setLength();this.triggerMethod("remove:region",a,b)},_setLength:function(){this.length=c.size(this._regions)}});d.actAsCollection(g.prototype,"_regions");d.RegionManager=g;d.TemplateCache=function(a){this.templateId=a};c.extend(d.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new d.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=j.call(arguments),c=b.length;if(0<
c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});c.extend(d.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var b=f.$(a).html();(!b||0===b.length)&&i('Could not find template: "'+a+'"',"NoTemplateError");return b},compileTemplate:function(a){return c.template(a)}});d.Renderer={render:function(a,b){a||
i("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");return("function"===typeof a?a:d.TemplateCache.get(a))(b)}};d.View=f.View.extend({constructor:function(a){c.bindAll(this,"render");this.options=c.extend({},c.result(this,"options"),c.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(c.result(this,"events"));c.isObject(this.behaviors)&&new d.Behaviors(this);f.View.apply(this,arguments);d.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},
getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,j.call(arguments,1))},mixinTemplateHelpers:function(a){var a=a||{},b=this.getOption("templateHelpers");c.isFunction(b)&&(b=b.call(this));return c.extend(a,b)},normalizeUIKeys:function(a){var b=c.result(this,"ui"),e=c.result(this,"_uiBindings");return d.normalizeUIKeys(a,e||b)},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(c.result(this,"triggers"));c.each(b,
function(b,d){var f=c.isObject(b),g=f?b.event:b;a[d]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,n=f?b.stopPropagation:d;(f?b.preventDefault:c)&&c&&c.apply(a);n&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},_delegateDOMEvents:function(a){a=
a||this.events;c.isFunction(a)&&(a=a.call(this));var a=this.normalizeUIKeys(a),b={},e=c.result(this,"behaviorEvents")||{},d=this.configureTriggers();c.extend(b,e,a,d);f.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=j.call(arguments);f.View.prototype.undelegateEvents.apply(this,a);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var a=
Error("Cannot use a view thats already been destroyed.");a.name="ViewDestroyedError";throw a;}},destroy:function(){if(!this.isDestroyed){var a=j.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(a));this.unbindUIElements();this.remove();return this}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={};c.each(c.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:d.triggerMethod,normalizeMethods:d.normalizeMethods,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});d.ItemView=d.View.extend({constructor:function(){d.View.apply(this,arguments)},serializeData:function(){var a={};this.model?a=c.partial(this.serializeModel,
this.model).apply(this,arguments):this.collection&&(a={items:c.partial(this.serializeCollection,this.collection).apply(this,arguments)});return a},serializeCollection:function(a){return a.toJSON.apply(a,j.call(arguments,1))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){a||i("Cannot render the template since it is null or undefined.",
"UndefinedTemplateError");var b=this.serializeData(),b=this.mixinTemplateHelpers(b),a=d.Renderer.render(a,b,this);this.attachElContent(a);return this}},attachElContent:function(a){this.$el.html(a);return this},destroy:function(){if(!this.isDestroyed)return d.View.prototype.destroy.apply(this,arguments)}});d.CollectionView=d.View.extend({childViewEventPrefix:"childview",constructor:function(a){var b=a||{};this.sort=c.isUndefined(b.sort)?!0:b.sort;this._initChildViewStorage();d.View.apply(this,arguments);
this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&c.invoke(this._bufferedChildren,"triggerMethod",
"before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(c.each(this._bufferedChildren,function(a){c.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},
_onCollectionAdd:function(a){this.destroyEmptyView();var b=this.getChildView(a),c=this.collection.indexOf(a);this.addChild(a,b,c)},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},onShowCalled:function(){this.children.each(function(a){c.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")})},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.triggerMethod("render",
this);return this},resortView:function(){this.render()},_sortViews:function(){this.collection.find(function(a,b){var c=this.children.findByModel(a);return!c||c._index!==b},this)&&this.resortView()},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var a;
this.collection.each(function(b,c){a=this.getChildView(b);this.addChild(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var b=new f.Model;this.addEmptyView(b,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,
b){var e=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");c.isFunction(e)&&(e=e.call(this));e=this.buildChildView(a,b,e);this._isShown&&this.triggerMethod.call(e,"before:show");this.children.add(e);this.renderChildView(e,-1);this._isShown&&this.triggerMethod.call(e,"show")},getChildView:function(){var a=this.getOption("childView");a||i('A "childView" must be specified',"NoChildViewError");return a},addChild:function(a,b,e){var d=this.getOption("childViewOptions");c.isFunction(d)&&
(d=d.call(this,a,e));a=this.buildChildView(a,b,d);this._updateIndices(a,!0,e);this._addChildView(a,e);return a},_updateIndices:function(a,b,c){this.sort&&(b?(a._index=c,this.children.each(function(b){b._index>=a._index&&b._index++})):this.children.each(function(b){b._index>=a._index&&b._index--}))},_addChildView:function(a,b){this.proxyChildEvents(a);this.triggerMethod("before:add:child",a);this.children.add(a);this.renderChildView(a,b);this._isShown&&!this.isBuffering&&(c.isFunction(a.triggerMethod)?
a.triggerMethod("show"):d.triggerMethod.call(a,"show"));this.triggerMethod("add:child",a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a},buildChildView:function(a,b,e){a=c.extend({model:a},e);return new b(a)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1));return a},isEmpty:function(){return!this.collection||
0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},attachHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;this.sort&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},
_initChildViewStorage:function(){this.children=new u},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),d.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var a=this.children.map(c.identity);this.children.each(this.removeChildView,this);this.checkEmpty();return a},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");this.listenTo(a,"all",function(){var d=
j.call(arguments),f=d[0],g=this.normalizeMethods(c.result(this,"childEvents"));d[0]=b+":"+f;d.splice(1,0,a);"undefined"!==typeof g&&c.isFunction(g[f])&&g[f].apply(this,d.slice(1));this.triggerMethod.apply(this,d)},this)}});d.CompositeView=d.CollectionView.extend({constructor:function(){d.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),
this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(){var a=this.getOption("childView")||this.constructor;a||i('A "childView" must be specified',"NoChildViewError");return a},serializeData:function(){var a={};this.model&&(a=c.partial(this.serializeModel,this.model).apply(this,arguments));return a},render:function(){this._ensureViewIsIntact();this.isRendered=!0;this.resetChildViewContainer();this.triggerMethod("before:render",
this);this._renderTemplate();this._renderChildren();this.triggerMethod("render",this);return this},_renderChildren:function(){this.isRendered&&d.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");var b=this.getTemplate(),a=d.Renderer.render(b,a,this);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){this.$el.html(a);
return this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this).append(a.el)},getChildViewContainer:function(a){if("$childViewContainer"in a)return a.$childViewContainer;var b;(b=d.getOption(a,"childViewContainer"))?(b=c.isFunction(b)?b.call(a):b,b="@"===b.charAt(0)&&a.ui?a.ui[b.substr(4)]:a.$(b),0>=b.length&&i('The specified "childViewContainer" was not found: '+a.childViewContainer,"ChildViewContainerMissingError")):b=a.$el;
return a.$childViewContainer=b},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}});d.LayoutView=d.ItemView.extend({regionClass:d.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);d.ItemView.call(this,a)},render:function(){this._ensureViewIsIntact();this._firstRender?this._firstRender=!1:this._reInitializeRegions();return d.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed)return this;
this.regionManager.destroy();return d.ItemView.prototype.destroy.apply(this,arguments)},addRegion:function(a,b){this.triggerMethod("before:region:add",a);var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=c.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){this.triggerMethod("before:region:remove",a);delete this.regions[a];return this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},
_buildRegions:function(a){var b=this,c={regionClass:this.getOption("regionClass"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager();b=c.isFunction(this.regions)?this.regions(a):this.regions||{};var d=this.getOption.call(a,"regions");c.isFunction(d)&&(d=d.call(this,a));c.extend(b,d);this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.emptyRegions();this.regionManager.each(function(a){a.reset()})},
getRegionManager:function(){return new d.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",
function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})}});g=function(a,b){this.view=b;this.defaults=c.result(this,"defaults")||{};this.options=c.extend({},this.defaults,a);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)};c.extend(g.prototype,f.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});
g.extend=d.extend;d.Behavior=g;var k=function(a,b){b=k.parseBehaviors(a,b||c.result(a,"behaviors"));k.wrap(a,b,c.keys(q))},q={setElement:function(a,b){a.apply(this,c.tail(arguments,2));c.each(b,function(a){a.$el=this.$el;a.el=this.el},this);return this},destroy:function(a,b){var d=c.tail(arguments,2);a.apply(this,d);c.invoke(b,"destroy",d);return this},bindUIElements:function(a,b){a.apply(this);c.invoke(b,a)},unbindUIElements:function(a,b){a.apply(this);c.invoke(b,a)},triggerMethod:function(a,b){var d=
c.tail(arguments,2);a.apply(this,d);c.each(b,function(b){a.apply(b,d)})},delegateEvents:function(a,b){var e=c.tail(arguments,2);a.apply(this,e);c.each(b,function(a){d.bindEntityEvents(a,this.model,d.getOption(a,"modelEvents"));d.bindEntityEvents(a,this.collection,d.getOption(a,"collectionEvents"))},this);return this},undelegateEvents:function(a,b){var e=c.tail(arguments,2);a.apply(this,e);c.each(b,function(a){d.unbindEntityEvents(a,this.model,d.getOption(a,"modelEvents"));d.unbindEntityEvents(a,this.collection,
d.getOption(a,"collectionEvents"))},this);return this},behaviorEvents:function(a,b){var e={},f=c.result(this,"ui");c.each(b,function(a,b){var g={},h=c.clone(c.result(a,"events"))||{},i=c.result(a,"ui"),i=c.extend({},f,i),h=d.normalizeUIKeys(h,i);c.each(c.keys(h),function(d){var e=Array(b+2).join(" "),e=d+e,d=c.isFunction(h[d])?h[d]:a[h[d]];g[e]=c.bind(d,a)});e=c.extend(e,g)});return e}};c.extend(k,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
},getBehaviorClass:function(a,b){return a.behaviorClass?a.behaviorClass:c.isFunction(k.behaviorsLookup)?k.behaviorsLookup.apply(this,arguments)[b]:k.behaviorsLookup[b]},parseBehaviors:function(a,b){return c.chain(b).map(function(b,d){var f=new (k.getBehaviorClass(b,d))(b,a),g=k.parseBehaviors(a,c.result(f,"behaviors"));return[f].concat(g)}).flatten().value()},wrap:function(a,b,d){c.each(d,function(d){a[d]=c.partial(q[d],a[d],b)})}});d.Behaviors=k;d.AppRouter=f.Router.extend({constructor:function(a){f.Router.apply(this,
arguments);this.options=a||{};var b=this.getOption("appRoutes"),c=this._getController();this.processAppRoutes(c,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){var d=c.invert(this.getOption("appRoutes"))[a];if(c.isFunction(this.onRoute))this.onRoute(a,d,b)},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},
_addAppRoute:function(a,b,d){var f=a[d];f||i('Method "'+d+'" was not found on the controller');this.route(b,d,c.bind(f,a))},getOption:d.proxyGetOption});d.Application=function(a){this._initializeRegions(a);this._initCallbacks=new d.Callbacks;this.submodules={};c.extend(this,a);this._initChannel()};c.extend(d.Application.prototype,f.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("before:start",a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var c=d.Module.getClass(b),f=j.call(arguments);
f.unshift(this);return c.create.apply(c,f)},getRegionManager:function(){return new d.RegionManager},_initializeRegions:function(a){var b=c.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var e=d.getOption(a,"regions");c.isFunction(e)&&(e=e.call(this,a));c.extend(b,e);this.addRegions(b);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this.listenTo(this._regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",
a)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this._regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this._regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})},_initChannel:function(){this.channelName=c.result(this,"channelName")||"global";this.channel=c.result(this,"channel")||v.radio.channel(this.channelName);
this.vent=c.result(this,"vent")||this.channel.vent;this.commands=c.result(this,"commands")||this.channel.commands;this.reqres=c.result(this,"reqres")||this.channel.reqres},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Application.extend=d.extend;d.Module=function(a,b,d){this.moduleName=a;this.options=c.extend({},this.options,d);this.initialize=d.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;c.isFunction(this.initialize)&&
this.initialize(a,b,this.options)};d.Module.extend=d.extend;c.extend(d.Module.prototype,f.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&
(this._isInitialized=!1,this.triggerMethod("before:stop"),c.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){if(a){var e=c.flatten([this,this.app,f,d,f.$,c,b]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new d.Callbacks;this._finalizerCallbacks=
new d.Callbacks},triggerMethod:d.triggerMethod});c.extend(d.Module,{create:function(a,b,d){var f=a,g=j.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=d;c.each(b,function(b,c){var i=f;f=this._getModule(i,b,a,d);this._addModuleDefinition(i,f,h[c],g)},this);return f},_getModule:function(a,b,d,f){var g=c.extend({},f),f=this.getClass(f),h=a[b];h||(h=new f(b,d,g),a[b]=h,a.submodules[b]=h);return h},getClass:function(a){var b=d.Module;return!a?b:a.prototype instanceof b?a:a.moduleClass||
b},_addModuleDefinition:function(a,b,c,d){var f=this._getDefine(c),c=this._getStartWithParent(c,b);f&&b.addDefinition(f,d);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,b){var e;return c.isFunction(a)&&a.prototype instanceof d.Module?(e=b.constructor.prototype.startWithParent,c.isUndefined(e)?!0:e):c.isObject(a)?(e=a.startWithParent,c.isUndefined(e)?!0:e):!0},_getDefine:function(a){return c.isFunction(a)&&!(a.prototype instanceof d.Module)?a:c.isObject(a)?a.define:null},_addStartWithParent:function(a,
b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});this.Marionette=d});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:marionette', location = '/inline-issue-create/lib/backbone.marionette/backbone.marionette-amd.js' */
define("jira/inline-issue-create/lib/marionette",["jquery","jira/inline-issue-create/lib/backbone","atlassian/libs/underscore-1.5.2","atlassian/libs/factories/marionette-2.1.0"],function(e,g,b,d){var f=d(b,g);var c={unwrapTemplate:function a(){var h=this.$el.children();if(h.length>1){AJS.warn("[IIC] Unwrapping template with more than one child - some content will be lost")}var i=e(h.get(0));if(this.$el.parent().length){this.$el.replaceWith(i);this.setElement(i)}else{this.setElement(i)}}};b.extend(f.ItemView.prototype,c);b.extend(f.CompositeView.prototype,c);b.extend(f.CollectionView.prototype,c);b.extend(f.LayoutView.prototype,c);return f});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:placeholder', location = '/inline-issue-create/lib/jquery-placeholder.js' */
/*! MIT License - https://github.com/mathiasbynens/jquery-placeholder/blob/master/LICENSE-MIT.txt */
/*! http://mths.be/placeholder v2.0.8 by @mathias */
(function(i,k,f){var b=Object.prototype.toString.call(i.operamini)=="[object OperaMini]";var a="placeholder" in k.createElement("input")&&!b;var g="placeholder" in k.createElement("textarea")&&!b;var l=f.fn;var e=f.valHooks;var c=f.propHooks;var n;var m;if(a&&g){m=l.placeholder=function(){return this};m.input=m.textarea=true}else{m=l.placeholder=function(){var p=this;p.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":d,"blur.placeholder":h}).data("placeholder-enabled",true).trigger("blur.placeholder");return p};m.input=a;m.textarea=g;n={get:function(q){var p=f(q);var r=p.data("placeholder-password");if(r){return r[0].value}return p.data("placeholder-enabled")&&p.hasClass("placeholder")?"":q.value},set:function(q,s){var p=f(q);var r=p.data("placeholder-password");if(r){return r[0].value=s}if(!p.data("placeholder-enabled")){return q.value=s}if(s==""){q.value=s;if(q!=o()){h.call(q)}}else{if(p.hasClass("placeholder")){d.call(q,true,s)||(q.value=s)}else{q.value=s}}return p}};if(!a){e.input=n;c.value=n}if(!g){e.textarea=n;c.value=n}f(function(){f(k).delegate("form","submit.placeholder",function(){var p=f(".placeholder",this).each(d);setTimeout(function(){p.each(h)},10)})});f(i).bind("beforeunload.placeholder",function(){f(".placeholder").each(function(){this.value=""})})}function j(q){var p={};var r=/^jQuery\d+$/;f.each(q.attributes,function(t,s){if(s.specified&&!r.test(s.name)){p[s.name]=s.value}});return p}function d(q,r){var p=this;var s=f(p);if(p.value==s.attr("placeholder")&&s.hasClass("placeholder")){if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(q===true){return s[0].value=r}s.focus()}else{p.value="";s.removeClass("placeholder");p==o()&&p.select()}}}function h(){var t;var p=this;var s=f(p);var r=this.id;if(p.value==""){if(p.type=="password"){if(!s.data("placeholder-textinput")){try{t=s.clone().attr({type:"text"})}catch(q){t=f("<input>").attr(f.extend(j(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":s,"placeholder-id":r}).bind("focus.placeholder",d);s.data({"placeholder-textinput":t,"placeholder-id":r}).before(t)}s=s.removeAttr("id").hide().prev().attr("id",r).show()}s.addClass("placeholder");s[0].value=s.attr("placeholder")}else{s.removeClass("placeholder")}}function o(){try{return k.activeElement}catch(p){}}}(this,document,jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:util', location = '/inline-issue-create/util/util.js' */
define("jira/inline-issue-create/util",["jquery"],function(g){var j=(document.body||document.documentElement).style;var d=["oAnimationEnd","MSAnimationEnd","mozAnimationEnd","webkitAnimationEnd","animationend"];var k;return{cssAnimationsSupport:j.transition!==undefined||j.WebkitTransition!==undefined||j.MozTransition!==undefined||j.MsTransition!==undefined||j.OTransition!==undefined,addClassAndRemoveOnAnimationEnd:function c(o,n,l){var m;o=g(o);function p(){for(m=0;m<d.length;m++){o.off(d[m],p)}o.removeClass(n)}if(this.cssAnimationsSupport){for(m=0;m<d.length;m++){o.on(d[m],p)}}else{setTimeout(function(){o.removeClass(n)},l||1000)}o.addClass(n)},scrollElementToView:function h(q,l){var m=q[0].getBoundingClientRect();var p=l[0].getBoundingClientRect();var o=q.scrollTop();var n=0;if(p.top<m.top){n=p.top-m.top}else{if(m.bottom<p.bottom){n=p.bottom-m.bottom}}if(n!==0){q.scrollTop(o+n)}},keyCode:{ENTER:13,ESC:27},after:function b(m,o,l){if(!_.isFunction(l)){throw"Body is not a function"}m[o]=_.wrap(m[o],function n(q){var r=Array.prototype.slice.call(arguments,1);var p=q.apply(m,r);l.apply(this,_.union([p],r));return p})},error:function i(m){if(console&&console.error){var l=Array.prototype.slice.call(arguments,1);if(_.isString(l[0])){l[0]="[IIC]"+l[0]}console.error.apply(console,l)}},debug:function a(m){if(this.shouldDisplay(m)){if(console&&console.debug){var l=Array.prototype.slice.call(arguments,1);if(_.isString(l[0])){l[0]="[IIC]"+l[0]}console.debug.apply(console,l)}}},trace:function f(m){if(this.shouldDisplay(m)){if(console&&console.debug){var l=Array.prototype.slice.call(arguments,1);if(_.isString(l[0])){l[0]="[IIC]"+l[0]}console.debug.apply(console,l)}}},shouldDisplay:function(l){if(k==="all"||l===k){return true}return false},showLogsFor:function e(l){k=l}}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/custom-form-container-factory.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jquery","underscore"],function(b,a){var c=function(){var f=JIRA.Forms.Container;return f.extend({lazyInit:function e(){var g=this.options.call(this);this.prefilledValues=g.prefilledValues;this.prefilledValues.fieldsToRetain=a.keys(g.prefilledValues);this.prefilledValues=b.param(g.prefilledValues);this.options=function h(){return g};return this._super()},render:function d(){var g=this,h=b.Deferred();this.lazyInit();if(a.isFunction(g.model.markFieldAsDirty)){Object.keys(this.options().prefilledValues).forEach(function(k){g.model.markFieldAsDirty(k)})}g.model.getUseConfigurableForm().done(function j(k){if(k===true){g.configurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element]);g.$element.append(m)})}else{g.unconfigurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element,m]);g.$element.append(m)})}}).fail(function i(){h.resolveWith(g,[g.$element])});return h.promise()}})};return{build:c}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog-init-form.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/init-form",["underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(b,a){return function(t,m){if(!b.isObject(m)){throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.")}var k=JIRA.Forms.CreateIssueModel;var p=JIRA.Forms.ConfigurableCreateIssueForm;var l=JIRA.Forms.UnconfigurableCreateIssueForm;var e=JIRA.Forms.CreateIssueError;var d=JIRA.applyErrorsToForm;var i=JIRA.applyErrorMessageToForm;var s;m.done(function n(u){s=u;s.prefilledFields=s.prefilledFields||{};s.errors=s.errors||{};s.errorMessages=s.errorMessages||{}}).fail(function j(){s={prefilledFields:{},errors:{},errorMessages:{}}});var f=a.build();var c=new f(function q(){var x={title:"Create issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:undefined};var u=new k({projectId:undefined,issueType:undefined});var w=new p({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});var v=new l({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});return{globalEventNamespaces:x.globalEventNamespaces,model:u,errorHandler:new e(),configurableForm:w,unconfigurableForm:v,prefilledValues:s.prefilledFields}});var o=c.asDialog({windowTitle:"Create issue",id:"prefillable-create-issue-dialog"});o.options.delayShowUntil=function h(){return m};c.asDialog=function g(){return c.dialog};o.onContentReady(function r(){if(b.keys(s.errors).length){s.errorMessages.unshift("Please fix the fields marked below.");d(c.$element,s.errors)}if(s.errorMessages.length){i(c.$element,s.errorMessages.join("<br/>"))}});t.resolve(c)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog",["wrm/require","jquery","underscore","jira/inline-issue-create/lib/marionette","jira/loading/loading","jira/flag","jira/inline-issue-create/prefillable-create-issue-dialog/init-form"],function(e,d,j,g,h,l,f){var a=AJS.dim;var i=AJS.undim;var c=function(){a();h.showLoadingIndicator()};var b=function(){i();h.hideLoadingIndicator()};var k=function k(n,o){var m=new d.Deferred();if(o){c()}e(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],f.bind(undefined,m,n)).fail(function(){if(o){b()}l.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")});return m.promise()};return{createPrefillableCreateIssueForm:k}});define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jquery","underscore"],function(b,a){var d=JIRA.Forms.Container;var c=function(){return d.extend({lazyInit:function f(){var g=this.options.call(this);this.prefilledValues=g.prefilledValues;this.prefilledValues.fieldsToRetain=a.keys(g.prefilledValues);this.prefilledValues=b.param(g.prefilledValues);this.options=function h(){return g};return this._super()},render:function e(){var g=this,h=b.Deferred();this.lazyInit();if(a.isFunction(g.model.markFieldAsDirty)){Object.keys(this.options().prefilledValues).forEach(function(k){g.model.markFieldAsDirty(k)})}g.model.getUseConfigurableForm().done(function j(k){if(k===true){g.configurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element]);g.$element.append(m)})}else{g.unconfigurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element,m]);g.$element.append(m)})}}).fail(function i(){h.resolveWith(g,[g.$element])});return h.promise()}})};return{build:c}});define("jira/inline-issue-create/prefillable-create-issue-dialog/ondone",["underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(d,c){var g=JIRA.Forms.CreateIssueModel;var h=JIRA.Forms.ConfigurableCreateIssueForm;var a=JIRA.Forms.UnconfigurableCreateIssueForm;var f=JIRA.Forms.CreateIssueError;var b=JIRA.applyErrorsToForm;var e=JIRA.applyErrorMessageToForm;return function(s,k){if(!d.isObject(k)){throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.")}var m;k.done(function p(u){m=u;m.prefilledFields=m.prefilledFields||{};m.errors=m.errors||{};m.errorMessages=m.errorMessages||{}}).fail(function j(){m={prefilledFields:{},errors:{},errorMessages:{}}});var n=c.build();var i=new n(function r(){var x={title:"Create issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:undefined};var u=new g({projectId:undefined,issueType:undefined});var w=new h({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});var v=new a({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});return{globalEventNamespaces:x.globalEventNamespaces,model:u,errorHandler:new f(),configurableForm:w,unconfigurableForm:v,prefilledValues:m.prefilledFields}});var o=i.asDialog({windowTitle:"Create issue",id:"prefillable-create-issue-dialog"});o.options.delayShowUntil=function l(){return k};i.asDialog=function q(){return i.dialog};o.onContentReady(function t(){if(d.keys(m.errors).length){m.errorMessages.unshift("Please fix the fields marked below.");b(i.$element,m.errors)}if(m.errorMessages.length){e(i.$element,m.errorMessages.join("<br/>"))}});s.resolve(i)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.soy' */
// This file was automatically generated from inline-issue-create-widget.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.InlineIssueCreate.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.InlineIssueCreate == 'undefined') { JIRA.Templates.InlineIssueCreate = {}; }


JIRA.Templates.InlineIssueCreate.trigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="iic' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + ((opt_data.isAgility) ? ' agility-backlog-iic' : '') + '"><div class="iic-trigger"><button type="button">' + soy.$$escapeHtml('Create issue') + '</button></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.trigger.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.trigger';
}


JIRA.Templates.InlineIssueCreate.widget = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="iic-widget' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '"><form action="#" method="POST" class="iic-widget__form aui"><div class="iic-widget__issue-type-selector-container"></div><div class=' + ((opt_data.isAgility) ? '"iic-widget__summary-container"' : '') + '><textarea name="summary" rows="1" cols="50" maxlength="255" class="iic-widget__summary" placeholder="' + soy.$$escapeHtml('What needs to be done?') + '">' + ((opt_data.summary) ? soy.$$escapeHtml(opt_data.summary) : '') + '</textarea>' + ((opt_data.isAgility) ? '<div class="iic-widget__create-container"><button type="button" class="aui-button aui-button-primary iic-widget__create" type="button">' + soy.$$escapeHtml('Create') + '</button></div><div class="iic-widget__description-container iic-widget__more iic-widget__cancel" style="display:none;"></div>' : '<div class="iic-widget__footer"><div class="iic-widget__description-container"></div><button type="button" class="aui-button aui-button-subtle iic-widget__more" title="' + soy.$$escapeHtml('Open create dialog') + '"><span class="aui-icon aui-icon-small aui-iconfont-more">' + soy.$$escapeHtml('More') + '</span></button><button type="button" class="aui-button aui-button-link iic-widget__cancel">' + soy.$$escapeHtml('Cancel') + '</button><div class="iic-widget__create" style="display:none;"></div></div>') + '</div></form></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.widget.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.widget';
}


JIRA.Templates.InlineIssueCreate.issueTypeSelector = function(opt_data, opt_ignored) {
  return '<div class="iic-widget__issue-type-selector">' + ((opt_data.isAgility) ? '<div class="iic-widget__issue-type-container">' + ((! opt_data.isLocked) ? '<img src="' + soy.$$escapeHtml(opt_data.issueTypeIconUrl) + '"/>' : '<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs="/>') + '</div><div class="iic-widget__issue-type-selector__trigger iic-widget__issue-type-selector__dropdown aui-list-truncate" style="display:none;"></div>' : '<button type="button" class="iic-widget__issue-type-selector__trigger aui-dropdown2-trigger" aria-owns="iic-issue-type-dropdown-' + soy.$$escapeHtml(opt_data.widgetId) + '" aria-haspopup="true">' + ((! opt_data.isLocked) ? '<img src="' + soy.$$escapeHtml(opt_data.issueTypeIconUrl) + '" width="16" height="16"/>' : '<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs=" width="16" height="16"/>') + '</button><div id="iic-issue-type-dropdown-' + soy.$$escapeHtml(opt_data.widgetId) + '" data-aui-alignment="top left" class="aui-dropdown2 aui-style-default iic-widget__issue-type-selector__dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"></ul></div></div>') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.issueTypeSelector.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.issueTypeSelector';
}


JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem = function(opt_data, opt_ignored) {
  return '<li><a href="#" class="aui-icon-container" data-id="' + soy.$$escapeHtml(opt_data.id) + '" style="background-image: url(\'' + soy.$$escapeHtml(opt_data.iconUrl) + '\');">' + soy.$$escapeHtml(opt_data.name) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem';
}


JIRA.Templates.InlineIssueCreate.description = function(opt_data, opt_ignored) {
  return '<div class="iic-widget__description' + ((! opt_data.issueTypeName) ? ' iic-widget__description_invisible' : '') + '">' + soy.$$escapeHtml('New') + ' <span class="iic-widget__description__selected-issue-type-name">' + ((opt_data.issueTypeName) ? soy.$$escapeHtml(opt_data.issueTypeName) : '') + '</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.description.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.description';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/possibleValues.js' */
define("jira/inline-issue-create/entities/possible-values",["backbone","jira/inline-issue-create/lib/brace"],function(j,g){return g.Collection.extend({url:function b(){var l=_.map(this.jqls,function(m){return"query="+encodeURIComponent(m)+"&"});return AJS.contextPath()+"/rest/inline-create/1.0/context/possibleValues/"+this.getEntityName()+"?".concat.apply("?",l)},getEntityName:undefined,initialize:function d(l,m){this._initializeState(l,m)},_initializeState:function i(l,m){if(m&&m.jqls){this.jqls=m.jqls}else{this.jqls=undefined}this.fetching=false;this.initialized=false},parse:function c(l){return l.values},setJQLs:function e(l){if(_.isEqual(this.jqls,l)){return}this.jqls=l;this.fetch({reset:true})},reset:function f(){this.fetching=false;this.initialized=true;return j.Collection.prototype.reset.apply(this,arguments)},fetch:function a(m){var o=this;function l(){o.fetching=false;o.initialized=true;o.trigger("fetch:finished")}m=m||{};if(m.success){m.success=_.wrap(m.success,function n(p){l();return p.apply(o,Array.prototype.slice.call(arguments,1))})}else{m.success=l}this.trigger("fetch:started");this.fetching=true;return j.Collection.prototype.fetch.call(this,m)},isInitialized:function h(){return this.initialized},isFetching:function k(){return this.fetching}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueType.js' */
define("jira/inline-issue-create/entities/issue-type",["jira/inline-issue-create/lib/brace"],function(a){var b=a.Model.extend({namedAttributes:{id:"string",name:"string",description:"string",iconUrl:"string",subtask:"boolean"}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueTypes.js' */
define("jira/inline-issue-create/entities/issue-types",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/issue-type"],function(a,b){return a.extend({model:b,getEntityName:function(){return"issuetype"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/project.js' */
define("jira/inline-issue-create/entities/project",["jira/inline-issue-create/lib/brace"],function(a){return a.Model.extend({namedAttributes:{id:"number",type:"string"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/projects.js' */
define("jira/inline-issue-create/entities/projects",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/project"],function(b,c){return b.extend({model:c,comparator:function a(d){return d.getId()},getEntityName:function(){return"project"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineIssue.js' */
define("jira/inline-issue-create/entities/inline-issue",["jquery","underscore","jira/inline-issue-create/lib/brace"],function(f,b,c){return c.Model.extend({initialize:function a(){this._isSaving=false},save:function e(){var g=this;var h=f.ajax(AJS.contextPath()+"/rest/inline-create/1.0/issue",{data:JSON.stringify(this.toJSON()),contentType:"application/json",type:"POST"});this._isSaving=true;return h.always(function i(){g._isSaving=false})},isSaving:function d(){return this._isSaving}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineBootstrap.js' */
define("jira/inline-issue-create/entities/inline-bootstrap",["backbone","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/issue-types"],function(l,i,h,e){return i.Model.extend({issueTypesCollectionType:e,projectsCollectionType:h,namedAttributes:{hasCreateIssuePermission:"boolean",hasScheduleIssuePermission:"boolean"},initialize:function f(){this.issueTypes=new this.issueTypesCollectionType();this.projects=new this.projectsCollectionType()},url:function c(){var n=_.map(this.jqls,function(o){return"query="+encodeURIComponent(o)+"&"});return AJS.contextPath()+"/rest/inline-create/1.0/context/bootstrap"+"?".concat.apply("?",n)},_initializeState:function k(n,o){if(o&&o.jqls){this.jqls=o.jqls}else{this.jqls=undefined}this.fetching=false;this.initialized=false},setJQLs:function b(n){if(_.isEqual(this.jqls,n)){return}this.jqls=n;this.fetch({reset:true})},parse:function d(o){var n=this;var q=_.map(o.issueTypes.values,function(r){return _.pick(r,_.keys(n.issueTypes.model.prototype.namedAttributes))});this.issueTypes.reset(q);var p=_.map(o.projects.values,function(r){return _.pick(r,_.keys(n.projects.model.prototype.namedAttributes))});this.projects.reset(p);return _.pick(o,"hasCreateIssuePermission","hasScheduleIssuePermission")},fetch:function a(p){var o=this;function n(){o.fetching=false;o.initialized=true;JIRA.trace("inline.create.bootstrap.fetched")}p=p||{};if(p.success){p.success=_.wrap(p.success,function q(r){n();return r.apply(o,Array.prototype.slice.call(arguments,1))})}else{p.success=n}this.fetching=true;JIRA.trace("inline.create.bootstrap.fetching");return l.Model.prototype.fetch.call(this,p)},isInitialized:function j(){return this.initialized},isFetching:function m(){return this.fetching},fireWhenInitialized:function g(n){if(this.isInitialized()&&(!this.isFetching())){n()}else{this.listenToOnce(this,"sync",n)}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/description.js' */
define("jira/inline-issue-create/views/description",["jquery","jira/inline-issue-create/lib/marionette"],function(d,f){var a=f.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name"},modelEvents:{"change:selectedIssueType":function c(){var g=(this.model.getSelectedIssueType()&&this.model.getSelectedIssueType().getName())||"";if(g){this.$el.removeClass("iic-widget__description_invisible");this.ui.selectedIssueTypeName.text(g)}else{this.$el.addClass("iic-widget__description_invisible")}}},serializeData:function b(){var g={};if(this.model.getSelectedIssueType()){g=this.model.getSelectedIssueType().toJSON()}return{issueTypeName:g.name}},onRender:function e(){this.unwrapTemplate()}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdown.js' */
define("jira/inline-issue-create/views/issue-type-dropdown",["jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/views/issue-type-dropdown-item"],function(b,j,g){var a=j.CompositeView.extend({childView:g,childViewOptions:function k(n,m){return{model:n,dropdownModel:this.model}},template:JIRA.Templates.InlineIssueCreate.issueTypeSelector,childViewContainer:".aui-list-truncate",ui:{trigger:".iic-widget__issue-type-selector__trigger",issueTypeIcon:".iic-widget__issue-type-selector__trigger img",issueTypeDropdown:".iic-widget__issue-type-selector__dropdown"},modelEvents:{"change:selectedIssueType":function c(){if(this.model.getSelectedIssueType()){this.ui.issueTypeIcon.attr("src",this.model.getSelectedIssueType().getIconUrl())}},"change:lockState":function f(n,o){this.render();if(o===this.model.constants.STATE_LOCK_SENDING){this.ui.trigger.attr("aria-disabled",true)}else{this.ui.trigger.attr("aria-disabled",false)}}},initialize:function d(){this.isDropdownShown=false;_.bindAll(this,"onDropdownShow")},serializeData:function i(){var m={};if(this.model.getSelectedIssueType()){m=this.model.getSelectedIssueType().toJSON()}return{widgetId:this.options.widgetId,isLocked:this.model.getLockState()!==this.model.constants.STATE_LOCK_UNLOCKED,issueTypeIconUrl:m.iconUrl,isAgility:this.options.isAgility}},onRender:function l(){this.unwrapTemplate();this.ui.issueTypeDropdown.on("aui-dropdown2-show",this.onDropdownShow)},onDropdownShow:function e(){var s=this.ui.issueTypeDropdown;s.appendTo(this.$el);var m=this.ui.issueTypeIcon.offset();var r=this.ui.issueTypeIcon.position();var n=this.ui.issueTypeIcon.outerHeight();var o=s.height();var q=b("body").outerHeight(true)<m.top+n+o;s.css({left:r.left,top:(q?r.top-o:r.top+n)+"px"});var p=s.find("li a");this.trigger("dropdownOpened",{numIssueTypes:p.length})},onChildviewSelected:function h(m){this.trigger("issueTypeSelected",m.model)}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdownItem.js' */
define("jira/inline-issue-create/views/issue-type-dropdown-item",["jquery","jira/inline-issue-create/lib/marionette"],function(c,f){var b=f.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem,initialize:function a(g){this.dropdownModel=g.dropdownModel},events:{"click a":function e(g){this.trigger("selected")}},onRender:function d(){this.unwrapTemplate()}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/defaultTrigger.js' */
define("jira/inline-issue-create/views/default-trigger",["jquery","jira/inline-issue-create/lib/marionette"],function(e,h){var d=h.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.trigger,ui:{trigger:" .iic-trigger"},events:{"click @ui.trigger":function g(i){i.preventDefault();this.trigger("selected")}},initialize:function a(i){this.widget=i.widget;this.listenTo(this.widget,"activated",this.hide);this.listenTo(this.widget,"deactivated",this.show)},onRender:function f(){this.unwrapTemplate();if(this.widget.model.getState()===this.widget.model.constants.STATE_ACTIVE){this.hide()}},hide:function c(){this.ui.trigger.addClass("iic-trigger_hidden")},show:function b(){this.ui.trigger.removeClass("iic-trigger_hidden")}});return d});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/widget.js' */
define("jira/inline-issue-create/entities/widget-constants",[],function(){var a={STATE_CLOSED:"STATE_CLOSED",STATE_ACTIVE:"STATE_ACTIVE",STATE_LOCK_TEMP_INACTIVE:"STATE_LOCK_TEMP_INACTIVE",STATE_LOCK_SENDING:"STATE_LOCK_SENDING",STATE_LOCK_PERM_INACTIVE:"STATE_LOCK_PERM_INACTIVE",STATE_LOCK_UNLOCKED:"STATE_LOCK_UNLOCKED"};Object.freeze(a);return a});define("jira/inline-issue-create/entities/widget",["jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/issue-type","jira/inline-issue-create/entities/widget-constants"],function(f,c,j,e){var a="iic.slectedIssueType";var k=e;var h=f.Model.extend({constants:k,defaults:{state:k.STATE_CLOSED,lockState:k.STATE_LOCK_UNLOCKED},namedAttributes:{summary:"",selectedIssueType:j,issueTypes:c,state:"",lastState:"",lockState:""},initialize:function d(m){var q;var o;if(!m||!m.selectedIssueType){if(localStorage){q=JSON.parse(localStorage.getItem(a))||{};q=q||{};o=this.getIssueTypes()&&this.getIssueTypes().find(function l(r){return r.getId()===q.id})}if(o){this.setSelectedIssueType(o)}else{if(this.getIssueTypes()){this.setSelectedIssueType(this.getIssueTypes().at(0))}}}this.on("change:selectedIssueType",function p(s){var r=this.getSelectedIssueType();if(r){localStorage.setItem(a,JSON.stringify(r.toJSON()))}});this.listenTo(this.getIssueTypes(),"reset",function n(){var r=this.getSelectedIssueType()&&this.getSelectedIssueType().getId();var s;if(!r){r=q.id}if(r!==undefined){s=this.getIssueTypes().get(r);if(s){this.setSelectedIssueType(s)}else{this.setSelectedIssueType(this.getIssueTypes().at(0))}}else{this.setSelectedIssueType(this.getIssueTypes().at(0))}})},changeState:function g(l){if(l===this.getState()){return}this.setLastState(this.getState());this.setState(l)},setSelectedIssueTypeIfAvailable:function i(m){if(m){var l=this.getIssueTypes().get(m.getId());if(l){this.setSelectedIssueType(l)}}},toIssueData:function b(){return{summary:this.getSummary(),issueTypeId:this.getSelectedIssueType()&&this.getSelectedIssueType().getId()}}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/widget.js' */
define("jira/inline-issue-create/views/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util"],function(j,A,n,a){var i=500;var b=n.LayoutView.extend({template:JIRA.Templates.InlineIssueCreate.widget,regions:{issueTypeSelector:".iic-widget__issue-type-selector-container",description:".iic-widget__description-container"},ui:{summary:".iic-widget__summary",more:".iic-widget__more",cancel:".iic-widget__cancel",create:".iic-widget__create",form:".iic-widget__form",withTitle:"[title]"},events:{"input @ui.summary":"onSummaryChange","change @ui.summary":"onSummaryChange","keyup @ui.summary":function(D){var C=this.ui.summary.val();if(C.length>255){this.ui.summary.val(C.substr(0,255))}this.onSummaryChange(D)},"keydown @ui.summary":function r(C){if(C.keyCode===a.keyCode.ENTER){C.preventDefault();this.onSubmit(C)}else{if(C.keyCode===a.keyCode.ESC){this.trigger("deactivate",{reason:"keypress"})}}},"click @ui.cancel":function B(C){C.preventDefault();if(this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING){this.trigger("deactivate",{reason:"cancel"})}},"click @ui.more":function v(C){C.preventDefault();if(this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING){this.trigger("openFullIssueDialog")}},"click @ui.create":function l(C){this.onSubmit(C)}},modelEvents:{"change:summary":function t(){this.ui.summary.val(this.model.getSummary());this.adjustSummarySize()},"change:state":function u(C,D){if(D===this.model.constants.STATE_ACTIVE){this.activate()}else{if(D===this.model.constants.STATE_CLOSED){this.deactivate()}}},"change:lockState":function h(C,D){if(this.ui.summary.prop){if(D===this.model.constants.STATE_LOCK_SENDING){this.ui.summary.prop("disabled",true)}else{this.ui.summary.prop("disabled",false)}}}},initialize:function c(C){this.cssClass=C.cssClass||"";this.listenTo(this.issueTypeSelector,"show",function(){this.listenTo(this.issueTypeSelector.currentView,"issueTypeSelected",function(){this.focusSummary()})});A.bindAll(this,"adjustSummarySize","onBodyClick")},onSubmit:function w(D){var C=this.ui.summary.val();if(C!==""&&C.length<=255){if(this.model.getLockState()===this.model.constants.STATE_LOCK_UNLOCKED){this.ui.summary.blur();this.disableCreate();this.trigger("createIssue")}else{a.addClassAndRemoveOnAnimationEnd(this.$(".issue-type-selector"),"iic-error",i)}}else{a.addClassAndRemoveOnAnimationEnd(this.ui.summary,"iic-error",i)}},onClose:function g(){j(document).off("click.iic",this.onBodyClick)},onBodyClick:function m(C){if(!this.$el.is(C.target)&&this.$el.has(C.target).length===0){if(this.ui.summary.val()===""){this.trigger("deactivate",{reason:"cancel"})}else{if(this.ui.summary.is(":focus")){this.ui.summary.blur()}}}},serializeData:function o(){return{summary:this.model.getSummary(),cssClass:this.cssClass,isAgility:this.options.isAgility}},onRender:function k(){this.unwrapTemplate();this.ui.withTitle.tooltip({aria:true});var D=this;this.ui.summary.on("change cut paste drop keydown input",function C(){A.defer(D.adjustSummarySize)});A.defer(D.adjustSummarySize);this.ui.summary.placeholder();if(this.model.getState()===this.model.constants.STATE_ACTIVE){this.activate()}else{this.deactivate()}},adjustSummarySize:function d(){this.ui.summary.css("height","auto");var D=this.ui.summary.outerHeight();var C=Math.max(D+this.ui.summary.prop("scrollHeight")-this.ui.summary.prop("clientHeight"),D);if(C){this.ui.summary.height(C+"px")}},reset:function y(){this.ui.summary.attr("style","")},hide:function q(){this.$el.addClass("iic-widget_hidden");j(document).off("click.iic",this.onBodyClick)},show:function x(){this.$el.removeClass("iic-widget_hidden");this.adjustSummarySize();var C=this;A.defer(function(){j(document).off("click.iic",C.onBodyClick);j(document).on("click.iic",C.onBodyClick)})},focusSummary:function z(){this.ui.summary.focus()},activate:function f(){this.show();this.trigger("activated")},focus:function s(){this.focusSummary();this.trigger("focused")},deactivate:function e(){this.hide();this.trigger("deactivated")},onSummaryChange:function t(C){this.trigger("summaryChanged",this.ui.summary.val())},enableCreate:function p(){this.ui.create.attr("aria-disabled",false)},disableCreate:function p(){this.ui.create.attr("aria-disabled",true)}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.js' */
define("jira/inline-issue-create/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util","jira/inline-issue-create/entities/widget","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/inline-issue","jira/inline-issue-create/views/widget","jira/inline-issue-create/views/issue-type-dropdown","jira/inline-issue-create/views/description","jira/inline-issue-create/prefillable-create-issue-dialog","jira/inline-issue-create/analytics","jira/analytics/web-client"],function(w,J,C,b,r,H,h,a,y,q,I,m,d,f){function G(K){if(J.isFunction(K.parameter)){K.context[K.fieldName]=new K.parameter(K.defaultOptions)}else{if(J.isObject(K.parameter)){K.context[K.fieldName]=K.parameter}else{if(undefined===K.parameter){K.context[K.fieldName]=new K.defaultConstructor(K.defaultOptions)}}}}var z=C.Controller.extend({initialize:function e(K){this._initializeComponents(K);if(K.jqls){this.setCurrentJQLs(K.jqls)}if(K.container){this.attach(K.container)}this._initializeEvents(K)},_initializeComponents:function E(K){if(J.isFunction(K.issueTypes)){this.issueTypes=new K.issueTypes(undefined,{jqls:K.jqls})}else{if(J.isObject(K.issueTypes)){this.issueTypes=K.issueTypes}else{this.issueTypes=new H(undefined,{jqls:K.jqls})}}if(J.isFunction(K.projects)){this.projects=new K.projects(undefined,{jqls:K.jqls})}else{if(J.isObject(K.projects)){this.projects=K.projects}else{this.projects=new h(undefined,{jqls:K.jqls})}}G({context:this,fieldName:"model",defaultOptions:{issueTypes:this.issueTypes},parameter:K.model,defaultConstructor:r});G({context:this,fieldName:"dropdownView",defaultOptions:{model:this.model,collection:this.issueTypes,widgetId:this.model.cid},parameter:K.dropdownView,defaultConstructor:q});G({context:this,fieldName:"descriptionView",defaultOptions:{model:this.model,widgetId:this.model.cid},parameter:K.descriptionView,defaultConstructor:I});this.view=new y({model:this.model,cssClass:K.cssClass,isAgility:K.isAgility&&K.isAgility()||false});this.analytics=new d({widget:this});this._currentInlineIssue=undefined},_initializeEvents:function F(K){this.listenTo(this.view,"summaryChanged",function M(O){this.model.setSummary(O)});this.listenTo(this.view,"createIssue",this.createIssue);this.listenTo(this.view,"deactivate",this.deactivate);this.listenTo(this.view,"openFullIssueDialog",function N(){this.trigger("openCreateIssueDialog",{reason:"manual"});this.openCreateIssueDialog()});this.listenTo(this.model,"change:state",this.onStateChange);this.listenTo(this.model,"change:lockState",this.onLockStateChange);this.listenTo(this.issueTypes,"reset",this.checkWidgetLocked);this.listenTo(this.projects,"reset",this.checkWidgetLocked);this.on("issueCreated",function L(){this.model.setSummary("")});this.checkWidgetLocked()},render:function u(){this.view.issueTypeSelector.attachView(undefined);this.view.description.attachView(undefined);this.view.render();this.view.issueTypeSelector.show(this.dropdownView);this.view.description.show(this.descriptionView);this.listenTo(this.dropdownView,"issueTypeSelected",function(K){this.model.setSelectedIssueType(K)})},onStateChange:function(K,L){if(L===this.model.constants.STATE_ACTIVE){this.trigger("activated")}else{if(L===this.model.constants.STATE_CLOSED){this.trigger("deactivated")}}},onLockStateChange:function g(K,L){if(L===this.model.constants.STATE_LOCK_PERM_INACTIVE){if(this.model.getState()===this.model.constants.STATE_ACTIVE){this.deactivate()}}},activate:function k(){if(this.model.getLockState()!==this.model.constants.STATE_LOCK_PERM_INACTIVE){this.model.changeState(this.model.constants.STATE_ACTIVE);return true}else{return false}},deactivate:function c(){this.model.changeState(this.model.constants.STATE_CLOSED)},checkWidgetLocked:function x(){if(this.issueTypes.isFetching()||!this.issueTypes.isInitialized()){return this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE)}if(this.projects.isFetching()||!this.projects.isInitialized()){return this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE)}if(this._currentInlineIssue&&this._currentInlineIssue.isSaving()){return this.model.setLockState(this.model.constants.STATE_LOCK_SENDING)}if(!this.issueTypes.length){return this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)}if(this.projects.length!==1){return this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)}this.model.setLockState(this.model.constants.STATE_LOCK_UNLOCKED)},focus:function D(){this.view.focus()},reset:function A(){this.model.setSummary("");this.view.reset()},attach:function p(K){var L=w(K);L.append(this.view.el)},setCurrentJQLs:function s(K){this.jqls=K},setSummary:function B(K){this.model.setSummary(K)},getSummary:function n(){return this.model.getSummary()},setSelectedIssueTypeIfAvailable:function j(K){this.model.setSelectedIssueTypeIfAvailable(K)},getSelectedIssueType:function t(){return this.model.getSelectedIssueType()},setOverrides:function o(K){this.overrides=K},createIssue:function v(){var K=this;var O={summary:this.model.getSummary(),contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType().getId(),overrides:J.clone(this.overrides)};this.trigger("beforeIssueCreated",K,O);this._currentInlineIssue=new a(O);this._currentInlineIssue.save().done(function N(P){K.trigger("issueCreated",P.issue,P.prefilledFields,K,{source:"inline"});JIRA.trace("inline.create.issue.created");K.fireIssueCreatedTrackEvent(K,P)}).fail(function L(P){var T=new jQuery.Deferred();K.openCreateIssueDialog(T);try{var S=JSON.parse(P.responseText);T.resolve({errors:S.errors,errorMessages:S.generalErrors,prefilledFields:S.prefilledFields})}catch(R){b.error(K,"Could not parse response: "+R,P);var Q="Unfortunately, there is an internal communication error, so you must use the full dialog to create the issue. Please contact your administrator if this error keeps appearing.";T.resolve({errors:{},errorMessages:[Q],prefilledFields:{}})}K.trigger("openCreateIssueDialog",{reason:"createFailed"});K.view.enableCreate()}).always(function M(){K.checkWidgetLocked()});this.checkWidgetLocked()},fireIssueCreatedTrackEvent:function l(K,N){if(f&&typeof GH!=="undefined"&&GH.RapidBoard&&GH.RapidBoard.State){var M=N.issue.issueType;var O=N.issue.issueId;var L={objectType:"issue",objectId:O,containerType:GH.RapidViewConfig.currentData.data.locationType,attributes:{issueTypeId:M,boardId:GH.RapidBoard.State.getRapidViewId(),boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectType:"software"},action:"created",actionSubject:"issue",actionSubjectId:O,source:"backlogScreen"};if(L.containerType==="project"&&(JIRA.API&&JIRA.API.Projects)){L.containerId=JIRA.API.Projects.getCurrentProjectId()}f.sendTrackEvent(L)}},openCreateIssueDialog:function i(O){var K=this;var L=this.model.toIssueData();if(this.projects.size()===1){L.project=this.projects.at(0).toJSON()}var M={summary:L.summary,contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType()?this.model.getSelectedIssueType().getId():undefined,overrides:J.clone(this.overrides)};this.trigger("beforeIssueCreated",K,M);if(!O){O=this._resolveInlineContext(M,K)}var N=m.createPrefillableCreateIssueForm(O.promise(),true);return N.pipe(function(R){var Q=R.asDialog();function P(T,S){K.trigger("issueCreated",S,S.fields,K,{source:"dialog"});JIRA.trace("inline.create.issue.created")}R.bind("initialized",function(){this.unconfigurableForm.bind("issueCreated",P);this.configurableForm.bind("issueCreated",P)});Q.show();return Q})},_resolveInlineContext:function(N,K){var O=new jQuery.Deferred();var P=w.ajax(AJS.contextPath()+"/rest/inline-create/1.0/context/resolve",{data:JSON.stringify(N),contentType:"application/json",type:"POST"});P.done(function L(Q){O.resolve({prefilledFields:Q.createIssueInput})}).fail(function M(){O.resolve({prefilledFields:{summary:N.summary?N.summary:"",issuetype:K.model.getSelectedIssueType()?K.model.getSelectedIssueType().getId():undefined}})});return O}});return z});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-analytics.js' */
define("jira/inline-issue-create/analytics",["jira/inline-issue-create/lib/marionette"],function(f){return f.Controller.extend({initialize:function e(j){this.loadTimestamp=new Date().getTime();var k=j.widget;this.widgetId=k.model.cid.substring(1);this.projects=k.projects;this.listenTo(k,"issueCreated",this.onIssueCreated);this.listenTo(k,"openCreateIssueDialog",this.onOpenCreateIssueDialog);this.listenTo(k,"activated",this.onActivated);this.listenTo(k,"deactivated",this.onDeactivated);this.listenTo(k,"dropdownOpened",this.onDropdownOpened);this.listenTo(k,"issueTypeSelected",this.onIssueTypeSelected)},triggerAnalytics:function d(l,n){var j="";var m="";if(this.projects&&this.projects.size()>0){var o=this.projects.first();j=o.get("id");m=o.get("type")}var k=_.defaults({},n,{instance:this.widgetId,timestarted:this.loadTimestamp,projectId:j,projectType:m});AJS.trigger("analyticsEvent",{name:"jira.inlinecreate."+l,data:k})},onOpenCreateIssueDialog:function i(j){this.triggerAnalytics("openDialog",{reason:j.reason})},onIssueCreated:function a(j,l,m,k){if(k.source==="inline"){this.triggerAnalytics("issueCreatedInline")}else{this.triggerAnalytics("issueCreatedDialog")}},onDeactivated:function g(){this.triggerAnalytics("deactivated")},onActivated:function h(){this.triggerAnalytics("activated")},onDropdownOpened:function c(j){this.triggerAnalytics("dropdown.opened",{numIssueTypes:j.numIssueTypes})},onIssueTypeSelected:function b(){this.triggerAnalytics("dropdown.issueTypeSelected")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget-group.js' */
define("jira/inline-issue-create/widget-group",["jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/widget","jira/inline-issue-create/entities/inline-bootstrap"],function WidgetGroup(e,h,j,c){var d=h.Controller.extend({initialize:function f(k){this.TriggerView=k.TriggerView;this.Widget=j;this.widgets={};this.currentJQLs=undefined;this.createdCallback=k.createdCallback;this.activeWidget=undefined;this.inlineBootstrap=k.inlineBootstrap||new c();this.widgetOptions=_.defaults(k.widgetOptions||{},{issueTypes:this.inlineBootstrap.issueTypes,projects:this.inlineBootstrap.projects,isAgility:function(){return false}})},getWidget:function a(k){if(!this.widgets[k]){this.widgets[k]=this._createNewWidget(k)}return this.widgets[k]},setCurrentJqls:function i(k){this.currentJQLs=k;_.each(this.widgets,function l(m){m.widget.setCurrentJQLs(k)});this.inlineBootstrap.setJQLs(k)},activateWidget:function b(m){if(this.activeWidget===m){m.focus();return}var n=this.activeWidget;this.activeWidget=undefined;_.each(this.widgets,function l(o){if(o!==m){o.widget.deactivate()}});var k=m.activate();if(k){m.focus();this.activeWidget=m;this.trigger("widget:activated",m,n);if(n){m.setSummary(n.getSummary());m.setSelectedIssueTypeIfAvailable(n.getSelectedIssueType());n.reset()}}return k},_createNewWidget:function g(p){var m=this;var o=new this.Widget(this.widgetOptions);o.on("deactivated",function k(){if(m.activeWidget===o){m.activeWidget=undefined;o.reset()}});if(this.createdCallback){this.createdCallback(o,p)}if(this.currentJQLs){o.setCurrentJQLs(this.currentJQLs)}var l=new m.TriggerView({widget:o});l.on("selected",function(){m.activateWidget(o)});return{widget:o,trigger:l,render:function n(q){l.render();q.append(l.$el);o.attach(l.$el);o.render();m.trigger("widget:rendered",o,l,q)}}}});return d});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-helppath-constants.js-gh-hp' */
/*globals GH*/
define('jira/inline-issue-create/agile/helppath-constants', [], function () {

    "use strict";

    // watch out for the gh-jsHelpPaths transformer - the invocations must go inline
    return {
        configureBoard: GH && {"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Creating+issues+and+sub-tasks","isLocal":false} || {}
    };
});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create.soy' */
// This file was automatically generated from agile-plan-inline-issue-create.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.InlineIssueCreate.Agile.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.InlineIssueCreate == 'undefined') { JIRA.Templates.InlineIssueCreate = {}; }
if (typeof JIRA.Templates.InlineIssueCreate.Agile == 'undefined') { JIRA.Templates.InlineIssueCreate.Agile = {}; }


JIRA.Templates.InlineIssueCreate.Agile.description = function(opt_data, opt_ignored) {
  var output = '<div class="iic-widget__description' + ((! opt_data.issueTypeName) ? ' iic-widget__description_invisible' : '') + '">' + soy.$$escapeHtml('New') + ' <span class="iic-widget__description__selected-issue-type-name">' + ((opt_data.issueTypeName) ? soy.$$escapeHtml(opt_data.issueTypeName) : '') + '</span> ' + soy.$$escapeHtml('in') + ' ';
  if (opt_data.sections.length >= 1) {
    output += '<button type="button" aria-owns="iic-widget__description__section-select-' + soy.$$escapeHtml(opt_data.widgetId) + '" aria-haspopup="true" class="iic-widget__description__section-select-trigger aui-button aui-button-subtle aui-dropdown2-trigger aui-style-default">' + soy.$$escapeHtml(opt_data.currentSection) + '</button><div id="iic-widget__description__section-select-' + soy.$$escapeHtml(opt_data.widgetId) + '" data-aui-alignment="top left" class="iic-widget__description__section-select aui-dropdown2 aui-style-default"><ul class="aui-list-truncate">';
    var sectionList25 = opt_data.sections;
    var sectionListLen25 = sectionList25.length;
    for (var sectionIndex25 = 0; sectionIndex25 < sectionListLen25; sectionIndex25++) {
      var sectionData25 = sectionList25[sectionIndex25];
      output += '<li><a href="#" data-section-id="' + soy.$$escapeHtml(sectionData25.id) + '">' + soy.$$escapeHtml(sectionData25.translatedName) + '</a></li>';
    }
    output += '</ul></div><!-- .aui-dropdown2 -->';
  } else {
    output += soy.$$escapeHtml(opt_data.currentSection);
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.Agile.description.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.Agile.description';
}


JIRA.Templates.InlineIssueCreate.Agile.configurationIssue = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml('Due to the configuration for this particular board, you\x27ll have to use the full dialog to create a new issue.') + ((opt_data.url) ? ' <a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml('Learn more') + '</a>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.Agile.configurationIssue.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.Agile.configurationIssue';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-issue-types.js' */
define("jira/inline-issue-create/agile/entities/issue-types",["jira/inline-issue-create/entities/issue-types"],function(b){var a=b.extend({parse:function f(h){var g=b.prototype.parse.apply(this,arguments);return this.filterOutGHEpics(g)},reset:function d(g){var h=this.filterOutGHEpics(g);return b.prototype.reset.apply(this,[h])},filterOutGHEpics:function c(h){var g=GH.EpicConfig.getEpicIssueTypeId();if(h&&g&&!e()){return _.filter(h,function(i){return i.id!==g})}return h}});function e(){return GH.RapidBoard.State.epicsAsCardsEnabled?GH.RapidBoard.State.epicsAsCardsEnabled():false}return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-description.js' */
define("jira/inline-issue-create/agile/views/description",["jira/inline-issue-create/views/description","jquery","underscore"],function(j,b,h){var a=j.extend({template:JIRA.Templates.InlineIssueCreate.Agile.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name",sectionDropdownTrigger:".iic-widget__description__section-select-trigger",sectionDropdownItem:".iic-widget__description__section-select a",sectionDropdown:".iic-widget__description__section-select"},modelEvents:h.extend({"change:lockState":function f(k,l){if(l===this.model.constants.STATE_LOCK_SENDING){this.disable()}else{this.enable()}}},j.prototype.modelEvents),initialize:function d(){h.bindAll(this,"onDropdownShow","onItemClick")},onRender:function i(){this.unwrapTemplate();this.ui.sectionDropdown.on("aui-dropdown2-show",this.onDropdownShow);this.ui.sectionDropdownItem.on("click",this.onItemClick)},onDropdownShow:function(q){var p=this.ui.sectionDropdown;p.appendTo(this.$el);var k=this.ui.sectionDropdownTrigger.offset();var o=this.ui.sectionDropdownTrigger.position();var l=this.ui.sectionDropdownTrigger.outerHeight();var m=p.height();var n=b("body").outerHeight(true)<k.top+l+m;p.css({left:o.left,top:(n?o.top-m:o.top+l)+"px"});if(n){p.addClass("aui-dropdown2-alignment-top");this.ui.sectionDropdownTrigger.addClass("iic-widget__issue-type-selector__trigger_opened-up")}},onItemClick:function(k){this.trigger("selected",b(k.target))},disable:function c(){if(this.ui.sectionDropdownTrigger.attr){this.ui.sectionDropdownTrigger.attr("aria-disabled",true)}},enable:function e(){if(this.ui.sectionDropdownTrigger.attr){this.ui.sectionDropdownTrigger.attr("aria-disabled",false)}},serializeData:function g(){var l={};var o=this.allSections.get(this.currentSectionId);if(this.model.getSelectedIssueType()){l=this.model.getSelectedIssueType().toJSON()}var k=this.currentSectionId||-1;var n=this.allSections.toJSON().filter(function m(p){return p.id!==k});return{issueTypeName:l.name,widgetId:this.model.cid,currentSection:(o)?o.getTranslatedName():"",sections:n}}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-widget.js' */
define("jira/inline-issue-create/agile/widget",["jira/inline-issue-create/widget","jira/inline-issue-create/agile/helppath-constants"],function(d,a){var c=d.extend({activate:function b(){if(this.model.getLockState()===this.model.constants.STATE_LOCK_PERM_INACTIVE){var e=this.openCreateIssueDialog();e.done(function(f){f.onContentReady(function(){JIRA.applyMessageToForm("info",f.$form,JIRA.Templates.InlineIssueCreate.Agile.configurationIssue({url:a.configureBoard.url}),true)})});return false}return d.prototype.activate.call(this)}});return c});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-group.js' */
define("jira/inline-issue-create/agile/widget-group",["jira/inline-issue-create/agile/widget","jira/inline-issue-create/agile/issue-type-dropdown","jira/inline-issue-create/widget-group","jquery","jira/inline-issue-create/util"],function(m,d,b,e,l){return b.extend({initialize:function f(){b.prototype.initialize.apply(this,arguments);this.Widget=m;this.boardJQL=undefined;this.filterJQLs=undefined;_.bindAll(this,"issueCreatedHandler","addOverridesOnBeforeIssueCreated");this.on("widget:rendered",this.widgetRenderedHandler);this.widgetOptions.dropdownView=d;this.widgetOptions.isAgility=function(){return GH.RapidBoard.State.isAgilityBoard()}},widgetRenderedHandler:function j(q,o,n){var p=n.parent(".ghx-meta");p.addClass("plan-inline-create-inside")},issueCreatedHandler:function a(o,r,t){var q=this;t.analytics.triggerAnalytics("plan.created");var p=GH.BacklogView._scrollToView;GH.BacklogView._scrollToView=e.noop;var s=e("#ghx-backlog");var u=s.scrollTop();GH.BacklogController.reloadAndSelectCreatedIssues([o]).done(function n(){GH.BacklogView._scrollToView=p;if(!GH.BacklogModel.isIssueVisible(o.issueKey)){t.analytics.triggerAnalytics("plan.createdNotVisible")}s.scrollTop(u);l.scrollElementToView(s,t.view.$el);if(t.model.getLockState()!==t.model.constants.STATE_LOCK_PERM_INACTIVE){q.activateWidget(t)}JIRA.trace("inline.create.backlog.refreshed")})},addOverridesOnBeforeIssueCreated:function i(q,p){p.overrides=p.overrides||{};var n=GH.EpicController.getFilteredEpicKey();if(n&&n!=="none"){var r=GH.EpicConfig.getEpicLinkFieldName();p.overrides[r]=n}var o=GH.VersionController.getFilteredVersionId();if(o&&o!=="none"){p.overrides.fixVersion=o}},_createNewWidget:function h(o){var n=b.prototype._createNewWidget.apply(this,arguments);n.widget.on("beforeIssueCreated",this.addOverridesOnBeforeIssueCreated);n.widget.on("issueCreated",this.issueCreatedHandler);return n},setBoardJQL:function c(n){this.boardJQL=n;this._syncJQLs()},_syncJQLs:function k(){var n=[];if(this.boardJQL){n.push(this.boardJQL)}n.push.apply(n,this.filterJQLs);if(n.length){this.setCurrentJqls(n)}},setFilterJQLs:function g(n){this.filterJQLs=n;this._syncJQLs()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-type-dropdown.js' */
define("jira/inline-issue-create/agile/issue-type-dropdown",["jquery","jira/inline-issue-create/util","jira/inline-issue-create/views/issue-type-dropdown"],function(d,b,e){return e.extend({initialize:function a(f){e.prototype.initialize.apply(this,arguments);this.options.isAgility=GH.RapidBoard.State.isAgilityBoard()},calculateDropdownDirectionAndHeightPosition:function c(){var i=this.ui.issueTypeIcon.outerHeight();var j=this.ui.issueTypeIcon.offset().top;var k=this.ui.issueTypeDropdown.outerHeight();var g=d("#ghx-backlog").offset().top;var f=j-g;var h=d("body").outerHeight(true)-(j+i);b.trace(this,"spaceBelow",h,"visibleSpaceAbove",f,"dropdownContentHeight",k);if(h>k){b.debug(this,"Positioning down - full");return{vAlignment:"bottom"}}else{if(f>k){b.debug(this,"Positioning up - full");return{vAlignment:"top"}}else{if(h>f){b.debug(this,"Positioning down - limited",h);return{vAlignment:"bottom",limitHeight:h-10}}else{b.debug(this,"Positioning up - limited",f);return{vAlignment:"top",limitHeight:f-10}}}}}})});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-dialog2', location = 'node_modules/@atlassian/aui/src/js/aui/dialog2.js' */
("undefined"===typeof window?global:window).__bdbf9d213bf319eb4577ef21ac6c491c=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function e(a){var c=this.$el=a?(0,g.default)(a):(0,g.default)(aui.dialog.dialog2({}));g.default.each(i,function(a,b){var d="data-"+a;c[0].hasAttribute(d)||c.attr(d,b)})}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var g=f(__307d3e18fd611f85395c67cddeb1fe24),j=f(__574ac67f906effeb9d8ec2753b23cf28),k=f(__4d02fe17b8e885a34493e34af3d145dd),
b=f(__fe0cd0a7ef176e2ef4e0e105d1ce31f5),l=f(__e3152236c406a356c24f20f7bfcccf21),i={"aui-focus":"false","aui-blanketed":"true"};e.prototype.on=function(a,c){(0,b.default)(this.$el).on(a,c);return this};e.prototype.off=function(a,c){(0,b.default)(this.$el).off(a,c);return this};e.prototype.show=function(){(0,b.default)(this.$el).show();return this};e.prototype.hide=function(){(0,b.default)(this.$el).hide();return this};e.prototype.remove=function(){(0,b.default)(this.$el).remove();return this};e.prototype.isVisible=
function(){return(0,b.default)(this.$el).isVisible()};var d=(0,l.default)("dialog2",e);d.on=function(a,c){b.default.on(a,".aui-dialog2",c);return this};d.off=function(a,c){b.default.off(a,".aui-dialog2",c);return this};(0,g.default)(document).on("click",".aui-dialog2-header-close",function(a){a.preventDefault();d((0,g.default)(this).closest(".aui-dialog2")).hide()});d.on("show",function(a,c){var b;[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"].some(function(a){b=c.find(a+" :aui-tabbable");
return b.length});b&&b.first().focus()});d.on("hide",function(a,c){var d=(0,b.default)(c);c.data("aui-remove-on-hide")&&d.remove()});(0,j.default)("aui/dialog2",d);(0,k.default)("dialog2",d);h.default=d;return h=h["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'src/soy/dialog2.soy' */
// This file was automatically generated from dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dialog.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dialog == 'undefined') { aui.dialog = {}; }


aui.dialog.dialog2 = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2Chrome({id: opt_data.id, titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, modal: opt_data.modal, tagName: opt_data.tagName, removeOnHide: opt_data.removeOnHide, visible: opt_data.visible, size: opt_data.size, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.dialog.dialog2Content({id: null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, headerActionContent: opt_data.headerActionContent, headerSecondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal, content: opt_data.content, footerHintText: opt_data.footerHintText, footerHintContent: opt_data.footerHintContent, footerActionContent: opt_data.footerActionContent})});
};
if (goog.DEBUG) {
  aui.dialog.dialog2.soyTemplateName = 'aui.dialog.dialog2';
}


aui.dialog.dialog2Chrome = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.titleId) ? ' aria-labelledby="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' role="dialog" class=" aui-layer aui-dialog2 aui-dialog2-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'medium') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.modal) ? 'data-aui-modal="true"' : '') + ((opt_data.removeOnHide) ? 'data-aui-remove-on-hide="true"' : '') + ((opt_data.visible != true) ? 'aria-hidden="true"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Chrome.soyTemplateName = 'aui.dialog.dialog2Chrome';
}


aui.dialog.dialog2Content = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.dialog.dialog2Header({titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, actionContent: opt_data.headerActionContent, secondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal}) + aui.dialog.dialog2Panel(opt_data) + aui.dialog.dialog2Footer({hintText: opt_data.footerHintText, hintContent: opt_data.footerHintContent, actionContent: opt_data.footerActionContent});
};
if (goog.DEBUG) {
  aui.dialog.dialog2Content.soyTemplateName = 'aui.dialog.dialog2Content';
}


aui.dialog.dialog2Header = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<header' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-header' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><h2 ' + ((opt_data.titleId) ? ' id="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' class="aui-dialog2-header-main">' + ((opt_data.titleText) ? soy.$$escapeHtml(opt_data.titleText) : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + '</h2>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-header-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.secondaryContent) ? '<div class="aui-dialog2-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryContent) + '</div>' : '') + ((opt_data.modal != true) ? '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a>' : '') + '</header>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Header.soyTemplateName = 'aui.dialog.dialog2Header';
}


aui.dialog.dialog2Footer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<footer' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-footer' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-footer-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.hintText || opt_data.hintContent) ? '<div class="aui-dialog2-footer-hint">' + ((opt_data.hintText) ? soy.$$escapeHtml(opt_data.hintText) : '') + ((opt_data.hintContent) ? soy.$$filterNoAutoescape(opt_data.hintContent) : '') + '</div>' : '') + '</footer>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Footer.soyTemplateName = 'aui.dialog.dialog2Footer';
}


aui.dialog.dialog2Panel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Panel.soyTemplateName = 'aui.dialog.dialog2Panel';
}
;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-notification', location = 'node_modules/@atlassian/aui/src/js/aui/form-notification.js' */
("undefined"===typeof window?global:window).__9803410207c491fb00e8f693e987aa8e=function(){function l(a){return a&&a.__esModule?a:{"default":a}}function m(a){var b=n(a),a=b?a.attr(b):"",c;if(""===a)c=a;else{try{c=JSON.parse(a)}catch(d){c=[a]}c=1===c.length?c[0]:"<ul><li>"+c.join("</li><li>")+"</li></ul>"}return c}function n(a){var b;s.some(function(c){if(a.is("["+c+"]"))return b=c,!0});return b}function h(a){return a.is(":aui-focusable")}function t(a){f(a).tipsy("show");if(h(a))i(a).on("keydown",function(b){var c=
o(i(a).find(":aui-tabbable").last()),d=o(i(a).find(":aui-tabbable").first());b.keyCode===p.default.TAB&&(!b.shiftKey&&!b.altKey)&&c&&c&&a.focus();b.keyCode===p.default.TAB&&b.shiftKey&&d&&d&&(a.focus(),b.preventDefault())})}function j(a){f(a).tipsy("hide")}function i(a){a=f(a);if(a.data("tipsy"))return a.data("tipsy").$tip}function z(a){var a=a.data(A)||"side",b={side:"w",top:"se",bottom:"ne"}[a];b||(b="w",q.warn('Invalid notification position: "'+a+'". Valid options are "side", "bottom, "top"'));
return b}function f(a){return a.next("."+u)}function o(a){return(a=a instanceof d.default?a[0]:a)&&a===document.activeElement}function v(a){a=(0,d.default)(a);if(a.hasClass(r)){var b=n(a);b===w?f(a).addClass("aui-icon-wait"):f(a).removeClass("aui-icon-wait");b?(b=m(a),(d.default.contains(a[0],document.activeElement)||o(a)||!h(a))&&b?t(a):j(a)):j(a)}}"use strict";var d=l(__307d3e18fd611f85395c67cddeb1fe24);__f673a5150978887490995d88aeec0c8d;var q;var e=__cf890abdf040e0993fb71f2f839bc972;if(e&&e.__esModule)q=
e;else{var g={};if(null!=e)for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(g[k]=e[k]);g.default=e;q=g}var e=l(__574ac67f906effeb9d8ec2753b23cf28),p=l(__509557c937caa8763def39004fcf3193),g=l(__c1ce1f1e3e613f564fc234ff043570f1),r="_aui-form-notification-initialised",u="aui-icon-notification",w="data-aui-notification-wait",A="aui-form-notification-position",s=["data-aui-notification-error","data-aui-notification-success",w,"data-aui-notification-info"],x=[],B=["text","url","email","tel","password"];
document.addEventListener("focus",function(a){x.forEach(function(b){var b=(0,d.default)(b),c=i(b);if(h(b)){var e=c&&d.default.contains(c[0],a.target),f=b.is(a.target),g=0<(0,d.default)(a.target).closest(b).length;f||g?t(b):c&&!e&&j(b)}})},!0);document.addEventListener("mousedown",function(a){if(!(0,d.default)(a.target).is("a"))if(!(0<(0,d.default)(a.target).closest(".aui-form-notification-tooltip").length))(0,d.default)("[data-aui-notification-field]").each(function(){var b=(0,d.default)(this),c=
b.is(a.target),e=0<(0,d.default)(a.target).closest(b).length;!c&&!e&&j(b);h(b)&&j(b)})});k=(0,g.default);var y={};s.forEach(function(a){y[a]=v});k("data-aui-notification-field",{attached:function(a){var b=(0,d.default)(a);if(!b.hasClass(r)){b.addClass(r);a=(0,d.default)('<span class="aui-icon aui-icon-small '+u+'"/>');b.after(a);f(b).tipsy({gravity:z(b),title:function(){return m(b)},trigger:"manual",offset:-1!==B.indexOf(b.attr("type"))?9:3,opacity:1,className:function(){var a=n(b);return"aui-form-notification-tooltip "+
("data-aui-notification-error"===a?"aui-form-notification-tooltip-error":"data-aui-notification-info"===a?"aui-form-notification-tooltip-info":void 0)},html:!0});if(h(b))b.on("keydown",function(a){if(a.keyCode===p.default.TAB&&(!a.shiftKey&&!a.altKey)&&""!==m(b)){var d=i(b).find(":aui-tabbable").first();d.length&&(d.focus(),a.preventDefault())}});v(b)}x.push(b)},attributes:y,type:g.default.type.ATTRIBUTE});(0,e.default)("aui/form-notification");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation-validator-register', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation/validator-register.js' */
("undefined"===typeof window?global:window).__94a6aae68277f018287e916fc78c8f6f=function(){var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,h=a&&a.__esModule?a:{"default":a},e;if((a=__cf890abdf040e0993fb71f2f839bc972)&&a.__esModule)e=a;else{var f={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(f[b]=a[b]);f.default=a;e=f}b=(b=__574ac67f906effeb9d8ec2753b23cf28)&&b.__esModule?b:{"default":b};var i=["displayfield",
"watchfield","when","novalidate","state"],g=[],a={register:function(a,b){var c;if("string"===typeof a)c=a;else{var d=!1;a.some(function(a){var b=-1!==h.default.inArray(a,i);b&&(d=a);return b});if(c=d)return e.warn('Validators cannot be registered with the argument "'+c+'", as it is a reserved argument.'),!1;c="[data-aui-validation-"+a.join("],[data-aui-validation-")+"]"}c={validatorFunction:b,validatorTrigger:c};g.push(c);return c},validators:function(){return g}};(0,b.default)("aui/form-validation/validator-register",
a);d.default=a;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation-basic-validators', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation/basic-validators.js' */
("undefined"===typeof window?global:window).__77ff03c875a3139933c9425d867b4b55=function(){function h(a){return a&&a.__esModule?a:{"default":a}}function i(a){var b=a.el.value.length,d=0===b,c=parseInt(a.args("minlength"),10),e=parseInt(a.args("maxlength"),10);c&&e&&c===e&&!d&&b!==c?(b=f("exactlength",a.args,[c]),a.invalidate(b)):c&&b<c&&!d?(b=f("minlength",a.args),a.invalidate(b)):e&&b>e?(b=f("maxlength",a.args),a.invalidate(b)):a.validate()}function j(a,b){var d=a.match(b);return!d?!1:a===d[0]}function k(a){var b=
f("pattern",a.args);j(a.el.value,RegExp(a.args("pattern")))?a.validate():a.invalidate(b)}function l(a){var b=f("required",a.args);a.el.value?a.validate():a.invalidate(b)}function m(a){var b=f("validnumber",a.args),d=parseInt(a.el.value,10);if(isNaN(d))a.invalidate(b);else{var b=a.args("min"),c=a.args("max");b&&d<parseInt(b,10)?a.invalidate(f("min",a.args)):c&&d>parseInt(c,10)?a.invalidate(f("max",a.args)):a.validate()}}function f(a,b,d){var c;c=void 0!==AJS.I18n.keys?AJS.I18n.keys["aui.validation.message."+
a]:n[a];var e=d;d||(e=[b(a)]);c=(a=b(a+"-msg"))?[a].concat(e):[c].concat(e);return AJS.format.apply(null,c)}"use strict";var o=h(__307d3e18fd611f85395c67cddeb1fe24),p=h(__574ac67f906effeb9d8ec2753b23cf28);h(__57111a90131a66c211cf7209c7270167);h(__d74c881c8f23921c15438d0f30c99f80);var g=h(__94a6aae68277f018287e916fc78c8f6f);g.default.register(["maxlength","minlength"],i);g.default.register("[maxlength],[minlength]",i);g.default.register(["matchingfield"],function(a){var b=a.el.value,d=document.getElementById(a.args("matchingfield")),
c=d.value,e=f("matchingfield",a.args,[b,c]);if("password"===a.el.getAttribute("type")||"password"===d.getAttribute("type"))e=f("matchingfield-novalue",a.args);!b||!c?a.validate():c!==b?a.invalidate(e):a.validate()});g.default.register(["doesnotcontain"],function(a){var b=f("doesnotcontain",a.args);-1===a.el.value.indexOf(a.args("doesnotcontain"))?a.validate():a.invalidate(b)});g.default.register(["pattern"],k);g.default.register("[pattern]",k);g.default.register(["required"],l);g.default.register("[required]",
l);g.default.register(["min","max"],m);g.default.register("[min],[max]",m);g.default.register(["dateformat"],function(a){var b=a.args("dateformat"),d=f("dateformat",a.args),c={Y:"[0-9]{4}",y:"[0-9]{2}",m:"(0?[1-9]|10|11|12)",M:"[Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec]",D:"[Mon|Tue|Wed|Thu|Fri|Sat|Sun]",d:"([0-2]?[1-9]|10|20|30|31)"},e="";b.split("").forEach(function(a){e=c.hasOwnProperty(a)?e+c[a]:e+a});j(a.el.value,RegExp(e+"$","i"))?a.validate():a.invalidate(d)});g.default.register(["minchecked",
"maxchecked"],function(a){var b=(0,o.default)(a.el).find(":checked").length,d=!a.args("minchecked")||b>=a.args("minchecked"),b=!a.args("maxchecked")||b<=a.args("maxchecked"),c=f("minchecked",a.args),e=f("maxchecked",a.args);d&&b?a.validate():d?b||a.invalidate(e):a.invalidate(c)});var n={minlength:"Must be greater than or equal to {0} characters",maxlength:"Must be fewer than or equal to {0} characters",exactlength:"Must be exactly {0} characters",matchingfield:"{0} and {1} do not match.",
"matchingfield-novalue":"These fields do not match.",doesnotcontain:"Do not include the phrase {0} in this field",pattern:"This field does not match the required format",required:"This is a required field",validnumber:"Please enter a valid number",min:"Enter a value greater than {0}",max:"Enter a value less than {0}",dateformat:"Enter a valid date",
minchecked:"Tick at least {0}.",maxchecked:"Tick at most {0}."};(0,p.default)("aui/form-validation/basic-validators");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation.js' */
("undefined"===typeof window?global:window).__78dc5665b5e74967a85beca962aed6d5=function(){function k(a){return a&&a.__esModule?a:{"default":a}}function v(a){if(o(a,"novalidate"))l(a,m);else{r(s(a),"none");var b=[];t.default.validators().forEach(function(c,d){a.is(c.validatorTrigger)&&b.push(d)});l(a,f);var c=[];b.forEach(function(b){var b=t.default.validators()[b].validatorFunction,d=new e.default.Deferred,f={validate:function(){d.resolve()},invalidate:function(b){l(a,g,b);d.reject()},args:function(b){return a.attr("data-"+
w+b)||a.attr(b)},el:a[0],$el:a};AJS.deprecate.prop(f,"$el",{sinceVersion:"5.9.0",removeInVersion:"5.10.0",alternativeName:"el",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-3263."});b(f);c.push(d)});var d=e.default.when.apply(e.default,c);d.done(function(){l(a,m)});return d}}function o(a,b){var c={when:"change"},d=a.attr("data-"+w+b);d||(d=c[b]);return d}function l(a,b,c){a.attr("data-"+n,b);if(b!==i){a.trigger(e.default.Event(x));var d=s(a),h={};h[f]="wait";h[g]="error";h[m]="success";
h=h[b];b===f?setTimeout(function(){a.attr("data-"+n)===f&&r(a,"wait")},500):r(d,h,c)}}function r(a,b,c){var d=a.is("["+j+"wait]");a.removeAttr(j+"wait");a.removeAttr(j+"success");if("success"!==b||d)"none"===b?a.removeAttr(j+"error"):(d=a.attr(j+b)||"[]",c?(c=JSON.parse(d).concat([c]),c=JSON.stringify(c)):c="",a.attr(j+b,c))}function s(a){var b=o(a,"displayfield");return void 0===b?a:(0,e.default)("#"+b)}function y(a,b){b.preventDefault();a.one(x,function(){a.trigger("submit")})}var p={};"use strict";
Object.defineProperty(p,"__esModule",{value:!0});var e=k(__307d3e18fd611f85395c67cddeb1fe24);__9803410207c491fb00e8f693e987aa8e;__77ff03c875a3139933c9425d867b4b55;var z=k(__574ac67f906effeb9d8ec2753b23cf28),A=k(__4d02fe17b8e885a34493e34af3d145dd),u=k(__c1ce1f1e3e613f564fc234ff043570f1),t=k(__94a6aae68277f018287e916fc78c8f6f),w="aui-validation-",j="data-aui-notification-",n="aui-validation-state",g="invalid",m="valid",f="validating",i="unvalidated",x="_aui-internal-field-state-changed";(0,e.default)(document).on("submit",
function(a){var b=a.target,b=(0,e.default)(b),c;c=b.find("._aui-form-validation-initialised");var d=e.default.map(c,function(a){return(0,e.default)(a).attr("data-"+n)});c=-1!==d.indexOf(g);var h=-1!==d.indexOf(i),d=-1!==d.indexOf(f);c=c?g:h?i:d?f:m;c===i?(y(b,a),b.find("[data-"+n+"="+i+"]").each(function(a,b){q.validate((0,e.default)(b))})):c===f?y(b,a):c===g?(a.preventDefault(),b.find("[data-"+n+"="+g+"]").first().focus()):c===m&&(c=e.default.Event("aui-valid-submit"),b.trigger(c),c.isDefaultPrevented()&&
a.preventDefault())});var q={register:t.default.register,validate:function(a){a=(0,e.default)(a);v(a)}};(0,u.default)("data-aui-validation-field",{attached:function(a){a.form&&a.form.setAttribute("novalidate","novalidate");var b=(0,e.default)(a);if(!b.hasClass("_aui-form-validation-initialised")){s(b).attr("data-aui-notification-field","");b.addClass("_aui-form-validation-initialised");var c,d=function(){b.trigger("aui-stop-typing")};b.on("keyup",function(){clearTimeout(c);c=setTimeout(d,1500)});
var f=o(b,"when"),g=o(b,"watchfield");(g?b.add("#"+g):b).on(f,function(){v(b)});l(b,i)}u.default.init(a)},type:u.default.type.ATTRIBUTE});(0,z.default)("aui/form-validation",q);(0,A.default)("formValidation",q);p.default=q;return p=p["default"]}.call(this);;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogView.soy' */
// This file was automatically generated from SplitIssueDialogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.plan.contextmenu.splitissue.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.plan == 'undefined') { GH.tpl.plan = {}; }
if (typeof GH.tpl.plan.contextmenu == 'undefined') { GH.tpl.plan.contextmenu = {}; }
if (typeof GH.tpl.plan.contextmenu.splitissue == 'undefined') { GH.tpl.plan.contextmenu.splitissue = {}; }


GH.tpl.plan.contextmenu.splitissue.dialogView = function(opt_data, opt_ignored) {
  var output = '';
  var issue__soy3 = opt_data.model.issue;
  var issueDestinations__soy4 = opt_data.model.issueDestinations;
  output += '<section role="dialog" class="ghx-split-issue-dialog aui-layer aui-dialog2 ' + ((issueDestinations__soy4.length > 0) ? 'aui-dialog2-large' : 'aui-dialog2-medium') + '" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml(AJS.format('Split issue: {0}',issue__soy3.key)) + '</h2></header><div class="aui-dialog2-content"><form class="aui" id="split-issue-form"><table class="aui"><thead><tr><th class="no-width"></th><th>' + soy.$$escapeHtml('Summary') + '</th>' + ((issue__soy3.estimateFieldId) ? '<th class="no-width one-liner">' + soy.$$escapeHtml('Estimate') + '</th>' : '') + ((issueDestinations__soy4.length > 0) ? '<th class="no-width">' + soy.$$escapeHtml('Send to') + '</th>' : '') + '<th class="no-width"></th></tr></thead><tbody id="ghx-split-issues-rows">' + GH.tpl.plan.contextmenu.splitissue.issueRow({model: opt_data.model, isNewIssueRow: false}) + GH.tpl.plan.contextmenu.splitissue.issueRow({model: opt_data.model, isNewIssueRow: true}) + '</tbody></table><button class="ghx-split-issues-add-row aui-button aui-button-subtle" type="button"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>' + soy.$$escapeHtml('Add another') + '</button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><div class="spinner"></div><div class="button-container"><button id="split-issue-dialog-submit-button" title="' + soy.$$escapeHtml('You need at least one new issue with a non-empty summary') + '" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Split') + '</button><button id="split-issue-dialog-close-button" class="aui-button aui-button-link">' + soy.$$escapeHtml('Cancel') + '</button></div></div></footer></section>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.plan.contextmenu.splitissue.dialogView.soyTemplateName = 'GH.tpl.plan.contextmenu.splitissue.dialogView';
}


GH.tpl.plan.contextmenu.splitissue.issueRow = function(opt_data, opt_ignored) {
  var output = '';
  var issue__soy43 = opt_data.model.issue;
  var issueDestinations__soy44 = opt_data.model.issueDestinations;
  var rowClass__soy45 = opt_data.isNewIssueRow ? 'ghx-split-new-issue' : 'ghx-split-original-issue';
  output += '<tr class="' + soy.$$escapeHtml(rowClass__soy45) + '"><td class="ghx-type"><img src="' + soy.$$escapeHtml(issue__soy43.typeUrl) + '" width="16" height="16"></td><td class="one-liner"><input class="ghx-split-summary text long-field" type="text" data-aui-validation-field data-aui-validation-nonempty data-aui-validation-when="change validate_input"' + ((! opt_data.isNewIssueRow) ? 'value="' + soy.$$escapeHtml(issue__soy43.summary) + '"' : '') + '></td>' + ((issue__soy43.estimateFieldId) ? '<td class="one-liner"><input class="ghx-split-estimate text short-field" data-aui-validation-field data-aui-validation-when="change validate_input"' + ((issue__soy43.estimateStatisticRequired) ? 'data-aui-validation-nonempty' : '') + ((! opt_data.isNewIssueRow) ? ' value="' + soy.$$escapeHtml(issue__soy43.estimate) + '" ' : '') + '></td>' : '');
  if (issueDestinations__soy44.length > 0) {
    var selectedItem__soy71 = opt_data.isNewIssueRow ? opt_data.model.defaultDestinationForNewIssue : issue__soy43.containingSprint;
    output += '<td>' + GH.tpl.component.sprintselect.renderSelectElement({items: issueDestinations__soy44, selectedItem: selectedItem__soy71, cssClass: 'select destination-single-select'}) + '</td><td class="destination-warning"><span title="' + soy.$$escapeHtml('Sprint scope will be affected by this action.') + '" class="icon aui-icon aui-icon-small aui-iconfont-warning destination-warning-hidden"></span></td>';
  }
  output += '<td>' + ((opt_data.isNewIssueRow) ? '<button class="ghx-split-issues-delete-row aui-button aui-button-subtle" tabindex="-1" type="button"><span class="aui-icon aui-icon-small aui-iconfont-delete"></span></button>' : '') + '</td></tr>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.plan.contextmenu.splitissue.issueRow.soyTemplateName = 'GH.tpl.plan.contextmenu.splitissue.issueRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogView.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-view",["require"],function(i){"use strict";var e=i("backbone"),t=i("jira/ajs/select/single-select");return AJS.formValidation.register(["nonempty"],function(i){var e=i.el.value;e&&e.trim()?i.validate():i.invalidate("This is a required field")}),e.View.extend({el:"body",initialize:function(i){this.model=i,this.issue=i.issue},events:{"click #split-issue-dialog-close-button":"hide","click #split-issue-dialog-submit-button":"onSubmit","click .ghx-split-issues-add-row":"addRow","click .ghx-split-issues-delete-row":"deleteRow","change .ghx-split-original-issue .ghx-split-estimate":"evaluateScopeChange","change .destination-single-select":"evaluateScopeChange","focus .ghx-split-issues-add-row":"addRow","keyup .ghx-split-summary":"onKeyPress","keyup .ghx-split-estimate":"onKeyPress"},render:function(){var i=this;this.$el.append(GH.tpl.plan.contextmenu.splitissue.dialogView({model:this.model})),AJS.dialog2(".ghx-split-issue-dialog").show(),AJS.dialog2(".ghx-split-issue-dialog").on("hide",this.undelegateEvents.bind(this)),this.$(".ghx-split-issue-dialog .select").each(function(){new t({element:this,itemAttrDisplayed:"label"})}),this.$("#split-issue-form").on("submit",function(e){return e.preventDefault(),i.onSubmit(),!1})},hide:function(){AJS.dialog2(".ghx-split-issue-dialog").hide()},processValidationErrors:function(i){var e=this.getFields();for(var t in i)if({}.hasOwnProperty.call(i,t)){var s=i[t];s.errorMessageForSummary&&(e[s.index].summary[0].dataAuiNotificationError=s.errorMessageForSummary),s.errorMessageForEstimate&&(e[s.index].estimate[0].dataAuiNotificationError=s.errorMessageForEstimate)}this.setWaitModeEnabled(!1)},onKeyPress:function(i){13==i.keyCode&&this.onSubmit()},isInputValid:function(){var i=function(i,e){var t=function(i){return!i||!i.trim()};if(t(i(e.issue)))return!0;var s=e.getSubmitModel();for(var n in s.newIssues)if(s.newIssues.hasOwnProperty(n)){var a=s.newIssues[n];if(t(i(a)))return!0}return!1};return!(i(function(i){return i.summary},this)||this.model.estimateStatisticRequired&&i(function(i){return i.estimate},this))},setWaitModeEnabled:function(i){i?(this.$(".spinner").spin(),this.$("#split-issue-dialog-submit-button").prop("disabled","disabled")):(this.$(".spinner").spinStop(),this.$("#split-issue-dialog-submit-button").removeProp("disabled"))},onSubmit:function(){this.isInputValid()?(this.setWaitModeEnabled(!0),this.trigger("submit",this.getSubmitModel())):this.getFields().forEach(function(i){i.summary.trigger("validate_input"),i.estimate&&i.estimate.trigger("validate_input")})},addRow:function(){var i=this.$("#ghx-split-issues-rows");i.append(GH.tpl.plan.contextmenu.splitissue.issueRow({model:this.model,isNewIssueRow:!0})),new t({element:i.find(".ghx-split-new-issue .select").last(),itemAttrDisplayed:"label"}),this.$(".ghx-split-summary").last().focus()},deleteRow:function(i){this.$(i.target).closest(".ghx-split-new-issue").remove()},evaluateScopeChange:function(i){var e,t=this.$(i.target).closest("tr"),s=t.hasClass("ghx-split-new-issue"),n=t.find(".destination-single-select"),a=parseInt(n.val()[0]);if(s){var r=this.model.issueDestinations.find(function(i){return i.id===a});e=r&&"ACTIVE"===r.state}else{var o=t.find(".ghx-split-estimate"),l=o.val().trim();e=l!==this.model.issue.estimate||a!==this.model.issue.containingSprint.id}e?this.showWarning(t):this.hideWarning(t)},showWarning:function(i){i.find(".destination-warning span").removeClass("destination-warning-hidden")},hideWarning:function(i){i.find(".destination-warning span").addClass("destination-warning-hidden")},getSubmitModel:function(){var i=this.getFields(),e=this.extractNewIssues(this.issue.estimateFieldId);return{originalIssue:{summary:i[0].summary.val(),estimate:i[0].estimate.val(),estimateFieldId:this.issue.estimateFieldId,destinationId:i[0].destination.val()?i[0].destination.val()[0]:void 0},newIssues:e}},extractNewIssues:function(i){return this.getFields().slice(1).map(function(e){return{summary:e.summary.val(),estimate:e.estimate.val(),estimateFieldId:i,destinationId:e.destination.val()?e.destination.val()[0]:void 0}})},getFields:function(){for(var i=function(i){return{summary:i.find(".ghx-split-summary"),estimate:i.find(".ghx-split-estimate"),destination:i.find(".select")}},e=[i(this.$(".ghx-split-original-issue"))],t=this.$(".ghx-split-new-issue"),s=0;s<t.length;s++)e.push(i(this.$(t[s])));return e}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogController.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-controller",function(){"use strict";function i(i,t){this.issue=i,this.backlogController=t}function t(i,t){return GH.Ajax.put({url:"/issue/"+i+"/split",data:t})}return i.prototype.bind=function(i){this.view=i,this.view.on("submit",this.onSubmit,this)},i.prototype.onSubmit=function(i){t(this.issue.id,i).done(function(i){i.success.errors?this.view.processValidationErrors(i.success.errors):(this.view.hide(),this.backlogController.loadData())}.bind(this)).fail(function(){this.view.hide()}.bind(this)),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.split.submit",data:{newIssueCount:i.newIssues.length}})},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'includes/js/rapid/ui/plan/contextmenu/SplitIssueAction.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-action",["require"],function(i){"use strict";function e(i){return i.singleIssue&&!i.containsSubtasks&&GH.RapidBoard.State.isPlanMode()}function t(i){var e=!1;if(GH.RapidBoard.State.isScrumBoard())if(GH.RapidBoard.State.isPlanMode()){var t=l.getActiveSprintModels().find(function(e){return e.issueList.getIssueIdForKey(i.key)});e="undefined"!=typeof t}else e=!0;return e}function n(i,e){var t=c.Deferred();return p.get({url:"/issue/"+i.id+"/split",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),getIssueDestinations:e}}).done(function(i){i.userHasPermissionToSplit?t.resolve(i):(GH.Notification.showError("We can\'t split this issue","Please ensure you have permissions to create, edit, link, and schedule issues",!0),t.reject())}),t}function a(i){var e,t="";return i.estimateStatistic&&"issueCount"!==i.estimateStatistic.statFieldId&&(e=i.estimateStatistic.statFieldId,t=i.estimateStatistic.statFieldValue.text||""),{issue:{key:i.key,id:i.id,summary:i.summary,estimateFieldId:e,estimate:t,estimateStatisticRequired:i.estimateStatisticRequired,typeUrl:i.typeUrl}}}function s(i){var e=[i.containingSprint].concat(i.issueDestinations);e.forEach(function(i){if(i.state){var e="ACTIVE"===i.state?"Active sprint":"Future sprint";i.name+=" ("+e+")"}})}function r(i){var e=t(i),r=n(i,e),o=a(i);o.displaysIssueDestinationSelector=e;var u=c.Deferred();return r.done(function(i){e&&s(i),o.issueDestinations=i.issueDestinations,o.defaultDestinationForNewIssue=i.issueDestinations.find(function(i){return i.id===-1}),o.issue.containingSprint=i.containingSprint,u.resolve(o)}),r.fail(function(){return u.reject()}),u}function o(i){var e=r(i);e.done(function(e){var t=new g(e),n=new m(i,d);n.bind(t),t.render(),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.split"})})}function u(i){return{id:"ghx-issue-ctx-action-split-issue",name:"split-issue",label:"Split issue",actionFn:function(){var e=i.selectedIssuesData[0];o(e)}}}var d,l,c=i("jquery"),p=i("jira-agile/rapid/ajax"),f=i("jira-agile/rapid/global-events"),g=i("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-view"),m=i("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-controller");f.on("pre-initialization",function(){d=i("jira-agile/rapid/ui/plan/backlog-controller"),l=i("jira-agile/rapid/ui/plan/backlog-model")});var S={};return S.appendItem=function(i,t){e(i)&&!GH.RapidBoard.State.isAgilityBoard()&&t.push(u(i))},S});;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.fancybox-1.3.4', location = 'jquery-plugins/jquery.fancybox/1.3.4/jquery.fancybox-1.3.4.js' */
(function(r){define("atlassian/jquery-plugins/jquery.fancybox-1.3.4",function(){return function(t){r(window,document,t);return t}})})(function(r,t,R){var a=R,n,u,v,e,B,l,C,i,y,z,q=0,d={},o=[],p=0,b={},j=[],E=null,m=new Image,H=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,T=/[^\.]\.(swf)\s*$/i,I,J=1,x=0,w="",s,g,k=!1,A=a.extend(a("<div/>")[0],{prop:0}),K=a.browser.msie&&7>a.browser.version&&!r.XMLHttpRequest,L=function(){u.hide();m.onerror=m.onload=null;E&&E.abort();n.empty()},M=function(){!1===d.onError(o,q,
d)?(u.hide(),k=!1):(d.titleShow=!1,d.width="auto",d.height="auto",n.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),D())},G=function(){var c=o[q],b,f,e,g,j,i;L();d=a.extend({},a.fn.fancybox.defaults,"undefined"==typeof a(c).data("fancybox")?d:a(c).data("fancybox"));i=d.onStart(o,q,d);if(!1===i)k=!1;else{"object"==typeof i&&(d=a.extend(d,i));e=d.title||(c.nodeName?a(c).attr("title"):c.title)||"";c.nodeName&&!d.orig&&(d.orig=a(c).children("img:first").length?
a(c).children("img:first"):a(c));""===e&&(d.orig&&d.titleFromAlt)&&(e=d.orig.attr("alt"));b=d.href||(c.nodeName?a(c).attr("href"):c.href)||null;if(/^(?:javascript)/i.test(b)||"#"==b)b=null;d.type?(f=d.type,b||(b=d.content)):d.content?f="html":b&&(f=b.match(H)?"image":b.match(T)?"swf":a(c).hasClass("iframe")?"iframe":0===b.indexOf("#")?"inline":"ajax");if(f)switch("inline"==f&&(c=b.substr(b.indexOf("#")),f=0<a(c).length?"inline":"ajax"),d.type=f,d.href=b,d.title=e,d.autoDimensions&&("html"==d.type||
"inline"==d.type||"ajax"==d.type?(d.width="auto",d.height="auto"):d.autoDimensions=!1),d.modal&&(d.overlayShow=!0,d.hideOnOverlayClick=!1,d.hideOnContentClick=!1,d.enableEscapeButton=!1,d.showCloseButton=!1),d.padding=parseInt(d.padding,10),d.margin=parseInt(d.margin,10),n.css("padding",d.padding+d.margin),a(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){a(this).replaceWith(l.children())}),f){case "html":n.html(d.content);D();break;case "inline":if(!0===a(c).parent().is("#fancybox-content")){k=
!1;break}a('<div class="fancybox-inline-tmp" />').hide().insertBefore(a(c)).bind("fancybox-cleanup",function(){a(this).replaceWith(l.children())}).bind("fancybox-cancel",function(){a(this).replaceWith(n.children())});a(c).appendTo(n);D();break;case "image":k=!1;a.fancybox.showActivity();m=new Image;m.onerror=function(){M()};m.onload=function(){k=true;m.onerror=m.onload=null;d.width=m.width;d.height=m.height;a("<img />").attr({id:"fancybox-img",src:m.src,alt:d.title}).appendTo(n);N()};m.src=b;break;
case "swf":d.scrolling="no";g='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+d.width+'" height="'+d.height+'"><param name="movie" value="'+b+'"></param>';j="";a.each(d.swf,function(a,c){g=g+('<param name="'+a+'" value="'+c+'"></param>');j=j+(" "+a+'="'+c+'"')});g+='<embed src="'+b+'" type="application/x-shockwave-flash" width="'+d.width+'" height="'+d.height+'"'+j+"></embed></object>";n.html(g);D();break;case "ajax":k=!1;a.fancybox.showActivity();d.ajax.win=d.ajax.success;
E=a.ajax(a.extend({},d.ajax,{url:b,data:d.ajax.data||{},error:function(a){a.status>0&&M()},success:function(a,c,f){if((typeof f=="object"?f:E).status==200){if(typeof d.ajax.win=="function"){i=d.ajax.win(b,a,c,f);if(i===false){u.hide();return}if(typeof i=="string"||typeof i=="object")a=i}n.html(a);D()}}}));break;case "iframe":N()}else M()}},D=function(){var c=d.width,b=d.height,c=-1<c.toString().indexOf("%")?parseInt((a(r).width()-2*d.margin)*parseFloat(c)/100,10)+"px":"auto"==c?"auto":c+"px",b=-1<
b.toString().indexOf("%")?parseInt((a(r).height()-2*d.margin)*parseFloat(b)/100,10)+"px":"auto"==b?"auto":b+"px";n.wrapInner('<div style="width:'+c+";height:"+b+";overflow: "+("auto"==d.scrolling?"auto":"yes"==d.scrolling?"scroll":"hidden")+';position:relative;"></div>');d.width=n.width();d.height=n.height();N()},N=function(){var c,h;u.hide();if(e.is(":visible")&&!1===b.onCleanup(j,p,b))a.event.trigger("fancybox-cancel"),k=!1;else{k=!0;a(l.add(v)).unbind();a(r).unbind("resize.fb scroll.fb");a(t).unbind("keydown.fb");
e.is(":visible")&&"outside"!==b.titlePosition&&e.css("height",e.height());j=o;p=q;b=d;if(b.overlayShow){if(v.css({"background-color":b.overlayColor,opacity:b.overlayOpacity,cursor:b.hideOnOverlayClick?"pointer":"auto",height:a(t).height()}),!v.is(":visible")){if(K)a("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});v.show()}}else v.hide();c=O();var f={},F=b.autoScale,
m=2*b.padding;f.width=-1<b.width.toString().indexOf("%")?parseInt(c[0]*parseFloat(b.width)/100,10):b.width+m;f.height=-1<b.height.toString().indexOf("%")?parseInt(c[1]*parseFloat(b.height)/100,10):b.height+m;if(F&&(f.width>c[0]||f.height>c[1]))if("image"==d.type||"swf"==d.type){if(F=b.width/b.height,f.width>c[0]&&(f.width=c[0],f.height=parseInt((f.width-m)/F+m,10)),f.height>c[1])f.height=c[1],f.width=parseInt((f.height-m)*F+m,10)}else f.width=Math.min(f.width,c[0]),f.height=Math.min(f.height,c[1]);
f.top=parseInt(Math.max(c[3]-20,c[3]+0.5*(c[1]-f.height-40)),10);f.left=parseInt(Math.max(c[2]-20,c[2]+0.5*(c[0]-f.width-40)),10);g=f;w=b.title||"";x=0;i.empty().removeAttr("style").removeClass();if(!1!==b.titleShow&&(w=a.isFunction(b.titleFormat)?b.titleFormat(w,j,p,b):w&&w.length?"float"==b.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+w+'</td><td id="fancybox-title-float-right"></td></tr></table>':
'<div id="fancybox-title-'+b.titlePosition+'">'+w+"</div>":!1)&&""!==w)switch(i.addClass("fancybox-title-"+b.titlePosition).html(w).appendTo("body").show(),b.titlePosition){case "inside":i.css({width:g.width-2*b.padding,marginLeft:b.padding,marginRight:b.padding});x=i.outerHeight(!0);i.appendTo(B);g.height+=x;break;case "over":i.css({marginLeft:b.padding,width:g.width-2*b.padding,bottom:b.padding}).appendTo(B);break;case "float":i.css("left",-1*parseInt((i.width()-g.width-40)/2,10)).appendTo(e);break;
default:i.css({width:g.width-2*b.padding,paddingLeft:b.padding,paddingRight:b.padding}).appendTo(e)}i.hide();e.is(":visible")?(a(C.add(y).add(z)).hide(),c=e.position(),s={top:c.top,left:c.left,width:e.width(),height:e.height()},h=s.width==g.width&&s.height==g.height,l.fadeTo(b.changeFade,0.3,function(){var c=function(){l.html(n.contents()).fadeTo(b.changeFade,1,P)};a.event.trigger("fancybox-change");l.empty().removeAttr("filter").css({"border-width":b.padding,width:g.width-2*b.padding,height:d.autoDimensions?
"auto":g.height-x-2*b.padding});h?c():(A.prop=0,a(A).animate({prop:1},{duration:b.changeSpeed,easing:b.easingChange,step:Q,complete:c}))})):(e.removeAttr("style"),l.css("border-width",b.padding),"elastic"==b.transitionIn?(s=S(),l.html(n.contents()),e.show(),b.opacity&&(g.opacity=0),A.prop=0,a(A).animate({prop:1},{duration:b.speedIn,easing:b.easingIn,step:Q,complete:P})):("inside"==b.titlePosition&&0<x&&i.show(),l.css({width:g.width-2*b.padding,height:d.autoDimensions?"auto":g.height-x-2*b.padding}).html(n.contents()),
e.css(g).fadeIn("none"==b.transitionIn?0:b.speedIn,P)))}},P=function(){a.support.opacity||(l.get(0).style.removeAttribute("filter"),e.get(0).style.removeAttribute("filter"));d.autoDimensions&&l.css("height","auto");e.css("height","auto");w&&w.length&&i.show();b.showCloseButton&&C.show();(b.enableEscapeButton||b.enableKeyboardNav)&&a(t).bind("keydown.fb",function(c){if(c.keyCode==27&&b.enableEscapeButton){c.preventDefault();a.fancybox.close()}else if((c.keyCode==37||c.keyCode==39)&&b.enableKeyboardNav&&
c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.target.tagName!=="SELECT"){c.preventDefault();a.fancybox[c.keyCode==37?"prev":"next"]()}});b.showNavArrows?((b.cyclic&&1<j.length||0!==p)&&y.show(),(b.cyclic&&1<j.length||p!=j.length-1)&&z.show()):(y.hide(),z.hide());b.hideOnContentClick&&l.bind("click",a.fancybox.close);b.hideOnOverlayClick&&v.bind("click",a.fancybox.close);a(r).bind("resize.fb",a.fancybox.resize);b.centerOnScroll&&a(r).bind("scroll.fb",a.fancybox.center);"iframe"==b.type&&
a('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(a.browser.msie?'allowtransparency="true""':"")+' scrolling="'+d.scrolling+'" src="'+b.href+'"></iframe>').appendTo(l);e.show();k=!1;a.fancybox.center();b.onComplete(j,p,b);var c,h;j.length-1>p&&(c=j[p+1].href,"undefined"!==typeof c&&c.match(H)&&(h=new Image,h.src=c));0<p&&(c=j[p-1].href,"undefined"!==typeof c&&c.match(H)&&(h=new Image,h.src=c))},Q=function(a){var d={width:parseInt(s.width+(g.width-
s.width)*a,10),height:parseInt(s.height+(g.height-s.height)*a,10),top:parseInt(s.top+(g.top-s.top)*a,10),left:parseInt(s.left+(g.left-s.left)*a,10)};"undefined"!==typeof g.opacity&&(d.opacity=0.5>a?0.5:a);e.css(d);l.css({width:d.width-2*b.padding,height:d.height-x*a-2*b.padding})},O=function(){return[a(r).width()-2*b.margin,a(r).height()-2*b.margin,a(t).scrollLeft()+b.margin,a(t).scrollTop()+b.margin]},S=function(){var c=d.orig?a(d.orig):!1,h={};c&&c.length?(h=c.offset(),h.top+=parseInt(c.css("paddingTop"),
10)||0,h.left+=parseInt(c.css("paddingLeft"),10)||0,h.top+=parseInt(c.css("border-top-width"),10)||0,h.left+=parseInt(c.css("border-left-width"),10)||0,h.width=c.width(),h.height=c.height(),h={width:h.width+2*b.padding,height:h.height+2*b.padding,top:h.top-b.padding-20,left:h.left-b.padding-20}):(c=O(),h={width:2*b.padding,height:2*b.padding,top:parseInt(c[3]+0.5*c[1],10),left:parseInt(c[2]+0.5*c[0],10)});return h},U=function(){u.is(":visible")?(a("div",u).css("top",-40*J+"px"),J=(J+1)%12):clearInterval(I)};
a.fn.fancybox=function(c){if(!a(this).length)return this;a(this).data("fancybox",a.extend({},c,a.metadata?a(this).metadata():{})).unbind("click.fb").bind("click.fb",function(c){c.preventDefault();k||(k=!0,a(this).blur(),o=[],q=0,c=a(this).attr("rel")||"",!c||""==c||"nofollow"===c?o.push(this):(o=a("a[rel="+c+"], area[rel="+c+"]"),q=o.index(this)),G())});return this};a.fancybox=function(c,b){var d;if(!k){k=!0;d="undefined"!==typeof b?b:{};o=[];q=parseInt(d.index,10)||0;if(a.isArray(c)){for(var e=0,
g=c.length;e<g;e++)"object"==typeof c[e]?a(c[e]).data("fancybox",a.extend({},d,c[e])):c[e]=a({}).data("fancybox",a.extend({content:c[e]},d));o=R.merge(o,c)}else"object"==typeof c?a(c).data("fancybox",a.extend({},d,c)):c=a({}).data("fancybox",a.extend({content:c},d)),o.push(c);if(q>o.length||0>q)q=0;G()}};a.fancybox.showActivity=function(){clearInterval(I);u.show();I=setInterval(U,66)};a.fancybox.hideActivity=function(){u.hide()};a.fancybox.next=function(){return a.fancybox.pos(p+1)};a.fancybox.prev=
function(){return a.fancybox.pos(p-1)};a.fancybox.pos=function(a){k||(a=parseInt(a),o=j,-1<a&&a<j.length?(q=a,G()):b.cyclic&&1<j.length&&(q=a>=j.length?0:j.length-1,G()))};a.fancybox.cancel=function(){k||(k=!0,a.event.trigger("fancybox-cancel"),L(),d.onCancel(o,q,d),k=!1)};a.fancybox.close=function(){function c(){v.fadeOut("fast");i.empty().hide();e.hide();a.event.trigger("fancybox-cleanup");l.empty();b.onClosed(j,p,b);j=d=[];p=q=0;b=d={};k=!1}if(!k&&!e.is(":hidden"))if(k=!0,b&&!1===b.onCleanup(j,
p,b))k=!1;else if(L(),a(C.add(y).add(z)).hide(),a(l.add(v)).unbind(),a(r).unbind("resize.fb scroll.fb"),a(t).unbind("keydown.fb"),l.find("iframe").attr("src",K&&/^https/i.test(r.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==b.titlePosition&&i.empty(),e.stop(),"elastic"==b.transitionOut){s=S();var h=e.position();g={top:h.top,left:h.left,width:e.width(),height:e.height()};b.opacity&&(g.opacity=1);i.empty().hide();A.prop=1;a(A).animate({prop:0},{duration:b.speedOut,easing:b.easingOut,
step:Q,complete:c})}else e.fadeOut("none"==b.transitionOut?0:b.speedOut,c)};a.fancybox.resize=function(){v.is(":visible")&&v.css("height",a(t).height());a.fancybox.center(!0)};a.fancybox.center=function(a){var d,f;if(!k&&(f=!0===a?1:0,d=O(),f||!(e.width()>d[0]||e.height()>d[1])))e.stop().animate({top:parseInt(Math.max(d[3]-20,d[3]+0.5*(d[1]-l.height()-40)-b.padding)),left:parseInt(Math.max(d[2]-20,d[2]+0.5*(d[0]-l.width()-40)-b.padding))},"number"==typeof a?a:200)};a.fancybox.init=function(){a("#fancybox-wrap").length||
(a("body").append(n=a('<div id="fancybox-tmp"></div>'),u=a('<div id="fancybox-loading"><div></div></div>'),v=a('<div id="fancybox-overlay"></div>'),e=a('<div id="fancybox-wrap"></div>')),B=a('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(e),
B.append(l=a('<div id="fancybox-content"></div>'),C=a('<a id="fancybox-close"></a>'),i=a('<div id="fancybox-title"></div>'),y=a('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),z=a('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),C.click(a.fancybox.close),u.click(a.fancybox.cancel),y.click(function(c){c.preventDefault();a.fancybox.prev()}),z.click(function(c){c.preventDefault();a.fancybox.next()}),
a.fn.mousewheel&&e.bind("mousewheel.fb",function(c,b){if(k)c.preventDefault();else if(0==a(c.target).get(0).clientHeight||a(c.target).get(0).scrollHeight===a(c.target).get(0).clientHeight)c.preventDefault(),a.fancybox[0<b?"prev":"next"]()}),a.support.opacity||e.addClass("fancybox-ie"),K&&(u.addClass("fancybox-ie6"),e.addClass("fancybox-ie6"),a('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(r.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(B)))};
a.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:0.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,
showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};a(t).ready(function(){a.fancybox.init()})});;
;
/* module-key = 'jira.webresources:jquery-fancybox', location = '/includes/jquery/plugins/fancybox/jquery.fancybox.jira.js' */
require(["jquery","atlassian/jquery-plugins/jquery.fancybox-1.3.4"],function(t,i){i(t),t.fn.fancybox.defaults.titleFormat=function(t){if(t&&t.length)return t=AJS.escapeHtml(t),"float"===this.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+t+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+this.titlePosition+'">'+t+"</div>"}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:moment-2.6.0', location = 'libs/moment/2.6.0/moment-2.6.0.js' */
(function(A){define("atlassian/libs/moment-2.6.0",function(){var z={};A.call(z);return z.moment})})(function(){for(var A=function(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}},z=function(a,b){var c=!0;return l(function(){c&&(!1===e.suppressDeprecationWarnings&&("undefined"!==typeof console&&console.warn)&&console.warn("Deprecation warning: "+a),c=!1);return b.apply(this,arguments)},b)},X=function(a,
b){return function(c){return j(a.call(this,c),b)}},ua=function(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}},Y=function(){},F=function(a){Z(a);l(this,a)},G=function(a){var a=$(a),b=a.year||0,c=a.quarter||0,d=a.month||0,g=a.week||0,e=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+e+7*g;this._months=+d+3*c+12*b;this._data={};this._bubble()},l=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);b.hasOwnProperty("toString")&&
(a.toString=b.toString);b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf);return a},v=function(a){return 0>a?Math.ceil(a):Math.floor(a)},j=function(a,b,c){for(var d=""+Math.abs(a);d.length<b;)d="0"+d;return(0<=a?c?"+":"":"-")+d},I=function(a,b,c,d){var g=b._milliseconds,f=b._days,b=b._months,d=null==d?!0:d;g&&a._d.setTime(+a._d+g*c);f&&aa(a,"Date",H(a,"Date")+f*c);b&&ba(a,H(a,"Month")+b*c);d&&e.updateOffset(a,f||b)},J=function(a){return"[object Array]"===Object.prototype.toString.call(a)},ca=function(a,
b,c){var d=Math.min(a.length,b.length),g=Math.abs(a.length-b.length),e=0,h;for(h=0;h<d;h++)(c&&a[h]!==b[h]||!c&&i(a[h])!==i(b[h]))&&e++;return e+g},r=function(a){if(a)var b=a.toLowerCase().replace(/(.)s$/,"$1"),a=va[a]||wa[b]||b;return a},$=function(a){var b={},c,d;for(d in a)a.hasOwnProperty(d)&&(c=r(d))&&(b[c]=a[d]);return b},xa=function(a){var b,c;if(0===a.indexOf("week"))b=7,c="day";else if(0===a.indexOf("month"))b=12,c="month";else return;e[a]=function(d,g){var f,h,i=e.fn._lang[a],j=[];"number"===
typeof d&&(g=d,d=void 0);h=function(a){a=e().utc().set(c,a);return i.call(e.fn._lang,a,d||"")};if(null!=g)return h(g);for(f=0;f<b;f++)j.push(h(f));return j}},i=function(a){var a=+a,b=0;0!==a&&isFinite(a)&&(b=0<=a?Math.floor(a):Math.ceil(a));return b},K=function(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()},da=function(a,b,c){return B(e([a,11,31+b-c]),b,c).week},L=function(a){return 0===a%4&&0!==a%100||0===a%400},Z=function(a){var b;if(a._a&&-2===a._pf.overflow){b=0>a._a[s]||11<a._a[s]?s:
1>a._a[o]||a._a[o]>K(a._a[p],a._a[s])?o:0>a._a[m]||23<a._a[m]?m:0>a._a[w]||59<a._a[w]?w:0>a._a[C]||59<a._a[C]?C:0>a._a[D]||999<a._a[D]?D:-1;if(a._pf._overflowDayOfYear&&(b<p||b>o))b=o;a._pf.overflow=b}},ea=function(a){null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&0>a._pf.overflow&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length));return a._isValid},M=
function(a){return a?a.toLowerCase().replace("_","-"):a},N=function(a,b){return b._isUTC?e(a).zone(b._offset||0):e(a).local()},q=function(a){var b=0,c,d,g,f,h=function(a){if(!x[a]&&ya)try{require("./lang/"+a)}catch(b){}return x[a]};if(!a)return e.fn._lang;if(!J(a)){if(d=h(a))return d;a=[a]}for(;b<a.length;){f=M(a[b]).split("-");c=f.length;for(g=(g=M(a[b+1]))?g.split("-"):null;0<c;){if(d=h(f.slice(0,c).join("-")))return d;if(g&&g.length>=c&&ca(f,g,!0)>=c-1)break;c--}b++}return e.fn._lang},P=function(a,
b){if(!a.isValid())return a.lang().invalidDate();b=fa(b,a.lang());if(!O[b]){var c=O,d=b,g=b,e=g.match(ga),h,i;h=0;for(i=e.length;h<i;h++)e[h]=t[e[h]]?t[e[h]]:e[h].match(/\[[\s\S]/)?e[h].replace(/^\[|\]$/g,""):e[h].replace(/\\/g,"");c[d]=function(a){var b="";for(h=0;h<i;h++)b+=e[h]instanceof Function?e[h].call(a,g):e[h];return b}}return O[b](a)},fa=function(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(E.lastIndex=0;0<=d&&E.test(a);)a=a.replace(E,c),E.lastIndex=0,d-=1;return a},Ka=function(a,
b){var c=b._strict;switch(a){case "Q":return ha;case "DDDD":return ia;case "YYYY":case "GGGG":case "gggg":return c?za:Aa;case "Y":case "G":case "g":return Ba;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return c?Ca:Da;case "S":if(c)return ha;case "SS":if(c)return ja;case "SSS":if(c)return ia;case "DDD":return Ea;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return Fa;case "a":case "A":return q(b._l)._meridiemParse;case "X":return Ga;case "Z":case "ZZ":return Q;case "T":return Ha;
case "SSSS":return Ia;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return c?ja:ka;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return ka;case "Do":return Ja;default:var c=RegExp,d;d=a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return c(d)}},la=function(a){var a=(a||"").match(Q)||[],
a=((a[a.length-1]||[])+"").match(La)||["-",0,0],b=+(60*a[1])+i(a[2]);return"+"===a[0]?-b:b},S=function(a){var b,c=[],d,g,f,h,j;if(!a._d){d=new Date;d=a._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()];a._w&&(null==a._a[o]&&null==a._a[s])&&(b=function(b){var c=parseInt(b,10);return b?3>b.length?68<c?1900+c:2E3+c:c:null==a._a[p]?e().weekYear():a._a[p]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?b=ma(b(g.GG),g.W||1,g.E,4,1):(f=q(a._l),h=null!=g.d?na(g.d,
f):null!=g.e?parseInt(g.e,10)+f._week.dow:0,j=parseInt(g.w,10)||1,null!=g.d&&h<f._week.dow&&j++,b=ma(b(g.gg),j,h,f._week.doy,f._week.dow)),a._a[p]=b.year,a._dayOfYear=b.dayOfYear);if(a._dayOfYear){b=null==a._a[p]?d[p]:a._a[p];if(a._dayOfYear>(L(b)?366:365))a._pf._overflowDayOfYear=!0;b=R(b,0,a._dayOfYear);a._a[s]=b.getUTCMonth();a._a[o]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=c[b]=d[b];for(;7>b;b++)a._a[b]=c[b]=null==a._a[b]?2===b?1:0:a._a[b];c[m]+=i((a._tzm||0)/60);c[w]+=i((a._tzm||
0)%60);a._d=(a._useUTC?R:Ma).apply(null,c)}},T=function(a){a._a=[];a._pf.empty=!0;var b=q(a._l),c=""+a._i,d,g,f,h,j=c.length,k=0;g=fa(a._f,b).match(ga)||[];for(b=0;b<g.length;b++){f=g[b];if(d=(c.match(Ka(f,a))||[])[0])h=c.substr(0,c.indexOf(d)),0<h.length&&a._pf.unusedInput.push(h),c=c.slice(c.indexOf(d)+d.length),k+=d.length;if(t[f]){d?a._pf.empty=!1:a._pf.unusedTokens.push(f);h=a;var l=void 0,n=h._a;switch(f){case "Q":null!=d&&(n[s]=3*(i(d)-1));break;case "M":case "MM":null!=d&&(n[s]=i(d)-1);break;
case "MMM":case "MMMM":l=q(h._l).monthsParse(d);null!=l?n[s]=l:h._pf.invalidMonth=d;break;case "D":case "DD":null!=d&&(n[o]=i(d));break;case "Do":null!=d&&(n[o]=i(parseInt(d,10)));break;case "DDD":case "DDDD":null!=d&&(h._dayOfYear=i(d));break;case "YY":n[p]=e.parseTwoDigitYear(d);break;case "YYYY":case "YYYYY":case "YYYYYY":n[p]=i(d);break;case "a":case "A":h._isPm=q(h._l).isPM(d);break;case "H":case "HH":case "h":case "hh":n[m]=i(d);break;case "m":case "mm":n[w]=i(d);break;case "s":case "ss":n[C]=
i(d);break;case "S":case "SS":case "SSS":case "SSSS":n[D]=i(1E3*("0."+d));break;case "X":h._d=new Date(1E3*parseFloat(d));break;case "Z":case "ZZ":h._useUTC=!0;h._tzm=la(d);break;case "w":case "ww":case "W":case "WW":case "d":case "dd":case "ddd":case "dddd":case "e":case "E":f=f.substr(0,1);case "gg":case "gggg":case "GG":case "GGGG":case "GGGGG":f=f.substr(0,2),d&&(h._w=h._w||{},h._w[f]=d)}}else a._strict&&!d&&a._pf.unusedTokens.push(f)}a._pf.charsLeftOver=j-k;0<c.length&&a._pf.unusedInput.push(c);
a._isPm&&12>a._a[m]&&(a._a[m]+=12);!1===a._isPm&&12===a._a[m]&&(a._a[m]=0);S(a);Z(a)},Ma=function(a,b,c,d,e,f,h){b=new Date(a,b,c,d,e,f,h);1970>a&&b.setFullYear(a);return b},R=function(a){var b=new Date(Date.UTC.apply(null,arguments));1970>a&&b.setUTCFullYear(a);return b},na=function(a,b){if("string"===typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!==typeof a)return null}else a=parseInt(a,10);return a},Na=function(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)},B=function(a,b,c){b=c-b;c-=
a.day();c>b&&(c-=7);c<b-7&&(c+=7);a=e(a).add("d",c);return{week:Math.ceil(a.dayOfYear()/7),year:a.year()}},ma=function(a,b,c,d,e){var f=R(a,0,1).getUTCDay(),b=7*(b-1)+((null!=c?c:e)-e)+(e-f+(f>d?7:0)-(f<e?7:0))+1;return{year:0<b?a:a-1,dayOfYear:0<b?b:(L(a-1)?366:365)+b}},pa=function(a){var b=a._i,c=a._f;if(null===b||void 0===c&&""===b)return e.invalid({nullInput:!0});"string"===typeof b&&(a._i=b=q().preparse(b));if(e.isMoment(b)){var a=b,d={},g;for(g in a)a.hasOwnProperty(g)&&oa.hasOwnProperty(g)&&
(d[g]=a[g]);a=d;a._d=new Date(+b._d)}else if(c)if(J(c)){var b=a,f,h;if(0===b._f.length)b._pf.invalidFormat=!0,b._d=new Date(NaN);else{for(g=0;g<b._f.length;g++)if(c=0,d=l({},b),d._pf=A(),d._f=b._f[g],T(d),ea(d)&&(c+=d._pf.charsLeftOver,c+=10*d._pf.unusedTokens.length,d._pf.score=c,null==h||c<h))h=c,f=d;l(b,f||d)}}else T(a);else if(d=a,f=d._i,h=Oa.exec(f),void 0===f)d._d=new Date;else if(h)d._d=new Date(+h[1]);else if("string"===typeof f)if(b=d._i,g=Pa.exec(b)){d._pf.iso=!0;f=0;for(h=U.length;f<h;f++)if(U[f][1].exec(b)){d._f=
U[f][0]+(g[6]||" ");break}f=0;for(h=V.length;f<h;f++)if(V[f][1].exec(b)){d._f+=V[f][0];break}b.match(Q)&&(d._f+="Z");T(d)}else e.createFromInputFallback(d);else J(f)?(d._a=f.slice(0),S(d)):"[object Date]"===Object.prototype.toString.call(f)||f instanceof Date?d._d=new Date(+f):"object"===typeof f?d._d||(f=$(d._i),d._a=[f.year,f.month,f.day,f.hour,f.minute,f.second,f.millisecond],S(d)):"number"===typeof f?d._d=new Date(f):e.createFromInputFallback(d);return new F(a)},ba=function(a,b){var c;if("string"===
typeof b&&(b=a.lang().monthsParse(b),"number"!==typeof b))return a;c=Math.min(a.date(),K(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a},H=function(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()},aa=function(a,b,c){return"Month"===b?ba(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)},u=function(a,b){return function(c){return null!=c?(aa(this,a,c),e.updateOffset(this,b),this):H(this,a)}},Qa=function(a){e.duration.fn[a]=function(){return this._data[a]}},qa=function(a,b){e.duration.fn["as"+
a]=function(){return+this/b}},e,Ra="undefined"!==typeof global?global:this,y=Math.round,k,p=0,s=1,o=2,m=3,w=4,C=5,D=6,x={},oa={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ya="undefined"!==typeof module&&module.exports,Oa=/^\/?Date\((\-?\d+)/i,Sa=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ta=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ga=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,
E=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,ka=/\d\d?/,Ea=/\d{1,3}/,Aa=/\d{1,4}/,Da=/[+\-]?\d{1,6}/,Ia=/\d+/,Fa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Q=/Z|[\+\-]\d\d:?\d\d/gi,Ha=/T/i,Ga=/[\+\-]?\d+(\.\d{1,3})?/,Ja=/\d{1,2}/,ha=/\d/,ja=/\d\d/,ia=/\d{3}/,za=/\d{4}/,Ca=/[+-]?\d{6}/,Ba=/[+-]?\d+/,Pa=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
U=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],V=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],La=/([\+\-]|\d\d)/gi,W={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},va={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",
M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},wa={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},O={},ra="DDD w W M D d".split(" "),sa="MDHhmswW".split(""),t={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},
dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return j(this.year()%100,2)},YYYY:function(){return j(this.year(),4)},YYYYY:function(){return j(this.year(),5)},YYYYYY:function(){var a=this.year();return(0<=a?"+":"-")+j(Math.abs(a),6)},gg:function(){return j(this.weekYear()%100,2)},gggg:function(){return j(this.weekYear(),
4)},ggggg:function(){return j(this.weekYear(),5)},GG:function(){return j(this.isoWeekYear()%100,2)},GGGG:function(){return j(this.isoWeekYear(),4)},GGGGG:function(){return j(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},
s:function(){return this.seconds()},S:function(){return i(this.milliseconds()/100)},SS:function(){return j(i(this.milliseconds()/10),2)},SSS:function(){return j(this.milliseconds(),3)},SSSS:function(){return j(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+j(i(a/60),2)+":"+j(i(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+j(i(a/60),2)+j(i(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},
Q:function(){return this.quarter()}},ta=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ra.length;)k=ra.pop(),t[k+"o"]=ua(t[k],k);for(;sa.length;)k=sa.pop(),t[k+k]=X(t[k],2);t.DDDD=X(t.DDD,3);l(Y.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"===typeof b?this[c]=b:this["_"+c]=b},_months:"January February March April May June July August September October November December".split(" "),months:function(a){return this._months[a.month()]},_monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c;this._monthsParse||(this._monthsParse=[]);for(b=0;12>b;b++)if(this._monthsParse[b]||(c=e.utc([2E3,b]),c="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=RegExp(c.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c;this._weekdaysParse||(this._weekdaysParse=[]);for(b=0;7>b;b++)if(this._weekdaysParse[b]||(c=e([2E3,1]).day(b),c="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=RegExp(c.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",
L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b);return b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",
nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"===typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"===typeof e?e(a,b,c,
d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[0<a?"future":"past"];return"function"===typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return B(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});e=function(a,b,c,d){var e;"boolean"===typeof c&&(d=c,c=
void 0);e={_isAMomentObject:!0};e._i=a;e._f=b;e._l=c;e._strict=d;e._isUTC=!1;e._pf=A();return pa(e)};e.suppressDeprecationWarnings=!1;e.createFromInputFallback=z("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)});e.utc=function(a,b,c,d){var e;"boolean"===typeof c&&(d=c,c=void 0);e={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0};e._l=
c;e._i=a;e._f=b;e._strict=d;e._pf=A();return pa(e).utc()};e.unix=function(a){return e(1E3*a)};e.duration=function(a,b){var c=a,d=null,g;if(e.isDuration(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if("number"===typeof a)c={},b?c[b]=a:c.milliseconds=a;else if(d=Sa.exec(a))g="-"===d[1]?-1:1,c={y:0,d:i(d[o])*g,h:i(d[m])*g,m:i(d[w])*g,s:i(d[C])*g,ms:i(d[D])*g};else if(d=Ta.exec(a))g="-"===d[1]?-1:1,c=function(a){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*g},c={y:c(d[2]),M:c(d[3]),
d:c(d[4]),h:c(d[5]),m:c(d[6]),s:c(d[7]),w:c(d[8])};d=new G(c);e.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang);return d};e.version="2.6.0";e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";e.momentProperties=oa;e.updateOffset=function(){};e.lang=function(a,b){if(!a)return e.fn._lang._abbr;if(b){var c=M(a);b.abbr=c;x[c]||(x[c]=new Y);x[c].set(b)}else null===b?(delete x[a],a="en"):x[a]||q(a);return(e.duration.fn._lang=e.fn._lang=q(a))._abbr};e.langData=function(a){a&&(a._lang&&a._lang._abbr)&&(a=
a._lang._abbr);return q(a)};e.isMoment=function(a){return a instanceof F||null!=a&&a.hasOwnProperty("_isAMomentObject")};e.isDuration=function(a){return a instanceof G};for(k=ta.length-1;0<=k;--k)xa(ta[k]);e.normalizeUnits=function(a){return r(a)};e.invalid=function(a){var b=e.utc(NaN);null!=a?l(b._pf,a):b._pf.userInvalidated=!0;return b};e.parseZone=function(){return e.apply(null,arguments).parseZone()};e.parseTwoDigitYear=function(a){return i(a)+(68<i(a)?1900:2E3)};l(e.fn=F.prototype,{clone:function(){return e(this)},
valueOf:function(){return+this._d+6E4*(this._offset||0)},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=e(this).utc();return 0<a.year()&&9999>=a.year()?P(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),
this.seconds(),this.milliseconds()]},isValid:function(){return ea(this)},isDSTShifted:function(){return this._a?this.isValid()&&0<ca(this._a,(this._isUTC?e.utc(this._a):e(this._a)).toArray()):!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=!1;return this},format:function(a){a=P(this,a||e.defaultFormat);return this.lang().postformat(a)},add:function(a,b){var c;c="string"===
typeof a?e.duration(+b,a):e.duration(a,b);I(this,c,1);return this},subtract:function(a,b){var c;c="string"===typeof a?e.duration(+b,a):e.duration(a,b);I(this,c,-1);return this},diff:function(a,b,c){var a=N(a,this),d=6E4*(this.zone()-a.zone()),g,b=r(b);"year"===b||"month"===b?(g=432E5*(this.daysInMonth()+a.daysInMonth()),d=12*(this.year()-a.year())+(this.month()-a.month()),d+=(this-e(this).startOf("month")-(a-e(a).startOf("month")))/g,d-=6E4*(this.zone()-e(this).startOf("month").zone()-(a.zone()-e(a).startOf("month").zone()))/
g,"year"===b&&(d/=12)):(g=this-a,d="second"===b?g/1E3:"minute"===b?g/6E4:"hour"===b?g/36E5:"day"===b?(g-d)/864E5:"week"===b?(g-d)/6048E5:g);return c?d:v(d)},from:function(a,b){return e.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(e(),a)},calendar:function(){var a=N(e(),this).startOf("day"),a=this.diff(a,"days",!0);return this.format(this.lang().calendar(-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse",
this))},isLeapYear:function(){return L(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=na(a,this.lang()),this.add({d:a-b})):b},month:u("Month",!0),startOf:function(a){a=r(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);
case "second":this.milliseconds(0)}"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this},endOf:function(a){a=r(a);return this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)>+e(a).startOf(b)},isBefore:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)<+e(a).startOf(b)},isSame:function(a,
b){b=b||"ms";return+this.clone().startOf(b)===+N(a,this).startOf(b)},min:function(a){a=e.apply(null,arguments);return a<this?this:a},max:function(a){a=e.apply(null,arguments);return a>this?this:a},zone:function(a,b){var c=this._offset||0;if(null!=a)"string"===typeof a&&(a=la(a)),16>Math.abs(a)&&(a*=60),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?I(this,e.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null));
else return this._isUTC?c:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){this._tzm?this.zone(this._tzm):"string"===typeof this._i&&this.zone(this._i);return this},hasAlignedHourOffset:function(a){a=a?e(a).zone():0;return 0===(this.zone()-a)%60},daysInMonth:function(){return K(this.year(),this.month())},dayOfYear:function(a){var b=y((e(this).startOf("day")-e(this).startOf("year"))/
864E5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=B(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=B(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=B(this,1,4).week;return null==a?b:this.add("d",
7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return da(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return da(this.year(),a.dow,a.doy)},get:function(a){a=r(a);return this[a]()},set:function(a,b){a=r(a);if("function"===typeof this[a])this[a](b);return this},lang:function(a){if(void 0===a)return this._lang;this._lang=
q(a);return this}});e.fn.millisecond=e.fn.milliseconds=u("Milliseconds",!1);e.fn.second=e.fn.seconds=u("Seconds",!1);e.fn.minute=e.fn.minutes=u("Minutes",!1);e.fn.hour=e.fn.hours=u("Hours",!0);e.fn.date=u("Date",!0);e.fn.dates=z("dates accessor is deprecated. Use date instead.",u("Date",!0));e.fn.year=u("FullYear",!0);e.fn.years=z("years accessor is deprecated. Use year instead.",u("FullYear",!0));e.fn.days=e.fn.day;e.fn.months=e.fn.month;e.fn.weeks=e.fn.week;e.fn.isoWeeks=e.fn.isoWeek;e.fn.quarters=
e.fn.quarter;e.fn.toJSON=e.fn.toISOString;l(e.duration.fn=G.prototype,{_bubble:function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;d.milliseconds=a%1E3;a=v(a/1E3);d.seconds=a%60;a=v(a/60);d.minutes=a%60;a=v(a/60);d.hours=a%24;b+=v(a/24);d.days=b%30;c+=v(b/30);d.months=c%12;b=v(c/12);d.years=b},weeks:function(){return v(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*(this._months%12)+31536E6*i(this._months/12)},humanize:function(a){var b=
+this,c;c=!a;var d=this.lang(),e=y(Math.abs(b)/1E3),f=y(e/60),h=y(f/60),i=y(h/24),j=y(i/365),e=45>e&&["s",e]||1===f&&["m"]||45>f&&["mm",f]||1===h&&["h"]||22>h&&["hh",h]||1===i&&["d"]||25>=i&&["dd",i]||45>=i&&["M"]||345>i&&["MM",y(i/30)]||1===j&&["y"]||["yy",j];e[2]=c;e[3]=0<b;e[4]=d;c=Na.apply({},e);a&&(c=this.lang().pastFuture(b,c));return this.lang().postformat(c)},add:function(a,b){var c=e.duration(a,b);this._milliseconds+=c._milliseconds;this._days+=c._days;this._months+=c._months;this._bubble();
return this},subtract:function(a,b){var c=e.duration(a,b);this._milliseconds-=c._milliseconds;this._days-=c._days;this._months-=c._months;this._bubble();return this},get:function(a){a=r(a);return this[a.toLowerCase()+"s"]()},as:function(a){a=r(a);return this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:e.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+
this.milliseconds()/1E3);return!this.asSeconds()?"P0D":(0>this.asSeconds()?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":"")}});for(k in W)W.hasOwnProperty(k)&&(qa(k,W[k]),Qa(k.toLowerCase()));qa("Weeks",6048E5);e.duration.fn.asMonths=function(){return(+this-31536E6*this.years())/2592E6+12*this.years()};e.lang("en",{ordinal:function(a){var b=a%10,b=1===i(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});"undefined"===typeof ender&&
(Ra.moment=e)});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.lib.js' */
define("jira/moment/moment.lib",["atlassian/libs/moment-2.6.0"],function(n){return n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.formatter.js' */
define("jira/moment/moment.jira.formatter",["underscore","exports"],function(t,e){"use strict";function r(e){return u[e]||t.reduce(e,function(t,e){return t+(u[e]||e)},"")}function n(e){var n=!1,u=!1,a="",o=t.reduce(e,function(t,e,o,i){return u?u=!1:"'"===e?(a&&(t+=r(a),a=""),"'"===i[o+1]?(t+=e,u=!0):(t+=n?"]":"[",n=!n)):n?t+=e:/[a-zA-Z]/.test(e)?a&&a[a.length-1]!==e?(t+=r(a),a=e):a+=e:(a&&(t+=r(a),a=""),t+=e),t},"");return a&&(o+=r(a)),o}var u={d:"D",y:"Y",a:"A",E:"d",u:"d",Z:"ZZ",z:"[GMT]ZZ",XX:"ZZ",XXX:"Z"};e.translateSimpleDateFormat=n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.i18n.js' */
define("jira/moment/moment.jira.i18n",["jira/moment/moment.lib","jira/moment/moment.jira.formatter","jira/util/formatter","jira/util/data/meta","wrm/data"],function(e,t,a,m,o){"use strict";var r=o.claim("jira.webresources:dateFormatProvider.dateFormat");e.lang("jira",{months:r.months,monthsShort:r.monthsShort,weekdays:r.weekdays,weekdaysShort:r.weekdaysShort,weekdaysMin:r.weekdaysShort,longDateFormat:{LT:t.translateSimpleDateFormat(m.get("date-time")),L:t.translateSimpleDateFormat(m.get("date-day")),LL:t.translateSimpleDateFormat(m.get("date-dmy")),LLL:t.translateSimpleDateFormat(m.get("date-complete"))},meridiem:function(e){return r.meridiem[+(e>11)]},calendar:{sameDay:"LLL",nextDay:"LLL",nextWeek:"LLL",lastDay:"LLL",lastWeek:"LLL",sameElse:"LLL"},relativeTime:{future:a.format("in {0}","%s"),past:a.format("{0} ago","%s"),s:"a few seconds",m:"a minute",mm:a.format("{0} minutes","%d"),h:"an hour",hh:a.format("{0} hours","%d"),d:"a day",dd:a.format("{0} days","%d"),M:"a month",MM:a.format("{0} months","%d"),y:"a year",yy:a.format("{0} years","%d")}})});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.js' */
define("jira/moment",["jira/moment/moment.lib","jira/moment/moment.jira.i18n"],function(t,n){return t.splitDate=function(t,n){return Date.splitDate(t,n)},t});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.legacy.js' */
!function(){AJS.namespace("JIRA.translateSimpleDateFormat",null,require("jira/moment/moment.jira.formatter").translateSimpleDateFormat),AJS.namespace("window.moment",null,require("jira/moment"))}();;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/time.js' */
define("jira/jquery/plugins/livestamp/time",["jira/util/formatter","jira/moment","jira/util/data/meta"],function(e,t,n){"use strict";function o(e,t){this.key=e,this.isAge=t}function r(t,n,o){return t in y?e.format(y[t],o):null}function a(e){switch(e.key){case"short":case"shortAge":return"ll";case"long":case"longAge":return"LL";case"full":case"fullAge":return"LLL";case"timestamp":return"LLL";default:return null}}function i(e){return e.clone().hours(0).minutes(0).seconds(0).milliseconds(0)}function u(e,t){var n=i(e),o=n.clone().subtract("d",1);return o<=t&&t<n}function l(e,t){var n=i(e).add("d",1),o=n.clone().add("d",1);return n<=t&&t<o}function m(e,t){return Math.floor(t.diff(e,"minutes",!0))}function s(e,t){var n=t.diff(e,"hours",!0);return Math.round(n)}function c(e,t){return Math.floor(t.diff(e,"days",!0))}function d(e,t){var n=a(t);return e.format(n)}function g(e,n,o){if(o=o||t(),e<=o){if(e>o.clone().subtract("m",1))return r("aMomentAgo",n);if(e>o.clone().subtract("m",2))return r("oneMinuteAgo",n);if(e>o.clone().subtract("m",50))return r("xMinutesAgo",n,m(e,o));if(e>o.clone().subtract("m",90))return r("oneHourAgo",n);if(u(o,e)&&e<o.clone().subtract("h",5))return r("oneDayAgo",n);if(e>o.clone().subtract("d",1))return r("xHoursAgo",n,s(e,o));if(e>o.clone().subtract("d",7))return r("xDaysAgo",n,Math.max(c(e,o),2));if(e>o.clone().subtract("d",8))return r("oneWeekAgo",n)}else{if(e<o.clone().add("m",1))return r("inAMoment",n);if(e<o.clone().add("m",2))return r("inOneMinute",n);if(e<o.clone().add("m",50))return r("inXMinutes",n,m(o,e));if(e<o.clone().add("m",90))return r("inOneHour",n);if(l(o,e)&&e>o.clone().add("h",5))return r("inOneDay",n);if(e<o.clone().add("d",1))return r("inXHours",n,s(o,e));if(e<o.clone().add("d",7))return r("inXDays",n,Math.max(c(o,e),2));if(e<o.clone().add("d",8))return r("inOneWeek",n)}return d(e,n)}var f={},v=n.getBoolean("date-relativize");o.types={};for(var x,A=["shortAge","longAge","fullAge","short","long","full","timestamp"],h=0,T=A.length;h<T;h++)x=A[h],o.types[x]=new o(x,x.toLowerCase().indexOf("age")!==-1);var y={};return f.FormatType=o,f.formatDate=function(e,t,n){return e&&t?(v||n)&&t.isAge?g(e,t):d(e,t):null},f.setRelativeTranslations=function(e){for(var t in e)y[t]=e[t]},f.restoreDefaultRelativeTranslations=function(){this.setRelativeTranslations({inAMoment:"Now",inOneMinute:"In 1 minute",inXMinutes:"In {0} minutes",inOneHour:"In 1 hour",inXHours:"In {0} hours",inOneDay:"Tomorrow",inXDays:"In {0} days",inOneWeek:"In 1 week",aMomentAgo:"Just now",oneMinuteAgo:"1 minute ago",xMinutesAgo:"{0} minutes ago",oneHourAgo:"1 hour ago",xHoursAgo:"{0} hours ago",oneDayAgo:"Yesterday",xDaysAgo:"{0} days ago",oneWeekAgo:"1 week ago"})},f.restoreDefaultRelativeTranslations(),f.formatDateWithRelativeAge=g,f.formatDateWithFormatString=d,f}),AJS.namespace("JIRA.Time",null,require("jira/jquery/plugins/livestamp/time"));;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/livestamp.js' */
define("jira/jquery/plugins/livestamp/livestamp",["jquery","jira/skate","jira/moment","jira/util/data/meta","jira/jquery/plugins/livestamp/time"],function(t,e,i,a,r){"use strict";var n=6e3,u=a.getBoolean("date-relativize");e("livestamp",{type:e.type.CLASSNAME,prototype:{update:function(){var e=t(this),a=e.data("relativize"),n=e.attr("datetime");if(n&&(n=isNaN(n)?i(n).zone(n):i(parseInt(n,10)),i.isMoment(n)&&n.isValid())){var m=e.data("datetime-format");m=m?m:"fullAge",u||a||(m=m.replace("Age",""));var o=r.formatDate(n,r.FormatType.types[m],a);return e.text()!==o&&e.text(o),!0}return!1},onTimeout:function(){this.timerId&&(clearTimeout(this.timerId),this.timerId=!1);var t=this.update();t&&(this.timerId=setTimeout(this.onTimeout.bind(this),n))}},attributes:function(t){t.onTimeout()},attached:function(t){t.onTimeout()},detached:function(t){clearTimeout(t.timerId),t.timerId=!1}}),t.fn.livestamp=function(){return this}}),function(){require("jira/jquery/plugins/livestamp/livestamp")}();;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:ajs-helper', location = 'util/ajshelper.js' */
define("jira/components/utils/ajshelper",[],function(){"use strict";var e=window.AJS;return{escapeHtml:e.escapeHtml.bind(e),LEFT:e.LEFT,Templates:e.Templates,HIDE_REASON:e.HIDE_REASON,trigger:e.trigger.bind(e),log:e.log.bind(e),extractBodyFromResponse:e.extractBodyFromResponse,whenIType:function(){return e.whenIType},activeShortcuts:function(){return e.activeShortcuts}}});
//# sourceMappingURL=ajshelper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:underscore', location = 'libs/underscore.js' */
define("jira/components/libs/underscore",["require"],function(e){"use strict";return e("atlassian/libs/underscore-1.5.2")});
//# sourceMappingURL=underscore-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:analytics-tracker', location = 'analytics-tracker/tracker.js' */
define("jira/components/analytics-tracker/tracker",["jira/components/libs/underscore","jira/issue","jira/components/utils/ajshelper","jquery"],function(e,t,n,i){"use strict";function r(){if(!y)try{y=require("jira/api/projects")}catch(e){y=null}}function o(){return m?m:(r(),y?y.getCurrentProjectId():void 0)}function a(){return j?j:(r(),y?y.getCurrentProjectType():void 0)}function c(){return g?g:t?t.getIssueId():void 0}function s(e){if(e.attr("class")||e.attr("id"))return e;var t=e.parent().closest("[class], [id]");return t.length?t:e}function u(e){var t=i(e.target).closest(p),n=s(t);l("viewissue","generic-action",{className:n.attr("class")||"no-element-className",id:n.attr("id")||"no-element-id"}),k=!1}function d(){i(".issue-container").off("click",p,u).on("click",p,u),i("#create_link").off("click",u).on("click",u),w&&clearTimeout(w),w=setTimeout(function(){k&&l("viewissue","inactive-timeout")},v)}function l(t,i,r){var s=f+"."+t+"."+i;I=I||Math.round(performance.now());var u=Math.round(performance.now())-I;r=r||{};var d={projectId:r.projectId||o(),projectType:r.projectType||a(),issueId:r.issueId||c(),userAgent:window.navigator.userAgent,timeSinceIssueLoaded:u},l=e.extend(d,r);n.trigger("analyticsEvent",{name:s,data:l})}var f="jira.platform.fe.web",v=3e5,p="a, .editable-field, button",m=void 0,j=void 0,g=void 0,k=void 0,w=void 0,I=void 0,y=void 0;return{initialize:function(e,t,n){m=e,j=t,g=n,k=!0,I=Math.round(performance.now()),d()},trackEvent:l}});
//# sourceMappingURL=tracker-min.js.map
;
;
/* module-key = 'com.atlassian.plugin.jslibs:uri-1.14.1', location = 'libs/uri/1.14.1/uri-1.14.1.js' */
(function(n){define("atlassian/libs/uri-1.14.1",function(){var q={};n.call(q);return q.URI.noConflict()})})(function(){var n=this.punycode,q=this.IPv6,p=this.SecondLevelDomains,k=this,e=function(a,b){if(!(this instanceof e))return new e(a,b);void 0===a&&(a="undefined"!==typeof location?location.href+"":"");this.href(a);return void 0!==b?this.absoluteTo(b):this},o=function(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},t=function(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,
-1)},j=function(a){return"Array"===t(a)},s=function(a,b){var c,e;if(j(b)){c=0;for(e=b.length;c<e;c++)if(!s(a,b[c]))return!1;return!0}var h=t(b);c=0;for(e=a.length;c<e;c++)if("RegExp"===h){if("string"===typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1},w=function(a,b){if(!j(a)||!j(b)||a.length!==b.length)return!1;a.sort();b.sort();for(var c=0,e=a.length;c<e;c++)if(a[c]!==b[c])return!1;return!0},A=function(a){return escape(a)},u=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,
A).replace(/\*/g,"%2A")},r=function(a){return function(b,c){if(void 0===b)return this._parts[a]||"";this._parts[a]=b||null;this.build(!c);return this}},x=function(a,b){return function(c,e){if(void 0===c)return this._parts[a]||"";null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!e);return this}},B=k&&k.URI;e.version="1.14.1";var d=e.prototype,m=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,
port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}};e.duplicateQueryParameters=!1;e.escapeQuerySpace=!0;e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;e.idn_expression=/[^a-z0-9\.-]/i;e.punycode_expression=/(xn--)/i;e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};e.invalid_hostname_characters=
/[^a-zA-Z0-9\.-]/;e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]}};e.encode=u;e.decode=decodeURIComponent;e.iso8859=function(){e.encode=escape;e.decode=unescape};e.unicode=function(){e.encode=u;e.decode=
decodeURIComponent};e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",",
"%3B":";","%3D":"="}}}};e.encodeQuery=function(a,b){var c=e.encode(a+"");void 0===b&&(b=e.escapeQuerySpace);return b?c.replace(/%20/g,"+"):c};e.decodeQuery=function(a,b){a+="";void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}};e.recodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")};e.decodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);
return a.join("/")};var y={encode:"encode",decode:"decode"},v,z=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(f){return c}}};for(v in y)e[v+"PathSegment"]=z("pathname",y[v]);e.encodeReserved=z("reserved","encode");e.parse=function(a,b){var c;b||(b={});c=a.indexOf("#");-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c));c=a.indexOf("?");-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,
c));"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),-1<c&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)));b.path=a;return b};e.parseHost=function(a,b){var c=a.indexOf("/"),e;-1===c&&(c=a.length);"["===a.charAt(0)?(e=a.indexOf("]"),b.hostname=a.substring(1,e)||null,b.port=a.substring(e+
2,c)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(e=a.substring(0,c).split(":"),b.hostname=e[0]||null,b.port=e[1]||null);b.hostname&&"/"!==a.substring(c).charAt(0)&&(c++,a="/"+a);return a.substring(c)||"/"};e.parseAuthority=function(a,b){a=e.parseUserinfo(a,b);return e.parseHost(a,b)};e.parseUserinfo=function(a,b){var c=a.indexOf("/"),f=a.lastIndexOf("@",-1<c?c:a.length-1);-1<f&&(-1===c||f<c)?(c=a.substring(0,f).split(":"),
b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(f+1)):(b.username=null,b.password=null);return a};e.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var c={},f=a.split("&"),h=f.length,d,i,l=0;l<h;l++)d=f[l].split("="),i=e.decodeQuery(d.shift(),b),d=d.length?e.decodeQuery(d.join("="),b):null,m.call(c,i)?("string"===typeof c[i]&&(c[i]=[c[i]]),c[i].push(d)):c[i]=d;return c};e.build=function(a){var b=
"";a.protocol&&(b+=a.protocol+":");if(!a.urn&&(b||a.hostname))b+="//";b+=e.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path.charAt(0)&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"===typeof a.query&&a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&a.fragment&&(b+="#"+a.fragment);return b};e.buildHost=function(a){var b="";if(a.hostname)b=e.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname;else return"";a.port&&(b+=":"+a.port);return b};e.buildAuthority=
function(a){return e.buildUserinfo(a)+e.buildHost(a)};e.buildUserinfo=function(a){var b="";a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@");return b};e.buildQuery=function(a,b,c){var f="",h,d,i,l;for(d in a)if(m.call(a,d)&&d)if(j(a[d])){h={};i=0;for(l=a[d].length;i<l;i++)void 0!==a[d][i]&&void 0===h[a[d][i]+""]&&(f+="&"+e.buildQueryParameter(d,a[d][i],c),!0!==b&&(h[a[d][i]+""]=!0))}else void 0!==a[d]&&(f+="&"+e.buildQueryParameter(d,a[d],c));return f.substring(1)};
e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")};e.addQuery=function(a,b,c){if("object"===typeof b)for(var f in b)m.call(b,f)&&e.addQuery(a,f,b[f]);else if("string"===typeof b)void 0===a[b]?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),j(c)||(c=[c]),a[b]=(a[b]||[]).concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};e.removeQuery=function(a,b,c){var f;if(j(b)){c=0;for(f=b.length;c<f;c++)a[b[c]]=
void 0}else if("object"===typeof b)for(f in b)m.call(b,f)&&e.removeQuery(a,f,b[f]);else if("string"===typeof b)if(void 0!==c)if(a[b]===c)a[b]=void 0;else{if(j(a[b])){f=a[b];var d={},g,i;if(j(c)){g=0;for(i=c.length;g<i;g++)d[c[g]]=!0}else d[c]=!0;g=0;for(i=f.length;g<i;g++)void 0!==d[f[g]]&&(f.splice(g,1),i--,g--);a[b]=f}}else a[b]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};e.hasQuery=function(a,b,c,f){if("object"===typeof b){for(var d in b)if(m.call(b,
d)&&!e.hasQuery(a,d,b[d]))return!1;return!0}if("string"!==typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(t(c)){case "Undefined":return b in a;case "Boolean":return a=Boolean(j(a[b])?a[b].length:a[b]),c===a;case "Function":return!!c(a[b],b,a);case "Array":return!j(a[b])?!1:(f?s:w)(a[b],c);case "RegExp":return!j(a[b])?Boolean(a[b]&&a[b].match(c)):!f?!1:s(a[b],c);case "Number":c=String(c);case "String":return!j(a[b])?a[b]===c:!f?!1:s(a[b],c);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");
}};e.commonPath=function(a,b){var c=Math.min(a.length,b.length),e;for(e=0;e<c;e++)if(a.charAt(e)!==b.charAt(e)){e--;break}if(1>e)return a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(e)||"/"!==b.charAt(e))e=a.substring(0,e).lastIndexOf("/");return a.substring(0,e+1)};e.withinString=function(a,b,c){c||(c={});var f=c.start||e.findUri.start,d=c.end||e.findUri.end,g=c.trim||e.findUri.trim,i=/[a-z0-9-]=["']?$/i;for(f.lastIndex=0;;){var l=f.exec(a);if(!l)break;l=l.index;if(c.ignoreHtml){var j=
a.slice(Math.max(l-3,0),l);if(j&&i.test(j))continue}var j=l+a.slice(l).search(d),k=a.slice(l,j).replace(g,"");if(!c.ignore||!c.ignore.test(k))j=l+k.length,k=b(k,l,j,a),a=a.slice(0,l)+k+a.slice(j),f.lastIndex=l+k.length}f.lastIndex=0;return a};e.ensureValidHostname=function(a){if(a.match(e.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(n.toASCII(a).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+
a+'" contains characters other than [A-Z0-9.-]');}};e.noConflict=function(a){if(a)return a={URI:this.noConflict()},k.URITemplate&&"function"===typeof k.URITemplate.noConflict&&(a.URITemplate=k.URITemplate.noConflict()),k.IPv6&&"function"===typeof k.IPv6.noConflict&&(a.IPv6=k.IPv6.noConflict()),k.SecondLevelDomains&&"function"===typeof k.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=k.SecondLevelDomains.noConflict()),a;k.URI===this&&(k.URI=B);return this};d.build=function(a){if(!0===a)this._deferred_build=
!0;else if(void 0===a||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this};d.clone=function(){return new e(this)};d.valueOf=d.toString=function(){return this.build(!1)._string};d.protocol=r("protocol");d.username=r("username");d.password=r("password");d.hostname=r("hostname");d.port=r("port");d.query=x("query","?");d.fragment=x("fragment","#");d.search=function(a,b){var c=this.query(a,b);return"string"===typeof c&&c.length?"?"+c:c};d.hash=function(a,b){var c=
this.fragment(a,b);return"string"===typeof c&&c.length?"#"+c:c};d.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}this._parts.path=a?e.recodePath(a):"/";this.build(!b);return this};d.path=d.pathname;d.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="";this._parts=e._parts();var f=a instanceof e,d="object"===typeof a&&(a.hostname||a.path||a.pathname);a.nodeName&&(d=e.getDomAttribute(a),a=a[d]||
"",d=!1);!f&&(d&&void 0!==a.pathname)&&(a=a.toString());if("string"===typeof a||a instanceof String)this._parts=e.parse(String(a),this._parts);else if(f||d)for(c in f=f?a._parts:a,f)m.call(this._parts,c)&&(this._parts[c]=f[c]);else throw new TypeError("invalid input");this.build(!b);return this};d.is=function(a){var b=!1,c=!1,f=!1,d=!1,g=!1,i=!1,j=!1,k=!this._parts.urn;this._parts.hostname&&(k=!1,c=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=c||f,g=
(d=!b)&&p&&p.has(this._parts.hostname),i=d&&e.idn_expression.test(this._parts.hostname),j=d&&e.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return k;case "absolute":return!k;case "domain":case "name":return d;case "sld":return g;case "ip":return b;case "ip4":case "ipv4":case "inet4":return c;case "ip6":case "ipv6":case "inet6":return f;case "idn":return i;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return j}return null};
var C=d.protocol,D=d.port,E=d.hostname;d.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return C.call(this,a,b)};d.scheme=d.protocol;d.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');
return D.call(this,a,b)};d.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c);a=c.hostname}return E.call(this,a,b)};d.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildHost(this._parts):"";e.parseHost(a,this._parts);this.build(!b);return this};d.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildAuthority(this._parts):
"";e.parseAuthority(a,this._parts);this.build(!b);return this};d.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}"@"!==a[a.length-1]&&(a+="@");e.parseUserinfo(a,this._parts);this.build(!b);return this};d.resource=function(a,b){var c;if(void 0===a)return this.path()+this.search()+this.hash();c=e.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=
c.fragment;this.build(!b);return this};d.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}c=this._parts.hostname.length-this.domain().length;c=this._parts.hostname.substring(0,c);c=RegExp("^"+o(c));a&&"."!==a.charAt(a.length-1)&&(a+=".");a&&e.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,
a);this.build(!b);return this};d.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&2>c.length)return this._parts.hostname;c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||""}if(!a)throw new TypeError("cannot set domain empty");e.ensureValidHostname(a);
!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=RegExp(o(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a));this.build(!b);return this};d.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.lastIndexOf("."),c=this._parts.hostname.substring(c+1);return!0!==b&&p&&p.list[c.toLowerCase()]?p.get(this._parts.hostname)||c:c}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(p&&
p.is(a))c=RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a);else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");c=RegExp(o(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};d.directory=function(a,b){if(this._parts.urn)return void 0===a?
"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}c=this._parts.path.length-this.filename().length;c=this._parts.path.substring(0,c);c=RegExp("^"+o(c));this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a));a&&"/"!==a.charAt(a.length-1)&&(a+="/");a=e.recodePath(a);this._parts.path=
this._parts.path.replace(c,a);this.build(!b);return this};d.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?e.decodePathSegment(c):c}c=!1;"/"===a.charAt(0)&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var f=RegExp(o(this.filename())+"$"),a=e.recodePath(a);this._parts.path=this._parts.path.replace(f,a);c?this.normalizePath(b):
this.build(!b);return this};d.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),f=c.lastIndexOf(".");if(-1===f)return"";c=c.substring(f+1);c=/^[a-z0-9%]+$/i.test(c)?c:"";return a?e.decodePathSegment(c):c}"."===a.charAt(0)&&(a=a.substring(1));if(c=this.suffix())f=a?RegExp(o(c)+"$"):RegExp(o("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}f&&(a=e.recodePath(a),
this._parts.path=this._parts.path.replace(f,a));this.build(!b);return this};d.segment=function(a,b,c){var e=this._parts.urn?":":"/",d=this.path(),g="/"===d.substring(0,1),d=d.split(e);void 0!==a&&"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');g&&d.shift();0>a&&(a=Math.max(d.length+a,0));if(void 0===b)return void 0===a?d:d[a];if(null===a||void 0===d[a])if(j(b))for(var d=[],a=0,i=b.length;a<i;a++){if(b[a].length||
d.length&&d[d.length-1].length)d.length&&!d[d.length-1].length&&d.pop(),d.push(b[a])}else{if(b||"string"===typeof b)""===d[d.length-1]?d[d.length-1]=b:d.push(b)}else b?d[a]=b:d.splice(a,1);g&&d.unshift("");return this.path(d.join(e),c)};d.segmentCoded=function(a,b,c){var d,h;"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0===b){a=this.segment(a,b,c);if(j(a)){d=0;for(h=a.length;d<h;d++)a[d]=e.decode(a[d])}else a=void 0!==a?e.decode(a):void 0;return a}if(j(b)){d=0;for(h=b.length;d<h;d++)b[d]=e.decode(b[d])}else b=
"string"===typeof b||b instanceof String?e.encode(b):b;return this.segment(a,b,c)};var F=d.query;d.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}return void 0!==a&&"string"!==typeof a?(this._parts.query=e.buildQuery(a,
this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):F.call(this,a,b)};d.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof a||a instanceof String)d[a]=void 0!==b?b:null;else if("object"===typeof a)for(var h in a)m.call(a,h)&&(d[h]=a[h]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);
"string"!==typeof a&&(c=b);this.build(!c);return this};d.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.addQuery(d,a,void 0===b?null:b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.removeQuery(d,a,b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,
this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)};d.setSearch=d.setQuery;d.addSearch=d.addQuery;d.removeSearch=d.removeQuery;d.hasSearch=d.hasQuery;d.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};
d.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};d.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&q&&(this._parts.hostname=q.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this};d.normalizePort=function(a){"string"===typeof this._parts.protocol&&
this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this};d.normalizePath=function(a){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var b,c=this._parts.path,d="",h,g;"/"!==c.charAt(0)&&(b=!0,c="/"+c);c=c.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");b&&(d=c.substring(1).match(/^(\.\.\/)+/)||"")&&(d=d[0]);for(;;){h=c.indexOf("/..");if(-1===h)break;else if(0===h){c=c.substring(3);continue}g=c.substring(0,h).lastIndexOf("/");
-1===g&&(g=h);c=c.substring(0,g)+c.substring(h+3)}b&&this.is("relative")&&(c=d+c.substring(1));c=e.recodePath(c);this._parts.path=c;this.build(!a);return this};d.normalizePathname=d.normalizePath;d.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a));return this};d.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));
return this};d.normalizeSearch=d.normalizeQuery;d.normalizeHash=d.normalizeFragment;d.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape;e.decode=decodeURIComponent;this.normalize();e.encode=a;e.decode=b;return this};d.unicode=function(){var a=e.encode,b=e.decode;e.encode=u;e.decode=unescape;this.normalize();e.encode=a;e.decode=b;return this};d.readable=function(){var a=this.clone();a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&
(a.is("punycode")&&n?(b+=n.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&(a._parts.path&&"/"!==a._parts.path.charAt(0))&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c="",d=0,h=a._parts.query.split("&"),g=h.length;d<g;d++){var i=(h[d]||"").split("="),c=c+("&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==i[1]&&(c+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}b+="?"+c.substring(1)}return b+=
e.decodeQuery(a.hash(),!0)};d.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],d,h;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof e||(a=new e(a));b._parts.protocol||(b._parts.protocol=a._parts.protocol);if(this._parts.hostname)return b;for(d=0;h=c[d];d++)b._parts[h]=a._parts[h];b._parts.path?".."===b._parts.path.substring(-2)&&(b._parts.path+="/"):(b._parts.path=a._parts.path,b._parts.query||
(b._parts.query=a._parts.query));"/"!==b.path().charAt(0)&&(a=a.directory(),b._parts.path=(a?a+"/":"")+b._parts.path,b.normalizePath());b.build();return b};d.relativeTo=function(a){var b=this.clone().normalize(),c,d,h,g;if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new e(a)).normalize();c=b._parts;d=a._parts;h=b.path();g=a.path();if("/"!==h.charAt(0))throw Error("URI is already relative");if("/"!==g.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");
c.protocol===d.protocol&&(c.protocol=null);if(!(c.username!==d.username||c.password!==d.password)&&!(null!==c.protocol||null!==c.username||null!==c.password)&&c.hostname===d.hostname&&c.port===d.port)c.hostname=null,c.port=null;else return b.build();if(h===g)return c.path="",b.build();a=e.commonPath(b.path(),a.path());if(!a)return b.build();d=d.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=d+c.path.substring(a.length);return b.build()};d.equals=function(a){var b=this.clone(),
a=new e(a),c={},d={},h={},g;b.normalize();a.normalize();if(b.toString()===a.toString())return!0;c=b.query();d=a.query();b.query("");a.query("");if(b.toString()!==a.toString()||c.length!==d.length)return!1;c=e.parseQuery(c,this._parts.escapeQuerySpace);d=e.parseQuery(d,this._parts.escapeQuerySpace);for(g in c)if(m.call(c,g)){if(j(c[g])){if(!w(c[g],d[g]))return!1}else if(c[g]!==d[g])return!1;h[g]=!0}for(g in d)if(m.call(d,g)&&!h[g])return!1;return!0};d.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=
!!a;return this};d.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};this.URI=e});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = '/file-service.js' */
define("jira/fileviewer/file-service",["jira/featureflags/feature-manager","jquery"],function(e,i){"use strict";function n(){return Object.keys(r).map(function(e){return r[e].join(", ")}).join(", ")}function t(e,i){Array.isArray(i)?e.push.apply(e,i):e.push(i)}var r={image:["a[file-preview-type=image]"],video:["a[file-preview-type=video]"],document:[]};return e.isFeatureEnabled("jira.fileviewer.disable.pdf")||r.document.push("a[file-preview-type=document]"),{findFiles:function(e){return i(e||document.body).find(n())},getFileSelector:n,getImageSelector:function(){return r.image.join(", ")},addImageSelector:function(e){t(r.image,e)},getVideoSelector:function(){return r.video.join(", ")},getDocumentSelector:function(){return r.document.join(", ")},addDocumentSelector:function(e){t(r.document,e)}}});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = '/fileviewer.js' */
define("jira/fileviewer",["wrm/require","jira/fileviewer/file-service","jira/loading/loading","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jira/components/analytics-tracker/tracker","jira/util/navigator","atlassian/libs/uri-1.14.1","jquery","underscore"],function(e,i,t,r,n,a,o,l,c){"use strict";function d(){var e=l.Deferred();return s().done(function(){e.resolve(FileViewer)}),e.promise()}function u(e){var i=o(e.data("download-url")||e.attr("href"));return a.isIE()&&a.majorVersion()<12&&i.addSearch("stream","true"),i.toString()}function f(e){return e.data("download-url")||e.attr("href")}function s(){return m||(m=e(["wr!com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer"]),m.done(function(){g=new FileViewer({enableMiniMode:!0,viewers:["image","document","video"],moduleBackend:require("jira/fileviewer/module-backend/asynchronous"),analyticsBackend:require("jira/fileviewer/module-backend/analytics")}),g.on("fv.open",function(){r.disable,n.trackEvent("viewissue.attachment.view","click")}),g.on("fv.close",r.enable)})),m}function v(){g&&g.close()}function p(){var e=[],t=i.getImageSelector(),r=i.getDocumentSelector(),n=i.getVideoSelector(),a=l(t+", "+r+", "+n);a.each(function(){var i=l(this).closest("a");i.is(t)&&e.push({type:"image/png",id:i.attr("file-preview-id"),src:f(i),title:i.attr("file-preview-title"),thumbnail:i.attr("file-preview-url")||i.attr("data-download-url")||i.find("img").attr("src")}),i.is(r)&&e.push({type:"application/pdf",id:i.attr("file-preview-id"),src:u(i),title:i.attr("file-preview-title")}),i.is(n)&&e.push({type:i.attr("file-preview-mime-type"),id:i.attr("file-preview-id"),src:f(i),title:i.attr("file-preview-title"),thumbnail:i.attr("file-preview-url")||i.attr("data-download-url")||i.find("img").attr("src")})});var o=c.uniq(e,!1,function(e){return e.id});g.setFiles(o),a.off("simpleClick.fvOpen").on("simpleClick.fvOpen",function(e){e.preventDefault(),g.open({id:l(this).attr("file-preview-id")})})}function w(e){if(g)p();else{var r=i.findFiles(e);r.off("simpleClick.fvInit").on("simpleClick.fvInit",function(e){e.preventDefault();var i=l(this);t.showLoadingIndicator(),AJS.dim(),s().done(function(){p(),g.open({id:i.attr("file-preview-id")})}).fail(function(){window.location=f(i)}).always(function(){r.off("simpleClick.fvInit"),AJS.undim(),l(".aui-blanket").remove(),t.hideLoadingIndicator()})})}}var m,g;return{attachToElements:w,closeViewer:v,addImageSelector:function(e){i.addImageSelector(e)},addDocumentSelector:function(e){i.addDocumentSelector(e)},getFileViewerConstructor:d}});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = 'includes/jira/viewissue/issuecomponents.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),JIRA.Templates.Issue.watchersWithBrowse=function(e,s){for(var a='<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><label class="js-add-watchers-label">'+soy.$$escapeHtml("Add Watchers")+'</label><div class="autocomplete-user-target"><select id="watchers" name="watchers" data-description="'+soy.$$escapeHtml("Start Typing for Users")+'" class="watchers-user-picker hidden" multiple="multiple">',t=e.watchers,l=t.length,c=0;c<l;c++){var o=t[c];a+="<option style=\"background-image:url('"+soy.$$escapeHtml(o.avatarUrls["16x16"])+'\')" selected="selected" value="'+soy.$$escapeHtml(o.name)+'">'+soy.$$escapeHtml(o.displayName)+"</option>"}return a+="</select></div></fieldset></form>"},JIRA.Templates.Issue.watchersNoBrowse=function(e,s){for(var a='<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><label for="watchers-multi-select">'+soy.$$escapeHtml("Add Watchers")+'</label><div><input type="text" class="text" id="watchers-nosearch" /><div class="description">'+soy.$$escapeHtml("Type username and press enter.")+'</div></div><div class="recipients"><ol class="watchers">',t=e.watchers,l=t.length,c=0;c<l;c++){var o=t[c];a+=JIRA.Templates.Fields.recipientUsername({username:o.name,icon:o.avatarUrls["16x16"],displayName:o.displayName,escape:!0})}return a+="</ol></div></fieldset></form>"},JIRA.Templates.Issue.error=function(e,s){for(var a="<p>"+soy.$$escapeHtml(e.msg)+"</p><ul>",t=e.errors,l=t.length,c=0;c<l;c++){var o=t[c];a+="<li>"+soy.$$escapeHtml(o)+"</li>"}return a+="</ul>"},JIRA.Templates.Issue.usersListReadOnly=function(e,s){for(var a='<form class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><div class="recipients"><ol class="voters">',t=e.users,l=t.length,c=0;c<l;c++){var o=t[c];a+=JIRA.Templates.Fields.recipientUsername({username:o.name,icon:o.avatarUrls["16x16"],displayName:o.displayName,readOnly:!0,escape:!0})}return a+="</ol></div></fieldset></form>"};;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/user-collection.js' */
define("jira/viewissue/watchers-voters/entities/user-collection",["require"],function(e){var r=e("jira/message"),s=e("backbone"),t=e("underscore"),o=e("jquery"),n=e("wrm/context-path"),i=e("jira/util/formatter"),a=JIRA.Templates.Issue,u=s.Model.extend({idAttribute:"key"});return s.Collection.extend({model:u,initialize:function(e){if(void 0===e)throw new Error("Must supply options");if(!e.issueKey)throw new Error("Must supply issue key");if(this.issueKey=e.issueKey,!e.endpoint)throw new Error("Must supply an endpoint");if(this.endpoint=e.endpoint,!e.modelKey)throw new Error("Must supply an model key");this.modelKey=e.modelKey},url:function(){return[n(),"rest/api/2/issue",this.issueKey,this.endpoint].join("/")},parse:function(e){return e&&e[this.modelKey]?e[this.modelKey]:[]},ajax:function(e){return e=t.extend({url:this.url(),headers:{"Content-Type":"application/json"},success:t.bind(function(){this.fetch()},this),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)},e),o.ajax(e)},getUser:function(e){return o.ajax({url:n()+"/rest/api/2/user?username="+encodeURIComponent(e),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)})},handleErrorResponse:function(e,s){var t=this._parseResponse(e.responseText);if(t.errorMessages){var o=a.error({msg:s,errors:t.errorMessages});r.showErrorMsg(o,{closeable:!0})}this.trigger("errorOccurred")},_parseResponse:function(e){try{return JSON.parse(e)}catch(e){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";r.showErrorMsg(e,{closeable:!0})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/voters-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/voters-user-collection",["jira/viewissue/watchers-voters/entities/user-collection"],function(e){return e.extend({initialize:function(t){var i={issueKey:t,endpoint:"votes",modelKey:"voters"};e.prototype.initialize.apply(this,[i])},vote:function(){return this.ajax({type:"POST"})},unvote:function(){return this.ajax({type:"DELETE"})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/watchers-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/watchers-user-collection",["jira/viewissue/watchers-voters/entities/user-collection","jira/util/data/meta"],function(e,t){return e.extend({initialize:function(i){this.canBrowseUsers=t.get("can-search-users"),this.isReadOnly=!t.get("can-edit-watchers");var s={issueKey:i,endpoint:"watchers",modelKey:"watchers"};e.prototype.initialize.apply(this,[s])},addWatcher:function(e){return this.ajax({type:"POST",data:'"'+e+'"'})},removeWatcher:function(e){return this.ajax({type:"DELETE",url:this.url()+"?username="+e})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/voters-view.js' */
define("jira/viewissue/watchers-voters/views/voters-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),r=e("underscore"),s=(e("jquery"),e("jira/jquery/deferred")),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return i.View.extend({$empty:void 0,initialize:function(e){this.collection=e.collection,this.collection.bind("replace reset add remove",this.render,this)},renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no voters for this issue"}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(r.bind(function(){this.$el.html(o.usersListReadOnly({users:this.collection.toJSON()})),this.renderNoWatchers(),e.resolve(this.$el)},this)),e.promise()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/abstract-watchers-view.js' */
define("jira/viewissue/watchers-voters/views/abstract-watchers-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),n=e("underscore"),r=e("jquery"),s=e("jira/jquery/deferred"),a=e("jira/util/formatter");return i.View.extend({$empty:void 0,renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no watchers."}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(n.bind(function(){this._render(),this.renderNoWatchers(),e.resolve(this.$el),setTimeout(n.bind(function(){this.focus()},this),0)},this)),e.promise()},watch:function(){r("#watching-toggle").text("Stop watching this issue")},unwatch:function(){r("#watching-toggle").text("Start watching this issue")},focus:r.noop,_incrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t+1),this.renderNoWatchers()},_decrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t-1),this.renderNoWatchers()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=r,i=e("jira/util/data/meta"),a=e("underscore"),s=e("jira/util/logger"),r=e("jira/field/multi-user-list-picker"),c=JIRA.Templates.Issue;return t.extend({events:{selected:"addWatcherToModel",unselect:"removeWatcherFromModel"},_render:function(){this.$el.html(c.watchersWithBrowse({watchers:this.collection.toJSON()}));var e=new r({element:this.$el.find(".watchers-user-picker"),width:220});this.$el.find(".js-add-watchers-label").attr("for",e.$field.attr("id"))},focus:function(){this.$el.find("#watchers-textarea").focus()},addWatcherToModel:function(e,t){e.preventDefault(),this.collection.addWatcher(t.value()).done(a.bind(function(){this._incrementWatcherCount(),t.value()===i.get("remote-user")&&this.watch()},this))},removeWatcherFromModel:function(e,t){this.collection.removeWatcher(t.value()).done(a.bind(function(){this._decrementWatcherCount(),t.value()===i.get("remote-user")&&(this.unwatch(),s.trace("jira.issue.watcher.deleted"))},this))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-no-browse-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-no-browse-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=e("jira/util/data/meta"),a=e("underscore"),i=e("jquery"),s=e("jira/util/logger"),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return t.extend({events:{"click .remove-recipient":"removeWatcher",submit:"addWatcher"},addWatcher:function(e){e.preventDefault(),this.removeInlineError();var t=i("#watchers-nosearch"),s=i.trim(t.val());t.attr("disabled","disabled"),this.hasUsername(s)?(t.removeAttr("disabled"),this.showInlineError(n.format("User {0} is already watching this issue",s)),t.val("")):this.collection.getUser(s).done(a.bind(function(e){var a=JIRA.Templates.Fields.recipientUsername({icon:e.avatarUrls["16x16"],username:e.name,displayName:e.displayName});s===r.get("remote-user")&&this.watch(),t.val(""),this.$(".watchers").append(a),this.collection.addWatcher(e.name),this._incrementWatcherCount()},this)).fail(a.bind(function(e){404===e.status&&this.showInlineError("User does not exist")},this)).always(function(){t.removeAttr("disabled").focus()})},hasUsername:function(e){var t=!1;return this.$(".watchers li").each(function(){if(i(this).attr("data-username")===e)return t=!0,!1}),t},removeInlineError:function(){this.$(".error").remove()},showInlineError:function(e){i("<div />").addClass("error").text(e).insertAfter(this.$(".description"))},focus:function(){i("#watchers-nosearch").focus()},removeWatcher:function(e){e.preventDefault();var t=i(e.target).closest("li"),a=t.attr("data-username");a&&(t.remove(),this.collection.removeWatcher(a),this._decrementWatcherCount(),a===r.get("remote-user")&&this.unwatch()),s.trace("jira.issue.watcher.deleted")},_render:function(){this.$el.html(o.watchersNoBrowse({watchers:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-read-only-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-read-only-view",["require"],function(e){var s=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=JIRA.Templates.Issue;return s.extend({_render:function(){this.$el.html(r.usersListReadOnly({users:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-inline-dialog-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view",["require"],function(e){var i=e("backbone"),t=e("jira/skate"),n=i.View.prototype.setElement;return i.View.extend({id:"inline-dialog-watchers",events:{"click .cancel":function(e){e.preventDefault(),this.hide()}},setElement:function(e){var s=e instanceof i.$?e.get(0):e;if(s)return this.el&&this.el.parentNode&&this.el!==s&&this.el.parentNode.removeChild(this.el),n.call(this,s),t.init(this.el),this},contents:function(e){var i=this.$el.find(".aui-inline-dialog-contents");0===i.length&&(i=AJS.$("<div/>",{class:"aui-inline-dialog-contents"}),this.$el.append(i)),i.html(e)},show:function(){this.el.setAttribute("open","")},hide:function(){this.el.removeAttribute("open")},isVisible:function(){return!!this.el.hasAttribute("open")}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/watchers.js' */
define("jira/viewissue/watchers-voters/watchers",["require"],function(e){"use strict";function i(){return h||(h=new a({el:d("#inline-dialog-watchers").get(0)})),h}function s(e){return e.isReadOnly?n:e.canBrowseUsers?r:t}var n=e("jira/viewissue/watchers-voters/views/watchers-read-only-view"),t=e("jira/viewissue/watchers-voters/views/watchers-no-browse-view"),r=e("jira/viewissue/watchers-voters/views/watchers-view"),o=e("jira/viewissue/watchers-voters/entities/watchers-user-collection"),a=e("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view"),c=e("jira/util/events"),l=e("jira/util/events/types"),w=e("jira/util/events/reasons"),u=e("jira/issue"),v=e("aui/inline-dialog"),d=e("jquery"),h=null;d(document).on("click","#view-watcher-list",function(e){e.preventDefault();var n=i(),t=d("#watching-toggle").next(".icon"),r=new o(u.getIssueKey());t.addClass("loading");var a=s(r);new a({collection:r}).render().done(function(e){t.removeClass("loading"),n.contents(e),n.show()}),r.on("errorOccurred",function(){n.hide()})}),d(document).on("keydown",function(e){h&&27===e.keyCode&&v.current!==h.el&&h.isVisible()&&(v.current&&v.current.hide(),h.hide())}),d(document).on("click",function(e){if(h){var i=d(e.target).closest("#inline-dialog-watchers, #watchers-suggestions").length;0===i&&h.isVisible()&&h.hide()}}),c.bind(l.NEW_CONTENT_ADDED,function(e,s,n){n===w.panelRefreshed&&s.is("#peoplemodule")&&i().setElement(s.find("#inline-dialog-watchers").get(0))})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/voters.js' */
define("jira/viewissue/watchers-voters/voters",["require"],function(e){"use strict";var i=e("jira/viewissue/watchers-voters/entities/voters-user-collection"),r=e("jira/viewissue/watchers-voters/views/voters-view"),t=e("jira/issue"),n=e("jira/ajs/layer/inline-layer"),s=e("aui/inline-dialog"),o=e("jquery"),c=s("#view-voter-list","voters",function(e,n,s){var u=o("#vote-toggle").next(".icon"),l=new i(t.getIssueKey());u.addClass("loading"),new r({collection:l}).render().done(function(i){e.html(i),e.find(".cancel").click(function(e){c.hide(),e.preventDefault()}),u.removeClass("loading"),s()}),l.on("errorOccurred",function(){c.hide()})},{width:240,useLiveEvents:!0,items:"#view-voters-list",preHideCallback:function(){return!n.current}});o(document).bind("keydown",function(e){27===e.keyCode&&s.current!==c&&c.is(":visible")&&(s.current&&s.current.hide(),c.hide())}),o(document).click(function(e){var i=s.current;i&&"voters"===i.id&&(o(e.target).closest("#inline-dialog-voters").length||i.hide())})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/toggler.js' */
define("jira/viewissue/watchers-voters/toggler",["require"],function(t){var e=t("jira/components/analytics-tracker/tracker"),a=t("jira/ajs/ajax/smart-ajax"),o=t("jira/flag"),n=t("jquery"),s=t("wrm/context-path"),i=t("jira/util/formatter"),r=function(t,o,i,r,c){var u,f=o+"-on",g=o+"-off",d="/voters",x=t.next(".icon"),p="POST",v=t.hasClass(f)?"on":"off";t.hasClass(f)&&(p="DELETE"),o.indexOf("watch")!==-1&&(d="/watchers"),t.removeClass(f).removeClass(g),"POST"===p&&(u={dummy:!0}),e.trackEvent("viewissue."+o+"."+v,"click"),n(a.makeRequest({url:s()+"/rest/api/1.0/issues/"+t.attr("rel")+d,type:p,dataType:"json",data:u,contentType:"application/json",complete:function(e,a,o){var n="POST"===p;o.successful?(n?(t.addClass(f),t.text(c.titleOn),r.attr("title",c.titleOn).text(c.textOn)):(t.addClass(g),t.text(c.titleOff),r.attr("title",c.titleOff).text(c.textOff)),i.text(o.data.count),i[n?"addClass":"removeClass"](f),i[n?"removeClass":"addClass"](g)):(o.aborted||l(o),n?(t.addClass(g),t.text(c.titleOff),r.attr("title",c.titleOff).text(c.textOff)):(t.addClass(f),t.text(c.titleOn),r.attr("title",c.titleOn).text(c.textOn)))}})).throbber({target:x})},l=function(t){var e=a.buildSimpleErrorContent(t,{alert:!0});if(t.hasData){var n=JSON.parse(t.data);n.errorMessages&&(e=n.errorMessages[0])}o.showErrorMsg(e,{closeable:!0})};n(document).delegate("#toggle-vote-issue","click",function(t){t.preventDefault(),n("#vote-toggle").click()}),n(document).delegate("#toggle-watch-issue","click",function(t){t.preventDefault(),n("#watching-toggle").click()});var c=function(t){n("input[type=hidden][id|=error]").each(function(e,a){var o=a.id.replace("error-","");t[o]=a.value})};n(document).delegate("#vote-toggle","click",function(t){t.preventDefault();var e={titleOn:"Remove vote for this issue",titleOff:"Vote for this issue",textOn:"Remove vote",textOff:"Add vote",actionTextOff:"Vote",actionTextOn:"Voted"},a=n(this),o=n(document.querySelectorAll("#vote-data")),s=n(document.querySelectorAll("#toggle-vote-issue"));c(e),r(a,"vote-state",o,s,e)}),n(document).delegate("#watching-toggle","click",function(t){t.preventDefault();var e={titleOn:"Stop watching this issue",titleOff:"Start watching this issue",textOn:"Stop watching",textOff:"Watch issue",actionTextOff:"Watch",actionTextOn:"Watching"},a=n(this),o=n(document.querySelectorAll("#watcher-data")),s=n(document.querySelectorAll("#toggle-watch-issue"));c(e),r(a,"watch-state",o,s,e)})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/initWatchersAndVoters.js' */
AJS.namespace("JIRA.VotersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/voters-user-collection")),AJS.namespace("JIRA.WatchersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/watchers-user-collection")),AJS.namespace("JIRA.VotersView",null,require("jira/viewissue/watchers-voters/views/voters-view")),AJS.namespace("JIRA.WatchersView",null,require("jira/viewissue/watchers-voters/views/watchers-view")),AJS.namespace("JIRA.WatchersNoBrowseView",null,require("jira/viewissue/watchers-voters/views/watchers-no-browse-view")),AJS.namespace("JIRA.WatchersReadOnly",null,require("jira/viewissue/watchers-voters/views/watchers-read-only-view"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/AnalyticsUtils.js' */
define("jira/viewissue/analytics-utils",["jira/util/data/meta","jira/issuenavigator/issue-navigator","jira/util/strings","wrm/context-path","jquery","exports"],function(n,t,e,i,r,s){function a(){return r(document.body).hasClass("navigator-issue-only")}function u(){return!!n.get("is-servicedesk-rendered")}function o(){return t.isNavigator()}function c(){return a()&&e.contains(location.search,"jql=")}function l(){return e.startsWith(location.pathname,i()+"/projects/")}s.context=function(){return c()?"fullscreen-issuenav":a()?"fullscreen":u()?"sd-queue":o()?"issuenav":l()?"project":"unknown"}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/slideshow/slideshow-configuration.js' */
define("jira/viewissue/slideshow/slideshow-configuration",["jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery"],function(e,t){var i={type:"image",centerOnScroll:!0,onStart:e.disable,onClosed:e.enable},n="elastic";return t.extend({},i,{transitionIn:n,transitionOut:n})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/image-wrap.js' */
define("jira/viewissue/element/image-wrap",["jira/fileviewer","jira/skate","jira/featureflags/feature-manager","underscore"],function(e,a,i,t){i.isFeatureEnabled("jira.fileviewer.disabled")||a("file-preview-type",{type:a.type.ATTRIBUTE,attached:t.debounce(function(){e.attachToElements()},0),detached:function(){e.closeViewer()}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/ajs/shorten/shortener.js' */
define("jira/ajs/shorten/shortener",["jira/util/formatter","jira/ajs/control","jira/data/local-storage","jquery"],function(t,e,i,s){return e.extend({_getDefaultOptions:function(){return{items:"a, span",numRows:1,shortenText:"hide",shortenOnInit:!0,persist:!0,expandButtonTooltip:"Click to view {0} more",collapseButtonTooltip:"Hide"}},init:function(t){"string"==typeof t&&(t={element:t}),t=t||{},this.options=s.extend(this._getDefaultOptions(),t),this._timerId=0,this.expanded=!1,this.$container=s(this.options.element),this._assignEvents("body",document.body),this._ready()},_isValid:function(){return!this.initialized&&this.$container.is(":visible")&&this.$container.children().length>0},_ready:function(){this._isValid()&&(this.$items=this.$container.children(this.options.items),this.$expandButton=this._render("expandButton"),this.$collapseButton=this._render("collapseButton"),this._assignEvents("expand-button",".shortener-expand"),this._assignEvents("collapse-button",".shortener-collapse"),(!s.browser.msie||s.browser.version>="9")&&this._assignEvents("resize-region",window),this._isCollapsedOnInit()?this.collapse():this.expand(),this.initialized=!0)},_renders:{expandButton:function(){return s("<a href='#' class='ellipsis shortener-expand'></a>").attr("title",this.options.expandButtonTooltip).add("<br>")},collapseButton:function(){return s("<a href='#' title='Hide' class='icon icon-hide shortener-collapse'></a>").append(s("<span>").text(this.options.collapseButtonTooltip))}},_events:{"expand-button":{click:function(t){t.currentTarget===this.$expandButton[0]&&(t.preventDefault(),this.expand(),this._saveState("expanded"))}},"collapse-button":{click:function(t){t.currentTarget===this.$collapseButton[0]&&(t.preventDefault(),this.collapse(),this._saveState("collapsed"),this.$container.scrollIntoView())}},"resize-region":{resize:function(){if(clearTimeout(this._timerId),!this.expanded){var t=this;this._timerId=setTimeout(function(){t.collapse()},400)}}},body:{tabSelect:function(){this._ready()}}},_saveState:function(t){try{i.setItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"),t)}catch(t){}},_loadState:function(){return i.getItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"))},_isCollapsedOnInit:function(){var t=this._loadState();return null!==t?"expanded"!==t:this.options.shortenOnInit},_removeButtons:function(){this.$expandButton.remove(),this.$collapseButton.remove()},_getOverflowIndex:function(){if(this.$items.length>1)for(var t=1,e=-1,i=0;i<this.$items.length;i++){var s=this.$items.eq(i).offset().left;if(s<=e&&(t++,t>this.options.numRows))return i;e=s}return-1},expand:function(){this._removeButtons(),this._getOverflowIndex()>0&&(this.$collapseButton=this._render("collapseButton"),this.$container.append(this.$collapseButton),this.$container.css("height","auto"),s.browser.msie&&s.browser.version<"9"&&s("body").toggleClass("reflow")),this.expanded=!0},collapse:function(){this._removeButtons();var e=this._getOverflowIndex();if(e>0){this.$container.css({position:"absolute",visibility:"hidden",width:this.$container[0].clientWidth+"px"});var i=this.$expandButton.first();do{var n=this.$items.length-e;i.text("("+n+")"),this.$expandButton.insertBefore(this.$items[e]),e--;var o=this.$items.eq(e).offset(),r=this.$expandButton.offset();if(o.left<r.left&&r.top<o.top+10)break}while(e>0);var a=e<this.$items.length-1?this.$items.eq(e+1).offset().top-this.$container.offset().top+"px":"auto";this.$container.css({height:a,position:"static",visibility:"visible",width:"auto"}),i.attr("title",t.format(this.options.expandButtonTooltip,n)),s.browser.msie&&s.browser.version<"9"&&s("body").toggleClass("reflow")}else this.$container.css("height","auto");this.expanded=!1}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/ajs/shorten/namespace.js' */
AJS.namespace("AJS.Shortener",null,require("jira/ajs/shorten/shortener"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/shortener.js' */
define("jira/jquery/plugins/shorten/shorten",["jira/ajs/shorten/shortener","jquery"],function(n,e){e.fn.shorten=function(e){var r=[];return e=e||{},this.each(function(){e.element=this,r.push(new n(e))}),r}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/install.js' */
!function(){require("jira/jquery/plugins/shorten/shorten")}();;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/shorten.js' */
define("jira/viewissue/element/shorten",["jira/ajs/shorten/shortener","jira/skate"],function(e,t){return t("shorten",{type:t.type.CLASSNAME,attached:function(t){var n={};n.element=t,new e(n)}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initToggleBlock.js' */
define("jira/viewissue/init-toggle-block",["jira/util/events","jira/util/events/types","jira/toggleblock/toggle-block"],function(e,t,i){new i({blockSelector:".toggle-wrap",triggerSelector:".issue-container .mod-header .toggle-title",storageCollectionName:"block-states"}),t.ISSUE_REFRESHED&&e.bind(t.ISSUE_REFRESHED,function(){t.REFRESH_TOGGLE_BLOCKS&&e.trigger(t.REFRESH_TOGGLE_BLOCKS)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/comment-form.js' */
define("jira/viewissue/comment/comment-form",["jira/util/formatter","jira/util/events","jira/util/events/types","jira/ajs/ajax/smart-ajax","jira/issue","jira/dialog/form-dialog","wrm/context-path","jira/jquery/deferred","jquery"],function(e,t,i,n,r,o,s,a,m){var l=s(),d={setCaretAtEndOfCommentField:function(){var e,t=this.getField(),i=t[0];t.length&&(e=t.val().length,t.scrollTop(t.attr("scrollHeight")),i.setSelectionRange&&e>0&&i.setSelectionRange(e,e))},disable:function(){this.getForm().find("textarea").attr("readonly","readonly"),this.getForm().find("input[type=submit]").attr("disabled","disabled")},isDirty:function(){var e=this.getField();return!!e.length&&e[0].value!==e[0].defaultValue},handleBrowseAway:function(){if(d.isDirty()){var t=d.getForm(),i=t.length&&t.is(":visible");return i?"You have entered a comment on this issue. If you navigate away from this page without first saving, the comment will be lost.":void 0}},isVisibilityAvailble:function(){return"none"!=this.getForm().find("#commentLevel :selected").val()},setSubmitState:function(){m.trim(this.getField().val()).length>0&&this.isVisibilityAvailble()?this.getForm().find("#issue-comment-add-submit").removeAttr("disabled"):this.getForm().find("#issue-comment-add-submit").attr("disabled","disabled")},enable:function(){this.getForm().find("textarea").removeAttr("readonly"),this.getForm().find("input[type=submit]").removeAttr("disabled")},getCommentVisibility:function(){var e=this.getForm().find("#commentLevel :selected").val();if(e){var t=e.split(":");return{type:t[0],value:this.getForm().find("#commentLevel :selected").text()}}return null},ajaxSubmit:function(){var s=m('<span class="icon throbber loading"></span>'),u=r.getIssueId(),c=r.getIssueKey(),g=l+"/rest/api/2/issue/"+c+"/comment",f={body:this.getField()[0].value.replace(/\r?\n/g,"\r\n")},h=this.getCommentVisibility();h&&(f.visibility=h);var v=a(),b=m.ajax({url:g,type:"POST",contentType:"application/json",data:JSON.stringify(f),success:function(e){t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"]),t.trigger(i.REFRESH_ISSUE_PAGE,[u,{complete:function(){var t="comment-"+e.id;m("#"+t).scrollIntoView({marginBottom:200,marginTop:200});var i=m("#issue_actions_container > .issue-data-block.focused");i.removeClass("focused");var n=m("#"+t);n.addClass("focused"),s.remove(),d.enable(),v.resolve()}}])},error:function(t){function i(t){var i="<h2>"+"Error"+'</h2><div class="ajaxerror"><div class="aui-message error"><span class="aui-icon icon-warning"/>'+t+"</div></div>";return m(i)}var r,a=m.parseJSON(t.responseText);r=a&&a.errors&&a.errors.comment?i(a.errors.comment):n.buildDialogErrorContent(t),new o({content:r}).show(),s.remove(),d.enable(),v.reject()}});return s.appendTo(this.getForm().find("input[type=submit]").parent()),m.when(b,v)},getForm:function(){var e=m("form#issue-comment-add");return 1===e.length&&(this.$form=e),this.$form||m()},getField:function(){return this.getForm().find("#comment")},getSubmitButton:function(){return this.getForm().find("#issue-comment-add-submit")},hide:function(e){e&&this.cancel(),this.getForm().detach(),i.UNLOCK_PANEL_REFRESHING&&t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"])},show:function(){this.focus(),i.LOCK_PANEL_REFRESHING&&t.trigger(i.LOCK_PANEL_REFRESHING,["addcommentmodule"])},focus:function(){this.focusField(),this.setCaretAtEndOfCommentField()},focusField:function(){this.getField().focus().trigger("keyup"),this.getSubmitButton().scrollIntoView({marginBottom:200})},showNoCommentMsg:function(e){if(""===this.getField().val())return m("#emptyCommentErrMsg").show(),!0},cancel:function(){var e=this;setTimeout(function(){e.getField().val("")},100),m("#comment-preview_link.selected").click()}};return d});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/footer-comment.js' */
define("jira/viewissue/comment/footer-comment",["jira/viewissue/comment/comment-form","jquery"],function(e,t){var i=!1,n=!1,o={getModule:function(){return t("#addcomment")},isActive:function(){return this.getModule().hasClass("active")},hide:function(t){if(this.isActive()){var o=e.handleBrowseAway();(n||i||!o||confirm(o))&&(this.getModule().removeClass("active"),e.hide(t))}},ajaxSubmit:function(){i=!0,e.ajaxSubmit().then(function(){o.hide(!0)})},show:function(){this.isActive()?e.focusField():(i=!1,this.getModule().addClass("active"),this.appendForm(),e.show())},appendForm:function(){this.getModule().find(".mod-content").append(e.getForm())}};return o.setPreviewMode=function(e){n=Boolean(e)},o});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/init-comment-areas.js' */
define("jira/viewissue/init-comment-areas",["require"],function(e){var t=e("jira/viewissue/comment/comment-form"),n=e("jira/viewissue/comment/footer-comment"),i=e("jira/issue"),o=e("jquery"),a=e("jira/libs/parse-uri"),m=window.onbeforeunload,u={};u.openFooterComment=function(){n.show(),t.getForm().find("#commentLevel").bind("change",function(){t.setSubmitState()}),t.setSubmitState()},o(document).delegate("#addcomment #issue-comment-add","submit",function(e){n.ajaxSubmit(),e.preventDefault()}).delegate(".issue-header #comment-issue","click",function(e){n.show(),e.preventDefault()}).delegate("#footer-comment-button","click",function(e){u.openFooterComment(),e.preventDefault()}).delegate("#addcomment .cancel","click",function(e){e.preventDefault(),n.hide(!0)}).delegate("#issue-comment-add","submit",function(){window.setTimeout(function(){t.disable()},0)}).delegate("#issue-comment-add #comment","input",function(){t.setSubmitState()}).delegate("#issue-comment-add input[type='submit']","click",function(e){t.showNoCommentMsg()&&e.preventDefault()}).bind("showWikiInput",function(){n.setPreviewMode(!1);var e=t.getField();e.is(":visible:enabled")&&(i.getStalker().trigger("stalkerHeightUpdated"),e.length>0&&e.focus(),t.setCaretAtEndOfCommentField())}).bind("showWikiPreview",function(){n.setPreviewMode(!0),i.getStalker().trigger("stalkerHeightUpdated")}),window.onbeforeunload=function(){var e=void 0;return o.isFunction(m)&&(e=m.apply(this,arguments)),e||t.handleBrowseAway.apply(this,arguments)},o(function(){"add-comment"===a(window.location.href).anchor&&u.openFooterComment()})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/invoke-comment-trigger.js' */
define("jira/viewissue/invoke-comment-trigger",["jquery"],function(e){return function(){var i=e(".add-issue-comment");if(0!==i.length){var r=i.filter(".toolbar-trigger");r.length>0?r.click():i.click()}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/namespace.js' */
AJS.namespace("JIRA.Issue.CommentForm",null,require("jira/viewissue/comment/comment-form")),AJS.namespace("JIRA.Issue.getDirtyCommentWarning",null,require("jira/viewissue/comment/comment-form").handleBrowseAway),AJS.namespace("JIRA.Issue.invokeCommentTrigger",null,require("jira/viewissue/invoke-comment-trigger"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initCustomFieldTabs.js' */
define("jira/viewissue/init-custom-field-tabs",["jira/util/logger","jira/util/events","jira/util/events/types","aui/tabs","jquery"],function(t,i,e,n,a){var r="#customfieldmodule",l=function(i){var e;"string"!=typeof i&&i.length>0||("#"!==i[0]&&(i="#"+i),t.log("activating tab",i),e=a("a[href='"+i+"']",r),e.length&&n.change(e))},u=function(t){var i=a(t.target).closest(".tabs-pane");i.length>0&&l(i.attr("id"))};a(function(){e.NEW_CONTENT_ADDED&&i.bind(e.NEW_CONTENT_ADDED,function(t,i){var e=i.find(r);e.unbind("reveal"),e.bind("reveal",u),n.setup()}),e.PANEL_REFRESHED&&i.bind(e.PANEL_REFRESHED,function(t,i,e,n){if("details-module"===i){var a=n.find(r).find(".active-tab");1===a.length&&l(a.find("a").attr("href"))}}),a(r).bind("reveal",u)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initSubtaskTimeLogging.js' */
define("jira/viewissue/init-subtask-time-logging",["jquery"],function(i){i(document).delegate("#tt_include_subtasks input","click",function(t){i(this).is(":checked")?(i("#tt_info_single").hide(),i("#tt_info_aggregate").show()):(i("#tt_info_aggregate").hide(),i("#tt_info_single").show())})});;
;
/* module-key = 'jira.webresources:viewissue', location = 'includes/jira/viewissue/ViewIssueTabs.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),"undefined"==typeof JIRA.Templates.Issue.Tabs&&(JIRA.Templates.Issue.Tabs={}),JIRA.Templates.Issue.Tabs.label=function(e,s){return"<strong>"+soy.$$escapeHtml(e.text)+"</strong>"},JIRA.Templates.Issue.Tabs.tab=function(e,s){return'<a id="'+soy.$$escapeHtml(e.id)+'" href="'+soy.$$escapeHtml(e.href)+'" class="'+soy.$$escapeHtml(e.linkClass)+'">'+JIRA.Templates.Issue.Tabs.label(e)+"</a>"};;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabsAnalytics.js' */
define("jira/viewissue/tabs/analytics",["jquery","jira/analytics","jira/util/strings","jira/viewissue/analytics-utils","jira/components/analytics-tracker/tracker","underscore"],function(e,t,a,n,i,s){function r(e){return m.indexOf(e)>-1?e:a.hashCode(e)}function c(e){return{tab:r(e.attr("data-key")),tabPosition:e.index()}}function l(e,t){return{inNewWindow:e,keyboard:t,context:n.context()}}function o(e){var t=e.attr("id");return!!t&&/\d+_thumb/.test(t)}function u(e){return e.hasClass("issue-link")?"issue":e.hasClass("external-link")?"external":o(e)?"attachment":"unknown"}function d(e,t,a,n){var r=e.closest(".mod-content").find("#issue-tabs li.active"),o=l(a,n);s.extend(o,c(r)),s.extend(o,{linkType:t}),i.trackEvent("viewissue","tab.link.clicked",o)}var m=["com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel","com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab"];return{tabClicked:function(e,a,n){var r=e.parent(),o=s.extend({},l(a,n),c(r));t.send({name:"jira.viewissue.tab.clicked",data:o}),i.trackEvent("viewissue","tab.clicked",o)},buttonClicked:function(e,a,n){if(e.is("[data-tab-sort]")){var i=e.data("order"),r=e.parents(".tabwrap").find("li.active");t.send({name:"jira.viewissue.tabsort.clicked",data:s.extend({},l(a,n),c(r),{order:i})})}},permalinkClicked:function(e,t){i.trackEvent("viewissue","comment.permalink.click",{commentId:e,keyboard:t})},permalinkContextMenuOpened:function(e,t){i.trackEvent("viewissue","comment.permalink.contextmenu.opened",{commentId:e,keyboard:t})},tabItemDetailsLinkClicked:function(e,t,a){d(e,"profile",t,a)},tabItemBodyLinkClicked:function(e,t,a){d(e,u(e),t,a)}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabs.js' */
define("jira/viewissue/tabs",["jira/util/logger","jira/util/formatter","jquery","jira/jquery/deferred","jira/util/data/meta","jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","jira/userhover/userhover","jira/viewissue/tabs/analytics"],function(t,e,i,a,n,r,o,s,c){function u(t){t=t||document,i.each(F,function(e,i){i(t)})}function l(t){var e=i(t).find(".issuePanelWrapper"),a=i(t).find("#issue_actions_container");q=a.length?a:q,_=e.length?e:_}function f(t,e){var i=new r({id:"issue-tab-error-dialog",widthClass:"small",content:o.buildDialogErrorContent(t,!1)});d(e),q.show(),i.show()}function d(t){i("#issue-tabs li").each(function(){var e=i(this),a=e.data("key"),n=e.data("label");if(a==t)e.addClass("active"),e.html(D.label({text:n}));else{e.removeClass("active");var r=e.data("id"),o=e.data("href");e.html(D.tab({id:r,href:o,linkClass:J,text:n}))}}),k(i("#issue-tabs"))}function h(t){d(t)}function v(t,e){var i=t.pageX,a=t.pageY,n=e.offset(),r=e.outerWidth(),o=e.outerHeight();return 0==i&&0==a||!(i>=n.left&&i<=n.left+r&&a>=n.top&&a<=n.top+o)}function m(){var t=i("#issue_actions_container");p(t,"action-details","viewIssueTabDetailsLink",c.tabItemDetailsLinkClicked),p(t,"action-body","viewIssueTabBodyLink",c.tabItemBodyLinkClicked)}function p(t,e,a,n){var r="."+e+" a";t.find(r).off("click."+a).on("click."+a,function(t){var e=i(this),a=t.metaKey,r=v(t,e);n(e,a,r)})}function b(){var t=i('[id^="permlink_comment"]');t.off("click").on("click",function(t){var e=g(t.target),a=i(this),n=v(t,a);c.permalinkClicked(e,n)}),t.off("contextmenu").on("contextmenu",function(t){var e=g(t.target),a=i(this),n=v(t,a);c.permalinkContextMenuOpened(e,n)})}function g(t){var e=i(t).closest('[id^="permlink_comment"]').attr("id"),a=e.split("_").pop();return a}function k(t){var e=i(t).find("li.active").data("key");i(t).find(E).off("click.viewIssueTabs").on("click.viewIssueTabs",function(t){var a=i(this),n=v(t,a),r=a.parent().data("key"),o=t.metaKey;r?c.tabClicked(a,o,n):c.buttonClicked(a,o,n),o||(t.preventDefault(),r&&h(r),y(e,a.attr("href")).done(function(t){n&&(r?t.find("#"+a.attr("id")+" > :first-child").focus():t.find(".sortwrap  > :first-child").focus())}).done(u))})}function y(e,n){var r=a();L&&L.abort();var s=o.makeRequest({jqueryAjaxFn:R?i.pjax:i.ajax,headers:{"X-PJAX":!0},container:S,url:n,timeout:null,complete:function(a,n,o){if("abort"!=n){if(L=null,!o.successful)return void((o.status<300||o.status>=400)&&f(o,e));var s=i(this.container),c=document.createElement("div");c.innerHTML=o.data;var u=document.createDocumentFragment().appendChild(c);R||j(s,u),t.trace("jira.issue.tab.loaded"),r.resolve(s)}}});return i(s).throbber({target:_}),L=s,r}function j(t,e){var a=e.querySelectorAll(".tabwrap"),n=t.find(".tabwrap"),r=i(e.querySelectorAll("#issue_actions_container")).contents(),o=q.contents();if(a.length&&n.length&&r.length&&o.length){n.replaceWith(a),q.stop(!0,!0);var s=q.height();q.append(r);var c=q.height()-s,u=s-c;u>0?(q.css("height",c+u),o.remove(),w(c,u)):q.empty().append(r),i(e.querySelectorAll("script")).each(function(){i.globalEval(this.text||this.textContent||this.innerHTML||"")})}else t.empty().append(e)}function w(t,e){var i=150,a=800,n=e/a*1e3;setTimeout(function(){q.animate({height:t+1},n,"easeOutQuart",function(){q.css("height","auto")})},i)}function x(t){i(t).find(E).each(function(){var t=i(this);t.attr("href",t.attr("href")+"#issue-tabs")})}function C(t){!R||i.support.pjax?k(t):x(t)}function T(t){i(t).bind("moveToFinished",function(t,e){i("a.twixi:visible",e).focus()})}function I(t){t.find("time.livestamp").livestamp()}function A(t){i.inArray(t,F)<0&&F.push(t)}var _,q,L,D=JIRA.Templates.Issue.Tabs,R=n.get("viewissue-use-history-api")!==!1,J="ajax-activity-content",S="#activitymodule div.mod-content",E=e.format("a.{0}",J),F=[];return A(l),A(C),A(T),A(s),A(I),A(m),A(b),{onTabReady:A,domReady:u}}),AJS.namespace("JIRA.ViewIssueTabs",null,require("jira/viewissue/tabs"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewIssueTabs.js' */
define("jira/viewissue/init-view-issue-tabs",["require"],function(i){var e=i("jquery"),n=i("jira/util/events"),s=i("jira/util/events/types"),t=i("jira/viewissue/tabs");e(function(){s.PANEL_REFRESHED&&n.bind(s.PANEL_REFRESHED,function(i,e,n,s){if("activitymodule"===e){var t=s.find("#issue_actions_container > .issue-data-block.focused");1===t.length&&n.find("#"+t.attr("id")).addClass("focused")}})}),n.bind(s.NEW_CONTENT_ADDED,function(i,e){t.domReady(e)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewissue.js' */
require(["jira/viewissue/element/shorten","jira/viewissue/element/image-wrap","jira/viewissue/watchers-voters/watchers","jira/viewissue/watchers-voters/voters","jira/viewissue/watchers-voters/toggler","jira/viewissue/init-comment-areas","jira/viewissue/init-subtask-time-logging","jira/viewissue/init-toggle-block","jira/viewissue/init-custom-field-tabs","jira/viewissue/init-view-issue-tabs"],function(){});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.4.1-factory', location = 'factories/marionette/1.4.1/marionette-1.4.1-factory.js' */
(function(e){define("atlassian/libs/factories/marionette-1.4.1",function(){return function(d,k){var g=k.Marionette;e.call({_:d,Backbone:k});var h=k.Marionette;h.VERSION="1.4.1";k.Marionette=g;return h}})})(function(){var e=this.Backbone,d=this._,k=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(k.prototype,{add:function(a,b){var f=a.cid;this._views[f]=a;a.model&&(this._indexByModel[a.model.cid]=f);b&&(this._indexByCustom[b]=
f);this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],!0},this);
delete this._views[b];this._updateLength()},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(f){d.isFunction(f[a])&&f[a].apply(f,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){k.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});var g={},h=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&this.initialize(a)};h.extend=e.Model.extend;d.extend(h.prototype,e.Events,{setHandlers:function(a){d.each(a,function(a,f){var c=null;d.isObject(a)&&!d.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(f,a,c)},this)},setHandler:function(a,b,f){this._wreqrHandlers[a]={callback:b,context:f};this.trigger("handler:add",a,b,f)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});g.Handlers=h;h=function(a){this.options=a;this._commands={};d.isFunction(this.initialize)&&this.initialize(a)};d.extend(h.prototype,e.Events,{getCommands:function(a){var b=this._commands[a];
b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});g.CommandStorage=h;h=g.Handlers.extend({storageType:g.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);g.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=
arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,f){var c=this.storage.getCommands(a);d.each(c.instances,function(a){b.apply(f,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=d.isFunction(a)?new a:a}});g.Commands=h;g.RequestResponse=g.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,
1);return this.getHandler(a).apply(this,b)}});h=function(){};h.extend=e.Model.extend;d.extend(h.prototype,e.Events);g.EventAggregator=h;var l=function(a,b){var f=Error(a);f.name=b||"Error";throw f;},c={};e.Marionette=c;c.$=e.$;var i=Array.prototype.slice;c.extend=e.Model.extend;c.getOption=function(a,b){if(a&&b)return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]};var p=function(a,b,f){return f.toUpperCase()},q=/(^|:)(\w)/gi;c.triggerMethod=function(a){var b=this["on"+a.replace(q,
p)];d.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(d.isFunction(b))return b.apply(this,d.tail(arguments))};var m=function(a){a._isShown&&a._isRendered&&d.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};c.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;m(a)});a.listenTo(a,"render",function(){a._isRendered=!0;m(a)})};var r=function(a,b,f,c){c=c.split(/\s+/);d.each(c,function(c){var d=a[c];d||l("Method '"+c+"' was configured as an event handler, but does not exist.");
a.listenTo(b,f,d,a)})},s=function(a,b,c,d){a.listenTo(b,c,d,a)},t=function(a,b,c,j){j=j.split(/\s+/);d.each(j,function(d){a.stopListening(b,c,a[d],a)})},u=function(a,b,c,d){a.stopListening(b,c,d,a)},n=function(a,b,c,j,e){b&&c&&(d.isFunction(c)&&(c=c.call(a)),d.each(c,function(c,f){d.isFunction(c)?j(a,b,f,c):e(a,b,f,c)}))};c.bindEntityEvents=function(a,b,c){n(a,b,c,s,r)};c.unbindEntityEvents=function(a,b,c){n(a,b,c,u,t)};c.Callbacks=function(){this._deferred=c.$.Deferred();this._callbacks=[]};d.extend(c.Callbacks.prototype,
{add:function(a,b){this._callbacks.push({cb:a,ctx:b});this._deferred.done(function(c,d){b&&(c=b);a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=c.$.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,a.ctx)},this)}});c.Controller=function(a){this.triggerMethod=c.triggerMethod;this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};c.Controller.extend=c.extend;d.extend(c.Controller.prototype,
e.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});c.Region=function(a){this.options=a||{};this.el=c.getOption(this,"el");if(!this.el){var b=Error("An 'el' must be specified for a region.");b.name="NoElError";throw b;}this.initialize&&(b=Array.prototype.slice.apply(arguments),this.initialize.apply(this,b))};d.extend(c.Region,{buildRegion:function(a,b){var c="string"===typeof a,j="string"===typeof a.selector,e="undefined"===typeof a.regionType,g="function"===
typeof a;if(!g&&!c&&!j)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,i;c&&(h=a);a.selector&&(h=a.selector);g&&(i=a);!g&&e&&(i=b);a.regionType&&(i=a.regionType);c=new i({el:h});a.parentEl&&(c.getEl=function(b){var c=a.parentEl;d.isFunction(c)&&(c=c());return c.find(b)});return c}});d.extend(c.Region.prototype,e.Events,{show:function(a){this.ensureEl();var b=a.isClosed||d.isUndefined(a.$el),f=a!==this.currentView;f&&this.close();
a.render();(f||b)&&this.open(a);this.currentView=a;c.triggerMethod.call(this,"show",a);c.triggerMethod.call(a,"show")},ensureEl:function(){if(!this.$el||0===this.$el.length)this.$el=this.getEl(this.el)},getEl:function(a){return c.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),c.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();
delete this.$el}});c.Region.extend=c.extend;var o=c.Controller.extend({constructor:function(a){this._regions={};c.Controller.prototype.constructor.call(this,a)},addRegions:function(a,b){var c={};d.each(a,function(a,e){"string"===typeof a&&(a={selector:a});a.selector&&(a=d.defaults({},a,b));var g=this.addRegion(e,a);c[e]=g},this);return c},addRegion:function(a,b){var f;f=d.isObject(b);var j=d.isString(b),e=!!b.selector;f=j||f&&e?c.Region.buildRegion(b,c.Region):d.isFunction(b)?c.Region.buildRegion(b,
c.Region):b;this._store(a,f);this.triggerMethod("region:add",a,f);return f},get:function(a){return this._regions[a]},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){d.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){d.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var a=Array.prototype.slice.call(arguments);c.Controller.prototype.close.apply(this,a)},_store:function(a,b){this._regions[a]=
b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=d.size(this._regions)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){o.prototype[a]=function(){var b=[d.values(this._regions)].concat(d.toArray(arguments));return d[a].apply(d,b)}});c.RegionManager=
o;c.TemplateCache=function(a){this.templateId=a};d.extend(c.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new c.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=i.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});d.extend(c.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=
this.compileTemplate(a)},loadTemplate:function(a){var b=c.$(a).html();(!b||0===b.length)&&l("Could not find template: '"+a+"'","NoTemplateError");return b},compileTemplate:function(a){return d.template(a)}});c.Renderer={render:function(a,b){if(!a){var d=Error("Cannot render the template since it's false, null or undefined.");d.name="TemplateNotFoundError";throw d;}return("function"===typeof a?a:c.TemplateCache.get(a))(b)}};c.View=e.View.extend({constructor:function(a){d.bindAll(this,"render");var b=
Array.prototype.slice.apply(arguments);this.options=d.extend({},this.options,a);this.events=this.normalizeUIKeys(d.result(this,"events"));e.View.prototype.constructor.apply(this,b);c.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:c.triggerMethod,getTemplate:function(){return c.getOption(this,"template")},mixinTemplateHelpers:function(a){var a=a||{},b=c.getOption(this,"templateHelpers");d.isFunction(b)&&(b=b.call(this));return d.extend(a,b)},normalizeUIKeys:function(a){if("undefined"!==
typeof a)return d.each(d.keys(a),function(b){var c=b.split("@ui.");2===c.length&&(a[c[0]+this.ui[c[1]]]=a[b],delete a[b])},this),a},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));d.each(b,function(b,c){var e=d.isObject(b),g=e?b.event:b;a[c]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,j=e?b.stopPropagation:d;(e?b.preventDefault:c)&&c&&c.apply(a);j&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},
this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);c.bindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.bindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;d.isFunction(a)&&(a=a.call(this));var b={},c=this.configureTriggers();d.extend(b,a,c);e.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,
a);c.unbindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.unbindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){!this.isClosed&&!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}});c.ItemView=c.View.extend({constructor:function(){c.View.prototype.constructor.apply(this,i.call(arguments))},serializeData:function(){var a={};this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()});return a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);
this.triggerMethod("item:before:render",this);var a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate(),a=c.Renderer.render(b,a);this.$el.html(a);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),c.View.prototype.close.apply(this,i.call(arguments)),this.triggerMethod("item:closed"))}});c.CollectionView=c.View.extend({itemViewEventPrefix:"itemview",
constructor:function(a){this._initChildViewStorage();c.View.prototype.constructor.apply(this,i.call(arguments));this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer);this.initRenderBuffer();this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,
this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){c.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",
this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=!1;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();this.collection&&0<this.collection.length?this.showCollection():this.showEmptyView();this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=
this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new e.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return c.getOption(this,"emptyView")},getItemView:function(){var a=c.getOption(this,"itemView");a||l("An `itemView` must be specified","NoItemViewError");return a},addItemView:function(a,b,f){var e=c.getOption(this,"itemViewOptions");d.isFunction(e)&&(e=
e.call(this,a,f));a=this.buildItemView(a,b,e);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,f);this._isShown&&c.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a)},addChildViewEventForwarding:function(a){var b=c.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var d=i.call(arguments);d[0]=b+":"+d[0];d.splice(1,0,a);c.triggerMethod.apply(this,d)},this)},renderItemView:function(a,b){a.render();
this.appendHtml(this,a,b)},buildItemView:function(a,b,c){a=d.extend({model:a},c);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},checkEmpty:function(){(!this.collection||0===this.collection.length)&&this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,
b){a.isBuffering?a.elBuffer.appendChild(b.el):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new k},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),c.View.prototype.close.apply(this,i.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}});c.CompositeView=c.CollectionView.extend({constructor:function(){c.CollectionView.prototype.constructor.apply(this,
i.call(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var a=c.getOption(this,"itemView")||this.constructor;a||l("An `itemView` must be specified","NoItemViewError");return a},serializeData:function(){var a={};this.model&&(a=this.model.toJSON());
return a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();this.$el.html(a);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){this.isRendered&&(c.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a=
{},a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate();return c.Renderer.render(b,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b){a.isBuffering?a.elBuffer.appendChild(b.el):this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b;(b=c.getOption(a,"itemViewContainer"))?(b=d.isFunction(b)?b():b,b=a.$(b),0>=b.length&&l("The specified `itemViewContainer` was not found: "+
a.itemViewContainer,"ItemViewContainerMissingError")):b=a.$el;return a.$itemViewContainer=b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}});c.Layout=c.ItemView.extend({regionType:c.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);c.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();
var a=Array.prototype.slice.apply(arguments);return c.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);c.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},
_buildRegions:function(a){var b=this,d={regionType:c.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,d)},_initializeRegions:function(a){this._initRegionManager();a=d.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new c.RegionManager;this.listenTo(this.regionManager,
"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}});c.AppRouter=e.Router.extend({constructor:function(a){e.Router.prototype.constructor.apply(this,i.call(arguments));this.options=a||{};var b=c.getOption(this,"appRoutes"),d=this._getController();this.processAppRoutes(d,b)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,
b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return c.getOption(this,"controller")},_addAppRoute:function(a,b,c){var e=a[c];if(!e)throw Error("Method '"+c+"' was not found on the controller");this.route(b,c,d.bind(e,a))}});c.Application=function(a){this._initRegionManager();this._initCallbacks=new c.Callbacks;this.vent=new g.EventAggregator;this.commands=new g.Commands;this.reqres=new g.RequestResponse;this.submodules={};d.extend(this,
a);this.triggerMethod=c.triggerMethod};d.extend(c.Application.prototype,e.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",
a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var d=i.call(arguments);d.unshift(this);return c.Module.create.apply(c.Module,d)},_initRegionManager:function(){this._regionManager=new c.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,
"region:remove",function(a){delete this[a]})}});c.Application.extend=c.extend;c.Module=function(a,b){this.moduleName=a;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;this.triggerMethod=c.triggerMethod};d.extend(c.Module.prototype,e.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),
this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,c.triggerMethod.call(this,"before:stop"),d.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),c.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,
b){if(a){var f=d.flatten([this,this.app,e,c,c.$,d,b]);a.apply(this,f)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new c.Callbacks;this._finalizerCallbacks=new c.Callbacks}});d.extend(c.Module,{create:function(a,b,c){var e=a,g=i.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=c;d.each(b,function(b,c){var d=e;e=this._getModule(d,b,a);this._addModuleDefinition(d,e,h[c],g)},this);return e},_getModule:function(a,b,d){var e=a[b];e||(e=new c.Module(b,d),a[b]=
e,a.submodules[b]=e);return e},_addModuleDefinition:function(a,b,c,e){var g;d.isFunction(c)?(g=c,c=!0):d.isObject(c)?(g=c.define,c=c.startWithParent):c=!0;g&&b.addDefinition(g,e);b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});c.Wreqr=g;c.ChildViewContainer=k});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone', location = 'libs/backbone.js' */
define("jira/components/libs/backbone",["require"],function(e){"use strict";var n=e("atlassian/libs/factories/backbone-1.0.0"),r=e("jira/components/libs/underscore"),i=e("jquery");return n(r,i)});
//# sourceMappingURL=backbone-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/marionette-1.4.1.js' */
define("jira/components/libs/marionette-1.4.1",["require"],function(e){"use strict";var i=e("atlassian/libs/factories/marionette-1.4.1"),n=e("jira/components/libs/backbone"),r=e("jira/components/libs/underscore");return i(r,n)});
//# sourceMappingURL=marionette-1.4.1-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Mixins.js' */
define("jira/components/libs/marionette-1.4.1/mixins",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore");return{listenAndRethrow:function(e,i){i=[].concat(i),t.each(i,function(i){this.listenTo(e,i,function(){this.trigger.apply(this,[i].concat(t.toArray(arguments)))},this)},this)},triggerPreventable:function(e,i){var n=t.defaults({},i||{},{isPrevented:!1,emitter:this,preventDefault:function(){this.isPrevented=!0}});return this.trigger(e,n),n}}}),AJS.namespace("JIRA.Marionette.Mixins",null,require("jira/components/libs/marionette-1.4.1/mixins"));
//# sourceMappingURL=Mixins-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/LinkRegion.js' */
define("jira/components/libs/marionette-1.4.1/linkregion",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1");return n.Region.extend({open:function(e){this.$el.append(e.$el.children()),e.setElement(this.$el)}})}),AJS.namespace("JIRA.Marionette.LinkRegion",null,require("jira/components/libs/marionette-1.4.1/linkregion"));
//# sourceMappingURL=LinkRegion-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/ReplaceRegion.js' */
define("jira/components/libs/marionette-1.4.1/replaceregion",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1");return n.Region.extend({open:function(e){this.$el.replaceWith(e.el)}})}),AJS.namespace("JIRA.Marionette.ReplaceRegion",null,require("jira/components/libs/marionette-1.4.1/replaceregion"));
//# sourceMappingURL=ReplaceRegion-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Controller.js' */
define("jira/components/libs/marionette-1.4.1/controller",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),r=e("jira/components/libs/marionette-1.4.1"),o=e("jira/components/libs/marionette-1.4.1/mixins"),t=r.Controller.extend({});return n.extend(t.prototype,o),t}),AJS.namespace("JIRA.Marionette.Controller",null,require("jira/components/libs/marionette-1.4.1/controller"));
//# sourceMappingURL=Controller-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/ItemView.js' */
define("jira/components/libs/marionette-1.4.1/itemview",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1");return t.ItemView.extend({renderTemplate:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e);var i=this.getTemplate(),n=t.Renderer.render(i,e);return t.$(n)},applyToDom:function(){this.delegateEvents(),this.bindUIElements(),this.triggerMethod("applyToDom")},unwrapTemplate:function(){if(this.$el.parent().length){var e=this.$el.children();this.$el.replaceWith(e),this.setElement(e)}else this.setElement(this.$el.children())}})}),AJS.namespace("JIRA.Marionette.ItemView",null,require("jira/components/libs/marionette-1.4.1/itemview"));
//# sourceMappingURL=ItemView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/CollectionView.js' */
define("jira/components/libs/marionette-1.4.1/collectionview",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1"),t=e("jira/components/libs/marionette-1.4.1/itemview");return n.CollectionView.extend({_appendHtmlWithIndex:function(e,n,t){var i=e.children(),o=i.length;t<=0?e.prepend(n.$el):!o||t>=o?e.append(n.$el):n.$el.insertBefore(i.eq(t))},appendHtml:function(e,n,t){this._appendHtmlWithIndex(e.$el,n,t)},unwrapTemplate:function(){t.prototype.unwrapTemplate.call(this)}})}),AJS.namespace("JIRA.Marionette.CollectionView",null,require("jira/components/libs/marionette-1.4.1/collectionview"));
//# sourceMappingURL=CollectionView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/CompositeView.js' */
define("jira/components/libs/marionette-1.4.1/compositeview",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1"),i=e("jira/components/libs/marionette-1.4.1/collectionview"),n=e("jira/components/libs/marionette-1.4.1/itemview");return t.CompositeView.extend({appendHtml:function(e,t,n){i.prototype._appendHtmlWithIndex(this.getItemViewContainer(e),t,n)},unwrapTemplate:function(){n.prototype.unwrapTemplate.call(this)}})}),AJS.namespace("JIRA.Marionette.CompositeView",null,require("jira/components/libs/marionette-1.4.1/compositeview"));
//# sourceMappingURL=CompositeView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Layout.js' */
define("jira/components/libs/marionette-1.4.1/layout",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jira/components/libs/marionette-1.4.1"),n=e("jira/components/libs/marionette-1.4.1/mixins"),o=i.Layout.extend({applyToDom:function(){this.delegateEvents(),this.bindUIElements(),this._reInitializeRegions(),this.triggerMethod("applyToDom")}});return t.extend(o.prototype,n),o}),AJS.namespace("JIRA.Marionette.Layout",null,require("jira/components/libs/marionette-1.4.1/layout"));
//# sourceMappingURL=Layout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Application.js' */
define("jira/components/libs/marionette-1.4.1/application",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),n=t("jira/components/libs/marionette-1.4.1");return n.Application.extend({constructor:function(t){n.Application.call(this,t)},start:function(t){t&&t.forceStop===!1||this.stop(),n.Application.prototype.start.call(this,t)},stop:function(){i.invoke(this.submodules,"stop")}})}),AJS.namespace("JIRA.Marionette.Application",null,require("jira/components/libs/marionette-1.4.1/application"));
//# sourceMappingURL=Application-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/AppModule.js' */
define("jira/components/libs/marionette-1.4.1/appmodule",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),t=e("jira/components/libs/marionette-1.4.1"),i=e("jira/components/libs/marionette-1.4.1/mixins"),r=function(){this.definition=this.definition.bind(this)};return r.extend=t.extend,n.extend(r.prototype,{create:function(){throw new Error("create() must be implemented by AppModules")},generateMasterRequest:!1,name:"",commands:{},requests:{},events:[],definition:function(e,t){var i=this.name,r=this;if(!i)throw new Error("'name' must be defined by AppModules");e.addInitializer(function(){function e(e){n.isFunction(e)&&(e=e(s));var t={};return n.each(e,function(e,n){e===!0&&(e=s[n].bind(s)),n=n&&i?i+":"+n:i,t[n]=e}),t}function o(e,t){n.isFunction(t)&&(t=t(s)),n.each(t,function(t){var r=i+":"+t;e.listenTo(s,t,function(){this.trigger.apply(this,[r].concat(n.toArray(arguments)))})})}var s=r.create.apply(r,n.toArray(arguments)),a=e(r.commands),u=e(r.requests);r.generateMasterRequest&&n.extend(u,e({"":function(){return s}})),t.commands.setHandlers(a),t.reqres.setHandlers(u),o(t,r.events)})}}),n.extend(r.prototype,i),r}),AJS.namespace("JIRA.Marionette.AppModule",null,require("jira/components/libs/marionette-1.4.1/appmodule"));
//# sourceMappingURL=AppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/DialogView.js' */
define("jira/components/libs/marionette-1.4.1/dialogview",["require"],function(i){"use strict";var e=i("jira/components/libs/underscore"),t=i("jira/components/libs/marionette-1.4.1"),o=i("jira/components/libs/marionette-1.4.1/itemview"),s=i("aui/message"),r=i("jira/dialog/form-dialog"),a=i("jquery"),n=i("jira/ajs/ajax/smart-ajax"),d=i("jira/dialog/dialog"),l=i("jira/components/utils/ajshelper");return o.extend({dialog:null,template:a.noop,_generateDialog:function(){var i=this.serializeData(),o=this.getTemplate(),s={id:this.id,content:function(e){e(o(i))},submitHandler:this._generateSubmissionXHR.bind(this)},a=t.getOption(this,"dialogOptions");return e.isFunction(a)&&(a=a.apply(this)),new r(e.extend(s,a))},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.dialog=this._generateDialog(),this.dialog.show(),this.$el=this.dialog.get$popup(),a(this.dialog).on("Dialog.hide",function(i,e,t){t!==d.HIDE_REASON.cancel&&t!==d.HIDE_REASON.escape||this.close()}.bind(this)),this.triggerMethod("render",this),this},close:function(){if(!this.isClosed){var i=this.triggerMethod("before:close");i!==!1&&(a(this.dialog).off("Dialog.hide"),this.dialog.hide(!0),this.dialog.destroy(),this.isClosed=!0,this.triggerMethod("close"),this.remove())}},_generateSubmissionXHR:function(i,o){i.preventDefault();var s=this.dialog.$form,r=t.getOption(this,"formToRequestData");e.isFunction(r)&&(r=r.call(this,s));var a=n.makeRequest({type:s.attr("method"),url:s.attr("action"),contentType:"application/json",dataType:"json",processData:!1,data:JSON.stringify(r)}).done(o).done(this._onSubmitSuccess.bind(this)).fail(this._onSubmitError.bind(this));return a},_onSubmitSuccess:function(i){this.triggerMethod("submit:success",i),this.close()},_onSubmitError:function(i){this.dialog.getButtonsContainer().find("input").removeAttr("disabled"),this.dialog.hideFooterLoadingIndicator(),this.dialog.$form.removeClass("submitting"),this._showErrorFromXHR(i),this.triggerMethod("submit:error")},_displayFieldErrors:function(i){var t=this.dialog.$popup;e.each(i,function(i,e){t.find("#"+e).after("<div class='error'>"+l.escapeHtml(i)+"</div>")})},_displayGenericErrors:function(i){var t=this.dialog.$popup.find(".aui-messages");e.each(i,function(i){var e={closeable:!0,timeout:5};e.body=l.escapeHtml(i),e.shadowed=!1,s.error(t,e)})},_displayXHRErrors:function(i){var e=this.dialog.$popup.find(".aui-messages");e.append(n.buildDialogErrorContent(i,!0))},_showErrorFromXHR:function(i){this._removeErrorMessages();var e;try{e=JSON.parse(i.responseText)}catch(t){e=null}e?(this._displayFieldErrors(e.errors),this._displayGenericErrors(e.errorMessages)):this._displayXHRErrors(i)},_removeErrorMessages:function(){this.dialog.$popup.find(".error").remove(),this.dialog.$popup.find(".aui-messages").empty()}})}),AJS.namespace("JIRA.Marionette.DialogView",null,require("jira/components/libs/marionette-1.4.1/dialogview"));
//# sourceMappingURL=DialogView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/InlineDialogView.js' */
define("jira/components/libs/marionette-1.4.1/inlinedialogview",["require"],function(i){"use strict";var e=i("jira/components/libs/underscore"),t=i("jira/components/libs/marionette-1.4.1"),n=i("jira/components/libs/marionette-1.4.1/itemview"),o=i("jquery"),s=i("aui/inline-dialog");return n.extend({dialog:null,template:o.noop,_getDialogOptions:function(){var i={noBind:!0},n=t.getOption(this,"dialogOptions")||{};return e.isFunction(n)&&(n=n.apply(this)),n=e.extend({},i,n),n.hideCallback=function(){this.close()}.bind(this),n},_getTrigger:function(){var i=t.getOption(this,"trigger");return e.isFunction(i)&&(i=i.apply(this)),i},_generateDialog:function(){var i=this.serializeData(),e=this.getTemplate(),t=this._getDialogOptions(),n=this._getTrigger();return new s(n,this.id,function(t,n,o){t.html(e(i)),o()},t)},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.dialog=this._generateDialog(),this.$el=this.dialog,this.id=this.dialog.id,this.dialog.show(),this.triggerMethod("render",this),this},close:function(){if(!this.isClosed){var i=this.triggerMethod("before:close");i!==!1&&(this.dialog.hide(),this.isClosed=!0,this.triggerMethod("close"),this.remove())}}})}),AJS.namespace("JIRA.Marionette.InlineDialogView",null,require("jira/components/libs/marionette-1.4.1/inlinedialogview"));
//# sourceMappingURL=InlineDialogView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:lib', location = 'namespaces.js' */
JIRA.Components=JIRA.Components||{},JIRA.Issues=JIRA.Issues||{},JIRA.Events=JIRA.Events||{};
//# sourceMappingURL=namespaces-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:brace', location = 'libs/brace.js' */
define("jira/components/libs/brace",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/brace-2014.09.03"),s=e("jira/components/libs/backbone"),n=e("jira/components/libs/underscore");return r(n,s)}),AJS.namespace("JIRA.Issues.Brace",null,require("jira/components/libs/brace"));
//# sourceMappingURL=brace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'lib/jquery.hoverIntent.min.js' */
// jshint ignore: start
/*eslint-disable*/
/**
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
(function ($) {
  $.fn.hoverIntent = function (f, g) {
    var cfg = { sensitivity: 7, interval: 100, timeout: 0 };cfg = $.extend(cfg, g ? { over: f, out: g } : f);var cX, cY, pX, pY;var track = function track(ev) {
      cX = ev.pageX;cY = ev.pageY;
    };var compare = function compare(ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);if (Math.abs(pX - cX) + Math.abs(pY - cY) < cfg.sensitivity) {
        $(ob).unbind("mousemove", track);ob.hoverIntent_s = 1;return cfg.over.apply(ob, [ev]);
      } else {
        pX = cX;pY = cY;ob.hoverIntent_t = setTimeout(function () {
          compare(ev, ob);
        }, cfg.interval);
      }
    };var delay = function delay(ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s = 0;return cfg.out.apply(ob, [ev]);
    };var handleHover = function handleHover(e) {
      var ev = jQuery.extend({}, e);var ob = this;if (ob.hoverIntent_t) {
        ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
      }if (e.type == "mouseenter") {
        pX = ev.pageX;pY = ev.pageY;$(ob).bind("mousemove", track);if (ob.hoverIntent_s != 1) {
          ob.hoverIntent_t = setTimeout(function () {
            compare(ev, ob);
          }, cfg.interval);
        }
      } else {
        $(ob).unbind("mousemove", track);if (ob.hoverIntent_s == 1) {
          ob.hoverIntent_t = setTimeout(function () {
            delay(ev, ob);
          }, cfg.timeout);
        }
      }
    };return this.bind('mouseenter', handleHover).bind('mouseleave', handleHover);
  };
})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'util/TipsyView.js' */
define("jira/issues/tipsy",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),n=t("jira/components/libs/brace"),s=t("jquery");s.fn.tooltip||(s.fn.tooltip=s.noop,s.fn.tipsy=s.noop);var o=n.View.extend({events:{click:"hide"},initialize:function(t){i.isFunction(t.showCondition)?this.shouldShow=t.showCondition:t.showCondition?this.shouldShow=function(){return this.$el.filter(t.showCondition).length>0}.bind(this):this.shouldShow=function(){return!0},this.tipsy=this.$el.tooltip(i.extend({trigger:"manual"},t.tipsy)),this.hoverIntent(t.intents)},hoverIntent:function(t){return this.tipsy&&this.tipsy.hoverIntent(i.extend({interval:200,over:this.show.bind(this),out:this.hide.bind(this)},t)),this},show:function(){this.shouldShow()&&this.tipsy&&this.$el.tipsy("show")},hide:function(){this.tipsy&&this.$el.tipsy("hide")},remove:function(){this.hide(),this.$el.removeData("tipsy")}});return o.revalidate=function(){return s.fn.tipsy.revalidate()},o.autoBounds=function(){return s.fn.tipsy.autoBounds.apply(s.fn.tipsy,arguments)},o});
//# sourceMappingURL=TipsyView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'util/namespace.js' */
AJS.namespace("JIRA.Issues.Tipsy",null,require("jira/issues/tipsy"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/CatchExceptions.js' */
!function(n){"use strict";var t=function(n){return function(){try{n.apply(this,arguments)}catch(t){}return this}};n.fn.htmlCatchExceptions=t(n.fn.html),n.fn.appendCatchExceptions=t(n.fn.append),n.fn.prependCatchExceptions=t(n.fn.prepend),n.catchExceptions=function(t){return n("<div>").htmlCatchExceptions(t).children()}}(AJS.$);
//# sourceMappingURL=CatchExceptions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/RecurringPromise.js' */
!function(){"use strict";jQuery.RecurringPromise=function(i){return this instanceof jQuery.RecurringPromise?(this._parent=i,this._doneCallbacks=new jQuery.Callbacks,this._failCallbacks=new jQuery.Callbacks,void(this._alwaysCallbacks=new jQuery.Callbacks)):new jQuery.RecurringPromise},jQuery.RecurringPromise.prototype={add:function(i){var n=new jQuery.Deferred;n.original=i;var t=this._getPending();return this._abortIfPending(t),this._setPending(n),i.done(function(){n===this._getPending()&&(n.resolveWith(this,arguments),this._doneCallbacks.fireWith(this,arguments))}.bind(this)),i.fail(function(){n===this._getPending()&&(n.rejectWith(this,arguments),this._failCallbacks.fireWith(this,arguments))}.bind(this)),i.always(function(){n===this._getPending()&&this._alwaysCallbacks.fireWith(this,arguments)}.bind(this)),n.promise()},done:function(i){return this._doneCallbacks.add(i),this},fail:function(i){return this._failCallbacks.add(i),this},always:function(i){return this._alwaysCallbacks.add(i),this},reset:function(){this._abortIfPending(this._getPending()),this._setPending(null)},sub:function(){return new jQuery.RecurringPromise(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(i){this._parent?this._parent._setPending(i):this._pending=i},_abortIfPending:function(i){i&&"pending"===i.state()&&(i.reject("abort"),jQuery.isFunction(i.original.abort)&&i.original.abort())}}}();
//# sourceMappingURL=RecurringPromise-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/ConcurrentDeferred.js' */
jQuery.ConcurrentDeferred=function(n){"use strict";var e,r=new jQuery.Deferred,t=function(n){e=n,n.done(function(){e===n&&r.resolve.apply(r,arguments)}).fail(function(){e===n&&r.reject.apply(r,arguments)})};return t(n),jQuery.extend(r,{update:function(n){if(!this.isPending())throw"Cannot update non-pending ConcurrentDeferred";var r=e;return t(n),jQuery.isFunction(r.abort)&&r.abort(),this},isPending:function(){return"pending"===this.state()}}),r};
//# sourceMappingURL=ConcurrentDeferred-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/ScrollLock.js' */
!function(e){"use strict";var l=30;e.fn.scrollLock=function(i,n){"string"!=typeof i&&(n=i,i=null),n||(n=l),this.on("DOMMouseScroll mousewheel",i,function(l){l.preventDefault();var i;l.originalEvent.wheelDelta&&(i=l.originalEvent.wheelDelta/120),l.originalEvent.detail&&(i=-l.originalEvent.detail/3),e.isNumeric(i)&&(this.scrollTop-=i*n)})}}(AJS.$);
//# sourceMappingURL=ScrollLock-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:uri', location = 'libs/uri.js' */
define("jira/components/libs/uri",["require"],function(i){"use strict";return i("atlassian/libs/uri-1.14.1")});
//# sourceMappingURL=uri-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:scrollintoview', location = 'lib/scrollintoview-1.8.js' */
!function(t){var e={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},o={duration:0,direction:"y"},r=/^(?:html)$/i,l=function(e,o){o=o||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var r=!(!document.defaultView||!document.defaultView.getComputedStyle),l={top:parseFloat(r?o.borderTopWidth:t.css(e,"borderTopWidth"))||0,left:parseFloat(r?o.borderLeftWidth:t.css(e,"borderLeftWidth"))||0,bottom:parseFloat(r?o.borderBottomWidth:t.css(e,"borderBottomWidth"))||0,right:parseFloat(r?o.borderRightWidth:t.css(e,"borderRightWidth"))||0};return{top:l.top,left:l.left,bottom:l.bottom,right:l.right,vertical:l.top+l.bottom,horizontal:l.left+l.right}},i=function(e){var o=t(window),i=r.test(e[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:l(e[0]),scroll:{top:(i?o:e).scrollTop(),left:(i?o:e).scrollLeft()},scrollbar:{right:i?0:e.innerWidth()-e[0].clientWidth,bottom:i?0:e.innerHeight()-e[0].clientHeight},rect:function(){var t=e[0].getBoundingClientRect();return{top:i?0:t.top,left:i?0:t.left,bottom:i?e[0].clientHeight:t.bottom,right:i?e[0].clientWidth:t.right}}()}};t.fn.extend({scrollIntoViewForAuto:function(l){l=t.extend({},o,l),l.direction=e["string"==typeof l.direction&&l.direction.toLowerCase()]||e.both;var c="";l.direction.x===!0&&(c="horizontal"),l.direction.y===!0&&(c=c?"both":"vertical");var n=this.eq(0),s=n.closest(":scrollable("+c+")");if(s.length>0){s=s.eq(0);var d={e:i(n),s:i(s)},h={top:d.e.rect.top-(d.s.rect.top+d.s.border.top),bottom:d.s.rect.bottom-d.s.border.bottom-d.s.scrollbar.bottom-d.e.rect.bottom,left:d.e.rect.left-(d.s.rect.left+d.s.border.left),right:d.s.rect.right-d.s.border.right-d.s.scrollbar.right-d.e.rect.right},a={};l.direction.y===!0&&(h.top<0?a.scrollTop=d.s.scroll.top+h.top-30:h.top>0&&h.bottom<0&&(a.scrollTop=d.s.scroll.top+Math.min(h.top,-h.bottom)+30)),l.direction.x===!0&&(h.left<0?a.scrollLeft=d.s.scroll.left+h.left:h.left>0&&h.right<0&&(a.scrollLeft=d.s.scroll.left+Math.min(h.left,-h.right))),t.isEmptyObject(a)?t.isFunction(l.complete)&&l.complete.call(s[0]):(r.test(s[0].nodeName)&&(s=t("html,body")),s.animate(a,l.duration).eq(0).queue(function(e){t.isFunction(l.complete)&&l.complete.call(s[0]),e()}))}return this}});var c={auto:!0,scroll:!0,visible:!1,hidden:!1};t.extend(t.expr[":"],{scrollable:function(t,o,l,i){var n=e["string"==typeof l[3]&&l[3].toLowerCase()]||e.both,s=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle,d={x:c[s.overflowX.toLowerCase()]||!1,y:c[s.overflowY.toLowerCase()]||!1,isRoot:r.test(t.nodeName)};if(!d.x&&!d.y&&!d.isRoot)return!1;var h={height:{scroll:t.scrollHeight,client:t.clientHeight},width:{scroll:t.scrollWidth,client:t.clientWidth},scrollableX:function(){return(d.x||d.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(d.y||d.isRoot)&&this.height.scroll>this.height.client}};return n.y&&h.scrollableY()||n.x&&h.scrollableX()}})}(jQuery);
//# sourceMappingURL=scrollintoview-1.8-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:browser', location = 'util/Browser.js' */
define("jira/components/util/browser",function(){"use strict";return{locationReload:function(o){window.location.reload(o)}}});
//# sourceMappingURL=Browser-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelModel.js' */
define("jira/components/issueviewer/entities/panel",["require"],function(t){"use strict";var e=t("jira/components/libs/brace"),i=t("jira/util/events"),n=t("jira/components/issueviewer/eventtypes");return e.Model.extend({namedAttributes:["entity","updateLocked"],initialize:function(){i.bind(n.LOCK_PANEL_REFRESHING,function(t,e){e===this.getEntity().id&&this.set("updateLocked",!0)}.bind(this)),i.bind(n.UNLOCK_PANEL_REFRESHING,function(t,e){e===this.getEntity().id&&this.set("updateLocked",!1)}.bind(this))},update:function(t,e,i){this.getUpdateLocked()||(this.set("entity",t),this.trigger("updated",e,i))}})});
//# sourceMappingURL=PanelModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelsCollection.js' */
define("jira/components/issueviewer/entities/panels",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),n=e("jira/components/libs/brace"),t=e("jira/components/issueviewer/entities/panel");return n.Collection.extend({model:t,update:function(e,n){this.each(function(n){var t=n.id,s=i.any(e,function(e){return e.id===t});s||this.remove(n)},this),i.each(e,function(e,i){var t=this.get(e.id);t?t.update(e,n.fieldsInProgress,n.fieldsSaved):this.add({id:e.id,entity:e},{at:i})},this)}})});
//# sourceMappingURL=PanelsCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelsGroupModel.js' */
define("jira/components/issueviewer/entities/panelsgroup",["require"],function(e){"use strict";var n=e("jira/components/libs/brace"),t=e("jira/components/issueviewer/entities/panels");return n.Model.extend({namedAttributes:["leftPanels","rightPanels","infoPanels"],defaults:function(){return{leftPanels:new t([]),rightPanels:new t([]),infoPanels:new t([])}},update:function(e,n){this.get("leftPanels").update(e.leftPanels,n),this.get("rightPanels").update(e.rightPanels,n),this.get("infoPanels").update(e.infoPanels,n)}})});
//# sourceMappingURL=PanelsGroupModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/IssueModel.js' */
define("jira/components/issueviewer/entities/issue",["require"],function(e){"use strict";var t=e("jira/components/libs/brace"),s=e("jira/components/issueviewer/entities/panelsgroup");return t.Model.extend({namedEvents:["updated"],namedAttributes:["entity","id","key","panels","projectKey","projectType","projectId"],defaults:function(){return{entity:{},panels:new s}},update:function(e,t){var s=!1;e.issue&&(this.updateFromEntity(e.issue),s=!0),e.panels&&(this.getPanels().update(e.panels,t),s=!0),s&&this.trigger("updated",t)},resetToDefault:function(){this.clear(),this.set(this.defaults())},updateFromEntity:function(e){this.set({id:e.id,key:e.key,entity:e,projectKey:e.project?e.project.key:null,projectType:e.project?e.project.projectType:null,projectId:e.project?e.project.id:null})},isCurrentIssue:function(e){return this.get("id")===e},hasIssue:function(){return this.has("id")},updateIssueQuery:function(e){this.hasIssue()&&(this.getEntity().viewIssueQuery=e)},getIssueInfo:function(){return{issueId:this.getId(),issueKey:this.getKey(),projectId:this.getProjectId(),projectKey:this.getProjectKey(),projectType:this.getProjectType()}}})});
//# sourceMappingURL=IssueModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/newViewEnabled.js' */
define("jira/components/issueviewer/new-view-enabled",[],function(){"use strict";return function(){return"true"===AJS.$('meta[name="ajs-new-jira-issue-view-gin-enabled"]').attr("content")}});
//# sourceMappingURL=newViewEnabled-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssuePanelView.js' */
define("jira/components/issueviewer/views/issuepanel",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/components/issueviewer/legacy/issuefieldutil"),n=e("jquery"),r=e("jira/components/libs/marionette-1.4.1/itemview"),l=e("jira/components/issueviewer/templates");return r.extend({template:l.Body.issuePanel,modelEvents:{updated:"update"},update:function(e,r){function l(){return i.any(e,function(e){return 1===o.find(t.getFieldSelector(e)).length})}function s(){var e=o.find(document.activeElement).length>0,i=!!n.browser.msie&&n.browser.version<=8;if(i){var t=o[0].nextSibling,r=o[0].parentNode;o.remove(),t?n(t).before(d):n(r).append(d)}else o.replaceWith(d);e&&u.trigger("replacedFocusedPanel"),u.setElement(d)}function a(e){var t=u.model.id,n=u.$el;u.trigger("panelRendered",t,n,o),i.each(e,function(e){u.trigger("individualPanelRendered",e)})}var d=this.renderTemplate(),o=this.$el,u=this;if(0!==o.find("iframe").length||d.text()!==o.text()){if(l()){var c=[];i.each(r,function(e){var i=o.find(t.getFieldSelector(e));if(1===i.length){var n=d.find(t.getFieldSelector(e));1===n.length?(i.replaceWith(n),c.push(n)):i.closest("li, dl").remove()}}),a(c)}else s(),a([u.$el]);this.bindUIElements()}},onRender:function(){this.setElement(this.$el.children());var e=this.model.getEntity().styleClass;e&&this.$el.addClass(e),this.trigger("individualPanelRendered",this.$el)},applyToDom:function(){this.trigger("individualPanelRendered",this.$el)},serializeData:function(){return this.model.getEntity()}})});
//# sourceMappingURL=IssuePanelView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssuePanelsView.js' */
define("jira/components/issueviewer/views/issuepanels",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/collectionview"),t=e("jira/components/issueviewer/views/issuepanel"),n=e("jira/components/issueviewer/entities/panel");return i.extend({itemView:t,_updatingFromDom:!1,appendHtml:function(e,i,t){var n=e.$el.children(),o=n.length;t<=0?e.$el.prepend(i.$el):!o||t>=o?e.$el.append(i.$el):i.$el.insertBefore(n.eq(t))},applyToDom:function(){var e=this;this._updatingFromDom=!0,this.$el.children().filter(".module").each(function(){var i=this.id;"addcomment"===i&&(i="addcommentmodule"),e.collection.add(new n({id:i,entity:{id:i}}))}),this._updatingFromDom=!1},renderItemView:function(e){this._updatingFromDom?e.applyToDom():i.prototype.renderItemView.apply(this,arguments)},buildItemView:function(e){var t=i.prototype.buildItemView.apply(this,arguments);return this._updatingFromDom&&t.setElement(document.getElementById(e.id)),t}})});
//# sourceMappingURL=IssuePanelsView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueBodyView.js' */
define("jira/components/issueviewer/views/issuebody",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-1.4.1/layout"),i=e("jira/components/libs/marionette-1.4.1/linkregion"),n=e("jira/components/issueviewer/templates");return s.extend({tagName:"div",className:"issue-body-content",regions:{leftPanels:{selector:".issue-main-column",regionType:i},rightPanels:{selector:".issue-side-column",regionType:i},infoPanels:{selector:".issue-body",regionType:i}},template:n.Body.issueBody})});
//# sourceMappingURL=IssueBodyView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueOpsbarView.js' */
define("jira/components/issueviewer/views/issueopsbar",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/itemview"),t=e("jira/components/issueviewer/templates"),n=e("jira/issues/tipsy"),s=e("jira/components/issueviewer/analytics/issueopsbar");return i.extend({template:t.IssueOpsbar.simpleOpsbar,ui:{shareButton:".viewissue-share",exportButton:"#viewissue-export",loginButton:"#ops-login-lnk",commentButton:"#comment-issue"},serializeData:function(){return{issue:this.model.getEntity()}},onApplyToDom:function(){this.onRender()},onRender:function(){new s(this),this.ui.loginButton.hide(),this.ui.commentButton.addClass("inline-comment"),new n({el:this.ui.shareButton,showCondition:":not(.active)"}),new n({el:this.ui.exportButton,showCondition:":not(.active)",tipsy:{gravity:"ne"}})}})});
//# sourceMappingURL=IssueOpsbarView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueHeaderView.js' */
define("jira/components/issueviewer/views/issueheader",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/layout"),s=e("jira/components/issueviewer/templates"),t=(e("jira/components/issueviewer/services/darkfeatures"),e("jira/components/libs/underscore")),a=e("jira/components/issueviewer/views/issueopsbar"),r=e("jira/util/data/meta"),n=e("jquery"),o=(e("jira/featureflags/feature-manager"),e("jira/components/issueviewer/new-view-enabled"));return i.extend({className:"issue-header js-stalker",id:"stalker",tagName:"header",template:s.Header.issueHeader,modelEvents:{updated:"update"},regions:{opsbar:".command-bar",pager:"#issue-header-pager"},initialize:function(e){this.isGlobalIssueNavigator=e.isGlobalIssueNavigator},serializeData:function(){return{issue:this.model.getEntity(),isNewIssueViewEnabledInGlobalIssueNav:o(),isGlobalIssueNavigator:this.isGlobalIssueNavigator}},update:function(e){if(e.initialize)this._updateWindowTitle();else{var i=t.include(e.fieldsInProgress,"summary");i?this.renderOpsBar():this.render()}this.trigger("updated")},onApplyToDom:function(){var e=new a({model:this.model});e.setElement(this.opsbar.el),this.opsbar.attachView(e),this.opsbar.currentView.applyToDom(),this._updateWindowTitle()},onBeforeRender:function(){this.previousElement=this.$el},onRender:function(){this.renderOpsBar(),this._updateWindowTitle(),this.trigger("panelRendered","header",this.$el,this.previousElement||n(""))},renderOpsBar:function(){this.opsbar.show(new a({model:this.model})),this.trigger("individualPanelRendered",this.$el)},_updateWindowTitle:function(){var e=this.model.getEntity(),i=e.key,s=e.summary,t=r.get("app-title");t&&s&&i&&(document.title="["+i+"] "+s+" - "+t)},focus:function(){this.$el.find("a").eq(0).focus()},initialFocus:function(){this.$el.focus()}})});
//# sourceMappingURL=IssueHeaderView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueView.js' */
define("jira/components/issueviewer/views/issue",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/layout"),t=e("jira/components/issueviewer/templates"),s=e("jira/components/libs/marionette-1.4.1/replaceregion"),n=e("jira/components/issueviewer/actions"),o=e("jquery"),a=e("jira/components/issueviewer/new-view-enabled");return i.extend({template:t.layout,className:"issue-container",regions:{header:{selector:".issue-header-container",regionType:s},body:{selector:".issue-body-container",regionType:s}},modelEvents:{updated:"update"},initialize:function(e){this.isGlobalIssueNavigator=e.isGlobalIssueNavigator},showLoading:function(){this.$el.addClass("loading")},hideLoading:function(){this.$el.removeClass("loading")},focusComment:function(e){this.$("#activitymodule .focused").removeClass("focused"),this.$("#comment-"+e).addClass("focused"),this.$(".js-stalker").trigger("refresh")},serializeData:function(){return{isNewIssueViewEnabledInGlobalIssueNav:a(),isGlobalIssueNavigator:this.isGlobalIssueNavigator}},update:function(e){this._closeDropdowns(),e.initialize&&this.render(),e.reason&&e.reason.action===n.EDIT_COMMENT&&this.focusComment(e.reason.meta.commentId),this._bringViewIssueElementIntoView()},remove:function(){return this.stopListening(),this.$el.empty(),this},onRender:function(){this.$el.addClass(this.className),this.$el.attr("tabindex","-1"),this._bringViewIssueElementIntoView()},onApplyToDom:function(){this._bringViewIssueElementIntoView(),this.trigger("render")},_bringViewIssueElementIntoView:function(){var e=this.model.get("entity").viewIssueQuery;if(e){var i;e.focusedCommentId?i="#comment-"+e.focusedCommentId:(e.attachmentSortBy||e.attachmentOrder||e.attachmentViewMode)&&(i="#attachmentmodule"),i&&o(i).scrollIntoView({marginBottom:200,marginTop:200})}},_closeDropdowns:function(){this.$el.find(".aui-dropdown2-trigger.active").trigger("aui-button-invoke")}})});
//# sourceMappingURL=IssueView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorView.js' */
define("jira/components/issueviewer/views/error",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-1.4.1/layout");return s.extend({className:"issue-container",regions:{pager:"#issue-header-pager"},remove:function(){return this.stopListening(),this.$el.empty(),this},onRender:function(){this.$el.addClass(this.className),this.$el.attr("tabindex","-1")}})});
//# sourceMappingURL=ErrorView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorGenericView.js' */
define("jira/components/issueviewer/views/errorgeneric",["require"],function(e){"use strict";var r=e("jira/components/issueviewer/views/error"),i=e("jira/components/issueviewer/templates"),n=e("jira/components/util/browser");return r.extend({template:i.Error.Generic,events:{"click #issue-error-reload-button":function(){n.locationReload()}}})});
//# sourceMappingURL=ErrorGenericView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorNotFoundView.js' */
define("jira/components/issueviewer/views/errornotfound",["require"],function(r){"use strict";var e=r("jira/components/issueviewer/views/error"),i=r("jira/components/issueviewer/templates"),n=r("jira/components/libs/underscore");return e.extend({template:i.Error.DoesNotExist,initialize:function(r){r=r||{},this.showReturnToSearchOnError=r.showReturnToSearchOnError},triggers:{"click #return-to-search":"returnToSearch"},serializeData:function(){var r=this.showReturnToSearchOnError;return n.isFunction(r)&&(r=r()),{hideReturnToSearch:!r}}})});
//# sourceMappingURL=ErrorNotFoundView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/controllers/IssueController.js' */
define("jira/components/issueviewer/controllers/issue",["require"],function(e){"use strict";var i=e("jira/issue"),s=e("jira/components/issueviewer/views/issuebody"),t=e("jira/components/issueviewer/views/issueheader"),n=e("jira/components/issueviewer/views/issuepanels"),o=e("jira/components/issueviewer/views/issue"),r=e("jira/components/libs/marionette-1.4.1/controller"),a=e("jira/components/libs/underscore"),h=e("jquery"),d=e("jira/components/issueviewer/services/breadcrumbs-project-hider"),l=e("jira/featureflags/simplified-ux-feature-manager"),w=e("jira/components/issueviewer/new-view-enabled"),c=i.CommentForm;return r.extend({initialize:function(e){this.model=e.model,this.isGlobalIssueNavigator=e.isGlobalIssueNavigator},_createViews:function(){this.view=this._createMainView(),this.bodyView=this._createBodyView(),this.headerView=this._createHeaderView(),this.leftPanelsView=this._createPanelsView(this.model.getPanels().getLeftPanels()),this.rightPanelsView=this._createPanelsView(this.model.getPanels().getRightPanels()),this.infoPanelsView=this._createPanelsView(this.model.getPanels().getInfoPanels())},_createMainView:function(){var e=new o({model:this.model,isGlobalIssueNavigator:this.isGlobalIssueNavigator,el:this.$el});return this.listenTo(e,{render:function(){this.trigger("renderMainView",e.$el)}}),e},_createBodyView:function(){return new s({model:this.model})},_createHeaderView:function(){var e=new t({model:this.model,isGlobalIssueNavigator:this.isGlobalIssueNavigator});return this.listenAndRethrow(e,"panelRendered"),this.listenTo(e,{updated:function(){this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},this.model.getIssueInfo()),this._replaceBreadcrumbsView()},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)}}),this._replaceBreadcrumbsView(),e},_replaceBreadcrumbsView:function(){l.isAdg3ModeOn()&&JIRA.API.getSidebar().done(function(e){d.bindToSidebarEvents(e,h(".issue-header-content"))})},_createPanelsView:function(e){var i=new n({collection:e});return this.listenTo(i,{"itemview:replacedFocusedPanel":function(){this.trigger("replacedFocusedPanel")},"itemview:panelRendered":function(e,i,s,t){this.trigger("panelRendered",i,s,t)},"itemview:individualPanelRendered":function(e,i){this.trigger("individualPanelRendered",i)}}),i},createView:function(){this._createViews(),this.listenTo(this.view,"render",function(){var e=w();e&&this.isGlobalIssueNavigator?AJS.$("#new-issue-body-container").trigger("new-issue-body-container-for-gin-rendered"):(this.view.header.show(this.headerView),this.view.body.show(this.bodyView),this.bodyView.leftPanels.show(this.leftPanelsView),this.bodyView.rightPanels.show(this.rightPanelsView),this.bodyView.infoPanels.show(this.infoPanelsView),this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},a.extend(this.model.getIssueInfo(),{loadedFromDom:!1})))})},createViewFromDom:function(){this._createViews(),this.listenTo(this.view,"applyToDom",function(){function e(e,i,s){i.setElement(s),i.applyToDom(),e.attachView(i)}e(this.view.body,this.bodyView,this.view.$el.find(".issue-body-content")),e(this.view.body,this.headerView,this.view.$el.find("#stalker")),e(this.bodyView.leftPanels,this.leftPanelsView,this.bodyView.$el.find(this.bodyView.leftPanels.el)),e(this.bodyView.rightPanels,this.rightPanelsView,this.bodyView.$el.find(this.bodyView.rightPanels.el)),e(this.bodyView.infoPanels,this.infoPanelsView,this.bodyView.$el.find(this.bodyView.infoPanels.el)),this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},a.extend(this.model.getIssueInfo(),{loadedFromDom:!0}))})},setElement:function(e){this.$el=e,this.view&&this.view.setElement(e)},applyToDom:function(e){e.id=+e.id,this.model.updateFromEntity(e),this.createViewFromDom(),this.view.applyToDom()},show:function(){this.view?this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},a.extend(this.model.getIssueInfo(),{loadedFromDom:!1})):(this.createView(),this.view.render()),this.view.hideLoading()},close:function(){this.view&&this.view.close(),this.hideLoading(),delete this.view},hideLoading:function(){this.view&&this.view.hideLoading()},showLoading:function(){this.view&&this.view.showLoading()},canDismissComment:function(){var e,i=c;if(!i.getForm().data("dismissed")&&(e=i.handleBrowseAway())){if(!confirm(e))return i.focus(),!1;i.getForm().data("dismissed",!0)}return!0},applyResponsiveDesign:function(){if(this.$el){var e=this.$el.width();this.$el.toggleClass("skinny",e<900),this.$el.toggleClass("very-skinny",e<600)}},focus:function(){this.view&&this.headerView.focus()},initialFocus:function(){this.view&&this.headerView.initialFocus()}})});
//# sourceMappingURL=IssueController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/controllers/ErrorController.js' */
define("jira/components/issueviewer/controllers/error",["require"],function(e){"use strict";var r=e("jira/components/issueviewer/views/errorgeneric"),i=e("jira/components/issueviewer/views/errornotfound"),t=e("jira/components/libs/marionette-1.4.1/controller"),o=e("jira/components/issueviewer/utils");return t.extend({initialize:function(e){this.contextPath=e.contextPath,this.showReturnToSearchOnError=e.showReturnToSearchOnError},render:function(e,t){switch(e){case"auth":this._renderErrorAuth(t);break;case"forbidden":case"notfound":this._renderErrorView(new i({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorView(new r)}},applyToDom:function(e,t){switch(e){case"auth":this._renderErrorAuth(t);break;case"forbidden":case"notfound":this._renderErrorViewFromDom(new i({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorViewFromDom(new r)}},close:function(){this.view&&(this.view.close(),delete this.view)},setElement:function(e){this._$el=e,this.view&&this.view.setElement(e)},_renderErrorAuth:function(e){var r=this.contextPath+"/login.jsp?os_destination="+encodeURIComponent("/browse/"+e);window.location.replace(r)},_renderErrorView:function(e){this.trigger("before:render"),o.hideDropdown(),this.view=e,this.view.setElement(this._$el),this.view.render(),this.listenAndRethrow(this.view,"returnToSearch"),this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:!0},{loadedFromDom:!1,issueId:null})},_renderErrorViewFromDom:function(e){this.trigger("before:render"),o.hideDropdown(),this.view=e,this.view.setElement(this._$el),this.view.applyToDom(),this.listenAndRethrow(this.view,"returnToSearch"),this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:!0},{loadedFromDom:!0,issueId:null})},isRendered:function(){return Boolean(this.view)}})});
//# sourceMappingURL=ErrorController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/IssueLoaderService.js' */
define("jira/components/issueviewer/services/issueloader",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/controller"),t=e("jquery"),n=e("jira/components/issueviewer/legacy/issuefieldutil");return i.extend({initialize:function(){this._promiseManager=new t.RecurringPromise,this._updatingPromise=this._promiseManager.sub(),this._updatingPromise.done(this._onUpdatingDone.bind(this)).fail(this._onUpdatingError.bind(this)),this._loadingPromise=this._promiseManager.sub(),this._loadingPromise.done(this._onLoadingDone.bind(this)).fail(this._onLoadingError.bind(this))},cancel:function(){this._promiseManager.reset()},update:function(e){function i(e){return function(){return{taskKey:e,data:arguments,startIssueLoad:new Date}}}var n,r=e.issueEntity,s=e.mergeIntoCurrent,a=e.viewIssueData,o=!!e.detailView,d=new t.Deferred;return n=this._updatingPromise.add(a.get(r.key,!0,{issueEntity:r,loadingDeferred:d,mergeIntoCurrent:s,startIssueLoad:new Date,detailView:o}).pipe(i("issue"),i("issue"))),n.fail(function(){d.reject.apply(d,arguments)}),d.promise()},load:function(e){var i=e.issueEntity,n=e.viewIssueData,r=!!i.detailView;this._currentlyLoading=!0;var s=new t.Deferred;return this._loadingPromise.add(n.get(i.key,!1,{issueEntity:i,loadFields:!1,loadingDeferred:s,startIssueLoad:new Date,detailView:r})),s.promise()},isLoading:function(){return this._currentlyLoading},_onLoadingDone:function(e,i,t){var r=t.issueEntity;r.id=e.issue.id,r.key=e.issue.key,e.pager||(e.pager=r.pager),n.transformFieldHtml(e),this._currentlyLoading=!1,i.loadDuration=new Date-t.startIssueLoad,this.trigger("issueLoaded",e,i,t),t.loadingDeferred.resolve(e,i,t)},_onUpdatingDone:function(e){var i=e.data[1];i&&(i.isUpdate=!0),this._onLoadingDone.apply(this,e.data)},_onLoadingError:function(e,i,t){var n=t.issueEntity,r={issueId:n.id,issueKey:n.key,response:e};this._currentlyLoading=!1;var s;switch(e.status){case 401:s="auth";break;case 403:s="forbidden";break;case 404:s="notfound";break;default:s="generic"}this.trigger("error",s,r),t.loadingDeferred.reject()},_onUpdatingError:function(e){this._onLoadingError.apply(this,e.data)}})});
//# sourceMappingURL=IssueLoaderService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/MetadataService.js' */
define("jira/components/issueviewer/services/metadataservice",["require"],function(e){"use strict";var t=e("jira/util/data/meta"),a=e("jira/components/libs/underscore");return{removeIssueMetadata:function(e){var s=e.getEntity();s.metadata?a.each(s.metadata,function(e,a){t.set(a,null)}):t.get("issue-key")&&t.set("issue-key",null)},addIssueMetadata:function(e){var s=e.getEntity();a.each(s.metadata,function(e,a){t.set(a,e)})}}});
//# sourceMappingURL=MetadataService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/DarkFeatures.js' */
define("jira/components/issueviewer/services/darkfeatures",["require"],function(e){"use strict";var r=e("jira/ajs/dark-features");return function(){var e=function(e,r){this.featureKey=e,this.featureOffKey=r};return e.prototype.enabled=function(){return this.featureOffKey?r.isEnabled(this.featureKey)&&!r.isEnabled(this.featureOffKey):r.isEnabled(this.featureKey)},{ISSUE_TRANSITIONS_DROPDOWN:new e("ka.ISSUE_TRANSITIONS_DROPDOWN","ka.ISSUE_TRANSITIONS_DROPDOWN_OFF")}}()});
//# sourceMappingURL=DarkFeatures-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/LinksCapturer.js' */
define("jira/components/issueviewer/linkscapturer",["require","jira/featureflags/simplified-ux-feature-manager"],function(e,i){"use strict";var t=e("jira/components/libs/underscore"),n=e("jira/util/events"),s=e("jira/ajs/layer/inline-layer"),a=e("jquery"),o=e("jira/components/libs/marionette-1.4.1/controller"),r=e("jira/message"),u=e("jira/ajs/ajax/smart-ajax"),l=e("jira/components/libs/uri");return o.extend({initialize:function(){t.bindAll(this,"_onRefineViewEvents","_offRefineViewEvents","_handleReviewViewEvents")},capture:function(e){e!==this.el&&(this.el=e,this.linksToOtherIssues(),this.linksToReorderSubtasks(),this.viewOptionsForCurrentIssue())},linksToOtherIssues:function(){i.isAdg3ModeOn()&&this._isRapidBoardPage()||a(this.el).on("simpleClick","a.issue-link[data-issue-key]",function(e){e.preventDefault();var t=a(e.target).closest("a").data("issue-key");if(i.isAdg3ModeOn()){var n=t.split("-")[0];JIRA.API.getSidebar().done(function(e){e.updateData({projectKey:n})})}this.trigger("linkToIssue",{issueKey:t})}.bind(this))},linksToReorderSubtasks:function(){a(this.el).on("simpleClick",".subtask-reorder a",function(e){e.target.href&&(e.preventDefault(),a.ajax({type:"GET",data:{disableRedirect:!0},url:e.target.href}).done(function(){this.trigger("reorderSubtasks")}.bind(this)).fail(function(e){r.showErrorMsg(u.buildSimpleErrorContent(e),{closeable:!0})}))}.bind(this))},_handleReviewViewEvents:function(e){var i=e.currentTarget;a(i).parents("ul").find("a.aui-checked").removeClass("aui-checked"),a(i).addClass("aui-checked");var t=new l(i.href).query(!0),n=this.triggerPreventable("refineViewer",{query:t});n.isPrevented&&e.preventDefault()},_onRefineViewEvents:function(e,i){a(i).on("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_offRefineViewEvents:function(e,i){a(i).off("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_location:function(){return window.location},_isRapidBoardPage:function(){return this._location().href.indexOf("RapidBoard.jspa")>=0},viewOptionsForCurrentIssue:function(){n.bind(s.EVENTS.show,this._onRefineViewEvents),n.bind(s.EVENTS.hide,this._offRefineViewEvents)},destroy:function(){n.unbind(s.EVENTS.show,this._onRefineViewEvents),n.unbind(s.EVENTS.hide,this._offRefineViewEvents)}})});
//# sourceMappingURL=LinksCapturer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/BreadcrumbsProjectHider.js' */
define("jira/components/issueviewer/services/breadcrumbs-project-hider",["require"],function(e){function n(e){e.isCollapsed()?i():r()}function r(){var e=a.find(o);e.length>0&&(u=e.detach())}function i(){var e=a.find(s);u&&0===e.find(o).length&&u.prependTo(e)}var t=(e("jquery"),{}),o=".breadcrumbs-project-name",s=".aui-nav-breadcrumbs",u=null,a=null;return t.bindToSidebarEvents=function(e,t){e.isProjectSidebar()&&(a=t,n(e),e.off(e.events.SIDEBAR_COLLAPSE_END,i),e.on(e.events.SIDEBAR_COLLAPSE_END,i),e.off(e.events.SIDEBAR_EXPAND_END,r),e.on(e.events.SIDEBAR_EXPAND_END,r))},t});
//# sourceMappingURL=BreadcrumbsProjectHider-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/IssueEventBus.js' */
define("jira/components/issueviewer/legacy/issueeventbus",["require"],function(e){"use strict";var s=e("jira/components/libs/brace");return s.Model.extend({namedAttributes:["issueId"],namedEvents:["save","saveSuccess","savingStarted","saveError","panelRendered","replacedFocusedPanel","fieldSubmitted","dismiss","refreshIssue","issueRefreshed","updateFromDom","updateStatusColor","quickEditKeyPressed","openFocusShifter"]})});
//# sourceMappingURL=IssueEventBus-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/AsyncData.js' */
define("jira/components/issueviewer/legacy/asyncdata",["require"],function(e){"use strict";var t=e("jira/components/libs/brace"),n=e("jira/components/libs/underscore"),i=e("jquery");return t.Evented.extend({namedEvents:["change"],initialize:function(e){this.data={},this.pendings={},this.accessIndex=0,e&&(this.disableCache=e.disableCache,this.maxCacheSize=e.maxCacheSize)},get:function(e,t,a){var r=new i.Deferred,s=this.disableCache?{}:this.data,h=function(t,i){var h=this._set(s,e,n.defaults(t,{accessIndex:this.accessIndex++}),!0,a),d=n.defaults({changed:h},i,s[e]);a&&a.mergeIntoCurrent&&(d.mergeIntoCurrent=!0),s[e]&&!s[e].error?r.resolve(s[e].value,d,a):r.reject(s[e]&&s[e].value,d,a)}.bind(this),d=function(t){var n=this.fetch(e,a);this.setPending(e,n,function(e){h({value:e,error:!1,updated:new Date},{initialLoad:t})},function(e){var n={error:!0,updated:new Date};void 0!==e&&(n.value=e),h(n,{initialLoad:t,error:!0})})}.bind(this),u=function(){h({},{fromCache:!0})},c=function(){this.pendings[e].always(n.bind(h,this,{},{initialLoad:!0}))}.bind(this);return t||this.disableCache?d(!1):this.hasCached(e)?u():this.hasPending(e)?c():d(!0),r.promise()},setPending:function(e,t,n,a){return this.hasPending(e)?this.pendings[e].update(t):this.pendings[e]=new i.ConcurrentDeferred(t),this.pendings[e].done(function(e){n(e)}).fail(function(e){a(e)})},getIdByValue:function(e){var t;for(t in this.data)if(this.data[t].value===e)return t;return null},getMeta:function(e){return this.data[e]||{}},getAllCached:function(){var e={};return n.each(this.data,function(t,n){e[n]=t.value}),e},hasCached:function(e){var t=this.getMeta(e);return void 0!==t.value||t.error===!0},hasError:function(e){var t=this.getMeta(e);return t.error===!0},hasPending:function(e){var t=this.pendings[e];return!!t&&t.isPending()},set:function(e,t){return this._set(this.data,e,{value:t,updated:new Date},!0)},remove:function(e){return!!this.data[e]&&(delete this.data[e],this.triggerChange(),!0)},setError:function(e,t){var n={error:!0,updated:new Date};return void 0!==t&&(n.value=t),this._set(this.data,e,n,!0)},setMultiple:function(e){var t=new Date,i=!1;return n.each(e,function(e,a){e=n.pick(e,"value","error"),e.updated=t,this._set(this.data,a,e,!1)&&(i=!0)}.bind(this)),i&&this.triggerChange(),i},reset:function(e){this.data={},this.pendings={},this.accessIndex=0,e?this.setMultiple(e):this.triggerChange()},_set:function(e,t,i,a,r){this.disableCache&&e===this.data&&(e={});var s=e[t]?n.clone(e[t]):{},h=this.mergeFetchedAndCached(s,i,r?r:{},e[t]);return!a||e[t]&&!h&&e[t].error===s.error||e!==this.data||this.triggerChange(),!e[t]&&this.maxCacheSize&&n.keys(e).length===this.maxCacheSize?i.accessIndex&&(this._dropItem(e),e[t]=s):e[t]=s,h},_dropItem:function(e){var t=null;for(var n in e){if(!e[n].accessIndex){t=n;break}(null===t||e[n].accessIndex<e[t].accessIndex)&&(t=n)}null!==t&&delete e[t]},fetch:function(e){var t=this.getMeta(e),n=new i.Deferred;return!this.hasCached(e)||t.error?n.reject(t.value):n.resolve(t.value),n.promise()},mergeFetchedAndCached:function(e,t,i,a){return n.extend(e,t),!a||a.value!==e.value||a.error!==e.error}})});
//# sourceMappingURL=AsyncData-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/ViewIssueData.js' */
define("jira/components/issueviewer/legacy/viewissuedata",["require","jira/featureflags/feature-manager"],function(e,s){"use strict";var i=e("jira/components/libs/underscore"),n=e("jira/components/issueviewer/legacy/asyncdata"),t=e("jira/util/data/meta"),u=e("jquery"),a=window.AJS.contextPath();return n.extend({initialize:function(e){e=e||{},this.isGlobalIssueNavigator=e.isGlobalIssueNavigator,n.prototype.initialize.call(this,i.defaults(e||{},{disableCache:!1,maxCacheSize:t.get("viewissue-max-cache-size")}))},fetch:function(e,n){var t={issueKey:e,decorator:"none",prefetch:!!n.prefetch};if(t.shouldUpdateCurrentProject=!n.detailView,n.mergeIntoCurrent&&this.data&&this.data[e]&&this.data[e].value&&this.data[e].value.issue){t.lastReadTime=this.data[e].value.readTime,t.fields=[],i.each(this.data[e].value.fields,function(e){t.fields.push(e.id+":"+e.contentId)}),t.issue=["summary:"+this.data[e].value.issue.summaryContentId],t.links=[];var r=function g(e){i.each(e.links,function(e){t.links.push(e.id+":"+e.contentId)}),i.each(e.groups,function(e){g(e)})};i.each(this.data[e].value.issue.operations.linkGroups,function(e){r(e)}),t.panels=[];var o=this,d=function(s){i.each(o.data[e].value.panels[s],function(e){t.panels.push(e.completeKey+":"+e.contentId)})};d("leftPanels"),d("rightPanels"),d("infoPanels")}"loadFields"in n&&(t.loadFields=n.loadFields),n.issueEntity&&i.defaults(t,n.issueEntity.viewIssueQuery);var l=s.isFeatureEnabled("issue.details.global-issue-navigator")&&"true"===u('meta[name="ajs-new-jira-issue-view-gin-enabled"]').attr("content"),p=s.isFeatureEnabled("issue.details.global-issue-navigator-improvements");if(this.isGlobalIssueNavigator&&l&&p){var c=u.Deferred();return c.resolve({issue:{id:void 0,key:t.issueKey,status:{name:void 0}}})}var h=u.ajax({url:a+"/secure/AjaxIssueAction!default.jspa",headers:{"X-SITEMESH-OFF":!0},data:t,type:n.mergeIntoCurrent?"POST":"GET"}),c=h.pipe(function(e){return e},function(e){return i.pick(e,"status","responseText","statusText")});return c.abort=function(){h.abort.apply(h,arguments)},c},mergeFetchedAndCached:function(e,s,n){if(this._skipMerging(e,s,n))return i.extend(e,s),null;i.each(i.pairs(s),function(s){"value"!==s[0]&&(e[s[0]]=s[1])});var t=s.value,u=[],a=[],r=[];i.each(t.removedContentIds,function(e,s){var n;"fields"===s?n=u:"panels"===s?n=a:"links"===s&&(n=r),n&&i.each(e,function(e){n.push(e)})});var o=t.fields,d=t.issue.operations.linkGroups,l=t.panels,p=t.issue.summary,c=t.issue.primaryActions,h=t.issue.transitions;if(this._nothingChanged(u,a,r,o,l,d,p))return null;var g={updated:{},added:{},deleted:{}},f=e.value,v=this._comparator;return(u.length>0||o.length>0)&&this._mergeFields(o,f,g,u),(a.length>0||l.leftPanels.length>0||l.rightPanels.length>0||l.infoPanels.length>0)&&this._mergePanels(l,f,g,a,v),(r.length>0||d.length>0)&&this._mergeLinks(d,f,g,r,v),p&&this._mergeSummary(t,f,g),c&&this._mergePrimaryActions(t,f,g),h&&this._mergeTransitions(t,f,g),f.issue.status=t.issue.status,g},_skipMerging:function(e,s,n){return i.isEmpty(e)||!n.mergeIntoCurrent||!e.value||!e.value.issue||s.error===!0},_nothingChanged:function(e,s,i,n,t,u,a){return 0===e.length&&0===s.length&&0===i.length&&0===n.length&&0===u.length&&0===t.leftPanels.length&&0===t.rightPanels.length&&0===t.infoPanels.length&&!a},_mergeFields:function(e,s,n,t){n.added.fields=[],n.updated.fields=[],n.deleted.fields=[],i.each(e,function(e){var t=i.find(s.fields,function(s){return s.id===e.id});t?n.updated.fields.push(e.id):n.added.fields.push(e.id)});var u=e;i.each(s.fields,function(e){i.contains(t,e.id)?n.deleted.fields.push(e.id):i.contains(n.updated.fields,e.id)||u.push(e)}),s.fields=u},_mergeSummary:function(e,s,i){i.updated.issue=["summary"],s.issue.summary=e.issue.summary,s.issue.summaryContentId=e.issue.summaryContentId},_mergePrimaryActions:function(e,s,i){i.updated.issue=["primaryActions"],s.issue.primaryActions=e.issue.primaryActions},_mergeTransitions:function(e,s,i){i.updated.issue=["transitions"],s.issue.transitions=e.issue.transitions},_mergePanels:function(e,s,n,t,u){n.added.panels={},n.updated.panels={},n.deleted.panels={};var a=function(a){n.added.panels[a]=[],n.updated.panels[a]=[],n.deleted.panels[a]=[],i.each(e[a],function(e){var t=i.find(s.panels[a],function(s){return s.id===e.id});t?n.updated.panels[a].push(e.id):n.added.panels[a].push(e.id)});var r=e[a];i.each(s.panels[a],function(e){i.contains(t,e.completeKey)?n.deleted.panels[a].push(e.id):i.contains(n.updated.panels[a],e.id)||r.push(e)}),r.sort(u),s.panels[a]=r};a("leftPanels"),a("rightPanels"),a("infoPanels")},_mergeLinks:function(e,s,i,n,t){i.added.groups={},i.updated.groups={},i.deleted.groups={};var u=[];this._mergeOperationsLinks(e,s,u,i,n,t),this._mergeToolsLinks(e,s,u,i,n,t),s.issue.operations.linkGroups=u},_mergeOperationsLinks:function(e,s,n,t,u,a){t.added.groups["view.issue.opsbar"]=[],t.updated.groups["view.issue.opsbar"]=[],t.deleted.groups["view.issue.opsbar"]=[];var r=i.find(s.issue.operations.linkGroups,function(e){return"view.issue.opsbar"===e.id}),o=i.find(e,function(e){return"view.issue.opsbar"===e.id}),d={},l={};if(o&&i.each(o.groups,function(e){var s=i.find(r.groups,function(s){return e.id===s.id});if(s?t.updated.groups["view.issue.opsbar"].push(e.id):t.added.groups["view.issue.opsbar"].push(e.id),i.each(e.links,function(s){d[s.id]=s,l[s.id]=e.id}),e.groups&&e.groups.length>0){var n=e.groups[0];i.each(n.groups,function(e){i.each(e.links,function(s){d[s.id]=s,l[s.id]=e.id})})}}),r){var p=[];o&&i.each(o.groups,function(e){i.contains(t.added.groups["view.issue.opsbar"],e.id)&&p.push(e)}),i.each(r.groups,function(e){var s=[],n=null;o&&(n=i.find(o.groups,function(s){return e.id===s.id}),n&&i.each(n.links,function(n){var t=i.find(e.links,function(e){return n.id===e.id});t||s.push(n)}));var r=!1,c=function(e,s){i.each(e.links,function(n){var t=l[n.id];t&&t!==e.id?r=!0:d[n.id]?s.push(d[n.id]):i.contains(u,n.id)?r=!0:s.push(n)})};c(e,s),s.sort(a),e.links=s;var h=null;n&&n.groups&&n.groups.length>0&&(h=n.groups[0]);var g=null;if(e.groups&&e.groups.length>0){g=e.groups[0];var f=[];h&&i.each(h.groups,function(e){var s=i.find(g.groups,function(s){return e.id===s.id});s||f.push(e)}),i.each(g.groups,function(e){var s=[];if(h){var n=i.find(h.groups,function(s){return s.id===e.id});n&&i.each(n.links,function(n){var t=i.find(e.links,function(e){return n.id===e.id});t||s.push(n)})}c(e,s),s.length>0&&(s.sort(a),e.links=s,f.push(e))}),f.length>0?(f.sort(a),g.groups=f):(g=null,r=!0)}else h&&(g=n.groups[0]);e.groups=[],g&&(e.groups[0]=g),s.length>0||g?(p.push(e),r&&!i.contains(t.updated.groups["view.issue.opsbar"],e.id)&&t.updated.groups["view.issue.opsbar"].push(e.id)):t.deleted.groups["view.issue.opsbar"].push(e.id)}),p.length>0&&(p.sort(a),r.groups=p,n.push(r))}else o&&n.push(o);t.added.groups["view.issue.opsbar"].sort(),t.deleted.groups["view.issue.opsbar"].sort(),t.updated.groups["view.issue.opsbar"].sort()},_updatedLinks:function(e,s,n,t){function u(e){return!i.contains(n,e.id)}function a(s){return!i.findWhere(e,{id:s.id})}var r=i.chain(s).filter(a).union(e).filter(u).value();return r.sort(t),r},_collectAllLinks:function(e){var s=e.links||[],n=e.groups||[];return i.chain(n).map(this._collectAllLinks.bind(this)).flatten().union(s).value()},_mergeGroupLinks:function(e,s,n,t,u){i.map(e.groups||[],this._mergeGroupLinks.bind(this));var a=[],r=null;s&&s.groups&&s.groups.length>0&&(r=i.find(s.groups,function(s){return e.id===s.id})),r&&i.each(r.links,function(s){var n=i.find(e.links,function(e){return s.id===e.id});n||a.push(s)}),i.each(e.links,function(e){n[e.id]?a.push(n[e.id]):i.contains(t,e.id)||a.push(e)}),a.length>0&&(a.sort(u),e.links=a)},_mergeToolsLinks:function(e,s,n,t,a,r){t.updated.groups["jira.issue.tools"]=!1;var o=i.find(s.issue.operations.linkGroups,function(e){return"jira.issue.tools"===e.id}),d=i.find(e,function(e){return"jira.issue.tools"===e.id}),l={};if(d&&(t.updated.groups["jira.issue.tools"]=!0,l=i.indexBy(this._collectAllLinks(d),"id")),o){var p=d&&d.links||[],c=o.links||[];o.links=this._updatedLinks(p,c,a,r),o.groups&&o.groups.length>0?i.each(o.groups,function(e){this._mergeGroupLinks(e,d,l,a,r)}.bind(this)):d.groups&&d.groups.length>0&&(o.groups=u.extend(!0,{},d.groups)),n.push(o)}else d&&n.push(d)},_comparator:function(e,s){return e.weight&&s.weight?e.weight>s.weight?1:e.weight<s.weight?-1:0:e.weight&&!s.weight?1:!e.weight&&s.weight?-1:0},updateIssue:function(e,s){var i=this.getMeta(e);i&&i.value&&(i.value.fields=s.fields||{})}})});
//# sourceMappingURL=ViewIssueData-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/IssueFieldUtil.js' */
define("jira/components/issueviewer/legacy/issuefieldutil",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jquery"),r={getFieldSelector:function(e){return"issuetype"===e?"#type-val":"fixVersions"===e?"#fixfor-val":"summary"===e?"#summary-val":"labels"===e?"#wrap-labels .value":"duedate"===e?"#due-date":"#"+e+"-val"},matchesFieldSelector:function(e){return 1===i(r.getFieldSelector(e)).length},transformFieldHtml:function(e){return e.fields=t.map(e.fields,function(e){var t=i("<div />").htmlCatchExceptions(e.editHtml);return 0!==t.find("input.radio,input.checkbox").length?t.find("legend").eq(0).remove():t.find("label").eq(0).remove(),{id:e.id,label:e.label,editHtml:t.html(),required:e.required,contentId:e.contentId}}),e},getAccessKeyModifier:function(){var e=i("#home_link_drop").attr("title"),t=/\(([\w\+]+)\+\w\)/i;return t.test(e)?t.exec(e)[1]:"Alt"}};return r});
//# sourceMappingURL=IssueFieldUtil-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/Utils.js' */
define("jira/components/issueviewer/utils",["require"],function(e){"use strict";var i=e("aui/inline-dialog"),r=e("jira/ajs/layer/inline-layer"),n=e("jquery");return{hideLightbox:function(){n.fancybox.close()},hideDropdown:function(){if(i.current&&"column-picker-dialog"!==i.current.id&&i.current.hide(),r.current){var e=r.current.options.offsetTarget();e instanceof n&&(e.is(":visible")||r.current.hide())}}}});
//# sourceMappingURL=Utils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/actions.js' */
define("jira/components/issueviewer/actions",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore");return n.extend(AJS.namespace("JIRA.Issues.Actions"),{EDIT_COMMENT:"editComment"})});
//# sourceMappingURL=actions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/eventtypes.js' */
define("jira/components/issueviewer/eventtypes",["require"],function(e){"use strict";var s=e("jira/util/events/types");return s.ISSUE_REFRESHED="issueRefreshed",s.PANEL_REFRESHED="panelRefreshed",s});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/analytics/IssueOpsbar.js' */
define("jira/components/issueviewer/analytics/issueopsbar",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),e=t("jquery"),n=t("jira/viewissue/analytics-utils"),r=t("jira/components/utils/ajshelper"),s=t("jira/components/analytics-tracker/tracker"),a=function(t){this.issueId=t.model.get("id"),this.$el=t.$el,this.bindEventsToOpsbar()};return a.prototype.triggerEvent=function(t){s.trackEvent("viewissue","opsbar.operation",t),r.trigger("analyticsEvent",{name:"kickass.opsbar.operation",data:t})},a.prototype._getParamsButtonMain=function(t,e,n){return i.extend(this._getParamsCommon(t),{issueId:this.issueId,id:e.attr("id"),idx:n})},a.prototype._getParamsButtonSubmenu=function(t,e,n,r,s){return i.extend(this._getParamsCommon(t),{issueId:this.issueId,id:e.attr("id"),idx:n,parentId:r.attr("id"),parentIdx:s})},a.prototype._getParamsCommon=function(){return{context:n.context()}},a.prototype.bindEventsToOpsbar=function(){var t=this.$el.find(".toolbar-analytics");t.each(function(t,i){var n=e(i),r=n.find("a.toolbar-trigger");r.click(function(i){this.triggerEvent(this._getParamsButtonMain(i,r,t))}.bind(this));var s=n.find("li.aui-list-item a");s.length>=1&&s.each(function(i,n){var s=e(n);s.click(function(e){this.triggerEvent(this._getParamsButtonSubmenu(e,s,i,r,t))}.bind(this))}.bind(this))}.bind(this))},a});
//# sourceMappingURL=IssueOpsbar-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/analytics/IssueUxMetrics.js' */
define("jira/components/issueviewer/analytics/issue-uxmetrics",["jquery","jira/components/analytics-tracker/tracker"],function(t,e){"use strict";return{trackPageMetrics:function(){var n=t("#assignee-val").text().trim().search("Unassigned")===-1,s=0!==t("#reporter-val").text().trim().length,i=t("#opsbar-opsbar-transitions .issueaction-workflow-transition").length,o=t("#description-val"),l=o.text().trim().length,a=o.height(),u=t("#details-module ul#issuedetails>li").length,r=t("#customfield-tabs ul.property-list>li.item").length,c=t("#details-module #wrap-labels ul>li").length,m=c>0?c-1:0,d=t("#details-module ul#issuedetails>li li").length,h=t("#customfield-tabs ul.property-list>li.item li").length,p=t("ol#attachment_thumbnails>li").length,g=t(".issue-body-content .module.toggle-wrap"),C=g.not(":has(.ap-container)").length,b=g.has(".ap-container").length,v=t("#opsbar-operations_more_drop .aui-dropdown2-section .aui-list-item").length,y=t("#peoplemodule ul dl").length,w=t("#datesmodule ul dl").length,_={isAssigned:n,hasReporter:s,transitionsCount:i,descriptionCharacterCount:l,descriptionBlockHeight:a,systemFieldsCount:u,customFieldsCount:r,labelsCount:m,systemFieldChildItemsCount:d,customFieldChildItemsCount:h,attachmentsCount:p,nonConnectWebPanelsCount:C,connectWebPanelsCount:b,moreMenuItemCount:v,peopleModuleFieldsCount:y,datesModuleFieldsCount:w},f=t("#comment-tabpanel.active").length>0;f&&(_.visibleCommentsCount=t("#issue_actions_container .activity-comment").length,_.collapsedCommentsCount=t("#issue_actions_container .show-more-comments").attr("data-collapsed-count")||0),e.trackEvent("viewissue","uxmetrics",_)}}});
//# sourceMappingURL=IssueUxMetrics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/IssueViewer.js' */
define("jira/components/issueviewer",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueviewer/actions"),t=e("jira/components/issueviewer/controllers/error"),r=e("jira/util/events"),o=e("jira/components/issueviewer/controllers/issue"),n=e("jira/components/issueviewer/legacy/issueeventbus"),u=e("jira/components/issueviewer/services/issueloader"),a=e("jira/components/issueviewer/entities/issue"),l=e("jquery"),d=e("jira/components/issueviewer/linkscapturer"),h=e("jira/components/libs/marionette-1.4.1/controller"),c=e("jira/util/data/meta"),m=e("jira/components/issueviewer/services/metadataservice"),g=e("jira/util/events/reasons"),p=window.JIRA,I=e("jira/components/issueviewer/eventtypes"),f=e("jira/components/issueviewer/utils"),v=e("jira/components/issueviewer/legacy/viewissuedata"),C=e("wrm/data"),w=e("jira/components/issueviewer/analytics/issue-uxmetrics"),E=window.AJS.contextPath(),y=function(){p.trace.apply(p,arguments)};return h.extend({namedEvents:["loadComplete","loadError","close","replacedFocusedPanel","linkToIssue"],initialize:function(e){var i=this;e=e||{},e.useJIRAEvents=e.useJIRAEvents!==!1,this.isGlobalIssueNavigator=e.isGlobalIssueNavigator||!1,this.model=new a,this.eventBus=new n,this.viewIssueData=new v({isGlobalIssueNavigator:this.isGlobalIssueNavigator}),this._buildIssueLoader(),this._buildLinksCapturer(),this._buildErrorController({showReturnToSearchOnError:e.showReturnToSearchOnError}),this._buildIssueController(),r.bind(I.REFRESH_ISSUE_PAGE,function(e,s,i){this.model.isCurrentIssue(s)&&this.refreshIssue(i)}.bind(this)),this.memoizedUxMetricsTracker=s.memoize(w.trackPageMetrics,function(){return i.model.getId()})},_buildIssueLoader:function(){this.issueLoader=new u,this.listenTo(this.issueLoader,"error",function(e,s){this.trigger("loadError",s),this.errorController.render(e,s.issueKey),this.removeIssueMetadata(),y("jira.issue.refreshed",{id:s.issueId}),this.options.useJIRAEvents&&r.trigger(I.ISSUE_REFRESHED,[s.issueId])}),this.listenTo(this.issueLoader,"issueLoaded",this._onIssueLoaded)},_buildLinksCapturer:function(){this.linksCapturer=new d,this.listenTo(this.linksCapturer,{linkToIssue:function(e){this.trigger("linkToIssue",e)},refineViewer:function(e){this.trigger("refineViewer",e)},reorderSubtasks:function(){this.issueController.showLoading(),this.refreshIssue({reason:i.UPDATE}).always(function(){this.issueController.hideLoading()}.bind(this))}})},_buildErrorController:function(e){e=e||{},this.errorController=new t({contextPath:E,showReturnToSearchOnError:e.showReturnToSearchOnError}),this.listenTo(this.errorController,"before:render",function(){this.issueController.close()}),this.listenTo(this.errorController,"returnToSearch",function(){this.trigger("close")}),this.listenAndRethrow(this.errorController,"render")},_buildIssueController:function(){this.issueController=new o({model:this.model,isGlobalIssueNavigator:this.isGlobalIssueNavigator}),this.listenAndRethrow(this.issueController,"replacedFocusedPanel"),this.listenTo(this.issueController,{render:function(e,s){f.hideDropdown(),this.errorController.close(),this.trigger("render",e,s),y("jira.psycho.issue.refreshed",{id:this.model.getId()}),this.memoizedUxMetricsTracker()},renderMainView:function(e){this.options.useJIRAEvents&&(r.trigger(I.NEW_CONTENT_ADDED,[e,g.pageLoad]),r.trigger(I.REFRESH_TOGGLE_BLOCKS,[this.model.getId()])),this.trigger("renderMainView",e,this.model.getId())},panelRendered:function(e,s,i){this.eventBus.triggerPanelRendered(e,s),this.options.useJIRAEvents&&r.trigger(I.PANEL_REFRESHED,[e,s,i]),this.trigger("panelRendered",e,s,i)},close:function(){f.hideDropdown()},individualPanelRendered:function(e){this.options.useJIRAEvents&&r.trigger(I.NEW_CONTENT_ADDED,[e,g.panelRefreshed]),this.trigger("individualPanelRendered",e)}})},_updateModel:function(e,s){this.model.update(e,s)},_onIssueLoaded:function(e,s,i){var t=i.issueEntity,o=!s.mergeIntoCurrent&&i.initialize!==!1,n=!this.model.isCurrentIssue(t.id),u=!!t.detailView;s.isUpdate&&!o||(this.model.resetToDefault(),this.errorController.close()),this._updateModel(e,{initialize:o,changed:s.changed,mergeIntoCurrent:s.mergeIntoCurrent}),s.isUpdate&&!o||this.issueController.close(),this.issueController.show(),s.fromCache&&this.refreshIssue(t,{fromCache:!0,mergeIntoCurrent:!s.error,detailView:u}),m.addIssueMetadata(this.model),t.bringToFocus&&t.bringToFocus(),this._triggerLoadComplete(n,s,t);var a={id:t.id};s.fromCache?y("jira.issue.loadFromCache",a):y("jira.issue.loadFromServer",a),y("jira.issue.refreshed",a),this.options.useJIRAEvents&&r.trigger(I.ISSUE_REFRESHED,[t.id])},_triggerLoadComplete:function(e,s,i){this.trigger("loadComplete",this.model,{isNewIssue:e,issueId:i.id,issueKey:i.key,duration:s.loadDuration,loadReason:s.fromCache?"issues-cache-refresh":void 0,fromCache:s.fromCache,issueRefreshedEvent:!!this.options.useJIRAEvents})},abortPending:function(){this.issueLoader.cancel()},canDismissComment:function(){return this.issueController.canDismissComment()},beforeHide:function(){f.hideLightbox(),f.hideDropdown(),this.abortPending(),this.removeIssueMetadata()},beforeShow:function(){m.addIssueMetadata(this.model)},getIssueId:function(){return this.model.getEntity().id||null},getIssueKey:function(){return this.model.getEntity().key||null},getProjectKey:function(){return this.model.get("projectKey")||null},getProjectType:function(){return this.model.get("projectType")||null},getProjectId:function(){return this.model.get("projectId")||null},_loadIssueFromDom:function(e){e.id&&e.id!==-1?this.issueController.applyToDom(s.extend({id:-1},e)):(this.errorController.applyToDom("notfound",e.key),this.trigger("loadError")),c.set("serverRenderedViewIssue",null);var i={id:this.getIssueId()};y("jira.issue.refreshed",i)},loadIssue:function(e){var s=c.get("serverRenderedViewIssue");return s?(e.project={id:C.claim("projectId"),key:C.claim("projectKey"),projectType:C.claim("projectType")},this.loadIssueRenderedByTheServer(e)):this.canDismissComment()&&e.key?(this.issueController.showLoading(),this.issueLoader.load({issueEntity:e,viewIssueData:this.viewIssueData})):(new l.Deferred).reject()},loadIssueRenderedByTheServer:function(e){var s=l("#key-val"),i=l("#summary-val");return e.id=s.attr("rel")||-1,e.summary=i.text(),this._loadIssueFromDom(e),this.trigger("loadComplete",this.model,{isNewIssue:!1,issueId:e.id,issueKey:e.key,duration:0,loadReason:void 0,fromCache:!1}),(new l.Deferred).resolve().promise()},refreshIssue:function(e){var i;return e=s.defaults({},e,{mergeIntoCurrent:!0}),this.model.hasIssue()?(i=this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:e.mergeIntoCurrent,detailView:e.detailView}),e.complete&&(i=i.done(e.complete).fail(e.complete)),this.issueController.showLoading()):i=(new l.Deferred).resolve().promise(),i},removeIssueMetadata:function(){m.removeIssueMetadata(this.model)},setContainer:function(e){this.linksCapturer.capture(e),this.errorController.setElement(e),this.issueController.setElement(e)},isCurrentlyLoading:function(){return this.issueLoader.isLoading()},updateIssueWithQuery:function(e){this.model.updateIssueQuery(e),this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:!0})},dismiss:function(){this.model.resetToDefault(),this.errorController.close(),this.issueController.close(),this.linksCapturer.destroy()},close:function(){this.canDismissComment()&&(this.dismiss(),this.trigger("close"))},applyResponsiveDesign:function(){this.issueController.applyResponsiveDesign()},isShowingError:function(){return this.errorController.isRendered()},focus:function(){this.issueController.focus()},initialFocus:function(){this.issueController.initialFocus()}})});
//# sourceMappingURL=IssueViewer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/IssueViewerAppModule.js' */
define("jira/components/issueviewer/appmodule",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),n=e("jira/components/issueviewer"),s=e("jira/components/libs/marionette-1.4.1/appmodule");return s.extend({name:"issueViewer",generateMasterRequest:!0,create:function(e){return e=r.defaults({},e,{showReturnToSearchOnError:function(){return!1}}),new n({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(){return{abortPending:!0,beforeHide:!0,beforeShow:!0,removeIssueMetadata:!0,updateIssueWithQuery:!0,close:!0,setContainer:!0,dismiss:!0}},requests:function(){return{loadIssue:!0,canDismissComment:!0,getIssueId:!0,getIssueKey:!0,refreshIssue:!0,isCurrentlyLoading:!0}},events:function(){return["loadComplete","loadError","close","render","replacedFocusedPanel","linkToIssue","refineViewer"]}})});
//# sourceMappingURL=IssueViewerAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/Issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),JIRA.Components.IssueViewer.Templates.layout=function(e,s){return'<div id="issue-content" class="issue-edit-form">'+(e.serverRenderedViewIssue?'<header id="stalker" class="issue-header js-stalker" tabindex="-1">'+JIRA.Components.IssueViewer.Templates.Header.issueHeader(e)+'</header><div class="issue-body-content">'+JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels(e)+"</div>":'<div class="issue-header-container" />'+(e.isNewIssueViewEnabledInGlobalIssueNav&&e.isGlobalIssueNavigator?'<div id="new-issue-body-container" />':'<div class="issue-body-container" id="legacy-issue-body-container" />'))+"</div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueHeader.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Header&&(JIRA.Components.IssueViewer.Templates.Header={}),JIRA.Components.IssueViewer.Templates.Header.legacyIssueHeader=function(e,s){return'<div class="issue-header-content"><div id="issue-header-pager">'+(e.pager?JIRA.Components.IssueViewer.Templates.Header.pager(e.pager):"")+'</div><div id="heading-avatar"><img id="project-avatar" alt="" class="project-avatar-48" height="48" src="'+soy.$$escapeHtml(e.issue.project.avatarUrls["48x48"])+'" width="48"></div><ul class="breadcrumbs"><li><a id="project-name-val" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.project.key)+'">'+soy.$$escapeHtml(e.issue.project.name)+"</a> </li>"+(e.issue.parent&&e.issue.parent.id?'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.parent.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.parent.key)+'" id="parent_issue_summary" title="'+soy.$$escapeHtml(e.issue.parent.summary)+'">'+soy.$$escapeHtml(e.issue.parent.key)+" "+soy.$$escapeHtml(e.issue.parent.summary)+"</a> </li>":"")+'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.key)+'" id="key-val" rel="'+soy.$$escapeHtml(e.issue.id)+'">'+soy.$$escapeHtml(e.issue.key)+'</a></li></ul><h1 id="summary-val">'+soy.$$escapeHtml(e.issue.summary)+'</h1><div class="command-bar">'+(e.serverRenderedViewIssue?JIRA.Components.IssueViewer.Templates.IssueOpsbar.opsbar(e):"")+"</div></div>"},JIRA.Components.IssueViewer.Templates.Header.issueHeader=function(e,s){return'<div class="issue-header-content">'+aui.page.pageHeader({content:""+(e.issue.project?aui.page.pageHeaderImage({content:""+JIRA.Templates.Headers.projectAvatar({id:""+soy.$$escapeHtml(e.issue.project.id),projectKey:""+soy.$$escapeHtml(e.issue.project.key),projectName:""+soy.$$escapeHtml(e.issue.project.name),avatarUrl:""+soy.$$escapeHtml(e.issue.project.avatarUrls["48x48"]),avatarAlt:""+soy.$$escapeHtml(e.issue.project.name),isSystemAvatar:e.issue.project.systemAvatar})})+(e.isNewIssueViewEnabledInGlobalIssueNav&&e.isGlobalIssueNavigator?"":aui.page.pageHeaderMain({content:'<ol class="aui-nav aui-nav-breadcrumbs"><li class="breadcrumbs-project-name"><a id="project-name-val" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.project.key)+'">'+soy.$$escapeHtml(e.issue.project.name)+"</a></li>"+(e.issue.parent&&e.issue.parent.id?'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.parent.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.parent.key)+'" id="parent_issue_summary" title="'+soy.$$escapeHtml(e.issue.parent.summary)+'">'+soy.$$escapeHtml(e.issue.parent.key)+" "+soy.$$escapeHtml(e.issue.parent.summary)+"</a></li>":"")+'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.key)+'" id="key-val" rel="'+soy.$$escapeHtml(e.issue.id)+'">'+soy.$$escapeHtml(e.issue.key)+'</a></li></ol><h1 id="summary-val">'+soy.$$escapeHtml(e.issue.summary)+"</h1>"})):"")+aui.page.pageHeaderActions({content:'<div id="issue-header-pager">'+(e.pager?JIRA.Components.IssueViewer.Templates.Header.pager(e.pager):"")+"</div>"})})+(e.isNewIssueViewEnabledInGlobalIssueNav&&e.isGlobalIssueNavigator?"":'<div class="command-bar">'+(e.serverRenderedViewIssue?JIRA.Components.IssueViewer.Templates.IssueOpsbar.simpleOpsbar(e):"")+"</div>")+"</div>"},JIRA.Components.IssueViewer.Templates.Header.titleAttr=function(e,s){return""+(e.title?'title="'+soy.$$escapeHtml(e.title)+'"':e.label&&e.label.length&&e.label.length>25?'title="'+soy.$$escapeHtml(e.label)+'"':"")};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueBody.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Body&&(JIRA.Components.IssueViewer.Templates.Body={}),JIRA.Components.IssueViewer.Templates.Body.issueBody=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels({panels:!1,serverRenderedViewIssue:!1})},JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels=function(e,s){var i='<div class="aui-group issue-body"><div class="aui-item issue-main-column">';if(e.serverRenderedViewIssue)for(var a=e.panels.leftPanels,l=a.length,o=0;o<l;o++){var n=a[o];i+=JIRA.Components.IssueViewer.Templates.Body.issuePanel(n)}if(i+='</div><div id="viewissuesidebar" class="aui-item issue-side-column">',e.serverRenderedViewIssue)for(var t=e.panels.rightPanels,r=t.length,d=0;d<r;d++){var u=t[d];i+=JIRA.Components.IssueViewer.Templates.Body.issuePanel(u)}return i+="</div></div>"},JIRA.Components.IssueViewer.Templates.Body.issuePanel=function(e,s){var i="";if(e.renderHeader){i+="<div id="+soy.$$escapeHtml(e.id)+' class="module toggle-wrap"><div id="'+soy.$$escapeHtml(e.id)+'_heading" class="mod-header"><ul class="ops">';for(var a=e.headerLinks.links,l=a.length,o=0;o<l;o++){var n=a[o];i+="<li>"+JIRA.Components.IssueViewer.Templates.Body.simpleLink({link:n})+"</li>"}if(e.headerLinks.groups.length>0){i+='<li class="drop"><div class="aui-dd-parent"><a href="#" class="more-menu aui-button aui-button-subtle aui-icon aui-icon-small aui-iconfont-more js-default-dropdown" title="'+soy.$$escapeHtml("Options")+'"><span>'+soy.$$escapeHtml("Options")+'</span></a><div class="aui-dropdown-content aui-list">';for(var t=e.headerLinks.groups,r=t.length,d=0;d<r;d++){var u=t[d];i+=(u.header&&u.header.label?"<h5>"+soy.$$escapeHtml(u.header.label)+"</h5>":"")+"<ul "+(u.header&&u.header.id?'id="'+soy.$$escapeHtml(u.header.id)+'"':"")+'class="aui-list-section'+(u.header&&u.header.styleClass?" "+soy.$$escapeHtml(u.header.styleClass):"")+(0==d?" aui-first":"")+(d==r-1?" aui-last":"")+'">';for(var m=u.links,p=m.length,c=0;c<p;c++){var f=m[c];i+='<li class="aui-list-item">'+JIRA.Components.IssueViewer.Templates.Body.simpleLink({link:f,additionalStyleClass:"aui-list-item-link"})+"</li>"}i+="</ul>"}i+="</div></div></li>"}if(i+="</ul>",e.subpanelHtmls.length>0){i+='<div class="mod-header-panels">';for(var y=e.subpanelHtmls,v=y.length,I=0;I<v;I++){var h=y[I];i+='<div class="mod-header-panel">'+soy.$$filterNoAutoescape(h)+"</div>"}i+="</div>"}i+='<h2 class="toggle-title">'+soy.$$escapeHtml(e.label)+'</h2></div><div class="mod-content">'+soy.$$filterNoAutoescape(e.html)+"</div></div>"}else i+=soy.$$filterNoAutoescape(e.html);return i},JIRA.Components.IssueViewer.Templates.Body.errorsLoading=function(e,s){e=e||{};var i=""+(e.isTimeout?soy.$$escapeHtml("The Jira server could not be contacted. This may be a temporary glitch or the server may be down."):soy.$$escapeHtml("There were errors loading the issue."));if(e.errorMessages){i+="<ul>";for(var a=e.errorMessages,l=a.length,o=0;o<l;o++){var n=a[o];i+="<li>"+soy.$$escapeHtml(n)+"</li>"}i+="</ul>"}return i},JIRA.Components.IssueViewer.Templates.Body.focusShifter=function(e,s){return'<div class="aui-message closeable" id="focus-shifter"><label><span>'+soy.$$escapeHtml("viewissue.focusshifter")+'</span><div id="focus-shifter-content"></div></label><span class="aui-icon icon-close"></span></div>'},JIRA.Components.IssueViewer.Templates.Body.simpleLink=function(e,s){return"<a "+(e.link.id?' id="'+soy.$$escapeHtml(e.link.id)+'"':"")+'href="'+(e.link.href?soy.$$escapeHtml(e.link.href):"#")+'"'+(e.link.styleClass||e.additionalStyleClass?'class="'+soy.$$escapeHtml(e.link.styleClass)+(e.additionalStyleClass?" "+soy.$$escapeHtml(e.additionalStyleClass):"")+'"':"")+(e.link.title?'title="'+soy.$$escapeHtml(e.link.title)+'"':"")+"><span>"+soy.$$escapeHtml(e.link.label)+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueError.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Error&&(JIRA.Components.IssueViewer.Templates.Error={}),JIRA.Components.IssueViewer.Templates.Error.NoPermission=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.Generic(null)},JIRA.Components.IssueViewer.Templates.Error.DoesNotExist=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title:"This issue can\'t be viewed",body:"The issue you\'re trying to view can\'t be displayed.",bodyAfter:"It may have been deleted or you don\'t have permission to view it right now.",error:"canNotBeViewed",showReloadButton:!1})},JIRA.Components.IssueViewer.Templates.Error.Generic=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title:"This issue can\'t be displayed right now",body:"It could be for a variety of reasons, like a network or application error.",bodyAfter:"Try reloading the page.",error:"genericError",showReloadButton:!0})},JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header:'<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>',body:'<div class="issue-error"><span class="error-image error-image-'+soy.$$escapeHtml(e.error)+'"></span><h1>'+soy.$$escapeHtml(e.title)+"</h1><p>"+soy.$$escapeHtml(e.body)+"<br />"+soy.$$escapeHtml(e.bodyAfter)+"</p>"+(e.showReloadButton?'<p><button id="issue-error-reload-button" class="aui-button aui-button-primary">Reload</button></p>':"")+"</div>"})},JIRA.Components.IssueViewer.Templates.Error.viewIssueError=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header:'<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-main"><h1>'+soy.$$escapeHtml(e.title)+'</h1></div><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>',body:'<div class="aui-message '+soy.$$escapeHtml(e.error)+'"><span class="aui-icon icon-'+soy.$$escapeHtml(e.error)+'"></span><p>'+soy.$$escapeHtml(e.body)+"</p><p>"+soy.$$escapeHtml("If you think this message is wrong, please contact your")+' <a href="'+soy.$$escapeHtml(AJS.contextPath())+'/secure/ContactAdministrators!default.jspa">'+soy.$$escapeHtml("Jira administrators")+"</a>.</p>"+(e.returnToSearch?'<p><a id="return-to-search" class="push-state" href="'+soy.$$escapeHtml(AJS.contextPath())+'/issues/" title="'+soy.$$escapeHtml("Return to search")+'">'+soy.$$escapeHtml("Return to search")+"</a></p>":"")+"</div>"})},JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError=function(e,s){return'<div id="issue-content"><header class="issue-header issue-error-header"><div class="issue-header-content">'+soy.$$filterNoAutoescape(e.header)+'</div></header><div class="issue-body-content issue-error-content">'+soy.$$filterNoAutoescape(e.body)+"</div></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueOpsbar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.IssueOpsbar&&(JIRA.Components.IssueViewer.Templates.IssueOpsbar={}),JIRA.Components.IssueViewer.Templates.IssueOpsbar.opsbar=function(e,s){var o='<div class="ops-cont"><div class="ops-menus aui-toolbar">';if(e.issue.operations)for(var r=e.issue.operations.linkGroups,a=r.length,l=0;l<a;l++){var t=r[l];if(t.id&&"view.issue.opsbar"==t.id){o+='<div class="toolbar-split toolbar-split-left">';for(var p=t.groups,i=p.length,n=0;n<i;n++){var u=p[n];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u,parentGroup:t})}o+="</div>"}else t.id&&"jira.issue.tools"==t.id&&(o+='<div class="toolbar-split toolbar-split-right">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:t})+"</div>")}return o+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.simpleOpsbar=function(e,s){var o='<div class="ops-cont"><div class="ops-menus aui-toolbar">';if(e.issue.operations)for(var r=e.issue.operations.linkGroups,a=r.length,l=0;l<a;l++){var t=r[l];if(t.id&&"view.issue.opsbar"==t.id){o+='<div class="toolbar-split toolbar-split-left">';for(var p=t.groups,i=p.length,n=0;n<i;n++){var u=p[n];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u,parentGroup:t})}o+="</div>"}else t.id&&"jira.issue.tools"==t.id&&(o+='<div class="toolbar-split toolbar-split-right">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.separatedLinks({group:t})+"</div>")}return o+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup=function(e,s){var o="";if(e.group.header&&(e.group.links.length>0||e.group.groups.length>0))o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink(e.group);else{o+="<ul "+(e.group.id?'id="opsbar-'+soy.$$escapeHtml(e.group.id)+'" ':"")+'class="toolbar-group pluggable-ops">';for(var r=e.group.links,a=r.length,l=0;l<a;l++){var t=r[l];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:t})}if(1==e.group.groups.length&&0==e.group.groups[0].links.length&&1==e.group.groups[0].groups.length&&1==e.group.groups[0].groups[0].links.length)o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:e.group.groups[0].groups[0].links[0]});else for(var p=e.group.groups,i=p.length,n=0;n<i;n++){var u=p[n];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u})}o+="</ul>"}return o},JIRA.Components.IssueViewer.Templates.IssueOpsbar.separatedLinks=function(e,s){for(var o="",r=e.group.links,a=r.length,l=0;l<a;l++){var t=r[l];o+='<ul class="toolbar-group pluggable-ops">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:t})+"</ul>"}for(var p=e.group.groups,i=p.length,n=0;n<i;n++){var u=p[n];o+=u.groups.length>0||u.links.length>0?'<ul class="toolbar-group pluggable-ops">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink(soy.$$augmentMap(u,{shouldHideLabel:!0}))+"</ul>":""}return o},JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink=function(e,s){var o='<li class="toolbar-item toolbar-analytics"><div><a href="#"'+(e.header.id?'id="'+soy.$$escapeHtml(e.header.id)+'"':"")+'aria-owns="'+(e.header.id?soy.$$escapeHtml(e.header.id)+"_drop":"")+'" aria-haspopup="true"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:e.header.title,label:e.header.label})+'class="toolbar-trigger aui-button aui-style-default'+(e.links.length>0||e.groups.length>0?" aui-dropdown2-trigger":"")+(e.header.styleClass?" "+soy.$$escapeHtml(e.header.styleClass):"")+'">'+(e.header.iconClass?'<span class="icon '+soy.$$escapeHtml(e.header.iconClass)+'"></span> ':"")+'<span class="dropdown-text">'+(!e.shouldHideLabel&&e.header.label?soy.$$truncate(soy.$$escapeHtml(e.header.label),25,!0):"")+"</span></a><div "+(e.header.id?'id="'+soy.$$escapeHtml(e.header.id)+'_drop"':"")+' class="aui-style-default aui-dropdown2">';if(e.links.length>0){o+="<ul>";for(var r=e.links,a=r.length,l=0;l<a;l++){var t=r[l];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem(t)}o+="</ul>"}for(var p=e.groups,i=p.length,n=0;n<i;n++){var u=p[n];if(u.links.length>0){o+='<div class="aui-dropdown2-section"><ul>';for(var d=u.links,I=d.length,m=0;m<I;m++){var g=d[m];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem(g)}o+="</ul></div>"}}return o+="</div></div></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem=function(e,s){return'<li class="aui-list-item"><a  href="'+(e.href?soy.$$escapeHtml(e.href):"#")+'"'+(e.styleClass?'class="'+soy.$$escapeHtml(e.styleClass)+'"':"")+JIRA.Components.IssueViewer.Templates.Header.titleAttr(e)+(e.id?'id="'+soy.$$escapeHtml(e.id)+'"':"")+'><span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.label),25,!0)+"</span></a></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem=function(e,s){return'<li class="toolbar-item toolbar-analytics"><a id="'+soy.$$escapeHtml(e.link.id)+'"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:e.link.title,label:e.link.label})+'class="toolbar-trigger'+(e.link.styleClass?" "+soy.$$escapeHtml(e.link.styleClass):"")+'" href="'+(e.link.href?soy.$$escapeHtml(e.link.href):"#")+'">'+(e.link.iconClass?'<span class="icon '+soy.$$escapeHtml(e.link.iconClass)+'"></span> <span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.link.label),25,!0)+"</span>":'<span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.link.label),25,!0)+"</span>")+"</a></li>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueActionsBar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.IssueActionsBar&&(JIRA.Components.IssueViewer.Templates.IssueActionsBar={}),JIRA.Components.IssueViewer.Templates.IssueActionsBar.container=function(s,e){for(var t='<div class="actions-bar"><div class="ops-menus">'+(s.issue.transitions.length?JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusDropdown({workflowName:s.issue.workflowName,status:s.issue.status,transitions:s.issue.transitions}):""),n=s.issue.primaryActions,a=n.length,o=0;o<a;o++)for(var i=n[o],r=i.links,l=r.length,u=0;u<l;u++){var p=r[u];t+=JIRA.Components.IssueViewer.Templates.IssueActionsBar.topLevelLink({link:p})}return t+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusDropdown=function(s,e){for(var t='<button class="actions-bar-status-trigger aui-button aui-dropdown2-trigger aui-dropdown2-trigger-arrowless status-lozenge-'+soy.$$escapeHtml(s.status.statusColor)+'" aria-owns="actions-bar-status-dropdown">'+soy.$$escapeHtml(s.status.name)+'<span class="aui-icon aui-icon-small aui-iconfont-expanded"></span></button><div id="actions-bar-status-dropdown" class="aui-style-default aui-dropdown2"><div class="aui-dropdown2-section"><div class="actions-bar-status-list">',n=s.transitions,a=n.length,o=0;o<a;o++){var i=n[o];t+=JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusItem({transitionName:i.transitionName,statusName:i.destinationStatusName,statusColor:i.destinationStatusColor,link:i.url})}return t+='</div></div><div class="aui-dropdown2-section"><ul><li><a href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/admin/workflows/ViewWorkflowSteps.jspa?workflowMode=live&workflowName="+soy.$$escapeHtml(s.workflowName)+'" class="issueaction-viewworkflow jira-workflow-designer-link new-workflow-designer">'+soy.$$escapeHtml("View workflow")+"</a></li></ul></div></div>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusItem=function(s,e){return'<a href="'+(s.link.href?soy.$$escapeHtml(s.link.href):"#")+'" class="actions-bar-status-item issueaction-workflow-transition"><span>'+soy.$$escapeHtml(s.transitionName)+'</span><span><span class="aui-icon aui-icon-small aui-iconfont-up"></span></span><span>'+JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusLozenge({name:s.statusName,color:null!=s.statusColor?s.statusColor:"medium-gray"})+"</span></a>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusLozenge=function(s,e){return'<span class="jira-issue-status-lozenge aui-lozenge status-lozenge-'+soy.$$escapeHtml(s.color)+'">'+soy.$$escapeHtml(s.name)+"</span>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.topLevelLink=function(s,e){return'<a id="'+soy.$$escapeHtml(s.link.id)+'"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:s.link.title,label:s.link.label})+'class="aui-button '+soy.$$escapeHtml(s.link.styleClass)+'" href="'+(s.link.href?soy.$$escapeHtml(s.link.href):"#")+'" ><span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(s.link.label),25,!0)+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/amd-wrapper.js' */
define("jira/components/issueviewer/templates",function(){"use strict";return JIRA.Components.IssueViewer.Templates}),AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueViewer",null,require("jira/components/issueviewer")),AJS.namespace("JIRA.Components.IssueViewer.AppModule",null,require("jira/components/issueviewer/appmodule")),AJS.namespace("JIRA.Components.IssueViewer.Utils",null,require("jira/components/issueviewer/utils")),AJS.namespace("JIRA.Components.IssueViewer.Controllers.Error",null,require("jira/components/issueviewer/controllers/error")),AJS.namespace("JIRA.Components.IssueViewer.Controllers.Issue",null,require("jira/components/issueviewer/controllers/issue")),AJS.namespace("JIRA.Components.IssueViewer.Models.Issue",null,require("jira/components/issueviewer/entities/issue")),AJS.namespace("JIRA.Components.IssueViewer.Models.Panel",null,require("jira/components/issueviewer/entities/panel")),AJS.namespace("JIRA.Components.IssueViewer.Collections.Panels",null,require("jira/components/issueviewer/entities/panels")),AJS.namespace("JIRA.Components.IssueViewer.Models.PanelsGroup",null,require("jira/components/issueviewer/entities/panelsgroup")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.AsyncData",null,require("jira/components/issueviewer/legacy/asyncdata")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueEventBus",null,require("jira/components/issueviewer/legacy/issueeventbus")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueFieldUtil",null,require("jira/components/issueviewer/legacy/issuefieldutil")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.ViewIssueData",null,require("jira/components/issueviewer/legacy/viewissuedata")),AJS.namespace("JIRA.Components.IssueViewer.Services.DarkFeatures",null,require("jira/components/issueviewer/services/darkfeatures")),AJS.namespace("JIRA.Components.IssueViewer.Services.IssueLoader",null,require("jira/components/issueviewer/services/issueloader")),AJS.namespace("JIRA.Components.IssueViewer.Services.Metadata",null,require("jira/components/issueviewer/services/metadataservice")),AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorGeneric",null,require("jira/components/issueviewer/views/errorgeneric")),AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorNotFound",null,require("jira/components/issueviewer/views/errornotfound")),AJS.namespace("JIRA.Components.IssueViewer.Views.Error",null,require("jira/components/issueviewer/views/error")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueBody",null,require("jira/components/issueviewer/views/issuebody")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueHeader",null,require("jira/components/issueviewer/views/issueheader")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueOpsbar",null,require("jira/components/issueviewer/views/issueopsbar")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanels",null,require("jira/components/issueviewer/views/issuepanels")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanel",null,require("jira/components/issueviewer/views/issuepanel")),AJS.namespace("JIRA.Components.IssueViewer.Views.Issue",null,require("jira/components/issueviewer/views/issue")),AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/IssueEditor.js' */
define("jira/components/issueeditor",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueeditor/controllers/editissue"),t=e("jira/util/events"),r=e("jira/components/issueeditor/eventtypes"),o=e("jira/components/issueeditor/controllers/fields"),n=e("jira/components/issueeditor/services/fieldsloader"),d=e("jira/components/issueeditor/services/issuesaver"),l=e("jira/components/issueviewer"),u=e("jira/util/data/meta"),a=e("jira/components/issueeditor/views/modalfield"),h=e("jira/components/issueeditor/views/saveerror"),v=e("jira/components/issueeditor/services/saveinprogressmanager"),c=window.JIRA,f=e("jira/components/issueeditor/services/unloadinterceptor"),I=window.AJS.contextPath(),g=function(){c.trace.apply(c,arguments)};return l.extend({namedEvents:["loadComplete","loadError","returnToSearch","saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","replacedFocusedPanel","fieldsLoaded"],initialize:function(e){l.prototype.initialize.call(this,e),this._buildFieldsLoader(),this._buildIssueSaver(),this._buildEditIssueController(),this._buildFieldsController(),this._handleUnload(),this.listenAndRethrow(this.eventBus,"fieldSubmitted")},_buildFieldsLoader:function(){this.fieldsLoader=new n({contextPath:I}),this.listenTo(this.fieldsLoader,"fieldsLoaded",function(e){this.viewIssueData.updateIssue(e.issueKey,e),e.issueId=Number(e.issueId);var s=e.fields&&e.fields.length;s?this.editIssueController.update(e):this.editIssueController.reset(),this.trigger("fieldsLoaded"),g("jira.issue.fields.loaded",{id:e.issueId})}),this.listenTo(this.fieldsLoader,"fieldsError",function(e){this.fieldsController.showError(e.errorCollection,e.isTimeout),g("jira.issue.fields.loaded",{id:e.issueId})})},_buildIssueSaver:function(){this.saveInProgressManager=new v,this.issueSaver=new d({saveInProgressManager:this.saveInProgressManager,model:this.model}),this.listenTo(this.issueSaver,"error",function(e){var s=e.issueId,i=e.attemptedSavedIds,t=e.response,r=e.duration;if(!this.model.isCurrentIssue(s))return void this._showSaveError({issueId:s,issueKey:e.issueKey,response:t});this.eventBus.triggerSaveError(s,i,t);var o=t&&t.fields&&t.fields.length;!o&&t&&(this.editIssueController.reset(),this.model.update(t,{fieldsSaved:[],fieldsInProgress:[]})),this.trigger("saveError",{issueId:s,duration:r,deferred:!1}),g("jira.issue.refreshed",{id:s})}),this.listenTo(this.issueSaver,"saveStarted",function(e,s){this.eventBus.triggerSavingStarted(s)}),this.listenTo(this.issueSaver,"save",function(e){var s=e.issueId,i=e.issueKey,t=e.savedFieldIds,r=e.savedFieldTypes,o=e.response,n=e.shouldSkipSaveIssueSuccessHandler,d=e.duration;if(this.model.isCurrentIssue(s)&&!n){this.eventBus.triggerSaveSuccess(s,i,t,o),this.viewIssueData.set(i,o),this.model.update(o,{fieldsSaved:t,fieldsInProgress:this.editIssueController.getEditsInProgress()}),g("jira.psycho.issue.refreshed",{id:s});var l=o.fields&&o.fields.length;l&&this.editIssueController.update({fields:o.fields,issueId:s,issueKey:i},{editable:!0,editIssueController:this.editIssueController,issueModel:this.model,issueId:s,fieldsSaved:t,initialize:!1,fieldsInProgress:this.editIssueController.getEditsInProgress()}),g("jira.issue.refreshed",{id:s})}this.trigger("saveSuccess",{issueId:s,issueKey:i,savedFieldIds:t,savedFieldTypes:r,duration:d})})},_buildEditIssueController:function(){this.editIssueController=new i({issueEventBus:this.eventBus}),this.listenTo(this.editIssueController,"save",function(e,s,i,t,r,o){this.issueSaver.setSkipSaveIssueSuccessHandler(!1),this.issueSaver.save(e,s,i,t,r,o)}),this.listenAndRethrow(this.editIssueController,"editField"),this.listenAndRethrow(this.editIssueController,"editFieldCancel")},_buildFieldsController:function(){this.fieldsController=new o},_onIssueLoaded:function(e,s,i){e.issue.isEditable&&(s.error||s.fromCache||this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:i.issueEntity}));var t=!s.mergeIntoCurrent&&i.initialize!==!1;s.isUpdate&&!t||this.editIssueController.reset(),l.prototype._onIssueLoaded.call(this,e,s,i),e.fields&&(this.editIssueController.update({fields:e.fields,issueId:e.issue.id,issueKey:e.issue.key}),g("jira.issue.fields.loaded",{id:e.issue.id}))},_handleUnload:function(){var e=function(){var e;return this.editIssueController.getDirtyEditsInProgress().length>0&&(e="You are still editing this page. Are you sure you want to leave?"),e}.bind(this);this.unloadInterceptor=new f,this.unloadInterceptor.addAfterEvent(e),this.on("destroy",function(){this.unloadInterceptor.removeAfterEvent(e)})},_updateModel:function(e,i){var t=e.fields&&e.fields.length;t&&this.editIssueController.update(e.fields,{fieldsInProgress:this.editIssueController.getEditsInProgress(),changed:i.changed}),i=s.extend({},i,{fieldsInProgress:this.editIssueController.getEditsInProgress()}),l.prototype._updateModel.call(this,e,i)},_loadIssueFromDom:function(e){u.get("server-view-issue-is-editable")&&(this.editIssueController.setIssueId(e.id),this.editIssueController.setIssueKey(e.key),this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:e}),u.set("server-view-issue-is-editable",null)),l.prototype._loadIssueFromDom.call(this,e)},editField:function(e){if(e.isEditable()){var s=this.model.getEntity(),i=function(){e.matchesFieldSelector()?e.edit():new a({issueEventBus:this.eventBus,model:e,issue:s}).show()}.bind(this);e.getSaving()?t.one(r.ISSUE_REFRESHED,function(){i()}):i()}},abortPending:function(){this.fieldsLoader.cancel(),l.prototype.abortPending.call(this)},beforeHide:function(){this.issueSaver.setSkipSaveIssueSuccessHandler(!0),l.prototype.beforeHide.call(this)},setContainer:function(e){this.editIssueController.setIssueViewContext(e),l.prototype.setContainer.call(this,e)},dismiss:function(){this.editIssueController.reset(),l.prototype.dismiss.call(this)},getFields:function(){return this.editIssueController.getFields()},hasSavesInProgress:function(){return this.saveInProgressManager.hasSavesInProgress()},_showSaveError:function(e){var i,t;i=new h(e).render(),t=s.partial(this.stopListening,i),this.listenTo(i,{close:t,issueLinkClick:function(e){var s={isPrevented:!1,preventDefault:function(){this.isPrevented=!0},isDefaultPrevented:function(){return this.isPrevented===!0},issueData:e};this.trigger("linkInErrorMessage",s),s.isDefaultPrevented()||this.loadIssue(e)}})}})});
//# sourceMappingURL=IssueEditor-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/IssueEditorAppModule.js' */
define("jira/components/issueeditor/appmodule",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),t=e("jira/components/issueeditor"),n=e("jira/components/issueviewer/appmodule");return n.extend({name:"issueEditor",generateMasterRequest:!0,create:function(e){return e=r.defaults({},e,{showReturnToSearchOnError:function(){return!1}}),new t({showReturnToSearchOnError:e.showReturnToSearchOnError,isGlobalIssueNavigator:e.isGlobalIssueNavigator})},commands:function(e){var t=n.prototype.commands.call(this,e);return r.extend(t,{editField:!0})},requests:function(e){var t=n.prototype.requests.call(this,e);return r.extend(t,{fields:function(){return e.getFields()},hasSavesInProgress:!0})},events:function(e){var r=n.prototype.events.call(this,e);return r.concat(["saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","fieldsLoaded"])}})});
//# sourceMappingURL=IssueEditorAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/NoInlineAppModule.js' */
define("jira/components/issueeditor/noinlineappmodule",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),r=e("jira/components/issueviewer/appmodule");return r.extend({name:"issueEditor",requests:function(e){var s=r.prototype.requests.call(this,e);return n.extend(s,{fields:function(){return[]},hasSavesInProgress:function(){return!1}})}})});
//# sourceMappingURL=NoInlineAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/templates/Fields.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.IssueEditor&&(JIRA.Templates.IssueEditor={}),"undefined"==typeof JIRA.Templates.IssueEditor.Fields&&(JIRA.Templates.IssueEditor.Fields={}),JIRA.Templates.IssueEditor.Fields.saveErrorMessage=function(e,s){var t="",o='<a class="issue" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issueKey)+'">'+soy.$$escapeHtml(e.issueKey)+"</a>";if(t+=soy.$$filterNoAutoescape(AJS.format("Saving of \u003cstrong\u003e{0}\u003c/strong\u003e failed!",o)),e.errors.length>0){t+="<ul>";for(var a=e.errors,i=a.length,l=0;l<i;l++){var n=a[l];t+="<li>"+soy.$$escapeHtml(n)+"</li>"}t+="</ul>"}return t},JIRA.Templates.IssueEditor.Fields.field=function(e,s){return'<form id="'+soy.$$escapeHtml(e.issue.id)+'-form" class="ajs-dirty-warning-exempt aui" action= "#"><div class="inline-edit-fields">'+soy.$$filterNoAutoescape(e.issue.editHtml)+'</div><span class="overlay-icon throbber" /><div class="save-options"><button type="submit" class="aui-button submit" accessKey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.accessKey))+'"><span class="aui-icon aui-icon-small aui-iconfont-success">'+soy.$$escapeHtml("Save")+'</span></button><button type="cancel" class="aui-button cancel" accessKey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.accessKey))+'"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Cancel")+"</span></button></div></form>"},JIRA.Templates.IssueEditor.Fields.modalField=function(e,s){return'<div class="aui-dialog-content"><h2 class="dialog-title">'+soy.$$escapeHtml(AJS.format("Edit {0} for {1}",e.field.label,e.issue.key))+'</h2><form action="" class="aui" method="post"><div class="form-body">'+soy.$$filterNoAutoescape(e.field.editHtml)+'</div><div class="buttons-container form-footer"><div class="buttons"><input class="button" type="submit" value="'+soy.$$escapeHtml("Submit")+'"/><a class="cancel" href="#">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form></div>"},JIRA.Templates.IssueEditor.Fields.modalFieldGeneralErrors=function(e,s){var t='<div class="error">';if(1==e.messages.length)t+=soy.$$escapeHtml(e.messages[0]);else if(e.messages.length>0){t+="<ul>";for(var o=e.messages,a=o.length,i=0;i<a;i++){var l=o[i];t+="<li>"+soy.$$escapeHtml(l)+"</li>"}t+="</ul>"}return t+="</div>"},JIRA.Templates.IssueEditor.Fields.errorsLoading=function(e,s){var t=""+(e.isTimeout?soy.$$escapeHtml("The Jira server could not be contacted. This may be a temporary glitch or the server may be down."):soy.$$escapeHtml("There were errors loading the issue."));if(e.errorMessages){t+="<ul>";for(var o=e.errorMessages,a=o.length,i=0;i<a;i++){var l=o[i];t+="<li>"+soy.$$escapeHtml(l)+"</li>"}t+="</ul>"}return t};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/templates/amd-wrapper.js' */
define("jira/components/issueeditor/templates",function(){"use strict";return JIRA.Templates.IssueEditor.Fields}),AJS.namespace("JIRA.Templates.IssueEditor.Fields",null,require("jira/components/issueeditor/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/entities/FieldModel.js' */
define("jira/components/issueeditor/entities/field",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),e=t("jira/components/libs/brace"),s=t("jira/util/events"),r=t("jira/components/issueviewer/legacy/issuefieldutil"),n=t("jquery"),a=t("jira/skate"),h=t("jira/components/issueeditor/templates"),o=t("jira/components/issueeditor/eventtypes");return e.Model.extend({namedEvents:["editingStarted","focusRequested","editingCancelled","save","saveError","savingStarted","saveComplete","saveSuccess","updateRequired","validationError","modelDestroyed"],namedAttributes:["id","initParams","params","editHtml","viewHtml","required","fieldType","editing","saving","error","label","contentId"],initialize:function(){if(this.collection){var t=this;this.collection.on("reset",function(){t.triggerModelDestroyed()})}this.on("change:viewHtml",function(){var t=this.previous("viewHtml");t&&n.cleanData(t)}),this.onModelDestroyed(function(){var t=this.getViewHtml();t&&n.cleanData(t)})},blurEdit:function(){this.getEditing()&&(this.isDirty()||this.hasValidationError()?this.save():this.cancelEdit())},setValidationError:function(t,i,e){this.setSaving(!1),this.setError(i),this.edit({ignoreBlur:!0}),this.triggerSaveError(),this.triggerValidationError(t,e)},handleSaveError:function(){this.setSaving(!1),this.triggerSaveError()},cancelEdit:function(t){if(!this.cancelLocked){var i=new n.Event(o.BEFORE_INLINE_EDIT_CANCEL);s.trigger(i,[this.getId(),this.getFieldType(),t]),i.isDefaultPrevented()||(this.cancelLocked=!0,(this.getEditing()||this.getSaving())&&(this.setEditing(!1),this.setSaving(!1),this.unset("params"),this.unset("initParams"),this.triggerEditingCancelled(),this.unset("viewHtml")),delete this.cancelLocked)}},edit:function(t){this.getEditing()?t&&t.ignoreBlur||this.triggerFocusRequested(this,t):(this.setEditing(!0),this.triggerEditingStarted(this,t))},getCurrentParams:function(){this.triggerUpdateRequired();var t={};if(this.getParams())t=this.getParams();else if(this.getInitParams())t=this.getInitParams();else{var e=n("<div />").html(this.getEditHtml());this.setInitParams(this._serializeObject(e)),t=this.getInitParams()}var s={};return i.each(t,function(t,i){s[i]=t}),s},isEditable:function(){return!!this.getEditHtml()&&0!==n(this.getEditHtml()).find("textarea, :text,:radio,:checkbox, select").length},hasValidationError:function(){return!!this.getError()},switchElToEdit:function(t){this.getViewHtml()||this.setViewHtml(t.contents()),t.contents().detach(),t.html(h.field({issue:this.toJSON(),accessKey:r.getAccessKeyModifier()})),t.each(function(){a.init(this)}),this.getInitParams()||this.setInitParams(this._serializeObject(t)),this.setEditing(!0)},update:function(t){this.getEditing()&&this.setParams(this._serializeObject(t))},handleSaveSuccess:function(){this.setSaving(!1),this.setEditing(!1),this.unset("viewHtml"),this.unset("initParams"),this.setError(null),this.triggerSaveSuccess()},handleSaveStarted:function(){this.setSaving(!0),this.triggerSavingStarted()},save:function(){this.getSaving()||(this.triggerUpdateRequired(),this.triggerSave(this))},isDirty:function(){return this.triggerUpdateRequired(),this._isDirty(this.getCurrentParams())},_isDirty:function(t){return JSON.stringify(t)!==JSON.stringify(this.getInitParams())},matchesFieldSelector:function(){return r.matchesFieldSelector(this.id)},_serializeObject:function(t){var i={},e=n(t).find(":input").serializeArray();return n.each(e,function(){i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""}),i}},{IS_EDITABLE:function(t){return t.isEditable()}})});
//# sourceMappingURL=FieldModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/entities/FieldCollection.js' */
define("jira/components/issueeditor/entities/fields",["require"],function(i){"use strict";var t=i("jira/components/libs/underscore"),e=i("jira/components/libs/brace"),n=i("jira/components/issueeditor/entities/field");return e.Collection.extend({model:n,initialize:function(){this.on("editingStarted",this._handleEditingStarted,this)},_handleEditingStarted:function(i,t){t=t||{},t.ignoreBlur||this.each(function(t){i!==t&&t.getEditing()&&t.blurEdit()})},update:function(i,e){var n=this;if(e&&e.changed){var d=e.changed,r=d.updated?d.updated.fields:[],a=d.added?d.added.fields:[];t.each(i,function(i){if(t.contains(r,i.id)){var e=n.get(i.id);e?(e.hasValidationError()&&delete i.editHtml,e.set(i,{silent:!0}),n.trigger("updated",e)):n.add(i)}else t.contains(a,i.id)&&n.add(i)})}else t.each(i,function(i){var t=n.get(i.id);t?(t.hasValidationError()&&delete i.editHtml,t.set(i,{silent:!0}),n.trigger("updated",t)):n.add(i)})},cancelEdit:function(){this.each(function(i){i.cancelEdit()})},isDirty:function(){return this.any(function(i){return i.isDirty()})},getDirtyFields:function(){return this.filter(function(i){return i.isDirty()})}})});
//# sourceMappingURL=FieldCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/FieldView.js' */
define("jira/components/issueeditor/views/field",["require"],function(e){"use strict";var t=e("jira/components/issueeditor/cancelreasons"),i=e("jira/util/events"),s=e("jira/components/issueviewer/legacy/issuefieldutil"),n=e("jquery"),l=e("jira/components/libs/marionette-1.4.1/itemview"),o=e("jira/util/events/reasons"),d=e("jira/components/issueeditor/templates"),a=e("jira/components/issueeditor/eventtypes"),r=e("jira/components/issueeditor/analytics/viewissue");return l.extend({events:{"click .cancel":"onClickCancel",keyup:"onKeyCancel","click .submit":"onSubmit",click:"onEdit",mousedown:"saveSelectedText","submit form":"onSubmit",'keydown select[multiple="multiple"]':"_enterToSubmitMultiSelect","keypress select":"_enterToSubmitSelect","keypress textarea.no-line-break":"_enterToSubmitSelect","beforeBlurInput *":"_preventBlurByEsc"},initialize:function(e){this.model.on("validationError",this.handleValidationError,this),this.model.on("editingStarted",this.switchToEdit,this),this.model.on("focusRequested",this.focus,this),this.model.on("editingCancelled",this.switchToRead,this),this.model.on("saveError",this.handleSaveError,this),this.model.on("updateRequired",this.updateModel,this),this.model.on("savingStarted",this.handleSavingStarted,this),this.model.on("modelDestroyed",this.destroy,this),this.decorate(),this.issueEventBus=e.issueEventBus,this.issueEventBus.on("panelRendered",this.handlePanelRendered,this),this.model.setFieldType(this.$el.data("fieldtypecompletekey")),this._editDelay=0;var t=this.$el.children("shorten");t.length&&t.shorten();var s=this;i.bind(a.INLINE_EDIT_BLURRED,function(e,t){t===s.model.getId()&&s._onPossibleBlur()}),i.bind(a.INLINE_EDIT_REQUESTED,function(e,t){t!==s.model.getId()&&0!==s._editDelay&&(clearTimeout(s._editDelay),s._editDelay=0)})},destroy:function(){this.issueEventBus.off("panelRendered",this.handlePanelRendered)},decorate:function(){this.model.isEditable()&&!this.model.getEditing()&&(this.$el.addClass("editable-field inactive"),this.$el.append('<span class="overlay-icon aui-icon aui-icon-small aui-iconfont-edit" />'),this._addToolTip())},getEditElements:function(){return this.$el.find(".inline-edit-fields")},_addToolTip:function(){this.$el.attr("title","Click to edit"),n("a:not([title]):not([original-title])",this.$el).attr("title","Follow link")},_removeToolTip:function(){this.$el.removeAttr("title")},_stealAccessKeys:function(){n("[accessKey='"+"s"+"']").attr("accessKey","_s"),n("[accessKey='"+"`"+"']").attr("accessKey","_x")},_returnAccessKeys:function(){n("[accessKey=_s]").attr("accessKey","s"),n("[accessKey=_x]").attr("accessKey","`")},_handleEditingStarted:function(e){var t=this.$el.find(".field-tools");i.trigger(a.NEW_CONTENT_ADDED,[this.$el,o.inlineEditStarted]),i.trigger(a.INLINE_EDIT_STARTED,[this.model.getId(),this.model.getFieldType(),this.getEditElements(),this.$el]),this.$el.find(".textarea").css("height",Math.max(this._originalHeight,60)).expandOnInput(window.innerHeight-n("#stalker").height()-100),this.$el.find("textarea.initial-height").css("height",this._originalHeight).expandOnInput(window.innerHeight-n("#stalker").height()-100),e&&this.$el.find(":input:visible:first").focus(),this.$el.find(".error").size()||this.$el.find("select.aui-ss-select").each(function(){var e=n(this);e.data("static-suggestions")&&e.trigger("showSuggestions")}),this.$el.find(".save-options").attr("tabindex",1).prepend(t)},handleValidationError:function(e,t){this.$el.html(d.field({issue:{id:this.model.id,editHtml:e},accessKey:s.getAccessKeyModifier()})),this.$el.find(".error").addClass("inline-edit-error").attr("data-field",this.model.id),this._handleEditingStarted(t)},handlePanelRendered:function(e,t){var i=n(s.getFieldSelector(this.model.id),t);1===i.length&&(this.$el=i,this.el=this.$el[0],this.decorate(),this.delegateEvents())},handleSaveError:function(){this.$el.find(":input").removeAttr("disabled").trigger("enable"),this.$el.removeClass("saving saving-"+this.model.id)},handleSavingStarted:function(){this.$el.find(":input").attr("disabled","disabled").trigger("disable"),this.$el.find(".overlay-icon.throbber").spin(),this.$el.addClass("saving saving-"+this.model.id)},updateModel:function(){this.model.update(this.$el)},reveal:function(){var e=40;this.$el.scrollIntoView({direction:"y",marginBottom:e,marginTop:n("#stalker").outerHeight(!0)+e}),this.$el.trigger("reveal")},focus:function(){if(this.reveal(),this.$el.find(":input").removeAttr("disabled"),0===n(".aui-blanket[aria-hidden='false']").length){var e=this.$el.find(":input:visible:first");e.focus(),this.$el.hasClass("field-ignore-highlight")||e.select()}},switchToEdit:function(){this.trigger("editField",{fieldId:this.model.getId()}),this._stealAccessKeys(),this._removeToolTip(),this.$el.removeClass("inactive saving").addClass("active"),this._originalHeight=this.$el.height(),this.model.switchElToEdit(this.$el),this._handleEditingStarted(),this.focus()},switchToRead:function(){this.trigger("editFieldCancel",{fieldId:this.model.getId()}),this._addToolTip(),this.$el.addClass("inactive").removeClass("active"),this.$el.html(this.model.getViewHtml()),this.$el.closest("form").unbind("submit",this.onSubmit),this._returnAccessKeys()},onKeyCancel:function(e){27===e.keyCode&&(this.model.cancelEdit(t.escPressed),e.preventDefault())},onClickCancel:function(e){this.model.cancelEdit(),e.preventDefault(),e.stopPropagation()},onSubmit:function(e){var t=new n.Event("before-submit");this.$el.find("form").trigger(t),t.isDefaultPrevented()||(this.$el.find(":focus").blur(),this.issueEventBus.triggerFieldSubmitted(),this.model.save(),this._returnAccessKeys()),e.preventDefault()},onEdit:function(e){var t=n(e.target).is(".overlay-icon.aui-iconfont-edit"),s=0===n(e.target).closest("a, .uneditable").length&&this.$el.hasClass("inactive"),l=""===this._getCurrentlySelectedText()&&!this._previouslySelectedText,o=s&&(t||l),d=this.model.getId(),c=this.model.getFieldType();if(0!==this._editDelay)r.triggerEditableFieldDoubleClick(d,c),clearTimeout(this._editDelay),this._editDelay=0;else if(o){i.trigger(a.INLINE_EDIT_REQUESTED,[d]);var h=this;t?(r.triggerEditableFieldClickPencilIcon(d,c),n(document).one("click",function(e){e.isDefaultPrevented()||h.model.edit()})):this._editDelay=setTimeout(function(){!e.isDefaultPrevented()&&h.$el.hasClass("inactive")&&""===h._getCurrentlySelectedText()&&(r.triggerEditableFieldSingleClick(d,c),h.model.edit()),h._editDelay=0},250)}},_onPossibleBlur:function(){this.model.getSaving()||n(".aui-blanket[aria-hidden='false']").length>0||this.model.blurEdit()},_preventBlurByEsc:function(e){e.preventDefault()},_getCurrentlySelectedText:function(){return n(document.activeElement).is(":input")?"":document.selection&&document.selection.createRange?document.selection.createRange().text||"":window.getSelection?window.getSelection().toString():""},_enterToSubmitSelect:function(e){e.isDefaultPrevented()||13===e.which&&(e.preventDefault(),n(e.target).closest("form").submit())},_enterToSubmitMultiSelect:function(e){e.isDefaultPrevented()||13===e.which&&n(e.target).blur()},saveSelectedText:function(){this._previouslySelectedText=this._getCurrentlySelectedText()}})});
//# sourceMappingURL=FieldView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/ModalFieldView.js' */
define("jira/components/issueeditor/views/modalfield",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),o=e("jira/util/events"),t=e("jira/dialog/form-dialog"),s=e("jira/components/libs/marionette-1.4.1/itemview"),r=e("jira/components/issueeditor/templates");return s.extend({errorsTemplate:r.modalFieldGeneralErrors,template:r.modalField,initialize:function(e){i.bindAll(this,"_onHide","_onSubmit","_remove","_showGeneralError","_showValidationError","_updateModel"),o.bind("Dialog.hide",this._onHide),this.issueEventBus=e.issueEventBus,this.issueEventBus.on("saveError",this._showGeneralError),this.model.onSaveSuccess(this._remove),this.model.onUpdateRequired(this._updateModel),this.model.onValidationError(this._showValidationError)},_enable:function(){var e=this._getDialog();e.hideFooterLoadingIndicator();var i=e.$popup;i.find(":input").removeAttr("disabled").trigger("enable"),i.find(":input:first").focus().select(),i.find(":submit").removeAttr("disabled")},_getDialog:function(){return this._dialog||(this._dialog=new t({id:"modal-field-view",submitHandler:this._onSubmit,content:function(e){e(this.template({field:this.model.toJSON(),issue:this.options.issue}))}.bind(this)}),this._dialog.get$popup().data("field-id",this.model.getId())),this._dialog},_onHide:function(e,i){i===this._getDialog().get$popup()&&this._remove()},_onSubmit:function(e,i){e.preventDefault(),this.model.save(),i();var o=this._getDialog();o.showFooterLoadingIndicator(),o.$popup.find(":input").attr("disabled","disabled").trigger("disable")},close:function(){this._remove()},_remove:function(){var e=this._getDialog();e.get$popup().is(":visible")&&e.hide(),e.destroy(),this.model.cancelEdit(),o.unbind("Dialog.hide",this._onHide),this.issueEventBus.off("saveError",this._showGeneralError),this.model.off("saveSuccess",this._remove),this.model.off("updateRequired",this._updateModel),this.model.off("validationError",this._showValidationError)},show:function(){this.model.edit(),this._getDialog().show()},_showGeneralError:function(e,o,t){this._enable();var s=this._getDialog().$popup,r=t&&t.errorCollection;if(r){var n=!i.isEmpty(r.errors),d=!i.isEmpty(r.errorMessages);!n&&d&&s.find(".form-body").append(this.errorsTemplate({messages:r.errorMessages}))}},_showValidationError:function(e){this._enable(),this._getDialog().$popup.find(".form-body").html(e)},_updateModel:function(){this.model.update(this._getDialog().$popup)}})});
//# sourceMappingURL=ModalFieldView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/LoadingError.js' */
define("jira/components/issueeditor/views/loadingerror",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/itemview"),s=e("jira/message"),t=e("jira/components/issueeditor/templates");return i.extend({template:t.errorsLoading,initialize:function(e,i){this.errorMessages=e,this.isTimeout=i},serializeData:function(){return{errorMessages:this.errorMessages,isTimeout:this.isTimeout}},onRender:function(){this.setElement(s.showErrorMsg(this.$el.html(),{closeable:!0,timeout:0}))}})});
//# sourceMappingURL=LoadingError-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/SaveError.js' */
define("jira/components/issueeditor/views/saveerror",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/libs/marionette-1.4.1/itemview"),r=e("jira/message"),t=e("jira/components/issueeditor/templates");return i.extend({events:{"simpleClick .issue":"onIssueLinkClick"},template:t.saveErrorMessage,getErrorMessages:function(){var e,i=[];return e=this.options.response.errorCollection,e&&(i=e.errorMessages.concat(s.values(e.errors))),i},onIssueLinkClick:function(e){var s;s={id:this.options.issueId,key:this.options.issueKey},e.preventDefault(),this.trigger("issueLinkClick",s),this.close()},onRender:function(){this.setElement(r.showErrorMsg(this.$el.html(),{closeable:!0,timeout:0}))},serializeData:function(){return{errors:this.getErrorMessages(),issueKey:this.options.issueKey}}})});
//# sourceMappingURL=SaveError-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/controllers/EditIssueController.js' */
define("jira/components/issueeditor/controllers/editissue",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/components/libs/brace"),s=e("jira/components/issueeditor/entities/fields"),n=e("jira/components/issueeditor/views/field"),r=e("jira/components/issueviewer/legacy/issuefieldutil"),d=e("jquery"),a=e("jira/message"),l=e("jira/components/issueeditor/templates");return t.Model.extend({namedAttributes:["issueId","issueKey","issueViewContext","fields","issueEventBus"],namedEvents:["save","editField","editFieldCancel"],initialize:function(){i.bindAll(this,"_handleSaveError","_handleSaveSuccess","_handleSavingStarted","cancelUneditedFields","createFieldView","handleFieldUpdate","save"),this.set({fields:new s},{silent:!0}),this.getFields().bind("add",this.createFieldView).bind("updated",this.handleFieldUpdate).bind("save",this.save),this.getIssueEventBus().onSavingStarted(this._handleSavingStarted),this.getIssueEventBus().onSaveSuccess(this._handleSaveSuccess),this.getIssueEventBus().onSaveError(this._handleSaveError),this.getIssueEventBus().onSave(this.save),this.getIssueEventBus().onSave(this.cancelUneditedFields)},_saveById:function(e){var i=this.getFields().get(e);i&&i.blurEdit()},_handleSaveError:function(e,t,s){var n=this;s?this.applyErrors(s):i.each(t,function(e){var i=n.getFields().get(e);i&&i.handleSaveError()})},_handleSavingStarted:function(e){this.getFields().each(function(t){i.include(e,t.id)&&t.handleSaveStarted()})},handleFieldUpdate:function(e){var i=d(r.getFieldSelector(e.id));i.hasClass("editable-field")||this.createFieldView(e)},applyErrors:function(e,t){var s=e.errorCollection;if(s&&s.errors&&this.getFields().each(function(n){if(s.errors[n.id]){var r=i.find(e.fields,function(e){return e.id===n.id});r&&(n.setValidationError(r.editHtml,s.errors[n.id],t),t=!1)}}),s.errorMessages&&s.errorMessages.length){var n=l.saveErrorMessage({errors:s.errorMessages,issueKey:this.getIssueKey()});a.showErrorMsg(n,{closeable:!0})}},reset:function(){this.getFields().reset()},cancelEdit:function(){this.getFields().each(function(e){e.cancelEdit()})},_handleSaveSuccess:function(e,t,s){var n=this.getFields().filter(function(e){return i.indexOf(s,e.id)>=0});i.each(n,function(e){e.handleSaveSuccess()})},getDirtyEditsInProgress:function(){return i.pluck(this.getFields().filter(function(e){return e.getEditing()&&e.isDirty()}),"id")},getEditsInProgress:function(){return i.pluck(this.getFields().filter(function(e){return e.getEditing()}),"id")},save:function(e,t){var s={},n=[],r=[],d=[e];if(e){if(!e.getEditing()||e.getSaving())return}else d=this.getFields().filter(function(e){return!e.getSaving()&&e.getEditing()&&e.isDirty()});i.each(d,function(e){n.push(e.getId()),r.push(e.getFieldType()||""),i.extend(s,e.getCurrentParams())}),n.length>0&&this.triggerSave(this.getIssueId(),this.getIssueKey(),n,s,t,r)},cancelUneditedFields:function(){this.getFields().each(function(e){!e.getEditing()||e.isDirty()||e.hasValidationError()||e.cancelEdit()})},update:function(e,t){e.fields&&(t&&t.fieldsInProgress&&i.each(e.fields,function(e){i.contains(t.fieldsInProgress,e.id)&&(e.editing=!0)}),this.getFields().update(e.fields,t)),e.issueId&&this.setIssueId(e.issueId),e.issueKey&&this.setIssueKey(e.issueKey)},createFieldView:function(e){var t=d(r.getFieldSelector(e.id),this.getIssueViewContext());if(1===t.length){var s=new n({model:e,el:t,issueEventBus:this.getIssueEventBus()}),a=function(t){var s={issueId:this.getIssueId(),issueKey:this.getIssueKey(),fieldId:e.getId(),fieldType:e.attributes.fieldType};return t=i.extend(s,t)}.bind(this);s.on("editField",function(e){this.trigger("editField",a(e))}.bind(this)),s.on("editFieldCancel",function(e){this.trigger("editFieldCancel",a(e))}.bind(this))}}})});
//# sourceMappingURL=EditIssueController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/controllers/FieldsController.js' */
define("jira/components/issueeditor/controllers/fields",["require"],function(e){"use strict";var i=e("jira/components/issueeditor/views/loadingerror"),t=e("jira/components/libs/marionette-1.4.1/controller");return t.extend({showError:function(e,t){(e||t)&&(this.close(),this.triggerMethod("before:render"),this.view=new i(e,t),this.view.render(),this.listenTo(this.view,"close",this.close),this.triggerMethod("render"))},close:function(){this.view&&(this.view.close(),this.stopListening(this.view),delete this.view)}})});
//# sourceMappingURL=FieldsController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/FieldsLoaderService.js' */
define("jira/components/issueeditor/services/fieldsloader",["require"],function(e){"use strict";var i=e("jira/components/issueviewer/legacy/issuefieldutil"),t=e("jquery"),r=e("jira/components/libs/marionette-1.4.1/controller");return r.extend({initialize:function(e){this.recurringPromise=(new t.RecurringPromise).sub(),this.recurringPromise.done(function(e){this.trigger("fieldsLoaded",e)}.bind(this)).fail(function(e){this.trigger("fieldsError",e)}.bind(this)),this.contextPath=e.contextPath},load:function(e){var i=this._buildUpdateTask(e);this.recurringPromise.add(i)},cancel:function(){this.recurringPromise.reset()},_getFieldsData:function(e,r){var s=t.ajax({url:this.contextPath+"/secure/AjaxIssueEditAction!default.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},data:{issueId:e}}),n=s.pipe(function(t){var s=i.transformFieldHtml(t);return{issueId:e,issueKey:r,fields:s.fields}},function(i){var t,r={};switch(i.status){case 400:t=!1;try{var s=JSON.parse(i.responseText)||{};r=s.errorCollection}catch(n){}break;case 401:t=!1,r=null;break;default:t=!0,r={}}return{issueId:e,fields:null,errorCollection:r,isTimeout:"timeout"===i.statusText,fatalError:t}});return n.abort=function(){s.abort.apply(s,arguments)},n},_buildUpdateTask:function(e){var i=e.viewIssueData,r=e.issueEntity,s=new t.Deferred;return i.setPending(r.id,this._getFieldsData(r.id,r.key),function(e){s.resolve(e)},function(e){e.fatalError?s.reject(e):s.resolve(e)}),s.promise()}})});
//# sourceMappingURL=FieldsLoaderService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/IssueSaverService.js' */
define("jira/components/issueeditor/services/issuesaver",["require"],function(e){"use strict";var s=e("jira/components/issueviewer/legacy/issuefieldutil"),i=e("jira/components/libs/marionette-1.4.1/controller");return i.extend({initialize:function(e){this.saveInProgressManager=e.saveInProgressManager,this.model=e.model,this._saveStarted=[],this.saveInProgressManager.onSavingStarted(function(e,s){this._saveStarted.push((new Date).getTime()),this.trigger("saveStarted",e,s)}.bind(this)),this.saveInProgressManager.onSaveSuccess(function(e,i,t,r,a){r&&r.fields&&s.transformFieldHtml(r),this.trigger("save",{issueId:e,issueKey:i,savedFieldIds:t,savedFieldTypes:a,response:r,shouldSkipSaveIssueSuccessHandler:this._shouldSkipSaveIssueSuccessHandler,duration:(new Date).getTime()-this._saveStarted.shift()})}.bind(this)),this.saveInProgressManager.onSaveError(function(e,i,t,r){r&&r.fields&&s.transformFieldHtml(r),this.trigger("error",{issueId:e,issueKey:i,attemptedSavedIds:t,response:r,duration:(new Date).getTime()-this._saveStarted.shift()})}.bind(this))},setSkipSaveIssueSuccessHandler:function(e){this._shouldSkipSaveIssueSuccessHandler=e},save:function(e,s,i,t,r,a){this.saveInProgressManager.saveIssue(e,s,i,t,r,a)}})});
//# sourceMappingURL=IssueSaverService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/SaveInProgressManager.js' */
define("jira/components/issueeditor/services/saveinprogressmanager",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),s=e("jira/components/libs/brace"),t=window.AJS.contextPath(),a=e("jira/util/events"),n=e("jira/components/issueviewer/legacy/issuefieldutil"),o=e("jira/dialog/form-dialog"),i=e("jquery"),g=e("jira/message"),c=e("jira/ajs/ajax/smart-ajax"),v=e("jira/components/issueeditor/eventtypes"),l=e("jira/components/utils/ajshelper");return s.Model.extend({namedAttributes:["savesInProgress"],namedEvents:["beforeSaving","savingStarted","saveSuccess","saveError"],initialize:function(){this.setSavesInProgress([])},saveIssue:function(e,s,o,i,g,l){this.triggerBeforeSaving();var d,u,S=this;u=r.extend(i,{issueId:e,atl_token:atl_token(),singleFieldEdit:!0,fieldsToForcePresent:o});var h=r.extend({type:"POST",url:t+"/secure/AjaxIssueAction.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},error:function(r){S._handleSaveError(e,s,o,r)},success:function(r,t,a,i){var g=i.data;"string"==typeof g?S._handleHtmlResponse(e,s,o,g,l):(n.transformFieldHtml(g),S.triggerSaveSuccess(e,s,o,g,l))},complete:function(){S.removeSaveInProgress(d),a.trigger(v.INLINE_EDIT_SAVE_COMPLETE)},data:u},g);d=c.makeRequest(h),this.addSaveInProgress(d),this.triggerSavingStarted(e,o,i)},hasSavesInProgress:function(){return this.getSavesInProgress().length>0},removeSaveInProgress:function(e){this.setSavesInProgress(r.without(this.getSavesInProgress(),e))},addSaveInProgress:function(e){var r=this.getSavesInProgress();r.push(e),this.setSavesInProgress(r)},_handleHtmlResponse:function(e,r,s,t,a){var g=this,c=i(l.extractBodyFromResponse(t)),v=c.find("#atl_token").val();v&&i("#atlassian-token").attr("content",v);var d=new o({offsetTarget:"body",content:c});this.triggerSaveError(e,r,s),d._handleServerSuccess=function(t){d.hide();var o=g._parseResponse(t);o&&(n.transformFieldHtml(o),g.triggerSaveSuccess(e,r,s,o,a))},d._handleServerError=function(t){d.hide();var a=g._parseResponse(t.responseText);a&&(n.transformFieldHtml(a),g.triggerSaveError(e,r,s,a))},d.show()},_handleSaveError:function(e,r,s,t){var a=this._parseResponse(t.responseText);a&&(n.transformFieldHtml(a),this.triggerSaveError(e,r,s,a))},_parseResponse:function(e){try{return JSON.parse(e)}catch(r){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";g.showErrorMsg(e,{closeable:!0})}})});
//# sourceMappingURL=SaveInProgressManager-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/UnloadInterceptor.js' */
define("jira/components/issueeditor/services/unloadinterceptor",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),t=e("jira/components/libs/marionette-1.4.1/controller");return t.extend({initialize:function(){this._afterEventHandlers=[],this.originalBeforeUnload=window.onbeforeunload,window.onbeforeunload=this.onBeforeUnload.bind(this)},addAfterEvent:function(e){this._afterEventHandlers.push(e)},removeAfterEvent:function(e){this._afterEventHandlers=n.without(this._afterEventHandlers,e)},onBeforeUnload:function(){var e,t=arguments;return n.isFunction(this.originalBeforeUnload)&&(e=this.originalBeforeUnload.apply(window,t)),e||(e=n.reduce(this._afterEventHandlers,function(e,n){return e?e:n.apply(window,t)},e)),e}})});
//# sourceMappingURL=UnloadInterceptor-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/InlineEditUtils.js' */
define("jira/components/issueeditor/inlineeditutils",["require"],function(e){"use strict";function s(e){var s=document.activeElement;return e.find(s).length>0||e.filter(s).length>0||r()}function r(){var e=i(".mediaPickerPopup");return e.length>0&&"block"===e.css("display")}var i=e("jquery"),t=e("jira/util/events"),l=e("jira/components/issueeditor/eventtypes"),u={};return u.BLUR_FOCUS_TIMEOUT=50,u.BlurTriggers={Default:function(e,r){function i(){s(r)||(n=!1,t.trigger(l.INLINE_EDIT_BLURRED,[e]))}r=r.nextAll(".save-options").andSelf();var a,g=":input, a[href], [tabindex]",n=s(r),o={focus:function(){n||(n=!0,t.trigger(l.INLINE_EDIT_FOCUSED,[e]))},blur:function(){a&&clearTimeout(a),a=setTimeout(i,u.BLUR_FOCUS_TIMEOUT)}};r.attr("tabindex",1).bind(o).delegate(g,o)}},u.BlurTriggerMapping={system:{summary:u.BlurTriggers.Default,priority:u.BlurTriggers.Default,issuetype:u.BlurTriggers.Default,components:u.BlurTriggers.Default,versions:u.BlurTriggers.Default,fixVersions:u.BlurTriggers.Default,assignee:u.BlurTriggers.Default,reporter:u.BlurTriggers.Default,environment:u.BlurTriggers.Default,description:u.BlurTriggers.Default,labels:u.BlurTriggers.Default,duedate:u.BlurTriggers.Default},custom:{"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datetime":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:float":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:labels":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:project":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:select":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:url":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:version":u.BlurTriggers.Default}},t.bind(l.INLINE_EDIT_STARTED,function(e,s,r,i){var t;if(r){if(t=u.BlurTriggerMapping.custom[r],!t){var l=r.replace(/.+:(.+)/,"$1");t=u.BlurTriggerMapping.custom[l]}}else t=u.BlurTriggerMapping.system[s];t&&t(s,i)}),u});
//# sourceMappingURL=InlineEditUtils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/eventtypes.js' */
define("jira/components/issueeditor/eventtypes",["require"],function(e){"use strict";var E=e("jira/components/issueviewer/eventtypes");return E.INLINE_EDIT_SAVE_COMPLETE="inlineEditSaveComplete",E.INLINE_EDIT_STARTED="inlineEditStarted",E.BEFORE_INLINE_EDIT_CANCEL="inlineEditCancelled",E.INLINE_EDIT_BLURRED="inlineEditBlurred",E.INLINE_EDIT_FOCUSED="inlineEditFocused",E.INLINE_EDIT_REQUESTED="inlineEditRequested",E.LOCK_PANEL_REFRESHING="lockPanelRefreshing",E.UNLOCK_PANEL_REFRESHING="unlockPanelRefreshing",E});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/cancelreasons.js' */
define("jira/components/issueeditor/cancelreasons",function(){"use strict";return{escPressed:"escPressed"}});
//# sourceMappingURL=cancelreasons-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/analytics/ViewIssue.js' */
define("jira/components/issueeditor/analytics/viewissue",["require"],function(e){"use strict";function i(e,i){l.trigger("analyticsEvent",{name:e,data:{fieldId:i}})}var l=e("jira/components/utils/ajshelper"),t=e("jira/components/analytics-tracker/tracker");return{triggerEditableFieldDoubleClick:function(e,l){i("jira.viewissue.editable-field.double-click",e),t.trackEvent("viewissue.editable-field","double-click",{fieldId:e,fieldType:l})},triggerEditableFieldSingleClick:function(e,l){i("jira.viewissue.editable-field.single-click",e),t.trackEvent("viewissue.editable-field","single-click",{fieldId:e,fieldType:l})},triggerEditableFieldClickPencilIcon:function(e,l){i("jira.viewissue.editable-field.click.pencil-icon",e),t.trackEvent("viewissue.editable-field","click.pencil-icon",{fieldId:e,fieldType:l})}}});
//# sourceMappingURL=ViewIssue-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueEditor",null,require("jira/components/issueeditor")),AJS.namespace("JIRA.Components.IssueEditor.AppModule",null,require("jira/components/issueeditor/appmodule")),AJS.namespace("JIRA.Components.IssueEditor.NoInlineAppModule",null,require("jira/components/issueeditor/noinlineappmodule")),AJS.namespace("JIRA.Components.IssueEditor.Controllers.EditIssue",null,require("jira/components/issueeditor/controllers/editissue")),AJS.namespace("JIRA.Components.IssueEditor.Controllers.Fields",null,require("jira/components/issueeditor/controllers/fields")),AJS.namespace("JIRA.Components.IssueEditor.Collections.Fields",null,require("jira/components/issueeditor/entities/fields")),AJS.namespace("JIRA.Components.IssueEditor.Models.Field",null,require("jira/components/issueeditor/entities/field")),AJS.namespace("JIRA.Components.IssueEditor.Services.FieldsLoader",null,require("jira/components/issueeditor/services/fieldsloader")),AJS.namespace("JIRA.Components.IssueEditor.Services.IssueSaver",null,require("jira/components/issueeditor/services/issuesaver")),AJS.namespace("JIRA.Components.IssueEditor.Services.SaveInProgressManager",null,require("jira/components/issueeditor/services/saveinprogressmanager")),AJS.namespace("JIRA.Components.IssueEditor.Services.UnloadInterceptor",null,require("jira/components/issueeditor/services/unloadinterceptor")),AJS.namespace("JIRA.Components.IssueEditor.Views.FieldView",null,require("jira/components/issueeditor/views/field")),AJS.namespace("JIRA.Components.IssueEditor.Views.LoadingError",null,require("jira/components/issueeditor/views/loadingerror")),AJS.namespace("JIRA.Components.IssueEditor.Views.ModalFieldView",null,require("jira/components/issueeditor/views/modalfield")),AJS.namespace("JIRA.Components.IssueEditor.Views.SaveError",null,require("jira/components/issueeditor/views/saveerror")),AJS.namespace("JIRA.Components.IssueEditor.InlineEditUtils",null,require("jira/components/issueeditor/inlineeditutils")),AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggers",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggers),AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggerMapping",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggerMapping),AJS.namespace("JIRA.Issues.CANCEL_REASON",null,require("jira/components/issueeditor/cancelreasons"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.plugin.system.comment-panel:expandablecomments', location = 'js/plugin/comment/init-comments-expanding.js' */
require(["jira/util/formatter","jira/util/logger","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/ajax/smart-ajax","jquery"],function(e,t,a,n,i,s,o){o(document).on("simpleClick",".collapsed-comments",function(r){function c(){d.find(".show-more-comments").text("Loading...")}function l(){var e=d.attr("href");s.makeRequest({url:e,method:"GET",headers:{"X-PJAX":!0}}).done(m)}function m(e){var s=o(e).find(".activity-comment").slice(v,v+j);u.replaceWith(s),t.trace("jira.issue.comment.expanded"),a.trigger(n.NEW_CONTENT_ADDED,[p,i.panelRefreshed]),f.find(".activity-comment:first").removeClass("collapsed").addClass("expanded")}r.preventDefault();var d=o(this),u=d.closest(".message-container"),f=d.closest(".issuePanelContainer"),p=d.closest(".module"),v=u.prevAll(".activity-comment").length,j=d.find(".show-more-comments").data("collapsed-count");c(),l()})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:soy-templates', location = 'viewissue/attachmentsblock.soy' */
// This file was automatically generated from attachmentsblock.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ViewIssue.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ViewIssue == 'undefined') { JIRA.Templates.ViewIssue = {}; }


JIRA.Templates.ViewIssue.renderAttachments = function(opt_data, opt_ignored) {
  return '' + ((opt_data.viewMode == 'list') ? JIRA.Templates.ViewIssue.fileAttachments(opt_data) : JIRA.Templates.ViewIssue.galleryAttachments(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachments.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachments';
}


JIRA.Templates.ViewIssue.fileAttachments = function(opt_data, opt_ignored) {
  var output = '<ol id="file_attachments" class="item-attachments" data-sort-key="' + soy.$$escapeHtml(opt_data.sortKey) + '" data-sort-order="' + soy.$$escapeHtml(opt_data.sortOrder) + '">';
  var fileAttachmentList14 = opt_data.attachments;
  var fileAttachmentListLen14 = fileAttachmentList14.length;
  for (var fileAttachmentIndex14 = 0; fileAttachmentIndex14 < fileAttachmentListLen14; fileAttachmentIndex14++) {
    var fileAttachmentData14 = fileAttachmentList14[fileAttachmentIndex14];
    output += JIRA.Templates.ViewIssue.fileAttachment(soy.$$augmentMap(opt_data, {fileAttachment: fileAttachmentData14}));
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.fileAttachments.soyTemplateName = 'JIRA.Templates.ViewIssue.fileAttachments';
}


JIRA.Templates.ViewIssue.galleryAttachments = function(opt_data, opt_ignored) {
  var output = '<ol id="attachment_thumbnails" class="item-attachments" data-sort-key="' + soy.$$escapeHtml(opt_data.sortKey) + '" data-sort-order="' + soy.$$escapeHtml(opt_data.sortOrder) + '">';
  var imageAttachmentList25 = opt_data.attachments;
  var imageAttachmentListLen25 = imageAttachmentList25.length;
  for (var imageAttachmentIndex25 = 0; imageAttachmentIndex25 < imageAttachmentListLen25; imageAttachmentIndex25++) {
    var imageAttachmentData25 = imageAttachmentList25[imageAttachmentIndex25];
    output += JIRA.Templates.ViewIssue.imageAttachment(soy.$$augmentMap(opt_data, {imageAttachment: imageAttachmentData25}));
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.galleryAttachments.soyTemplateName = 'JIRA.Templates.ViewIssue.galleryAttachments';
}


JIRA.Templates.ViewIssue.fileAttachment = function(opt_data, opt_ignored) {
  return '<li class="attachment-content js-file-attachment' + ((! opt_data.fileAttachment.latest) ? ' earlier-version' : '') + '" data-attachment-id="' + soy.$$escapeHtml(opt_data.fileAttachment.id) + '"' + JIRA.Templates.ViewIssue.renderAttachmentData({issue: opt_data.issue, attachment: opt_data.fileAttachment}) + '>' + ((opt_data.fileAttachment.expandable) ? JIRA.Templates.ViewIssue.zipFileAttachment(opt_data) : '<div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.fileAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.fileAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.fileAttachment}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(opt_data, {mimetype: opt_data.fileAttachment.mimeType})) + '</a></div><dl>' + JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(opt_data, {attachment: opt_data.fileAttachment})) + '</dl>') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.fileAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.fileAttachment';
}


JIRA.Templates.ViewIssue.zipFileAttachment = function(opt_data, opt_ignored) {
  return '<div class="twixi-block collapsed expander"><div class="twixi-wrap verbose"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-expanded"><span>' + soy.$$escapeHtml('Hide') + '</span></span></a><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.fileAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.fileAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.fileAttachment}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(opt_data, {mimetype: opt_data.fileAttachment.mimeType})) + '</a></div><dl>' + JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(opt_data, {attachment: opt_data.fileAttachment})) + '<dd class="zip-contents"><ol><li><div class="attachment-thumb"><img src="' + soy.$$escapeHtml(opt_data.baseurl) + '/images/icons/wait.gif" /></div>' + soy.$$escapeHtml('Extracting archive...') + '</li></ol></dd></dl></div><div class="twixi-wrap concise"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-collapsed"><span>' + soy.$$escapeHtml('Show') + '</span></span></a><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.fileAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.fileAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.fileAttachment}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(opt_data, {mimetype: opt_data.fileAttachment.mimeType})) + '</a></div><dl>' + JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(opt_data, {attachment: opt_data.fileAttachment})) + '</dl></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.zipFileAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.zipFileAttachment';
}


JIRA.Templates.ViewIssue.imageAttachment = function(opt_data, opt_ignored) {
  return '<li class="attachment-content js-file-attachment" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.imageAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.imageAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.renderAttachmentData({issue: opt_data.issue, attachment: opt_data.imageAttachment}) + '><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.imageAttachment.attachmentUrl) + '" title="' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + ' -' + ((opt_data.imageAttachment.latest) ? ' ' + soy.$$escapeHtml('Latest') : '') + ' ' + soy.$$escapeHtml(opt_data.imageAttachment.createdDateTime) + ((opt_data.imageAttachment.authorDisplayName) ? ' - ' + soy.$$escapeHtml(opt_data.imageAttachment.authorDisplayName) : '') + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.imageAttachment}) + '>' + ((opt_data.imageAttachment.thumbnailUrl != null) ? '<jira-attachment-thumbnail url="' + soy.$$escapeHtml('' + opt_data.imageAttachment.thumbnailUrl) + '" jira-url="' + soy.$$escapeHtml('' + opt_data.imageAttachment.jiraThumbnailUrl) + '" filename="' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + '"></jira-attachment-thumbnail>' : JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype: opt_data.imageAttachment.mimeType})) + '</a></div><dl ' + ((! opt_data.imageAttachment.latest) ? 'class="earlier-version"' : '') + '><dt>' + ((opt_data.imageAttachment.deletable) ? '<span class="blender blender-delete"></span><div class="attachment-delete"><a title="' + soy.$$escapeHtml('Delete this attachment') + '" id="del_' + soy.$$escapeHtml(opt_data.imageAttachment.id) + '" href="' + soy.$$escapeHtml(opt_data.baseurl) + '/secure/DeleteAttachment!default.jspa?id=' + soy.$$escapeHtml(opt_data.issue.id) + '&deleteAttachmentId=' + soy.$$escapeHtml(opt_data.imageAttachment.id) + '&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml('Delete this attachment') + '</span></a></div>' : '<span class="blender"></span>') + '<a  href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.imageAttachment.attachmentUrl) + '" class="attachment-title" title="' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + ' -' + ((opt_data.imageAttachment.latest) ? ' ' + soy.$$escapeHtml('Latest') : '') + ' ' + soy.$$escapeHtml(opt_data.imageAttachment.createdDateTime) + ((opt_data.imageAttachment.authorDisplayName) ? ' - ' + soy.$$escapeHtml(opt_data.imageAttachment.authorDisplayName) : '') + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.imageAttachment}) + '>' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + '</a></dt><dd class="attachment-size">' + soy.$$escapeHtml(opt_data.imageAttachment.fileSize) + '</dd><dd class="attachment-date"><time class="livestamp" datetime="' + soy.$$escapeHtml('' + opt_data.imageAttachment.createdIso8601) + '">' + soy.$$escapeHtml(opt_data.imageAttachment.createdDateTime) + '</time></dd></dl></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.imageAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.imageAttachment';
}


JIRA.Templates.ViewIssue.renderAttachmentInfo = function(opt_data, opt_ignored) {
  return '<dt class="attachment-title"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.attachment.attachmentUrl) + '" title="' + ((opt_data.attachment.latest) ? soy.$$escapeHtml('Latest') + ' ' : '') + ' ' + soy.$$escapeHtml(opt_data.attachment.createdDateTime) + ((opt_data.attachment.authorDisplayName) ? ' - ' + soy.$$escapeHtml(opt_data.attachment.authorDisplayName) : '') + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.attachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.attachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.attachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment(opt_data) + '>' + soy.$$escapeHtml(opt_data.attachment.fileName) + '</a></dt><dd class="attachment-delete">' + ((opt_data.attachment.deletable) ? '<a title="' + soy.$$escapeHtml('Delete this attachment') + '" id="del_' + soy.$$escapeHtml(opt_data.attachment.id) + '" href="' + soy.$$escapeHtml(opt_data.baseurl) + '/secure/DeleteAttachment!default.jspa?id=' + soy.$$escapeHtml(opt_data.issue.id) + '&deleteAttachmentId=' + soy.$$escapeHtml(opt_data.attachment.id) + '&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml('Delete this attachment') + '</span></a>' : '<span class="icon"></span>') + '</dd><dd class="attachment-date"><time class="livestamp" datetime="' + soy.$$escapeHtml('' + opt_data.attachment.createdIso8601) + '">' + soy.$$escapeHtml(opt_data.attachment.createdDateTime) + '</time></dd><dd class="attachment-size">' + soy.$$escapeHtml(opt_data.attachment.fileSize) + '</dd><dd class="attachment-author">' + soy.$$escapeHtml(opt_data.attachment.authorDisplayName ? opt_data.attachment.authorDisplayName : '') + '</dd>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentInfo.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentInfo';
}


JIRA.Templates.ViewIssue.renderAttachmentData = function(opt_data, opt_ignored) {
  return 'data-issue-id="' + soy.$$escapeHtml(opt_data.issue.id) + '"' + ((opt_data.attachment.expandable) ? 'data-attachment-type="expandable"' : (opt_data.attachment.thumbnailUrl != null) ? 'data-attachment-type="image"' : 'data-attachment-type="file"');
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentData.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentData';
}


JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon = function(opt_data, opt_ignored) {
  var output = '';
  var fileIconUrl__soy286 = '' + JIRA.Templates.ViewIssue.matchFileIconUrl(opt_data);
  var fileIconAlt__soy288 = '' + JIRA.Templates.ViewIssue.matchFileIconAlt(opt_data);
  output += '<img src="' + soy.$$escapeHtml(fileIconUrl__soy286) + '" height="16" width="16" border="0" alt="' + soy.$$escapeHtml(fileIconAlt__soy288) + '">';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon';
}


JIRA.Templates.ViewIssue.matchFileIconUrl = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.baseurl) + '/images/icons/attach/' + JIRA.Templates.ViewIssue.matchFileIcon(opt_data);
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileIconUrl.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileIconUrl';
}


JIRA.Templates.ViewIssue.matchFileIcon = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.mimetype) {
    case 'application/pdf':
      output += 'pdf.gif';
      break;
    case 'image/gif':
      output += 'image.gif';
      break;
    case 'image/png':
      output += 'image.gif';
      break;
    case 'image/jpeg':
      output += 'image.gif';
      break;
    case 'text/xml':
      output += 'xml.gif';
      break;
    case 'text/html':
      output += 'html.gif';
      break;
    case 'text/plain':
      output += 'text.gif';
      break;
    case 'application/zip':
      output += 'zip.gif';
      break;
    case 'application/x-gzip-compressed':
      output += 'zip.gif';
      break;
    case 'application/msword':
      output += 'word.gif';
      break;
    case 'application/msword-template':
      output += 'word.gif';
      break;
    case 'application/vnd.ms-word.document.macroEnabled.12':
      output += 'word.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
      output += 'word.gif';
      break;
    case 'application/vnd.ms-word.template.macroEnabled.12':
      output += 'word.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':
      output += 'word.gif';
      break;
    case 'application/vnd.ms-excel':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.addin.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.sheet.binary.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.sheet.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.template.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.template':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-powerpoint':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.template.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.template':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.addin.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.slideshow':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.presentation.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':
      output += 'powerpoint.gif';
      break;
    case 'text/x-java':
      output += 'java.gif';
      break;
    case 'text/x-java-source':
      output += 'java.gif';
      break;
    case 'application/x-java-archive':
      output += 'java.gif';
      break;
    default:
      output += 'file.gif';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileIcon';
}


JIRA.Templates.ViewIssue.matchFileIconAlt = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.mimetype) {
    case 'application/pdf':
      output += soy.$$escapeHtml('PDF File');
      break;
    case 'image/gif':
      output += soy.$$escapeHtml('GIF File');
      break;
    case 'image/png':
      output += soy.$$escapeHtml('PNG File');
      break;
    case 'image/jpeg':
      output += soy.$$escapeHtml('JPEG File');
      break;
    case 'text/xml':
      output += soy.$$escapeHtml('XML File');
      break;
    case 'text/html':
      output += soy.$$escapeHtml('HTML File');
      break;
    case 'text/plain':
      output += soy.$$escapeHtml('Text File');
      break;
    case 'application/zip':
      output += soy.$$escapeHtml('Zip Archive');
      break;
    case 'application/x-gzip-compressed':
      output += soy.$$escapeHtml('GZip Archive');
      break;
    case 'application/msword':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/msword-template':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-word.document.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-word.template.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.addin.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.sheet.binary.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.sheet.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.template.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.template':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-powerpoint':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.template.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.template':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.addin.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.slideshow':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.presentation.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'text/x-java':
      output += soy.$$escapeHtml('Java Source File');
      break;
    case 'text/x-java-source':
      output += soy.$$escapeHtml('Java Source File');
      break;
    case 'application/x-java-archive':
      output += soy.$$escapeHtml('Java Archive File');
      break;
    default:
      output += soy.$$escapeHtml('File');
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileIconAlt.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileIconAlt';
}


JIRA.Templates.ViewIssue.renderAttachmentIcon = function(opt_data, opt_ignored) {
  var output = '';
  var fileClass__soy444 = '' + JIRA.Templates.ViewIssue.matchFileClass(opt_data);
  var fileIconAlt__soy446 = '' + JIRA.Templates.ViewIssue.matchFileIconAlt(opt_data);
  output += '<span class="aui-icon aui-icon-small attachment-icon ' + soy.$$escapeHtml(fileClass__soy444) + '" title="' + soy.$$escapeHtml(fileIconAlt__soy446) + '"></span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentIcon';
}


JIRA.Templates.ViewIssue.renderThumbnailIcon = function(opt_data, opt_ignored) {
  var output = '';
  var fileClass__soy454 = '' + JIRA.Templates.ViewIssue.matchFileClass(opt_data);
  output += '<span class="aui-icon aui-icon-large attachment-thumbnail-icon ' + soy.$$escapeHtml(fileClass__soy454) + '"></span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderThumbnailIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.renderThumbnailIcon';
}


JIRA.Templates.ViewIssue.matchFileClass = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.mimetype) {
    case 'application/pdf':
      output += 'aui-iconfont-file-pdf';
      break;
    case 'image/gif':
      output += 'aui-iconfont-image';
      break;
    case 'image/png':
      output += 'aui-iconfont-image';
      break;
    case 'image/jpeg':
      output += 'aui-iconfont-image';
      break;
    case 'video/mp4':
      output += 'aui-iconfont-file-video';
      break;
    case 'text/xml':
      output += 'aui-iconfont-file-code';
      break;
    case 'text/html':
      output += 'aui-iconfont-file-code';
      break;
    case 'text/plain':
      output += 'aui-iconfont-file-txt';
      break;
    case 'application/zip':
      output += 'aui-iconfont-file-zip';
      break;
    case 'application/x-gzip-compressed':
      output += 'aui-iconfont-file-zip';
      break;
    case 'application/msword':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/msword-template':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.ms-word.document.macroEnabled.12':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.ms-word.template.macroEnabled.12':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.ms-excel':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.addin.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.sheet.binary.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.sheet.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.template.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.template':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-powerpoint':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.template.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.template':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.addin.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.slideshow':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.presentation.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'text/x-java':
      output += 'aui-iconfont-file-code';
      break;
    case 'text/x-java-source':
      output += 'aui-iconfont-file-code';
      break;
    case 'application/x-java-archive':
      output += 'aui-iconfont-file-zip';
      break;
    default:
      output += 'aui-iconfont-devtools-file';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileClass.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileClass';
}


JIRA.Templates.ViewIssue.tagAttachment = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ViewIssue.tagFilePreview({id: opt_data.attachment.id, title: opt_data.attachment.fileName, mimeType: opt_data.attachment.mimeType, thumbnailUrl: opt_data.attachment.thumbnailUrl});
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.tagAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.tagAttachment';
}


JIRA.Templates.ViewIssue.tagFilePreview = function(opt_data, opt_ignored) {
  var output = '';
  var previewType__soy538 = '' + ((opt_data.mimeType == null && opt_data.thumbnailUrl != null) ? 'image' : (opt_data.mimeType != null && ('' + opt_data.mimeType).indexOf('image/') != -1) ? 'image' : (opt_data.mimeType != null && ('' + opt_data.mimeType).indexOf('video/mp4') != -1) ? 'video' : (opt_data.mimeType == 'application/pdf') ? 'document' : 'unknown');
  output += (previewType__soy538 != 'unknown') ? ' file-preview-id="' + soy.$$escapeHtml(opt_data.id) + '" file-preview-title="' + soy.$$escapeHtml(opt_data.title) + '" file-preview-type="' + soy.$$escapeHtml(previewType__soy538) + '" file-preview-mime-type="' + soy.$$escapeHtml(opt_data.mimeType) + '"' + ((opt_data.thumbnailUrl != null) ? 'file-preview-url="' + soy.$$escapeHtml('' + opt_data.thumbnailUrl) + '"' : '') : '';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.tagFilePreview.soyTemplateName = 'JIRA.Templates.ViewIssue.tagFilePreview';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/jira-amd.js' */
define("dndattachment/JIRA",function(){return JIRA});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/aui-amd.js' */
define("dndattachment/aui",function(){return AJS});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/time.js' */
define("dndattachment/ctrlv/time",[],function(){"use strict";return moment});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/base64decode.js' */
define("dndattachment/ctrlv/base64decode",["exports"],function(e){"use strict";function n(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0}var r=function(e){for(var r,t,a=e.replace(/[^A-Za-z0-9\+\/]/g,""),c=a.length,i=3*c+1>>2,d=new Uint8Array(i),o=0,s=0,f=0;f<c;f++)if(t=3&f,o|=n(a.charCodeAt(f))<<18-6*t,3===t||c-f===1){for(r=0;r<3&&s<i;r++,s++)d[s]=o>>>(16>>>r&24)&255;o=0}return d};e.base64decode=r,e.decodeBase64DataUri=function(e){var n=";base64,",t=e.slice(0,e.indexOf(n))+n,a=e.substring(t.length);return r(a)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/utility.js' */
define("dndattachment/ctrlv/utility",["jquery","underscore","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/time","jira/flag","jira/util/navigator","exports"],function(t,e,n,a,i,r,o){"use strict";o.isKeyPasteEvent=function(t,e){var n=86,a=(e||"").indexOf("Mac")!==-1||r.isMac();return t.which===n&&(a?t.metaKey:t.ctrlKey)},o.isImagePasteEvent=function(t){if(t&&t.clipboardData){var n=e.union(e.toArray(t.clipboardData.items),e.toArray(t.clipboardData.files)),a=n.some(function(t){return t.type.indexOf("image")!==-1}),i=n.some(function(t){return t.type.indexOf("rtf")!==-1});return a&&!i}};var s=function(n){if(n.clipboardData&&n.clipboardData.types&&e.contains(n.clipboardData.types,"text/html")){var a=t(n.clipboardData.getData("text/html"));return 1===a.length&&0===a.children().length&&"img"===a[0].nodeName.toLowerCase()?a[0].src:null}};o.getHtmlImagePaste=s,o.isHtmlImagePasteEvent=function(t){return null!=s(t)},o.isTextPasteEvent=function(t){return t.clipboardData.types&&(e.contains(t.clipboardData.types,"text/plain")||e.contains(t.clipboardData.types,"text/html"))},o.isContentEditable=function(e){return"true"==e.contentEditable||""==e.contentEditable||"inherit"==e.contentEditable&&t(e).parents().is("[contenteditable=true]")},o.isValidFileName=function(t){return!e(["\\","/",'"',":","?","*","<","|",">","!"]).any(function(e){return t.indexOf(e)>-1})},o.getTextPasteContent=function(t){return t.clipboardData.types&&e.contains(t.clipboardData.types,"text/plain")&&t.clipboardData.getData("text/plain")||""},o.getTextContent=function(e){return e?r.isIE()&&"undefined"!=typeof e.innerText?e.innerText:t(e).text():""},o.normalizePasteEvent=function(t){return t&&t.originalEvent&&t.originalEvent.clipboardData&&(t.clipboardData=t.originalEvent.clipboardData),t&&!t.clipboardData&&window.clipboardData&&(t.clipboardData={files:window.clipboardData.files,types:{contains:function(t){if("text/plain"==t)return!!window.clipboardData.getData("Text")}},getData:function(t){if("text/plain"==t)return window.clipboardData.getData("Text")}}),t},o.browserIsSupported=function(e){var n=(e||"").indexOf("Mac")!==-1||r.isMac(),a=r.isSafari(),i=r.isIE();if(n&&a)return!1;if(i&&!r.isEdge()){var o=document.documentElement.className.split(/\s+/),s=t.inArray("msie-gt-10",o)>-1,l=t.inArray("msie-gt-11",o)>-1,c=i&&s&&!l;return c}return!0},o.browserIsNativePaste=function(){return r.isChrome()||r.isSafari()},o.isWikiTextfield=function(t){return t.is(":input")&&t.hasClass("wiki-textfield")};var l=function(t){return t.is("input#summary")},c=function(n,a,i,r){var s=t(a);if((o.isWikiTextfield(s)||l(s))&&n){s.is(":focus")||s.one("focus",function(){var t=s[0];t.selectionStart=t.selectionEnd=i+n.length});var c=s.val(),u=c.substring(0,i),d=c.substring(r,c.length),f=s.data("wikiEditor");f&&f.undoRedoEl&&e.isFunction(f.undoRedoEl.recordHistoryItem)&&f.undoRedoEl.recordHistoryItem(),s.val(u+n+d),s.trigger("input"),a.selectionStart=a.selectionEnd=i+n.length,f&&f.undoRedoEl&&e.isFunction(f.undoRedoEl.updateCurrent)&&f.undoRedoEl.updateCurrent()}};o.insertToInput=c,o.getMarkup=function(t){var n=["gif"],a=["bmp","jpeg","jpg","png"],i=t.split("."),r=i[i.length-1].toLowerCase();return e.contains(n,r)?"!"+t+"!":e.contains(a,r)?"!"+t+"|thumbnail!":"[^"+t+"]"},o.insertWikiMarkup=function(t,e,n,a){var i=o.getMarkup(t);i&&(i=" "+i+" ",c(i,e,n,a))},o.loadImage=function(e){var n=new t.Deferred,a=new Image;return a.setAttribute("crossOrigin","anonymous"),a.onload=function(){n.resolve(a)},a.onerror=n.reject.bind(n),a.src=e,a.width>0&&a.height>0&&n.resolve(a),n},o.convertImageToBlob=function(e){var a=t("<canvas>").attr("width",e.width).attr("height",e.height)[0];a.getContext("2d").drawImage(e,0,0);try{if(a.mozGetAsFile)return a.mozGetAsFile("image/png");if(a.toDataURL)return new Blob([n.decodeBase64DataUri(a.toDataURL("image/png"))],{type:"image/png"})}catch(t){return null}},o.convertBlobToImage=function(t,e){var n=new Blob([t.slice()],{type:t.type});return n.lastModifiedDate=new Date,n.name=e,n},o.dropFileToElement=function(e,n){var a=e.name;a||(a=this.generateFileName(),e.name=a+".png");var i=t.Event("drop",{dataTransfer:{files:[e]},isPasteEvent:!0}),r=!1;return t(document).on("dropHandled.dropFileToElement",function(){r=!0}),n.trigger(i),t(document).off(".dropFileToElement"),r},o.generateFileName=function(){return"image-"+a().format("YYYY-MM-DD-HH-mm-ss-SSS")},o.getCurrentIssueId=function(){return JIRA.Issues.Api.getSelectedIssueId()},o.showErrorMsg=function(t,e){i.showErrorMsg(t,e)},o.createBlobFromFile=function(t){var e=new Blob([t.slice()],{type:t.type});return e.name=t.name,e},o.dragEventContainsFiles=function(t){if(!t.dataTransfer||!t.dataTransfer.types)return!0;var n=t.dataTransfer.types;return r.isMozilla()?e.contains(n,"application/x-moz-file"):e.contains(n,"Files")}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/Configuration.js' */
define("dndattachment/util/Configuration",["underscore"],function(n){function t(t){return n.isFunction(WRM.data)?WRM.data(t):WRM.data.claim(t)}var a="com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.";return{getWRM:n.memoize(function(n){return t(a+n)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/DataTransfer.js' */
define("dndattachment/util/DataTransfer",["jquery"],function(e){return Class.extend({init:function(e){this._dataTransfer=e},getFiles:function(){var n=this._dataTransfer.files,r=this._dataTransfer.items;return r&&r.length>0&&_.any(r,function(e){return!!e.webkitGetAsEntry})?this.readEntries(r):n&&n.length>0?this.readFiles(this._dataTransfer.files):(new e.Deferred).reject()},readFiles:function(n){var r=new e.Deferred;return e.when.apply(window,_.map(n,function(r){var t=new e.Deferred,i=!r.name.match(/\.([a-z0-9]+)$/i);return i&&r.size<=8192||8192==r.size||4096==r.size||r.size<=1024?this.readFileAsText(r).fail(function(){n=_(n).without(r)}).always(t.resolve.bind(t)):t.resolve(),t}.bind(this))).always(function(){r.resolve(n)}),r},readFileAsText:function(n){var r=new e.Deferred,t=new FileReader;return t.onload=function(){r.resolve(this.result)},t.onerror=function(){r.reject(this.error)},t.readAsText(n),r},readEntries:function(n){var r=new e.Deferred;return n=_.filter(n,function(e){return"file"===e.kind}),e.when.apply(window,_.map(n,function(e){return this.readEntry(e.webkitGetAsEntry(),e)}.bind(this))).then(function(){r.resolve(_.union.apply(_,arguments))},r.reject.bind(r)),r},readEntry:function(n,r){var t=new e.Deferred;return n.isFile?r&&r.getAsFile?t.resolve([r.getAsFile()]):n.file(function(e){t.resolve([e])}):n.isDirectory&&n.createReader().readEntries(function(n){var r=[];e.when.apply(window,_.map(n,function(e){return this.readEntry(e).then(function(e){return r.push.apply(r,e)})}.bind(this))).always(function(){t.resolve(r)})}.bind(this)),t}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/FileSizeUtil.js' */
define("dndattachment/util/FileSizeUtil",function(){function n(n){return n>u?t(n):n>i?r(n):e(n)}function t(n){var t=n/u;return t.toFixed(2)+a}function r(n){var t=Math.round(n/i);return t+o}function e(n){var t=n/i;return t.toFixed(1)+o}var i=1024,u=i*i,o=" kB",a=" MB";return{format:n}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/AttachmentEvents.js' */
define("dndattachment/util/events/types",{ATTACHMENT_FOR_PAGE_RECEIVED:"attachmentForPageReceived"});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/UploadHandler.js' */
define("dndattachment/upload/handler",["jira/util/events","dndattachment/util/events/types","underscore","jquery","dndattachment/ctrlv/utility","exports","dndattachment/upload/default/executor"],function(e,t,n,i,a,r,o){var u,l,s=[],c=function(e,t){return n.find(s,function(n){return n.isValid(e,t)})},f=function(e,t){var r=i.Deferred(),o=JIRA.Dialog.current;if(o){AJS.trigger("analytics",{name:"attach.screenshot.html5.dialogPaste",data:{}});var l=a.createBlobFromFile(t.files[0]);a.dropFileToElement(l,o.$form)&&r.resolve([t.files[0].name])}else{var s=c(e,t);s&&(r=s.processFiles(t.files,u),t.successCallback&&r.done(t.successCallback),t.failureCallback&&r.fail(t.failureCallback),t.alwaysCallback&&r.always(t.alwaysCallback))}r.done(function(e,r){if(!r&&t.isWikiTextfieldFocused){var u=t.wikiTextfield;n.each(e,function(e){a.insertWikiMarkup(e,u,u.selectionStart,u.selectionStart)}),o&&t.isPaste&&AJS.trigger("analytics",{name:"attach.screenshot.html5.dialogPaste.insertWikiMarkup",data:{}}),i(t.wikiTextfield).is(":focus")||setTimeout(function(){t.wikiTextfield.focus()},0)}})},d=function(e){if(e){var t="undefined"!=typeof e.isValid,n="undefined"!=typeof e.processFiles,i="undefined"!=typeof e.weight,a="undefined"!=typeof e.name;return t&&n&&i&&a}return!1};r.registerExecutor=function(e){var t=d(e);if(t){var i=n.reject(s,function(t){return t.name===e.name});i.push(e),s=n.sortBy(i,function(e){return-e.weight})}return t},r.unregisterExecutor=function(e){s=n.reject(s,function(t){return t.name===e.name})},r.initialize=function(){e.bind(t.ATTACHMENT_FOR_PAGE_RECEIVED,f)},r.disable=function(){e.unbind(t.ATTACHMENT_FOR_PAGE_RECEIVED,f)},r.setAttachmentDropZone=function(e){u=e,this.setCurrentDropZone(e)},r.isDefaultExecutor=function(e){var t=c(null,e);return t&&t.name===o.name},r.setCurrentDropZone=function(e){l=e},r.doUpload=function(e){return!(!l||!l.browseFilesAndUpload)&&l.browseFilesAndUpload(i.Event("upload"),e)},r.disconnectCurrentDropZone=function(){l=u}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/DefaultUploadExecutor.js' */
define("dndattachment/upload/default/executor",["jquery","underscore","dndattachment/ctrlv/utility","exports"],function(t,e,n,u){u.name="Default attachment executor",u.weight=0,u.isValid=function(t,e){return!0},u.processFiles=function(t,e){return e.uploadFiles(t)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/i18n.js' */
define("dndattachment/i18n",function(){var t={"dnd.attachment.unsupported.browser":"Drag and Drop of attachments is currently only available for the following browsers:","dnd.attachment.file.is.too.large":"File exceeds maximum size limit set by the administrator ({0}).","dnd.attachment.upload.in.progress":"Upload in progress, please wait.","dnd.attachment.not.uploaded":function(t){return AJS.format("File \"{0}\" was not uploaded",t)},"dnd.attachment.unauthorized":"You are not authorized, session has expired or connection is lost.","dnd.attachment.internal.server.error":"An internal error has occurred. Please contact your administrator.","dnd.attachment.upload.aborted":"Upload was aborted.","dnd.attachment.upload.remove":"Remove attachment"};return function(n){if(t[n])return t[n];throw"Unknown key: "+n}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/TemporaryAttachments.js' */
define("dndattachment/TemporaryAttachments",[],function(){var t={};return{createAttachment:function(t,e,n,a){return{id:t,name:e,type:n,file:a}},getAttachment:function(e,n){return t[e]||this.createAttachment(e,n)},putAttachment:function(e,n){return t[e]=this.createAttachment(e,n.name,n.type,n)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/Parser.js' */
define("dndattachment/Parser",["dndattachment/aui","jquery"],function(e,n){function r(e){var r=n(e).find(a).add(e.filter(a)),d=r.addClass(t).map(function(e,r){var t=new n.Deferred;return require([n(r).attr("duiType")],function(e){"function"==typeof e?t.resolve(new e(r)):t.reject()}),t});return n.when.apply(window,n.makeArray(d))}var t="-dui-type-parsed",a="*[duiType]:not(."+t+")";return JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,n,t){r(n)}),n.isReady?r(n("body")):n(function(){r(n("body"))}),{parse:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/dropzones/IssueDropZone.js' */
define("dndattachment/dropzones/IssueDropZone",["jquery","jira/flag","dndattachment/Parser","dndattachment/aui","dndattachment/JIRA","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility"],function(e,t,n,i,s,r,a,o,d){var u=5e3,l=["An internal error has occurred. Please contact your administrator."],h=Class.extend({eventGroup:"issuedropzone",progressBarType:"dndattachment/progressbars/UploadProgressBar",init:function(t){return this.$node=e(t),this.isSupportedBrowser()?(this.$node.parents(".mod-content")&&this.$node.parents(".mod-content").addClass("issue-drop-zone"),this.uploadLimit=this.$node.data("upload-limit"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.attachFileUrl=contextPath+"/secure/AttachFile.jspa",this.pendingQueue=[],this.render(),void this.queueEvent("init")):this.renderUnsupported()},queueTask:function(t){this.pendingQueue.push(t),t.always(function(){this.pendingQueue.splice(this.pendingQueue.indexOf(t),1)}.bind(this)),this.markDirty(!0),e.when.apply(window,this.pendingQueue).always(_.debounce(this.checkMarkDirty,!1,!0).bind(this))},render:function(){this.$node.html(s.Templates.DnDAttachmentPlugin.IssueDropZone({})),this.fileInput=this.$node.find(".issue-drop-zone__file"),this.fileButton=this.$node.find("button.issue-drop-zone__button"),this.connectListeners(),s.trace("jira.issue.dnd.issuedropzone.render")},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseLinkHandler.bind(this))},browseLinkHandler:function(e){e.preventDefault(),this.fileInput.click()},connectListeners:function(){this.fileInput.change(function(e){this.handleFilesReceived(this.fileInput[0].files),this.queueEvent("fileInput",{count:this.fileInput[0].files.length}),this.fileInput.attr("value",null)}.bind(this)),this.addHandlerToBrowseLink();var t=this.$node.parents(".issue-drop-zone").length>0?this.$node.parents(".issue-drop-zone"):this.$node;this.$dropTarget=t.find(">*").andSelf(),this.$dropTarget.on("dragover dragenter drop",function(n){if(n.preventDefault(),n.stopPropagation(),t.addClass("dragover"),"drop"==n.type){t.removeClass("dragover"),e(document).trigger("dropHandled");var i=new o(n.dataTransfer);i.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}}.bind(this)),this.$dropTarget.on("dragleave",function(){t.removeClass("dragover")}.bind(this))},configureUploadProgressBar:function(e,t){e.data("upload-size",this.uploadSize).data("file",t).data("form-token",this.formToken)},createUploadProgressBar:function(t){var i=e('<div duiType="'+this.progressBarType+'" class="upload-progress-bar"></div>');return this.configureUploadProgressBar(i,t),n.parse(i).then(function(e){this.placeUploadProgressBar(i,e),this.handleNewProgressBar(e)}.bind(this))},placeUploadProgressBar:function(e){return e.insertAfter(this.$node)},handleNewProgressBar:function(e){},handleFilesReceived:function(e){this.uploadFiles(e)},uploadFiles:function(n){var r=new e.Deferred,a=[],o=s.Issues.Api.getSelectedIssueKey(),d=s.Issues.Api.getSelectedIssueId(),l=i.Meta.get("viewissue-permlink"),h=e("#summary-val input").attr("value")||e("#summary-val").text(),c=s.Templates.DnDAttachmentPlugin.SuccessMessageLink({issueLink:l,issueKey:o,issueSummary:h}),p=_.map(n,function(t){var n=new e.Deferred;return this.createUploadProgressBar(t).then(function(e){this.trigger("progressBarInserted",e),a.push(e),e.uploadFile(t,this.uploadLimit).then(n.resolve.bind(n),n.resolve.bind(n)).done(function(){this.trigger("uploadFinished",e)}.bind(this)).fail(function(){s.trace("jira.issue.dnd.upload.fail"),r.reject(arguments)})}.bind(this)),n}.bind(this)),f=e.when.apply(window,p);return f.done(function(){var e=_.filter(1==p.length?[arguments]:arguments,function(e){return e&&e[0]&&e[0].id}).map(function(e){return e[0].id});0!=e.length&&this.commitUpload(e,d).done(function(){_.delay(function(){a.some(function(e){e.getAutoDestroy()&&(e.destroy(),this.queueEvent("autoDestroy"))}.bind(this))}.bind(this),u);var e=_.filter(a,function(e){return e.result.isResolved()});if(1==e.length){var n=e[0].getFileName();t.showSuccessMsg("",i.format("{0} was attached successfully to {1}.",n,c))}else e.length>1&&t.showSuccessMsg("",i.format("{0} files were attached successfully to {1}.",e.length,c));r.resolve(_.map(e,function(e){return e.file.name}))}.bind(this)).fail(function(e,t){r.reject(e,t),e&&e.forEach(function(e){a.forEach(function(t){t.reportError(e)})}),t&&a.forEach(function(e){var n=t["#"+e.getFileID()]||t[e.getFileName()];n&&e.reportError(n)}),s.trace("jira.issue.dnd.commit.fail")})}.bind(this)),this.queueTask(f),r},loadAttachments:function(e){e.forEach(function(e){this.createUploadProgressBar(e.file).then(function(t){t.setFileID(e.id),t.setFileName(e.name),t.setFileSize(e.size),t.setProgress(1),t.setFinished(),this.trigger("uploadFinished",t)}.bind(this))},this)},commitUpload:function(t,n){return new e.Deferred},attachFile:function(t,n){var i=new e.Deferred;return s.SmartAjax.makeRequest({type:"POST",url:this.attachFileUrl,data:{inline:!0,id:n||s.Issue.getIssueId(),filetoconvert:t,atl_token:atl_token(),formToken:this.formToken},dataType:"json"}).done(i.resolve.bind(i)).fail(function(e){try{var t=JSON.parse(e.responseText);i.reject(t.errorMessages||l,t.errors)}catch(e){i.reject(l)}}),i},isSupportedBrowser:function(){if(e("html.webkit")[0]||e("html.safari")[0]){if(!(parseFloat(e.browser.version)>=537))return!1}else if(e("html.mozilla")[0]){if(!(parseFloat(e.browser.version)>=1.9))return!1}else{if(!e("html.msie")[0])return!1;if(!(parseFloat(e.browser.version)>=10))return!1}return!0},renderUnsupported:function(){this.$node.addClass("issue-drop-zone__not-supported").text(r("dnd.attachment.unsupported.browser")).append("<ul><li>FireFox 3.6+</li><li>Chrome 5+</li><li>Safari 5</li></ul>")},markDirty:function(e){this.$node.addClass(s.DirtyForm.ClassNames.SANCTIONED),this.$node.toggleClass(s.DirtyForm.ClassNames.EXEMPT,!e),this.$node.attr("value",!1),this.$node.attr("defaultValue",!0)},checkMarkDirty:function(){0==this.pendingQueue.length&&this.markDirty(!1)},queueEvent:function(e,t){i.trigger("analytics",{name:"issue.dnd.attachment."+this.eventGroup+"."+e,data:t||{}})}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-integration', location = 'js/integration/register.js' */
define("dndattachment/integration-register",function(){function r(r){return e[r]}function t(r,t){return"function"==typeof t&&(e[r]=t,!0)}var e={attachmentMenuLink:null,attachmentsZoneCreator:null,browseLink:null,temporaryAttachmentCreatorFactory:null,attachmentCreatorFactoryForBrowseLink:null,attachmentCreatorFactoryForAttachLink:null,temporaryBinaryUploadHandler:null,connectedTemporaryBinaryUploadHandler:null};return{getAttachmentMenuHandler:function(){var t=r("attachmentCreatorFactoryForAttachLink");return t&&t("attachment-menu")},registerAttachmentMenuHandlerFactory:function(r){return t("attachmentCreatorFactoryForAttachLink",r)},getBrowseLinkHandler:function(){const t=r("attachmentCreatorFactoryForBrowseLink");return t&&t("browse-link")},registerBrowseLinkHandlerFactory:function(r){return t("attachmentCreatorFactoryForBrowseLink",r)},getAttachmentsZoneCreator:function(){return r("attachmentsZoneCreator")},registerAttachmentsZoneCreator:function(r){return t("attachmentsZoneCreator",r)},registerTemporaryAttachmentCreatorFactory:function(r){return t("temporaryAttachmentCreatorFactory",r)},getTemporaryAttachmentCreator:function(t,e,n){var a=r("temporaryAttachmentCreatorFactory");return a&&a(t,e,n)},getTemporaryAttachmentZoneCreator:function(){return r("temporaryAttachmentsZoneCreator")},registerTemporaryAttachmentZoneCreator:function(r){return t("temporaryAttachmentsZoneCreator",r)},getTemporaryBinaryUploadHandler:function(){return r("temporaryBinaryUploadHandler")},registerTemporaryBinaryUploadHandler:function(r){return t("temporaryBinaryUploadHandler",r)},getConnectedTemporaryBinaryUploadHandler:function(){return r("connectedTemporaryBinaryUploadHandler")},registerConnectedTemporaryBinaryUploadHandler:function(r){return t("connectedTemporaryBinaryUploadHandler",r)},unregisterAllHandlers:function(){for(var r in e)e[r]=null}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'js/dropzones/AttachmentsDropZone.js' */
define("dndattachment/dropzones/AttachmentsDropZone",["dndattachment/dropzones/IssueDropZone","jira/util/events","dndattachment/util/events/types","jquery","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/dialog/dialog","dndattachment/integration-register","dndattachment/upload/handler"],function(e,t,n,o,r,i,a,s,d){var h=function(){var e=parseUri(window.location);return e.protocol+"://"+e.authority}(),c=e.extend({eventGroup:"attachmentsdropzone",progressBarType:"dndattachment/progressbars/AttachmentsUploadProgressBar",init:function(){this._super.apply(this,arguments),this.attachFileUrl=contextPath+"/rest/jddap/1.0/attachment",t.bind(JIRA.Events.PANEL_REFRESHED,this.panelRefreshed.bind(this)),this.connectContainer()},connectContainer:function(){this.$containerNode=this.getContainerNode(),this.$dragoverDropzone=o(JIRA.Templates.DnDAttachmentPlugin.dropzone()),this.$dragoverBorder=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-border"),this.$dragoverInfo=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-info"),this.$dragoverDropzone.appendTo(this.$containerNode),this._connectDropzone(),this.$windowMask=o(JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask()),this.$body=o(document.body),this.$body.append(this.$windowMask),this.$body.on("dragenter",_.throttle(this.onBodyDragEnter.bind(this),200,{trailing:!1})),this.$body.on("dragleave",this.onBodyDragLeave.bind(this)),this.$windowMask.on("dragover dragenter",this.onWindowMaskDragEnter.bind(this)),this.$windowMask.on("dragleave",this.onWindowMaskDragLeave.bind(this)),this.$windowMask.on("drop",this.onWindowMaskDrop.bind(this)),this.$auiSidebar=o(".aui-sidebar-body"),this._disconnectListenersFromParentDropzone(),this.onContentAddedHandler=this.onContentAdded.bind(this),t.bind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),this.externalHandler=s.getBrowseLinkHandler()},_connectDropzone:function(){var e=s.getAttachmentsZoneCreator();this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.$containerNode.on("dragover dragenter drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),"function"==typeof e&&(this.externalZone=e(this.$containerNode[0]))},_disconnectListenersFromParentDropzone:function(){this.$dropTarget.off("dragover drop dragleave dragenter"),o(document).off("dragover dragenter")},disconnectContainer:function(){this.$dragoverDropzone.remove(),this.$windowMask.remove(),this.$body.removeClass("attachments-drop-zone__dragover"),this.$body.off("dragenter",this.onBodyDragEnter.bind(this)),this.$containerNode.off("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.externalZone&&this.externalZone.deactivate(),t.unbind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),d.disconnectCurrentDropZone(this)},isAttached:function(){return o.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},getContainerNode:function(){var e=o(o(".issue-container")[0]);return"static"===e.css("position")&&e.css("position","relative"),e},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},canDoFullPageDrop:function(){return a.current?(JIRA.trace("jira.issue.dnd.dropnotallowed"),!1):(JIRA.trace("jira.issue.dnd.dropallowed"),!0)},onDragOverDrop:function(e){if(!this.isAttached())return void this.disconnectContainer();if(i.dragEventContainsFiles(e)&&this.canDoFullPageDrop()&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),JIRA.trace("jira.issue.dnd.dragover"),this.$body.addClass("attachments-drop-zone__dragover"),this.$body.addClass("attachments-drop-zone__window-dragover"),this.$containerNode.addClass("attachments-drop-zone__dragover-fade"),this._readjustDropzone(),this._repositionStickyInfoBox(),"dragenter"===e.type&&this.externalZone&&(d.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"==e.type))if(this.removeAllDragoverClasses(this.$containerNode),o(document).trigger("dropHandled"),this.externalZone&&d.isDefaultExecutor({}))this.externalZone.drop();else{var t=new r(e.dataTransfer);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}},onDragLeave:function(){this.removeAllDragoverClasses(this.$containerNode)},browseFilesAndUpload:function(e,t){return"function"==typeof this.externalHandler&&d.isDefaultExecutor({})?this.externalHandler.call(null,e,t||{}):this.browseLinkHandler.call(this,e),!0},_readjustDropzone:function(){if(0!==this.$auiSidebar.length){var e=this.$auiSidebar.offset().left+this.$auiSidebar.width();if(this.$dragoverBorder.parent().offset()){var t=this.$dragoverBorder.parent().offset().left;e>t?this.$dragoverBorder.css({left:e-t}):this.$dragoverBorder.css({left:0})}else this.$dragoverBorder.css({left:0})}},_repositionStickyInfoBox:function(){var e,t=this.$containerNode.scrollParent().scrollTop()+10,n=this.$containerNode.offset().top;e=this.$containerNode.scrollParent().offset()?this.$containerNode.scrollParent().offset().top:0;var o;o=0===e?t>=n?t-n:10:t,this.$dragoverInfo.css({top:o})},onBodyDragEnter:function(e){i.dragEventContainsFiles(e)&&(this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"))},onBodyDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDragEnter:function(e){i.dragEventContainsFiles(e)&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none"),this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"),this.canDoFullPageDrop()&&(this.$body.addClass("attachments-drop-zone__dragover"),this._repositionStickyInfoBox()))},onWindowMaskDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDrop:function(e){e.preventDefault(),this.removeAllDragoverClasses()},removeAllDragoverClasses:function(e){e&&e.removeClass("attachments-drop-zone__dragover-fade"),this.$body.removeClass("attachments-drop-zone__window-dragover"),this.$body.removeClass("attachments-drop-zone__dragover")},handleFilesReceived:function(e){var r=o("textarea.wiki-textfield:visible:focus"),i=r.length>0;t.trigger(n.ATTACHMENT_FOR_PAGE_RECEIVED,{files:e,isWikiTextfieldFocused:i,wikiTextfield:r[0]})},render:function(){return this.$node.parents("#attachmentmodule").addClass("attachments-drop-zone-parent"),this.$listNode=this.$node.siblings("#file_attachments, #attachment_thumbnails"),this._super.apply(this,arguments)},panelRefreshed:function(e,t,n,r){if(r.find(this.$node).is("*")){this.getViewMode();n=n.find(">.mod-content"),n.addClass("issue-drop-zone"),this.$node.prependTo(n),this.render();var i=r.find(".attachments-upload-progress-bar");i.data("viewMode",this.getViewMode()).each(function(e,t){const n=o(t).prop("_instance");void 0!=n&&n.render()}),i.each(function(e,t){this.insertProgressBar(o(t))}.bind(this)),this._disconnectListenersFromParentDropzone()}},getViewMode:function(){return"file_attachments"==this.$listNode.attr("id")?"list":"gallery"},getSortBy:function(){return this.$listNode.data("sort-key")},getSortOrder:function(){return this.$listNode.data("sort-order")},getSortComparator:function(){var e="asc"==this.getSortOrder()?1:-1,t="fileName"==this.getSortBy()?function(e){return e.find(".attachment-title").text()}:function(e){return new Date(e.find("*[datetime]").attr("datetime")).getTime()},n="fileName"==this.getSortBy()&&String.prototype.localeCompare?function(e,t){return e.localeCompare(t)}:function(e,t){return e<t?-1:e>t?1:0};return function(o,r){var i=t(o),a=t(r);return e*n(i,a)}},commitUpload:function(e,t){var n=new o.Deferred;return this.attachFile(e,t).then(n.resolve.bind(n),n.reject.bind(n)),n.then(function(n){var r=o(JIRA.Templates.ViewIssue.renderAttachments({baseurl:contextPath,fullBaseUrl:h+contextPath,issue:{id:t},attachments:n,viewMode:this.getViewMode()})).find(".attachment-content");n.forEach(function(t,n){var o=r[n],i=this.$listNode.find('>*[data-file-id="'+e[n]+'"]');i.replaceWith(o)},this),JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[this.$listNode,JIRA.CONTENT_ADDED_REASON.panelRefreshed]),JIRA.trace("jira.issue.dnd.attached")}.bind(this)),this.queueTask(n),this.queueEvent("commitUpload",{count:e.length}),n},configureUploadProgressBar:function(e){this._super.apply(this,arguments),e.data("viewMode",this.getViewMode())},placeUploadProgressBar:function(e,t){return t.$node.find("time.livestamp").attr("datetime",(new Date).toISOString()).livestamp(),this.insertProgressBar(e),t.bind("onDestroy",function(){var t=e.parents(".item-attachments");0==t.find(".attachments-upload-progress-bar, .attachment-content").length&&t.remove()}),e},insertProgressBar:function(e){var t=this.getSortComparator(),n=this.$listNode.children().toArray(),r=function(n){if(t(e,o(n))<1)return e.insertBefore(n),!0};n.some(r)||e.appendTo(this.$listNode)}});return c});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'js/progressbars/UploadProgressBar.js' */
define("dndattachment/progressbars/UploadProgressBar",["jquery","dndattachment/Parser","dndattachment/JIRA","dndattachment/aui","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,i,s,n,o,r,a){function d(t,e){s.trigger("analytics",{name:"issue.dnd.attachment.uploadprogress."+t,data:e||{}})}var h=["aui-iconfont-error","aui-iconfont-success","aui-iconfont-close-dialog"],u=r.getWRM("thumbnail-mime-types").split(","),l=Class.extend({autoDestroy:!0,init:function(e){this.result=new t.Deferred,this.$node=t(e),this.file=this.$node.data("file"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.$node.prop("_instance",this),this.render()},render:function(){this.$node.html(i.Templates.DnDAttachmentPlugin.UploadProgressBar({isImageType:this.isImageType()})),this.afterRender()},afterRender:function(){this.file&&(this.setFileName(this.file.name),this.setFileSize(this.file.size),this.loadThumbnail(this.file)),this.progress&&this.updateProgress(),this.connectListeners()},connectListeners:function(){this.getControlNode().on("click",function(){this.destroy(),d("buttonClick")}.bind(this))},destroy:function(){this.destroyed||(this.upload&&this.upload.abort(),this.setAutoDestroy(!1),this.trigger("onBeforeDestroy"),this.destroyed=!0,this.$node.animate({opacity:0},{duration:250,complete:function(){this.$node.slideUp(250,function(){this.objectURL&&window.URL.revokeObjectURL(this.objectURL),this.$node.remove(),i.trace("jira.issue.dnd.progressbar.removed"),this.trigger("onDestroy")}.bind(this))}.bind(this)}))},isDestroyed:function(){return!!this.destroyed},setAutoDestroy:function(t){this.autoDestroy=t},getAutoDestroy:function(){return this.autoDestroy},getUploadParams:function(t){var e={filename:t.name,size:t.size,atl_token:atl_token(),formToken:this.formToken};return _.extend(e,this.getEntityParams()),e},getEntityParams:function(){var t={},e=i.Issue.getIssueId(),s=this.$node.parents("form").find('*[name="pid"]').attr("value");return s?t.projectId=s:e&&(t.issueId=e),t},setFile:function(t){this.file=t},setFileID:function(t){this.fileID=t,this.$node.attr("data-file-id",t)},getFileID:function(){return this.fileID},setFileName:function(t){this.$node.find(".upload-progress-bar__file-name").text(t)},getFileName:function(){return this.$node.find(".upload-progress-bar__file-name").text()},setFileSize:function(t){t>=0&&this.$node.find(".upload-progress-bar__file-size").html(a.format(t))},uploadFile:function(t,e){this.setFile(t);var r=this.result;if(this.monitorUpload(r),r.fail(this.reportError.bind(this)),t.size>e)return r.reject(n("dnd.attachment.file.is.too.large").replace("{0}",this.uploadSize),!0),r;for(var a=["\\","/",'"',":","?","*","<","|",">"],d=0;d<a.length;d++){var h=a[d];if(_.contains(t.name,h))return r.reject(s.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",t.name,h),!0),r}return this.upload=new s.InlineAttach.AjaxUpload({file:t,params:this.getUploadParams(t),url:s.InlineAttach.AjaxPresenter.DEFAULT_URL,progress:function(e){r.notify(e/t.size)},success:function(e,i){void 0!==e.id&&void 0!==e.name?(r.notify(1),r.resolve(e,i,t)):r.reject(e,i,t)},error:function(t,e){r.reject(n("dnd.attachment.internal.server.error"),e)},abort:function(){r.reject(n("dnd.attachment.upload.aborted"),"abort")}}),this.checkSession().then(function(){this.upload.upload()}.bind(this)).fail(function(){r.reject(n("dnd.attachment.unauthorized"),401)}),this.$node.find(".upload-progress-bar__control>*").on("click",function(){this.upload.abort(),r.reject()}.bind(this)),r.done(function(e){o.putAttachment(e.id,t),this.setFileID(e.id),i.trace("jira.issue.dnd.uploaded")}.bind(this)),r},monitorUpload:function(t){t.progress(this.setProgress.bind(this)),t.done(this.setFinished.bind(this)),t.fail(this.setFailed.bind(this))},setProgress:function(t){this.progress=t,this.updateProgress()},updateProgress:function(){var t=this.$node.find(".upload-progress-bar__progress-bar");t.toggleClass("UploadProgressBar_progressUnknown",this.progress===!1),this.progress>=0&&t.find(".upload-progress-bar__bar").css("width",100*this.progress+"%")},setFinished:function(){this.$node.addClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__control button .aui-icon").addClass("aui-iconfont-success").removeClass("aui-iconfont-close-dialog"),this.finished=!0,this.trigger("onFinished")},setFailed:function(){this.$node.addClass("UploadProgressBar_uploadFailed"),this.finished=!0,this.failed=!0,this.trigger("onFailed")},isFinished:function(){return!!this.finished},isFailed:function(){return!!this.failed},isSuccessful:function(){return this.isFinished()&&!this.isFailed()},isImageType:function(){return this.file&&this.file.type&&_.contains(u,this.file.type)},getThumbnailSrc:function(t){return this.isImageType()&&(this.objectURL=window.URL.createObjectURL(t)),this.objectURL||i.Templates.ViewIssue.matchFileIconUrl({baseurl:s.contextPath(),mimetype:t.type})},getThumbnailNode:function(){return this.$node.find(".upload-progress-bar__thumbnail")},getControlNode:function(){return this.$node.find(".upload-progress-bar__control button")},loadThumbnail:function(e){var i=this.getThumbnailSrc(e),s=this.getThumbnailNode();s.addClass(this.objectURL?"upload-progress-bar__thumbnail_image":"upload-progress-bar__thumbnail_icon");var n=t("<img/>").attr("src",i);return n.appendTo(s)},reportError:function(t,e){"object"==typeof t&&t.errorMessage&&(t=t.errorMessage),this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__bar").css("width","100%"),this.showErrorMessage(t,e),this.setAutoDestroy(!1),d("error",{message:t})},showErrorMessage:function(t){this.$node.find(".upload-progress-bar__error-message").text(t)},setIcon:function(t){var e=this.$node.find(".upload-progress-bar__control button .aui-icon");if(!h.some(function(i){return e.toggleClass(i,i==t),i==t}))throw"Unknown icon"},checkSession:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/auth/1/session",contentType:"application/json"}).done(function(){e.resolve()}).fail(function(){this.checkPermissions().done(function(t){e.resolve()}).fail(function(){e.reject()})}.bind(this)),e},checkPermissions:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/api/2/mypermissions",contentType:"application/json",data:t.extend({},this.getEntityParams(),{permissions:"CREATE_ATTACHMENTS"})}).done(function(t){t.permissions.CREATE_ATTACHMENTS.havePermission?e.resolve():e.reject()}).fail(function(){e.reject()}),e}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'js/progressbars/AttachmentsUploadProgressBar.js' */
define("dndattachment/progressbars/AttachmentsUploadProgressBar",["dndattachment/progressbars/UploadProgressBar","jira/flag","jquery","dndattachment/i18n"],function(e,t,a,n){return e.extend({render:function(){this.$node.html(JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar({isImageType:this.isImageType()})).removeClass("upload-progress-bar").addClass("attachments-upload-progress-bar"),this.$node.toggleClass("attachment-content",!this.isImageType()),this.afterRender()},loadThumbnail:function(t){return"gallery"==this.$node.data("viewMode")?e.prototype.isImageType.call(this)?this._super.apply(this,arguments):a(JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:t.type})).appendTo(this.getThumbnailNode()):a(JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype:t.type})).appendTo(this.getThumbnailNode())},showErrorMessage:function(e,s){if("abort"!=s){var o=t.showErrorMsg(n("dnd.attachment.not.uploaded")(this.getFileName()),AJS.escapeHTML(e));a(o).on("aui-flag-close",function(){this.destroy()}.bind(this)),this.bind("onDestroy",function(){o.close()})}},isImageType:function(){return"gallery"==this.$node.data("viewMode")},getControlNode:function(){return this.$node.find(".upload-progress-bar__upload-control span")},getAutoDestroy:function(){return!1}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'templates/IssueDropZone.soy' */
// This file was automatically generated from IssueDropZone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.IssueDropZone = function(opt_data, opt_ignored) {
  return '<div class="issue-drop-zone__target"></div><span class="issue-drop-zone__text"><span class="issue-drop-zone__drop-icon"> </span> ' + soy.$$escapeHtml('Drop files to attach, or') + ' <button type="button" class="issue-drop-zone__button"> ' + soy.$$escapeHtml('browse') + '.</button><input class="issue-drop-zone__file ignore-inline-attach" type="file" multiple /></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.IssueDropZone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.IssueDropZone';
}


JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone = function(opt_data, opt_ignored) {
  return '<div duiType="dndattachment/dropzones/AttachmentsDropZone" class="issue-drop-zone" data-upload-limit="' + soy.$$escapeHtml(opt_data.jiraAttachmentSize) + '" data-upload-size="' + soy.$$escapeHtml(opt_data.uploadLimit) + '" data-upload-size="' + soy.$$escapeHtml(opt_data.uploadLimit) + '"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'templates/AttachmentsDropZone.soy' */
// This file was automatically generated from AttachmentsDropZone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.dropzoneMask = function(opt_data, opt_ignored) {
  return '<span><div class="attachments-drop-zone__dragover-mask" /></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.dropzoneMask.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.dropzoneMask';
}


JIRA.Templates.DnDAttachmentPlugin.dropzone = function(opt_data, opt_ignored) {
  return '<span><div class="attachments-drop-zone__dragover-border"><div class="attachments-drop-zone__dragover-info"><p>' + soy.$$escapeHtml('Drop files to attach them to the issue') + '</p></div></div></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.dropzone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.dropzone';
}


JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask = function(opt_data, opt_ignored) {
  return '<span><div class="attachments-drop-zone__window-dragover-mask" /></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'templates/UploadProgressBar.soy' */
// This file was automatically generated from UploadProgressBar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar = function(opt_data, opt_ignored) {
  return '<div class="upload-progress-bar__thumbnail"> </div><span class="upload-progress-bar__file-name"> </span><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Cancel upload') + '</span></button></div><div class="upload-progress-bar__error-message"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar';
}


JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isImageType) ? '<div class="upload-progress-bar__thumbnail"><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><dl><dt><span class="upload-progress-bar__file-name"> </span></dt><dd class="upload-progress-bar__file-size"> </dd><dd class="upload-progress-bar__upload-control"><span>' + soy.$$escapeHtml('Cancel') + '</span></dd><dd class="upload-progress-bar__error-message"></dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>' : '<div class="attachment-thumb upload-progress-bar__thumbnail"></div><dl><dt class="attachment-title upload-progress-bar__file-name"></dt><dd class="upload-progress-bar__upload-control"><span>' + soy.$$escapeHtml('Cancel') + '</span></dd><dd class="attachment-size"><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></dd><dd class="attachment-author"> </dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>');
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar';
}


JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar = function(opt_data, opt_ignored) {
  return '<div class="temp-upload-progress-bar__parent-container temp-upload-progress-bar__uploading"><div class="temp-upload-progress-bar__container"><div class="upload-progress-bar__thumbnail"/><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__error"><div class="upload-progress-bar__error-indicator"><span class="aui-icon aui-icon-large aui-iconfont-error">' + soy.$$escapeHtml('Upload error') + '</span></div><div class="upload-progress-bar__error-text">' + soy.$$escapeHtml('Upload failed') + '</div></div><div class="upload-progress-bar__upload-mask"/><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog"><div class="button-text" aria-label="' + soy.$$escapeHtml('Cancel upload') + ' "></div><div class="file-name"></div><div class="error-message"></div></span></button></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><div class="upload-progress-bar_file-name-container"><span class="upload-progress-bar__file-name"></span></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar';
}


JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.issueLink) + '">' + soy.$$escapeHtml(opt_data.issueKey) + ' - ' + soy.$$escapeHtml(opt_data.issueSummary) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/path.js' */
define("dndattachment/ctrlv/path",["exports"],function(t){"use strict";var n=function(t){return t.split(/\//).pop()};t.basename=n,t.dirname=function(t){var e=n(t);return t.substring(0,t.length-e.length)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'templates/soy/attach-screenshot-form.soy' */
// This file was automatically generated from attach-screenshot-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Html5Screenshot.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Html5Screenshot == 'undefined') { JIRA.Templates.Html5Screenshot = {}; }


JIRA.Templates.Html5Screenshot.attachScreenshotForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml('Attach Screenshot') + '</h2><form action="ShowAttachScreenshotFormAction.jspa" class="aui" method="post" id="attach-screenshot-form"><input type="hidden" name="id" value="' + soy.$$escapeHtml(opt_data.id) + '"/><input type="hidden" name="projectId" value="' + soy.$$escapeHtml(opt_data.projectId) + '"/><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '"><input type="hidden" name="formToken" value="' + soy.$$escapeHtml(opt_data.formToken) + '"><input type="hidden" name="filetoconvert" value=""><div class="attach-screenshot-padding"><div class="attach-screenshot-container"><div id="attach-screenshot-inner-container"><div class="mod-content"><ul class="item-details"><li><dl><dt>' + soy.$$escapeHtml('Take a screenshot:') + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3ePrtScn\x3c/kbd\x3e') + '</dd>' : '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3e\x26#8963; Ctrl\x3c/kbd\x3e + \x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e + \x3ckbd\x3e\x26#8679; Shift\x3c/kbd\x3e + \x3ckbd\x3e3\x3c/kbd\x3e') + '</dd>') + '</dl></li><li><dl><dt>' + soy.$$escapeHtml('Paste the image:') + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3eCtrl\x3c/kbd\x3e + \x3ckbd\x3ev\x3c/kbd\x3e') + '</dd>' : '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e + \x3ckbd\x3ev\x3c/kbd\x3e') + '</dd>') + '</dl></li></ul></div><input type="text" id="attach-screenshot-fake-input"><div class="attach-screenshot-padding attach-screenshot-padding-inner"><div id="attach-screenshot-image-container" class="attach-screenshot-image-container"><div class="attach-screenshot-placeholder"><div class="mod-content"><ul class="item-details"><li><dl><dt id="attach-screenshot-placeholder-message">' + soy.$$escapeHtml('Your image will be pasted here') + '</dt></dl></li></ul></div></div></div></div><div id=\'attach-max-size\' class="hidden">' + soy.$$escapeHtml(opt_data.maxSize) + '</div></div></div></div><fieldset><div><legend><span>' + soy.$$escapeHtml('Attach Screenshot') + '</span></legend><div id="attach-screenshot-filename-group" class="field-group"><div id="attach-screenshot-progress-container"></div><label for="attachscreenshotname">' + soy.$$escapeHtml('File name') + ' <span class="aui-icon icon-required">' + soy.$$escapeHtml('Required') + '</span></label><input class="text" type="text" id="attachscreenshotname" name="attachscreenshotname" title="File Name" value="' + soy.$$escapeHtml(opt_data.nextScreenshotName) + '"><div class="description">' + soy.$$escapeHtml('A file name to be used as attached image name') + '</div></div></div></fieldset><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-primary" id="attach-screenshot-html5-upload">' + soy.$$escapeHtml('Upload') + '</button><a href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Html5Screenshot.attachScreenshotForm.soyTemplateName = 'JIRA.Templates.Html5Screenshot.attachScreenshotForm';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/html5.js' */
define("dndattachment/ctrlv/html5",["jquery","underscore","dndattachment/integration-register","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/utility","jira/dialog/dialog","jira/dialog/dialog-register","jira/ajs/ajax/smart-ajax","jira/attachment/inline-attach","dndattachment/ctrlv/tracking","exports"],function(e,t,n,i,r,a,o,s,l,c,d){"use strict";d.getFileFromEvent=function(n){var i=new e.Deferred;return r.isImagePasteEvent(n)?i.resolve(t(n.clipboardData.items).filter(function(e){return e.type.indexOf("image")!==-1}).map(function(e){return e.getAsFile()})[0]||t(n.clipboardData.files).filter(function(e){return e.type.indexOf("image")!==-1})[0]):i.reject(),i.promise()},d.REQUEST_TIMEOUT_MILLIS=3e5,d.screenshotFileUpload={},d.screenshotFileUploadUri=null,d.$document=void 0,d.$window=void 0,d.$container=void 0,d.$fakeInput=void 0,d.uploadError=!1,d.uploadErrorMsg="",d.progressView={hidden:!1,progress:0,old:0,progressBarContainer:void 0,progressEl:void 0,container:void 0,options:void 0,staticProgress:void 0,initProgress:function(){this.container=this.buildContainer(),this.progressEl=this.buildProgress(),this.container.append(this.progressEl),this.options={showPercentage:!1,height:"5px"},this.progressBarContainer=e("#attach-screenshot-progress-container"),this.progressBarContainer.empty(),this.progressBarContainer.append(this.container),this.staticProgress=this.container,this.hidden=!0},finish:function(){this.value(100)},progressHandler:function(e){var t=Math.round(100*e.loaded/e.total);this.value(t)},value:function(e){e>100?e=100:e<0&&(e=0),this.hidden&&(this.progressEl.show(),this.hidden=!1),this.old!==e&&(this.progressEl.progressBar(e,this.options),e>=100&&this.progressEl.fadeOut(),this.old=e)},buildContainer:function(){return e("<div>").addClass("file-progress")},buildProgress:function(){return e("<div>").attr("id","attach-screenshot-upload-progress")}},d.dialogView={pasteCatcher:{},presenter:void 0,getMaxSize:function(){return e("#attach-max-size").text()},getFileSize:function(){return e.isPlainObject(this.presenter.screenshotFileUpload)&&t.isEmpty(this.presenter.screenshotFileUpload)?0:this.presenter.screenshotFileUpload.size||this.presenter.screenshotFileUpload.byteLength||this.presenter.screenshotFileUpload.length},cleanGeneralErrors:function(){e("#error-attach-screenshot-image").closest(".field-group").remove()},cleanFileErrors:function(){e("#error-attach-screenshot-filename").remove()},displayErrors:function(e){"compatibility"in e&&r.showErrorMsg("",e.compatibility),"fileName"in e&&r.showErrorMsg("",e.fileName),"fileUpload"in e&&r.showErrorMsg("",e.fileUpload)},appendBlobImage:function(e){var t=window.URL||window.webkitURL,n=t.createObjectURL(e);this.presenter.screenshotFileUpload=e,this.createImage(n)},createImage:function(n){var i=new Image;i.onload=function(){},i.src=n,this.presenter.screenshotToUpload=i;var r=e(i);r.addClass("attach-screenshot-pasted-image");var a=e("#attach-screenshot-image-container");a.empty(),a.append(r),this.presenter.$fakeInput.focus(),t.defer(function(){d.imageCreatedHandler()})},checkInput:function(){var e,t=d.dialogView.pasteCatcher.childNodes[0];return t&&("IMG"===t.tagName&&0===t.src.indexOf("data:")&&(e=t.src),d.dialogView.pasteCatcher.innerHTML=""),e||d.$fakeInput.focus(),e},onPaste:function(e){d.dialogView.cleanFileErrors(),d.dialogView.cleanGeneralErrors(),r.isImagePasteEvent(e)?d.getFileFromEvent(e).then(function(e){this.appendBlobImage(e)}.bind(this)):setTimeout(function(){var e=this.checkInput();e&&(d.screenshotFileUpload=i.decodeBase64DataUri(e),d.dialogView.createImage(e))}.bind(this),0)},getFakeInput:function(){return e("#attach-screenshot-fake-input")},getContainer:function(){return e("#attach-screenshot-image-container")},getIssueKey:function(){return e("input[name='id']").val()},getProjectId:function(){return e("input[name='projectId']").val()},getDocument:function(){return e(document)},getWindow:function(){return e(window)},getFileNameInput:function(){return e("#attachscreenshotname")},hasPngExtension:function(e){var t=/\.png$/i;return t.test(e)},setFileToConvert:function(t){e("input[name='filetoconvert']").val(t)},buildPasteCatcher:function(){if(document.getElementById("attach-screenshot-form")){var e=document.createElement("div");return e.setAttribute("contenteditable","true"),e.style.width=0,e.style.height=0,e.style.position="absolute",e.style.top="-5000px",document.getElementById("attach-screenshot-form").appendChild(e),e}},_getFormSubmits:function(){return e("#attach-screenshot-form").find("button.aui-button")},disable:function(){return this._getFormSubmits().attr("disabled","disabled"),this},enable:function(){return this._getFormSubmits().removeAttr("disabled"),this},isEnabled:function(){return this.isVisible()&&!this._getFormSubmits().attr("disabled")},isVisible:function(){return e("#attach-screenshot-form").length>0},initDialog:function(e){this.pasteCatcher={},this.presenter=e,this.pasteCatcher=this.buildPasteCatcher()}},d.initScreenshotPasteHandler=function(){var e=d.dialogView;d.screenshotFileUpload={},d.resetUploadErrors(),d.dialogView.initDialog(d),d.$document=e.getDocument(),d.$window=e.getWindow(),d.$container=e.getContainer(),d.$fakeInput=e.getFakeInput(),d.bindOnce(d.$container,"click",d.setFocusOnClickHandler),d.bindOnce(d.$fakeInput,"focus",d.showFocusOnFieldHandler),d.bindOnce(d.$fakeInput,"blur",d.hideFocusOnFieldHandler),d.bindOnce(d.$fakeInput,"keydown",d.keyDownHandler),r.browserIsSupported()?d.bindOnce(d.$window,"paste",d.pasteHandler):e.displayErrors({compatibility:AJS.format("Your browser is not supported. Consider using an alternative supported browser such as {0}Google Chrome{1} or {2}Firefox{3}.",'<a href="//www.google.com/chrome/browser/">',"</a>",'<a href="//www.mozilla.org/firefox/">',"</a>")})},d.resetUploadErrors=function(){d.uploadError=!1,d.uploadErrorMsg=void 0},d.setUploadError=function(e){d.uploadError=!0,d.uploadErrorMsg=e},d.bindOnce=function(e,t,n){e.unbind(t,n),e.bind(t,n)},d.showFocusOnFieldHandler=function(){d.$container.addClass("focus")},d.hideFocusOnFieldHandler=function(){d.$container.addClass("focus")},d.setFocusOnClickHandler=function(){d.$fakeInput.focus()},d.pasteHandler=function(e){d.dialogView.isEnabled()&&(e=r.normalizePasteEvent(e),d.dialogView.onPaste(e))},d.polyPasteHandler=function(e,t,n){d.dialogView.isEnabled()&&(d.screenshotFileUpload={length:-1},d.screenshotFileUploadUri=t,d.dialogView.createImage(n))},d.keyDownHandler=function(e){r.isKeyPasteEvent(e)&&d.dialogView.pasteCatcher.focus&&d.dialogView.pasteCatcher.focus()},d.imageCreatedHandler=function(){d.doAjaxUpload(this.dialogView.getIssueKey(),this.dialogView.getFileNameInput().val())},d.getMimeType=function(){return"image/png"},d.createData=function(){return d.screenshotFileUpload},d.clipboardDataIsEmpty=function(e){return null==window.clipboardData&&!(e&&e.clipboardData&&e.clipboardData.types&&e.clipboardData.types.length>0)},d.validateFileSize=function(e,t,n){var t=t||d.dialogView.getFileSize(),n=n||d.dialogView.getMaxSize();if(t>n){var i=l.Text.fileSize(n,t);e.fileUpload=AJS.format("Screenshot is too large to attach. Attachment is {0} but the largest allowed attachment is {1}.",i[1],i[0])}},d.validateFormData=function(n,i){var a={};return e.isPlainObject(n)&&t.isEmpty(n)&&(a.fileUpload="Please paste the image you wish to upload"),d.validateFileSize(a),d.uploadError&&(a.fileUpload="The error occurred during image upload - you will need to try the pasting image again. Sorry for the inconvenience."),""==i&&(a.fileName="You must specify a filename of the image."),r.isValidFileName(i)||(a.fileName="Filename must not contain the characters \'\\\', \'/\', \'\"\', \':\', \'?\', \'*\', \'\u003c\', \'|\', \'\u003e\', \'!\'"),a},d.doAjaxUpload=function(i,r){d.dialogView.disable();var a={};if(d.validateFileSize(a),!t.isEmpty(a))return d.dialogView.displayErrors(a),void d.dialogView.enable();var o=d.createData(),l=d.getMimeType(),c=e("#attach-screenshot-form").find("input[name='formToken']").attr("value"),u=encodeURIComponent(this.dialogView.getProjectId()),p=AJS.contextPath()+"/rest/internal/2/AttachTemporaryFile?size="+d.dialogView.getFileSize()+"&filename="+encodeURIComponent(r)+"&atl_token="+encodeURIComponent(atl_token())+"&issueId="+encodeURIComponent(this.dialogView.getIssueKey())+(c?"&formToken="+encodeURIComponent(c):"");d.resetUploadErrors();var h=n.getTemporaryBinaryUploadHandler(),g=h?h(u,o,r,encodeURIComponent(c)):d.executeAjaxUpload(o,p,l);g.progress(function(e){"init"==e&&d.progressView.initProgress()}).done(function(e){"string"==typeof e&&(e=JSON.parse(e)),d.dialogView.setFileToConvert(e.id)}).fail(function(e,t,n,i){var r;if("abort"===i.statusText)r="The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation.";else if(i.hasData){var a=JSON.parse(i.data);r=a.errorMessage?a.errorMessage:s.buildSimpleErrorContent(i,{alert:!1})}d.setUploadError(r),d.dialogView.displayErrors({fileUpload:r})}).always(function(){var t=e.Deferred();t.resolve(),t.then(function(){d.dialogView.enable(),d.progressView.finish()})}).progress(function(e){"init"!=e&&d.progressView.progressHandler(e)})},d.executeAjaxUpload=function(t,n,i){c.trigger("attach.screenshot.html5.jira.upload");var r=e.Deferred(),a=s.makeRequest({type:"POST",url:n,contentType:i,processData:!1,data:t,timeout:d.REQUEST_TIMEOUT_MILLIS,success:r.resolve.bind(r),error:r.reject.bind(r),xhr:function(){var t=e.ajaxSettings.xhr();return r.notify("init"),t.upload.addEventListener("progress",r.notify.bind(r)),t}});return r.always(function(){e.ajaxSettings.xhr().removeEventListener("progress",d.progressView.progressHandler),e(o.attachScreenshotDialog).off("Dialog.hide",a.abort)}),e(o.attachScreenshotDialog).one("Dialog.hide",a.abort),r.promise()},d.show=function(){var n=new e.Deferred,i=e(".issueaction-attach-screenshot-html5");return null!=a.current?n.reject().promise():0==i.length?n.reject().promise():(t.defer(function(){i.trigger("click")}),e(document).on("dialogContentReady",function(e,t){t===o.attachScreenshotDialog&&d.dialogView.isEnabled()?n.resolve(t):n.reject()}),e(document).on("ajaxComplete.jira.screenshot.dialog",function(e,t,r){r.url.indexOf(i.attr("href"))>-1&&setTimeout(function(){n.isResolved()||n.reject()},1e3)}),n.always(function(){e(document).off("ajaxComplete.jira.screenshot.dialog")}),n.promise())}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/issue-paste.js' */
define("dndattachment/ctrlv/issue-paste",["jquery","dndattachment/ctrlv/trace","dndattachment/ctrlv/tracking","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/base64decode","jira/dialog/dialog","jira/util/events","dndattachment/util/events/types","exports"],function(t,e,n,a,i,r,o,u,c,s){"use strict";function l(t,e){e.stateName=t;var n=function(){var n=e.apply(null,arguments);return n.stateName=t,n};return n.stateName=t,n}function d(t,e,n){return l(t,function(){var a=setTimeout(function(){f(_)},n),i=e.apply(null,arguments),r=function(t,e){var n=i(t,e);if(n)return clearTimeout(a),n};return r.stateName=t,r})}function f(t,e){if(f.eventQueue)return void f.eventQueue.push({type:t,object:e});for(f.eventQueue=[{type:t,object:e}];f.eventQueue.length>0;){var n=f.eventQueue.splice(0,1)[0],a=A(n.type,n.object);a&&(A=a)}delete f.eventQueue}var g=0,E=1,v=2,m=3,p=4,h=5,I=6,T=7,w=8,_=9,N=l("idle",function(){function i(e){if(!t(e.target).is(":input:not(.wiki-textfield, #summary)")&&!a.isContentEditable(e.target))return!0}return function(r,o){if(r==g&&a.isKeyPasteEvent(o)){if(a.browserIsNativePaste()||!i(o)||!a.browserIsSupported())return;return n.trigger("attach.screenshot.html5.catchClipboard"),new D(o)}if(r==E){if(a.isImagePasteEvent(o))return n.trigger("attach.screenshot.html5.handlePaste"),i(o)?(t(o.target).is(":input.wiki-textfield")&&o.preventDefault(),new L(o)):void e("jira/attach-images-plugin/pasteIgnored");e("jira/attach-images-plugin/pasteIgnoredNotImage")}}}),D=d("catchClipboard",function(e){function n(){o.remove()}var i=document.activeElement;e.selectionStart=e.target.selectionStart,e.selectionEnd=e.target.selectionEnd;var o=t('<div contenteditable="true" class="attach-screenshot-paste-catcher"></div>').appendTo("body");return o.focus(),t(i).is(":focusable:input,:aui-focusable:input")&&setTimeout(function(){i.focus()}),function(t,u){if(t==E){if(a.isImagePasteEvent(u))return n(),u.target=i,new L(u);if(a.isHtmlImagePasteEvent(u))return n(),u.target=i,new b(u);if(a.isTextPasteEvent(u)){n();var c=a.getTextPasteContent(u);return a.insertToInput(c,e.target,e.selectionStart,e.selectionEnd),u.preventDefault(),new N}}if(t==_){n();var s=o.find(">img");if(s.is(":only-child")){var l=s.attr("src");if(0===l.toLowerCase().indexOf("http"))return N();var d=r.decodeBase64DataUri(l),f=new Blob([d],{type:"image/png"});return new O(f,e)}var g=a.getTextContent(o[0]);return a.insertToInput(g,e.target,e.selectionStart,e.selectionEnd),N()}}}),b=l("imageLoading",function(t){var e=a.getHtmlImagePaste(t);return e?a.loadImage(e).then(function(t){f(p,t)},f.bind(null,h)):f(h),function(e,n){if(e==p){var i=a.convertImageToBlob(n);return i?new O(i,t):new N}if(e==_||e==h)return new N}}),L=d("fileLoading",function(t){return i.getFileFromEvent(t).done(function(t){f(v,t)}).fail(function(){f(m)}),function(e,n){return e==v?new O(n,t):e==m||e==_?new N:void 0}},1e3),O=l("attachImage",function(e,n){var i=n.target,r=a.generateFileName()+".png",o=a.convertBlobToImage(e,r);return u.trigger(c.ATTACHMENT_FOR_PAGE_RECEIVED,{files:[o],isWikiTextfieldFocused:a.isWikiTextfield(t(i)),wikiTextfield:i,isPaste:!0,successCallback:function(){f(I)}}),function(t,e){return new N}}),A=new N;s._getStateMap=function(){return{events:{EVENT_WINDOW_KEYDOWN:g,EVENT_WINDOW_PASTE:E,EVENT_FILE_LOADED:v,EVENT_FILE_LOAD_ERROR:m,EVENT_IMAGE_LOADED:p,EVENT_IMAGE_LOAD_ERROR:h,EVENT_DIALOG_LOADED:I,EVENT_DIALOG_CLOSED:T,EVENT_DIALOG_CANCELED:w,EVENT_TIMEOUT:_},states:{StateIdle:N,StateCatchClipboard:D,StateImageLoading:b,StateFileLoading:L,StateAttachImage:O}}},s.initIssuePaste=function(){t(window).on("keydown",function(t){f(g,t)}),t(window).on("paste",function(t){f(E,a.normalizePasteEvent(t))}),u.bind("Dialog.hide",function(t,e,n){n?f(w,e):f(T,e)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/trace.js' */
define("dndattachment/ctrlv/trace",[],function(){"use strict";return function(){return JIRA.trace.apply(void 0,arguments)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/tracking.js' */
define("dndattachment/ctrlv/tracking",["exports"],function(t){"use strict";t.trigger=function(t,n){AJS.trigger("analytics",{name:t,data:n||{}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/executor.js' */
define("dndattachment/ctrlv/executor",["jquery","jira/util/events","dndattachment/ctrlv/html5","dndattachment/upload/handler","exports"],function(e,t,n,r,a){a.register=function(){var a={name:"JIRA Ctrl+V attachment executor",weight:5,isValid:function(e,t){return!!t.isPaste},processFiles:function(r,a){var c=e.Deferred();return n.show().done(function(n){var a=e("#attach-screenshot-placeholder-message"),i=e.Event("paste");i.clipboardData={files:r},a.focus(),setTimeout(function(){a.trigger(i)}),t.bind("Dialog.hide",function(e,t,n){n?c.reject():c.resolve([t.find("#attachscreenshotname").val()+".png"])})}),c}};r.registerExecutor(a)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/initialize.js' */
define("dndattachment/ctrlv/initialize",["jquery","underscore","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/issue-paste","dndattachment/ctrlv/tracking","dndattachment/ctrlv/executor","jira/dialog/dialog-register","jira/dialog/form-dialog","exports"],function(t,e,n,i,a,r,o,c,s,d){"use strict";d.init=function(){var n=s.extend({options:{}});JIRA.ScreenshotDialog=n,a.initIssuePaste(),t(document).ready(function(){var a=t.Deferred();a.resolve(),c.attachScreenshotDialog=new n({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",isIssueDialog:!0,onContentRefresh:function(){this.$form.bind("before-submit",function(n){var a=i.validateFormData(i.screenshotFileUpload,t.trim(i.dialogView.getFileNameInput().val()));return 0==i.dialogView.getFileSize()?(n.preventDefault(),!1):!!e.isEmpty(a)||(i.dialogView.displayErrors(a),n.preventDefault(),!1)})},delayShowUntil:function(){return a}}),t(document).bind("dialogContentReady",function(t,e){e===c.attachScreenshotDialog&&null!==document.getElementById("attach-screenshot-form")&&(r.trigger("attach.screenshot.html5.contentReady"),i.initScreenshotPasteHandler())}),t(document).ready(function(){t(document).on("click","#attach-screenshot-html5",function(){r.trigger("attach.screenshot.html5.display")})})}),o.register()}}),require(["dndattachment/ctrlv/initialize","jquery"],function(t,e){"use strict";e(function(){t.init()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-form-drop-zone', location = 'js/dropzones/FormDropZone.js' */
define("dndattachment/dropzones/FormDropZone",["dndattachment/Parser","dndattachment/integration-register","dndattachment/upload/handler","dndattachment/dropzones/IssueDropZone","jquery","dndattachment/aui","dndattachment/i18n","dndattachment/JIRA","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/util/events","underscore"],function(e,t,n,o,i,r,a,d,s,h,l,c){var p=o.extend({eventGroup:"formdropzone",init:function(){this._super.apply(this,arguments),this.progressBars=[],this.bind("uploadFinished",this.onUploadFinished.bind(this)),this.$containerNode=this.getContainerNode(),this.$formNode=this.$node.parents("form"),this.formToken=this.$formNode.find('input[name="formToken"]').attr("value"),this.projectId=this.$formNode.find("*[name=pid]").val(),this.$inputNode=i('<input name="dnd-dropzone" type="hidden" />').insertAfter(this.$node),this.$fieldNode=this.$node.parents(".field-group"),this.$fieldNode.addClass("long-field"),this.connectContainer()},onUploadFinished:function(e,t){var n=i('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",t.fileID).attr("id","filetoconvert-"+t.fileID).prop("checked",!0).insertBefore(t.$node);t.bind("onBeforeDestroy",function(){n.prop("checked",!1).prop("value",null)}),setTimeout(function(){t.$node.addClass("upload-progress-bar__upload-ready"),t.setIcon("aui-iconfont-close-dialog")},1e3),d.trace("jira.issue.dnd.uploadfinished")},commitUpload:function(e){return this.queueEvent("commitUpload",{count:e.length}),new i.Deferred},getContainerNode:function(){return this.$node.parents(".jira-dialog-content")},connectContainer:function(){if(this.$dragoverMask=i('<div class="attach-files-drop-zone__dragover-mask" />'),this.$dragoverMask.appendTo(this.$containerNode),this.$body=i(document.body),this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.onBodyDragOverDropHandler=this.onBodyDragOverDrop.bind(this),this.$containerNode.on("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),this.$body.on("dragover drop",this.onBodyDragOverDropHandler),this.onBeforeSubmitHandler=this.onBeforeSubmit.bind(this),this.$formNode.on("before-submit",this.onBeforeSubmitHandler),this.onContentAddedHandler=this.onContentAdded.bind(this),d.bind(d.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),l.bind("Dialog.hide",this.onDialogHide.bind(this)),r.dialog2&&r.dialog2.on("hide",this.onDialogHide.bind(this)),this.projectId){this.externalTemporaryAttachmentCreator=t.getTemporaryAttachmentCreator(this.projectId,this.formToken,this.$node[0]);var e=t.getConnectedTemporaryBinaryUploadHandler();"function"==typeof e&&(this.externalPasteUploadHandler=e(this.projectId,this.formToken,this.$node[0]));var n=t.getTemporaryAttachmentZoneCreator();if("function"==typeof n){var o={};this.externalZone=n(this.projectId,this.formToken,this.$node[0],this.$containerNode[0],{onFileUploadStarted:function(e){var t=new i.Deferred;o[e.id]=t,this.queueTask(t.promise())}.bind(this),onFileUploadFinished:function(e){o[e.id].resolve()}})}}},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},browseFilesAndUpload:function(e,t){if("function"==typeof this.externalTemporaryAttachmentCreator&&n.isDefaultExecutor({})){var o={},r=c.extend({},t,{onFileUploadStarted:function(e){var n=new i.Deferred;o[e.id]=n,this.queueTask(n.promise()),t&&t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e)}.bind(this),onFileUploadFinished:function(e){o[e.id].resolve(),t&&t.onFileUploadFinished&&t.onFileUploadFinished.call(null)}});return this.externalTemporaryAttachmentCreator.call(null,e,r),!0}this.browseLinkHandler.call(this,e)},disconnectContainer:function(){this.externalZone&&this.externalZone.deactivate(),n.disconnectCurrentDropZone(this),this.$dragoverMask.remove(),this.$containerNode.removeClass("attach-files-drop-zone__dragover"),this.$containerNode.off("dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.$formNode.off("before-submit",this.onBeforeSubmitHandler),d.unbind(d.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),l.unbind("Dialog.hide",this.onDialogHide.bind(this)),r.dialog2&&r.dialog2.off("hide",this.onDialogHide.bind(this))},isAttached:function(){return i.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},onDialogHide:function(){this.$body.off("dragover drop",this.onBodyDragOverDropHandler)},onBodyDragOverDrop:function(e){e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none")},onDragOverDrop:function(e){return this.isAttached()?void(h.dragEventContainsFiles(e)&&(e.preventDefault(),e.stopPropagation(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),this.$containerNode.addClass("attach-files-drop-zone__dragover"),"dragenter"===e.type&&this.externalZone&&(n.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"===e.type&&(this.$containerNode.removeClass("attach-files-drop-zone__dragover"),i(document).trigger("dropHandled"),e.isPasteEvent?this.externalPasteUploadHandler?this.externalPasteUploadHandler(e.dataTransfer.files[0]):this.doAjaxUpload(e.dataTransfer):this.externalZone&&n.isDefaultExecutor({})?this.externalZone.drop():this.doAjaxUpload(e.dataTransfer)))):void this.disconnectContainer()},doAjaxUpload:function(e){var t=new s(e);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))},onDragLeave:function(){this.$containerNode.removeClass("attach-files-drop-zone__dragover")},onBeforeSubmit:function(e){if(this.isDirty){e.preventDefault();var t={};t[this.$inputNode.attr("name")]=a("dnd.attachment.upload.in.progress"),d.applyErrorsToForm(this.$formNode,t),this.$formNode.find(".error").toArray().some(function(e){e.scrollIntoView()})}},markDirty:function(e){o.prototype.markDirty.apply(this,arguments),this.isDirty=e,d.trace(e?"jira.issue.dnd.isdirty":"jira.issue.dnd.isclear")},handleNewProgressBar:function(e){this.progressBars.push(e),e.bind("onBeforeDestroy",c.bind(function(){this.trigger("progressBarOnBeforeDestroy",e),this.progressBars=c.filter(this.progressBars,function(t){return t!==e}),0===this.progressBars.length&&this.trigger("allUploadsCancelled")},this)),e.bind("onDestroy",c.bind(function(){this.trigger("progressBarDestroyed")},this)),e.bind("onFinished",c.bind(function(){this.trigger("progressBarFinished")},this)),e.bind("onFailed",c.bind(function(){this.trigger("progressBarFailed")},this)),this.trigger("progressBarStarted")},filesStillUploading:function(){return c.filter(this.progressBars,function(e){return!e.isFinished()}).length>0},anyFilesFailed:function(){return c.filter(this.progressBars,function(e){return e.isFailed()}).length>0}});return p});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'js/dropzones/AttachFilesDropZone.js' */
define("dndattachment/dropzones/AttachFilesDropZone",["dndattachment/dropzones/FormDropZone","jquery"],function(e,n){var t=e.extend({eventGroup:"attachfiledropzone",init:function(){this._super.apply(this,arguments),this.bind("progressBarInserted",function(e,t){var r=new n.Deferred;this.queueTask(r),t.result.done(r.resolve.bind(r)),t.bind("onBeforeDestroy",function(){r.resolve()})}.bind(this))},checkMarkDirty:function(){this.pendingQueue.length<=1&&this.markDirty(!1)}});return t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'js/dropzones/CreateIssueDropZone.js' */
define("dndattachment/dropzones/CreateIssueDropZone",["jquery","dndattachment/dropzones/FormDropZone"],function(e,n){var r=n.extend({eventGroup:"createissuedropzone",progressBarType:"dndattachment/progressbars/ProjectUploadProgressBar",getContainerNode:function(){return e(this.$node.parents(".jira-dialog-content")[0]||this.$node.parents("form#issue-create").parents(".aui-page-panel-content")[0])},handleNewProgressBar:function(e){this._super.apply(this,arguments),e.bind("onDestroy onFinished",_.bind(function(){if(!this.filesStillUploading()){var e={};e[this.$inputNode.attr("name")]="",JIRA.applyErrorsToForm(this.$formNode,e)}},this))}});return r});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'js/progressbars/ProjectUploadProgressBar.js' */
define("dndattachment/progressbars/ProjectUploadProgressBar",["jquery","dndattachment/progressbars/UploadProgressBar"],function(e,a){return a.extend({getProjectId:function(){return this.$node.parents("form").find("*[name=pid]").val()},getUploadParams:function(e){var t=a.prototype.getUploadParams.apply(this,arguments);return this.getProjectId()&&(t.projectId=this.getProjectId()),t},loadThumbnail:function(a){if(this.isImageType())return this._super.apply(this,arguments);var t=this.getThumbnailNode();t.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui");var r="aui-iconfont-devtools-file",s="File";"object"==typeof a&&(r=JIRA.Templates.ViewIssue.matchFileClass({mimetype:a.type}),s=JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype:a.type}));var o=e('<span class="aui-icon aui-icon-large"/>').addClass(r).attr("title",s);return o.appendTo(t)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'templates/AttachFilesDropZone.soy' */
// This file was automatically generated from AttachFilesDropZone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.AttachFilesDropZone = function(opt_data, opt_ignored) {
  return '<div duiType="dndattachment/dropzones/AttachFilesDropZone" class="issue-drop-zone" data-upload-limit="' + soy.$$escapeHtml(opt_data.jiraAttachmentSize) + '" data-upload-size="' + soy.$$escapeHtml(opt_data.uploadLimit) + '"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.AttachFilesDropZone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.AttachFilesDropZone';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'templates/CreateIssueDropZone.soy' */
// This file was automatically generated from CreateIssueDropZone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.CreateIssueDropZone = function(opt_data, opt_ignored) {
  return '<div duiType="dndattachment/dropzones/CreateIssueDropZone" class="issue-drop-zone" data-upload-limit="' + soy.$$escapeHtml(opt_data.jiraAttachmentSize) + '" data-upload-size="' + soy.$$escapeHtml(opt_data.uploadLimit) + '"></div>' + ((opt_data.description) ? '<div class="description">' + soy.$$escapeHtml(opt_data.description) + '</div>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.CreateIssueDropZone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.CreateIssueDropZone';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:drag-and-drop-attachment-javascript-init', location = 'js/initIssueDropZone.js' */
require(["dndattachment/Parser","jquery","dndattachment/dropzones/IssueDropZone","dndattachment/upload/handler","dndattachment/upload/default/executor","dndattachment/aui","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,n,a,o,i,r,d,s){function u(n,o){var i=n.find(".field-group.file-input-list");if(0!=i.size()&&!(i.find('*[duiType*="'+o+'"]').length>0)){var d=i.find("input[name=filetoconvert]:checked").map(function(t,n){return r.getAttachment(n.value,e(n).siblings("label").text())}).toArray(),u=i.find(".description:last-child").html();i.empty();var c=e(JIRA.Templates.DnDAttachmentPlugin[o]({uploadLimit:s.format(m),jiraAttachmentSize:m,description:u}));t.parse(c.appendTo(i)).then(function(t){null!=t&&(t.loadAttachments(d),a.setCurrentDropZone(t))})}}function c(t,n){var o=function(){u(t.$popupContent,n)};t.$popup&&t.$popup.is(":visible")?o():t.onContentReady(o),e(t).bind("Dialog.hide",function(){a.disconnectCurrentDropZone()})}function l(n){var o=n&&"attachmentmodule"==n.attr("id")&&e(".mod-content:not(.issue-drop-zone)",n);if(o&&o.size()>0){if(0==n.find("#add-attachments-link").length)return;o.addClass("issue-drop-zone");var i=e(JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone({uploadLimit:s.format(m),jiraAttachmentSize:m}));t.parse(i.prependTo(o)).then(function(t){p&&p.disconnectContainer(),p=t,a.setAttachmentDropZone(t)})}}if(n.prototype.isSupportedBrowser()){var p,m=d.getWRM("upload-limit"),h=function(){JIRA.Dialogs.attachFile&&c(JIRA.Dialogs.attachFile,"AttachFilesDropZone");var t=["create-issue-dialog","create-subtask-dialog","edit-issue-dialog"],n=function(e,n,a){_.contains(t,n.attr("id"))&&c(a,"CreateIssueDropZone")};e(i).on("Dialog.show",n),JIRA.Dialog.current&&n(null,JIRA.Dialog.current.$popup,JIRA.Dialog.current),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(t,e,n){u(e,"CreateIssueDropZone"),l(e)});var r=e("form#issue-create, form#issue-edit");r.size()>0&&u(r,"CreateIssueDropZone"),a.initialize(),a.registerExecutor(o),l(e("#attachmentmodule"));var d="issue-drop-zone-document__dragover";e(document).on("dragover dragenter",function(){e("body").addClass(d)}),e(document).on("dragleave drop dropHandled",function(){e("body").removeClass(d)})};e.isReady?h():i.$(h),e.event.props.push("dataTransfer")}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:marionette', location = 'lib/backbone/marionette/backbone.marionette-amd.js' */
define("jira/view-issue-plugin/lib/marionette",["backbone","underscore","atlassian/libs/factories/marionette-2.1.0"],function(e,i,n){return n(i,e)});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'viewissue/attachment/attachment-contents-view.js' */
define("jira/view-issue-plugin/attachment/attachment-contents-view",["jira/view-issue-plugin/lib/marionette"],function(t){"use strict";return t.ItemView.extend({template:JIRA.Templates.ViewIssue.attachmentContents,initialize:function(t){this.attachment=t.attachment,this.issueId=t.issueId,this.baseUrl=t.baseUrl},serializeData:function(){return{attachment:this.attachment,issueId:this.issueId,baseUrl:this.baseUrl}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'viewissue/attachment/attachment-contents-view-alias.js' */
define("jira/attachment/attachment-contents-view",["jira/view-issue-plugin/attachment/attachment-contents-view"],function(t){return t});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'viewissue/attachment/attachment-element.js' */
define("jira/view-issue-plugin/attachment/attachment-element",["jira/util/logger","wrm/context-path","jquery","jira/skate","jira/viewissue/slideshow/slideshow-configuration","jira/view-issue-plugin/lib/marionette","jira/attachment/attachment-contents-view"],function(t,e,n,i,a,o,r){"use strict";function c(i){var a=n(i),c=a.data("attachment-id"),s=a.data("issue-id"),u=e()+"/rest/api/2/attachment/"+c+"/expand/human",l=n.get(u);l.done(function(t){var n=new o.Region({el:a.find(".zip-contents").first()}),i=new r({attachment:t,issueId:s,baseUrl:window.location.protocol+"//"+window.location.host+e()});n.show(i)}),l.error(function(e){t.error(e)})}return i("js-file-attachment",{type:i.type.CLASSNAME,attached:function(e){n(e).find(".expander").one("expandBlock",function(){c(e)}),t.trace("jira.plugins.viewissue.expansion.wired")},events:{"click .attachment-title":function(t,e){if(1===e.which){var n=t.getThumbnailImage();n.length&&(n.click(),e.preventDefault())}}},prototype:{getThumbnailImage:function(){var t=this;return n(".gallery",t)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'viewissue/attachment/attachment.soy' */
// This file was automatically generated from attachment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ViewIssue.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ViewIssue == 'undefined') { JIRA.Templates.ViewIssue = {}; }


JIRA.Templates.ViewIssue.attachmentContents = function(opt_data, opt_ignored) {
  var output = '<ol class="archive-expanded">';
  var entries__soy4 = opt_data.attachment.entries;
  var entryList5 = entries__soy4;
  var entryListLen5 = entryList5.length;
  for (var entryIndex5 = 0; entryIndex5 < entryListLen5; entryIndex5++) {
    var entryData5 = entryList5[entryIndex5];
    output += JIRA.Templates.ViewIssue.attachmentArchiveEntry(soy.$$augmentMap(opt_data, {entry: entryData5}));
  }
  output += ((opt_data.attachment.totalEntryCount == 0) ? '<li><div class="aui-message aui-message-warning" style="display: inline-block"><p>' + soy.$$escapeHtml('This archive is either corrupt, empty or not an archive at all') + '.</p></div></li>' : '') + '</ol><span class="zip-contents-trailer">' + ((entries__soy4.length < opt_data.attachment.totalEntryCount) ? '<span class="limit-info">' + soy.$$escapeHtml(AJS.format('Showing {0} of {1} items',entries__soy4.length,opt_data.attachment.totalEntryCount)) + ' </span>' : '');
  var attachmentUrl__soy20 = soy.$$escapeHtml(opt_data.baseUrl) + '/secure/attachment/' + soy.$$escapeHtml(opt_data.attachment.id) + '/';
  output += '<a href="' + soy.$$escapeHtml(attachmentUrl__soy20) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.attachment.mediaType) + ':' + soy.$$escapeHtml(opt_data.attachment.name) + ':' + soy.$$escapeHtml(attachmentUrl__soy20) + '">' + soy.$$escapeHtml('Download Zip') + '</a></span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.attachmentContents.soyTemplateName = 'JIRA.Templates.ViewIssue.attachmentContents';
}


JIRA.Templates.ViewIssue.attachmentArchiveEntry = function(opt_data, opt_ignored) {
  var output = '';
  var entryUrl__soy37 = soy.$$escapeHtml(opt_data.baseUrl) + '/secure/attachmentzip/unzip/' + soy.$$escapeHtml(opt_data.issueId) + '/' + soy.$$escapeHtml(opt_data.attachment.id) + '%5B' + soy.$$escapeHtml(opt_data.entry.index) + '%5D/';
  var entryDownloadUrl__soy49 = soy.$$filterNoAutoescape(opt_data.entry.mediaType) + ':' + soy.$$filterNoAutoescape(opt_data.entry.path) + ':' + soy.$$filterNoAutoescape(entryUrl__soy37);
  output += '<li class="archive-entry" data-entry-index="' + soy.$$escapeHtml(opt_data.entry.index) + '"><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(entryUrl__soy37) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(entryDownloadUrl__soy49) + '"' + JIRA.Templates.ViewIssue.tagFilePreview({id: opt_data.attachment.id + '/' + opt_data.entry.index, title: opt_data.entry.label, mimeType: opt_data.entry.mediaType}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype: opt_data.entry.mediaType, baseurl: opt_data.baseUrl}) + '</a></div><a class="file-path" href="' + soy.$$escapeHtml(entryUrl__soy37) + '" title="' + soy.$$escapeHtml(opt_data.entry.path) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(entryDownloadUrl__soy49) + '"' + JIRA.Templates.ViewIssue.tagFilePreview({id: opt_data.attachment.id + '/' + opt_data.entry.index, title: opt_data.entry.label, mimeType: opt_data.entry.mediaType}) + '>' + soy.$$escapeHtml(opt_data.entry.label) + '</a><span class="attachment-size">' + soy.$$escapeHtml(opt_data.entry.size) + '</span></li>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.attachmentArchiveEntry.soyTemplateName = 'JIRA.Templates.ViewIssue.attachmentArchiveEntry';
}
;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:draggableattachment', location = 'viewissue/initDraggableAttachment.js' */
define("jira/view-issue-plugin/init-draggable-attachment",["jquery"],function(a){a.event.props.push("dataTransfer"),a("[draggable=true]").live("dragstart",function(e){var t=a(this),i=e.dataTransfer;i.effectAllowed="copy",i.dropEffect="copy",i.setData("DownloadURL",t.data("downloadurl")),t.find("img").length||i.setDragImage(t.closest("li").find("img:visible")[0],8,8)})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:analytics', location = 'viewissue/analytics.js' */
define("jira/view-issue-plugin/analytics",["jquery"],function(i){var n=i(document);n.on("click","#subtasks-bulk-operation",function(){AJS.trigger("analyticsEvent",{name:"jira.bulk.move.click.subtasks-bulk-operation"})}),n.on("click","#subtasks-open-issue-navigator",function(){AJS.trigger("analyticsEvent",{name:"jira.bulk.move.click.subtasks-open-issue-navigator"})})});;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics.js' */
define("jira/analytics/analytics",["jquery","jira/ajs/dark-features","jira/analytics"],function(e,r,i){function n(){return e("li.active a.browse-tab").attr("id")}function t(){s.on("click","#project-admin-link",function(){var e=n();i.send({name:"browseproject.administerproject",properties:{selectedtab:e}})}),s.on("click","#browse-projects-create-project",function(){i.send({name:"projects.browse.createProject",properties:{}})}),s.on("click","#no-issues-create-issue",function(){i.send({name:"browseproject.issuesblankslate.createissue",properties:{}})}),s.on("click","a.issue-filter-link",function(){var r=e(this),n=r.attr("id").replace("filter_",""),t=r.attr("data-type");i.send({name:"browse"+t+".issuefilter."+n,properties:{}})}),s.on("click",".issueaction-viewworkflow",function(){var n=e(this).attr("class"),t=n.indexOf("new-workflow-designer")>-1||n.indexOf("jira-workflow-designer-link")>-1,s=t?"new":"old",a=r.isEnabled("casper.VIEW_ISSUE");i.send({name:"issue.viewworkflow",properties:{version:s,newEnabled:a}})})}var s=e(document);return{bindEvents:t}});;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics-init.js' */
require(["jira/analytics/analytics"],function(n){AJS.toInit(function(){n.bindEvents()})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:attachment-thumbnail', location = 'viewissue/attachment/attachment-thumbnail.js' */
define("jira/view-issue-plugin/attachment/attachment-thumbnail",["jira/analytics","jira/view-issue-plugin/attachment/image-element","jira/skate"],function(t,e,i){function r(t){var e=c.exec(t);if(null!==e)return e[1]}function n(t,e,i){var r=document.createEvent("CustomEvent");r.initCustomEvent(e,!0,!1,i),t.dispatchEvent(r)}function a(t,i){var r=e.create();return r.setAttribute("alt",i),r.setAttribute("src",t),r.className="hidden",r.addEventListener("error",function(){n(this,"load-error")}),r.addEventListener("load",function(){this.className="",n(this,"load-finished")}),r}var u=3,l=3e3,s=JIRA.Templates.ViewIssue,d="attachment.thumbnail.load.failed",o="attachment.thumbnail.load.retried",c=/\/file\/([\w-]+)\/image/;return i("jira-attachment-thumbnail",{type:i.type.TAG,created:function(t){t.retryCount=0,t.fallbacked=!1},attached:function(t){var e=t.querySelector("img");e&&t.removeChild(e),t.appendChild(a(t.getAttribute("url"),t.getAttribute("filename")))},events:{"load-error":function(t){t.fallbacked||(t.removeChild(e.find(t)),t.retryCount>=u?(t.applyFallback(),t.triggerFailedEvent()):(t.retryCount++,t.retryAttachment()))},"load-finished":function(t){t.retryCount>0&&t.retryCount<u&&t.triggerRetriedEvent()}},prototype:{applyFallback:function(){this.fallbacked=!0,this.getAttribute("jira-url")?this.appendChild(a(this.getAttribute("jira-url"),this.getAttribute("filename"))):this.innerHTML=s.renderAttachmentIcon({mimetype:"default"})},retryAttachment:function(){setTimeout(function(){this.appendChild(a(this.getAttribute("url"),this.getAttribute("filename")))}.bind(this),l)},triggerFailedEvent:function(){var e=r(this.getAttribute("url"));e&&t.send({name:d,properties:{fileId:e}})},triggerRetriedEvent:function(){var e=r(this.getAttribute("url"));e&&t.send({name:o,properties:{retries:this.retryCount,fileId:e}})}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:attachment-thumbnail', location = 'viewissue/attachment/image-element.js' */
define("jira/view-issue-plugin/attachment/image-element",{create:function(){return document.createElement("img")},find:function(e){return e.querySelector("img")}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:issuelink-bridge-global-init', location = 'viewissue/issuelink/linkedissue-modal-bridge.js' */
define("jira/view-issue-plugin/issuelink/linkedissue-modal-bridge",["jquery","jira/featureflags/feature-manager","jira/featureflags/simplified-ux-feature-manager","jira/components/analytics-tracker/tracker"],function(e,r,n,i){function a(e){i.trackEvent(u,"linkedissue-modal.load.failed",{errorMessage:e})}function s(){if(null===o){o=e.Deferred();try{l.then(function(e){e.loadResource().then(function(){o.resolve(e)},function(){a("Call to linkedIssueModalApp#loadResource failed"),o.reject()})})}catch(e){var r=e&&e.stack||"An unknown error occurred when loading linkedIssueModalApp bridge";a(r),o.reject()}}return o}if(!n.isAdg3ModeOn()||!r.isFeatureEnabled("jira.linked.issues.modal"))return{};var u="viewissue.issuelink",l=e.Deferred();define("jira/components/linkedissue/bridge",function(){return function(e){l.resolve(e)}});var o=null;return{loadResource:s}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:issuelink-init', location = 'viewissue/issuelink/issuelink-init.js' */
define("jira/view-issue-plugin/issuelink/issuelink-init",["jquery","underscore","jira/skate","jira/featureflags/feature-manager","jira/featureflags/simplified-ux-feature-manager","jira/components/analytics-tracker/tracker","jira/view-issue-plugin/issuelink/linkedissue-modal-bridge"],function(e,t,i,r,a,s,n){function u(i){return(t.isUndefined(i.which)||null===i.which||1===i.which||0===i.which&&e.browser.msie)&&!(i.metaKey||i.ctrlKey||i.shiftKey||i.altKey&&!e.browser.msie)}function l(){return e("#linked-issue-modal-root").attr("data-project-type")}function o(e,t){s.trackEvent(p,"linkedissue-modal.load.failed",{errorMessage:e,targetIssueId:t})}function c(e,t,i,r){var a=h();if(null!==a){try{a.show({issueId:e,issueKey:t,sourceProjectType:i,targetProjectType:r})}catch(t){var s=t&&t.stack||"Call to linkedIssueModalApp#show threw an exception";return o(s,e),!1}return!0}return o("Show called before linked issue modal available",e),!1}function d(e){return"true"===e.attr(g)}function f(t){var i=e(t.target),r=i.attr(j),a=i.attr(w),n=l(),o=i.attr("data-project-type"),f=u(t),k=d(i);if(n&&o){var h=f?"click":"click.newtab";if(s.trackEvent(p,h,{sourceProjectType:n,targetProjectType:o,targetIssueId:r,showModal:k}),k&&f){var y=c(r,a,n,o);if(y)return!1}}else s.trackEvent(p,"click.missing.project.types",{sourceProjectType:n,targetProjectType:o,targetIssueId:r})}function k(e){return e.find(y+"["+g+'="true"]').size()>0}function h(){if(null!==m)return m;if(null===v){var e=Date.now();v=n.loadResource(),v.then(function(t){m=t;var i=Date.now()-e;s.trackEvent(p,"linkedissue-modal.load",{loadTimeMillis:i})})}return m}if(a.isAdg3ModeOn()&&r.isFeatureEnabled("jira.linked.issues.modal")){var p="viewissue.issuelink",y="a.linked-issue",g="data-show-modal",w="data-issue-key",j="data-issue-id",m=null,v=null;return i("js-linkingmodule-container-skate-target",{type:i.type.CLASSNAME,attached:function(t){var i=e(t);i.on("click",y,f),k(i)&&h()}}),{shouldLoadLinkedIssueModal:k,showLinkedIssueModal:c,handleIssueLinkClicked:f}}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:initialiser', location = 'viewissue/initViewIssue.js' */
require(["jira/view-issue-plugin/attachment/attachment-element","jira/view-issue-plugin/init-draggable-attachment","jira/view-issue-plugin/analytics","jira/view-issue-plugin/attachment/attachment-thumbnail","jira/view-issue-plugin/issuelink/issuelink-init"]);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'includes/js/rapid/ui/detail/editable/IssueEditorWrapper.js' */
define("jira-agile/rapid/ui/detail/inlineedit/issue-editor-wrapper",["underscore","jquery","require"],function(e,i,n){"use strict";function t(){if(!F){F=new E,F.fieldsLoader._getFieldsData=d,F.viewIssueData.fetch=r,F.saveInProgressManager.saveIssue=l,F.issueController.show=function(){},F.canDismissComment=function(){return!0};var e={};i(GH).unbind(v("QuickEdit.fieldChange")).bind(v("QuickEdit.fieldChange"),function(i,n){e[n.fieldId]=n.fieldChangeData}),F.on("saveSuccess",function(n){var t=n.savedFieldIds[0];T(t,y.getReloadReasonForChangedField(t)),i(GH).trigger("issueUpdated",{issueId:n.issueId,source:"detailView",fieldId:t,fieldChanges:e});var r=GH.RapidViewConfig.currentData.data.estimationStatistic.fieldId===t?"estimateStatisticField":t;AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.inlineedit.submit",data:{changedField:r}})})}}function r(e,n){var t;t=a(n)?s():b;var r=new i.Deferred;return r.resolve(t),r.promise()}function s(){var e={};return e.fields=[],e.issue={id:j(),key:G(),isEditable:!0,operations:{linkGroups:[]}},e.panels={leftPanels:[],rightPanels:[],infoPanels:[]},c(e),e}function a(i){if(!i.issueEntity||!b)return!0;var n=i.issueEntity;return R!==n.key||!e.isEqual(A?A:null,n.viewIssueQuery?n.viewIssueQuery:null)}function l(i,n,t,r,s){var a=e.extend(s||{},{dataFilter:function(e){A=null;var i=JSON.parse(e);return i=c(i),JSON.stringify(i)}}),l=t[0],u=l;S.isTimeTrackingField(l)&&(S.specifyWhichFieldToSave(l,r,_.getEditsInProgress()),u=S.getServerFieldId());var d=F.saveInProgressManager;d.triggerBeforeSaving();var o,f,g=e.extend(r,{issueId:i,atl_token:atl_token(),singleFieldEdit:!0,fieldsToForcePresent:[u],skipScreenCheck:!0,rapidViewId:GH.DetailsView.rapidViewId}),v=e.extend({type:"POST",url:AJS.contextPath()+"/secure/DetailsViewAjaxIssueAction.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},error:function(e){d._handleSaveError(i,n,t,e)},success:function(e,r,s,a){f=a.data,"string"==typeof f?d._handleHtmlResponse(i,n,t,f):(h.transformFieldHtml(f),S.isTimeTrackingField(t[0])&&(f.fields=S.removeOtherTrackingField(t[0],f.fields)),d.triggerSaveSuccess(i,n,t,f)),I(n,t)},complete:function(){d.removeSaveInProgress(o),JIRA.trigger(C.INLINE_EDIT_SAVE_COMPLETE)},data:g},a);o=JIRA.SmartAjax.makeRequest(v),d.addSaveInProgress(o),d.triggerSavingStarted(i,t,g)}function u(){P||(P=new k,P.on("refineViewer",function(e){e.preventDefault(),F.once("loadComplete",function(e,i){i.issueId===j()&&T(null,y.ATTACHMENTS_CHANGED)}),A=e.query,F.updateIssueWithQuery(e.query)}),P.capture(w))}function d(e,n){var t=new i.Deferred;return setTimeout(function(){if(F){var i=H();i&&i.done(function(i){t.resolve(o(i,e,n))})}},0),t.promise()}function o(e,i,n){var t=h.transformFieldHtml({fields:e});return{issueId:i,issueKey:n,fields:t.fields}}function c(e){return e&&e.panels&&(e.panels.infoPanels=[],e.panels.leftPanels=[],e.panels.rightPanels=[]),R=e.issue.key,b=e,e}function f(){P&&P.destroy(),P=null}function g(){F&&F.close(),i(GH).unbind(v("QuickEdit.fieldChange")),F=null}function v(e){return e+"."+p}function I(e,i){var n=void 0;if(GH.RapidBoard.State.isWorkMode()?n=GH.GridDataController.getModel().data.issues[e]:GH.RapidBoard.State.isPlanMode()&&(n=GH.BacklogModel.getIssueData(e)),n){var t=[];i.forEach(function(e){t.push({name:e})}),GH.RapidBoard.sendIssueUpdatedTrackEvent(n,t)}}var p="agileIssueEditorEventNamespace",m=n("jira/util/data/meta"),E=n("jira/components/issueeditor"),h=n("jira/components/issueviewer/legacy/issuefieldutil"),k=n("jira/components/issueviewer/linkscapturer"),S=n("jira-agile/rapid/ui/detail/inlineedit/timetracking-fields-helper"),y=n("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"),C=n("jira/util/events/types"),F=(n("jira/featureflags/feature-manager"),n("jira-agile/features/feature-flags"),null),P=null,w=null,D=null,T=null,H=null,j=null,G=null,R=null,b=null,A=null,_={init:function(e){w=e.$detailContainer,D=e.getRapidViewIdCallback,T=e.loadIssueDetailCallback,H=e.getInlineEditableFieldsCallback,j=e.getIssueIdCallback,G=e.getIssueKeyCallback,t(),u()},loadIssueToEditor:function(){return m.set("server-view-issue-is-editable",!0),F.loadIssue({id:j(),key:G()})},triggerFieldUpdate:function(i,n){var t=F.editIssueController,r=e.find(t.getFields().models,function(e){return e.id===i});r&&(t.getIssueEventBus().triggerPanelRendered(r.id,n),r.triggerUpdateRequired())},hasEditsInProgress:function(){return this.getEditsInProgress().length>0},getEditsInProgress:function(){var i=F.editIssueController;return e.union(i.getDirtyEditsInProgress(),i.getEditsInProgress())},destroy:function(){R=null,b=null,A=null,D=null,T=null,H=null,j=null,G=null,f(),g()},getWrappedIssueEditor:function(){return F},_getFieldsData:d,getIssueAttachmentQuery:function(){return A}};return _});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'includes/js/rapid/ui/detail/editable/DetailViewInlineEditor.js' */
define("jira-agile/rapid/ui/detail/inlineedit/issue-detail-view-inline-editor",["require"],function(e){"use strict";function i(){t(),n(),a(),r(),E.unbind(u(w.ISSUE_REFRESHED)),E.bind(u(w.ISSUE_REFRESHED),g.debounce(l,0))}function t(){v.off(u("click")).on(u("click"),"#commentmodule .issue-activity-sort-link",function(e){e.preventDefault();var i=f(e.currentTarget).attr("href");f.get(i).done(function(){k(null,h.COMMENTS_CHANGED)})}),JIRA.bind(w.NEW_CONTENT_ADDED,function(e,i,t){t===JIRA.CONTENT_ADDED_REASON.panelRefreshed&&"commentmodule"===i.attr("id")&&i.find(".issue-activity-sort-link").off("click")}),E.unbind(u(w.UNLOCK_PANEL_REFRESHING)),E.bind(u(w.UNLOCK_PANEL_REFRESHING),g.throttle(function(e,i){"addcommentmodule"===i&&k(null,h.COMMENTS_CHANGED)},1e3,{trailing:!1}))}function n(){v.off(u("focus")).on(u("focus"),".ghx-estimate input",function(){var e=v.find(".ghx-estimate"),i=e.find(".ghx-estimate-scope-warning");if("ACTIVE"===y()&&0===i.length){i=f('<div class="ghx-estimate-scope-warning"></div>'),i.text("Sprint scope will be affected by this action.");var t=e.find(".ghx-editing");0===t.length&&(t=e.find(".editable-field.active .field-group")),t.append(i)}})}function a(){E.bind(m.INLINE_EDIT_STARTED,function(e,i,t,n){A.isTimeTrackingField(i)&&(n.find(".error").length||N.BlurTriggers.Default(i,A.getFieldFromContainer(i,n)))})}function r(){E.unbind(u(w.NEW_CONTENT_ADDED)),E.bind(u(w.NEW_CONTENT_ADDED),function(e,i,t){if(t===JIRA.CONTENT_ADDED_REASON.panelRefreshed&&_.indexOf(i.attr("id"))>=0){var n=g.any(i.find(".attachment-content"),function(e){return g.isNull(f(e).data("issue-id"))});n&&(GH.RapidBoard.State.isPlanMode()?k(null,h.ATTACHMENTS_CHANGED):(GH.windowActivityNotifier.trigger("blur"),k(null,h.ATTACHMENTS_CHANGED)))}})}function l(){s(),o()}function s(){b(["wrc!com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer"],function(){JIRA.WorkflowDesigner.browserIsSupported()&&JIRA.WorkflowDesigner.ViewIssue.replaceViewWorkflowLink(f(document))})}function o(){JIRA.trigger(w.NEW_CONTENT_ADDED,[f("#attachmentmodule"),T.panelRefreshed])}function d(e){e.find("#commentmodule .activitymodule-link.issue-comment-action").attr("target","_blank")}function u(e){return e+"."+c}var c="agileDetailViewInlineEditableEventNamespace",g=e("underscore"),f=e("jquery"),E=e("jira/util/events"),m=e("jira/components/issueeditor/eventtypes"),p=e("jira-agile/rapid/ui/detail/inlineedit/dialogsoverrider"),N=e("jira/components/issueeditor/inlineeditutils"),D=e("jira/components/issueviewer/legacy/issuefieldutil"),I=e("jira-agile/rapid/ui/detail/inlineedit/issue-editor-wrapper"),T=e("jira/util/events/reasons"),A=e("jira-agile/rapid/ui/detail/inlineedit/timetracking-fields-helper"),h=e("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"),_=["attachment_thumbnails","file_attachments"],w=e("jira/util/events/types"),b=e("wrm/require"),v=null,C=null,k=null,R=null,S=null,y=null,j={init:function(e){I.init(e),v=e.$detailContainer,C=e.getRapidViewIdCallback,k=e.loadIssueDetailCallback,R=e.getIssueIdCallback,S=e.getIssueKeyCallback,y=e.getIssueSprintStatusCallback,p.init(k),i()},loadIssueToEditor:I.loadIssueToEditor,triggerFieldUpdate:I.triggerFieldUpdate,getFieldSelector:D.getFieldSelector,hasEditsInProgress:I.hasEditsInProgress,getEditsInProgress:I.getEditsInProgress,getIssueAttachmentQuery:I.getIssueAttachmentQuery,_issueEditorWrapper:I,fixUpDetailView:d,destroy:function(){C=null,k=null,R=null,S=null,y=null,p.destroy(),I.destroy()},registerListenersForTab:function(e,i){switch(e){case"comment":d(i),t();break;case"header":n(),a();break;case"attachment":r(),o();break;case"details":I.loadIssueToEditor()}}};return j});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'includes/js/rapid/ui/detail/editable/DialogsOverrider.js' */
define("jira-agile/rapid/ui/detail/inlineedit/dialogsoverrider",["jquery","jira/util/events","jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason","jira-agile/rapid/ui/detail/details-model"],function(i,e,n,t){"use strict";function d(i){return a.DIALOG_OVERRIDE_LIST.indexOf(i)!==-1}var a={};a.DIALOG_OVERRIDE_LIST=["delete-attachment-dialog","delete-issue-link-dialog","edit-comment","delete-comment-dialog","assign-to-me-link-handler","assign-dialog","link-issue-dialog","attach-screenshot-dialog"];var o=null;return a.init=function(a){"function"!=typeof o&&(o=function(i,e,o){AJS.dim();var l=o&&d(o.options.id);l&&(o._performRedirect=function(){this.redirected=!1},o.options.onDialogFinished=function(){a(null,n.REASON_FOR_DIALOG[o.options.id]),AJS.$(GH).trigger("issueUpdated",{issueId:t.viewData.id,source:"detailView"}),o.hide()})},e.bind("Dialog.show",o),e.bind("Dialog.hide",function(e,n,t){i(".aui-blanket").remove()}))},a.destroy=function(){e.unbind("Dialog.show",o),o=null},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'includes/js/rapid/ui/detail/editable/TimeTrackingFieldsHelper.js' */
define("jira-agile/rapid/ui/detail/inlineedit/timetracking-fields-helper",["require"],function(e){"use strict";function i(e){return e===o?l:e===l?o:void 0}function t(e){return e===o?T:e===l?g:void 0}var n,r=e("underscore"),a=e("jquery"),c=e("jira/components/issueviewer/legacy/issuefieldutil"),l="timeoriginalestimate",o="timeestimate",s="timetracking_targetsubfield",u=[l,o],d="timetracking",g="timetracking_originalestimate",T="timetracking_remainingestimate",m={_visibleForTesting:{ORIGINAL_TIME_ESTIMATE:l,REMAINING_TIME_ESTIMATE:o,TARGET_FIELD_PARAM_NAME:s,ORIGINAL_ESTIMATE_FORM_PARAM_ID:g,REMAINING_ESTIMATE_FORM_PARAM_ID:T}};return m.getFieldFromContainer=function(e,i){if(this.isTimeTrackingField(e))return i.find("#"+t(e))},m.specifyWhichFieldToSave=function(e,l,o){var u,d=a(c.getFieldSelector(e)),g=a(c.getFieldSelector(i(e)));if(0!==g.length)u=0!==g.find(".ghx-fa").length;else{var T=this.getFieldFromContainer(i(e),d);u=r.isEmpty(T.val())}u&&!r.contains(o,i(e))?delete l[t(i(e))]:(l[s]=t(e),n=!0)},m.removeOtherTrackingField=function(e,t){return n?r.reject(t,function(t){return m.isTimeTrackingField(e)&&t.id===i(e)}):t},m.getServerFieldId=function(){return d},m.isTimeTrackingField=function(e){return r.contains(u,e)},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'includes/js/rapid/ui/detail/editable/EditableDetailsViewReloader.js' */
define("jira-agile/rapid/ui/detail/inlineedit/details-view-reloader",["jquery","underscore","jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason","jira-agile/rapid/ui/detail/details-model","jira-agile/rapid/ui/detail/details-field-renderer","jira/analytics/web-client"],function(e,t,a,i,n,d){"use strict";function r(e,t,a){var d=i.viewData;if(d)if("comment"===t&&"COMMENT"===e.defaultTabs[0].tabId&&o(e.defaultTabs[0],d),i.replaceUpdatedTabs(e),a&&c.hasEditsInProgress())c.renderDetailsSingleField(a);else{var r=c.getContainer();if("header"===t)n.renderDetailsHeaderFields(i.viewData,r,c.opts);else{var s={tabs:{defaultTabs:e.defaultTabs},trackingStatisticFieldId:i.viewData.trackingStatisticFieldId};n.updateTabsContent(s,r),c.registerListenersForTab(t,r)}GH.DetailsViewScrollTracker.afterDetailsViewLoaded({issueId:i.viewData.id})}}function s(e){var a=new AJS.$.Deferred,i={rapidViewId:c.rapidViewId,issueIdOrKey:c.selectedIssueKey,loadSubtasks:c.opts.showSubtaskTab};return"attachment"!==e||t.isUndefined(c.getAttachmentViewQuery)||(i=t.extend(i,c.getAttachmentViewQuery())),GH.Ajax.get({url:"/xboard/issue/details/"+e,data:i},"detailView/"+e).done(function(e){a.resolveWith(null,[e])}),a.promise()}function o(t,a){var i=a.tabs.defaultTabs.find(function(e){return"COMMENT"===e.tabId});if(i&&!(t.totalComments<=i.totalComments)){var n=e(t.sections[0].html).find(".activity-comment"),r=/comment\-(\d*)$/.exec(n[n.length-1].id)[1],s=/comment\-(\d*)$/.exec(n[0].id)[1],o=Math.max(s,r),c=e(t.sections[1].html).find("[name='add-comment']")[0].href,l=/\?.*id=(\d*)$/.exec(c)[1],u={objectType:"issue",objectId:l,containerType:"project",attributes:{projectType:"software",boardId:GH.DetailsView.rapidViewId,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics()},action:"created",actionSubject:"comment",actionSubjectId:o,source:GH.RapidBoard.State.isPlanMode()?"backlogScreen":"boardScreen"};d.sendTrackEvent(u)}}var c=GH.DetailsView,l=["details","header","description"],u={};u[a.HEADER_FIELD_CHANGED]=l,u[a.DETAILS_FIELD_CHANGED]=l,u[a.LINKED_ISSUES_CHANGED]=l,u[a.LINKED_ISSUE_CREATED_AND_COMMENTED]=t.union(l,["comment"]),u[a.DESCRIPTION_CHANGED]=l,u[a.ATTACHMENTS_CHANGED]=["attachment"],u[a.COMMENTS_CHANGED]=["comment"],u[a.SUBTASKS_CHANGED]=t.union(["sub_tasks"],l),u[a.VERSION_PANEL_CHANGED]=l,u[a.EPIC_PANEL_CHANGED]=l,u[a.ISSUE_ASSIGNED_AND_COMMENTED]=t.union(l,["comment"]);var E={reload:function(t,a){var i=u[t];if(i){var n={},d=void 0;i.forEach(function(e){var t=s(e);"details"!==e?n[e]=t:d=t});var o=[];Object.keys(n).forEach(function(e){var t=n[e];o.push(t.done(function(t){return r(t,e,a)}))}),d&&e.when.apply(e,o).done(function(){d.done(function(e){return r(e,"details",a)})})}}};return E});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'includes/js/rapid/ui/detail/editable/EditableDetailsViewReloadReason.js' */
define("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason",["require"],function(E){"use strict";var D=E("underscore"),_=E("jira-agile/rapid/ui/detail/details-model"),A={HEADER_FIELD_CHANGED:"HEADER_FIELD_CHANGED",DETAILS_FIELD_CHANGED:"DETAILS_FIELD_CHANGED",DESCRIPTION_CHANGED:"DESCRIPTION_CHANGED",LINKED_ISSUES_CHANGED:"LINKED_ISSUES_CHANGED",LINKED_ISSUE_CREATED_AND_COMMENTED:"LINKED_ISSUE_CREATED_AND_COMMENTED",ATTACHMENTS_CHANGED:"ATTACHMENTS_CHANGED",COMMENTS_CHANGED:"COMMENTS_CHANGED",SUBTASKS_CHANGED:"SUBTASKS_CHANGED",VERSION_PANEL_CHANGED:"VERSION_PANEL_CHANGED",EPIC_PANEL_CHANGED:"EPIC_PANEL_CHANGED",ISSUE_ASSIGNED_AND_COMMENTED:"ISSUE_ASSIGNED_AND_COMMENTED"},N={description:A.DESCRIPTION_CHANGED,summary:A.HEADER_FIELD_CHANGED,timeestimate:A.HEADER_FIELD_CHANGED,timeoriginalestimate:A.HEADER_FIELD_CHANGED};return D.extend(A,{REASON_FOR_DIALOG:{"delete-attachment-dialog":A.ATTACHMENTS_CHANGED,"attach-screenshot-dialog":A.ATTACHMENTS_CHANGED,"delete-issue-link-dialog":A.LINKED_ISSUES_CHANGED,"edit-comment":A.COMMENTS_CHANGED,"delete-comment-dialog":A.COMMENTS_CHANGED,"link-issue-dialog":A.LINKED_ISSUE_CREATED_AND_COMMENTED,"delete-issue-dialog":A.SUBTASKS_CHANGED,"assign-to-me-link-handler":A.DETAILS_FIELD_CHANGED,"assign-dialog":A.ISSUE_ASSIGNED_AND_COMMENTED},getReloadReasonForChangedField:function(E){var D=N[E];return D?D:_.isFieldInSection(E,"estimate")||_.isFieldInSection(E,"tracking")?A.HEADER_FIELD_CHANGED:A.DETAILS_FIELD_CHANGED}})});;
;
/* module-key = 'jira.webresources:bundles-experiment-feature-flags', location = '/js/featureflags/bundles-experiment-feature-manager.js' */
define("jira/featureflags/bundles-experiment-feature-manager",["jira/util/data/meta","jira/featureflags/feature-manager"],function(e,t){"use strict";const n="jsw.growth.confluence.bundles.activation",a="variation-1",r="variation-2",i="not-enrolled",u=t.getStringValue(n)||i;return{BUNDLES_LAUNCH_DARKLY_FEATURE_FLAG:n,shouldCreateSpace:function(){return[a,r].indexOf(u)!==-1},getBundleExperimentCohort:function(){return u}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-analytics-tracker', location = 'includes/js/rapid/AnalyticsTracker.js' */
define("jira-agile/rapid/analytics-tracker",["require"],function(e){function a(e,a,r){if(i.isUndefined(e))throw new Error("You must specify a category");this.params={},this.params.category=e;var t=0;i.isUndefined(a)||(this.params.action=a,t++,i.isUndefined(r)||(this.params.label=r,t++)),this.requiredArgumentNames=["action","label","value"].slice(t),this.useAsync=!0}var i=e("underscore");return a.prototype.setAsync=function(e){return this.useAsync=e,this},a.prototype.trigger=function(){for(var e=i.clone(this.params),a=0;a<arguments.length&&!i.isUndefined(this.requiredArgumentNames[a]);a++)e[this.requiredArgumentNames[a]]=arguments[a];this._validateParams(e);var r="gh.analytics.async";AJS.$(AJS).trigger(r,e)},a.prototype._validateParams=function(e){var a=["category","action","label"];i.each(a,function(a){i.isUndefined(e[a])||i.isString(e[a])?i.isUndefined(e[a])&&(e[a]=""):e[a]=e[a].toString()}),i.each(["category","action"],function(a){e[a]=e[a].replace(/\s+/g,"")}),i.isUndefined(e.value)||(e.value=parseInt(e.value,10),isNaN(e.value)&&(e.value=void 0))},a}),AJS.namespace("GH.AnalyticsTracker",null,require("jira-agile/rapid/analytics-tracker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('This version of {0} is not a supported browser.',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('See our documentation for the list of supported browsers.') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-global-message" class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('This board has been updated') + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml('Refresh') + '</a>' + ((opt_data.showIgnore) ? '<span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml('Ignore') + '</a>' : '') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Events.js' */
define("jira-agile/rapid/events",["require"],function(t){function n(t){return t?e.extend(t,n.prototype):t=this,t._bindings=[],t}var e=t("underscore");return n.prototype={on:function(t,n,e){return e&&this._off({type:t,context:e}),this._bindings.push({type:t,handler:n,context:e}),this},off:function(t){return e.isString(t)?this._off({type:t}):e.isFunction(t)?this._off({handler:t}):e.isObject(t)&&this._off({context:t}),this},_off:function(t){this._bindings=e.reject(this._bindings,function(n){var e=!t.type||t.type===n.type,i=!t.context||t.context===n.context,r=!t.handler||t.handler===n.handler;return e&&i&&r})},trigger:function(t){var n=Array.prototype.slice.call(arguments,1);return e.each(this._bindings,function(e){e.type===t&&e.handler.apply(e.context,n)}),this}},n}),AJS.namespace("GH.Events",null,require("jira-agile/rapid/events"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/GlobalEvents.js' */
define("jira-agile/rapid/global-events",["require"],function(e){"use strict";var i=e("jira-agile/rapid/events");return new i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-config.js' */
AJS.namespace("GH.Config"),GH.Config.isSampleDataAvailable=!1,GH.Config.setSampleDataAvailable=function(a){GH.Config.isSampleDataAvailable=a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Ajax.js' */
define("jira-agile/rapid/ajax",[],function(){"use strict";var e={};return e.CONTEXT_PATH=AJS.contextPath(),e.REST_URL_BASE="/rest/greenhopper/1.0",e.PUBLIC_REST_URL_BASE="/rest/agile/1.0",e.xhrRegistery={},e.stallTimeout=300,e.get=function(r,t){AJS.$.extend(r,{type:"GET",headers:{"X-Atlassian-GreenHopper-Gadget":!_.isUndefined(GH.gadget)}});var n=e._executeGet(r,t);return n.pipe(function(e,r,t){return AJS.$.Deferred().resolveWith(this,[e.success,r,t])})},e.post=function(r){return r=e._getSettings(r,!0),AJS.$.extend(r,{type:"POST",contentType:"application/json"}),e._executeStore(r)},e.put=function(r){return r=e._getSettings(r,!0),r.type="PUT",e._executeStore(r)},e.del=function(r){return r=e._getSettings(r,!0),r.type="DELETE",e._executeStore(r)},e._getSettings=function(r,t){return!r.bareUrl&&r.url&&(r.bareUrl=e.buildRestUrl(r.url)),r.bareUrl&&(r.url=r.bareUrl),r.dataType||(r.dataType="json"),r.data&&t&&(r.data=JSON.stringify(r.data)),r.contentType="application/json",r},e._getXhrData=function(r){var t={timestamp:0};return r&&(t=e.xhrRegistery[r]?e.xhrRegistery[r]:e.xhrRegistery[r]=t),t},e._executeGet=function(r,t){r=e._getSettings(r);var n=e._getXhrData(t);n.xhr&&(n.xhr.abort(),delete n.xhr,delete n.xhrAbort,delete n.timeoutId);var o=n.timestamp;if(n.timestamp=(new Date).getTime(),n.timestamp-o<e.stallTimeout){var s,a=AJS.$.Deferred(),u=function(){s=e._executeGet(r,t),s.then(a.resolve,a.reject)};n.timeoutId=window.setTimeout(u,e.stallTimeout),n.xhr=a.promise(),n.xhr.abort=function(){s?s.abort.apply(s,arguments):clearTimeout(n.timeoutId)}}else n.xhr=e.makeRequest(r);return n.xhrAbort=n.xhr.abort,n.xhr.abort=function(){var e=n.xhr,r=n.xhrAbort;if(e&&r)return r.apply(e,arguments)},n.xhr.done(function(){n.xhr&&delete n.xhr}).fail(function(){n.xhr&&delete n.xhr}),n.xhr},e._executeStore=function(r){if(r=r||{},r.data&&"string"==typeof r.data&&/\?\?/.test(r.data)){var t="\\u003F\\u003F";r.data=r.data.replace(/\?\?/g,t)}return r.dataType="json",e.makeRequest(r)},e.makeRequest=function(r){var t=AJS.$.Deferred();r=_.extend(r,{success:function(){t.resolveWith(this,arguments)},error:function(){t.rejectWith(this,arguments)}});var n=t.promise(JIRA.SmartAjax.makeRequest(r)),o=n.abort;n.abort=function(e){return n.abortMarker="timeout"!=e,o.apply(n,arguments)};var s=n.pipe(e._generateDoneInterceptor(),e._generateFailInterceptor(r.errorsNoAutoEscape));return r.deferErrorHandling||s.fail(e._generateErrorHandler(r.onGlobalError,r.errorContextMap,r.contextualErrorRenderer,r.globalErrorDismissable)),s},e._generateDoneInterceptor=function(){return function(r,t,n){return r=r||{},r=e._createExtendedResult(r),e.matchesCurrentUser(n)?r.isSuccess()?AJS.$.Deferred().resolveWith(this,[r,t,n]):AJS.$.Deferred().rejectWith(this,[r,n,t,null]):e._handleCurrentUserChanged(n)}},e._generateFailInterceptor=function(r){return function(t,n,o){if(t.abortMarker)return AJS.$.Deferred();if(!e.matchesCurrentUser(t))return e._handleCurrentUserChanged(t);var s={},a=null;if(t.responseText)try{s=JSON.parse(t.responseText)}catch(u){}return s.errors||s.errorMessages?a=e._convertJiraErrors(s,r):s.message&&(a=e._convertFrameworkErrors(s)),a||(a=e._convertGenericErrors(t,o)),AJS.$.Deferred().rejectWith(this,[a,t,n,o])}},e.handleContextualErrors=function(e,r,t){return r=r||{},!!e.hasContextualErrors()&&(AJS.$(e.getContextualErrors()).each(function(n,o){var s=r[o.contextId];if(s)if(AJS.$.isFunction(s))s(o,e);else{s=AJS.$(s),s.siblings(".ghx-error").remove();var a;a=t?t(o):GH.tpl.rapid.notification.renderContextualErrors({errors:o.errors}),s.after(a)}else AJS.$(o.errors).each(function(r,t){e.addGlobalError(t)})}),!0)},e.handleGlobalErrors=function(e,r,t){return!!e.hasGlobalErrors()&&(GH.Notification.showErrors({errors:e.getGlobalErrors()},t),r&&r instanceof Function&&r(e),!0)},e.buildRestUrl=function(r){return 0!==r.indexOf("/")&&(r="/"+r),e.buildBareRestUrl(e.REST_URL_BASE+r)},e.buildPublicRestUrl=function(r){return 0!==r.indexOf("/")&&(r="/"+r),e.buildBareRestUrl(e.PUBLIC_REST_URL_BASE+r)},e.buildBareRestUrl=function(r){return 0!==r.indexOf("/")&&(r="/"+r),e.CONTEXT_PATH+r},e._createExtendedResult=function(r){return r?e._extendResult({success:r}):e._extendResult({success:!0})},e._extendResult=function(e){return AJS.$.extend(e,{getGlobalErrors:function(){return e.error?e.error.errors:null},getContextualErrors:function(){return e.error?e.error.contextualErrors:null},hasGlobalErrors:function(){return e.error&&e.error.errors&&e.error.errors.length>0},hasContextualErrors:function(){return e.error&&e.error.contextualErrors},addGlobalError:function(r){e.error||(e.error={}),e.error.errors||(e.error.errors=[]),e.error.errors[e.error.errors.length]=r},getSuccessObject:function(){return e.success},isSuccess:function(){return!e.error}})},e._generateErrorHandler=function(r,t,n,o){return function(s){e.handleContextualErrors(s,t,n),e.handleGlobalErrors(s,r,o)}},e._convertJiraErrors=function(r,t){var n=r.errorMessages?r.errorMessages:[];n=_.map(n,function(e){return{message:e,noAutoescape:t}});var o=r.errors?r.errors:{};o=_.map(o,function(e,r){return{contextId:r,errors:[{message:e,noAutoescape:t}]}});var s={error:{errors:n,contextualErrors:o}};return e._extendResult(s)},e._convertFrameworkErrors=function(r){var t={error:{errors:[{message:r.message}],contextualErrors:[]}};return e._extendResult(t)},e._convertGenericErrors=function(r,t){var n=e._extendResult({});return 0===r.status&&"abort"===t?n.addGlobalError({message:"Ajax.error.timeout"}):t&&n.addGlobalError({message:t}),n},e._hasUsernameResponseHeader=function(e){return!!e.getResponseHeader("X-AUSERNAME")},e._getUserForResponse=function(e){return e.getResponseHeader("X-AUSERNAME")?decodeURIComponent(e.getResponseHeader("X-AUSERNAME")):"anonymous"},function(){var r=require("jira/util/data/meta");e.getUserFromAJS=function(){var e=r.get("remote-user");return e?e:"anonymous"}}(),e.matchesCurrentUser=function(r){return!r.getResponseHeader||!r.getAllResponseHeaders||!e._hasUsernameResponseHeader(r)||e.getUserFromAJS()===e._getUserForResponse(r)||204===r.status&&!r.getAllResponseHeaders()&&AJS.$.browser.msie},e._handleCurrentUserChanged=function(r){var t=e.getUserFromAJS(),n=e._getUserForResponse(r);return"anonymous"!==t&&"anonymous"===n?location.href=GH.Navigation.getLoginUrl():location.reload(),AJS.$.Deferred()},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/ui/notification/Notification.js' */
!function(){AJS.namespace("GH.Notification"),GH.Notification.autoHideEnabled=!0;var e=Object.freeze({INFO:"info",SUCCESS:"success"});GH.Notification.showErrors=function(e,i){var t=GH.Notification.prepareNotificationDiv(),a=GH.tpl.rapid.notification.renderErrorMessages(e);"undefined"==typeof i&&(i=!0),AJS.messages.error(t,{title:"Error",body:a,closeable:i}),GH.Notification._divStyle(t)&&t.css(GH.Notification._divStyle(t)),t.show()},GH.Notification.showError=function(e,i,t){var a=GH.Notification.prepareNotificationDiv();"undefined"==typeof t&&(t=!0),AJS.messages.error(a,{title:e,body:i,closeable:t}),GH.Notification._divStyle(a)&&a.css(GH.Notification._divStyle(a)),a.show()},GH.Notification.showWarnings=function(e,i){var t={autoHide:!0,autoHideDelay:5e3,preRendered:!1,showTitle:!1};i=_.extend({},t,i);var a,o=GH.Notification.prepareNotificationDiv();a=i.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e});var s={body:a,closeable:!0};i.showTitle&&(s.title="Warning"),AJS.messages.warning(o,s),GH.Notification._divStyle(o)&&o.css(GH.Notification._divStyle(o)),o.show(),i.autoHide&&GH.Notification.autoHideEnabled&&setTimeout(function(){o.hide()},i.autoHideDelay)},GH.Notification.showWarning=function(e){var i=GH.Notification.prepareNotificationDiv();AJS.messages.warning(i,{body:e,closeable:!0}),GH.Notification._divStyle(i)&&i.css(GH.Notification._divStyle(i)),i.show()},GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()},GH.Notification.handleDateFormatMismatchError=function(e){var i='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';i+="Advanced Settings",i+="</a>";var t=AJS.format("It appears your Jira date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",i);GH.Notification.showWarnings(t,{autoHide:!1,preRendered:!0})},GH.Notification.auiMessage=function(e){var i=_.extend({type:"generic",icon:!0,messageHtml:!1},e);return GH.tpl.rapid.notification.renderAuiMessage({type:i.type,title:i.title,icon:i.icon,messageHtml:i.messageHtml,message:i.message})},GH.Notification.Handler={_defaultNotificationHandler:function(){var e=AJS.$("<div/>");return AJS.$(".global-msg").remove(),e.addClass("global-msg").appendTo("body"),e},_defaultDivStyleHandler:function(e){return{marginLeft:-e.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(e){this._customDivStyleHandler=e,this._useDefault=!1},_useDefault:!0,setCustomNotificationHandler:function(e){this._customNotificationHandler=e,this._useDefault=!1},removeCustomHandlers:function(){this._useDefault=!0},getNotificationHandler:function(){return this._useDefault||null==this._customNotificationHandler?this._defaultNotificationHandler:this._customNotificationHandler},getDivStyleHandler:function(){return this._useDefault||null==this._customDivStyleHandler?this._defaultDivStyleHandler:this._customDivStyleHandler}},GH.Notification._divStyle=function(e){var i=GH.Notification.Handler.getDivStyleHandler();return i(e)},GH.Notification.prepareNotificationDiv=function(){var e=GH.Notification.Handler.getNotificationHandler();return e()},GH.Notification.showSuccess=function(t,a){i(e.SUCCESS,t,a)},GH.Notification.showInfo=function(t,a){i(e.INFO,t,a)};var i=function(e,i,t){clearTimeout(GH.Notification.current);var a={timeout:5e3,closeable:!0,shadowed:!0};t=_.extend(a,t,{body:i});var o=GH.Notification.prepareNotificationDiv();AJS.messages[e](o,t),GH.Notification._divStyle(o)&&o.css(GH.Notification._divStyle(o)),o.show(),GH.Notification.autoHideEnabled&&(GH.Notification.current=setTimeout(function(){AJS.$(".global-msg").hide()},t.timeout))};GH.Notification.showIssueMessage=function(e){var i=JIRA.SessionStorage,t=null,a=null;e||(e=i.getItem("selectedIssueId")),e&&(a=i.getItem("selectedIssueKey"),t=i.getItem("selectedIssueMsg"),GH.Notification.showIssueMessageImpl(e,t,a)),i.removeItem("selectedIssueId"),i.removeItem("selectedIssueKey"),i.removeItem("selectedIssueMsg")},GH.Notification.showIssueMessageImpl=function(e,i,t){i||(i="thanks_issue_updated");var a=AJS.params[i];a&&t&&(a=AJS.format(a,t),GH.Notification.showSuccess(a))},GH.Notification.addPageLoadMessage=function(e,i){var t=GH.storage.get("gh.pageloadmessages",!0)||[];t.push({message:e,type:i||"success"}),GH.storage.put("gh.pageloadmessages",t,!0)},GH.Notification._displayPageLoadMessages=function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var i=e[0].type,t="";switch(_.each(e,function(e){t.length>0&&(t+="<br>"),t+=e.message}),i){case"warning":GH.Notification.showWarning(t);break;case"success":default:GH.Notification.showSuccess(t)}GH.storage.put("gh.pageloadmessages",null,!0)}};var t=null;GH.Notification.showBoardUpdatedMessage=function(){var e=require("jira/featureflags/simplified-ux-feature-manager"),i=void 0,a=AJS.$.Deferred();if(e.isAdg3StylesEnabled()){if(0===AJS.$(".aui-flag[aria-hidden=false]").length){var o=GH.tpl.rapid.notification.renderGHtvMessage({showIgnore:!1});t=AJS.flag({type:"info",body:o}),i=AJS.$(o)}}else GH.Notification.clearBoardUpdatedMessage(),i=AJS.$(GH.tpl.rapid.notification.renderGHtvMessage({showIgnore:!0})).appendTo("#gh"),i.data("deferred",a);if(e.isAdg3StylesEnabled()){var s=function(e){e.preventDefault(),GH.Notification.clearBoardUpdatedMessage(),a.resolve()};AJS.$(".js-refresh-now").off("click",s).click(s)}else i.find(".js-refresh-now").click(function(e){e.preventDefault(),i.removeData("deferred"),GH.Notification.clearBoardUpdatedMessage(),a.resolve()}),i.find(".js-ignore-refresh").click(function(e){e.preventDefault(),GH.Notification.clearBoardUpdatedMessage()});return a.promise()},GH.Notification.clearBoardUpdatedMessage=function(){var e=require("jira/featureflags/simplified-ux-feature-manager");if(e.isAdg3StylesEnabled())t&&t.close();else{var i=AJS.$("#ghx-update-message");if(i.length){var a=i.data("deferred");a&&a.reject&&a.reject(),i.remove()}}},GH.Notification.isBoardUpdatedMessageVisible=function(){var e=AJS.$("#ghx-update-message");return e.length>0},AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/state/storage.js' */
AJS.namespace("GH.storage"),GH.storage.get=function(e,t){var r;if(r=t?sessionStorage.getItem(e):localStorage.getItem(e),"string"!=typeof r)return r;try{return JSON.parse(r)}catch(o){return}},GH.storage.put=function(e,t,r){if(null===t||void 0===t)r?sessionStorage.removeItem(e):localStorage.removeItem(e);else try{r?sessionStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,JSON.stringify(t))}catch(o){return!1}return!0},window.localStorage&&window.sessionStorage||(GH.storage.get=function(){return null},GH.storage.put=function(){return!1});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Validation.js' */
AJS.namespace("GH.Validation"),GH.Validation.notBlank=function(r,t,n){var a=GH.Validation.applyRules(r,t,n,function(){return AJS.$.trim(AJS.$(r).val()).length>0});return a},GH.Validation.maxLength=function(r,t,n,a){var i=GH.Validation.applyRules(r,n,a,function(){return AJS.$.trim(AJS.$(r).val()).length<=t});return i},GH.Validation.isPositiveInteger=function(r,t,n){var a=GH.Validation.applyRules(r,t,n,function(){return/^\d*$/.test(AJS.$.trim(AJS.$(r).val()))});return a},GH.Validation.applyRules=function(r,t,n,a){r=AJS.$(r),errorCtx=n?AJS.$(n):r;var i=a.call(this);return!!i||(GH.Validation.showContextualErrors(errorCtx,t),!1)},GH.Validation.showContextualErrors=function(r,t,n,a,i){GH.Validation.clearContextualErrors(r),r.after(GH.tpl.rapid.notification.renderContextualErrors({errors:[{message:AJS.I18n.getText(t,n,a,i)}]}))},GH.Validation.clearContextualErrors=function(r){r=AJS.$(r),r.find(".ghx-error").remove(),r.siblings(".ghx-error").remove()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-helppaths.js' */
AJS.namespace("GH.HelpPaths"),GH.HelpPaths.getHelpPath=function(e){return null};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-message.js' */
AJS.namespace("GH.Message"),GH.Message.showIssueMessage=function(e){var s=JIRA.SessionStorage,a=null,t=null;e||e||(e=s.getItem("selectedIssueId")),e&&(t=s.getItem("selectedIssueKey"),a=s.getItem("selectedIssueMsg"),GH.Message.showIssueMessageImpl(e,a,t)),s.removeItem("selectedIssueId"),s.removeItem("selectedIssueKey"),s.removeItem("selectedIssueMsg")},GH.Message.showIssueMessageImpl=function(e,s,a){s||(s="thanks_issue_updated");var t=AJS.params[s];t&&a&&(t=AJS.format(t,a),GH.Message.showSuccess(t))},GH.Message.prepareNotificationDiv=function(){var e=AJS.$("#gh-notification");return 0==e.length&&(e=AJS.$('<div id="gh-notification"></div>'),AJS.$("#gh").append(e)),e.text(""),e},GH.Message.preparePresistentNotificationDiv=function(){var e=AJS.$("#gh-persistent-notification");return 0==e.length&&(e=AJS.$('<div id="gh-persistent-notification"></div>'),AJS.$("#gh").append(e)),e.text(""),e},GH.Message.showSuccess=function(e){var s=GH.Message.prepareNotificationDiv();AJS.messages.success(s,{body:e}),s.show(),setTimeout('AJS.$("#gh-notification").hide()',5e3)},GH.Message.showWarning=function(e){var s=GH.Message.prepareNotificationDiv();AJS.messages.warning(s,{body:e,closeable:!0}),s.show()},GH.Message.showPersistentWarning=function(e){var s=GH.Message.preparePresistentNotificationDiv();AJS.messages.warning(s,{body:e,closeable:!0}),s.show()},GH.Message.addPageLoadMessage=function(e,s){var a=GH.storage.get("gh.pageloadmessages",!0)||[];a.push({message:e,type:s||"success"}),GH.storage.put("gh.pageloadmessages",a,!0)},GH.Message._displayPageLoadMessages=function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var s=e[0].type,a="";switch(_.each(e,function(e){a.length>0&&(a+="<br>"),a+=e.message}),s){case"warning":GH.Message.showWarning(a);break;case"success":default:GH.Message.showSuccess(a)}GH.storage.put("gh.pageloadmessages",null,!0)}},AJS.$(document).ready(function(){GH.Message.showIssueMessage(),GH.storage&&GH.Message._displayPageLoadMessages()}),AJS.$(document).ready(function(){var e=AJS.$("#footer"),s=e.find(".footer-body:first ul:first"),a=e.find("#ghx-footer");s.before(a),a.css({visibility:""})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Util.js' */
AJS.namespace("GH.Util"),GH.Util.getPluginKey=function(){return AJS.$('meta[name="ghx-plugin-key"]').attr("content")},GH.Util.wrapPreventDefault=function(e,r){return function(n){return n.preventDefault(),e.apply(r||this,arguments)}},GH.Util.andThenSplice=function(){return{_needsSplice:Array.prototype.slice.call(arguments)}},GH.Util.andThen=function(e){var r=[{trigger:"resolveWith",on:"done",filter:arguments[1]},{trigger:"rejectWith",on:"fail",filter:arguments[2]},{trigger:"notifyWith",on:"progress",filter:arguments[3]}];return AJS.$.Deferred(function(n){_.each(r,function(r){var t=r.on,i=r.trigger,a=_.isFunction(r.filter)&&r.filter;e[t](function(){var e=a&&a.apply(this,arguments);if(e&&_.isFunction(e.promise))e.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var r;r=e&&_.isArray(e._needsSplice)?e._needsSplice:a?[e]:arguments,n[i](_.isFunction(this.promise)?n.promise():this,r)}})})}).promise()},AJS.$._OriginalDeferred=AJS.$.Deferred,AJS.$.Deferred=function(e){return AJS.$._OriginalDeferred(function(r){r.andThen=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),GH.Util.andThen.apply(this,e)};var n=r.promise;r.promise=function(){var e=n.apply(this,arguments);return e.andThen=function(){var r=Array.prototype.slice.call(arguments);return r.unshift(e),GH.Util.andThen.apply(this,r)},e},e&&e.call(r,r)})},GH.Util.indexOf=function(e,r,n){var t=-1;return n&&(e=e.slice().reverse()),_.some(e,function(i,a){return!!r(i,a)&&(t=n?e.length-1-a:a,!0)}),t},GH.Util.swapArrayItems=function(e,r,n){var t;return!!(e&&r!==n&&Math.min(r,n)>=0&&Math.max(r,n)<e.length)&&(t=e[n],e[n]=e[r],e[r]=t,!0)},GH.Util.roundToDecimalPlaces=function(e,r){if("number"!=typeof e||e===Math.round(e))return e;if(0===r)return Math.round(e);var n=e.toString();if(n.indexOf("e")>=0)return e;var t=e<0,i=n.split("."),a=+i[1].charAt(r);if(i[1]=i[1].substr(0,r),a>5||!t&&5===a){var l=/^0*/.exec(i[1])[0];i[1]=l+(+i[1]+1),i[1].length>r&&(l?i[1]=i[1].substr(i[1].length-r):(i[0]=+i[0]+1,i[1]=0))}return parseFloat(i.join("."))};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/UserData.js' */
define("jira-agile/rapid/user-data",["jira/util/data/meta"],function(e){"use strict";var r={};return r.remoteUser=e.get("remote-user"),r.loggedIn=!!r.remoteUser,r.hasUser=function(){return r.loggedIn},r.getUserName=function(){return r.remoteUser},r.canCreateProject=function(){return r.userConfig.canCreateProject},r.canCreateBoard=function(){return r.userConfig&&r.userConfig.canCreateBoard},r.setGlobalConfig=function(e){r.quickCreateDefaultIssueTypeId=e.quickCreateDefaultIssueTypeId,r.setUserConfig(e.userConfig)},r.getUserConfig=function(){return r.userConfig},r.setUserConfig=function(e){r.userConfig=e},r}),AJS.namespace("GH.UserData",null,require("jira-agile/rapid/user-data"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/features/feature-flags.js' */
define("jira-agile/features/feature-flags",[],function(){var e=function(e,a){return{key:e,fallback:a}};return{WORK_MODE_DATA_CACHE:e("jsw.work.mode.data.cache",!1),EPIC_CREATE_IMPROVEMENT:e("agile.epic.create.improvement",!1),NEXT_3843_FIX_HISTORY_POPPED:e("next-3843-fix-history-popped",!1),BENTO_ISSUE_DETAILS_KEYBOARD_SHORTCUTS:e("issue.details.keyboard-shortcuts",!1),AGILE_BOARD_ISSUE_DIALOG_ON_PAGE_LOAD:e("agile-board-display-view-issue-dialog-onpageload",!1),ISSUE_DETAILS_BOARD_SIDEBAR:e("issue.details.board.sidebar",!1),ISSUE_DETAILS_SPRINT_AS_LINK:e("issue.details.sprint.as.link",!1),DEFER_FILTERS_AND_HANDLERS:e("compass.navigation.rapid.boards.defer-filters-and-handlers",!1)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh/navigation/Navigation.js' */
!function(){AJS.namespace("GH.Navigation");var a=require("jira-agile/rapid/ajax");GH.Navigation.gotoDefaultRapidBoardPage=function(a,i){window.location.href=GH.Navigation.getDefaultRapidBoardPageUrl(a,i)},GH.Navigation.gotoDefaultRapidBoardPageAfterSprintStarted=function(a){window.location.href=GH.Navigation.getCanonicRapidBoardPageUrl(a)+"&sprintStarted=true"},GH.Navigation.getDefaultRapidBoardPageUrl=function(a,i){var n=_.isUndefined(i)?"":"&view="+i;return GH.Navigation.getCanonicRapidBoardPageUrl(a)+n},GH.Navigation.getCanonicRapidBoardPageUrl=function(i){return a.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+i},GH.Navigation.getLoginUrl=function(){return a.CONTEXT_PATH+"/login.jsp?os_destination="+encodeURIComponent(window.location.href)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-cards', location = 'includes/js/rapid/ui/work/Card.soy' */
// This file was automatically generated from Card.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.card.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.card == 'undefined') { GH.tpl.rapid.card = {}; }


GH.tpl.rapid.card.card = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-issue ghx-newcard js-detailview js-issue' + ((opt_data.issue.parentKey) ? ' ghx-issue-subtask' : ' js-parent-drag') + ((! opt_data.isRankable) ? ' ghx-not-rankable' : '') + ((opt_data.issue.done) ? ' ghx-done' : '') + ((opt_data.selectedIssueKeys[opt_data.issue.key]) ? ' ghx-selected' + ((opt_data.mainSelectedIssue == opt_data.issue.key) ? ' ghx-selected-primary' : '') : '') + ((opt_data.issue.flagged) ? ' ghx-flagged' : '') + ((opt_data.issue.color) ? ' ghx-card-color-enabled' : '') + ' ghx-type-' + soy.$$escapeHtml(opt_data.issue.typeId) + '" data-issue-id="' + soy.$$escapeHtml(opt_data.issue.id) + '" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '"><section class="ghx-summary" title="' + soy.$$escapeHtml(opt_data.issue.summary) + '" data-tooltip="' + soy.$$escapeHtml(opt_data.issue.summary) + '">' + soy.$$escapeHtml(opt_data.issue.summary) + '</section>' + ((opt_data.showEpic && opt_data.issue.epicField) ? '<section><div class="ghx-row ghx-highlighted-field">' + GH.tpl.field.epicLink.renderEpicLink({field: opt_data.issue.epicField}) + '</div></section>' : '');
  if (opt_data.issue.extraFields) {
    output += '<section class="ghx-extra-fields">';
    var extraFieldList49 = opt_data.issue.extraFields;
    var extraFieldListLen49 = extraFieldList49.length;
    for (var extraFieldIndex49 = 0; extraFieldIndex49 < extraFieldListLen49; extraFieldIndex49++) {
      var extraFieldData49 = extraFieldList49[extraFieldIndex49];
      output += '<div class="ghx-row">' + GH.tpl.extraFields.renderExtraField({extraField: extraFieldData49}) + '</div>';
    }
    output += '</section>';
  }
  output += '<section class="ghx-stat-fields"><div class="ghx-row ghx-stat-1">' + ((opt_data.issue.typeUrl) ? '<span class="ghx-field ghx-field-icon" data-tooltip="' + soy.$$escapeHtml(opt_data.issue.typeName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '"></span>' : '') + ((opt_data.issue.flagged) ? '<span class="ghx-field ghx-flag-priority"><span class="aui-icon aui-icon-small" title="' + soy.$$escapeHtml('Flagged') + '"></span></span>' : (opt_data.issue.priorityUrl) ? '<span class="ghx-field ghx-field-icon" data-tooltip="' + soy.$$escapeHtml(AJS.format('{0} priority',opt_data.issue.priorityName)) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '"></span>' : '');
  var stat__soy75 = opt_data.issue.trackingStatistic ? opt_data.issue.trackingStatistic : opt_data.issue.estimateStatistic;
  output += ((stat__soy75 && stat__soy75.statFieldId != 'issueCount') ? '<span class="ghx-field">' + GH.tpl.rapid.card.statisticsValue({stat: stat__soy75, statLabel: opt_data.statLabel}) + '</span>' : '') + ((opt_data.issue.timeInColumn) ? '<span class="ghx-field">' + GH.tpl.rapid.card.daysInColumn({days: opt_data.issue.timeInColumn.days}) + '</span>' : '') + GH.tpl.rapid.card.renderCardAvatar(opt_data) + '</div><div class="ghx-row ghx-stat-2">' + GH.tpl.rapid.card.renderCardAvatar(opt_data) + '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" aria-label="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-tooltip="' + soy.$$escapeHtml(opt_data.issue.key) + '" tabindex="-1" class="ghx-key"><span class="ghx-issuekey-pkey js-key-link" aria-hidden="true">' + soy.$$escapeHtml(opt_data.displayIssueKey.pkey) + '</span><span class="ghx-issuekey-number js-key-link" aria-hidden="true">' + soy.$$escapeHtml(opt_data.displayIssueKey.number) + '-</span></a></div></section>' + ((opt_data.issue.color != null) ? '<div class="ghx-grabber" style="background-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"></div>' : '<div class="ghx-grabber ghx-grabber-transparent"></div>') + '<div class="ghx-move-count"><b></b></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.card.card.soyTemplateName = 'GH.tpl.rapid.card.card';
}


GH.tpl.rapid.card.statisticsValue = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy116 = '' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.stat.statFieldValue.text + ' ' + opt_data.statLabel) : soy.$$escapeHtml('Unestimated'));
  output += '<aui-badge class="ghx-estimate" data-tooltip="' + soy.$$escapeHtml(tooltip__soy116) + '">' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.stat.statFieldValue.text) : '-') + '</aui-badge>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.card.statisticsValue.soyTemplateName = 'GH.tpl.rapid.card.statisticsValue';
}


GH.tpl.rapid.card.renderCardAvatar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issue.assigneeName) ? '<span class="ghx-field">' + GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, tooltipHtml: soy.$$escapeHtml('Assignee') + ': ' + soy.$$escapeHtml(opt_data.issue.assigneeName)}) + '</span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.card.renderCardAvatar.soyTemplateName = 'GH.tpl.rapid.card.renderCardAvatar';
}


GH.tpl.rapid.card.daysInColumn = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy143 = '' + soy.$$escapeHtml(AJS.format('{0,choice,0#{0} days|1#{0} day|1\x3c{0} days} in this column',opt_data.days));
  var icon__soy145 = '' + ((opt_data.days >= 20) ? 'more-then-20' : (opt_data.days >= 12) ? 'more-then-12' : (opt_data.days >= 8) ? 'more-then-8' : (opt_data.days >= 5) ? 'more-then-5' : (opt_data.days >= 3) ? 'more-then-3' : (opt_data.days >= 2) ? 'more-then-2' : '');
  output += (opt_data.days >= 1) ? '<div class="ghx-days ' + soy.$$escapeHtml(icon__soy145) + '" data-tooltip="' + soy.$$escapeHtml(tooltip__soy143) + '"></div>' : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.card.daysInColumn.soyTemplateName = 'GH.tpl.rapid.card.daysInColumn';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-cards', location = 'includes/js/rapid/ui/plan/Card.soy' */
// This file was automatically generated from Card.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.planissuelist.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.planissuelist == 'undefined') { GH.tpl.planissuelist = {}; }


GH.tpl.planissuelist.renderIssueList = function(opt_data, opt_ignored) {
  var output = '';
  var issueList3 = opt_data.issues;
  var issueListLen3 = issueList3.length;
  for (var issueIndex3 = 0; issueIndex3 < issueListLen3; issueIndex3++) {
    var issueData3 = issueList3[issueIndex3];
    output += (issueData3.subTasks) ? (issueData3.fakeParent) ? '<div class="ghx-parent-newcard ghx-parent-group js-fake-parent js-parent-drag" data-fake-parent-issue-key="' + soy.$$filterNoAutoescape(issueData3.key) + '">' : '<div class="ghx-parent-newcard ghx-parent-group js-parent-drag ghx-subtasks-expandable ' + ((issueData3.expanded) ? 'ghx-subtasks-expanded' : '') + '" role="listitem" aria-label="' + soy.$$escapeHtml(issueData3.key) + ' ' + soy.$$escapeHtml(issueData3.summary) + '" data-issue-id="' + soy.$$filterNoAutoescape(issueData3.id) + '" data-issue-key="' + soy.$$filterNoAutoescape(issueData3.key) + '" >' : '';
    if (! issueData3.fakeParent) {
      var subTaskCount__soy30 = '' + ((issueData3.subTasks) ? soy.$$escapeHtml(issueData3.subTasks.length) : '0');
      output += GH.tpl.planissuelist.renderIssue({issue: issueData3, isOrphanedSubtask: issueData3.fakeParent, subTasksCount: subTaskCount__soy30, epic: issueData3.epic ? opt_data.epics[issueData3.epic] : null, selectedIssueKeys: opt_data.issueRenderData.selectedIssueKeys, mainSelectedIssue: opt_data.issueRenderData.mainSelectedIssue, statLabel: opt_data.statLabel, estimationEnabled: opt_data.estimationEnabled, isRankable: opt_data.isRankable, hiddenIssues: opt_data.issueRenderData.hiddenIssues, showEpic: opt_data.showEpic, isAgility: opt_data.isAgility});
    }
    if (issueData3.subTasks) {
      output += '<div class="ghx-subtask-group">';
      var subTaskList52 = issueData3.subTasks;
      var subTaskListLen52 = subTaskList52.length;
      for (var subTaskIndex52 = 0; subTaskIndex52 < subTaskListLen52; subTaskIndex52++) {
        var subTaskData52 = subTaskList52[subTaskIndex52];
        output += GH.tpl.planissuelist.renderIssue({issue: subTaskData52, isOrphanedSubtask: issueData3.fakeParent, subTasksCount: 0, epic: null, selectedIssueKeys: opt_data.issueRenderData.selectedIssueKeys, mainSelectedIssue: opt_data.issueRenderData.mainSelectedIssue, statLabel: opt_data.statLabel, estimationEnabled: opt_data.estimationEnabled, isRankable: opt_data.isRankable, hiddenIssues: opt_data.issueRenderData.hiddenIssues, showEpic: opt_data.showEpic, isAgility: opt_data.isAgility});
      }
      output += '</div>';
    }
    output += (issueData3.subTasks) ? '</div>' : '';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssueList.soyTemplateName = 'GH.tpl.planissuelist.renderIssueList';
}


GH.tpl.planissuelist.renderIssueCount = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-issue-count">';
  var numVisibleIssues__soy74 = opt_data.issueListStats.visibleCount;
  var numTotalIssues__soy75 = opt_data.issueListStats.statisticsFieldValue ? opt_data.issueListStats.statisticsFieldValue : opt_data.issueListStats.totalCount;
  output += GH.tpl.planissuelist.renderVisibleIssueCount({numVisibleIssues: numVisibleIssues__soy74, numTotalIssues: numTotalIssues__soy75}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssueCount.soyTemplateName = 'GH.tpl.planissuelist.renderIssueCount';
}


GH.tpl.planissuelist.renderVisibleIssueCount = function(opt_data, opt_ignored) {
  return '' + ((opt_data.numVisibleIssues == opt_data.numTotalIssues) ? soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.numTotalIssues)) : soy.$$escapeHtml(AJS.format('{1} of {0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues} visible',opt_data.numTotalIssues,opt_data.numVisibleIssues)) + '<a class="ghx-reset js-clear-all-filters" title="' + soy.$$escapeHtml('Issues are currently filtered. Click to clear all filters on this board.') + '">' + soy.$$escapeHtml('Clear all filters') + '</a>');
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderVisibleIssueCount.soyTemplateName = 'GH.tpl.planissuelist.renderVisibleIssueCount';
}


GH.tpl.planissuelist.renderIssue = function(opt_data, opt_ignored) {
  var output = '';
  var hasEpicLabel__soy92 = opt_data.epic && opt_data.epic.epicLabel || opt_data.issue.epicField;
  var hasVersionOrEpic__soy93 = opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0 || hasEpicLabel__soy92;
  output += '<div class="js-issue ghx-backlog-card ghx-newcard js-sortable' + ((opt_data.issue.parentKey) ? ' ghx-issue-subtask' : ' js-parent-drag') + ' ghx-issue-compact' + ((! opt_data.isRankable) ? ' ghx-not-rankable' : '') + ((opt_data.issue.done) ? ' ghx-done' : '') + ((opt_data.selectedIssueKeys[opt_data.issue.key]) ? ' ghx-selected' + ((opt_data.mainSelectedIssue == opt_data.issue.key) ? ' ghx-selected-primary' : '') : '') + ' ghx-type-' + soy.$$escapeHtml(opt_data.issue.typeId) + ((opt_data.hiddenIssues[opt_data.issue.key]) ? ' ghx-filtered' : '') + ((opt_data.issue.flagged) ? ' ghx-flagged' : '') + ((opt_data.issue.parentKey || opt_data.issue.parentId) ? ' ghx-subtask' : '') + ((opt_data.issue.shouldIndentTop) ? ' ghx-subtask-indent-top' : '') + ((opt_data.issue.color == null) ? ' ghx-no-card-color' : '') + ((opt_data.isAgility) ? ' agility-simplified-issue' : '') + '" data-issue-id="' + soy.$$escapeHtml(opt_data.issue.id) + '" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" ><div class="ghx-issue-content"><div class="ghx-row ghx-plan-main-fields">' + ((opt_data.issue.subTasks) ? '<a class="ghx-card-expander ghx-iconfont aui-icon aui-icon-small"></a>' : '<span class="ghx-backlog-card-expander-spacer"></span>') + ((opt_data.issue.typeUrl) ? '<span class="ghx-type items-spacer" title="' + soy.$$escapeHtml(opt_data.issue.typeName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '"></span>' : '') + '<div class="ghx-summary" data-tooltip="' + soy.$$escapeHtml(opt_data.issue.summary) + '"><span class="ghx-inner">' + soy.$$escapeHtml(opt_data.issue.summary) + '</span></div></div><div class="ghx-row ghx-end ghx-items-container">';
  var extraClass__soy155 = opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0 && (hasEpicLabel__soy92 || opt_data.isOrphanedSubtask) ? 'ghx-label-double' : 'ghx-label-single';
  output += (! opt_data.isAgility) ? (opt_data.subTasksCount > 0) ? GH.tpl.planissuelist.renderSubTasksCount({count: opt_data.subTasksCount}) : '' : '';
  if (! opt_data.isAgility) {
    if (hasVersionOrEpic__soy93 || ! opt_data.issue.extraFields) {
      if (opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0) {
        var extraClasses__soy168 = ['ghx-label-version', 'ghx-label', extraClass__soy155];
        var extraAttributes__soy169 = {title: opt_data.issue.fixVersionsUI.formattedVersions};
        if (opt_data.issue.fixVersionsUI.versions.length > 1) {
          var text__soy172 = soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions.length) + ' ' + soy.$$escapeHtml('Versions');
          output += GH.tpl.field.issueLabel.renderLabel({extraClasses: extraClasses__soy168, text: text__soy172, extraAttributes: extraAttributes__soy169}) + ' ';
        } else {
          output += GH.tpl.field.issueLabel.renderLabel({extraClasses: extraClasses__soy168, text: opt_data.issue.fixVersionsUI.versions[0].name, extraAttributes: extraAttributes__soy169}) + ' ';
        }
      }
      output += (opt_data.showEpic) ? (opt_data.epic && opt_data.epic.epicLabel) ? GH.tpl.field.epicLink.renderEpicLinkFromIssue({epic: opt_data.epic, extraClasses: 'ghx-label ' + extraClass__soy155}) + ' ' : (opt_data.issue.epicField) ? GH.tpl.field.epicLink.renderEpicLink({field: opt_data.issue.epicField, extraClasses: 'ghx-label ' + extraClass__soy155}) + ' ' : '' : '';
    }
  }
  output += ((opt_data.isOrphanedSubtask) ? GH.tpl.field.issueLabel.renderOrphanedSubtaskLabel({parentKey: opt_data.issue.parentKey, extraClasses: 'ghx-label ghx-orphaned-subtask ' + extraClass__soy155}) + ' ' : '') + '<span class="ghx-end ghx-items-container">' + GH.tpl.planissuelist.renderAvatarAndEstimate(opt_data) + '</span></div>';
  if (! opt_data.isAgility) {
    if (opt_data.issue.extraFields) {
      output += '<div class="ghx-plan-extra-fields ghx-plan-extra-fields-' + soy.$$escapeHtml(opt_data.issue.extraFields.length) + ' ghx-row">';
      var extraFieldList220 = opt_data.issue.extraFields;
      var extraFieldListLen220 = extraFieldList220.length;
      for (var extraFieldIndex220 = 0; extraFieldIndex220 < extraFieldListLen220; extraFieldIndex220++) {
        var extraFieldData220 = extraFieldList220[extraFieldIndex220];
        output += ((! (extraFieldIndex220 == 0)) ? '<span class="ghx-extra-field-seperator">&middot;</span>' : '') + GH.tpl.extraFields.renderExtraField({extraField: extraFieldData220});
      }
      output += '</div>';
    }
  }
  output += '</div>' + ((opt_data.issue.color != null) ? '<div class="ghx-grabber" style="background-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"></div>' : '<div class="ghx-grabber ghx-grabber-transparent"></div>') + '<div class="ghx-move-count"><b></b></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssue.soyTemplateName = 'GH.tpl.planissuelist.renderIssue';
}


GH.tpl.planissuelist.renderAvatarAndEstimate = function(opt_data, opt_ignored) {
  return GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, tooltipHtml: soy.$$escapeHtml('Assignee') + ': ' + soy.$$escapeHtml(opt_data.issue.assigneeName)}) + '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" title="' + soy.$$escapeHtml(opt_data.issue.key) + '" class="ghx-key js-key-link">' + soy.$$escapeHtml(opt_data.issue.key) + '</a>' + ((opt_data.issue.flagged) ? '<span class="ghx-flag ghx-flag-priority"><span class="aui-icon" title="' + soy.$$escapeHtml('Flagged') + '"></span></span>' : (opt_data.issue.priorityUrl) ? '<span class="ghx-priority" title="' + soy.$$escapeHtml(opt_data.issue.priorityName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '"></span>' : '') + ((! opt_data.isAgility) ? (opt_data.estimationEnabled) ? GH.tpl.planissuelist.renderStatisticsValue({stat: opt_data.issue.estimateStatistic, label: opt_data.statLabel}) : '' : '');
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderAvatarAndEstimate.soyTemplateName = 'GH.tpl.planissuelist.renderAvatarAndEstimate';
}


GH.tpl.planissuelist.renderStatisticsValue = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.stat && opt_data.stat.statFieldId != 'issueCount') {
    var badgetext__soy274 = '' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.stat.statFieldValue.text) : '-');
    output += aui.badges.badge({extraClasses: ['ghx-estimate-badge'], text: badgetext__soy274, extraAttributes: {title: opt_data.label}, extraClasses: ['ghx-statistic-badge']});
  } else {
    output += aui.badges.badge({text: '', extraClasses: ['ghx-spacer', 'ghx-statistic-badge']});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderStatisticsValue.soyTemplateName = 'GH.tpl.planissuelist.renderStatisticsValue';
}


GH.tpl.planissuelist.renderSubTasksCount = function(opt_data, opt_ignored) {
  return '<span class="ghx-sub-tasks-count">' + soy.$$escapeHtml(AJS.format('{0} {0,choice,1#sub-task|1\x3csub-tasks}',opt_data.count)) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderSubTasksCount.soyTemplateName = 'GH.tpl.planissuelist.renderSubTasksCount';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/dialog.js' */
AJS.namespace("GH.Dialog"),GH.Dialog.baseExtension={_getDefaultOptions:function(){return AJS.$.extend(this._super(),{onDialogFinished:function(){this.handleSuccess()}})},_performRedirect:function(){this.redirected=!0,this.handleSuccess()},hide:function(e,n){return JIRA.Dialog.current===this&&(this._super(e),void(n===!0||!n||n.reason!==JIRA.Dialog.HIDE_REASON.escape&&n.reason!==JIRA.Dialog.HIDE_REASON.cancel||this.doCancelCleanup()))},doCancelCleanup:function(){},handleSuccess:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/rapid/ops/DialogExtension.js' */
AJS.namespace("GH.Dialog.XBoardExtension"),GH.Dialog.XBoardExtension.getActionInfo=function(e){var t="workflow-transition-",a=e.options.id;return a.substring(0,t.length)===t?{formId:a,isTransition:!0,transitionId:a.substring(t.length)}:{formId:a,isTransition:!1}},GH.Dialog.XBoardExtension.handleSuccess=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),this.hide(!0,!0),this._hideloadingIndicator();var e=GH.Dialog.XBoardExtension.getActionInfo(this),t=GH.IssueOperationShortcuts.getSelectedIssueId(),a=GH.IssueOperationShortcuts.getSelectedIssueKey();GH.WorkController.isActive()?GH.Dialog.handleWorkModeUpdate(t,a,e):GH.PlanController.isActive()&&GH.Dialog.handlePlanModeUpdate(t,a,e),GH.Notification.showIssueMessage(t),GH.WorkDragAndDrop.transitionTargetStatus=void 0},GH.Dialog.handlePlanModeUpdate=function(e,t,a){if(!GH.IssueOperationShortcuts.isOverrideSelectedIssueActive()){var o=0,r=null,s=GH.BacklogModel.findModelWithIssue(t);s&&(GH.SprintModel.isSprintModel(s)&&(r=s.getSprintId()),o=s.getIssueList().getIssueIndex(t)),GH.PlanController.reload(function(){var e=GH.BacklogSelectionController.getSelectedIssueKey();if(!e){var t=null;r&&(t=GH.BacklogModel.getSprintModel(r)),t||(t=GH.BacklogModel.getBacklogModel2()),GH.BacklogSelectionController.selectIssue(t.getIssueList().getIssueKeyAtIndex(o))}})}},GH.Dialog.handleWorkModeUpdate=function(e,t,a){var o=GH.Dialog.createParentCompletedCheckCallback(t),r=GH.Dialog.createSelectMostAppropriateIssueCallback(t);if(a.isTransition)if(GH.WorkDragAndDrop.transitionTargetStatus){var s=GH.WorkDragAndDrop.transitionTargetStatus,n=GH.GridDataController.getModel(),l=n.getIssueDataByKey(t),i=n.getIssuePositionByKey(t),d=n.getColumns(),u=i.columnId,c=GH.GridColumnsData.getColumnIdForStatus(d,s);n.moveIssueToColumn(t,u,c),l.status=s,n.updateIssueData(l),GH.SwimlaneView.rerenderCell(i.swimlaneId,u),GH.SwimlaneView.rerenderCell(i.swimlaneId,c),o()}else GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"ParentWithAllSubsCompletedCheck",o);GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"SelectMostAppropriateIssueCallback",r),GH.WorkController.reload()},GH.Dialog.createParentCompletedCheckCallback=function(e){return function(){var t=GH.GridDataController.getModel();if(!_.isUndefined(t.data.issues[e])&&!_.isUndefined(t.data.issues[e].parentKey)){var a=t.data.issues[e].parentKey;if(_.contains(t.data.columnIssueMapping[_.last(t.data.columns).id],e)){var o=t.data.columnIssueMapping[_.last(t.data.columns).id],r=_.reduce(_.toArray(t.data.issues),function(e){return!_.contains(o,e)}),s=_.find(r,function(e){return t.data.issues[e].parentKey===a});s||GH.WorkController.resolveParentTask(t.data.issues[a])}}}},GH.Dialog.createSelectMostAppropriateIssueCallback=function(e){var t=GH.GridDataController.getModel().getIssuePositionByKey(e);return function(){var a=GH.GridDataController.getModel().getIssueDataByKey(e);if(!a){var o=GH.GridDataController.getModel().getIssueKeyAtPosition(t);o?(GH.WorkSelectionController.selectIssue(o,{pushState:!1,dontUpdateUI:!0}),GH.RapidBoard.State.replaceState()):(GH.WorkSelectionController.selectIssue(void 0,{pushState:!1,dontUpdateUI:!0}),GH.RapidBoard.State.replaceState())}}},GH.Dialog.XBoardExtension.doCancelCleanup=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),GH.WorkDragAndDrop.transitionTargetStatus=void 0};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/form-dialog.js' */
!function(){"use strict";var o=require("jira/dialog/form-dialog");AJS.namespace("GH.FormDialog"),GH.FormDialog=o.extend(GH.Dialog.baseExtension),GH.FormDialog=GH.FormDialog.extend(GH.Dialog.XBoardExtension)}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/labels-dialog.js' */
define("jira-agile/dialog/labels-dialog",["jira/dialog/labels-dialog"],function(i){var n=i.extend(GH.Dialog.baseExtension);return n=n.extend(GH.Dialog.XBoardExtension),n=n.extend({_handleSubmitResponse:function(i,n,t){this.serverIsDone&&(this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,i,n,t),this.options.autoClose&&this.hide(),this.options.onDialogFinished&&this.options.onDialogFinished.call(this,i,n,t))},decorateContent:function(){this._super();var i=this.get$popupContent(),n=i.find("input[name=customFieldId]");if(1===n.length){var t=i.find("#hint");t.hide()}}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/rapid/ui/dialog/DialogUtil.js' */
AJS.namespace("GH.Dialog"),GH.Dialog.create=function(n){AJS.$("#"+n.id).remove(),n=_.defaults(n,{bindEscape:!0});var e=new AJS.Dialog(n),i=e.show,a=n&&n.analyticsPageName,o=function(){GH.Dialog.preShow(),GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv),GH.Notification.Handler.setCustomDivStyleHandler(function(){return""}),i.call(e),GH.Dialog.sendAnalyticsPageEvent(a);var o=AJS.$("#"+n.id).find(".dialog-button-panel .aui-button");o.is(":enabled")&&o.focus(),AJS.$("#"+n.id).addClass("ghx-dialog")};return _.extend(e,{dispose:GH.Dialog.generateCloseHandler(e),cancel:GH.Dialog.generateCloseHandler(e,n.onCancelFn),submit:GH.Dialog.generateCloseHandler(e,n.onConfirmFn),show:o,disableControls:GH.Dialog.generateDisableControlsFn(e),enableControls:GH.Dialog.generateEnableControlsFn(e),showSpinner:GH.Dialog.generateShowSpinnerFn(e),hideSpinner:GH.Dialog.generateHideSpinnerFn(e)}),GH.Dialog.bindEscapeHandler(e,!n.bindEscape),e},GH.Dialog.prepareNotificationDiv=function(){var n=AJS.$(".dialog-page-body:visible"),e=n.find(".dialog-panel-body:first-child");return 0==e.length&&(e=AJS.$("<div/>").addClass("dialog-panel-body").prependTo(n)),AJS.$("<div/>").prependTo(e)},GH.Dialog.addCancelButton=function(n){n.addCancel("Cancel",function(e){n.cancel(n)})},GH.Dialog.bindEscapeHandler=function(n,e){e?JIRA.bind("Dialog.beforeHide",function(e,i,a,o){o===n.id&&a===JIRA.Dialog.HIDE_REASON.escape&&e.preventDefault()}):AJS.$(document).bind("keyup."+n.id,function(e){27==e.keyCode&&n.cancel(n)})},GH.Dialog.generateCloseHandler=function(n,e){return function(){return n.remove(),GH.Dialog.undim(),AJS.$(document).unbind("keyup."+n.id),AJS.unbind("remove.dialog"),e&&e(n),GH.Notification.Handler.removeCustomHandlers(),!1}},GH.Dialog.generateDisableControlsFn=function(n){return function(){AJS.$("#"+n.id+" button").attr("disabled","disabled")}},GH.Dialog.generateEnableControlsFn=function(n){return function(){AJS.$("#"+n.id+" button").removeAttr("disabled")}},GH.Dialog.generateShowSpinnerFn=function(n){return function(){AJS.$("#"+n.id).find(".button-panel-cancel-link").css("visibility","hidden").before('<span class="ghx-spinner"/>')}},GH.Dialog.generateHideSpinnerFn=function(n){return function(){AJS.$("#"+n.id).find(".ghx-spinner").remove().end().find(".button-panel-cancel-link").css("visibility","visible")}},GH.Dialog.sanitizeAJSDim=function(){var n=AJS.dim;AJS.dim=function(){try{n.apply(this,arguments)}catch(e){}}},GH.Dialog.registerDialog=function(n,e,i){AJS.$(document).undelegate(n,"click").delegate(n,"click",function(n){var a=AJS.$(this);a.hasClass("disabled")||(n.preventDefault(),e(n,i))})},GH.Dialog.dim=function(){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>')},GH.Dialog.undim=function(){AJS.undim(),AJS.$(".aui-blanket").empty()},GH.Dialog.preShow=function(){AJS.$(".aui-blanket").empty()},GH.Dialog.sendAnalyticsPageEvent=function(n){var e=require("jira/analytics/web-client");n&&"string"==typeof n&&n.length>0&&e.sendPageEvent(n)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'includes/js/rapid/ui/persistent-messages/CreateViewMessage.js' */
AJS.namespace("GH.PersistentMessages.CreateViewMessage"),GH.PersistentMessages.CreateViewMessage.setView=function(e,s,a,t){var r={id:e,name:s,type:a,subType:t};GH.storage.put("gh.createViewMessage",r,!0)},GH.PersistentMessages.CreateViewMessage.clear=function(){GH.storage.put("gh.createViewMessage",null,!0)},GH.PersistentMessages.CreateViewMessage.renderMessage=function(){var e=GH.storage.get("gh.createViewMessage",!0);if(e&&"simple"!==e.type){e.name=AJS.escapeHTML(String(e.name));var s;"advanced"==e.type?s=GH.tpl.board.x.renderCreateViewMessage:"kanban"==e.subType?s=GH.tpl.board.x.renderWelcomeViewMessageKanban:"scrum"==e.subType&&(s=GH.tpl.board.x.renderWelcomeViewMessageScrum);var a=s({rapidView:e,url:AJS.parseUri(window.location.href)});GH.Notification.showSuccess(a,{title:"Success",timeout:1e4}),GH.PersistentMessages.CreateViewMessage.clear()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'includes/js/rapid/ui/persistent-messages/WelcomeMessage.js' */
AJS.namespace("GH.PersistentMessages.WelcomeMessage"),GH.PersistentMessages.WelcomeMessage.show=function(e){GH.storage.put("gh.welcomeMessage",e,!0)},GH.PersistentMessages.WelcomeMessage.renderMessage=function(){var e=GH.storage.get("gh.welcomeMessage",!0);if(e&&"simple"!==e.preset){var s=null;e.rapidView.name=AJS.escapeHTML(String(e.rapidView.name)),e.project.name=AJS.escapeHTML(String(e.project.name));var a=null;/kanban/.test(e.preset)?a=e.sample?GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban:GH.tpl.board.x.renderWelcomeProjectMessageKanban:/scrum/.test(e.preset)&&(a=e.sample?GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum:GH.tpl.board.x.renderWelcomeProjectMessageScrum),s=a({project:e.project,rapidView:e.rapidView,url:AJS.parseUri(window.location.href)}),GH.Notification.showSuccess(s,{title:"Success",timeout:1e4}),GH.storage.put("gh.welcomeMessage",null,!0)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-board-location-picker', location = 'includes/js/boardlocation/location-type.js' */
define("jira-agile/boardlocation/location-type",[],function(){"use strict";var e={project:"project",user:"user"};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-board-location-picker', location = 'includes/js/boardlocation/board-location-picker.js' */
define("jira-agile/boardlocation/board-location-picker",["jira-agile/rapid/ajax","jira-agile/boardlocation/location-type"],function(e,t){"use strict";var r=function(t){if(!t||!t.selector)throw new Error("Board location picker requires a selector");this.$select=AJS.$(t.selector),this.useSingleSelect=Boolean(t.useSingleSelect),this.filterSoftwareProjects=Boolean(t.filterSoftwareProjects),this.selectedItems=t.selectedItems||{},this.projectsOnly=t.projectsOnly||!1,this.change=t.change||function(){},t.currentProjectId&&(this.currentProjectId=t.currentProjectId,this.currentProject=null),this.restUrl=this.projectsOnly?"/project.json":"/boardLocation.json",this.restUrl=this.filterSoftwareProjects&&this.projectsOnly?this.restUrl+="?isSoftware=true":this.restUrl;var r=this.useSingleSelect?AJS.SingleSelect:AJS.MultiSelect;this.selectPicker=new r({element:this.$select,width:300,itemAttrDisplayed:"label",ajaxOptions:{query:!0,url:e.buildRestUrl(this.restUrl),formatResponse:this._processAjax.bind(this)}}),this.useSingleSelect&&this.selectedItems&&this.selectPicker.setSelection(this.selectedItems),"function"==typeof t.change&&(this.$select.bind("unselect",this.change),this.$select.bind("change",this.change)),"function"==typeof t.focusout&&this.selectPicker.$container.bind("focusout",t.focusout),this.currentProjectId&&this.selectPicker.requestSuggestions(!0).then(function(){this.currentProject&&this.selectPicker.addItem(this._getProjectDescriptor(this.currentProject))}.bind(this))};return r.prototype.show=function(){AJS.warn("BoardLocationPicker.show is deprecated. It is no longer needed as all initialisation occurs in the constructor")},r.prototype.hasValue=function(){return Boolean(this.$select.val())},r.prototype.hasErrors=function(){return this.selectPicker.$container.parent().find(".error").length>0},r.prototype.getValue=function(){return this.$select.val()},r.prototype.getElement=function(){return this.$select},r.prototype.setSelectedItems=function(e){return this.selectPicker.setSelection(e)},r.prototype._findProject=function(e,t){return(e||[]).filter(function(e){return t&&e.id===t}.bind(this))[0]},r.prototype._findUnmatchingProjects=function(e,t){return(e||[]).filter(function(e){return!t||e.id!==t}.bind(this))},r.prototype._processAjax=function(e){if(!(e&&(e.projects&&e.projects.length||e.user)))return[];this.currentProject=this._findProject(e.projects,this.currentProjectId);var t=this._findUnmatchingProjects(e.projects,this.currentProjectId).map(this._getProjectDescriptor.bind(this)),r=new AJS.GroupDescriptor({weight:1,label:"Projects"}),i=new AJS.GroupDescriptor({weight:2,label:"Personal"});if(this.currentProject){var o=[this._getProjectDescriptor(this.currentProject)].concat(t);o.forEach(function(e){r.addItem(e)})}else t.forEach(function(e){r.addItem(e)});if(Boolean(e.user)){var n=this._getUserDescriptor(e.user);return null!==n&&i.addItem(n),[r,i]}return[r]},r.prototype._getProjectDescriptor=function(e){if(!e)throw new Error("BoardLocationPicker.prototype._getProjectDescriptor requires a project");return new AJS.ItemDescriptor({value:"project_"+String(e.id),key:String(e.key),label:e.displayName,name:e.name,html:AJS.escapeHTML(String(e.displayName)),icon:e.avatar,locationType:t.project})},r.prototype._getUserDescriptor=function(e){return e?new AJS.ItemDescriptor({value:"user_"+String(e.id),key:null,label:e.displayName,name:e.name,html:AJS.escapeHTML(String(e.displayName)),icon:e.avatar,locationType:t.user}):null},r}),AJS.namespace("GH.BoardLocationPicker",null,require("jira-agile/boardlocation/board-location-picker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/startwizard/WizardView.soy' */
// This file was automatically generated from WizardView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.startwizard.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.startwizard == 'undefined') { GH.tpl.startwizard = {}; }


GH.tpl.startwizard.renderMethodologySelectionStep = function(opt_data, opt_ignored) {
  return '<form class="aui ' + ((opt_data.canCreateProject) ? 'ghx-trisected-vertical' : 'ghx-halved-vertical') + '"><div class="aui-group">' + ((opt_data.canCreateProject) ? '<div class="aui-item"><h2>' + soy.$$escapeHtml('Agility') + '</h2><p>' + soy.$$escapeHtml('Agility provides an easy, simplified board that delivers more power as you need it, enabling your team to get up-and-running fast.') + '</p></div>' : '') + '<div class="aui-item"><h2>' + soy.$$escapeHtml('Scrum') + '</h2><p>' + soy.$$escapeHtml('Scrum focuses on planning, committing and delivering time-boxed chunks of work called Sprints') + '</p></div><div class="aui-item"><h2>' + soy.$$escapeHtml('Kanban') + '</h2><p>' + soy.$$escapeHtml('Kanban focuses on visualising your workflow and limiting work-in-progress to facilitate incremental improvements to your existing process') + '</p></div></div><div class="aui-group ghx-button-group">' + ((opt_data.canCreateProject) ? '<div class="aui-item"><button id="ghx-wizard-methodology-simple" class="aui-button">' + soy.$$escapeHtml('Create an agility board') + '</button></div>' : '') + '<div class="aui-item"><button id="ghx-wizard-methodology-scrum" class="aui-button">' + soy.$$escapeHtml('Create a Scrum board') + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban" class="aui-button">' + soy.$$escapeHtml('Create a Kanban board') + '</button></div></div>' + ((opt_data.isSampleDataAvailable && opt_data.canCreateProject) ? '<div class="aui-group"><div class="aui-item"></div><div class="aui-item"><button id="ghx-wizard-methodology-scrum-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml('Create a Scrum board with sample data') + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml('Create a Kanban board with sample data') + '</button></div></div>' : '') + '</form>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodologySelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodologySelectionStep';
}


GH.tpl.startwizard.renderMethodSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split" id="js-method-choice"><div class="aui-item"><form class="aui"><fieldset class="group ghx-space-saver">' + ((opt_data.canCreateProject) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-new-project" name="ghx-wizard-method" value="newProject" ' + ((opt_data.selectedOption == 'newProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-new-project">' + soy.$$escapeHtml('Board created with new Software project') + '</label><div class="description">' + soy.$$escapeHtml('A new board based on a new Software project') + '</div></div>' : '') + ((opt_data.hasProjectsAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-project" name="ghx-wizard-method" value="existingProject" ' + ((opt_data.selectedOption == 'existingProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-project">' + soy.$$escapeHtml('Board from an existing project') + '</label><div class="description">' + soy.$$escapeHtml('Boards can contain one or more projects.') + '</div></div>' : '') + ((opt_data.hasFiltersAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-filter" name="ghx-wizard-method" value="existingFilter" ' + ((opt_data.selectedOption == 'existingFilter') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-filter">' + soy.$$escapeHtml('Board from an existing Saved Filter') + '</label><div class="description">' + soy.$$escapeHtml('An advanced option using a JQL filter.') + '</div></div>' : '') + '</fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodSelectionStep';
}


GH.tpl.startwizard.renderProjectSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-project-board-name">' + soy.$$escapeHtml('Board name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-project-board-name" maxlength="155"></div><div class="field-group"><label for="projects">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-choose-project" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml('Select one or more projects to include in this board') + '</div></div><div class="field-group" id="ghx-board-location-picker-for-multiple-project"><label for="ghx-field-board-location-change-for-multiple-project">' + soy.$$escapeHtml('Location') + '<span class="aui-icon icon-required"></span></label><div id="ghx-field-board-location-change-for-multiple-project" class="field-value ghx-spinner"></div></div></fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectSelectionStep';
}


GH.tpl.startwizard.renderFilterSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui"><fieldset><div class="field-group"><label for="ghx-wizard-filter-view-name">' + soy.$$escapeHtml('Board name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-filter-view-name" name="name" maxlength="155"></div><div class="field-group" id="ghx-filter-picker"><label for="ghx-wizard-filter-select">' + soy.$$escapeHtml('Saved filter') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-filter-select" class="hidden"></select><div id="ghx-filter-error"></div></div><div id="ghx-create-permissioninfo-container"></div><div class="field-group" id="ghx-board-location-picker-for-filter"><label for="ghx-field-board-location-change-for-filter">' + soy.$$escapeHtml('Location') + '<span class="aui-icon icon-required"></span></label><div id="ghx-field-board-location-change-for-filter" class="field-value ghx-spinner"></div></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml('Saved Filters') + '</h3><div class="description">' + soy.$$escapeHtml('Choose from a list of existing filters as a base for your new board. To create a new Saved Filter, save a search in the Issue Navigator.') + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderFilterSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderFilterSelectionStep';
}


GH.tpl.startwizard.renderProjectCreationStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname">' + soy.$$escapeHtml('Project name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectName) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey">' + soy.$$escapeHtml('Project key') + '<span class="aui-icon icon-required"></span></label><input class="text short-field" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectKey) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead">' + soy.$$escapeHtml('Project lead') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead" class="js-default-user-picker hidden"><option' + ((opt_data.user.avatarUrl) ? ' style="background-image:url(\'' + soy.$$escapeHtml(opt_data.user.avatarUrl) + '\')"' : '') + 'selected="selected" value="' + soy.$$escapeHtml(opt_data.user.name) + '">' + soy.$$escapeHtml(opt_data.user.displayName) + '</option></select><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches.') + '</div></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml('Creating a project') + '</h3>' + ((opt_data.methodology == 'simple') ? '<div class="description">' + soy.$$escapeHtml('A board will be created with your project, and will be named after your project.') + '</div>' : '<div class="description">' + soy.$$escapeHtml('A board will be created with your project, and will be named after your project. You can rename your board in the board settings screen.') + '</div>') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectCreationStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectCreationStep';
}


GH.tpl.startwizard.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml('Shares') + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + '</div><div class="field-group"><label>' + soy.$$escapeHtml('Owner') + '</label><span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.owner.displayName) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderPermissionInfo.soyTemplateName = 'GH.tpl.startwizard.renderPermissionInfo';
}


GH.tpl.startwizard.createProjectTimeout = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('The operation has timed out, the project and board might have been created already. You can confirm this by checking the \x3ca href\x3d\x22{0}\x22\x3eManage Boards\x3c/a\x3e page.',opt_data.manageBoardURL));
};
if (goog.DEBUG) {
  GH.tpl.startwizard.createProjectTimeout.soyTemplateName = 'GH.tpl.startwizard.createProjectTimeout';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/configuration/RapidView.soy' */
// This file was automatically generated from RapidView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.view.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.view == 'undefined') { GH.tpl.rapid.view = {}; }


GH.tpl.rapid.view.renderConfigurationHeader = function(opt_data, opt_ignored) {
  return ((GH.tpl.adg3Enabled) ? JIRA.Templates.Headers.breadcrumbs(null) : '') + '<div id="ghx-modes-tools">' + aui.buttons.button({text: 'Back to board', type: 'subtle', href: GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidViewId + '&useStoredSettings=true', id: 'back-to-board', iconType: 'aui', iconText: 'Back to board', iconClass: 'aui-icon-small aui-iconfont-back-page'}) + '</div><h2>' + soy.$$escapeHtml('Settings for') + ' <span id="js-nav-view-name">' + soy.$$escapeHtml(opt_data.name) + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationHeader.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationHeader';
}


GH.tpl.rapid.view.renderConfigurationTabs = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-config-header"></div><div class="aui-page-panel"><div class="aui-page-panel-inner"><div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml('Settings') + '</strong></div><ul id="ghx-config-nav" class="aui-nav">';
  var configurationTabList24 = opt_data.configurationTabs;
  var configurationTabListLen24 = configurationTabList24.length;
  for (var configurationTabIndex24 = 0; configurationTabIndex24 < configurationTabListLen24; configurationTabIndex24++) {
    var configurationTabData24 = configurationTabList24[configurationTabIndex24];
    output += '<li data-tabitem="' + soy.$$escapeHtml(configurationTabData24.key) + '"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=' + soy.$$escapeHtml(configurationTabData24.key) + '">' + soy.$$escapeHtml(configurationTabData24.label) + '</a></li>';
  }
  output += '</ul></div></nav></div><section id="ghx-config-panel-content" class="aui-page-panel-content">';
  var configurationTabList38 = opt_data.configurationTabs;
  var configurationTabListLen38 = configurationTabList38.length;
  for (var configurationTabIndex38 = 0; configurationTabIndex38 < configurationTabListLen38; configurationTabIndex38++) {
    var configurationTabData38 = configurationTabList38[configurationTabIndex38];
    output += '<div class="ghx-page-panel-content-item" id="' + soy.$$escapeHtml(configurationTabData38.key) + '">' + soy.$$filterNoAutoescape(configurationTabData38.html) + '</div>';
  }
  output += '</section></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationTabs.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationTabs';
}


GH.tpl.rapid.view.renderViewNameEditForm = function(opt_data, opt_ignored) {
  return '<label for="ghx-field-viewname">' + soy.$$escapeHtml('Board name') + '</label>' + GH.tpl.rapid.view.renderViewNameField(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameEditForm';
}


GH.tpl.rapid.view.renderViewNameField = function(opt_data, opt_ignored) {
  return '<span class="field-value ' + ((opt_data.canEdit) ? 'js-edit-rapidViewName' : '') + '" data-fieldname="viewname" data-fieldvalue="' + soy.$$escapeHtml(opt_data.rapidViewName) + '"><span id="ghx-field-viewname" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>' + soy.$$escapeHtml(opt_data.rapidViewName) + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameField.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameField';
}


GH.tpl.rapid.view.renderViewBoardAdminsEditForm = function(opt_data, opt_ignored) {
  var output = '<label for="ghx-field-view-board-admins">' + soy.$$escapeHtml('Administrators') + '</label><span  class="field-value' + ((opt_data.canEdit) ? ' js-edit-rapidViewBoardAdmin' : '') + '" ><span id="ghx-field-view-board-admins-span" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>';
  var itemList80 = opt_data.model;
  var itemListLen80 = itemList80.length;
  if (itemListLen80 > 0) {
    for (var itemIndex80 = 0; itemIndex80 < itemListLen80; itemIndex80++) {
      var itemData80 = itemList80[itemIndex80];
      output += soy.$$escapeHtml(itemData80.displayName) + ((! (itemIndex80 == itemListLen80 - 1)) ? '<span>, </span>' : '');
    }
  } else {
    output += '<span class="ghx-fa">' + soy.$$escapeHtml('None') + '</span>';
  }
  output += '</span></span><span id="ghx-field-view-board-admins">' + ((opt_data.canUsePicker) ? '<select id="ghx-board-admins" multiple="multiple" class="hidden"></select>' : '') + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewBoardAdminsEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewBoardAdminsEditForm';
}


GH.tpl.rapid.view.renderViewBoardLocationForm = function(opt_data, opt_ignored) {
  return '' + ((opt_data.rapidViewBoardLocation) ? '<label for="' + soy.$$escapeHtml(opt_data.ghxBoardLocationChangeId) + '-select">' + soy.$$escapeHtml('Location') + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><span id="' + soy.$$escapeHtml(opt_data.ghxBoardLocationChangeId) + '" class="field-value' + ((opt_data.canEdit) ? ' ghx-editable ghx-ss' : '') + '">' + ((opt_data.rapidViewBoardLocation.avatarURI) ? '<span class="aui-avatar aui-avatar-small aui-avatar-project jira-system-avatar"><span class="aui-avatar-inner"><img src=' + soy.$$escapeHtml(opt_data.rapidViewBoardLocation.avatarURI) + '></span></span>' : '') + '<span>' + soy.$$escapeHtml(opt_data.rapidViewBoardLocation.name) + '</span></span><select id="' + soy.$$escapeHtml(opt_data.ghxBoardLocationChangeId) + '-select" class="hidden"></select>' + ((opt_data.showHelp) ? '<div class="description">' + soy.$$escapeHtml('Select a Software project or your own profile as the place where this board will live') + '</div>' : '') : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewBoardLocationForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewBoardLocationForm';
}


GH.tpl.rapid.view.renderBoardAdminsEditNoPicker = function(opt_data, opt_ignored) {
  var output = '<span class="ghx-margin-right"><strong>' + soy.$$escapeHtml('Groups') + '</strong>: <input class="text medium-field" id="ghx-board-admin-edit-groups" value="';
  var itemList131 = opt_data.model.groupKeys;
  var itemListLen131 = itemList131.length;
  for (var itemIndex131 = 0; itemIndex131 < itemListLen131; itemIndex131++) {
    var itemData131 = itemList131[itemIndex131];
    output += soy.$$escapeHtml(itemData131.key) + ((! (itemIndex131 == itemListLen131 - 1)) ? ',' : '');
  }
  output += '" /></span><strong>' + soy.$$escapeHtml('Users') + '</strong>: <input class="text medium-field " id="ghx-board-admin-edit-users" value="';
  var itemList140 = opt_data.model.userKeys;
  var itemListLen140 = itemList140.length;
  for (var itemIndex140 = 0; itemIndex140 < itemListLen140; itemIndex140++) {
    var itemData140 = itemList140[itemIndex140];
    output += soy.$$escapeHtml(itemData140.key) + ((! (itemIndex140 == itemListLen140 - 1)) ? ',' : '');
  }
  output += '" /><div class="description">' + soy.$$escapeHtml('Separate user keys and group names with commas.') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderBoardAdminsEditNoPicker.soyTemplateName = 'GH.tpl.rapid.view.renderBoardAdminsEditNoPicker';
}


GH.tpl.rapid.view.renderConfigPermissionsWarning = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.canEdit != true) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + ((opt_data.model.parentProject) ? '<strong>' + soy.$$escapeHtml('Contact your project admin or board admin to update the board settings') + '</strong>' : '<strong>' + soy.$$escapeHtml('Contact a Jira or Board Administrator to configure this board.') + '</strong>') + '</p></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigPermissionsWarning.soyTemplateName = 'GH.tpl.rapid.view.renderConfigPermissionsWarning';
}


GH.tpl.rapid.view.renderFilterDetails = function(opt_data, opt_ignored) {
  var output = '<form class="aui" id="ghx-savedfilter-form"><div class="aui-message warning hidden" id="unmapped-issues-warning"><span class="aui-icon icon-warning"></span><p>' + soy.$$escapeHtml('Some issues in the Saved Filter will not be shown on the board.') + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=columns" id="js-view-columns">' + soy.$$escapeHtml('View unmapped statuses which contain these issues.') + '</a></p></div><div class="field-group"><label>' + soy.$$escapeHtml('Saved Filter') + '</label><span id="ghx-filter-change" class="field-value' + ((opt_data.canEdit) ? ' ghx-editable ghx-ss' : '') + '">' + soy.$$escapeHtml(opt_data.savedFilter.name) + '</span><select id="ghx-filter-change-select" class="hidden"></select><p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&requestId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + ((opt_data.canEdit) ? soy.$$escapeHtml('Edit Filter Query') : soy.$$escapeHtml('View Filter Query')) + '</a></p></div>' + GH.tpl.rapid.view.renderPermissionInfo(opt_data) + '<div class="field-group ghx-jql-preview"><label>' + soy.$$escapeHtml('Filter Query') + '</label><span class="field-value">' + ((opt_data.savedFilter.query) ? soy.$$escapeHtml(opt_data.savedFilter.query) : '') + '</span></div><div class="field-group"><label>' + soy.$$escapeHtml('Ranking') + '</label><span class="field-value">';
  if (opt_data.savedFilter.isOrderedByRank) {
    output += soy.$$escapeHtml('Using Rank');
  } else {
    if (! opt_data.savedFilter.orderByWarnings) {
      output += soy.$$escapeHtml('Ranking is disabled, as the Filter Query is not ordered by Rank');
    } else {
      var warningList210 = opt_data.savedFilter.orderByWarnings.errorMessages;
      var warningListLen210 = warningList210.length;
      for (var warningIndex210 = 0; warningIndex210 < warningListLen210; warningIndex210++) {
        var warningData210 = warningList210[warningIndex210];
        output += soy.$$escapeHtml(warningData210) + '<br>';
      }
    }
    output += (opt_data.savedFilter.canEdit && opt_data.savedFilter.canBeFixed) ? '<p><button class="aui-button js-update-filter-order-by">' + soy.$$escapeHtml('Add Rank') + '</button></p>' : '';
  }
  output += '</span></div>';
  if (opt_data.savedFilter.queryProjects) {
    output += '<div class="field-group"><label>' + soy.$$escapeHtml('Projects in board') + '</label><ul id="ghx-show-projects-in-board" class="field-value">';
    if (opt_data.savedFilter.queryProjects.displayMessage) {
      output += '<span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.queryProjects.displayMessage) + '</span>';
    } else {
      var avatarSize__soy231 = 'small';
      var projectList232 = opt_data.savedFilter.queryProjects.projects;
      var projectListLen232 = projectList232.length;
      for (var projectIndex232 = 0; projectIndex232 < projectListLen232; projectIndex232++) {
        var projectData232 = projectList232[projectIndex232];
        output += '<li>' + aui.avatar.avatar({isProject: 'true', size: '' + soy.$$escapeHtml(avatarSize__soy231), avatarImageUrl: soy.$$escapeHtml("") + '/secure/projectavatar?size=' + soy.$$escapeHtml(avatarSize__soy231) + '&pid=' + soy.$$escapeHtml(projectData232.id), extraClasses: 'jira-system-avatar'}) + '<span>' + soy.$$escapeHtml(projectData232.name) + '</span><p>';
        var viewProjectPermissionText__soy250 = 'View permission';
        output += ((projectData232.isValidEditProjectConfigAction) ? '<a href="' + soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeHtml(projectData232.key) + '/permissions">' + soy.$$escapeHtml(viewProjectPermissionText__soy250) + '</a>' : '<a class="disabled">' + soy.$$escapeHtml(viewProjectPermissionText__soy250) + '</a><span class="aui-icon aui-icon-small aui-iconfont-info" title="' + soy.$$escapeHtml('You are not allowed to view this Project Permission') + '"></span>') + '</p></li>';
      }
    }
    output += '</ul></div>';
  }
  output += ((opt_data.isSubqueriesConfigurable) ? '<div class="field-group ghx-jql"><label for="ghx-sub-jql">' + soy.$$escapeHtml('Kanban board sub-filter') + '</label><div id="js-sub-container-work">' + GH.tpl.rapid.view.renderSubQueryView({section: 'board.kanban.work', queryValue: opt_data.subqueries[0], canEdit: opt_data.canEdit}) + '</div><div class="description">' + soy.$$escapeHtml('Further filtering of issues for unreleased work.') + '</div></div>' : '') + '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderFilterDetails.soyTemplateName = 'GH.tpl.rapid.view.renderFilterDetails';
}


GH.tpl.rapid.view.renderSubQueryView = function(opt_data, opt_ignored) {
  return '<span id="ghx-sub-work" class="field-value' + ((opt_data.canEdit) ? ' js-editable ghx-editable ghx-jql' : '') + '">' + ((opt_data.queryValue) ? soy.$$escapeHtml(opt_data.queryValue) : (opt_data.canEdit) ? '<em>' + soy.$$escapeHtml('Add Sub-Filter') + '</em>' : soy.$$escapeHtml('No sub-filter')) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryView.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryView';
}


GH.tpl.rapid.view.renderSubQueryControls = function(opt_data, opt_ignored) {
  return '<textarea class="js-jql-autocomplete-field textarea" id="ghx-sub-jql" data-section="' + soy.$$escapeHtml(opt_data.section) + '" cols="20" rows="2">' + soy.$$escapeHtml(opt_data.queryValue) + '</textarea><span id="ghx-sub-jql-errormsg" class="icon jqlgood js-jql-autocomplete-error"><span></span></span><button class="aui-button js-subquery-submit">' + soy.$$escapeHtml('Update') + '</button><button class="aui-button js-subquery-cancel">' + soy.$$escapeHtml('Cancel') + '</button>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryControls.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryControls';
}


GH.tpl.rapid.view.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml('Shares') + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + ((opt_data.savedFilter.canEdit) ? '<p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/EditFilter!default.jspa?filterId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + soy.$$escapeHtml('Edit Filter Shares') + '</a></p>' : '</div><div class="field-group"><label>' + soy.$$escapeHtml('Owner') + '</label><span class="field-value">' + soy.$$filterNoAutoescape(opt_data.savedFilter.owner.renderedLink) + '</span>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionInfo.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionInfo';
}


GH.tpl.rapid.view.renderPermissionEntries = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.permissionEntries.length > 0) {
    output += '<span class="field-value"><ul id="ghx-create-permissioninfo">';
    var permissionEntryList337 = opt_data.permissionEntries;
    var permissionEntryListLen337 = permissionEntryList337.length;
    for (var permissionEntryIndex337 = 0; permissionEntryIndex337 < permissionEntryListLen337; permissionEntryIndex337++) {
      var permissionEntryData337 = permissionEntryList337[permissionEntryIndex337];
      output += '<li>';
      var permissionValueList339 = permissionEntryData337.values;
      var permissionValueListLen339 = permissionValueList339.length;
      for (var permissionValueIndex339 = 0; permissionValueIndex339 < permissionValueListLen339; permissionValueIndex339++) {
        var permissionValueData339 = permissionValueList339[permissionValueIndex339];
        output += ((permissionValueData339.type == 'Shared with the public') ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-unlocked" title="' + soy.$$escapeHtml('Sharing unrestricted') + '">' + soy.$$escapeHtml('Sharing unrestricted') + '</span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml('Sharing restricted') + '">' + soy.$$escapeHtml('Sharing restricted') + '</span>') + ((permissionValueData339.name) ? '<strong>' + soy.$$escapeHtml(permissionValueData339.type) + ':</strong><span>' + soy.$$escapeHtml(permissionValueData339.name) + '</span>' : '<strong>' + soy.$$escapeHtml(permissionValueData339.type) + '</strong>');
      }
      output += '</li>';
    }
    output += '</ul></span>';
  } else {
    output += '<span class="field-value">' + soy.$$escapeHtml('No shares') + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionEntries.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionEntries';
}


GH.tpl.rapid.view.deleteForm = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.deleteForm.soyTemplateName = 'GH.tpl.rapid.view.deleteForm';
}


GH.tpl.rapid.view.confirmForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirmation') + '</h2><form class="aui" action="#" method="post"><div class="form-body"><p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p></div><div class="form-footer buttons-container"><div class="buttons"><input id="submit" class="button" type="submit" value="' + soy.$$escapeHtml('Confirm') + '" /><a role="button" href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.confirmForm.soyTemplateName = 'GH.tpl.rapid.view.confirmForm';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/configuration/BoardLocationConfig.js' */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}();define("includes/js/rapid/configuration/BoardLocationConfig",["jquery","jira-agile/boardlocation/board-location-picker"],function(e,t){var a=function(){function a(e){_classCallCheck(this,a),this.$container=e,this.boardLocationPicker=void 0}return _createClass(a,[{key:"init",value:function(t){Object.assign(this,{},e.extend(!0,{boardLocationModel:{projectId:"",userLocationId:"",name:"None",avatarURI:""},selectedCallback:function(){},canEdit:!1,stayActivated:!1,isRequired:!1,showHelp:!1,boardLocationChangeId:""},t)),this.render()}},{key:"initClickHandler",value:function(){var a=this,o=this.$container.find(".field-value.ghx-editable");o.one("click",function(o){e(o.currentTarget).hide(),a.boardLocationPicker=new t({selector:"#"+a.boardLocationChangeId+"-select",change:a.changeHandler.bind(a),useSingleSelect:!0,selectedItems:a.getSelection(a.boardLocationModel,!0),filterSoftwareProjects:!0})}),this.stayActivated&&o.click()}},{key:"changeHandler",value:function(e,t){var a=this;if(t&&t.properties){var o="project"===t.properties.locationType?t.properties.value.replace("project_",""):null,i=("project"===t.properties.locationType?t.properties.key:null,"user"===t.properties.locationType?t.properties.value.replace("user_",""):null),n=t.properties.label,r=t.properties.icon;this.validateSelection(t.properties).then(function(){a.boardLocationModel={projectId:o,userLocationId:i,name:n,avatarURI:r},a.selectedCallback(a.boardLocationModel)});var c="locationless";o?c="project":i&&(c="user"),AJS.trigger("analyticsEvent",{name:"gh.boardlocationconfig.location.changed",data:{locationType:c,automaticSetLocation:Boolean(t.properties.automaticSetLocation)}})}}},{key:"getSelection",value:function(e,t){return e.userLocationId&&"number"==typeof e.userLocationId?new AJS.ItemDescriptor({value:e.userLocationId.toString(),label:e.displayName||e.name,icon:e.avatar,html:AJS.escapeHTML(String(e.displayName||e.name)),locationType:e.locationType,savedFilter:e,automaticSetLocation:Boolean(t)}):new AJS.ItemDescriptor({value:e.projectId.toString(),label:e.name,icon:e.avatarURI,html:AJS.escapeHTML(String(e.name)),locationType:e.locationType,savedFilter:e,automaticSetLocation:Boolean(t)})}},{key:"setLocation",value:function(e){this.boardLocationPicker.setSelectedItems(this.getSelection(e,!0))}},{key:"render",value:function(){this.$container.html(GH.tpl.rapid.view.renderViewBoardLocationForm({rapidViewBoardLocation:this.boardLocationModel,canEdit:this.canEdit,showHelp:this.showHelp,isRequired:this.isRequired,ghxBoardLocationChangeId:this.boardLocationChangeId})),this.initClickHandler()}},{key:"validateSelection",value:function(e){var t=this.validationCallback||Promise.resolve.bind(Promise);return t(e)}}]),a}();return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/startwizard/WizardView.js' */
!function(){GH.StartWizardView={},GH.StartWizardView.dialog=void 0,GH.StartWizardView.model=void 0,GH.StartWizardView.stepsNameStack=void 0,GH.StartWizardView.pages={},GH.StartWizardView.filterPicker=void 0,GH.StartWizardView.boardLocationPicker=void 0,GH.StartWizardView.locationModel=void 0,GH.StartWizardView.windowResizeListener=function(){GH.StartWizardView.dialog&&GH.StartWizardView.dialog.updateHeight()};var e=require("jira-agile/rapid/ajax"),t=require("jira/analytics/web-client"),a=require("jira-agile/rapid/analytics-tracker"),r=require("includes/js/rapid/configuration/BoardLocationConfig"),i=require("jira/featureflags/feature-manager"),o=require("jira-agile/boardlocation/location-type"),n=require("jira-agile/boardlocation/board-location-picker");GH.StartWizardView.analytics=new a("gh.create.wizard");var d=AJS.$.Deferred(),c=AJS.$.Deferred(),l=1e4;GH.StartWizardView.wizardStepPreRenderCallbacks=[],GH.StartWizardView.wizardStepPostRenderCallbacks=[],GH.StartWizardView.wizardStepOnValidateCallbacks=[],GH.StartWizardView.wizardStepOnCreateCallbacks=[],GH.StartWizardView.steps={methodologySelection:{render:function(e){var t={isSampleDataAvailable:GH.Config.isSampleDataAvailable,canCreateProject:GH.UserData.canCreateProject()};return{header:"Create a board",content:GH.tpl.startwizard.renderMethodologySelectionStep(t)}},bind:function(e,t){AJS.$("#ghx-wizard-methodology-simple").click(function(e){e.preventDefault(),t.sampleData=!1,i.isFeatureEnabled("project.config.dw.simplified.project.converter")?GH.StartWizardView.selectMethodology("agility",t):GH.StartWizardView.selectMethodology("simple",t)}),AJS.$("#ghx-wizard-methodology-scrum").click(function(e){e.preventDefault(),t.sampleData=!1,GH.StartWizardView.selectMethodology("scrum",t)}),AJS.$("#ghx-wizard-methodology-kanban").click(function(e){e.preventDefault(),t.sampleData=!1,GH.StartWizardView.selectMethodology("kanban",t)}),AJS.$("#ghx-wizard-methodology-scrum-sample").click(function(e){e.preventDefault(),t.sampleData=!0,GH.StartWizardView.selectMethodology("scrum",t)}),AJS.$("#ghx-wizard-methodology-kanban-sample").click(function(e){e.preventDefault(),t.sampleData=!0,GH.StartWizardView.selectMethodology("kanban",t)})},analyticsScreenName:"chooseBoardTypeModal"},methodSelection:{render:function(e){var t=e.method;return t||(t=GH.UserData.userConfig.canCreateProject?"newProject":"existingProject"),{header:"Create a board",content:GH.tpl.startwizard.renderMethodSelectionStep(_.extend({},e,{canCreateProject:GH.UserData.userConfig.canCreateProject,hasProjectsAccessible:GH.UserData.userConfig.hasProjectsAccessible,hasFiltersAccessible:GH.UserData.userConfig.hasFiltersAccessible,selectedOption:t}))}},bind:function(e){GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject()},next:function(e,t){var a=e.find("input[name=ghx-wizard-method]").filter(":checked").val();t.method=a;var r=AJS.$.Deferred();return"newProject"===a?r.resolve("projectCreation"):"existingProject"===a?r.resolve("projectSelection"):"existingFilter"===a?r.resolve("filterSelection"):r.reject(new Error("Unknown board creation method : "+a)),r.promise()},analyticsScreenName:"chooseBoardSourceModal"},projectCreation:{render:function(e){return e.prefix="project",GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"project",sampleInfo:{projectName:"",projectKey:""},methodology:e.methodology})},bind:function(e,t){GH.StartWizardView.bindProjectCreation(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.createProject(GH.StartWizardView.dialog,e)},analyticsScreenName:"createBoardModal"},sampleProjectCreation:{render:function(e){return e.prefix="sample",GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"sample",sampleInfo:e.sampleInfo})},bind:function(e,t){GH.StartWizardView.bindProjectCreation(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.createSampleProject(GH.StartWizardView.dialog,e)},analyticsScreenName:"createSampleProjectModal"},projectSelection:{render:function(e){return{header:"Name this board",content:GH.tpl.startwizard.renderProjectSelectionStep()}},bind:function(e,t){GH.StartWizardView.bindProjectSelection(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.validateProjectSelection(e)},analyticsScreenName:"createBoardModal"},filterSelection:{render:function(e){return{header:"Name this board",content:GH.tpl.startwizard.renderFilterSelectionStep()}},bind:function(e,t){GH.StartWizardView.bindFilterSelection(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.validateFilterSelection(e)},analyticsScreenName:"createBoardModal"}},GH.StartWizardView.show=function(t){if(!GH.StartWizardView.dialog){var a=900;GH.StartWizardView.dialog=GH.Dialog.create({width:a,height:400,id:"ghx-wizard-dialog",onCancelFn:function(){GH.StartWizardView.disposeWizard(),GH.StartWizardView.analytics.trigger("cancel")}}),window.addEventListener("resize",GH.StartWizardView.windowResizeListener),GH.StartWizardView.model={},GH.StartWizardView.stepsNameStack=[],GH.StartWizardView.dialog.show(),GH.StartWizardView.analytics.trigger("start"),GH.StartWizardView.preventSubmitOnEnter(),JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectId()?(e.get({url:"/project/"+JIRA.API.Projects.getCurrentProjectId(),deferErrorHandling:!0,timeout:l}).then(d.resolve).fail(d.reject),c.reject()):GH.UserData.userConfig.selectUserContainerByDefault?(e.get({url:"/boardLocation/currentUser",deferErrorHandling:!0,timeout:l}).then(c.resolve).fail(c.reject),d.reject()):(d.reject(),c.reject())}},GH.StartWizardView.preventSubmitOnEnter=function(){var e=function(e){if(13===e.keyCode&&"ghx-wizard-filter-select-field"!==e.target.id)return e.preventDefault(),!1};AJS.$("input").keydown(e)},GH.StartWizardView.showStep=function(e){if(!_.has(GH.StartWizardView.steps,e))throw new Error("Unknown wizard step "+e);var t=GH.StartWizardView.dialog;if(GH.StartWizardView.pages[e])t.gotoPage(GH.StartWizardView.pages[e]),"methodSelection"===e&&GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject(),GH.StartWizardView.dialog.popup.element.find(".dialog-panel-body .aui-message-error").remove();else{var a=GH.StartWizardView.steps[e],r=a.render(GH.StartWizardView.model);_.each(GH.StartWizardView.wizardStepPreRenderCallbacks,function(t){t(e)}),t.addPage(),GH.StartWizardView.pages[e]=t.curpage,t.addHeader(r.header);var i=AJS.$(r.content);if("methodSelection"===e&&GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject(),t.addPanel(null,i,"ghx-wizard-panel"),_.each(GH.StartWizardView.wizardStepPostRenderCallbacks,function(a){a(e,t)}),GH.StartWizardView.stepsNameStack.length>0&&t.addButton("Back",function(){var e=GH.StartWizardView.stepsNameStack.pop();GH.StartWizardView.showStep(e)},"aui-button"),_.has(a,"complete")){var o=function(){var e=AJS.$(this),t=e.attr("aria-disabled");"true"!==t&&a.complete(GH.StartWizardView.model)};t.addButton(a.completeActionName,o,"aui-button aui-button-primary js-wizard-button-complete")}else if(_.has(a,"next")){var n=function(){var r=AJS.$(this),o=r.attr("aria-disabled");if("true"!==o){var n=a.next(i,GH.StartWizardView.model),d=function(t){GH.StartWizardView.stepsNameStack.push(e),GH.StartWizardView.showStep(t)},c=function(e){console.log(e),t.updateHeight()},l=!0;_.each(GH.StartWizardView.wizardStepOnValidateCallbacks,function(a){a(e,t)||(l=!1)}),n.done(function(e){l?d(e):c("GH project create extension callback returned failure")}).fail(c)}};t.addButton("Next",n,"aui-button aui-button-primary js-wizard-button-next")}t.addCancel("Cancel",function(){t.cancel()}),a.bind(i,GH.StartWizardView.model)}t.updateHeight(),GH.StartWizardView.preventSubmitOnEnter(),GH.StartWizardView.triggerAnalytics(e)},GH.StartWizardView.triggerAnalytics=function(e){var a=GH.StartWizardView.steps[e].analyticsScreenName;t.sendPageEvent(a)},GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject=function(){var e=AJS.$("#ghx-wizard-dialog div.radio #ghx-wizard-method-existing-project").parent(),t=AJS.$("#ghx-wizard-dialog div.radio #ghx-wizard-method-existing-filter").parent();/(simple|agility)/.test(GH.StartWizardView.model.methodology)?(e.hide(),t.hide()):(e.show(),t.show())},GH.StartWizardView.startWizardWithoutProjectCreate=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];GH.UserData.userConfig={canCreateProject:!1,hasProjectsAccessible:!0,hasFiltersAccessible:!0,selectUserContainerByDefault:e},GH.StartWizardView.startWizard()},GH.StartWizardView.startWizardWithUserConfigCheck=function(){GH.UserData.userConfig?GH.StartWizardView.startWizard():e.get({url:"userData/userConfig"}).done(function(e){GH.UserData.setUserConfig(e),GH.StartWizardView.startWizard()}).fail(GH.StartWizardView.startWizardWithoutProjectCreate)},GH.StartWizardView.startWizard=function(){GH.StartWizardView.show(),GH.StartWizardView.showStep("methodologySelection")},GH.StartWizardView.disposeWizard=function(){GH.StartWizardView.dialog=void 0,GH.StartWizardView.pages={},window.removeEventListener("resize",GH.StartWizardView.windowResizeListener)},GH.StartWizardView.genStartFunction=function(e,t){return function(){GH.StartWizardView.show(),GH.StartWizardView.model.sampleData=t,GH.StartWizardView.selectMethodology(e,GH.StartWizardView.model)}},GH.StartWizardView.bindWelcomePage=function(){GH.Dialog.registerDialog(".js-wizard-scrum",GH.StartWizardView.genStartFunction("scrum",!1)),GH.Dialog.registerDialog(".js-wizard-scrum-sample",GH.StartWizardView.genStartFunction("scrum",!0)),GH.Dialog.registerDialog(".js-wizard-kanban",GH.StartWizardView.genStartFunction("kanban",!1)),GH.Dialog.registerDialog(".js-wizard-kanban-sample",GH.StartWizardView.genStartFunction("kanban",!0))},GH.StartWizardView.getCreateProjectRequest=function(e){var t=e.project,a={projectName:t.name,projectKey:t.key,projectLeadUserName:t.lead,boardName:e.boardName,preset:e.methodology,sampleData:e.sampleData};return a},GH.StartWizardView.createProject=function(t,a){GH.StartWizardView.populateProjectCreationProperties(a);var r=GH.StartWizardView.getCreateProjectRequest(a);t.disableControls(),t.showSpinner();var i={url:"/welcome/createProject",data:r,errorContextMap:{projectName:"#ghx-wizard-"+a.prefix+"-projectname",projectKey:"#ghx-wizard-"+a.prefix+"-projectkey",projectLead:"#ghx-wizard-"+a.prefix+"-projectlead"},timeout:12e4,deferErrorHandling:!0};return e.put(i).done(function(e){function r(){if(0===GH.StartWizardView.wizardStepOnCreateCallbacks.length)o();else{var e=GH.StartWizardView.wizardStepOnCreateCallbacks.pop();e(t,r,a)}}var i="com.pyxis.greenhopper.jira:gh-"+e.success.preset.toLowerCase()+"-template";GH.StartWizardView.fireBoardCreatedTrackEvent({boardId:e.success.rapidView.id,boardType:e.success.preset,locationId:e.success.project.id,projectType:"software",projectTemplateKey:i,projectId:e.success.project.id}),GH.StartWizardView.fireProjectCreatedTrackEvent({projectId:e.success.project.id,projectType:"software",projectTemplateKey:i,sampleData:a.sampleData}),e.success.sample=a.sampleData,/(simple|agility)/.test(a.methodology)||GH.PersistentMessages.WelcomeMessage.show(e.success);var o=function(){GH.StartWizardView.gotoCreatedView(e.success.rapidView.id,a.methodology)};r()}).fail(function(a,r,o,n){_.each(a.getGlobalErrors(),function(e){"timeout"===e.message&&(e.message=GH.tpl.startwizard.createProjectTimeout({manageBoardURL:GH.RapidBoard.getManageViewsPageUrl()}),e.noAutoescape=!0)}),e.handleContextualErrors(a,i.errorContextMap),e.handleGlobalErrors(a,i.errorContextMap),t.hideSpinner(),t.enableControls(),t.updateHeight()})},GH.StartWizardView.validateProjectSelection=function(t){GH.StartWizardView.dialog.disableControls(),GH.StartWizardView.dialog.showSpinner();var a=AJS.$("#ghx-wizard-project-board-name");GH.Validation.clearContextualErrors(GH.StartWizardView.boardLocationPicker.getElement()),GH.Validation.clearContextualErrors(a);var r=GH.StartWizardView.locationModel?GH.StartWizardView.locationModel.projectId:null;return e.post({url:"/rapidview/create/presets",data:{name:a.val(),projectIds:GH.StartWizardView.boardLocationPicker.getValue().map(function(e){return e.replace("project_","")}),preset:t.methodology,locationId:r,locationType:GH.StartWizardView.getBoardLocationType()},errorContextMap:{name:"#ghx-wizard-project-board-name",projectIds:GH.StartWizardView.boardLocationPicker.selector}}).done(function(e){GH.StartWizardView.handleCreate(e,"simple",t.methodology),GH.StartWizardView.fireBoardCreatedTrackEvent({boardId:e.success.id,boardType:t.methodology,locationId:r})}).fail(function(){GH.StartWizardView.dialog.enableControls(),GH.StartWizardView.dialog.hideSpinner(),GH.StartWizardView.dialog.updateHeight()})},GH.StartWizardView.getBoardLocationId=function(){if(GH.StartWizardView.locationModel){if(GH.StartWizardView.locationModel.projectId)return GH.StartWizardView.locationModel.projectId;if(GH.StartWizardView.locationModel.userLocationId)return GH.StartWizardView.locationModel.userLocationId}return null},GH.StartWizardView.getBoardLocationType=function(){if(GH.StartWizardView.locationModel){if(GH.StartWizardView.locationModel.projectId)return o.project;if(GH.StartWizardView.locationModel.userLocationId)return o.user}return null},GH.StartWizardView.validateFilterSelection=function(t){var a=AJS.$("#ghx-wizard-filter-view-name"),r=GH.StartWizardView.filterPicker.getElement(),i=AJS.$(GH.StartWizardView.filterPicker.selector);GH.Validation.clearContextualErrors(a),GH.Validation.clearContextualErrors(r);var o="user"===GH.StartWizardView.getBoardLocationType()?null:GH.StartWizardView.getBoardLocationId();return GH.StartWizardView.dialog.disableControls(),GH.StartWizardView.dialog.showSpinner(),e.post({url:"/rapidview/create/advanced",data:{name:a.val(),filterId:i.val()?i.val()[0]:null,methodology:t.methodology,locationId:o,locationType:GH.StartWizardView.getBoardLocationType()},errorContextMap:{name:"#ghx-wizard-filter-view-name",filterId:GH.StartWizardView.filterPicker.selector}}).done(function(e){GH.StartWizardView.handleCreate(e,"simple",t.methodology),GH.StartWizardView.fireBoardCreatedTrackEvent({boardId:e.success.id,boardType:t.methodology,locationId:o})}).fail(function(){GH.StartWizardView.dialog.hideSpinner(),GH.StartWizardView.dialog.enableControls(),GH.StartWizardView.dialog.updateHeight()})},GH.StartWizardView.handleCreate=function(e,t,a){var r=!/(simple|agility)/.test(t)&&a;"simple"!==t&&GH.PersistentMessages.CreateViewMessage.setView(e.success.id,e.success.name,t,r),GH.StartWizardView.analytics.trigger("complete"),GH.StartWizardView.gotoCreatedView(e.success.id,a)},GH.StartWizardView.gotoCreatedView=function(e,t){var a="scrum"===t?"planning":null;GH.Navigation.gotoDefaultRapidBoardPage(e,a)},GH.StartWizardView.selectMethodology=function(t,a){a.methodology=t;var r=/(simple|agility)/.test(t);if(GH.StartWizardView.stepsNameStack.push("methodologySelection"),a.sampleData)e.get({url:"/welcome/sampledataproject?preset="+a.methodology},"sampledataproject").done(function(e){a.sampleInfo=e,GH.StartWizardView.showStep("sampleProjectCreation")}).fail(function(){GH.StartWizardView.showStep("sampleProjectCreation")});else{var i=GH.UserData.userConfig.canCreateProject,o=GH.UserData.userConfig.hasProjectsAccessible,n=GH.UserData.userConfig.hasFiltersAccessible&&!r;i||n?o||n?GH.StartWizardView.showStep("methodSelection"):GH.StartWizardView.showStep("projectCreation"):GH.StartWizardView.showStep("projectSelection")}},GH.StartWizardView.populateProjectCreationProperties=function(e){var t=AJS.$("#ghx-wizard-"+e.prefix+"-projectname"),a=AJS.$("#ghx-wizard-"+e.prefix+"-projectkey"),r=AJS.$("#ghx-wizard-"+e.prefix+"-projectlead");GH.Validation.clearContextualErrors(t),GH.Validation.clearContextualErrors(a),GH.Validation.clearContextualErrors(r),e.project={name:t.val(),key:a.val().toUpperCase(),lead:AJS.$("#ghx-wizard-"+e.prefix+"-projectlead option:selected").val()}},GH.StartWizardView.createSampleProject=function(e,t){t.sampleData=!0,GH.StartWizardView.createProject(e,t)},GH.StartWizardView.validateBoardName=function(e,t){return GH.Validation.clearContextualErrors(e),t.boardName=e.val(),!!t.boardName||(GH.Validation.showContextualErrors(e,"Please enter a name for your board."),!1)},GH.StartWizardView.renderProjectCreation=function(e){return{header:"New project with board",content:GH.tpl.startwizard.renderProjectCreationStep(e)}},GH.StartWizardView.bindProjectSelection=function(t,a){var r=function(e){var t=Boolean(AJS.$("#ghx-board-location-picker-for-multiple-project .loading").length),a="false"===AJS.$("#ghx-board-location-change-for-multiple-project-select-suggestions").parent().attr("aria-hidden"),r="software"===e.projectTypeKey,i=GH.StartWizardView.boardLocationConfig.boardLocationModel.userLocationId;return!(t||a||!r||i)},i=function(t){e.get({url:"/project/"+t,deferErrorHandling:!0,timeout:l}).then(function(e){r(e)&&GH.StartWizardView.boardLocationConfig.setLocation({projectId:"project_"+e.id,userLocationId:"",name:e.name,avatarURI:e.projectIconUrl,locationType:"project"})}).fail(function(){AJS.trigger("analyticsEvent",{name:"gh.boardlocationconfig.location.auto.set.failed"})})};GH.StartWizardView.boardLocationPicker=new n({selector:"#ghx-wizard-choose-project",projectsOnly:!0,change:function(e){GH.StartWizardView.dialog.updateHeight();var t=GH.StartWizardView.boardLocationPicker.getValue()?GH.StartWizardView.boardLocationPicker.getValue():[];if(1===t.length){var a=e.currentTarget[0],r=a.value.replace("project_","");i(r)}},currentProjectId:JIRA.API&&JIRA.API.Projects?JIRA.API.Projects.getCurrentProjectId():null}),GH.StartWizardView.boardLocationPicker.selectPicker.keys.Return=function(e){e.preventDefault()};var o=["#ghx-wizard-project-board-name","#ghx-wizard-choose-project"],d="#ghx-board-location-picker-for-multiple-project",c="ghx-board-location-change-for-multiple-project";GH.StartWizardView.buildBoardLocationPicker(d,c,o),GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:o})},GH.StartWizardView.buildBoardLocationPicker=function(e,t,a){var i=new r(AJS.$(e)),o={canEdit:!0,stayActivated:!0,isRequired:!0,showHelp:!0,boardLocationModel:{name:""},selectedCallback:function(e){GH.StartWizardView.locationModel=e},boardLocationChangeId:t};d.then(function(e){var t={name:""};e&&(e.projectId=e.projectId||e.id,e.avatarURI=e.avatarURI||e.projectIconUrl,"software"===e.projectTypeKey&&(t=e)),i.init(Object.assign(o,{boardLocationModel:t}))}).fail(function(){c.then(function(e){e&&(e.userLocationId=e.id),i.init(Object.assign(o,{boardLocationModel:e||null}))}).fail(function(){i.init(o)})}).always(function(){GH.StartWizardView.locationModel=i.boardLocationModel,GH.StartWizardView.dialog.updateHeight()}),a.push("#"+t+"-select"),GH.StartWizardView.boardLocationConfig=i},function(){"use strict";var e=require("jira/util/events/types");GH.StartWizardView.bindProjectCreation=function(t,a){AJS.$("#ghx-wizard-"+a.prefix+"-projectkey").generateFrom(AJS.$("#ghx-wizard-"+a.prefix+"-projectname"),{maxNameLength:64,maxKeyLength:64}),JIRA.trigger(e.NEW_CONTENT_ADDED,[t]),t.trigger("contentRefresh");var r=GH.StartWizardView.dialog,i=r.page[r.curpage];i.button[1].item;GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-"+a.prefix+"-projectname","#ghx-wizard-"+a.prefix+"-projectkey","#ghx-wizard-"+a.prefix+"-projectlead"]})}}(),GH.StartWizardView.bindFilterSelection=function(e,t){var a=function(e,a){var r="";if(delete t.savedFilter,a&&a.properties){var i=a.properties.savedFilter;r=null!==i?GH.tpl.startwizard.renderPermissionInfo({savedFilter:i}):"",t.savedFilter=i}AJS.$("#ghx-create-permissioninfo-container").html(r),GH.StartWizardView.dialog.updateHeight()};GH.StartWizardView.filterPicker=new GH.SavedFilterPicker({selector:"#ghx-wizard-filter-select",selected:a,stayActivated:!0}),GH.StartWizardView.filterPicker.show(t.savedFilter),GH.StartWizardView.filterPicker.singleSelect.keys.Return=function(e){e.preventDefault()};var r=["#ghx-wizard-filter-view-name","#ghx-wizard-filter-select"],i="#ghx-board-location-picker-for-filter",o="ghx-board-location-change-for-filter";GH.StartWizardView.buildBoardLocationPicker(i,o,r),GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:r})},GH.StartWizardView.attachDependantButton=function(e){var t=GH.StartWizardView.dialog,a=t.page[t.curpage],r=a.button[e.buttonIndex].item;GH.StartWizardView.dependantValidationListener({selectors:e.selectors,full:function(){r.attr("aria-disabled","false")},empty:function(){r.attr("aria-disabled","true")}})},GH.StartWizardView.dependantValidationListener=function(e){function t(){var t=_.filter(e.selectors,function(e){var t=AJS.$(e);return!AJS.$.trim(t.val())});return _.isEmpty(t)?e.full():e.empty()}function a(){e.nowait?t():setTimeout(t,50)}_.isEmpty(e.selectors)||(e.full=e.full||AJS.$.noop(),e.empty=e.empty||AJS.$.noop(),e.nowait=e.nowait||!1,_.each(e.selectors,function(e){var t=AJS.$("#ghx-wizard-dialog");t.on("input",e,a),t.on("change",e,a),t.on("selected",e,a),t.on("unselect",e,a)}),t())},GH.StartWizardView.registerWizardStepPreRenderCallback=function(e){GH.StartWizardView.wizardStepPreRenderCallbacks.push(e)},GH.StartWizardView.registerWizardStepPostRenderCallback=function(e){GH.StartWizardView.wizardStepPostRenderCallbacks.push(e)},GH.StartWizardView.registerWizardStepOnValidateCallback=function(e){GH.StartWizardView.wizardStepOnValidateCallbacks.push(e)},GH.StartWizardView.registerWizardStepOnCreateCallbacks=function(e){GH.StartWizardView.wizardStepOnCreateCallbacks.push(e)},GH.StartWizardView.fireBoardCreatedTrackEvent=function(e){var a=GH.StartWizardView.getBoardLocationType(),r=e.boardType[0].toUpperCase()+e.boardType.substr(1).toLowerCase(),i={containerType:a?a:"project",objectType:"board",objectId:e.boardId,attributes:{boardId:e.boardId,boardType:r,location:a?a:"project"},action:"created",actionSubject:"board",actionSubjectId:e.boardId,source:"createBoardModal"};e.locationId&&(i.containerId=e.locationId),e.projectId&&(i.attributes.projectId=e.projectId),e.projectType&&(i.attributes.projectType=e.projectType),e.projectTemplateKey&&(i.attributes.projectTemplateKey=e.projectTemplateKey),t.sendTrackEvent(i)},GH.StartWizardView.fireProjectCreatedTrackEvent=function(e){var a={containerType:"project",containerId:e.projectId,attributes:{projectType:e.projectType,projectTemplateKey:e.projectTemplateKey,createdUsing:e.sampleData?"sample":"template"},action:"created",actionSubject:"project",actionSubjectId:e.projectId,source:e.sampleData?"createSampleProjectModal":"createBoardModal"};t.sendTrackEvent(a)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/component/SavedFilterPicker.js' */
!function(){"use strict";var e=require("jira/ajs/select/single-select"),t=require("jira-agile/rapid/ajax");GH.SavedFilterPicker=function(e){this.selector=e.selector,this.fieldSelector=e.selector+"-field",this.blurHandler=e.blur,this.selectHandler=e.selected,this.stayActivated=e.stayActivated,this.focus=e.focus},GH.SavedFilterPicker.prototype.show=function(i){var r=AJS.$(this.selector),s=new e({element:r,width:300,removeOnUnSelect:!0,itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:t.buildRestUrl("/savedfilter/list.json"),formatResponse:function(e){if(e.errors){var i=t._convertJiraErrors(e.errors),s={searchName:this.selector};return t.handleContextualErrors(i,s),!1}r.siblings(".ghx-error").remove();var l=[];return AJS.$(e.filters).each(function(){l.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))}),l}}});this.singleSelect=s;var l=this.removeSingleSelect;this.stayActivated||AJS.$(this.fieldSelector).blur(function(){l(s)}),_.isFunction(this.blurHandler)&&AJS.$(this.fieldSelector).blur(this.blurHandler),this.focus&&AJS.$(this.fieldSelector).focus().select(),i&&this.setSelection(i);var n=this.selectHandler;this.stayActivated?(r.bind("selected",n),r.bind("unselect",n)):(r.bind("selected",function(e,t){l(s),n(e,t)}),r.bind("unselect",function(e,t){l(s),n(e,t)}))},GH.SavedFilterPicker.prototype.setSelection=function(e){this.singleSelect.setSelection(new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:AJS.escapeHTML(String(e.name)),savedFilter:e,selected:!0}))},GH.SavedFilterPicker.prototype.removeSingleSelect=function(e){e.hideSuggestions(),e.disable()},GH.SavedFilterPicker.prototype.getElement=function(){return this.singleSelect.$field}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/lib/jquery/jquery.keygen.js' */
!function(e,t){e.KeyGenerator=function(){var e=["THE","A","AN","AS","AND","OF","OR"],n={},a=function(e){return e.join("").length},r=function(n){return t.grep(n,function(n,a){return t.inArray(n,e)===-1})},o=function(e){var n="";return t.each(e,function(e,t){n+=t.charAt(0)}),n},u=function(e){var t,n=!1;for(t=0;t<e.length;t++)if(i(e[t]))n=!0;else if(n)return e.substring(0,t+1);return e},i=function(e){return e&&1===e.length&&e.search("[AEIOUY]")!==-1};return n[199]="C",n[231]="c",n[252]="u",n[251]="u",n[250]="u",n[249]="u",n[233]="e",n[234]="e",n[235]="e",n[232]="e",n[226]="a",n[228]="a",n[224]="a",n[229]="a",n[225]="a",n[239]="i",n[238]="i",n[236]="i",n[237]="i",n[196]="A",n[197]="A",n[201]="E",n[230]="ae",n[198]="Ae",n[244]="o",n[246]="o",n[242]="o",n[243]="o",n[220]="U",n[255]="Y",n[214]="O",n[241]="n",n[209]="N",{generateKey:function(e,i){i=t.extend({},i);var c="number"==typeof i.desiredKeyLength?i.desiredKeyLength:4,h="number"==typeof i.maxKeyLength?i.maxKeyLength:1/0;if(e=t.trim(e),!e)return"";for(var s=[],g=0,f=e.length;g<f;g++){var l=n[e.charCodeAt(g)];s.push(l?l:e[g])}e=s.join("");var d=[];t.each(e.split(/\s+/),function(e,t){t&&(t=t.replace(/[^a-zA-Z]/g,""),t=t.toUpperCase(),t.length&&d.push(t))}),c&&a(d)>c&&(d=r(d));var m;if(0==d.length)m="";else if(1==d.length){var v=d[0],y=u(v);m=h<v.length||Math.abs(v.length-c)>=Math.abs(y.length-c)?y:v}else{var K=a(d),x=o(d);m=h<K||Math.abs(K-c)>=Math.abs(x.length-c)?x:d.join("")}return h&&m.length>h&&(m=m.substr(0,h)),m}}};var n=e.KeyGenerator();t.fn.generateFrom=function(e,a){var r={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},o=t(this).first(),e=e.first(),a=t.extend({},r,a);return function(){var r=function(){return o.data("autosuggest")!==!1},u=function(e){o.val()&&o.data("lastGeneratedValue")!==o.val()&&o.data("autosuggest",!1)},i=function(e){o.data("lastGeneratedValue",e),o.val(e)},c=function(){u(o.val()),f()},h=function(e){s(e,c)},s=function(e,n){var r,o=t(e.target);r=function(){g(e),n(),o.is(":visible")&&o.data("checkHook",setTimeout(r,a.timeoutMS))},o.data("checkHook")||o.data("checkHook",setTimeout(r,0))},g=function(e){var n=t(e.target);clearTimeout(n.data("checkHook")),n.removeData("checkHook")},f=function(){r()&&i(n.generateKey(e.val(),{desiredKeyLength:a.desiredKeyLength,maxKeyLength:a.maxKeyLength}))};e.attr("maxlength",a.maxNameLength),o.attr("maxlength",a.maxKeyLength),o.css("text-transform","uppercase"),document.activeElement&&document.activeElement===e[0]&&h({target:e[0]}),e.focus(h),e.blur(g)}(),this}}(window,jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-expander', location = 'node_modules/@atlassian/aui/src/js/aui/expander.js' */
("undefined"===typeof window?global:window).__1f32101163c43c11907101e4c1c0413f=function(){"use strict";var c=__307d3e18fd611f85395c67cddeb1fe24,d=c&&c.__esModule?c:{"default":c},e=(0,d.default)(document),f=function(a){var b={};b.$trigger=(0,d.default)(a.currentTarget);b.$content=e.find("#"+b.$trigger.attr("aria-controls"));b.triggerIsParent=0!==b.$content.parent().filter(b.$trigger).length;b.$shortContent=b.triggerIsParent?b.$trigger.find(".aui-expander-short-content"):null;b.height=b.$content.css("min-height");
b.isCollapsible=!1!==b.$trigger.data("collapsible");b.replaceText=b.$trigger.attr("data-replace-text");b.replaceSelector=b.$trigger.data("replace-selector");return b},g=function(a){if(a.replaceText){var b=a.replaceSelector?a.$trigger.find(a.replaceSelector):a.$trigger;a.$trigger.attr("data-replace-text",b.text());b.text(a.replaceText)}};e.on({"aui-expander-invoke":function(a){var a=(0,d.default)(a.currentTarget),b=e.find("#"+a.attr("aria-controls")),c=!1!==a.data("collapsible");"true"===b.attr("aria-expanded")&&
c?a.trigger("aui-expander-collapse"):a.trigger("aui-expander-expand")},"aui-expander-expand":function(a){a=f(a);"true"!==a.$content.attr("aria-expanded")&&(a.$content.attr("aria-expanded","true"),a.$trigger.attr("aria-expanded","true"),0<a.$content.outerHeight()&&a.$content.attr("aria-hidden","false"),g(a),a.triggerIsParent&&a.$shortContent.hide(),a.$trigger.trigger("aui-expander-expanded"))},"aui-expander-collapse":function(a){a=f(a);"true"===a.$content.attr("aria-expanded")&&(g(a),a.$content.attr("aria-expanded",
"false"),a.$trigger.attr("aria-expanded","false"),a.triggerIsParent&&a.$shortContent.show(),0===a.$content.outerHeight()&&a.$content.attr("aria-hidden","true"),a.$trigger.trigger("aui-expander-collapsed"))},"click.aui-expander":function(a){(0,d.default)(a.currentTarget).trigger("aui-expander-invoke",a.currentTarget)}},".aui-expander-trigger");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:ajs-raf', location = 'node_modules/@atlassian/aui/src/js-vendor/raf/raf.js' */
("undefined"===typeof window?global:window).__0e57a5ff611a3173e3f9aa2306aea259=function(){for(var a=window,f=0,d=["webkit","moz"],b=a.requestAnimationFrame,c=a.cancelAnimationFrame,e=d.length;0<=--e&&!b;)b=a[d[e]+"RequestAnimationFrame"],c=a[d[e]+"CancelAnimationFrame"];if(!b||!c)b=function(a){var b=Date.now(),c=Math.max(f+16,b);return setTimeout(function(){a(f=c)},c-b)},c=clearTimeout;a.requestAnimationFrame=b;a.cancelAnimationFrame=c;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-is-input', location = 'node_modules/@atlassian/aui/src/js/aui/internal/is-input.js' */
("undefined"===typeof window?global:window).__f268bb685e7e11f511cb91a156a783b0=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){return"value"in a||a.isContentEditable};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-raf-raf', location = 'node_modules/@atlassian/aui/src/js-vendor/raf/raf.js' */
("undefined"===typeof window?global:window).__0e57a5ff611a3173e3f9aa2306aea259=function(){for(var a=window,f=0,d=["webkit","moz"],b=a.requestAnimationFrame,c=a.cancelAnimationFrame,e=d.length;0<=--e&&!b;)b=a[d[e]+"RequestAnimationFrame"],c=a[d[e]+"CancelAnimationFrame"];if(!b||!c)b=function(a){var b=Date.now(),c=Math.max(f+16,b);return setTimeout(function(){a(f=c)},c-b)},c=clearTimeout;a.requestAnimationFrame=b;a.cancelAnimationFrame=c;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-has-touch', location = 'node_modules/@atlassian/aui/src/js/aui/internal/has-touch.js' */
("undefined"===typeof window?global:window).__29f0b74d9ef495751062ec4e83e0b098=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=window.DocumentTouch;a.default="ontouchstart"in window||b&&document instanceof b;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-mediaQuery', location = 'node_modules/@atlassian/aui/src/js/aui/internal/mediaQuery.js' */
("undefined"===typeof window?global:window).__e67a99ea27950f14c1291fb7cebabf6d=function(){var a={};Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){if(window.matchMedia)return window.matchMedia(a).matches;var b=document.createElement("style");b.type="text/css";b.id="testMedia";b.innerText="@media "+a+" { #testMedia { width: 1px; } }";document.head.appendChild(b);a="1px"===window.getComputedStyle(b,null).width;b.parentNode.removeChild(b);return a};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-sidebar', location = 'node_modules/@atlassian/aui/src/js/aui/sidebar.js' */
("undefined"===typeof window?global:window).__c0275cfdb12ae34a5641a8e219403604=function(){function j(a){return a&&a.__esModule?a:{"default":a}}function c(a){this.$el=(0,e.default)(a);if(this.$el.length){this.$body=(0,e.default)("body");this.$wrapper=this.$el.children(".aui-sidebar-wrapper");this.$body.addClass("aui-page-sidebar");this._previousOffsetTop=this._previousViewportWidth=this._previousViewportHeight=this._previousScrollTop=null;this.submenus=new g;var b=this;if((0,e.default)(".aui-sidebar").length){b.$el.on("hover click focus",
b.collapsedTriggersSelector,function(a){a=(0,e.default)(a.target);r(b,a)});if(y.default&&(0,z.default)("only screen and (max-device-width:1024px)"))(0,e.default)("body").addClass("aui-page-sidebar-touch");var d=null,c=function(){null===d&&(d=requestAnimationFrame(function(){b.reflow();d=null}))};(0,e.default)(window).on("scroll resize",c);b.reflow();if(b.isAnimated())b.$el.on("transitionend webkitTransitionEnd",function(){b.$el.trigger(e.default.Event(l+(b.isCollapsed()?"collapse-end":"expand-end")))});
b.$el.on("click",".aui-sidebar-toggle",function(a){a.preventDefault();b.toggle()});(0,e.default)(".aui-page-panel").click(function(){!b.isCollapsed()&&b.isViewportNarrow()&&b.collapse()});var s=function(a){a.which===AJS.keyCode.LEFT_SQUARE_BRACKET&&(!a.shiftKey&&!a.ctrlKey&&!a.metaKey&&!(0,A.default)(a.target))&&b.toggle()};(0,e.default)(document).on("keypress",s);b._remove=function(){this._removeAllTooltips();(0,e.default)(this.inlineDialogSelector).remove();this.$el.off();this.$el.remove();(0,e.default)(document).off("keypress",
s);(0,e.default)(window).off("scroll resize",c)};b.$el.on("touchend",function(a){b.isCollapsed()&&(b.expand(),a.preventDefault())});b.$el.on("mouseenter focus",b.collapsedTriggersSelector,function(){if(b.isCollapsed()){var a=(0,e.default)(this);0!==m(a).length||t(a)}});b.$el.on("click blur mouseleave",b.collapsedTriggersSelector,function(){b.isCollapsed()&&u((0,e.default)(this))});b.$el.on("mouseenter focus",b.toggleSelector,function(){var a=(0,e.default)(this);b.isCollapsed()?a.data("tooltip","Expand sidebar ( [ )"):
a.data("tooltip","Collapse sidebar ( [ )");t(a)});b.$el.on("click blur mouseleave",b.toggleSelector,function(){u((0,e.default)(this))});b.$el.on("keydown",b.collapsedTriggersSelector,function(a){if(b.isCollapsed()){var d=a.target,c=v(d);if(c){var f=(0,e.default)(c);a.keyCode===AJS.keyCode.TAB&&(!a.shiftKey&&!a.altKey)&&c.open&&(a.preventDefault(),f.attr("persistent",""),f.find(":aui-tabbable").first().focus(),setTimeout(function(){f.removeAttr("persistent")},100),f.on("keydown",
function(a){if(a.keyCode===AJS.keyCode.TAB&&a.shiftKey&&a.target===f.find(":aui-tabbable")[0]||a.keyCode===AJS.keyCode.TAB&&(!a.shiftKey&&!a.altKey)&&a.target===f.find(":aui-tabbable").last()[0])d.focus(),(0,e.default)(this).off("keydown"),p()}))}}})}var f=this;(0,e.default)(f.collapsedTriggersSelector).each(function(){var a=(0,e.default)(this);r(f,a)})}}function w(a){return e.default.map(a.split(" "),function(a){return l+a}).join(" ")}function g(){this.inlineDialog=null}function m(a){return a.is("a")?
a.next(".aui-nav"):a.children(".aui-nav, hr")}function v(a){a=a.getAttribute("aria-controls");return document.getElementById(a)}function p(){var a=document.querySelectorAll(c.prototype.inlineDialogSelector);Array.prototype.forEach.call(a,function(a){a.open=!1})}function r(a,b){if(!b.data("_aui-sidebar-submenu-constructed")&&(b.data("_aui-sidebar-submenu-constructed",!0),0!==m(b).length)){var d=document.createElement("aui-inline-dialog"),g=(0,B.default)("sidebar-submenu");b.attr("aria-controls",g);
b.attr("data-aui-trigger","");x.default.init(b);d.setAttribute("id",g);d.setAttribute("alignment","right top");d.setAttribute("aria-hidden","true");a.isCollapsed()&&d.setAttribute("responds-to","hover");(0,e.default)(d).addClass(c.prototype.inlineDialogClass);document.body.appendChild(d);x.default.init(d);d.addEventListener("aui-layer-show",function(c){if(a.isCollapsed()){b.addClass("active");d.innerHTML=C;var f=b.is("a")?b.text():b.children(".aui-nav-heading").text(),c=(0,e.default)(d).find(".aui-navgroup-inner");
c.children(".aui-nav-heading").attr("title",f).children("strong").text(f);f=m(b);f=AJS.clone(f);f.hasClass("aui-expander-content")&&(f.find(".aui-expander-cutoff").remove(),f.removeClass("aui-expander-content"));f.appendTo(c)}else c.preventDefault()});d.addEventListener("aui-layer-hide",function(){b.removeClass("active")});return d}}function t(a){a.tipsy(D).tipsy("show");(a=a.data("tipsy")&&a.data("tipsy").$tip)&&a.css({opacity:""}).addClass("tooltip-shown")}function u(a){var b=a.data("tipsy")&&a.data("tipsy").$tip;
if(b){var d=b.css("transition-duration");d&&(d=0<=d.indexOf("ms")?parseInt(d.substring(0,d.length-2),10):1E3*parseInt(d.substring(0,d.length-1),10),setTimeout(function(){a.tipsy("hide")},d));b.removeClass("tooltip-shown")}}var o={};"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=j(__307d3e18fd611f85395c67cddeb1fe24);__f673a5150978887490995d88aeec0c8d;__0e57a5ff611a3173e3f9aa2306aea259;__d74c881c8f23921c15438d0f30c99f80;var k;var h=__c8cfa00f1eba9ac7af89ee3d0d33961d;if(h&&h.__esModule)k=
h;else{var n={};if(null!=h)for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&(n[k]=h[k]);n.default=h;k=n}var h=j(__4d02fe17b8e885a34493e34af3d145dd),y=j(__29f0b74d9ef495751062ec4e83e0b098),A=j(__f268bb685e7e11f511cb91a156a783b0),z=j(__e67a99ea27950f14c1291fb7cebabf6d),x=j(__c1ce1f1e3e613f564fc234ff043570f1),B=j(__9fa5e8acd81f0f9028180b8fcdcd9cb4),n=j(__e3152236c406a356c24f20f7bfcccf21),E="undefined"!==typeof document.documentElement.style.transition||"undefined"!==typeof document.documentElement.style.webkitTransition,
l="_aui-internal-sidebar-";c.prototype.on=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),a=w(a);this.$el.on.apply(this.$el,[a].concat(b));return this};c.prototype.off=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),a=w(a);this.$el.off.apply(this.$el,[a].concat(b));return this};c.prototype.setHeight=function(a,b,d){a=Math.max(0,d-a);this.$wrapper.height(b-a);return this};c.prototype.setPosition=function(a){a=a||window.pageYOffset;this.$wrapper.toggleClass("aui-is-docked",
a>this.$el.offset().top);return this};c.prototype.setCollapsedState=function(a){var b={collapsed:{},expanded:{}};b.collapsed.narrow={narrow:e.default.noop,wide:function(b){b._expand(a,!0)}};b.collapsed.wide={narrow:e.default.noop,wide:e.default.noop};b.expanded.narrow={narrow:e.default.noop,wide:function(a){a.$body.removeClass("aui-sidebar-collapsed");a.$el.removeClass("aui-sidebar-fly-out")}};b.expanded.wide={narrow:function(a){a._collapse(!0)},wide:e.default.noop};var d=this.isCollapsed()?"collapsed":
"expanded",c=this.isViewportNarrow(this._previousViewportWidth)?"narrow":"wide",g=this.isViewportNarrow(a)?"narrow":"wide";b[d][c][g](this);return this};c.prototype._collapse=function(a){if(this.isCollapsed())return this;var b=e.default.Event(l+"collapse-start",{isResponsive:a});this.$el.trigger(b);if(b.isDefaultPrevented())return this;this.$body.addClass("aui-sidebar-collapsed");this.$el.attr("aria-expanded","false");this.$el.removeClass("aui-sidebar-fly-out");this.$el.find(this.submenuTriggersSelector).attr("tabindex",
0);(0,e.default)(this.inlineDialogSelector).attr("responds-to","hover");this.isAnimated()||this.$el.trigger(e.default.Event(l+"collapse-end",{isResponsive:a}));return this};c.prototype.collapse=function(){return this._collapse(!1)};c.prototype._expand=function(a,b){var d=e.default.Event(l+"expand-start",{isResponsive:b});this.$el.trigger(d);if(d.isDefaultPrevented())return this;d=this.isViewportNarrow(a);this.$el.attr("aria-expanded","true");this.$body.toggleClass("aui-sidebar-collapsed",d);this.$el.toggleClass("aui-sidebar-fly-out",
d);this.$el.find(this.submenuTriggersSelector).removeAttr("tabindex");(0,e.default)(this.inlineDialogSelector).removeAttr("responds-to");this.isAnimated()||this.$el.trigger(e.default.Event(l+"expand-end",{isResponsive:b}));return this};c.prototype.expand=function(){this.isCollapsed()&&this._expand(this._previousViewportWidth,!1);return this};c.prototype.isAnimated=function(){return E&&this.$el.hasClass("aui-is-animated")};c.prototype.isCollapsed=function(){return"false"===this.$el.attr("aria-expanded")};
c.prototype.isViewportNarrow=function(a){a=void 0===a?this._previousViewportWidth:a;return 1240>a};c.prototype._removeAllTooltips=function(){(0,e.default)(this.tooltipSelector).remove()};c.prototype.responsiveReflow=function(a,b){if(a){if(!this.isCollapsed()&&this.isViewportNarrow(b)){var d=this.isAnimated();d&&this.$el.removeClass("aui-is-animated");this.collapse();d&&(this.$el[0].offsetHeight,this.$el.addClass("aui-is-animated"))}}else b!==this._previousViewportWidth&&this.setCollapsedState(b)};
c.prototype.reflow=function(a,b,d,c){var a=void 0===a?window.pageYOffset:a,b=void 0===b?document.documentElement.clientHeight:b,c=void 0===c?document.documentElement.scrollHeight:c,d=void 0===d?window.innerWidth:d,e=this.$el.offset().top,f=null===this._previousViewportWidth;if(!(a===this._previousScrollTop&&b===this._previousViewportHeight&&e===this._previousOffsetTop)){this.isCollapsed()&&(!f&&a!==this._previousScrollTop)&&(p(),this._removeAllTooltips());var g=this.$body.hasClass("aui-page-sidebar-touch"),
c=a!==this._previousScrollTop&&(0>a||a+b>c);if(!g&&(f||!c))this.setHeight(a,b,e),this.setPosition(a)}"false"!==this.$el.attr("data-aui-responsive")?this.responsiveReflow(f,d):(f=!this.isCollapsed()&&this.isViewportNarrow(d),this.$el.toggleClass("aui-sidebar-fly-out",f));this._previousScrollTop=a;this._previousViewportHeight=b;this._previousViewportWidth=d;this._previousOffsetTop=e;return this};c.prototype.toggle=function(){this.isCollapsed()?(this.expand(),this._removeAllTooltips()):this.collapse();
return this};c.prototype.submenuTriggersSelector=".aui-sidebar-group:not(.aui-sidebar-group-tier-one)";c.prototype.collapsedTriggersSelector=[c.prototype.submenuTriggersSelector,".aui-sidebar-group.aui-sidebar-group-tier-one > .aui-nav > li > a",".aui-sidebar-footer > .aui-sidebar-settings-button"].join(", ");c.prototype.toggleSelector=".aui-sidebar-footer > .aui-sidebar-toggle";c.prototype.tooltipSelector=".aui-sidebar-section-tooltip";c.prototype.inlineDialogClass="aui-sidebar-submenu-dialog";c.prototype.inlineDialogSelector=
"."+c.prototype.inlineDialogClass;g.prototype.submenu=function(a){i();return m(a)};g.prototype.hasSubmenu=function(a){i();return 0!==m(a).length};g.prototype.submenuHeadingHeight=function(){i();return 34};g.prototype.isShowing=function(){i();return c.prototype.isSubmenuVisible()};g.prototype.show=function(a,b){i();v(b).open=!0};g.prototype.hide=function(){i();p()};g.prototype.inlineDialogShowHandler=function(){i()};g.prototype.inlineDialogHideHandler=function(){i()};g.prototype.moveSubmenuToInlineDialog=
function(){i()};g.prototype.restoreSubmenu=function(){i()};c.prototype.getVisibleSubmenus=function(){return Array.prototype.filter.call(document.querySelectorAll(c.prototype.inlineDialogSelector),function(a){return a.open})};c.prototype.isSubmenuVisible=function(){return 0<this.getVisibleSubmenus().length};var C='<div class="aui-inline-dialog-contents"><div class="aui-sidebar-submenu" ><div class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong></strong></div></div></div></div></div>',
D={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){var a=(0,e.default)(this);return a.is("a")?a.attr("title")||a.find(".aui-nav-item-label").text()||a.data("tooltip"):a.children(".aui-nav").attr("title")||a.children(".aui-nav-heading").text()}},q=(0,n.default)("sidebar",c);(0,e.default)(function(){q(".aui-sidebar")});var i=k.getMessageLogger("Sidebar.submenus",{removeInVersion:"6.0",sinceVersion:"5.8"});(0,h.default)("sidebar",q);o.default=q;return o=o["default"]}.call(this);;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = 'includes/jira/dialog/changeProjectTypeDialog.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.project&&(JIRA.Templates.project={}),"undefined"==typeof JIRA.Templates.project.ChangeType&&(JIRA.Templates.project.ChangeType={}),JIRA.Templates.project.ChangeType.changeProjectTypeDialog=function(e,t){return'<section role="dialog" id="change-project-type-dialog-'+soy.$$escapeHtml(e.projectId)+'" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">'+soy.$$escapeHtml("Change project type")+'</h2></header><div class="aui-dialog2-content"></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions form-footer"><div class="icon throbber"></div><button class="aui-button aui-button-primary dialog-change-button hidden">'+soy.$$escapeHtml("Change")+'</button><button class="aui-button aui-button-link dialog-close-button">'+soy.$$escapeHtml("Cancel")+"</button></div></footer></section>"},JIRA.Templates.project.ChangeType.changeProjectTypeForm=function(e,t){var a='<form class="aui change-project-type-form"><div class="form-body"><div class="aui-group project-type-change-group"><div class="aui-item">'+JIRA.Templates.project.ChangeType.projectAvatar(e)+'</div><div class="aui-item project-type-select-group">'+JIRA.Templates.project.ChangeType.projectTypeDropdown({projectTypeKey:e.project.projectTypeKey,projectTypes:e.projectTypes})+"</div></div></div></form><p>",o="<a href="+soy.$$escapeHtml(e.helpLink)+' target="_blank">';return a+=soy.$$filterNoAutoescape(AJS.format("If you change the project type, you\'\'ll also change what your users can see and do with the project. {0}Check the differences here{1}",o,"</a>"))+"</p>"},JIRA.Templates.project.ChangeType.projectTypeDropdown=function(e,t){for(var a='<select class="project-type-select select" name="project-type">',o=e.projectTypes,p=o.length,c=0;c<p;c++){var s=o[c];a+='<option class="imagebacked" data-icon="data:image/svg+xml;base64, '+soy.$$escapeHtml(s.icon)+'" value="'+soy.$$escapeHtml(s.key)+'" '+(s.key==e.projectTypeKey?" selected ":"")+">"+soy.$$escapeHtml(s.formattedKey)+"</option>"}return a+="</select>"},JIRA.Templates.project.ChangeType.updateTargetElement=function(e,t){return'<img src="data:image/svg+xml;base64,'+soy.$$escapeHtml(e.icon)+'" class="project-type-icon" /><span>'+soy.$$escapeHtml(e.formattedKey)+"</span>"},JIRA.Templates.project.ChangeType.projectAvatar=function(e,t){return'<div class="project-avatar-header"><span class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img src="'+soy.$$escapeHtml(e.project.avatarUrls["48x48"])+'" alt="'+soy.$$escapeHtml(e.project.name)+'"></span></span><div class="project-header" title="'+soy.$$escapeHtml(e.project.name)+'">'+soy.$$escapeHtml(e.project.name)+"</div></div>"},JIRA.Templates.project.ChangeType.dialogSpinner=function(e,t){return'<div class="dialog-spinner"></div>'},JIRA.Templates.project.ChangeType.successMsg=function(e,t){return""+soy.$$escapeHtml(AJS.format("You have just changed {0} to a {1} project type.",e.projectName,e.projectTypeName))};;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = '/includes/jira/dialog/changeProjectTypeDialog.js' */
define("jira/project/admin/change-project-type-dialog",["jira/util/formatter","jquery","underscore","jira/message","jira/ajs/select/single-select","wrm/context-path"],function(e,t,o,n,a,r){function c(e){return t.ajax({url:r()+"/rest/internal/2/projects/"+e+"/changetypedata",dataType:"json",contentType:"application/json",type:"GET"})}function p(a){var c=t(".project-type-select",a.dialogBody),p=c.val()[0],d=o.findWhere(a.projectTypes,{key:p});t(".dialog-change-button",a.dialogBody).attr("disabled","disabled"),t(t.ajax({url:r()+"/rest/api/2/project/"+a.projectId+"/type/"+p,dataType:"json",contentType:"application/json",type:"PUT"}).done(function(){a.changeProjectTypeDialog.hide(),a.onProjectTypeChanged&&a.onProjectTypeChanged(a.trigger,d),n.showSuccessMsg(JIRA.Templates.project.ChangeType.successMsg({projectName:a.projectName,projectTypeName:d.formattedKey})),AJS.EventQueue.push({name:"administration.projecttype.change",properties:{projectId:a.projectId,sourceProjectType:i(a.sourceProjectType),destinationProjectType:i(p)}})}).fail(function(){t(".aui-dialog2-content",a.dialogBody).prepend(aui.message.error({content:e.format("We haven\'\'t been able to complete the project conversion. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})).throbber({target:t(".throbber",a.dialogBody)})}function i(e){return e&&e.replace("_","")}function d(e,t,o){e==t?o.find(".dialog-change-button").attr("disabled","disabled"):o.find(".dialog-change-button").removeAttr("disabled")}function s(o){var n=t(JIRA.Templates.project.ChangeType.changeProjectTypeDialog({projectId:o.projectId})),r=AJS.dialog2(n);r.on("show",function(){t(".aui-dialog2-content",n).html(JIRA.Templates.project.ChangeType.dialogSpinner()),t(".dialog-spinner",n).spin(),t(".dialog-change-button",n).unbind("click").addClass("hidden")}),t(o.trigger).click(function(i){i.preventDefault(),r.show(),c(o.projectId).done(function(e){n.find(".aui-dialog2-content").html(JIRA.Templates.project.ChangeType.changeProjectTypeForm(e)),new a({element:t(".project-type-select",n),revertOnInvalid:!0,width:165}),n.find(".dialog-change-button").removeClass("hidden"),d(t(".project-type-select",n).val(),e.project.projectTypeKey,n);var c={dialogBody:n,changeProjectTypeDialog:r,projectName:e.project.name,projectTypes:e.projectTypes,trigger:o.trigger,projectId:o.projectId,onProjectTypeChanged:o.onProjectTypeChanged,sourceProjectType:e.project.projectTypeKey};t(".dialog-change-button",n).click(function(e){e.preventDefault(),p(c)}),t(".change-project-type-form",n).on("submit",function(e){e.preventDefault(),p(c)}),t(".project-type-select",n).on("change",function(o){d(t(this).val(),e.project.projectTypeKey,n)})}).fail(function(){t(".aui-dialog2-content",n).html(aui.message.error({content:e.format("We were unable to load data required for the project type change. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})}),t(".dialog-close-button",n).click(function(e){e.preventDefault(),r.hide()})}return function(e){s(e)}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = '/static/projecttypes/warning/dialog/project-type-warning-dialog.js' */
define("jira/project/types/warning/dialog",["require"],function(e){"use strict";function t(t,a,i){var o=n(".project-type-warning-icon",i);r(o,"uninstalled-warning-dialog",function(r,i,o){r.html(JIRA.Project.Types.Warning.dialog({title:t.title,firstParagraph:t.firstParagraph,secondParagraph:t.secondParagraph,callToActionText:t.callToActionText}));var c=e("jira/project/admin/change-project-type-dialog");return c({trigger:n(".warning-dialog-change-project-type"),projectId:t.projectId,onProjectTypeChanged:a}),o(),!1},{width:375,gravity:"w"})}var n=e("jquery"),a=e("wrm/data"),r=e("aui/inline-dialog"),i=a.claim("project.type.warning.dialogs.data");return{init:function(e){e=e||{},e.sectionElement=e.sectionElement||n("body"),t(i,e.onProjectTypeChanged,e.sectionElement)}}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = 'static/projecttypes/warning/dialog/templates/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Project&&(JIRA.Project={}),"undefined"==typeof JIRA.Project.Types&&(JIRA.Project.Types={}),"undefined"==typeof JIRA.Project.Types.Warning&&(JIRA.Project.Types.Warning={}),JIRA.Project.Types.Warning.dialog=function(e,a){return'<div class="project-type-warning-dialog"><p class="header"><span>'+soy.$$escapeHtml(e.title)+'</span></p><p class="type-not-accessible-message">'+soy.$$escapeHtml(e.firstParagraph)+'</p><p class="available-functionality-message">'+soy.$$escapeHtml(e.secondParagraph)+'</p><div class="actions"><a class="warning-dialog-change-project-type" href="#">'+soy.$$escapeHtml(e.callToActionText)+"</a></div></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.adapter.js' */
define("jira/projects/libs/marionette",["backbone","underscore","atlassian/libs/factories/marionette-2.1.0"],function(e,r,t){"use strict";return t(r,e)}),AJS.namespace("JIRA.Projects.Libs.Marionette",null,require("jira/projects/libs/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.mixins.js' */
!function(){"use strict";function e(e,t){var i=this,r=_.defaults({},t||{},{isPrevented:!1,emitter:this,preventDefault:function(){this.isPrevented=!0,i.trigger(e+":prevented",this)}});return this.trigger(e,r),r}function t(e,t){var i=this.triggerPreventable(e,t);i.isPrevented&&t.preventDefault()}_.extend(JIRA.Projects.Libs.Marionette.View.prototype,{unwrapTemplate:function(){if(this.$el.parent().length){var e=this.$el.children();this.$el.replaceWith(e),this.setElement(e)}else this.setElement(this.$el.children())},triggerPreventable:e,retriggerPreventable:t}),_.extend(JIRA.Projects.Libs.Marionette.Controller.prototype,{triggerPreventable:e,retriggerPreventable:t}),JIRA.Projects.Libs.Marionette.ViewManager=JIRA.Projects.Libs.Marionette.Controller.extend({constructor:function(){JIRA.Projects.Libs.Marionette.Controller.apply(this,arguments),this.views={}},hideView:function(e){var t=this.views[e];t&&(this.stopListening(t),t.isDestroyed||t.destroy(),delete this.views[e])},showView:function(e,t){var i=this.buildView(e,t);i.render()},buildView:function(e,t){var i=this.views[e];return i||(i=t.call(this),this.listenTo(i,"destroy",function(){this.hideView(e)}),this.views[e]=i),i},getView:function(e){return this.views[e]}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:data', location = 'data/web-resource-manager.js' */
define("jira/projects/data/WRM",window.WRM);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/component.js' */
define("jira/projects/sidebar/component",["underscore","jira/projects/data/WRM"],function(e,t){"use strict";var r=Boolean(t.data.claim("is-global-sidebar"));return JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(e,t){this.hasASelectedItem()||(t.isInitial=!0),this.retriggerPreventable("before:select",t),t.isPrevented||this.deselectAllGroups()},select:function(e,t){this.trigger("select",t)},"before:deselect":function(e,t){this.retriggerPreventable("before:deselect",t)},deselect:function(e,t){this.trigger("deselect",t)},"before:navigate":function(e,t){this.retriggerPreventable("before:navigate",t)},"before:navigate:prevented":function(e,t){this.trigger("before:navigate:prevented",t)}},events:{"click .js-nav-project-title-link":"_clickProjectName","click .js-nav-project-avatar-link":"_clickProjectAvatar","click a[data-link-id='com.atlassian.jira.jira-projects-plugin:summary-page']":"_clickProjectSummary"},initialize:function(){this.render({force:!0});try{this.tracker=require("jira/components/analytics-tracker/tracker")}catch(e){}this.bindUIElements();var t=AJS.sidebar(".aui-sidebar");e.each(["expand-end","collapse-end","collapse-start"],function(e){t.on(e,function(){this.trigger(e)}.bind(this))}.bind(this))},render:function(t){t=e.defaults({},t,{force:!1});var r="el"in t,i=r||t.force===!0,n=this.children.length>0;if(!i)return this;var a=this.triggerPreventable("before:render");if(a.isPrevented)return this;if(n){var c=this.triggerPreventable("before:detach");if(c.isPrevented)return this;this.destroyChildren({checkEmpty:!1}),this.trigger("detach")}if(r){var o=jQuery(t.el);this.$el.replaceWith(o),this.setElement(o)}return this.$(".aui-sidebar-group").each(e.bind(function(e,t){var r=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:t}),i=!!this.getGroup(r.id);i&&AJS.warn&&AJS.warn('Duplicated IDs detected. There are more than one NavigationGroup with id data-id="'+r.id+'"'),this.proxyChildEvents(r),this.children.add(r,r.id)},this)),this.trigger("render"),this},reflow:function(){AJS.sidebar(".aui-sidebar").reflow()},isCollapsed:function(){return AJS.sidebar(".aui-sidebar").isCollapsed()},deselectAllGroups:function(){this.children.call("deselect")},on:function(){return JIRA.Projects.Libs.Marionette.CompositeView.prototype.on.apply(this,arguments)},off:function(){return JIRA.Projects.Libs.Marionette.CompositeView.prototype.off.apply(this,arguments)},replaceGroup:function(e,t){var r=this.getGroup(e);r.$el.replaceWith(t.$el),t.cid=r.cid,this.children.remove(r),this.children.add(t,t.id)},getGroup:function(e){return this.children.findByCustom(e)},getGroupAt:function(e){return this.children.findByIndex(e)},getItem:function(e){return this.getDefaultGroup().getItem(e)},getElement:function(){return this._trackDeprecated("getElement"),this.el},getDefaultGroup:function(){return this.getGroup("sidebar-navigation-panel")},isProjectSidebar:function(){return!r},getSelectedScopeFilterId:function(){return this._trackDeprecated("getSelectedScopeFilterId"),this.$(".scope-filter a.scope-filter-trigger").attr("data-scope-filter-id")},setReportsItemLink:function(e){this._trackDeprecated("setReportsItemLink");var t=this.getGroup("sidebar-navigation-panel"),r=t.getItem("com.atlassian.jira.jira-projects-plugin:report-page");"undefined"==typeof r&&(r=t.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")),r&&r.attr("href",e)},getAUISidebar:function(){return this._trackDeprecated("getAUISidebar"),AJS.sidebar(".aui-sidebar")},getContentContainer:function(){return this._trackDeprecated("getContentContainer"),this.$(".aui-sidebar-body .sidebar-content-container")},getSelectedNavigationItem:function(){return this.getDefaultGroup().getSelectedNavigationItem()},hasASelectedItem:function(){return this.getDefaultGroup().hasASelectedItem()},dim:function(){this._trackDeprecated("dim"),this.$el.attr({dimmed:"","aria-hidden":"true"})},undim:function(){this._trackDeprecated("undim"),this.$el.removeAttr("dimmed"),this.$el.removeAttr("aria-hidden")},_clickProjectName:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.projectName")},_clickProjectAvatar:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.avatar")},_clickProjectSummary:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.projectSummary")},_trackDeprecated:function(e){AJS.warn("The Sidebar method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.method.deprecated",data:{method:e}})}})}),AJS.namespace("JIRA.Projects.Sidebar.Component",null,require("jira/projects/sidebar/component"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-item.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationItem"),JIRA.Projects.Sidebar.Component.NavigationItem=JIRA.Projects.Libs.Marionette.CompositeView.extend({ui:{link:"a.aui-nav-item"},events:{'simpleClick @ui.link:not([target="_blank"])':function(e){e.preventDefault(),this.navigate()}},initialize:function(){this.id=this.$el.find(">a").attr("data-link-id"),this.bindUIElements()},onDestroy:function(){this.unbind()},getElement:function(){return this._trackDeprecated("getElement"),this.el},navigate:function(){if(this.select()){var e=this.triggerPreventable("before:navigate");if(e.isPrevented)return!1;var t=this.ui.link.attr("href");return t&&require("jira/util/browser").reloadViaWindowLocation(t),!0}},select:function(){var e=this.triggerPreventable("before:select");return!e.isPrevented&&(this.$el.addClass("aui-nav-selected"),this.trigger("select",e),!0)},deselect:function(){if(!this.isSelected())return!0;var e=this.triggerPreventable("before:deselect");return!e.isPrevented&&(this.$el.removeClass("aui-nav-selected"),this.$el.find("a").blur(),this.trigger("deselect",e),!0)},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},removeBadge:function(){this.$el.find(".aui-badge").remove()},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected())return this},hasASelectedItem:function(){return this.isSelected()},attr:function(e,t){var i=this.ui.link.attr(e,t);return t?i:this},_trackDeprecated:function(e){AJS.warn("The Sidebar item method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.item.method.deprecated",data:{method:e}})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-group.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationGroup"),JIRA.Projects.Sidebar.Component.NavigationGroup=JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(e,t){if(this.retriggerPreventable("before:select",t),!t.isPrevented){var i=this.deselect();i||t.preventDefault()}},select:function(e,t){this.trigger("select",t)},"before:deselect":function(e,t){this.retriggerPreventable("before:deselect",t)},deselect:function(e,t){this.trigger("deselect",t)},"before:navigate":function(e,t){this.retriggerPreventable("before:navigate",t)},"before:navigate:prevented":function(e,t){this.trigger("before:navigate:prevented",t)}},initialize:function(){this.id=this.$el.attr("data-id"),this.$(">ul>li").each(_.bind(function(e,t){var i=JIRA.Projects.Sidebar.Component.NavigationGroup.build(t),n=!!this.getItem(i.id);n&&AJS.warn&&AJS.warn("Duplicated IDs detected. There are more than one NavigationItem with id data-link-id='"+i.id+"'"),this.proxyChildEvents(i),this.children.add(i,i.id)},this))},onDestroy:function(){this.unbind()},getElement:function(){return this._trackDeprecated("getElement"),this.el},deselect:function(){var e=this.triggerPreventable("before:deselect");if(e.isPrevented)return!1;var t=!0;return this.children.each(function(e){t=e.deselect()&&t}),t},getItem:function(e){return this.children.findByCustom(e)},getItemAt:function(e){return this.children.findByIndex(e)},getSelectedNavigationItem:function(){var e=this.children.find(function(e){return e.hasASelectedItem()});if(e)return e.getSelectedNavigationItem()},hasASelectedItem:function(){return this.children.any(function(e){return e.hasASelectedItem()})},_trackDeprecated:function(e){AJS.warn("The Sidebar group method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.group.method.deprecated",data:{method:e}})}},{build:function(e){var t;return t=AJS.$(e).find("ul").length?new JIRA.Projects.Sidebar.Component.NavigationSubgroup({el:e}):new JIRA.Projects.Sidebar.Component.NavigationItem({el:e})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-subgroup.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationSubgroup"),JIRA.Projects.Sidebar.Component.NavigationSubgroup=JIRA.Projects.Sidebar.Component.NavigationGroup.extend({childEvents:{"before:select":function(e,t){JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents["before:select"].apply(this,arguments),t.isPrevented||this.expand()}},initialize:function(){this.childEvents=_.extend({},JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents,this.childEvents),JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.initialize.apply(this,arguments),this.id=this.$el.find(">a[data-link-id]").attr("data-link-id")},expand:function(){this.$el.attr("aria-expanded","true")},collapse:function(){this.$el.attr("aria-expanded","false")},isExpanded:function(){return"true"===this.$el.attr("aria-expanded")},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected())return this;var e=this.children.find(function(e){return e.hasASelectedItem()});return e?e.getSelectedNavigationItem():void 0},hasASelectedItem:function(){return!!this.isSelected()||this.children.any(function(e){return e.hasASelectedItem()})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-api', location = '/sidebar/api.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar"),AJS.namespace("JIRA.API");var e=AJS.$.Deferred();JIRA.API.getSidebar=JIRA.API.getSidebar||function(){return e.promise()},JIRA.Projects.Sidebar.initAPI=function(r){JIRA.API.Sidebar=r,e.resolve(JIRA.API.Sidebar)}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/analytics.js' */
!function(e){"use strict";function r(e){return JIRA.Projects.Sidebar.Analytics.Hash.prefixedHash(e||"NONE")}function i(e,r){AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar."+e,data:r})}function o(){return"atl.jira.proj.config"===e('meta[name="admin.active.section"]').attr("content")}function t(e){return n.indexOf([c,e].join("."))!==-1}AJS.namespace("JIRA.Projects.Sidebar.Analytics");var c="proj.config";JIRA.Projects.Sidebar.Analytics=function(a){var s=AJS.sidebar(a),p=e();if(p=p.add(s.$el),p=p.add(s.submenus.inlineDialog),!JIRA.API.Sidebar)throw new Error("Error: cannot start analytics before JIRA.Projects.Sidebar.initAPI is called");JIRA.API.Sidebar.isProjectSidebar()?i("load.project",{projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType()}):i("load.global"),p.on("click","a",function(){var a=r(e(this).attr("data-link-id")),s={id:a.hash,prefix:a.prefix},p=AJS.Meta.get("sidebar-source-page");if(p)s.sidebarSourcePage=p;else if(e(".issue-tools button.expand").length>0)s.sidebarSourcePage="search-el";else if(e(".navigation-tools button.collapse").length>0)s.sidebarSourcePage="fullscreen-el";else if(o()){var j=e('meta[name="admin.active.tab"]').attr("content");j=j.replace("com.atlassian.servicedesk.project-ui:",""),t(j)?s.sidebarSourcePage=[c,j].join("."):s.sidebarSourcePage=c}n.indexOf(s.sidebarSourcePage)===-1&&(s.sidebarSourcePage="unknown"),i("click.link",s)})};var n=["search-el","fullscreen-el","search","fullscreen","rapid-board","service-desk","proj.config","proj.config.view_project_summary","proj.config.view_project_issuetypes","proj.config.project-issuetypes-expand","proj.config.view_project_workflows","proj.config.view_project_screens","proj.config.view_project_fields","proj.config.view_project_versions","proj.config.view_project_components","proj.config.view_project_roles","proj.config.view_project_permissions","proj.config.view_project_issuesecurity","proj.config.view_project_notifications","proj.config.devstatus-admin-page-link","proj.config.hipchat-project-admin-page-link","proj.config.view_issue_collectors","proj.config.sd-project-request-types-item","proj.config.sd-project-request-security-item","proj.config.sd-project-portal-settings-item","proj.config.sd-project-feedback-settings-item","proj.config.sd-project-email-settings-item","proj.config.sd-project-confluence-kb-item","proj.config.sd-project-sidebar-sla","proj.config.sd-project-automation-item"]}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/hash.js' */
!function(){"use strict";function n(n,r){return 0===n.indexOf(r)}function r(r,t){return r.substring(n(r,t)?t.length:0)}function t(n){var r,t=0;if(!n)return"";for(var e=0;e<n.length;e+=1)r=n.charCodeAt(e),t=32*t-t+r,t|=0;return t}AJS.namespace("JIRA.Projects.Sidebar.Analytics");var e=[];JIRA.Projects.Sidebar.Analytics.Hash={prefixedHash:function(i){var a=_.find(e,_.partial(n,i))||"";return{prefix:a,hash:a+t(r(i,a))}},addPrefix:function(n){n&&!_.contains(e,n)&&e.push(n)},clearPrefixes:function(){e.length=0}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-expansion-manager', location = '/sidebar/expansion-manager.js' */
!function(){"use strict";var e="jira-sidebar-collapsed";AJS.namespace("JIRA.Projects.Sidebar"),JIRA.Projects.Sidebar.initExpansionManager=function(){var a=Boolean(WRM.data.claim("sidebar-collapsed-by-default"));JIRA.Projects.Sidebar.ExpansionManager=function(n,i){function o(a){a.isResponsive&&"true"===i[e]&&a.preventDefault()}function r(a){a.isResponsive||n.isViewportNarrow()||(i[e]=n.isCollapsed().toString())}function s(){n.reflow()&&n.isViewportNarrow()||(a&&void 0===i[e]||"true"===i[e]?n.collapse():n.expand())}i||(i=window.localStorage),s(),n.on("expand-start",o),n.on("expand-end collapse-end",r)}},JIRA.Projects.Sidebar.initExpansionManager()}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ScopeFilter.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter.Templates == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter.Templates = {}; }


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer = function(opt_data, opt_ignored) {
  return '<div class="aui-sidebar-group aui-sidebar-group-actions collapsed-scope-filter-container"></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.selectableScopes || opt_data.createActions) {
    output += '<div class="aui-nav-heading" title="' + soy.$$escapeHtml('Boards in this project') + '"><strong class="collapsed-scope-header">' + soy.$$escapeHtml('Boards in this project') + '</strong></div><ul class="aui-nav collapsed-scope-list" title="' + soy.$$escapeHtml('Select a board') + '">';
    if (opt_data.selectedScope) {
      output += '<li class="scope-filter selected-scope-filter" title="' + soy.$$escapeHtml(opt_data.selectedScope.label) + '">' + soy.$$escapeHtml(opt_data.selectedScope.label) + '</li>';
      var scopeFilterList21 = opt_data.selectableScopes;
      var scopeFilterListLen21 = scopeFilterList21.length;
      for (var scopeFilterIndex21 = 0; scopeFilterIndex21 < scopeFilterListLen21; scopeFilterIndex21++) {
        var scopeFilterData21 = scopeFilterList21[scopeFilterIndex21];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'scope-filter', anchorClass: scopeFilterData21.styleClass, label: scopeFilterData21.label, link: scopeFilterData21.link});
      }
    }
    if (opt_data.createActions) {
      var createActionList30 = opt_data.createActions;
      var createActionListLen30 = createActionList30.length;
      for (var createActionIndex30 = 0; createActionIndex30 < createActionListLen30; createActionIndex30++) {
        var createActionData30 = createActionList30[createActionIndex30];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'create-scope-action', anchorClass: createActionData30.styleClass, label: createActionData30.label, link: createActionData30.link});
      }
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem = function(opt_data, opt_ignored) {
  return '<li class="' + soy.$$escapeHtml(opt_data.itemClass) + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" title="' + soy.$$escapeHtml(opt_data.label) + '"' + ((opt_data.anchorClass) ? ' class="' + soy.$$escapeHtml(opt_data.anchorClass) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/model.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.Model=function(e){this.selectedScope=e.selectedScope,this.createScopeActions=e.createScopeActions,this.selectedScope?this.selectableScopes=_.reject(e.scopes,function(e){return e.label===this.selectedScope.label&&e.link===this.selectedScope.link},this):this.selectableScopes=e.scopes;var t=this.createScopeActions.length>0,c=this.selectableScopes.length>0;this.displayWhenSidebarIsCollapsed=t||c},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectedScope=function(){return this.selectedScope},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectableScopes=function(){return this.selectableScopes},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getCreateScopeActions=function(){return this.createScopeActions},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.shouldDisplayWhenSidebarIsCollapsed=function(){return this.displayWhenSidebarIsCollapsed}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-view.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList,serializeData:function(){return{selectedScope:this.model.getSelectedScope(),selectableScopes:this.model.getSelectableScopes(),createActions:this.model.getCreateScopeActions()}},onRender:function(){this.unwrapTemplate()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-controller.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedController=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(e){this.scopeFilter=e.scopeFilter;var t=JIRA.Projects.Libs.Marionette.Region.extend({attachHtml:function(e){this.$el.empty().append(e.$el)}});this.collapsedScopeFilterContainer=new t({el:e.collapsedScopeFilterContainer})},render:function(){var e=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedView({model:this.scopeFilter});this.collapsedScopeFilterContainer.show(e)},remove:function(){this.collapsedScopeFilterContainer.empty(),this.collapsedScopeFilterContainer.$el.empty()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-initializer.js' */
!function(){"use strict";function e(e){var i=AJS.$(JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer());return e.prepend(i),i}function i(e,i){e.on("collapse-start",function(){i.render(),JIRA.trace("sidebar.scopefilter.collapsed")}),e.on("expand-end",function(){i.remove()})}AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(e){this.sidebarAPI=e.sidebarAPI,this.scopeFilterData=e.scopeFilterData,this.$sidebarContentContainer=e.$sidebarContentContainer},run:function(){if(this.sidebarAPI.isProjectSidebar()){var t=new JIRA.Projects.Sidebar.ScopeFilter.Model(this.scopeFilterData);if(t.shouldDisplayWhenSidebarIsCollapsed()){var r=e(this.$sidebarContentContainer),o=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedController({scopeFilter:t,collapsedScopeFilterContainer:r});i(this.sidebarAPI,o),this.sidebarAPI.isCollapsed()&&o.render()}}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/scope-filter-analytics.js' */
!function(){"use strict";function e(){var e=!0;AJS.$("body").on("click.expanded-filter-list","#sidebar-scope-filter-list a",function(e){n(AJS.$(e.target))}),AJS.$("body").on("aui-dropdown2-show","#sidebar-scope-filter-list",function(){o(e)}),AJS.$("body").on("aui-dropdown2-hide","#sidebar-scope-filter-list",function(){a(e)})}function i(){var e=!1;AJS.$("body").on("click.collapsed-filter-list","aui-inline-dialog#sidebar-submenu1 a",function(e){t(AJS.$(e.target))}),AJS.$("body").on("aui-show","aui-inline-dialog#sidebar-submenu1",function(){o(e)}),AJS.$("body").on("aui-hide","aui-inline-dialog#sidebar-submenu1",function(){a(e)})}function n(e){if(1===e.parent().parent().parent().index())c(!0);else{var i=e.parent().index(),n=e.data("scope-filter-id");r(!0,n,i)}}function t(e){if(e.parent().hasClass("create-scope-action"))c(!1);else{var i=e.parent().index(),n=JIRA.Projects.Sidebar.ScopeFilter.Analytics.scopes[i].id,t=i-1;r(!1,n,t)}}function o(e){s("","open",{expanded:e})}function a(e){s("","close",{expanded:e})}function c(e){s("create","click",{expanded:e})}function r(e,i,n){s("scope","click",{expanded:e,scopeId:i,scopePosition:n})}function s(e,i,n){var t="sidebar.scopeFilter"+(e?"."+e:"");d.trackEvent(t,i,n)}var d=require("jira/components/analytics-tracker/tracker");AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.Analytics"),JIRA.Projects.Sidebar.ScopeFilter.Analytics={initScopeFilterAnalytics:function(n){this.scopes=n,e(),i()}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-init.js' */
!function(){"use strict";JIRA.API.getSidebar().done(function(e){var t=WRM.data.claim("scope-filter-data");if(t){var i=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer({sidebarAPI:e,scopeFilterData:t,$sidebarContentContainer:e.getContentContainer()});i.run(),JIRA.Projects.Sidebar.ScopeFilter.Analytics.initScopeFilterAnalytics(t.scopes)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:projects-api', location = 'page/projects-api.js' */
define("jira/api/projects",["jira/projects/data/WRM"],function(e){"use strict";function t(t,r){if(void 0!==t)return t;var i=e.data.claim(r);return void 0!==i?i:AJS.Meta.get(r)}var r=e.data.claim("project-key"),i=e.data.claim("project-id"),c=e.data.claim("project-name"),n=e.data.claim("project-type"),a=e.data.claim("is-project-admin"),o=e.data.claim("project-simplified");return{ProjectType:Object.freeze({SOFTWARE:"software",BUSINESS:"business"}),getCurrentProjectId:function(){return i=t(i,"project-id")},getCurrentProjectKey:function(){return r=t(r,"project-key")},getCurrentProjectName:function(){return c=t(c,"project-name")},getCurrentProjectType:function(){return n=t(n,"project-type")},isCurrentUserProjectAdmin:function(){return a=t(a,"is-project-admin")},isCurrentProjectSimplified:function(){return o=t(o,"project-simplified")}}}),AJS.namespace("JIRA.API.Projects",null,require("jira/api/projects"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-last-visited', location = '/sidebar/lastvisited/last-visited-sidebar-util.js' */
define("jira/projects/sidebar/lastvisited/last-visited-sidebar-util",["exports"],function(e){"use strict";function t(e,i){var r=i.findParentOf(e);if(!r)return e;var n=i.findParentOf(r.id);return n?t(r.id,i):e}e.getParentTopLevelNavItemId=t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-last-visited', location = '/sidebar/lastvisited/last-visited-updater.js' */
define("jira/projects/sidebar/lastvisited/updater",["jquery","jira/projects/sidebar/lastvisited/last-visited-sidebar-util","jira/featureflags/simplified-ux-feature-manager"],function(e,t,i){"use strict";function a(e){return s.indexOf(e)>-1}function r(t,r,n){if(!i.isAdg3ModeOn()||!a(r)){n=n||function(){};var s=function(){JIRA.trace("last.visited.item.saved")};e.ajax({url:AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(t)+"/lastVisited",type:"PUT",contentType:"application/json",data:JSON.stringify({id:r})}).done(function(){n(),s()})}}function n(e,i,a,n){var s=t.getParentTopLevelNavItemId(i,a);s&&r(e,s,n)}var s=["com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator"];return{start:function(e,t){var a=JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectKey()||null;if(a){var s=e.getSelectedNavigationItem();s&&s.getId()&&(i.isAdg3ModeOn()?n(a,s.getId(),e,t):r(a,s.getId(),t)),i.isAdg3ModeOn()?e.on("before:select",function(i){n(a,i.target.getId(),e,t)}):(e.on("before:navigate:prevented",function(e){r(a,e.emitter.id,t)}),e.on("before:select",function(e){e.isInitial&&r(a,e.emitter.id,t)}))}}}}),AJS.namespace("JIRA.Projects.Sidebar.LastVisited.Updater",null,require("jira/projects/sidebar/lastvisited/updater"));;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone.paginator-2.0.2-factory', location = 'factories/backbone.paginator/2.0.2/backbone.paginator-2.0.2-factory.js' */
(function(m){define("atlassian/libs/factories/backbone.paginator-2.0.2",function(){return function(v,i){m.call({_:v,Backbone:i});var l=i.PageableCollection.noConflict();l.VERSION="2.0.2";return l}})})(function(){var m=this.Backbone,v=m.PageableCollection,i=this._,l=function(a,b){if(!i.isNumber(a)||i.isNaN(a)||!i.isFinite(a)||~~a!==a)throw new TypeError("`"+b+"` must be a finite integer");return a},D=function(a,b,d){if((a=a._events[b])&&a.length){var c=a[a.length-1],e=c.callback;c.callback=function(){try{e.apply(this,
arguments),d()}catch(a){throw a;}finally{c.callback=e}}}else d()},n=i.extend,o=i.omit,t=i.clone,p=i.each,H=i.pick,I=i.contains,E=i.isEmpty,F=i.pairs,N=i.invert,z=i.isArray,A=i.isFunction,J=i.isObject,x=i.keys,y=i.isUndefined,u=Math.ceil,K=Math.floor,G=Math.max,B=m.Collection.prototype,L=/[\s'"]/g,O=/[<>\s'"]/g,M=m.PageableCollection=m.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",
pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(a,b){B.constructor.apply(this,arguments);var b=b||{},d=this.mode=b.mode||this.mode||w.mode,c=n({},w.queryParams,this.queryParams,b.queryParams||{});c.directions=n({},w.queryParams.directions,this.queryParams.directions,c.directions||{});this.queryParams=c;c=this.state=n({},w.state,this.state,b.state||{});c.currentPage=null==c.currentPage?
c.firstPage:c.currentPage;z(a)||(a=a?[a]:[]);a=a.slice();"server"!=d&&(null==c.totalRecords&&!E(a))&&(c.totalRecords=a.length);this.switchMode(d,n({fetch:!1,resetState:!1,models:a},b));var e=b.comparator;c.sortKey&&!e&&this.setSorting(c.sortKey,c.order,b);if("server"!=d&&(d=this.fullCollection,e&&b.full&&(this.comparator=null,d.comparator=e),b.full&&d.sort(),a&&!E(a)))this.reset(a,n({silent:!0},b)),this.getPage(c.currentPage),a.splice.apply(a,[0,a.length].concat(this.models));this._initState=t(this.state)},
_makeFullCollection:function(a,b){var d=["url","model","sync","comparator"],c=this.constructor.prototype,e,f,h,g={};e=0;for(f=d.length;e<f;e++)h=d[e],y(c[h])||(g[h]=c[h]);g=new (m.Collection.extend(g))(a,b);e=0;for(f=d.length;e<f;e++)h=d[e],this[h]!==c[h]&&(g[h]=this[h]);return g},_makeCollectionEventHandler:function(a,b){return function(d,c,e,f){var h=a._handlers;p(x(h),function(d){var c=h[d];a.off(d,c);b.off(d,c)});var g=t(a.state),r=g.firstPage,j=g.pageSize,k=(0===r?g.currentPage:g.currentPage-
1)*j,q=k+j;if("add"==d){var i,m,l,s,f=f||{};e==b?(m=b.indexOf(c),m>=k&&m<q&&(s=a,i=l=m-k)):(i=a.indexOf(c),s=b,l=!y(f.at)?f.at+k:k+i);f.onRemove||(++g.totalRecords,delete f.onRemove);a.state=a._checkState(g);if(s){s.add(c,n({},f||{},{at:l}));var o=i>=j?c:!y(f.at)&&l<q&&a.length>j?a.at(j):null;o&&D(e,d,function(){a.remove(o,{onAdd:true})})}}if("remove"==d)if(f.onAdd)delete f.onAdd;else{--g.totalRecords?(i=g.totalPages=u(g.totalRecords/j),g.lastPage=0===r?i-1:i||r,g.currentPage>i&&(g.currentPage=g.lastPage)):
(g.totalRecords=null,g.totalPages=null);a.state=a._checkState(g);var C,r=f.index;e==a?((C=b.at(q))?D(a,d,function(){a.push(C,{onRemove:true})}):!a.length&&g.totalRecords&&a.reset(b.models.slice(k-j,q-j),n({},f,{parse:!1})),b.remove(c)):r>=k&&r<q&&((C=b.at(q-1))&&D(a,d,function(){a.push(C,{onRemove:true})}),a.remove(c),!a.length&&g.totalRecords&&a.reset(b.models.slice(k-j,q-j),n({},f,{parse:!1})))}if("reset"==d)if(f=e,e=c,e==a&&null==f.from&&null==f.to)g=b.models.slice(0,k),j=b.models.slice(k+a.models.length),
b.reset(g.concat(a.models).concat(j),f);else if(e==b){if(!(g.totalRecords=b.models.length))g.totalRecords=null,g.totalPages=null;"client"==a.mode&&(g.lastPage=g.currentPage=g.firstPage);a.state=a._checkState(g);a.reset(b.models.slice(k,q),n({},f,{parse:!1}))}"sort"==d&&(f=e,c===b&&a.reset(b.models.slice(k,q),n({},f,{parse:!1})));p(x(h),function(d){var c=h[d];p([a,b],function(a){a.on(d,c);a=a._events[d]||[];a.unshift(a.pop())})})}},_checkState:function(a){var b=this.mode,d=this.links,c=a.totalRecords,
e=a.pageSize,f=a.currentPage,h=a.firstPage,g=a.totalPages;if(null!=c&&null!=e&&null!=f&&null!=h&&("infinite"==b?d:1)){c=l(c,"totalRecords");e=l(e,"pageSize");f=l(f,"currentPage");h=l(h,"firstPage");if(1>e)throw new RangeError("`pageSize` must be >= 1");g=a.totalPages=u(c/e);if(0>h||1<h)throw new RangeError("`firstPage must be 0 or 1`");a.lastPage=0===h?G(0,g-1):g||h;if("infinite"==b){if(!d[f+""])throw new RangeError("No link found for page "+f);}else if(f<h||0<g&&(h?f>g:f>=g))throw new RangeError("`currentPage` must be firstPage <= currentPage "+
(h?">":">=")+" totalPages if "+h+"-based. Got "+f+".");}return a},setPageSize:function(a,b){var a=l(a,"pageSize"),b=b||{first:!1},d=this.state,c=u(d.totalRecords/a),e=c?G(d.firstPage,K(c*d.currentPage/d.totalPages)):d.firstPage,d=this.state=this._checkState(n({},d,{pageSize:a,currentPage:b.first?d.firstPage:e,totalPages:c}));return this.getPage(d.currentPage,o(b,["first"]))},switchMode:function(a,b){if(!I(["server","client","infinite"],a))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');
var b=b||{fetch:!0,resetState:!0},d=this.state=b.resetState?t(this._initState):this._checkState(n({},this.state));this.mode=a;var c=this,e=this.fullCollection,f=this._handlers=this._handlers||{},h;if("server"!=a&&!e){e=this._makeFullCollection(b.models||[],b);e.pageableCollection=this;this.fullCollection=e;var g=this._makeCollectionEventHandler(this,e);p(["add","remove","reset","sort"],function(a){f[a]=h=i.bind(g,{},a);c.on(a,h);e.on(a,h)});e.comparator=this._fullComparator}else"server"==a&&e&&(p(x(f),
function(a){h=f[a];c.off(a,h);e.off(a,h)}),delete this._handlers,this._fullComparator=e.comparator,delete this.fullCollection);if("infinite"==a)for(var r=this.links={},j=d.firstPage,k=u(d.totalRecords/d.pageSize),j=0===j?G(0,k-1):k||j,d=d.firstPage;d<=j;d++)r[d]=this.url;else this.links&&delete this.links;return b.fetch?this.fetch(o(b,"fetch","resetState")):this},hasPreviousPage:function(){var a=this.state,b=a.currentPage;return"infinite"!=this.mode?b>a.firstPage:!!this.links[b-1]},hasNextPage:function(){var a=
this.state,b=this.state.currentPage;return"infinite"!=this.mode?b<a.lastPage:!!this.links[b+1]},getFirstPage:function(a){return this.getPage("first",a)},getPreviousPage:function(a){return this.getPage("prev",a)},getNextPage:function(a){return this.getPage("next",a)},getLastPage:function(a){return this.getPage("last",a)},getPage:function(a,b){var d=this.mode,c=this.fullCollection,b=b||{fetch:!1},e=this.state,f=e.firstPage,h=e.currentPage,g=e.lastPage,i=e.pageSize,j=a;switch(a){case "first":j=f;break;
case "prev":j=h-1;break;case "next":j=h+1;break;case "last":j=g;break;default:j=l(a,"index")}this.state=this._checkState(n({},e,{currentPage:j}));b.from=h;b.to=j;e=(0===f?j:j-1)*i;c=c&&c.length?c.models.slice(e,e+i):[];if(("client"==d||"infinite"==d&&!E(c))&&!b.fetch)return this.reset(c,o(b,"fetch")),this;"infinite"==d&&(b.url=this.links[j]);return this.fetch(o(b,"fetch"))},getPageByOffset:function(a,b){if(0>a)throw new RangeError("`offset must be > 0`");var a=l(a),d=K(a/this.state.pageSize);0!==
this.state.firstPage&&d++;d>this.state.lastPage&&(d=this.state.lastPage);return this.getPage(d,b)},sync:function(a,b,d){var c=this;if("infinite"==c.mode){var e=d.success,f=c.state.currentPage;d.success=function(a,b,i){var j=c.links,k=c.parseLinks(a,n({xhr:i},d));k.first&&(j[c.state.firstPage]=k.first);k.prev&&(j[f-1]=k.prev);k.next&&(j[f+1]=k.next);e&&e(a,b,i)}}return(B.sync||m.sync).call(c,a,b,d)},parseLinks:function(a,b){var d={},c=b.xhr.getResponseHeader("Link");if(c){var e=["first","prev","next"];
p(c.split(","),function(a){var a=a.split(";"),b=a[0].replace(O,""),a=a.slice(1);p(a,function(a){var c=a.split("="),a=c[0].replace(L,""),c=c[1].replace(L,"");"rel"==a&&I(e,c)&&(d[c]=b)})})}return d},parse:function(a,b){var d=this.parseState(a,t(this.queryParams),t(this.state),b);d&&(this.state=this._checkState(n({},this.state,d)));return this.parseRecords(a,b)},parseState:function(a,b,d){if(a&&2===a.length&&J(a[0])&&z(a[1])){var c=t(d),e=a[0];p(F(o(b,"directions")),function(a){var b=a[0],a=a[1],d=
e[a];!y(d)&&!i.isNull(d)&&(c[b]=e[a])});e.order&&(c.order=1*N(b.directions)[e.order]);return c}},parseRecords:function(a){return a&&2===a.length&&J(a[0])&&z(a[1])?a[1]:a},fetch:function(a){var a=a||{},b=this._checkState(this.state),d=this.mode;"infinite"==d&&!a.url&&(a.url=this.links[b.currentPage]);var c=a.data||{},e=a.url||this.url||"";A(e)&&(e=e.call(this));var f=e.indexOf("?");if(-1!=f){for(var h=e.slice(f+1),g,i,j={},k=decodeURIComponent,m=h.split("&"),l=0,p=m.length;l<p;l++)g=m[l].split("="),
h=g[0],g=g[1]||!0,h=k(h),g=k(g),i=j[h],z(i)?i.push(g):j[h]=i?[i,g]:g;n(c,j);e=e.slice(0,f)}a.url=e;a.data=c;h="client"==this.mode?H(this.queryParams,"sortKey","order"):o(H(this.queryParams,x(w.queryParams)),"directions");l=F(h);e=t(this);for(f=0;f<l.length;f++)j=l[f],m=j[0],k=j[1],k=A(k)?k.call(e):k,null!=b[m]&&null!=k&&(c[k]=b[m]);b.sortKey&&b.order?(f=A(h.order)?h.order.call(e):h.order,c[f]=this.queryParams.directions[b.order+""]):b.sortKey||delete c[h.order];b=F(o(this.queryParams,x(w.queryParams)));
for(f=0;f<b.length;f++)j=b[f],k=j[1],k=A(k)?k.call(e):k,null!=k&&(c[j[0]]=k);if("server"!=d){var u=this,s=this.fullCollection,v=a.success;a.success=function(b,c,e){e=e||{};y(a.silent)?delete e.silent:e.silent=a.silent;var f=b.models;if(d=="client")s.reset(f,e);else{s.add(f,n({at:s.length},n(e,{parse:false})));u.trigger("reset",u,e)}v&&v(b,c,e)};return B.fetch.call(this,n({},a,{silent:!0}))}return B.fetch.call(this,a)},_makeComparator:function(a,b,d){var c=this.state,a=a||c.sortKey,b=b||c.order;if(a&&
b)return d||(d=function(a,b){return a.get(b)}),function(c,f){var h=d(c,a),g=d(f,a),i;1===b&&(i=h,h=g,g=i);return h===g?0:h<g?-1:1}},setSorting:function(a,b,d){var c=this.state;c.sortKey=a;c.order=b=b||c.order;var c=this.fullCollection,e=!1,f=!1;a||(e=f=!0);var h=this.mode,d=n({side:"client"==h?h:"server",full:!0},d),a=this._makeComparator(a,b,d.sortValue),b=d.full,d=d.side;"client"==d?b?(c&&(c.comparator=a),e=!0):(this.comparator=a,f=!0):"server"==d&&!b&&(this.comparator=a);e&&(this.comparator=null);
f&&c&&(c.comparator=null);return this}}),w=M.prototype;m.PageableCollection.noConflict=function(){m.PageableCollection=v;return M}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:backbone-paginator', location = '/sidebar/lib/backbone.paginator.adapter.js' */
define("jira/projects/libs/backbone.paginator",["backbone","underscore","atlassian/libs/factories/backbone.paginator-2.0.2"],function(a,e,n){"use strict";return n(e,a)}),AJS.namespace("Backbone.PageableCollection",null,require("jira/projects/libs/backbone.paginator"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.AbstractList.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.AbstractList == 'undefined') { JIRA.Projects.AbstractList = {}; }
if (typeof JIRA.Projects.AbstractList.Templates == 'undefined') { JIRA.Projects.AbstractList.Templates = {}; }


JIRA.Projects.AbstractList.Templates.pagination = function(opt_data, opt_ignored) {
  var output = '<ol data-total="' + soy.$$escapeHtml(opt_data.totalPages) + '" class="aui-nav aui-nav-pagination' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '">';
  if (opt_data.firstPage < opt_data.lastPage) {
    output += '<li class="aui-nav-previous"><a href="' + soy.$$escapeHtml(opt_data.url) + '&amp;page=' + ((opt_data.currentPage == opt_data.firstPage) ? '0' : soy.$$escapeHtml(opt_data.currentPage - 1)) + '" ' + ((opt_data.currentPage == opt_data.firstPage) ? 'aria-disabled="true"' : 'data-page="' + ((opt_data.currentPage == opt_data.firstPage) ? '0' : soy.$$escapeHtml(opt_data.currentPage - 1)) + '"') + '>' + soy.$$escapeHtml('Previous') + '</a></li>';
    var pageInit36 = opt_data.firstPage;
    var pageLimit36 = opt_data.lastPage + 1;
    for (var page36 = pageInit36; page36 < pageLimit36; page36++) {
      output += (page36 == opt_data.currentPage) ? '<li class="aui-nav-page aui-nav-selected">' + soy.$$escapeHtml(page36) + '</li>' : '<li><a href="' + soy.$$escapeHtml(opt_data.url) + '&amp;page=' + soy.$$escapeHtml(page36) + '" data-page="' + soy.$$escapeHtml(page36) + '">' + soy.$$escapeHtml(page36) + '</a></li>';
    }
    output += '<li class="aui-nav-next"><a href="' + soy.$$escapeHtml(opt_data.url) + '&amp;page=' + ((opt_data.currentPage == opt_data.lastPage) ? soy.$$escapeHtml(opt_data.lastPage) : soy.$$escapeHtml(opt_data.currentPage + 1)) + '"' + ((opt_data.currentPage == opt_data.lastPage) ? 'aria-disabled="true"' : 'data-page="' + ((opt_data.currentPage == opt_data.lastPage) ? soy.$$escapeHtml(opt_data.lastPage) : soy.$$escapeHtml(opt_data.currentPage + 1)) + '"') + '>' + soy.$$escapeHtml('Next') + '</a></li>';
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.AbstractList.Templates.pagination.soyTemplateName = 'JIRA.Projects.AbstractList.Templates.pagination';
}


JIRA.Projects.AbstractList.Templates.actionsError = function(opt_data, opt_ignored) {
  return '<div class="operation-retry ' + soy.$$escapeHtml(opt_data['class']) + '"><div>' + aui.icons.icon({icon: 'info', useIconFont: true}) + '<a href="#" class="operation-retry">' + soy.$$escapeHtml('Retry') + '</a><a href="#" tabindex="0" class="aui-icon aui-icon-small aui-iconfont-remove operation-discard" title="' + soy.$$escapeHtml('Discard') + '">' + soy.$$escapeHtml('Discard') + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.AbstractList.Templates.actionsError.soyTemplateName = 'JIRA.Projects.AbstractList.Templates.actionsError';
}


JIRA.Projects.AbstractList.Templates.tableLayoutCommon = function(opt_data, opt_ignored) {
  return '<table id="' + ((opt_data.id) ? soy.$$escapeHtml(opt_data.id) : 'items-table') + '" class="aui dynamic-table ' + ((opt_data['class']) ? soy.$$escapeHtml(opt_data['class']) : '') + '"><tbody class="header">' + soy.$$filterNoAutoescape(opt_data.headerRow) + '</tbody><tbody class="items"></tbody></table>';
};
if (goog.DEBUG) {
  JIRA.Projects.AbstractList.Templates.tableLayoutCommon.soyTemplateName = 'JIRA.Projects.AbstractList.Templates.tableLayoutCommon';
}


JIRA.Projects.AbstractList.Templates.searchLayout = function(opt_data, opt_ignored) {
  return '<div id="filter-container"></div><div class="header-ending"></div>' + ((! require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<div id="submit-container"></div>' : '') + aui.page.pagePanelContent({content: '<div id="content-container"></div>', extraClasses: 'aui-page-panel-content-no-table'}) + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<div id="submit-container"></div>' : '');
};
if (goog.DEBUG) {
  JIRA.Projects.AbstractList.Templates.searchLayout.soyTemplateName = 'JIRA.Projects.AbstractList.Templates.searchLayout';
}


JIRA.Projects.AbstractList.Templates.actionsSuccess = function(opt_data, opt_ignored) {
  return '<div class="operation-success">' + aui.icons.icon({icon: 'approve', useIconFont: true}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Projects.AbstractList.Templates.actionsSuccess.soyTemplateName = 'JIRA.Projects.AbstractList.Templates.actionsSuccess';
}


JIRA.Projects.AbstractList.Templates.deleteError = function(opt_data, opt_ignored) {
  return '<p><b>' + soy.$$escapeHtml(opt_data.name) + '</b> ' + soy.$$escapeHtml('couldn\x27t be deleted.') + '</p>' + aui.buttons.button({text: 'Retry', type: 'link', extraClasses: 'dynamic_table__retry'});
};
if (goog.DEBUG) {
  JIRA.Projects.AbstractList.Templates.deleteError.soyTemplateName = 'JIRA.Projects.AbstractList.Templates.deleteError';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/lib/backbone.queryparams.js' */
/*! THIS FILE HAS BEEN MODIFIED BY ATLASSIAN, SEE https://github.com/jhudson8/backbone-query-parameters/pull/63/files */
!function(t,e){"object"==typeof exports&&t.require?module.exports=e(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(r,n){return e(r||t._,n||t.Backbone)}):e(_,Backbone)}(this,function(t,e){function r(e,r,n){t.each(Array.prototype.slice.call(arguments,2),function(t){Object.defineProperty(r,t,{get:function(){return e[t]},set:function(r){e[t]=r}})})}function n(t){var e=t.location,n={};r(e,n,"assign","ancestorOrigins","origin","hash","search","pathname","port","hostname","host","protocol","href","reload"),n.replace=function(){e.replace(t.root+"#"+t.fragment)},n.unPatch=function(){return t.location=e},t.location=n}function a(t){var e=t.history,n={};r(e,n,"length","state","back","forward","go","pushState"),n.replaceState=function(r,n,a){return a=t.root+t.fragment,e.replaceState(r,n,a)},n.unPatch=function(){t.history=e},t.history=n}function i(e,r){var n=e.split("&");t.each(n,function(t){var e=t.split("=");r(e.shift(),e.join("="))})}var o=/^\?(.*)/,s=/\((.*?)\)/g,c=/(\(\?)?:\w+/g,u=/\*\w+/g,h=/[\-{}\[\]+?.,\\\^$|#\s]/g,l=/^([^\?]*)/,p=/[\:\*]([^\:\?\/]+)/g,f=/^[#\/]|\s+$/g,m=/\/$/;e.Router.arrayValueSplit="|";var d=function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var r=this.root.replace(m,""),n=this.location.search;t.indexOf(r)||(t=t.substr(r.length)),n&&(t+=n)}else t=this.getHash();return t.replace(f,"")};r.isSupported=function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();var g=e.History.prototype.start,y=e.History.prototype.loadUrl;t.extend(e.History.prototype,{getFragment:d,getQueryParameters:function(e,r){e=d.apply(this,arguments);var n=e.replace(l,""),a=n.match(o);if(a){n=a[1];var s={};return i(n,function(e,r){r=r.replace(/\+/g,"%20"),r=decodeURIComponent(r),s[e]?t.isString(s[e])?s[e]=[s[e],r]:s[e].push(r):s[e]=r}),s}return{}},start:function(){r.isSupported&&(n(this),a(this));try{return g.apply(this,arguments)}finally{this.location.unPatch&&this.location.unPatch(),this.history.unPatch&&this.history.unPatch()}},loadUrl:function(){return this.location&&this.location.unPatch&&this.location.unPatch(),this.history&&this.history.unPatch&&this.history.unPatch(),y.apply(this,arguments)}}),t.extend(e.Router.prototype,{initialize:function(t){this.encodedSplatParts=t&&t.encodedSplatParts},getFragment:d,_routeToRegExp:function(e){var r=u.exec(e)||{index:-1},n=c.exec(e)||{index:-1},a=e.match(p)||[];e=e.replace(h,"\\$&").replace(s,"(?:$1)?").replace(c,function(t,e){return e?t:"([^\\/\\?]+)"}).replace(u,"([^??]*?)"),e+="(\\?.*)?";var i=new RegExp("^"+e+"$");return r.index>=0&&(n>=0?i.splatMatch=r.index-n.index:i.splatMatch=-1),i.paramNames=t.map(a,function(t){return t.substring(1)}),i.namedParameters=this.namedParameters,i},_extractParameters:function(r,n){var a=r.exec(n).slice(1),s={};a.length>0&&t.isUndefined(a[a.length-1])&&a.splice(a.length-1,1);var c=a.length&&a[a.length-1]&&a[a.length-1].match(o);if(c){var u=c[1],h={};if(u){var l=this;i(u,function(t,e){l._setParamValue(t,e,h)})}a[a.length-1]=h,t.extend(s,h)}var p=a.length;if(r.splatMatch&&this.encodedSplatParts){if(r.splatMatch<0)return a;p-=1}for(var f=0;f<p;f++)t.isString(a[f])&&(a[f]=decodeURIComponent(a[f]),r.paramNames&&r.paramNames.length>=f-1&&(s[r.paramNames[f]]=a[f]));return e.Router.namedParameters||r.namedParameters?[s]:a},_setParamValue:function(t,e,r){t=t.replace("[]","");for(var n=t.split("."),a=r,i=0;i<n.length;i++){var o=n[i];i===n.length-1?a[o]=this._decodeParamValue(e,a[o]):a=a[o]=a[o]||{}}},_decodeParamValue:function(r,n){r=r.replace(/\+/g,"%20");var a=e.Router.arrayValueSplit;if(a&&r.indexOf(a)>=0){for(var i=r.split(a),o=i.length-1;o>=0;o--)i[o]?i[o]=decodeURIComponent(i[o]):i.splice(o,1);return i}return r=decodeURIComponent(r),n?t.isArray(n)?(n.push(r),n):[n,r]:r},toFragment:function(e,r){return r&&(t.isString(r)||(r=this._toQueryString(r)),r&&(e+="?"+r)),e},_toQueryString:function(r,n){function a(t){return String(t).replace(i,encodeURIComponent(i))}var i=e.Router.arrayValueSplit;if(!r)return"";n=n||"";var o="";for(var s in r){var c=r[s];if(t.isString(c)||t.isNumber(c)||t.isBoolean(c)||t.isDate(c))c=this._toQueryParam(c),(t.isBoolean(c)||t.isNumber(c)||t.isString(c)||c)&&(o+=(o?"&":"")+this._toQueryParamName(s,n)+"="+a(encodeURIComponent(c)));else if(t.isArray(c)){for(var u="",h=0;h<c.length;h++){var l=this._toQueryParam(c[h]);(t.isBoolean(l)||null!==l)&&(u+=i+a(l))}u&&(o+=(o?"&":"")+this._toQueryParamName(s,n)+"="+u)}else{var p=this._toQueryString(c,this._toQueryParamName(s,n,!0));p&&(o+=(o?"&":"")+p)}}return o},_toQueryParamName:function(t,e,r){return e+t+(r?".":"")},_toQueryParam:function(e){return t.isNull(e)||t.isUndefined(e)?null:e}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/Effects.js' */
define("jira/projects/abstract-list/effects",["jquery"],function(e){"use strict";return{onCollectionRemove:function(t){var i=e.Deferred(),r=this.children.findByModel(t);return r?(r.$el.addClass("transition-destroy"),r.$("td > div").animate({height:0},500,function(){this.removeChildView(r),this.checkEmpty(),i.resolve()}.bind(this))):i.resolve(),i}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/ItemCollectionView.js' */
define("jira/projects/abstract-list/item-collection-view",["jira/projects/abstract-list/effects","jira/projects/libs/marionette","jira/projects/abstract-list/lazy-loading-collection","jquery","underscore"],function(e,t,i,n,l){"use strict";var o=t.CollectionView.extend({tagName:"tbody",initialize:function(e){if(!e.collection instanceof i)throw"Collection should extend LazyLoadingCollection";var t=l.debounce(this._checkScroll,o.SCROLL_DEBOUNCE,!0).bind(this);n(window).on("scroll.infiniteScroll",t),this.checkInterval=setInterval(t,o.CHECK_INTERVAL)},onDestroy:function(){n(window).off("scroll.infiniteScroll"),clearInterval(this.checkInterval)},_checkScroll:function(e){var t=this.children.last();t.$el.isInView()&&this._nextPage(e),JIRA.trace("jira.projects.scroll.checked")},_nextPage:function(e){e&&e.preventDefault();var t=this.collection.nextPage();t&&this.trigger("infiniteScrollEvent",{elementsLoaded:this.collection.elementsLeft().elementsLoaded,elementsLeft:this.collection.elementsLeft().elementsLeft})},_onCollectionRemove:e.onCollectionRemove});return o.SCROLL_DEBOUNCE=50,o.CHECK_INTERVAL=1e3,o});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/TableLayoutView.js' */
define("jira/projects/abstract-list/table-layout-view",["jira/projects/libs/marionette","backbone"],function(t,e){"use strict";var i=t.LayoutView.extend({regions:{itemsRegion:".items"},initialize:function(t){this.collection=t.collection,this.submitController=t.submitController},onRender:function(){this.itemsRegion.attachHtml=this._attachHtmlReplaceRegionWrapper;var t=new this.ItemCollectionView({collection:this.collection,submitController:this.submitController,className:"items"});this.itemsRegion.show(t)},_attachHtmlReplaceRegionWrapper:function(t){this.$el.replaceWith(t.el)}});return i});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/queryStringParam.js' */
!function(){"use strict";function t(t,s,i){if(i=i||window.location,t){var a=i.search.substr(1).split("&");s&&(a=a.concat(i.hash.substr(1).split("&")));for(var r=a.length-1;r>=0;r--){var e=a[r].split("=");if(2==e.length&&t===e[0])return decodeURIComponent(e[1].replace(/\+/g," "))}}}AJS.namespace("JIRA.Projects.AbstractList.NavigationUtils"),JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam=t}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/NavigationUtils.js' */
!function(){"use strict";var t=require("atlassian/libs/uri-1.14.1");AJS.namespace("JIRA.Projects.AbstractList.NavigationUtils"),JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported=!!history.pushState,JIRA.Projects.AbstractList.NavigationUtils.getBackboneHistoryRoot=function(){return JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported?"":JIRA.Projects.AbstractList.NavigationUtils.getRoot()},JIRA.Projects.AbstractList.NavigationUtils.getRoot=function(){var t=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("selectedItem");return document.location.pathname+(t?"?selectedItem="+t:"?")},JIRA.Projects.AbstractList.NavigationUtils.navigate=function(t){JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported&&(t=JIRA.Projects.AbstractList.NavigationUtils.getRoot()+t),Backbone.history.navigate(t)},JIRA.Projects.AbstractList.NavigationUtils.append=function(i,a){var s=new t(location.href);s=s.addSearch(i,a),history.replaceState(null,"",s.href())}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/FilterModel.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.FilterModel"),JIRA.Projects.AbstractList.FilterModel=Backbone.Model.extend({filterAttributes:[],initialize:function(t){this.pageableCollection=t.pageableCollection,delete this.attributes.pageableCollection},filterCollection:function(){var t=this.pageableCollection.originalCollection;this.pageableCollection.fullCollection.reset(t),this.pageableCollection.getPage("first")},navigate:function(){JIRA.Projects.AbstractList.NavigationUtils.navigate(this.getFilterQueryStringParams()),this.trigger("navigate")},getFilterQueryStringParams:function(){var t=this.filterAttributes.reduce(function(t,e){var i=this.get(e);return i?t+"&"+encodeURIComponent(e)+"="+encodeURIComponent(i):t}.bind(this),"");return JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported||(t=t.substr(1)),t}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/ItemModel.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.ItemModel"),JIRA.Projects.AbstractList.ItemModel=Backbone.Model.extend({})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/ItemView.js' */
define("jira/projects/abstract-list/item-view",["jira/flag","jira/ajs/ajax/ajax-util","jira/projects/abstract-model/submit-model-states","jira/projects/libs/marionette","jira/loading/loading","jquery"],function(t,e,i,r,n,a){var o=r.ItemView.extend({modelEvents:{change:"_modelChange"},events:{"click @ui.retryAddButton":"_retryAddOperation","click @ui.retryDeleteButton":"_retryDeleteOperation","click @ui.retryUpdateButton":"_retryUpdateOperation","click @ui.discard":"_discardOperation"},ui:{retryAddButton:".operation-retry.operation-add a.operation-retry",retryDeleteButton:".operation-retry.operation-delete a.operation-retry",retryUpdateButton:".operation-retry.operation-update a.operation-retry",discard:".operation-retry a.operation-discard"},_modelChange:function(t){t.get("state")===i.ERROR_DELETE&&this._showFlag(),this.render.apply(this,arguments)},listenToElements:function(t){_.each(t,function(t,e){var i=this[t].bind(this);if(i){var r=e.substring(0,e.indexOf(" ")),n=e.substring(r.length+1),a=this._getElement(n);this._onElement(a,r,i)}},this)},_onElement:function(t,e,i){t&&t.length&&t.on(e,i)},_getElement:function(t){if(0===t.indexOf("@ui.")){var e=t.substring(4);return this.ui[e]}return a(t)},onRender:function(){this.unwrapTemplate()},_retryAddOperation:function(t){t.preventDefault(),this.model.trigger("retry-add",this.model)},_retryDeleteOperation:function(t){t.preventDefault(),this.model.trigger("retry-delete",this.model)},_retryUpdateOperation:function(t){t.preventDefault(),this.model.trigger("retry-update",this.model)},_discardOperation:function(t){t.preventDefault(),this.model.discard()},_showLoading:function(){AJS.dim(),n.showLoadingIndicator()},_hideLoading:function(){AJS.undim(),n.hideLoadingIndicator()},_showFlag:function(){0==this.$el.parents(".dynamic-table > .items").length||this.$el.isInView()||(this.flag||(this.flag=t.showErrorMsg(null,JIRA.Projects.AbstractList.Templates.deleteError({name:this.model.get("name")})),a(this.flag).find(".dynamic_table__retry").on("click",function(){this._deleteItemRetry(),this.flag.close()}.bind(this))),this.flag.setAttribute("aria-hidden","false"))}});return o});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/Layout.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.Layout"),JIRA.Projects.AbstractList.Layout=JIRA.Projects.Libs.Marionette.LayoutView.extend({onRender:function(){this.unwrapTemplate()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/LazyLoadingCollection.js' */
define("jira/projects/abstract-list/lazy-loading-collection",["backbone"],function(i){"use strict";var t=i.Collection.extend({collectionClass:null,_findAddingIndex:function(i,t){return 0},initialize:function(i,t){this.originalCollection=new this.collectionClass(t.data),this.fullCollection=new this.collectionClass(this.originalCollection.models),this.nextPage(),this.listenTo(this,"remove",function(){this.originalCollection.length<=1&&this.trigger("collectionChanged")})},nextPage:function(){return!this.isFullyLoaded()&&(this.add(this.fullCollection.slice(this.size(),Math.min(this.size()+t.PAGE_INCREMENT,this.fullCollection.size()))),!this.isFullyLoaded())},isFullyLoaded:function(){return this.size()>=this.fullCollection.size()},updateElement:function(i){var t=i.get("id"),e=i.toJSON(),l=this.fullCollection.get(t);return l&&l.set(e),this.originalCollection.filter(function(i){return i.id==t}).some(function(i){i.set(e)}),l},addElement:function(i){if(this.originalCollection.add(i,{at:this._findAddingIndex(this.originalCollection,i)}),this.filter.elementMatchFilter(i)){var t=this._findAddingIndex(this.fullCollection,i);this.fullCollection.add(i,{at:t}),t<=this.size()&&this.add(i,{at:t})}this.size()<=1&&this.trigger("update"),this.trigger("collectionChanged")},resetFilter:function(i){this.fullCollection.reset(i),this.reset(),this.nextPage()},elementsLeft:function(){return{elementsTotal:this.fullCollection.size(),elementsLoaded:this.size(),elementsLeft:this.fullCollection.size()-this.size()}}});return t.PAGE_INCREMENT=25,t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/PaginationView.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.PaginationView"),JIRA.Projects.AbstractList.PaginationView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.AbstractList.Templates.pagination,ui:{page:"li a"},events:{"click @ui.page":"clickPage"},collectionEvents:{reset:"render"},modelEvents:{change:"render"},onRender:function(){this.unwrapTemplate()},serializeData:function(){var t=JIRA.Projects.AbstractList.NavigationUtils.getRoot()+this.model.getFilterQueryStringParams(),e=_.extend({url:t},this.collection.state);return e.firstPage=Math.max(e.currentPage-5,e.firstPage),e.totalPages=e.lastPage,e.lastPage=Math.min(e.currentPage+5,e.lastPage),e},clickPage:function(t){t.preventDefault();var e=+AJS.$(t.target).attr("data-page");e&&(JIRA.Projects.AbstractList.NavigationUtils.navigate(this.model.getFilterQueryStringParams()+"&page="+e),this.collection.getPage(e),this.trigger("navigate",e))}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/Router.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.Router"),JIRA.Projects.AbstractList.Router=Backbone.Router.extend({initialize:function(){this.route(/(.*)/,"any")},any:function(){}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/SubmitController.js' */
define("jira/projects/abstract-list/submit-controller",["jira/projects/libs/marionette"],function(r){var t=r.Controller.extend({});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/SubmitModelEvents.js' */
define("jira/projects/abstract-list/submit-model-events",[],function(){var e={SERVER_ERROR:"SubmitModelEvent.serverError"};return Object.freeze(e)});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/SubmitModel.js' */
define("jira/projects/abstract-list/submit-model",["backbone","jira/projects/abstract-model/submit-model-states","jquery"],function(t,e,s){var i=t.Model.extend({defaults:{state:e.READY},save:function(i){this.set("state",i||e.IN_PROGRESS);var a=s.Deferred();return t.Model.prototype.save.call(this,[],{attrs:this.toDataJSON()}).done(function(){this.detailsSync().always(function(){this._traceItemAdded(),this.set("state",e.SUCCESSFUL),a.resolve()}.bind(this))}.bind(this)).fail(function(t){this.set("state",e.ERROR_ADD),this._traceItemAdded(),a.reject(t)}.bind(this)),a},_traceItemAdded:function(){JIRA.trace("jira.item.add.finished")},discard:function(){this.get("state")===e.ERROR_ADD?this.destroy({data:{}}):this.get("state")!==e.ERROR_DELETE&&this.get("state")!==e.ERROR_UPDATE||this.set("state",e.READY)},detailsSync:function(){return s.ajax({type:"GET",url:this.detailsPath(),contentType:"application/json"}).done(function(t){this.set(t)}.bind(this))},isStateError:function(){return e.isStateError(this.get("state"))},isStateErrorOrRetrying:function(){return e.isStateErrorOrRetrying(this.get("state"))},addStateTimeout:function(t,e){setTimeout(function(){this.get("state")===t&&this.set("state",e)}.bind(this),5e3)}});return i});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/SubmitView.js' */
define("jira/projects/abstract-list/submit-view",["jira/projects/libs/marionette"],function(e){var t=e.ItemView.extend({});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = '/page/project/abstract-list/SubmitModelStates.js' */
define("jira/projects/abstract-model/submit-model-states",[],function(){var R=new function(){this.READY="ready",this.IN_PROGRESS="in-progress",this.IN_PROGRESS_ERROR="in-progress-error",this.SUCCESSFUL="successful",this.ERROR_ADD="error-add",this.ERROR_DELETE="error-delete",this.ERROR_UPDATE="error-update",this.STATES_ERROR=[this.ERROR_ADD,this.ERROR_DELETE,this.ERROR_UPDATE],this.STATES_ERROR_RETRYING=this.STATES_ERROR.slice(),this.STATES_ERROR_RETRYING.push(this.IN_PROGRESS_ERROR),this.isStateError=function(R){return this.STATES_ERROR.indexOf(R)>=0},this.isStateErrorOrRetrying=function(R){return this.STATES_ERROR_RETRYING.indexOf(R)>=0}};return Object.freeze(R)});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-metrics', location = '/page/project/release/Analytics.js' */
define("jira/projects/release/analytics",[],function(){"use strict";var e=function(e,t){AJS.trigger("analyticsEvent",{name:e,data:t||{}})};return{progressDialogClick:function(){e("jira.projects.release.progress.dialog.click")},navigate:function(){var t=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",!0)||"unreleased",i=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("contains",!0)||"",r=+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("page",!0)||1;e("jira.projects.release.navigate",{status:t,containsLength:i.length,page:r})},emptyViewRendered:function(){e("jira.projects.release.empty.view")},releaseLearnMoreClicked:function(){e("jira.projects.release.learn.more.click")},showEditVersion:function(){e("jira.projects.release.edit.show")},editVersionFail:function(){e("jira.projects.release.edit.fail")},editVersionSuccess:function(){e("jira.projects.release.edit.success")}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-data', location = '/page/project/release/CalendarParamsData.js' */
define("jira/projects/release/calendar-params-data",["wrm/data"],function(a){return a.claim("com.atlassian.jira.projects.page.release:calendarParams")});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.6.1-factory', location = 'factories/marionette/1.6.1/marionette-1.6.1-factory.js' */
(function(e){define("atlassian/libs/factories/marionette-1.6.1",function(){return function(d,k){var h=k.Marionette;e.call({_:d,Backbone:k});var g=k.Marionette;g.VERSION="1.6.1";k.Marionette=h;return g}})})(function(){var e=this.Backbone,d=this._,k=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(k.prototype,{add:function(a,b){var f=a.cid;this._views[f]=a;a.model&&(this._indexByModel[a.model.cid]=f);b&&(this._indexByCustom[b]=
f);this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],!0},this);
delete this._views[b];this._updateLength()},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(f){d.isFunction(f[a])&&f[a].apply(f,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){k.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});var h={},g=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&this.initialize(a)};g.extend=e.Model.extend;d.extend(g.prototype,e.Events,{setHandlers:function(a){d.each(a,function(a,f){var c=null;d.isObject(a)&&!d.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(f,a,c)},this)},setHandler:function(a,b,f){this._wreqrHandlers[a]={callback:b,context:f};this.trigger("handler:add",a,b,f)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});h.Handlers=g;g=function(a){this.options=a;this._commands={};d.isFunction(this.initialize)&&this.initialize(a)};d.extend(g.prototype,e.Events,{getCommands:function(a){var b=this._commands[a];
b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});h.CommandStorage=g;g=h.Handlers.extend({storageType:h.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);h.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=
arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,f){var c=this.storage.getCommands(a);d.each(c.instances,function(a){b.apply(f,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=d.isFunction(a)?new a:a}});h.Commands=g;h.RequestResponse=h.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,
1);return this.getHandler(a).apply(this,b)}});g=function(){};g.extend=e.Model.extend;d.extend(g.prototype,e.Events);h.EventAggregator=g;var m=function(a,b){var f=Error(a);f.name=b||"Error";throw f;},c={};e.Marionette=c;c.$=e.$;var j=Array.prototype.slice;c.extend=e.Model.extend;c.getOption=function(a,b){if(a&&b)return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]};var q=function(a,b,f){return f.toUpperCase()},r=/(^|:)(\w)/gi;c.triggerMethod=function(a){var b=this["on"+a.replace(r,
q)];d.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(d.isFunction(b))return b.apply(this,d.tail(arguments))};var s=document.documentElement,n=function(a){a._isShown&&a._isRendered&&s.contains(a.el)&&d.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};c.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;n(a)});a.listenTo(a,"render",function(){a._isRendered=!0;n(a)})};var t=function(a,b,f,c){c=c.split(/\s+/);d.each(c,function(c){var d=a[c];d||m("Method '"+
c+"' was configured as an event handler, but does not exist.");a.listenTo(b,f,d,a)})},u=function(a,b,f,c){a.listenTo(b,f,c,a)},v=function(a,b,f,c){c=c.split(/\s+/);d.each(c,function(c){a.stopListening(b,f,a[c],a)})},w=function(a,b,c,d){a.stopListening(b,c,d,a)},o=function(a,b,c,i,l){b&&c&&(d.isFunction(c)&&(c=c.call(a)),d.each(c,function(c,f){d.isFunction(c)?i(a,b,f,c):l(a,b,f,c)}))};c.bindEntityEvents=function(a,b,c){o(a,b,c,u,t)};c.unbindEntityEvents=function(a,b,c){o(a,b,c,w,v)};c.Callbacks=function(){this._deferred=
c.$.Deferred();this._callbacks=[]};d.extend(c.Callbacks.prototype,{add:function(a,b){this._callbacks.push({cb:a,ctx:b});this._deferred.done(function(c,d){b&&(c=b);a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=c.$.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,a.ctx)},this)}});c.Controller=function(a){this.triggerMethod=c.triggerMethod;this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};
c.Controller.extend=c.extend;d.extend(c.Controller.prototype,e.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});c.Region=function(a){this.options=a||{};this.el=c.getOption(this,"el");if(!this.el){var b=Error("An 'el' must be specified for a region.");b.name="NoElError";throw b;}this.initialize&&(b=Array.prototype.slice.apply(arguments),this.initialize.apply(this,b))};d.extend(c.Region,{buildRegion:function(a,b){var c="string"===typeof a,i="string"===typeof a.selector,
l="undefined"===typeof a.regionType,e="function"===typeof a;if(!e&&!c&&!i)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,g;c&&(h=a);a.selector&&(h=a.selector,delete a.selector);e&&(g=a);!e&&l&&(g=b);a.regionType&&(g=a.regionType,delete a.regionType);if(c||e)a={};a.el=h;c=new g(a);a.parentEl&&(c.getEl=function(b){var c=a.parentEl;d.isFunction(c)&&(c=c());return c.find(b)});return c}});d.extend(c.Region.prototype,e.Events,{show:function(a){this.ensureEl();
var b=a.isClosed||d.isUndefined(a.$el),f=a!==this.currentView;f&&this.close();a.render();(f||b)&&this.open(a);this.currentView=a;c.triggerMethod.call(this,"show",a);c.triggerMethod.call(a,"show")},ensureEl:function(){if(!this.$el||0===this.$el.length)this.$el=this.getEl(this.el)},getEl:function(a){return c.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),c.triggerMethod.call(this,"close",a),delete this.currentView)},
attachView:function(a){this.currentView=a},reset:function(){this.close();delete this.$el}});c.Region.extend=c.extend;var p=c.Controller.extend({constructor:function(a){this._regions={};c.Controller.prototype.constructor.call(this,a)},addRegions:function(a,b){var c={};d.each(a,function(a,l){"string"===typeof a&&(a={selector:a});a.selector&&(a=d.defaults({},a,b));var e=this.addRegion(l,a);c[l]=e},this);return c},addRegion:function(a,b){var f;f=d.isObject(b);var i=d.isString(b),e=!!b.selector;f=i||f&&
e?c.Region.buildRegion(b,c.Region):d.isFunction(b)?c.Region.buildRegion(b,c.Region):b;this._store(a,f);this.triggerMethod("region:add",a,f);return f},get:function(a){return this._regions[a]},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){d.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){d.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var a=Array.prototype.slice.call(arguments);c.Controller.prototype.close.apply(this,
a)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=d.size(this._regions)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){p.prototype[a]=function(){var b=[d.values(this._regions)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});c.RegionManager=p;c.TemplateCache=function(a){this.templateId=a};d.extend(c.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new c.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=j.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});d.extend(c.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=
this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var b=c.$(a).html();(!b||0===b.length)&&m("Could not find template: '"+a+"'","NoTemplateError");return b},compileTemplate:function(a){return d.template(a)}});c.Renderer={render:function(a,b){if(!a){var f=Error("Cannot render the template since it's false, null or undefined.");f.name="TemplateNotFoundError";throw f;}return("function"===typeof a?a:c.TemplateCache.get(a))(b)}};c.View=e.View.extend({constructor:function(a){d.bindAll(this,
"render");var b=Array.prototype.slice.apply(arguments);this.options=d.extend({},d.result(this,"options"),d.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(d.result(this,"events"));e.View.prototype.constructor.apply(this,b);c.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:c.triggerMethod,getTemplate:function(){return c.getOption(this,"template")},mixinTemplateHelpers:function(a){var a=a||{},b=c.getOption(this,"templateHelpers");d.isFunction(b)&&
(b=b.call(this));return d.extend(a,b)},normalizeUIKeys:function(a){if("undefined"!==typeof a)return d.each(d.keys(a),function(b){var c=b.split("@ui.");2===c.length&&(a[c[0]+this.ui[c[1]]]=a[b],delete a[b])},this),a},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));d.each(b,function(b,c){var e=d.isObject(b),g=e?b.event:b;a[c]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,i=e?b.stopPropagation:d;(e?b.preventDefault:c)&&c&&c.apply(a);
i&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);c.bindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.bindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;d.isFunction(a)&&(a=a.call(this));var b={},c=this.configureTriggers();d.extend(b,a,c);e.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=
Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,a);c.unbindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.unbindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){!this.isClosed&&!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);
var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(b){this.ui[b]=this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}});c.ItemView=c.View.extend({constructor:function(){c.View.prototype.constructor.apply(this,j.call(arguments))},serializeData:function(){var a={};this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()});
return a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate(),a=c.Renderer.render(b,a);this.$el.html(a);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),c.View.prototype.close.apply(this,j.call(arguments)),this.triggerMethod("item:closed"))}});
c.CollectionView=c.View.extend({itemViewEventPrefix:"itemview",constructor:function(a){this._initChildViewStorage();c.View.prototype.constructor.apply(this,j.call(arguments));this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this.appendBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();
this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(d.each(this._bufferedChildren,function(a){c.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);
this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){c.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=!1;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();
this.closeEmptyView();this.closeChildren();this.isEmpty(this.collection)?this.showEmptyView():this.showCollection();this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new e.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},
getEmptyView:function(){return c.getOption(this,"emptyView")},getItemView:function(){var a=c.getOption(this,"itemView");a||m("An `itemView` must be specified","NoItemViewError");return a},addItemView:function(a,b,f){var i=c.getOption(this,"itemViewOptions");d.isFunction(i)&&(i=i.call(this,a,f));a=this.buildItemView(a,b,i);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,f);this._isShown&&!this.isBuffering&&c.triggerMethod.call(a,
"show");this.triggerMethod("after:item:added",a);return a},addChildViewEventForwarding:function(a){var b=c.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var f=j.call(arguments),i=f[0],e=this.getItemEvents();f[0]=b+":"+i;f.splice(1,0,a);"undefined"!==typeof e&&d.isFunction(e[i])&&e[i].apply(this,f);c.triggerMethod.apply(this,f)},this)},getItemEvents:function(){return d.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(a,b){a.render();
this.appendHtml(this,a,b)},buildItemView:function(a,b,c){a=d.extend({model:a},c);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},
appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,b){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new k},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),c.View.prototype.close.apply(this,j.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}});
c.CompositeView=c.CollectionView.extend({constructor:function(){c.CollectionView.prototype.constructor.apply(this,j.call(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var a=c.getOption(this,"itemView")||this.constructor;a||m("An `itemView` must be specified",
"NoItemViewError");return a},serializeData:function(){var a={};this.model&&(a=this.model.toJSON());return a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();this.$el.html(a);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),
c.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate();return c.Renderer.render(b,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in
a)return a.$itemViewContainer;var b;(b=c.getOption(a,"itemViewContainer"))?(b=d.isFunction(b)?b.call(this):b,b=a.$(b),0>=b.length&&m("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")):b=a.$el;return a.$itemViewContainer=b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}});c.Layout=c.ItemView.extend({regionType:c.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);c.ItemView.prototype.constructor.call(this,
a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments);return c.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);c.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},
this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},_buildRegions:function(a){var b=this,d={regionType:c.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,d)},_initializeRegions:function(a){this._initRegionManager();a=d.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();
this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new c.RegionManager;this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}});c.AppRouter=e.Router.extend({constructor:function(a){e.Router.prototype.constructor.apply(this,j.call(arguments));this.options=a||{};var b=c.getOption(this,"appRoutes"),
d=this._getController();this.processAppRoutes(d,b)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return c.getOption(this,"controller")},_addAppRoute:function(a,b,c){var e=a[c];if(!e)throw Error("Method '"+c+"' was not found on the controller");this.route(b,c,d.bind(e,a))}});c.Application=function(a){this._initRegionManager();
this._initCallbacks=new c.Callbacks;this.vent=new h.EventAggregator;this.commands=new h.Commands;this.reqres=new h.RequestResponse;this.submodules={};d.extend(this,a);this.triggerMethod=c.triggerMethod};d.extend(c.Application.prototype,e.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var d=c.Module;b&&(d=b.moduleClass||d);var e=j.call(arguments);e.unshift(this);
return d.create.apply(d,e)},_initRegionManager:function(){this._regionManager=new c.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,"region:remove",function(a){delete this[a]})}});c.Application.extend=c.extend;c.Module=function(a,b,f){this.moduleName=a;this.options=d.extend({},this.options,f);this.initialize=f.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=
!0;this.triggerMethod=c.triggerMethod;d.isFunction(this.initialize)&&this.initialize(this.options)};c.Module.extend=c.extend;d.extend(c.Module.prototype,e.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=
!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,c.triggerMethod.call(this,"before:stop"),d.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),c.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){if(a){var f=d.flatten([this,this.app,e,c,c.$,d,b]);a.apply(this,f)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=
new c.Callbacks;this._finalizerCallbacks=new c.Callbacks}});d.extend(c.Module,{create:function(a,b,c){var e=a,g=j.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=c;d.each(b,function(b,d){var j=e;e=this._getModule(j,b,a,c);this._addModuleDefinition(j,e,h[d],g)},this);return e},_getModule:function(a,b,f,e){var g=c.Module,h=d.extend({},e);e&&(g=e.moduleClass||g);e=a[b];e||(e=new g(b,f,h),a[b]=e,a.submodules[b]=e);return e},_addModuleDefinition:function(a,b,c,e){var g;d.isFunction(c)?
(g=c,c=!0):d.isObject(c)?(g=c.define,c="undefined"!==typeof c.startWithParent?c.startWithParent:!0):c=!0;g&&b.addDefinition(g,e);b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});c.Wreqr=h;c.ChildViewContainer=k});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'lib/backbone/backbone-amd.js' */
define("jira-project-config/backbone",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/backbone-1.0.0"),i=e("underscore"),n=e("jquery");return r(i,n)});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'lib/marionettejs/marionette-amd.js' */
define("jira-project-config/marionette",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/marionette-1.6.1"),i=e("jira-project-config/backbone"),t=e("underscore");return r(t,i)});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'lib/namespace.js' */
AJS.namespace("JIRA.ProjectConfig.Backbone",null,require("jira-project-config/backbone")),AJS.namespace("JIRA.ProjectConfig.Backbone.Marionette",null,require("jira-project-config/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'versions/templates/versions.soy' */
// This file was automatically generated from versions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Versions.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Versions == 'undefined') { JIRA.Templates.Versions = {}; }


JIRA.Templates.Versions.releaseStatus = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.released) ? '<span class="aui-icon aui-icon-small aui-iconfont-version icon-default' + ((opt_data.archived) ? ' project-config-icon-version-archived' : '') + '"></span>' : (opt_data.archived) ? '<span class="project-config-icon project-config-icon-version-archived"></span>' : '<span class="project-config-icon project-config-icon-version"></span>');
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.releaseStatus.soyTemplateName = 'JIRA.Templates.Versions.releaseStatus';
}


JIRA.Templates.Versions.operations = function(opt_data, opt_ignored) {
  var output = '<a id="version-' + soy.$$escapeHtml(opt_data.version.id) + '-operations-trigger" class="aui-button aui-button-compact aui-button-subtle project-config-operations-trigger" href="#"><span class="aui-icon aui-icon-small aui-iconfont-more icon-default"></span></a><div class="project-config-operations-list aui-list hidden"><ul class="aui-list-section aui-first aui-last">';
  if (opt_data.version.operations) {
    var operationList20 = opt_data.version.operations;
    var operationListLen20 = operationList20.length;
    for (var operationIndex20 = 0; operationIndex20 < operationListLen20; operationIndex20++) {
      var operationData20 = operationList20[operationIndex20];
      output += (operationData20.href) ? '<li class="aui-list-item"><a class="aui-list-item-link ' + soy.$$escapeHtml(operationData20.styleClass) + '" href="' + soy.$$escapeHtml(operationData20.href) + '">' + soy.$$escapeHtml(operationData20.label) + '</a></li>' : '<li class="aui-list-item"><a class="aui-list-item-link ' + soy.$$escapeHtml(operationData20.styleClass) + '" href="#">' + soy.$$escapeHtml(operationData20.label) + '</a></li>';
    }
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.operations.soyTemplateName = 'JIRA.Templates.Versions.operations';
}


JIRA.Templates.Versions.editName = function(opt_data, opt_ignored) {
  return '<input name="name" type="text" class="text" value="' + soy.$$escapeHtml(opt_data.value ? opt_data.value : '') + '"  />' + ((! opt_data.update) ? '<input name="project" type="hidden" value="' + soy.$$escapeHtml(opt_data.project) + '">' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.editName.soyTemplateName = 'JIRA.Templates.Versions.editName';
}


JIRA.Templates.Versions.readStartDate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.userStartDate) ? soy.$$escapeHtml(opt_data.userStartDate) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.readStartDate.soyTemplateName = 'JIRA.Templates.Versions.readStartDate';
}


JIRA.Templates.Versions.readReleaseDate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.userReleaseDate) ? soy.$$escapeHtml(opt_data.userReleaseDate) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.readReleaseDate.soyTemplateName = 'JIRA.Templates.Versions.readReleaseDate';
}


JIRA.Templates.Versions.editStartDate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="project-config-date-field"><input id="project-config-version-start-date-field" name="userStartDate" type="text" class="text short-field" value="' + soy.$$escapeHtml(opt_data.userStartDate ? opt_data.userStartDate : '') + '" /><a href="#" id="project-config-versions-start-date-trigger" title="' + soy.$$escapeHtml('Select a date') + '"><span class="aui-icon aui-icon-small aui-iconfont-calendar icon-default">' + soy.$$escapeHtml('Select a date') + '</span></a></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.editStartDate.soyTemplateName = 'JIRA.Templates.Versions.editStartDate';
}


JIRA.Templates.Versions.editReleaseDate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="project-config-date-field"><input id="project-config-version-release-date-field" name="userReleaseDate" type="text" class="text short-field" value="' + soy.$$escapeHtml(opt_data.userReleaseDate ? opt_data.userReleaseDate : '') + '" /><a href="#" id="project-config-versions-release-date-trigger" title="' + soy.$$escapeHtml('Select a date') + '"><span class="aui-icon aui-icon-small aui-iconfont-calendar icon-default">' + soy.$$escapeHtml('Select a date') + '</span></a></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.editReleaseDate.soyTemplateName = 'JIRA.Templates.Versions.editReleaseDate';
}


JIRA.Templates.Versions.deleteForm = function(opt_data, opt_ignored) {
  var output = '<h2 class="dialog-title">' + soy.$$escapeHtml('Delete') + ' ' + soy.$$escapeHtml(opt_data.version.name) + '</h2><form class="aui version-delete" action="#" method="post"><div class="form-body">';
  if (opt_data.areRelatedIssues) {
    if (opt_data.versions.length) {
      output += '<div class="info-message">' + soy.$$escapeHtml('What would you like to do with any issues assigned to this version?') + '</div>';
      if (opt_data.relatedIssueCount.issuesAffectedCount) {
        output += '<fieldset class="group"><legend><span>' + soy.$$escapeHtml('Issues affecting') + ' (<a id="affects-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;version=' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount.issuesAffectedCount) + '</a>)</span></legend><div class="radio"><input name="affects" value="swap" id="affects-swap" class="radio" checked="checked" type="radio" /><label for="affects-swap">' + soy.$$escapeHtml('Assign them to this version') + '</label> <select id="moveAffectedIssuesTo" name="moveAffectedIssuesTo" class="select">';
        var versionList99 = opt_data.versions;
        var versionListLen99 = versionList99.length;
        for (var versionIndex99 = 0; versionIndex99 < versionListLen99; versionIndex99++) {
          var versionData99 = versionList99[versionIndex99];
          output += '<option value="' + soy.$$escapeHtml(versionData99.id) + '">' + soy.$$escapeHtml(versionData99.name) + '</option>';
        }
        output += '</select></div><div class="radio"><input name="affects" values="remove" id="affects-remove" class="radio" type="radio"><label for="affects-remove">' + soy.$$escapeHtml('Remove the version') + '</label></div></fieldset>';
      }
      if (opt_data.relatedIssueCount.issuesFixedCount) {
        output += '<fieldset class="group"><legend><span>' + soy.$$escapeHtml('Issues fixed in') + ' (<a id="fix-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;fixfor=' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount.issuesFixedCount) + '</a>)</span></legend><div class="radio"><input name="fix" value="swap" id="fix-swap" class="radio" checked="checked" type="radio" /><label for="fix-swap">' + soy.$$escapeHtml('Assign them to this version') + '</label> <select id="moveFixIssuesTo" name="moveFixIssuesTo" class="select">';
        var versionList124 = opt_data.versions;
        var versionListLen124 = versionList124.length;
        for (var versionIndex124 = 0; versionIndex124 < versionListLen124; versionIndex124++) {
          var versionData124 = versionList124[versionIndex124];
          output += '<option value="' + soy.$$escapeHtml(versionData124.id) + '">' + soy.$$escapeHtml(versionData124.name) + '</option>';
        }
        output += '</select></div><div class="radio"><input name="fix" value="remove" id="fix-remove" class="radio" type="radio"><label for="fix-remove">' + soy.$$escapeHtml('Remove the version') + '</label></div></fieldset>';
      }
      if (opt_data.relatedIssueCount.issueCountWithCustomFieldsShowingVersion) {
        var usageList136 = opt_data.relatedIssueCount.customFieldUsage;
        var usageListLen136 = usageList136.length;
        for (var usageIndex136 = 0; usageIndex136 < usageListLen136; usageIndex136++) {
          var usageData136 = usageList136[usageIndex136];
          output += '<fieldset class="group"><legend><span>' + soy.$$escapeHtml(usageData136.fieldName) + ' (<a id="custom-' + soy.$$escapeHtml(usageData136.customFieldId) + '-count" href="' + soy.$$escapeHtml("") + '/issues/?jql=' + soy.$$escapeHtml(usageData136.issueLink) + '">' + soy.$$escapeHtml(usageData136.issueCountWithVersionInCustomField) + '</a>):</span></legend><div class="radio"><input name="customField' + soy.$$escapeHtml(usageData136.customFieldId) + 'Action" value="swap" id="custom-swap-' + soy.$$escapeHtml(usageData136.customFieldId) + '" class="radio" checked="checked" type="radio" /><label for="custom-' + soy.$$escapeHtml(usageData136.customFieldId) + '-swap">' + soy.$$escapeHtml('Assign them to this version') + '</label> <select id="move-custom-' + soy.$$escapeHtml(usageData136.customFieldId) + '-to" name="customField' + soy.$$escapeHtml(usageData136.customFieldId) + 'MoveTo" class="select">';
          var versionList160 = opt_data.versions;
          var versionListLen160 = versionList160.length;
          for (var versionIndex160 = 0; versionIndex160 < versionListLen160; versionIndex160++) {
            var versionData160 = versionList160[versionIndex160];
            output += '<option value="' + soy.$$escapeHtml(versionData160.id) + '">' + soy.$$escapeHtml(versionData160.name) + '</option>';
          }
          output += '</select></div><div class="radio"><input name="customField' + soy.$$escapeHtml(usageData136.customFieldId) + 'Action" value="remove" id="custom-remove-' + soy.$$escapeHtml(usageData136.customFieldId) + '" class="radio" type="radio"><label for="custom-' + soy.$$escapeHtml(usageData136.customFieldId) + '-remove">' + soy.$$escapeHtml('Remove the version') + '</label></div></fieldset>';
        }
      }
    } else {
      output += '<div class="info-message"><p>' + soy.$$escapeHtml('There are issues that have this version selected in one or more fields. If you delete this version, the affected fields in these issues will be set to empty.') + ' </p><p>' + soy.$$escapeHtml('The fields where this version is selected are listed below. If you want to review the issues related to a field, click the number next to the field.') + '</p><ul><li>' + soy.$$escapeHtml('Issues affecting') + ' (<a id="affects-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;version=' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount.issuesAffectedCount) + '</a>)</li><li>' + soy.$$escapeHtml('Issues fixed in') + ' (<a id="fix-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;fixfor=' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount.issuesFixedCount) + '</a>)</li>';
      if (opt_data.relatedIssueCount.issueCountWithCustomFieldsShowingVersion) {
        var usageList205 = opt_data.relatedIssueCount.customFieldUsage;
        var usageListLen205 = usageList205.length;
        for (var usageIndex205 = 0; usageIndex205 < usageListLen205; usageIndex205++) {
          var usageData205 = usageList205[usageIndex205];
          output += '<li>' + soy.$$escapeHtml(usageData205.fieldName) + ' (<a id="custom-' + soy.$$escapeHtml(usageData205.customFieldId) + '-count" href="' + soy.$$escapeHtml("") + '/issues/?jql=' + soy.$$escapeHtml(usageData205.issueLink) + '">' + soy.$$escapeHtml(usageData205.issueCountWithVersionInCustomField) + '</a>)</li>';
        }
      }
      output += '</ul></div>';
    }
  } else {
    output += '<div class="info-message">' + soy.$$escapeHtml(AJS.format('Are you sure you want to delete {0}?',opt_data.version.name)) + '</div>';
  }
  output += '</div><div class="buttons-container form-footer"><div class="buttons">' + ((opt_data.areRelatedIssues) ? '<input id="submit" class="aui-button aui-button-primary" type="submit" value="' + soy.$$escapeHtml('Delete') + '" />' : '<input id="submit" class="aui-button aui-button-primary" type="submit" value="' + soy.$$escapeHtml('Yes') + '" />') + '<a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.deleteForm.soyTemplateName = 'JIRA.Templates.Versions.deleteForm';
}


JIRA.Templates.Versions.releaseForm = function(opt_data, opt_ignored) {
  var output = '<h2 class="dialog-title">' + soy.$$escapeHtml('Release version') + ': ' + soy.$$escapeHtml(opt_data.version.name) + '</h2><form class="aui" action="#" method="post"><div class="form-body">';
  var projectQueryParam__soy242 = opt_data.projectId ? 'pid=' + opt_data.projectId + '&' : '';
  var issuesLink__soy243 = "" + '/secure/IssueNavigator.jspa?reset=true&mode=hide&' + projectQueryParam__soy242 + 'fixfor=' + opt_data.version.id;
  if (opt_data.errorMessages && opt_data.errorMessages.length > 0) {
    output += '<div class="aui-message error"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml('Error') + '</strong><ul>';
    var errorList249 = opt_data.errors.errorMessages;
    var errorListLen249 = errorList249.length;
    for (var errorIndex249 = 0; errorIndex249 < errorListLen249; errorIndex249++) {
      var errorData249 = errorList249[errorIndex249];
      output += '<li class="error-list-item">' + soy.$$escapeHtml(errorData249) + '</li>';
    }
    output += '</ul></div>';
  }
  if (opt_data.unresolvedIssuesExist && opt_data.issuesUnresolvedCount) {
    output += '<div class="aui-message warning" id="project-config-version-release-form-unresolved-message"><span class="aui-icon icon-warning"></span><a id="project-config-version-release-form-issues-link" href="' + soy.$$escapeHtml(issuesLink__soy243) + '">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} issue|1\x3c{0} issues}',opt_data.issuesCount)) + '</a> ' + soy.$$escapeHtml(AJS.format('{0,choice,1#is|1\x3care} in this release:',opt_data.issuesCount)) + '<ul><li id="project-config-version-release-form-resolved-issues-count">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} resolved issue|1\x3c{0} resolved issues}',opt_data.issuesResolvedCount)) + '</li><li id="project-config-version-release-form-unresolved-issues-count">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} unresolved issue|1\x3c{0} unresolved issues}',opt_data.issuesUnresolvedCount)) + '</li></ul></div>';
    if (opt_data.versions.length) {
      output += '<fieldset class="group"><legend><span>' + soy.$$escapeHtml('Unresolved issues') + '</span></legend><div class="radio"><input name="unresolved" id="project-config-version-release-form-unresolved-ignore" class="radio" checked="checked" type="radio" value="ignore"><label for="project-config-version-release-form-unresolved-ignore" id="project-config-version-release-form-unresolved-ignore-label">' + soy.$$escapeHtml('Ignore and proceed with release') + '</label></div><div class="radio"><input name="unresolved" id="project-config-version-release-form-unresolved-move" class="radio" type="radio" value="move"><label for="project-config-version-release-form-unresolved-move" id="project-config-version-release-form-unresolved-move-label">' + soy.$$escapeHtml('Move issues to version') + ': </label><select id="moveUnfixedIssuesTo" name="moveUnfixedIssuesTo" class="select long-field">';
      var versionList277 = opt_data.versions;
      var versionListLen277 = versionList277.length;
      for (var versionIndex277 = 0; versionIndex277 < versionListLen277; versionIndex277++) {
        var versionData277 = versionList277[versionIndex277];
        output += soy.$$escapeHtml(versionData277.nextScheduled) + '<option ' + ((versionData277.nextScheduled) ? 'selected="selected"' : '') + ' value="' + soy.$$escapeHtml(versionData277.id) + '">' + soy.$$escapeHtml(versionData277.name) + '</option>';
      }
      output += '</select></div></fieldset>';
    } else {
      output += '<p id="project-config-version-release-form-unresolved-ignore-paragraph" class="jira-release-dialog-paragraph">' + soy.$$escapeHtml('Do you want to proceed with the release?') + '</p>';
    }
  } else {
    output += '<p id="project-config-version-release-form-all-issues-resolved" class="jira-release-dialog-paragraph"><a id="project-config-version-release-form-issues-link" href="' + soy.$$escapeHtml(issuesLink__soy243) + '">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} issue|1\x3c{0} issues}',opt_data.issuesCount)) + '</a> ' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('will be released from \x3cstrong\x3e{0}\x3c/strong\x3e',typeof (opt_data.projectName) === 'number' ? opt_data.projectName : soy.$$escapeHtml(opt_data.projectName)))) + '</p>';
  }
  output += '<div class="field-group"><label for="project-config-version-release-form-release-date-field">' + soy.$$escapeHtml('Release date') + '</label><input id="project-config-version-release-form-release-date-field" name="userReleaseDate" type="text" class="text medium-field" value="' + soy.$$escapeHtml(opt_data.version.userReleaseDate ? opt_data.version.userReleaseDate : '') + '" /> <a href="#" id="project-config-versions-release-form-release-date-trigger" title="' + soy.$$escapeHtml('Select a date') + '"><span class="aui-icon aui-icon-small aui-iconfont-calendar icon-default">' + soy.$$escapeHtml('Select a date') + '</span></a>' + ((opt_data.errors.releaseDate) ? '<div class="error project-config-error" id="project-config-versions-release-form-release-date-error">' + soy.$$escapeHtml(opt_data.errors.releaseDate) + '</div>' : '') + '</div></div><input type="hidden" name="version-name" value="' + soy.$$escapeHtml(opt_data.version.name) + '"><input type="hidden" name="issues-count" value="' + soy.$$escapeHtml(opt_data.issuesCount) + '"><input type="hidden" name="unresolved-issues-count" value="' + soy.$$escapeHtml(opt_data.issuesUnresolvedCount) + '"><input type="hidden" name="released" value="true" /><div class="buttons-container form-footer"><div class="buttons"><input class="aui-button" type="submit" id="project-config-version-release-form-submit" value="' + soy.$$escapeHtml('Release') + '" /><a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.releaseForm.soyTemplateName = 'JIRA.Templates.Versions.releaseForm';
}


JIRA.Templates.Versions.mergeForm = function(opt_data, opt_ignored) {
  var output = '<h2 class="dialog-title">' + soy.$$escapeHtml('Merge Versions') + '</h2><form class="aui" action="#" method="post"><div class="form-body">';
  if (opt_data.versions && opt_data.versions.length > 0) {
    if (opt_data.errorMessages && opt_data.errorMessages.length > 0) {
      output += '<div class="aui-message error"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml('Error') + '</strong><ul>';
      var errorList338 = opt_data.errorMessages;
      var errorListLen338 = errorList338.length;
      for (var errorIndex338 = 0; errorIndex338 < errorListLen338; errorIndex338++) {
        var errorData338 = errorList338[errorIndex338];
        output += '<li class="error-list-item">' + soy.$$escapeHtml(errorData338) + '</li>';
      }
      output += '</ul></div>';
    }
    output += '<div class="aui-message warning"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('WARNING: You cannot un-merge these versions once they have merged.') + '</div><div class="field-group"><label>' + soy.$$escapeHtml('Merging From Versions') + '</label><select multiple id="idsToMerge" name="idsToMerge" class="select">';
    var versionList349 = opt_data.versions;
    var versionListLen349 = versionList349.length;
    for (var versionIndex349 = 0; versionIndex349 < versionListLen349; versionIndex349++) {
      var versionData349 = versionList349[versionIndex349];
      output += '<option value="' + soy.$$escapeHtml(versionData349.id) + '">' + soy.$$escapeHtml(versionData349.name) + '</option>';
    }
    output += '</select></div><div class="field-group"><label>' + soy.$$escapeHtml('Merge To Version') + '</label><select name="idMergeTo" class="select">';
    var versionList359 = opt_data.versions;
    var versionListLen359 = versionList359.length;
    for (var versionIndex359 = 0; versionIndex359 < versionListLen359; versionIndex359++) {
      var versionData359 = versionList359[versionIndex359];
      output += '<option value="' + soy.$$escapeHtml(versionData359.id) + '">' + soy.$$escapeHtml(versionData359.name) + '</option>';
    }
    output += '</select></div>';
  } else {
    output += '<label id="project-config-versions-merge-form-no-versions">' + soy.$$escapeHtml('There are currently no versions for this project.') + '</label>';
  }
  output += '</div><input type="hidden" name="released" value="true" /><div class="buttons-container form-footer"><div class="buttons">' + ((opt_data.versions && opt_data.versions.length > 0) ? '<input class="aui-button" type="submit" id="project-config-version-merge-form-submit" value="' + soy.$$escapeHtml('Merge') + '" />' : '') + '<a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.mergeForm.soyTemplateName = 'JIRA.Templates.Versions.mergeForm';
}


JIRA.Templates.Versions.unreleaseForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml(AJS.format('Unrelease Version {0}',opt_data.version.name)) + '</h2><form class="aui" action="#" method="post"><input type="hidden" name="released" value="false" /><div class="form-body"><div class="field-group"><label>' + soy.$$escapeHtml('Release date') + '</label><input name="releaseDate" type="text" class="text" value="' + soy.$$escapeHtml(opt_data.version.releaseDate || '') + '"  /></div></div><div class="buttons-container form-footer"><div class="buttons"><input class="aui-button" type="submit" value="' + soy.$$escapeHtml('Update') + '" /><a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.unreleaseForm.soyTemplateName = 'JIRA.Templates.Versions.unreleaseForm';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'versions/templates/template-wrapper.js' */
define("jira-project-config/versions/templates",[],function(){"use strict";return window.JIRA.Templates.Versions});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'versions/js/MergeForm.js' */
define("jira-project-config/versions/merge-form",["require"],function(e){"use strict";var r=e("underscore"),s=e("jira-project-config/backbone"),t=e("jira-project-config/versions/templates");return s.View.extend({submit:function(e,s){if(this.$("#idsToMerge + .error").length>0)return this.$("#idsToMerge-textarea").focus(),this.$(".button:disabled").attr("disabled","disabled"),this;this.$(".throbber").addClass("loading");var t=this,o=e.idsToMerge,i=e.idMergeTo;o.length>1&&(o=r.without(o,i)),o&&0!==o.length||s();var n=[],a=o.length,g=!0,c=0,d=function(){var e=t.collection.get(o[c]);e.merge({data:{mergeTo:i},complete:function(e,r){400===e&&r&&r.errorMessages&&(g=!1),r&&r.errorMessages&&r.errorMessages.length>0&&(n=n.concat(r.errorMessages)),c++,c===a?g?s():(t.$(".throbber").removeClass("loading"),t.render(t.ready,{errorMessages:n})):d()}})};return d(),this},render:function(e,r){this.ready=e;var s=this;return r=r||{},s.el.innerHTML=t.mergeForm({versions:s.collection.toJSON(),errorMessages:r.errorMessages||[]}),e.call(s,s.el),this}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'versions/js/ReleaseForm.js' */
define("jira-project-config/versions/release-form",["require"],function(e){"use strict";var r=e("jquery"),s=e("jira-project-config/backbone"),o=e("jira-project-config/versions/templates"),t=e("jira/api/projects");return s.View.extend({submit:function(e,r,s){this.$(".throbber").addClass("loading");var o=this,t={userReleaseDate:e.userReleaseDate,released:!0,expand:"operations"};return"move"===e.unresolved&&(t.moveUnfixedIssuesTo=e.moveUnfixedIssuesTo),this.model.save(t,{success:function(){r.render(),s()},error:function(r,t,a){if(400===a.status){var n={errors:t.errors,values:e};o.render(o.ready,n)}else s();o.$(".throbber").removeClass("loading")}}),this},render:function(e,s){this.ready=e;var a=this;return s=s||{},this.model.getUnresolvedIssueCount({success:function(n){var i=n.issuesCount,u=n.issuesUnresolvedCount,l=i-u,d=0!==n.issuesUnresolvedCount;a.el.innerHTML=o.releaseForm({version:a.model.toJSON(),unresolvedIssuesExist:d,issuesCount:i,issuesResolvedCount:l,issuesUnresolvedCount:u,versions:a.model.getMoveVersionsJSON(),projectId:r("meta[name=projectId]").attr("content"),projectName:t.getCurrentProjectName(),errors:s.errors||{},errorMessages:s.errorMessages||[]}),e.call(a,a.el);var c=a.$("#project-config-version-release-form-release-date-field")[0];Calendar.setup({singleClick:!0,align:"Bl",firstDay:AJS.params.firstDay,button:a.$("#project-config-versions-release-form-release-date-trigger")[0],inputField:c,currentMillis:AJS.params.currentMillis,useISO8601WeekNumbers:AJS.params.useISO8601,ifFormat:AJS.params.dateFormat}),a.model.get("releaseDate")&&Date.prototype.print&&(c.value=new Date(a.model.get("releaseDate")).print(AJS.params.dateFormat)),r("#moveUnfixedIssuesTo").focus(function(){r("#project-config-version-release-form-unresolved-move").attr("checked","checked")})}}),this}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'versions/js/DeleteForm.js' */
define("jira-project-config/versions/delete-form",["require"],function(e){"use strict";var s=e("jquery"),t=e("underscore"),o=e("jira-project-config/versions/templates"),c=e("jira-project-config/backbone");return c.View.extend({submit:function(e,s,t){return this.$(".throbber").addClass("loading"),"swap"!==e.fix&&delete e.moveFixIssuesTo,"swap"!==e.affects&&delete e.moveAffectedIssuesTo,this.model.destroy({data:e,success:function(){t()},error:function(){t()}}),this},render:function(e){var c=this;return this.model.getRelatedIssueCount({success:function(i){var n=!0;0===i.issuesFixedCount&&0===i.issuesAffectedCount&&0===i.issueCountWithCustomFieldsShowingVersion&&(n=!1);var r=i.customFieldUsage||[],u=c.model.toJSON().id,d=s("meta[name=projectId]").attr("content");t.each(r,function(e){e.issueLink=encodeURI("project = "+d+" AND '"+e.fieldName+"' = "+u)}),c.el.innerHTML=o.deleteForm({version:c.model.toJSON(),relatedIssueCount:i,areRelatedIssues:n,versions:c.model.getSwapVersionsJSON(),projectId:d}),e.call(c,c.el),s("#moveAffectedIssuesTo").focus(function(){s("#affects-swap").attr("checked","checked")}),s("#moveFixIssuesTo").focus(function(){s("#fix-swap").attr("checked","checked")}),t.each(r,function(e){var t=e.customFieldId;s("#move-custom-"+t+"-to").focus(function(){s("#custom-swap-"+t).attr("checked","checked")})})}}),this}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'versions/js/namespace-dialogs.js' */
AJS.namespace("JIRA.Admin.Version.DeleteForm",null,require("jira-project-config/versions/delete-form")),AJS.namespace("JIRA.Admin.Version.MergeForm",null,require("jira-project-config/versions/merge-form")),AJS.namespace("JIRA.Admin.Version.ReleaseForm",null,require("jira-project-config/versions/release-form")),AJS.namespace("JIRA.Templates.Versions",null,require("jira-project-config/versions/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'utilities/widgets/progressindicator/template.soy' */
// This file was automatically generated from template.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectConfig.ProgressIndicator.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectConfig == 'undefined') { JIRA.Templates.ProjectConfig = {}; }
if (typeof JIRA.Templates.ProjectConfig.ProgressIndicator == 'undefined') { JIRA.Templates.ProjectConfig.ProgressIndicator = {}; }


JIRA.Templates.ProjectConfig.ProgressIndicator.render = function(opt_data, opt_ignored) {
  return '<div class="project-config-blanket"></div><div class="project-config-spinner"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.ProgressIndicator.render.soyTemplateName = 'JIRA.Templates.ProjectConfig.ProgressIndicator.render';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'utilities/widgets/progressindicator/template-wrapper.js' */
define("jira-project-config/utils/widgets/progress-indicator/templates",[],function(){"use strict";return window.JIRA.Templates.ProjectConfig.ProgressIndicator});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'utilities/widgets/progressindicator/view.js' */
define("jira-project-config/utils/widgets/progress-indicator",["require"],function(e){"use strict";var r=e("jira-project-config/marionette"),i=e("jira-project-config/utils/widgets/progress-indicator/templates"),t=40,n=440;return r.ItemView.extend({className:"project-config-progress-indicator-blanket",template:i.render,ui:{spinner:".project-config-spinner"},onBeforeClose:function(){clearInterval(this._intervalID)},onRender:function(){function e(){r=(r-t)%n,i.ui.spinner.css("background-position","0 "+r+"px")}var r=0,i=this;clearInterval(this._intervalID),this._intervalID=setInterval(e,50)}})}),AJS.namespace("JIRA.ProjectConfig.ProgressIndicator.View",null,require("jira-project-config/utils/widgets/progress-indicator"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'utilities/region.js' */
define("jira-project-config/utils/region",["jira-project-config/marionette","jira/util/events","jira/util/events/types","jira/util/events/reasons"],function(e,i,t,n){"use strict";return e.Region.extend({initialize:function(){this.listenTo(this,"show",function(){i.trigger(t.NEW_CONTENT_ADDED,[this.$el,n.contentRefreshed])})}})}),AJS.namespace("JIRA.ProjectConfig.Region",null,require("jira-project-config/utils/region"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'utilities/virtual-region.js' */
define("jira-project-config/utils/virtual-region",["jira-project-config/utils/region","jira-project-config/marionette","underscore","jquery"],function(i,e,t,r){"use strict";return i.extend({initialize:function(e){this.target=e.target,delete e.target,i.prototype.initialize.apply(this,arguments)},show:function(i){var n=i.isClosed||t.isUndefined(i.$el),o=i!==this.currentView;return this.currentView&&(n||o)&&(this.stub=r('<div style="display: none"></div>'),this.currentView.$el.replaceWith(this.stub)),e.Region.prototype.show.apply(this,arguments)},open:function(i){var e=this.stub||this.$el.find(this.target);e.replaceWith(i.el)}})}),AJS.namespace("JIRA.ProjectConfig.VirtualRegion",null,require("jira-project-config/utils/virtual-region"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'utilities/utils.js' */
define("jira-project-config/utils",["jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","wrm/context-path","underscore","jquery"],function(e,t,r,n,o){var a="2",i=r()+"/rest/api/"+a;return{REST_VERSION:a,REST_BASE_URL:i,getRestVersion:function(){return a},getRestBaseUrl:function(){return i},getProjectKey:function(){return o("meta[name=projectKey]").attr("content")},getKey:function(){return o("meta[name=projectKey]").attr("content")},getProjectId:function(){return o("meta[name=projectId]").attr("content")},getId:function(){return o("meta[name=projectId]").attr("content")},convertXHRToSmartAjaxResult:function(e){var r=e.status>=400?"error":"success";return t.SmartAjaxResult(e,(new Date).getTime(),r,JSON.parse(e.responseText))},openDialogForRow:function(t,r,o,a){a=a||{};var i=new t({model:r.model}),c=new e(n.extend({id:o,content:function(e){i.render(function(t){e(t)})},submitHandler:function(e){i.submit(this.$form.serializeObject(),r,function(){c.hide()}),e.preventDefault()}},a));return c.show(),c}}}),AJS.namespace("JIRA.REST_VERSION",null,require("jira-project-config/utils").getRestVersion()),AJS.namespace("JIRA.REST_BASE_URL",null,require("jira-project-config/utils").getRestBaseUrl()),AJS.namespace("JIRA.ProjectConfig.getKey",null,require("jira-project-config/utils").getProjectKey),AJS.namespace("JIRA.ProjectConfig.getId",null,require("jira-project-config/utils").getProjectId),AJS.namespace("AJS.convertXHRToSmartAjaxResult",null,require("jira-project-config/utils").convertXHRToSmartAjaxResult),AJS.namespace("AJS.openDialogForRow",null,require("jira-project-config/utils").openDialogForRow);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-class-names', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/class-names.js' */
("undefined"===typeof window?global:window).__17e04bba0bef0009cc832216dc2470d2=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={NO_VALUE:"aui-restfultable-editable-no-value",NO_ENTRIES:"aui-restfultable-no-entires",RESTFUL_TABLE:"aui-restfultable",ROW:"aui-restfultable-row",READ_ONLY:"aui-restfultable-readonly",ACTIVE:"aui-restfultable-active",ALLOW_HOVER:"aui-restfultable-allowhover",FOCUSED:"aui-restfultable-focused",MOVEABLE:"aui-restfultable-movable",
DISABLED:"aui-restfultable-disabled",SUBMIT:"aui-restfultable-submit",CANCEL:"aui-restfultable-cancel",EDIT_ROW:"aui-restfultable-editrow",CREATE:"aui-restfultable-create",DRAG_HANDLE:"aui-restfultable-draghandle",ORDER:"aui-restfultable-order",EDITABLE:"aui-restfultable-editable",ERROR:"error",DELETE:"aui-restfultable-delete",LOADING:"loading"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-create-view', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/custom-create-view.js' */
("undefined"===typeof window?global:window).__226d5785d36c6f3d2eaa19d9b986ea68=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-edit-view', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/custom-edit-view.js' */
("undefined"===typeof window?global:window).__a88f71998f64176b4467b73bf7f68708=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-read-view', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/custom-read-view.js' */
("undefined"===typeof window?global:window).__54897143fc7cd42cd80d313dd2bfdf55=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-data-keys', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/data-keys.js' */
("undefined"===typeof window?global:window).__b68b83266eb028cf402de39c4933799b=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={ENABLED_SUBMIT:"enabledSubmit",ROW_VIEW:"RestfulTable_Row_View"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-jquery-serializetoobject', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/serializetoobject.js' */
("undefined"===typeof window?global:window).__c972538512dcf935ab0c75d63e2e3cff=function(){jQuery.fn.serializeObject=function(){var a={};this.find(":input:not(:button):not(:submit):not(:radio):not('select[multiple]')").each(function(){""!==this.name&&(null===this.value&&(this.value=""),a[this.name]=this.value.match(/^(tru|fals)e$/i)?"true"==this.value.toLowerCase():this.value)});this.find("input:radio:checked").each(function(){a[this.name]=this.value});this.find("select[multiple]").each(function(){var c=
jQuery(this),b=c.val();a[this.name]=c.data("aui-ss")?b?b[0]:"":null!==b?b:[]});return a};return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-events', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/events.js' */
("undefined"===typeof window?global:window).__f9e062e0834111cb42fed4e788d40075=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={REORDER_SUCCESS:"RestfulTable.reorderSuccess",ROW_ADDED:"RestfulTable.rowAdded",ROW_REMOVED:"RestfulTable.rowRemoved",EDIT_ROW:"RestfulTable.switchedToEditMode",SERVER_ERROR:"RestfulTable.serverError",CREATED:"created",UPDATED:"updated",FOCUS:"focus",BLUR:"blur",SUBMIT:"submit",SAVE:"save",MODAL:"modal",MODELESS:"modeless",CANCEL:"cancel",
CONTENT_REFRESHED:"contentRefreshed",RENDER:"render",FINISHED_EDITING:"finishedEditing",VALIDATION_ERROR:"validationError",SUBMIT_STARTED:"submitStarted",SUBMIT_FINISHED:"submitFinished",INITIALIZED:"initialized",ROW_INITIALIZED:"rowInitialized",ROW_EDIT:"editRow"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-throbber', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/throbber.js' */
("undefined"===typeof window?global:window).__f736a94af005df464b5cb85d70aeb4be=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(){return'<span class="aui-restfultable-throbber"></span>'};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-edit-row', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/edit-row.js' */
("undefined"===typeof window?global:window).__306e5d088ae3093bce3a4ccc028d1000=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var g={};"use strict";Object.defineProperty(g,"__esModule",{value:!0});var j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},c=f(__307d3e18fd611f85395c67cddeb1fe24);__c972538512dcf935ab0c75d63e2e3cff;var k=
f(__e3ce9f42f29f6bd2118d84461512f4a4),l=f(__17e04bba0bef0009cc832216dc2470d2),m=f(__b68b83266eb028cf402de39c4933799b),n=f(__f9e062e0834111cb42fed4e788d40075);f(__d74c881c8f23921c15438d0f30c99f80);var o=f(__f736a94af005df464b5cb85d70aeb4be);g.default=k.default.View.extend({tagName:"tr",events:{focusin:"_focus",click:"_focus",keyup:"_handleKeyUpEvent"},initialize:function(a){this.$el=(0,c.default)(this.el);this._event=n.default;this.classNames=l.default;this.dataKeys=m.default;this.columns=a.columns;
this.isCreateRow=a.isCreateRow;this.allowReorder=a.allowReorder;this.events["click ."+this.classNames.CANCEL]="_cancel";this.delegateEvents();a.isUpdateMode?this.isUpdateMode=!0:(this._modelClass=a.model,this.model=new this._modelClass);this.fieldFocusSelector=a.fieldFocusSelector;this.bind(this._event.CANCEL,function(){this.disabled=true}).bind(this._event.SAVE,function(a){this.disabled||this.submit(a)}).bind(this._event.FOCUS,function(a){this.focus(a)}).bind(this._event.BLUR,function(){this.$el.removeClass(this.classNames.FOCUSED);
this.disable()}).bind(this._event.SUBMIT_STARTED,function(){this._submitStarted()}).bind(this._event.SUBMIT_FINISHED,function(){this._submitFinished()})},defaultColumnRenderer:function(a){if(!1!==a.allowEdit)return(0,c.default)("<input type='text' />").addClass("text").attr({name:a.name,value:a.value});if(a.value)return document.createTextNode(a.value)},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},_handleKeyUpEvent:function(a){27===a.keyCode&&this.trigger(this._event.CANCEL)},
_cancel:function(a){this.trigger(this._event.CANCEL);a.preventDefault();return this},_submitStarted:function(){this.submitting=!0;this.showLoading().disable().delegateEvents({});return this},_submitFinished:function(){this.submitting=!1;this.hideLoading().enable().delegateEvents(this.events);return this},_focus:function(a){this.hasFocus()||this.trigger(this._event.FOCUS,a.target.name);return this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(a){this.enable();
a?a=this.$el.find(this.fieldFocusSelector(a)):(a=this.$el.find(this.classNames.ERROR+":first"),a=0===a.length?this.$el.find(":input:text:first"):a.parent().find(":input"));this.$el.addClass(this.classNames.FOCUSED);a.focus().trigger("select");return this},disable:function(){var a,b;c.default.browser.mozilla&&(b=this.$el.find(":submit"),b.length&&(a=(0,c.default)("<input type='submit' class='"+this.classNames.SUBMIT+"' />").addClass(b.attr("class")).val(b.val()).data(this.dataKeys.ENABLED_SUBMIT,b),
b.replaceWith(a)));this.$el.addClass(this.classNames.DISABLED).find(":submit").attr("disabled","disabled");return this},enable:function(){var a,b;c.default.browser.mozilla&&(a=this.$el.find(this.classNames.SUBMIT),(b=a.data(this.dataKeys.ENABLED_SUBMIT))&&a.length&&a.replaceWith(b));this.$el.removeClass(this.classNames.DISABLED).find(":submit").removeAttr("disabled");return this},showLoading:function(){this.$el.addClass(this.classNames.LOADING);return this},hideLoading:function(){this.$el.removeClass(this.classNames.LOADING);
return this},hasUpdates:function(){return!!this.mapSubmitParams(this.serializeObject())},serializeObject:function(){var a=this.$el;return a.serializeObject?a.serializeObject():a.serialize()},mapSubmitParams:function(a){return this.model.changedAttributes(a)},submit:function(a){var b=this,h;document.activeElement!==window&&(0,c.default)(document.activeElement).blur();if(this.isUpdateMode){if(h=this.mapSubmitParams(this.serializeObject()),!h)return b.trigger(b._event.CANCEL)}else this.model.clear(),
h=this.mapSubmitParams(this.serializeObject());this.trigger(this._event.SUBMIT_STARTED);this.model.save(h,{success:function(){b.isUpdateMode?b.trigger(b._event.UPDATED,b.model,a):(b.trigger(b._event.CREATED,b.model.toJSON()),b.model=new b._modelClass,b.render({errors:{},values:{}}),b.trigger(b._event.FOCUS));b.trigger(b._event.SUBMIT_FINISHED)},error:function(a,c,h){400===h.status&&(b.renderErrors(c.errors),b.trigger(b._event.VALIDATION_ERROR,c.errors));b.trigger(b._event.SUBMIT_FINISHED)},silent:!0});
return this},renderError:function(a,b){return(0,c.default)("<div />").attr("data-field",a).addClass(this.classNames.ERROR).text(b)},renderErrors:function(a){var b=this;this.$("."+this.classNames.ERROR).remove();a&&c.default.each(a,function(a,c){b.$el.find("[name='"+a+"']").closest("td").append(b.renderError(a,c))});return this},render:function(a){var b=this;this.$el.empty();this.allowReorder&&(0,c.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(b.$el);
c.default.each(this.columns,function(f,d){var e,i;e=a.values[d.id];var g=[{name:d.id,value:e,allowEdit:d.allowEdit},a.values,b.model];e&&b.$el.attr("data-"+d.id,e);e=b.isCreateRow&&d.createView?(new d.createView({model:b.model})).render(g[0]):d.editView?(new d.editView({model:b.model})).render(g[0]):b.defaultColumnRenderer.apply(b,g);i=(0,c.default)("<td />");"object"===("undefined"===typeof e?"undefined":j(e))&&e.done?e.done(function(a){i.append(a)}):i.append(e);d.styleClass&&i.addClass(d.styleClass);
i.appendTo(b.$el)});this.$el.append(this.renderOperations(a.update,a.values)).addClass(this.classNames.ROW+" "+this.classNames.EDIT_ROW);this.trigger(this._event.RENDER,this.$el,a.values);this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]);return this},renderOperations:function(a){var b=(0,c.default)('<td class="aui-restfultable-operations" />');a?b.append((0,c.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Update"})).append((0,
c.default)('<a class="aui-button aui-button-link" href="#" />').addClass(this.classNames.CANCEL).text("Cancel").attr({accesskey:this.cancelAccessKey})):b.append((0,c.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Add"}));return b.add((0,c.default)('<td class="aui-restfultable-status" />').append((0,o.default)()))}});return g=g["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-events', location = 'node_modules/@atlassian/aui/src/js/aui/events.js' */
("undefined"===typeof window?global:window).__1a99a68c34e660050a094f87fb28903d=function(){function g(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){(0,h.default)(j.default).trigger(a,b)}function e(a,b){(0,h.default)(j.default).bind(a,b)}function f(a,b,c){(0,h.default)(b).trigger(a,c);d(a,c);b.id&&d(b.id+"-"+a,c)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.triggerEvtForInst=b.triggerEvt=b.bindEvt=void 0;var h=g(__307d3e18fd611f85395c67cddeb1fe24),a;a=__c8cfa00f1eba9ac7af89ee3d0d33961d;
if(!a||!a.__esModule){var c={};if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(c[i]=a[i]);c.default=a;a=c}var j=g(__fd277fcde858b82a198666a405e85600),c=g(__4d02fe17b8e885a34493e34af3d145dd);b.bindEvt=e=a.fn(e,"bindEvt",{sinceVersion:"5.8.0"});b.triggerEvt=d=a.fn(d,"triggerEvt",{sinceVersion:"5.8.0"});b.triggerEvtForInst=f=a.fn(f,"triggerEvtForInst",{sinceVersion:"5.8.0"});(0,c.default)("bindEvt",e);(0,c.default)("triggerEvt",d);(0,c.default)("triggerEvtForInst",f);b.bindEvt=
e;b.triggerEvt=d;b.triggerEvtForInst=f;return b}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-entry-model', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/entry-model.js' */
("undefined"===typeof window?global:window).__928a2470c59a6ae17c3b26224648a948=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var i={};"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=f(__307d3e18fd611f85395c67cddeb1fe24),m=__1a99a68c34e660050a094f87fb28903d,
j=f(__922acd0053a6de3ea4c53d8902766ab6),h=f(__e3ce9f42f29f6bd2118d84461512f4a4),n=f(__f9e062e0834111cb42fed4e788d40075),k=h.default.Model.extend({sync:function(a,b,d){var e=this,c=d.error;d.error=function(a){e._serverErrorHandler(a,this);c&&c.apply(this,arguments)};return h.default.sync.apply(h.default,arguments)},save:function(a,b){var b=b||{},d=this,e,c=b.error,f=b.success;b.error=function(a,b){var e=g.default.parseJSON(b.responseText||b.data);c&&c.call(d,d,e,b)};this.isNew()?h.default.Model.prototype.save.call(this,
a,b):a&&(e=k.extend({url:this.url()}),e=new e({id:this.id}),e.save=h.default.Model.prototype.save,b.success=function(a,b){d.clear().set(a.toJSON());f&&f.call(d,d,b)},e.save(a,b))},destroy:function(a){var a=a||{},b=this,d=this.url(),e;a.data&&(e=g.default.param(a.data));""!==e&&(d=d+"?"+e);g.default.ajax({url:d,type:"DELETE",dataType:"json",contentType:"application/json",success:function(c){b.collection&&b.collection.remove(b);a.success&&a.success.call(b,c)},error:function(c){b._serverErrorHandler(c,
this);a.error&&a.error.call(b,c)}});return this},changedAttributes:function(a){var b={},d=this.toJSON();g.default.each(a,function(a,c){d[a]?d[a]&&d[a]!==c&&("object"===("undefined"===typeof c?"undefined":l(c))?j.default.isEqual(c,d[a])||(b[a]=c):b[a]=c):"string"===typeof c?""!==g.default.trim(c)&&(b[a]=c):g.default.isArray(c)?0!==c.length&&(b[a]=c):b[a]=c});if(!j.default.isEmpty(b))return this.addExpand(b),b},addExpand:function(){},_serverErrorHandler:function(a,b){var d;400!==a.status&&(d=g.default.parseJSON(a.responseText||
a.data),(0,m.triggerEvtForInst)(n.default.SERVER_ERROR,this,[d,a,b]))},fetch:function(a){a=a||{};this.clear();h.default.Model.prototype.fetch.call(this,a)}});i.default=k;return i=i["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-row', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/row.js' */
("undefined"===typeof window?global:window).__db1289144ca525c25c4d90561fcced7d=function(){function e(a){return a&&a.__esModule?a:{"default":a}}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var b=e(__307d3e18fd611f85395c67cddeb1fe24),j;var c=__8eca5e5171c0c22be18ea931ed65c747;if(c&&c.__esModule)j=c;else{var k={};if(null!=c)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(k[d]=c[d]);k.default=c;j=k}d=e(__e3ce9f42f29f6bd2118d84461512f4a4);var l=e(__17e04bba0bef0009cc832216dc2470d2),
m=e(__b68b83266eb028cf402de39c4933799b),n=e(__f9e062e0834111cb42fed4e788d40075);e(__d74c881c8f23921c15438d0f30c99f80);var o=e(__f736a94af005df464b5cb85d70aeb4be);h.default=d.default.View.extend({tagName:"tr",events:{"click .aui-restfultable-editable":"edit"},initialize:function(a){a=a||{};this._event=n.default;this.classNames=l.default;this.dataKeys=m.default;this.columns=a.columns;this.allowEdit=a.allowEdit;this.allowDelete=a.allowDelete;if(!this.events["click .aui-restfultable-editable"])throw Error("It appears you have overridden the events property. To add events you will need to usea work around. https://github.com/documentcloud/backbone/issues/244");
this.index=a.index||0;this.deleteConfirmation=a.deleteConfirmation;this.allowReorder=a.allowReorder;this.$el=(0,b.default)(this.el);this.bind(this._event.CANCEL,function(){this.disabled=!0}).bind(this._event.FOCUS,function(a){this.focus(a)}).bind(this._event.BLUR,function(){this.unfocus()}).bind(this._event.MODAL,function(){this.$el.addClass(this.classNames.ACTIVE)}).bind(this._event.MODELESS,function(){this.$el.removeClass(this.classNames.ACTIVE)})},renderDragHandle:function(){return'<span class="'+
this.classNames.DRAG_HANDLE+'"></span></td>'},defaultColumnRenderer:function(a){if(a.value)return document.createTextNode(a.value.toString())},sync:function(a){var b=this;this.model.addExpand(a);this.showLoading();this.model.save(a,{success:function(){b.hideLoading().render();b.trigger(b._event.UPDATED)},error:function(){b.hideLoading()}});return this},refresh:function(a,b){var c=this;this.showLoading();this.model.fetch({success:function(){c.hideLoading().render();a&&a.apply(this,arguments)},error:function(){c.hideLoading();
b&&b.apply(this,arguments)}});return this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(){(0,b.default)(this.el).addClass(this.classNames.FOCUSED);return this},unfocus:function(){(0,b.default)(this.el).removeClass(this.classNames.FOCUSED);return this},showLoading:function(){this.$el.addClass(this.classNames.LOADING);return this},hideLoading:function(){this.$el.removeClass(this.classNames.LOADING);return this},edit:function(a){a=(0,b.default)(a.target).is("."+
this.classNames.EDITABLE)?(0,b.default)(a.target).attr("data-field-name"):(0,b.default)(a.target).closest("."+this.classNames.EDITABLE).attr("data-field-name");this.trigger(this._event.ROW_EDIT,a);return this},renderOperations:function(){var a=this;if(!1!==this.allowDelete)return(0,b.default)("<a href='#' class='aui-button' />").addClass(this.classNames.DELETE).text("Delete").click(function(b){b.preventDefault();a.destroy()})},destroy:function(){if(this.deleteConfirmation){var a=
j.popup(400,200,"delete-entity-"+this.model.get("id"));a.element.html(this.deleteConfirmation(this.model.toJSON()));a.show();a.element.find(".cancel").click(function(){a.hide()});a.element.find("form").submit(_.bind(function(b){a.hide();this.model.destroy();b.preventDefault()},this))}else this.model.destroy()},render:function(){var a=this,c=this.model.toJSON(),e=(0,b.default)("<td class='aui-restfultable-operations' />").append(this.renderOperations({},c)),d=(0,b.default)("<td class='aui-restfultable-status' />").append((0,
o.default)());this.$el.removeClass(this.classNames.DISABLED+" "+this.classNames.FOCUSED+" "+this.classNames.LOADING+" "+this.classNames.EDIT_ROW).addClass(this.classNames.READ_ONLY).empty();this.allowReorder&&(0,b.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(a.$el);this.$el.attr("data-id",this.model.id);b.default.each(this.columns,function(e,f){var g,d=(0,b.default)("<td />");g=c[f.id];var i=f.fieldName||f.id,h=[{name:i,value:g,allowEdit:f.allowEdit},
c,a.model];g&&a.$el.attr("data-"+f.id,g);g=f.readView?(new f.readView({model:a.model})).render(h[0]):a.defaultColumnRenderer.apply(a,h);if(!1!==a.allowEdit&&!1!==f.allowEdit){if(i=(0,b.default)("<span />").addClass(a.classNames.EDITABLE).append('<span class="aui-icon aui-icon-small aui-iconfont-edit"></span>').append(g).attr("data-field-name",i),d=(0,b.default)("<td />").append(i).appendTo(a.$el),!g||""==b.default.trim(g))d.addClass(a.classNames.NO_VALUE),i.html((0,b.default)("<em />").text(this.emptyText||
"Enter value"))}else d.append(g);f.styleClass&&d.addClass(f.styleClass);d.appendTo(a.$el)});this.$el.append(e).append(d).addClass(this.classNames.ROW+" "+this.classNames.READ_ONLY);this.trigger(this._event.RENDER,this.$el,c);this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]);return this}});return h=h["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table.js' */
("undefined"===typeof window?global:window).__abf29ef092b15abcf6c6c04fa65a04b4=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function l(a,b,c){(0,e.default)(b).trigger(a,c);(0,e.default)(document).trigger(a,c);b.id&&(a=b.id+"_"+a,(0,e.default)(document).trigger(a,c))}var m={};"use strict";Object.defineProperty(m,"__esModule",{value:!0});var e=f(__307d3e18fd611f85395c67cddeb1fe24),n;var h=__cf890abdf040e0993fb71f2f839bc972;if(h&&h.__esModule)n=h;else{var j={};if(null!=h)for(var k in h)Object.prototype.hasOwnProperty.call(h,
k)&&(j[k]=h[k]);j.default=h;n=j}var o=f(__e3ce9f42f29f6bd2118d84461512f4a4),r=f(__17e04bba0bef0009cc832216dc2470d2);k=f(__226d5785d36c6f3d2eaa19d9b986ea68);var h=f(__a88f71998f64176b4467b73bf7f68708),j=f(__54897143fc7cd42cd80d313dd2bfdf55),s=f(__b68b83266eb028cf402de39c4933799b),t=f(__306e5d088ae3093bce3a4ccc028d1000),p=f(__928a2470c59a6ae17c3b26224648a948),u=f(__f9e062e0834111cb42fed4e788d40075),w=f(__4d02fe17b8e885a34493e34af3d145dd);f(__d74c881c8f23921c15438d0f30c99f80);var q=f(__db1289144ca525c25c4d90561fcced7d),
v=f(__f736a94af005df464b5cb85d70aeb4be),g=o.default.View.extend({initialize:function(a){var b=this;b.options=e.default.extend(!0,b._getDefaultOptions(a),a);b.id=this.options.id;b._event=u.default;b.classNames=r.default;b.dataKeys=s.default;this.$table=(0,e.default)(a.el).addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(b.classNames.LOADING);this.$table.wrapAll("<form class='aui' action='#' />");this.$thead=(0,e.default)("<thead/>");this.$theadRow=
(0,e.default)("<tr />").appendTo(this.$thead);this.$tbody=(0,e.default)("<tbody/>");if(!this.$table.length)throw Error("RestfulTable: Init failed! The table you have specified ["+this.$table.selector+"] cannot be found.");if(!this.options.columns)throw Error("RestfulTable: Init failed! You haven't provided any columns to render.");this.showGlobalLoading();this.options.columns.forEach(function(a){var d=e.default.isFunction(a.header)?a.header():a.header;"undefined"===typeof d&&(n.warn("You have not specified [header] for column ["+
a.id+"]. Using id for now..."),d=a.id);b.$theadRow.append("<th>"+d+"</th>")});b.$theadRow.append("<th></th><th></th>");this._models=this._createCollection();this._rowClass=this.options.views.row;this.editRows=[];this.$table.closest("form").submit(function(a){b.focusedRow&&b.focusedRow.trigger(b._event.SAVE);a.preventDefault()});this.options.allowReorder&&(this.$theadRow.prepend("<th />"),this.$tbody.sortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(a,d){var i=(0,e.default)("<div/>").attr("class",
d.attr("class")).addClass(b.classNames.MOVEABLE);d.children().each(function(){var a=(0,e.default)(this),b=parseInt(0+a.css("border-left-width"),10),c=parseInt(0+a.css("border-right-width"),10),b=a[0].clientWidth+b+c;i.append((0,e.default)("<div/>").html(a.html()).attr("class",a.attr("class")).width(b))});i=(0,e.default)("<div class='aui-restfultable-readonly'/>").append(i);i.css({left:d.offset().left});i.appendTo(document.body);return i},start:function(a,d){var i=d.helper[0].clientHeight,f=d.placeholder.find("td");
d.item.addClass(b.classNames.MOVEABLE).children().each(function(a){(0,e.default)(this).width(f.eq(a).width())});var g='<td colspan="'+b.getColumnCount()+'">&nbsp;</td>';d.placeholder.html(g).css({height:i,visibility:"visible"});b.getRowFromElement(d.item[0]).trigger(b._event.MODAL)},stop:function(a,d){if((0,e.default)(d.item[0]).is(":visible"))d.item.removeClass(b.classNames.MOVEABLE).children().attr("style",""),d.placeholder.removeClass(b.classNames.ROW),b.getRowFromElement(d.item[0]).trigger(b._event.MODELESS)},
update:function(a,d){var e={row:b.getRowFromElement(d.item[0]),item:d.item,nextItem:d.item.next(),prevItem:d.item.prev()};b.move(e)},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8E3}),this.$tbody.bind("selectstart mousedown",function(a){return!(0,e.default)(a.target).is("."+b.classNames.DRAG_HANDLE)}));!1!==this.options.allowCreate&&(this._createRow=(new this.options.views.editRow({columns:this.options.columns,isCreateRow:!0,model:this.options.model.extend({url:function(){return b.options.resources.self}}),
cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey,allowReorder:this.options.allowReorder,fieldFocusSelector:this.options.fieldFocusSelector})).bind(this._event.CREATED,function(a){b.options.addPosition==void 0&&b.options.createPosition==="bottom"||b.options.addPosition==="bottom"?b.addRow(a):b.addRow(a,0)}).bind(this._event.VALIDATION_ERROR,function(){this.trigger(b._event.FOCUS)}).render({errors:{},values:{}}),this.$create=(0,e.default)('<tbody class="'+this.classNames.CREATE+
'" />').append(this._createRow.el),this._applyFocusCoordinator(this._createRow),this._createRow.trigger(this._event.FOCUS));this._models.bind("remove",function(a){b.getRows().forEach(function(d){if(d.model===a){d.hasFocus()&&b._createRow&&b._createRow.trigger(b._event.FOCUS);b.removeRow(d)}})});this.fetchInitialResources()},fetchInitialResources:function(){var a=this;e.default.isFunction(this.options.resources.all)?this.options.resources.all(function(b){a.populate(b)}):e.default.get(this.options.resources.all,
function(b){a.populate(b)})},move:function(a){var b=this,c=function(a){return a.length?{after:b.getRowFromElement(a).model.url()}:{position:"First"}};a.row&&(c=b.options.reverseOrder?c(a.nextItem):c(a.prevItem),e.default.ajax({url:a.row.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(c),complete:function(){a.row.hideLoading()},success:function(a){AJS.triggerEvtForInst(b._event.REORDER_SUCCESS,b,[a])},error:function(a){var c=e.default.parseJSON(a.responseText||
a.data);AJS.triggerEvtForInst(b._event.SERVER_ERROR,b,[c,a,this])}}),a.row.showLoading())},_createCollection:function(){var a=this;return new (this.options.Collection.extend({sort:function(b){b||(b={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.tableRows=a.getRows();this.models=this.sortBy(this.comparator);this.tableRows=void 0;b.silent||this.trigger("refresh",this,b);return this},remove:function(b,c){this.tableRows=a.getRows();o.default.Collection.prototype.remove.apply(this,
arguments);this.tableRows=void 0;return this}}))([],{comparator:function(b){var c;(void 0!==this.tableRows?this.tableRows:a.getRows()).some(function(a,e){if(a.model.id===b.id)return c=e,!0});return c}})},populate:function(a){this.options.reverseOrder&&a.reverse();this.hideGlobalLoading();a&&a.length?(this._models.reset([],{silent:!0}),this.renderRows(a),this.isEmpty()&&this.showNoEntriesMsg()):this.showNoEntriesMsg();this.$table.append(this.$thead);"bottom"===this.options.createPosition?this.$table.append(this.$tbody).append(this.$create):
this.$table.append(this.$create).append(this.$tbody);this.$table.removeClass(this.classNames.LOADING).trigger(this._event.INITIALIZED,[this]);l(this._event.INITIALIZED,this,[this]);this.options.autoFocus&&this.$table.find(":input:text:first").focus()},showGlobalLoading:function(){this.$loading||(this.$loading=(0,e.default)('<div class="aui-restfultable-init">'+(0,v.default)()+'<span class="aui-restfultable-loading">'+this.options.loadingMsg+"</span></div>"));this.$loading.is(":visible")||this.$loading.insertAfter(this.$table);
return this},hideGlobalLoading:function(){this.$loading&&this.$loading.remove();return this},addRow:function(a,b){var c,d;if(!a.id)throw Error("RestfulTable.addRow: to add a row values object must contain an id. Maybe you are not returning it from your restend point?Recieved:"+JSON.stringify(a));d=new this.options.model(a);c=this._renderRow(d,b);this._models.add(d);this.removeNoEntriesMsg();l(this._event.ROW_ADDED,this,[c,this]);return this},removeRow:function(a){this._models.remove(a.model);a.remove();
this.isEmpty()&&this.showNoEntriesMsg();l(this._event.ROW_REMOVED,this,[a,this])},isEmpty:function(){return 0===this._models.length},getModels:function(){return this._models},getTable:function(){return this.$table},getTableBody:function(){return this.$tbody},getCreateRow:function(){return this._createRow},getColumnCount:function(){var a=2;this.allowReorder&&++a;return this.options.columns.length+a},getRowFromElement:function(a){return(0,e.default)(a).data(this.dataKeys.ROW_VIEW)},showNoEntriesMsg:function(){this.$noEntries&&
this.$noEntries.remove();this.$noEntries=(0,e.default)("<tr>").addClass(this.classNames.NO_ENTRIES).append((0,e.default)("<td>").attr("colspan",this.getColumnCount()).text(this.options.noEntriesMsg)).appendTo(this.$tbody);return this},removeNoEntriesMsg:function(){this.$noEntries&&0<this._models.length&&this.$noEntries.remove();return this},getRows:function(){var a=this,b=[];this.$tbody.find("."+this.classNames.READ_ONLY).each(function(){var c=(0,e.default)(this).data(a.dataKeys.ROW_VIEW);c&&b.push(c)});
return b},_renderRow:function(a,b){var c=this,d=this.$tbody.find("."+this.classNames.READ_ONLY),e,f;f=new this._rowClass({model:a,columns:this.options.columns,allowEdit:this.options.allowEdit,allowDelete:this.options.allowDelete,allowReorder:this.options.allowReorder,deleteConfirmation:this.options.deleteConfirmation});this.removeNoEntriesMsg();f.bind(this._event.ROW_EDIT,function(a){l(this._event.EDIT_ROW,{},[this,c]);c.edit(this,a)});e=f.render().$el;-1!==b&&("number"===typeof b&&0!==d.length?e.insertBefore(d[b]):
this.$tbody.append(e));e.data(this.dataKeys.ROW_VIEW,f);f.bind(this._event.MODAL,function(){c.$table.removeClass(c.classNames.ALLOW_HOVER);c.$tbody.sortable("disable");c.getRows().forEach(function(a){c.isRowBeingEdited(a)||a.delegateEvents({})})});f.bind(this._event.MODELESS,function(){c.$table.addClass(c.classNames.ALLOW_HOVER);c.$tbody.sortable("enable");c.getRows().forEach(function(a){c.isRowBeingEdited(a)||a.delegateEvents()})});this._applyFocusCoordinator(f);this.trigger(this._event.ROW_INITIALIZED,
f);return f},isRowBeingEdited:function(a){var b=!1;this.editRows.some(function(c){if(c.el===a.el)return b=!0});return b},_applyFocusCoordinator:function(a){var b=this;a.hasFocusBound||(a.hasFocusBound=!0,a.bind(this._event.FOCUS,function(){b.focusedRow&&b.focusedRow!==a&&b.focusedRow.trigger(b._event.BLUR);b.focusedRow=a;a instanceof q.default&&b._createRow&&b._createRow.enable()}));return this},_removeEditRow:function(a){a=e.default.inArray(a,this.editRows);this.editRows.splice(a,1);return this},
_shiftFocusAfterEdit:function(){0<this.editRows.length?this.editRows[this.editRows.length-1].trigger(this._event.FOCUS):this._createRow&&this._createRow.trigger(this._event.FOCUS);return this},_saveEditRowOnBlur:function(){return 1>=this.editRows.length},dismissEditRows:function(){this.editRows.forEach(function(a){a.hasUpdates()||a.trigger(this._event.FINISHED_EDITING)},this)},edit:function(a,b){var c=this,d=new this.options.views.editRow({el:a.el,columns:this.options.columns,isUpdateMode:!0,allowReorder:this.options.allowReorder,
fieldFocusSelector:this.options.fieldFocusSelector,model:a.model,cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey}),e=a.model.toJSON();e.update=!0;d.render({errors:{},update:!0,values:e}).bind(c._event.UPDATED,function(b,d){c._removeEditRow(this);this.unbind();a.render().delegateEvents();a.trigger(c._event.UPDATED);!1!==d&&c._shiftFocusAfterEdit()}).bind(c._event.VALIDATION_ERROR,function(){this.trigger(c._event.FOCUS)}).bind(c._event.FINISHED_EDITING,function(){c._removeEditRow(this);
a.render().delegateEvents();this.unbind()}).bind(c._event.CANCEL,function(){c._removeEditRow(this);this.unbind();a.render().delegateEvents();c._shiftFocusAfterEdit()}).bind(c._event.BLUR,function(){c.dismissEditRows();c._saveEditRowOnBlur()&&this.trigger(c._event.SAVE,!1)});this._applyFocusCoordinator(d);d.trigger(c._event.FOCUS,b);c._createRow&&c._createRow.disable();this.editRows.push(d);return d},renderRows:function(a){var b=this._models.comparator,c=[];this._models.comparator=void 0;a=_.map(a,
function(a){a=new this.options.model(a);c.push(this._renderRow(a,-1).el);return a},this);this._models.add(a,{silent:!0});this._models.comparator=b;this.removeNoEntriesMsg();this.$tbody.append(c);return this},_getDefaultOptions:function(a){return{model:a.model||p.default,allowEdit:!0,views:{editRow:t.default,row:q.default},Collection:o.default.Collection.extend({url:a.resources.self,model:a.model||p.default}),allowReorder:!1,fieldFocusSelector:function(a){return":input[name="+a+"], #"+a},loadingMsg:a.loadingMsg||
"Loading"}}});g.ClassNames=r.default;g.CustomCreateView=k.default;g.CustomEditView=h.default;g.CustomReadView=j.default;g.DataKeys=s.default;g.EditRow=t.default;g.EntryModel=p.default;g.Events=u.default;g.Row=q.default;g.Throbber=v.default;(0,w.default)("RestfulTable",g);m.default=g;return m=m["default"]}.call(this);;
;
/* module-key = 'jira.webresources:aui-restfultable-amd-shim', location = '/static/lib/amd-shims/aui-restfultable-amd.js' */
define("aui/restful-table",function(){return AJS.RestfulTable});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-restfultable', location = 'global/js/events.js' */
!function(e){JIRA.bind(AJS.RestfulTable.Events.SERVER_ERROR,function(r,o){var s=e("#project-config-error-console");o&&o.errorMessages&&(s.empty(),new JIRA.FormDialog({id:"server-error-dialog",content:function(e){e(JIRA.Templates.Common.serverErrorDialog({message:o.errorMessages[0]}))}}).show())})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/templates/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Component.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Component == 'undefined') { JIRA.Templates.Component = {}; }


JIRA.Templates.Component.icon = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-component"></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.Component.icon.soyTemplateName = 'JIRA.Templates.Component.icon';
}


JIRA.Templates.Component.editComponentName = function(opt_data, opt_ignored) {
  return '<input class="text" name="name" value="' + soy.$$escapeHtml(opt_data.value ? opt_data.value : '') + '" />' + ((! opt_data.update) ? '<input name="project" type="hidden" value="' + soy.$$escapeHtml(opt_data.project) + '">' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.Component.editComponentName.soyTemplateName = 'JIRA.Templates.Component.editComponentName';
}


JIRA.Templates.Component.componentLead = function(opt_data, opt_ignored) {
  return '<span class="' + ((opt_data.component.lead && ! opt_data.component.lead.active) ? 'project-config-invalid' : '') + '">' + ((opt_data.component.lead) ? JIRA.Templates.User.profileLink({user: opt_data.component.lead, avatarSize: 'xsmall', avatarUrl: opt_data.component.lead.avatarUrls['16x16'], linked: false}) : (opt_data.component.leadUserName) ? soy.$$escapeHtml(opt_data.component.leadUserName) : '<em>' + soy.$$escapeHtml('Add Lead') + '</em>') + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.Component.componentLead.soyTemplateName = 'JIRA.Templates.Component.componentLead';
}


JIRA.Templates.Component.editComponentLead = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isLeadPickerDisabled) ? '<input name="leadUserName" class="text aui-ss-disabled" value="' + ((opt_data.lead) ? soy.$$escapeHtml(opt_data.lead.name) : (opt_data.leadUserName) ? soy.$$escapeHtml(opt_data.leadUserName) : '') + '" />' : '<select class="single-user-picker js-default-user-picker hidden" name="leadUserName">' + ((opt_data.lead) ? '<option style="background-image:url(' + soy.$$escapeHtml(opt_data.lead.avatarUrls['16x16']) + ')" selected="selected" value="' + soy.$$escapeHtml(opt_data.lead.name) + '">' + soy.$$escapeHtml(opt_data.lead.displayName) + '</option>' : (opt_data.leadUserName) ? '<option selected="selected" value="' + soy.$$escapeHtml(opt_data.leadUserName) + '">' + soy.$$escapeHtml(opt_data.leadUserName) + '</option>' : '') + '</select>');
};
if (goog.DEBUG) {
  JIRA.Templates.Component.editComponentLead.soyTemplateName = 'JIRA.Templates.Component.editComponentLead';
}


JIRA.Templates.Component.defaultAssignee = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.component.assigneeType) {
    case 'PROJECT_DEFAULT':
      output += '<span class="project-config-component-assignee project-config-component-project-default ' + ((! opt_data.component.isAssigneeTypeValid) ? 'project-config-invalid' : '') + '" ' + ((opt_data.component.assigneeInvalidMsg) ? ' title="' + soy.$$escapeHtml(opt_data.component.assigneeInvalidMsg) + '"' : '') + '>' + soy.$$escapeHtml('Project Default') + '</span>';
      break;
    case 'COMPONENT_LEAD':
      output += '<span class="project-config-component-assignee project-config-component-component-lead ' + ((! opt_data.component.isAssigneeTypeValid) ? 'project-config-invalid' : '') + '" ' + ((opt_data.component.assigneeInvalidMsg) ? ' title="' + soy.$$escapeHtml(opt_data.component.assigneeInvalidMsg) + '"' : '') + '>' + soy.$$escapeHtml('Component Lead') + '</span>';
      break;
    case 'PROJECT_LEAD':
      output += '<span class="project-config-component-assignee project-config-component-project-lead ' + ((! opt_data.component.isAssigneeTypeValid) ? 'project-config-invalid' : '') + '" ' + ((opt_data.component.assigneeInvalidMsg) ? ' title="' + soy.$$escapeHtml(opt_data.component.assigneeInvalidMsg) + '"' : '') + '>' + soy.$$escapeHtml('Project Lead') + '</span>';
      break;
    case 'UNASSIGNED':
      output += '<span class="project-config-component-assignee project-config-component-unassigned ' + ((! opt_data.component.isAssigneeTypeValid) ? 'project-config-invalid' : '') + '"' + ((opt_data.component.assigneeInvalidMsg) ? ' title="' + soy.$$escapeHtml(opt_data.component.assigneeInvalidMsg) + '"' : '') + '>' + soy.$$escapeHtml('Unassigned') + '</span>';
      break;
    default:
      output += '<span class="project-config-component-assignee project-config-component-unknown ' + ((! opt_data.component.isAssigneeTypeValid) ? 'project-config-invalid' : '') + '">' + soy.$$escapeHtml(opt_data.component.assigneeType) + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Component.defaultAssignee.soyTemplateName = 'JIRA.Templates.Component.defaultAssignee';
}


JIRA.Templates.Component.editDefaultAssignee = function(opt_data, opt_ignored) {
  return '<select class="select" name="assigneeType"><option value="PROJECT_DEFAULT"' + ((opt_data.assigneeType == 'PROJECT_DEFAULT') ? ' selected' : '') + '>' + soy.$$escapeHtml('Project Default') + ' (' + ((opt_data.isDefaultAssigneeProjectLead) ? soy.$$escapeHtml('Project Lead') : soy.$$escapeHtml('Unassigned')) + ')</option><option value="COMPONENT_LEAD"' + ((opt_data.assigneeType == 'COMPONENT_LEAD') ? ' selected' : '') + '>' + soy.$$escapeHtml('Component Lead') + ' ' + ((opt_data.lead) ? '(' + soy.$$escapeHtml(opt_data.lead.displayName) + ')' : '') + '</option><option value="PROJECT_LEAD"' + ((opt_data.assigneeType == 'PROJECT_LEAD') ? ' selected' : '') + '>' + soy.$$escapeHtml('Project Lead') + ' (' + soy.$$escapeHtml(opt_data.projectLeadAssignee) + ')</option><option value="UNASSIGNED"' + ((opt_data.assigneeType == 'UNASSIGNED') ? ' selected' : '') + '>' + soy.$$escapeHtml('Unassigned') + '</option></select>';
};
if (goog.DEBUG) {
  JIRA.Templates.Component.editDefaultAssignee.soyTemplateName = 'JIRA.Templates.Component.editDefaultAssignee';
}


JIRA.Templates.Component.deleteForm = function(opt_data, opt_ignored) {
  var output = '<h2 class="dialog-title">' + soy.$$escapeHtml('Delete') + ' ' + soy.$$escapeHtml('Component') + ': ' + soy.$$escapeHtml(opt_data.component.name) + '</h2><form class="aui" action="#" method="post"><div class="form-body">';
  if (opt_data.relatedIssueCount) {
    if (opt_data.swapComponents.length) {
      output += '<div class="aui-message info"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('There are issues related to this component, specify what is to be done with them.') + '</div><fieldset class="group"><legend><span>' + soy.$$escapeHtml('Related Issues') + ' (<a id="issue-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;component=' + soy.$$escapeHtml(opt_data.component.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount) + '</a>)</span></legend><div class="radio"><input name="component" value="swap" id="component-swap" class="radio" checked="checked" type="radio" /><label for="component-swap">' + soy.$$escapeHtml('Swap current issues to component') + '</label> <select name="moveIssuesTo" class="select">';
      var componentList194 = opt_data.swapComponents;
      var componentListLen194 = componentList194.length;
      for (var componentIndex194 = 0; componentIndex194 < componentListLen194; componentIndex194++) {
        var componentData194 = componentList194[componentIndex194];
        output += '<option value="' + soy.$$escapeHtml(componentData194.id) + '">' + soy.$$escapeHtml(componentData194.name) + '</option>';
      }
      output += '</select></div><div class="radio"><input name="component" value="remove" id="component-remove" class="radio" type="radio"><label for="component-remove">' + soy.$$escapeHtml('Remove component from all issues.') + '</label></div>';
    } else {
      output += '<div class="aui-message info"><span class="aui-icon icon-info"></span> <p>' + soy.$$escapeHtml('There are issues related to this component and no components in this project to migrate them to.') + ' <strong>' + soy.$$escapeHtml('The component will be removed from all issues.') + '</strong></p><ul><li>' + soy.$$escapeHtml('Related Issues') + ' (<a id="issue-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;component=' + soy.$$escapeHtml(opt_data.component.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount) + '</a>)</li></ul></div>';
    }
    output += '</fieldset>';
  } else {
    output += '<div class="aui-message info"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('There are no issues that use this component. It is safe to delete.') + '</div>';
  }
  output += '</div><div class="buttons-container form-footer"><div class="buttons"><input id="submit" class="aui-button" type="submit" value="' + soy.$$escapeHtml('Delete') + '" /><a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Component.deleteForm.soyTemplateName = 'JIRA.Templates.Component.deleteForm';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/templates/template-wrapper.js' */
define("jira-project-config/component/templates",[],function(){"use strict";return window.JIRA.Templates.Component}),AJS.namespace("JIRA.Templates.Component",null,require("jira-project-config/component/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/js/views/DeleteForm.js' */
define("jira-project-config/component/view/delete-form",["jira-project-config/component/templates","jira-project-config/backbone","jquery"],function(e,t,o){"use strict";var n=e;return t.View.extend({submit:function(e,t,o){return this.$(".throbber").addClass("loading"),"swap"!==e.component&&delete e.moveIssuesTo,this.model.destroy({data:e,success:function(){o()},error:function(){o()}}),this},render:function(e){var t=this;return this.model.getRelatedIssueCount({success:function(r){t.el.innerHTML=n.deleteForm({relatedIssueCount:r,component:t.model.toJSON(),swapComponents:t.model.getSwapComponentsJSON(),projectId:o("meta[name=projectId]").attr("content")}),e.call(t,t.el)}}),this}})}),AJS.namespace("JIRA.Admin.Component.DeleteForm",null,require("jira-project-config/component/view/delete-form"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/js/views/ComponentRow.js' */
define("jira-project-config/component/view/row",["aui/restful-table","jira-project-config/component/view/delete-form","jira-project-config/utils","jira/userhover/userhover"],function(e,t,o,i){"use strict";var n=e.Row;return n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.events["click .project-config-component-delete"]="destroy",this.delegateEvents(),this.bind(this._event.RENDER,function(){var e=this.model.get("id");this.$el.addClass("project-config-component").attr("id","component-"+e+"-row").attr("data-id",e),i(this.el)})},destroy:function(e){this.trigger("focus"),o.openDialogForRow(t,this,"component-"+this.model.get("id")+"-delete-dialog"),e&&e.preventDefault()}})}),AJS.namespace("JIRA.Admin.Component.ComponentRow",null,require("jira-project-config/component/view/row"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/js/views/EditComponentRow.js' */
define("jira-project-config/component/view/edit-row",["aui/restful-table"],function(t){"use strict";var i=t.EditRow;return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.bind(this._event.RENDER,function(){this.$el.addClass("project-config-components-add-fields")})},submit:function(){var t=this.$(".project-config-component-lead .error");0===t.length?i.prototype.submit.apply(this,arguments):this.focus()}})}),AJS.namespace("JIRA.Admin.Component.EditComponentRow",null,require("jira-project-config/component/view/edit-row"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/js/views/Icon.js' */
define("jira-project-config/component/view/icon",["jira-project-config/component/templates","aui/restful-table"],function(e,n){"use strict";var o=n.CustomReadView,i=e;return o.extend({render:function(){return i.icon()}})}),AJS.namespace("JIRA.Admin.Component.IconView",null,require("jira-project-config/component/view/icon"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/js/views/ComponentLead.js' */
define("jira-project-config/component/view/lead",["jira-project-config/component/templates","aui/restful-table","underscore"],function(e,n,t){"use strict";var i=n.CustomReadView,o=e;return i.extend({render:function(){var e=t.clone(this.model.attributes);if(e.lead||e.leadUserName)return e.assigneeInvalidMsg=this.model.getAssigneeInvalidMsg(),o.componentLead({component:e})}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeReadView",null,require("jira-project-config/component/view/lead"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/js/views/DefaultAssignee.js' */
define("jira-project-config/component/view/default-assignee",["jira-project-config/component/templates","aui/restful-table"],function(e,n){"use strict";var t=n.CustomReadView,i=e;return t.extend({render:function(){return i.defaultAssignee({component:this.model.attributes})}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeTypeReadView",null,require("jira-project-config/component/view/default-assignee"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/js/views/EditName.js' */
define("jira-project-config/component/view/edit-name",["jira-project-config/component/templates","aui/restful-table"],function(e,t){"use strict";var n=t.CustomEditView,i=e;return n.extend({render:function(e){return e.project=this.model.getProject(),e.update=!1,i.editComponentName(e)}})}),AJS.namespace("JIRA.Admin.Component.NameEditView",null,require("jira-project-config/component/view/edit-name"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/js/views/EditDefaultAssignee.js' */
define("jira-project-config/component/view/edit-default-assignee",["jira-project-config/component/templates","aui/restful-table","underscore"],function(e,t,i){"use strict";var n=t.CustomEditView,s=e;return n.extend({render:function(){var e=i.clone(this.model.attributes);return e.isDefaultAssigneeProjectLead=this.model.isDefaultAssigneeProjectLead(),e.projectLeadAssignee=this.model.getProjectLeadAssignee(),s.editDefaultAssignee(e)}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeTypeEditView",null,require("jira-project-config/component/view/edit-default-assignee"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'components/js/views/EditComponentLead.js' */
define("jira-project-config/component/view/edit-lead",["jira-project-config/component/templates","aui/restful-table","underscore"],function(e,i,n){"use strict";var t=i.CustomEditView,o=e;return t.extend({render:function(){var e=n.clone(this.model.attributes);return e.isLeadPickerDisabled=this.model.isLeadPickerDisabled(),e.assigneeInvalidMsg=this.model.getAssigneeInvalidMsg(),o.editComponentLead(e)}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeEditView",null,require("jira-project-config/component/view/edit-lead"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:globals-templates-common-soy', location = 'global/templates/common.soy' */
// This file was automatically generated from common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Common == 'undefined') { JIRA.Templates.Common = {}; }


JIRA.Templates.Common.serverErrorDialog = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + 'Error' + '</h2><div class="form-body"><div class="aui-message error"><span class="aui-icon icon-error"></span> ' + opt_data.message + '</div></div><div class="buttons-container form-footer"><div class="buttons"><a href="#" class="aui-button aui-button-link cancel">' + 'Close' + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Common.serverErrorDialog.soyTemplateName = 'JIRA.Templates.Common.serverErrorDialog';
}


JIRA.Templates.Common.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Common.formatAnchor.soyTemplateName = 'JIRA.Templates.Common.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Release.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Release == 'undefined') { JIRA.Projects.Release = {}; }
if (typeof JIRA.Projects.Release.Templates == 'undefined') { JIRA.Projects.Release.Templates = {}; }


JIRA.Projects.Release.Templates.page = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.renderLegacy && ! opt_data.showBreadcrumbs) ? JIRA.Projects.Release.Templates.whatsnew(opt_data) : '') + aui.page.pageHeader({content: '' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<h1>' + soy.$$escapeHtml(opt_data.releaseTitle) + '</h1>' : (opt_data.renderLegacy) ? '<div class="aui-page-header-image"><div class="aui-avatar aui-avatar-large"><div class="aui-avatar-inner project-config-icon48-versions"></div></div></div><div class="aui-page-header-main"><h2>' + soy.$$escapeHtml(opt_data.releaseTitle) + '</h2></div>' : '<h1>' + soy.$$escapeHtml(opt_data.releaseTitle) + '</h1>') + ((opt_data.adminLink && ! opt_data.manageVersions && ! opt_data.renderLegacy) ? aui.page.pageHeaderActions({content: '' + aui.buttons.button({id: 'manage-versions', text: 'Manage Versions', href: soy.$$escapeHtml("") + '/' + soy.$$escapeHtml(opt_data.adminLink)})}) : ''), extraClasses: '' + ((! opt_data.renderLegacy) ? 'aui-page-header-fixed' : 'aui-page-header-fixed__legacy')}) + '<div id="release-page" class="releases-page-app ' + ((opt_data.renderLegacy) ? 'releases-page-app__legacy' : '') + '"></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.page.soyTemplateName = 'JIRA.Projects.Release.Templates.page';
}


JIRA.Projects.Release.Templates.whatsnew = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.learnMoreURL) ? '<div class="whats-new-container"><div class="whats-new"><div class="logo"></div><h2>' + soy.$$escapeHtml('Get the status of a version at a glance or go deeper') + '</h2><p>' + soy.$$escapeHtml('These are the versions in your project. Hover over the progress bar for a summary or click a version to see the complete status, including the issues, development data, and potential problems.') + '</p><p><a href="' + soy.$$escapeHtml(opt_data.learnMoreURL) + '" title="' + soy.$$escapeHtml(opt_data.learnMoreTitle) + '">' + soy.$$escapeHtml('Learn more') + '</a></p></div></div>' : '');
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.whatsnew.soyTemplateName = 'JIRA.Projects.Release.Templates.whatsnew';
}


JIRA.Projects.Release.Templates.filter = function(opt_data, opt_ignored) {
  return '<form id="version-filter" class="version-filter aui ajs-dirty-warning-exempt"><div class="version-filter-text-container"><div class="version-filter-search-container ' + ((opt_data.contains) ? 'version-filter-search-opened' : '') + '"><input type="text" id="version-filter-text" class="version-filter-text text" value="' + soy.$$escapeHtml(opt_data.contains) + '" /><span class="aui-icon aui-icon-small aui-iconfont-search-small"></span></div><div class="version-filter-status-text" title="' + soy.$$escapeHtml('Use Quick Filters to view a subset of versions.') + '">' + soy.$$escapeHtml('Quick filters:') + '</div></div><div class="version-filter-status-container">' + JIRA.Projects.Release.Templates.button({buttonName: 'released', isPressed: opt_data.isReleasedPressed, text: 'Released'}) + JIRA.Projects.Release.Templates.button({buttonName: 'unreleased', isPressed: opt_data.isUnreleasedPressed, text: 'Unreleased'}) + ((opt_data.showArchived) ? JIRA.Projects.Release.Templates.button({buttonName: 'archived', isPressed: opt_data.isArchivedPressed, text: 'Archived'}) : '') + '</div></form>';
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.filter.soyTemplateName = 'JIRA.Projects.Release.Templates.filter';
}


JIRA.Projects.Release.Templates.button = function(opt_data, opt_ignored) {
  return '<a class="version-filter-status-' + soy.$$escapeHtml(opt_data.buttonName) + ' version-filter-status-button ' + ((opt_data.isPressed) ? 'version-filter-status-pressed' : '') + '" href="#" data-version-type="' + soy.$$escapeHtml(opt_data.buttonName) + '">' + soy.$$escapeHtml(opt_data.text) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.button.soyTemplateName = 'JIRA.Projects.Release.Templates.button';
}


JIRA.Projects.Release.Templates.table = function(opt_data, opt_ignored) {
  return '' + aui.table({extraClasses: 'versions-table dynamic-table', theadContent: '<tr><th class="versions-table__handle"> </th><th class="versions-table__name">' + soy.$$escapeHtml('Version') + '</th><th class="versions-table__status">' + soy.$$escapeHtml('Status') + '</th><th class="versions-table__progress">' + soy.$$escapeHtml('Progress') + '</th><th class="versions-table__date">' + soy.$$escapeHtml('Start date') + '</th><th class="versions-table__date">' + soy.$$escapeHtml('Release date') + '</th><th class="versions-table__description">' + soy.$$escapeHtml('Description') + '</th><th class="dynamic-table__actions">' + soy.$$escapeHtml('Actions') + '</th></tr>', content: '', id: 'versions-table'});
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.table.soyTemplateName = 'JIRA.Projects.Release.Templates.table';
}


JIRA.Projects.Release.Templates.row = function(opt_data, opt_ignored) {
  var output = '<tr ' + ((opt_data.id != null) ? 'data-version-id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="item-state-' + soy.$$escapeHtml(opt_data.state) + ' ' + ((opt_data.overdue) ? 'release-overdue' : '') + '">' + ((opt_data.state == 'ready') ? '<td class="versions-table__handle"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Reorder versions') + '</span></td>' : '<td class="versions-table__handle-disabled"></td>') + '<td class="versions-table__name"><div>' + ((opt_data.url) ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$insertWordBreaks(soy.$$escapeHtml(opt_data.name), 10) + '</a>' : soy.$$insertWordBreaks(soy.$$escapeHtml(opt_data.name), 10)) + '</div></td><td class="versions-table__status"><div>' + ((opt_data.archived) ? aui.lozenges.lozenge({text: 'archived', isSubtle: true}) : (opt_data.released) ? aui.lozenges.lozenge({text: 'Released', type: 'success', isSubtle: true}) : aui.lozenges.lozenge({text: 'Unreleased', type: 'current', isSubtle: true})) + '</div></td><td class="versions-table__progress"><div>' + ((opt_data.status) ? JIRA.Projects.Release.Templates.status(opt_data.status) : '') + '</div></td><td class="versions-table__date_start"><div>' + JIRA.Projects.Release.Templates.date(opt_data.startDate) + '</div></td><td class="versions-table__date_release"><div>' + JIRA.Projects.Release.Templates.date(opt_data.releaseDate) + '</div></td><td class="versions-table__description"><div>' + soy.$$insertWordBreaks(soy.$$escapeHtml(opt_data.description), 10) + '</div></td><td class="dynamic-table__actions"><div>';
  switch (opt_data.state) {
    case 'in-progress':
      output += aui.icons.icon({icon: 'wait'});
      break;
    case 'in-progress-error':
      output += aui.icons.icon({icon: 'wait'});
      break;
    case 'successful':
      output += JIRA.Projects.AbstractList.Templates.actionsSuccess(null);
      break;
    case 'error-add':
      output += JIRA.Projects.AbstractList.Templates.actionsError({class: 'operation-add'});
      break;
    case 'error-delete':
      output += JIRA.Projects.AbstractList.Templates.actionsError({class: 'operation-delete'});
      break;
    case 'error-update':
      output += JIRA.Projects.AbstractList.Templates.actionsError({class: 'operation-update'});
      break;
    default:
      output += JIRA.Projects.Release.Templates.actionsDropdown(opt_data);
  }
  output += '</div></td></tr>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.row.soyTemplateName = 'JIRA.Projects.Release.Templates.row';
}


JIRA.Projects.Release.Templates.actionsDropdown = function(opt_data, opt_ignored) {
  var output = '<a href="#version-actions-' + soy.$$escapeHtml(opt_data.id) + '" aria-owns="version-actions-' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true" class="aui-button aui-button-subtle aui-button-compact aui-dropdown2-trigger aui-dropdown2-trigger-arrowless aui-style-default details-button"><span class="aui-icon aui-icon-small aui-iconfont-more">' + soy.$$escapeHtml('Operations') + '</span></a><div id="version-actions-' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default version-actions"><ul class="aui-list-truncate"><li>';
  var operationList215 = opt_data.operations;
  var operationListLen215 = operationList215.length;
  for (var operationIndex215 = 0; operationIndex215 < operationListLen215; operationIndex215++) {
    var operationData215 = operationList215[operationIndex215];
    var href__soy216 = operationData215.href != null ? "" + operationData215.href : '#';
    output += '<a class="' + soy.$$escapeHtml(operationData215.styleClass) + '" href="' + soy.$$escapeHtml(href__soy216) + '">' + soy.$$escapeHtml(operationData215.label) + '</a>';
  }
  output += '</li></ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.actionsDropdown.soyTemplateName = 'JIRA.Projects.Release.Templates.actionsDropdown';
}


JIRA.Projects.Release.Templates.emptyRow = function(opt_data, opt_ignored) {
  return '<tr class="versions-table__row-empty"><td colspan="8"><div class="no-results no-table-common"><img class="releases-logo" src="' + soy.$$escapeHtml("") + '/download/resources/com.atlassian.jira.jira-projects-plugin:release-page-assets/page/project/release/image/versions-search-empty-state.svg" /><h4>' + soy.$$escapeHtml('No versions were found that match your search') + '</h4><p class="description">' + soy.$$escapeHtml('Try modifying your filter criteria.') + '</p></div></td></tr>';
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.emptyRow.soyTemplateName = 'JIRA.Projects.Release.Templates.emptyRow';
}


JIRA.Projects.Release.Templates.status = function(opt_data, opt_ignored) {
  var output = '';
  var totalCount__soy235 = opt_data.unmapped.count + opt_data.toDo.count + opt_data.inProgress.count + opt_data.complete.count;
  output += (totalCount__soy235) ? '<div class="progressbar-container"><div class="progressbar progressbar_full">' + JIRA.Projects.Release.Templates.progressBarEntry({entry: opt_data.complete, totalCount: totalCount__soy235, type: 'complete', name: 'Done'}) + JIRA.Projects.Release.Templates.progressBarEntry({entry: opt_data.inProgress, totalCount: totalCount__soy235, type: 'in-progress', name: 'In Progress'}) + JIRA.Projects.Release.Templates.progressBarEntry({entry: opt_data.toDo, totalCount: totalCount__soy235, type: 'to-do', name: 'To Do'}) + JIRA.Projects.Release.Templates.progressBarEntry({entry: opt_data.unmapped, totalCount: totalCount__soy235, type: 'undefined', name: 'No Category'}) + '</div></div>' : soy.$$escapeHtml('No issues');
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.status.soyTemplateName = 'JIRA.Projects.Release.Templates.status';
}


JIRA.Projects.Release.Templates.progressBarEntry = function(opt_data, opt_ignored) {
  var output = '';
  var percentage__soy263 = opt_data.entry.count / opt_data.totalCount * 100;
  output += (percentage__soy263) ? '<div class="progressbar__entry progressbar__entry progressbar__entry progressbar__entry_' + soy.$$escapeHtml(opt_data.type) + '" data-type="' + soy.$$escapeHtml(opt_data.type) + '" data-title="' + soy.$$escapeHtml(opt_data.name) + '" data-count="' + soy.$$escapeHtml(opt_data.entry.count) + '" data-url="' + soy.$$escapeHtml(opt_data.entry.jqlUrl) + '" style="width: ' + soy.$$escapeHtml(percentage__soy263) + '%"></div>' : '';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.progressBarEntry.soyTemplateName = 'JIRA.Projects.Release.Templates.progressBarEntry';
}


JIRA.Projects.Release.Templates.progressBarDialog = function(opt_data, opt_ignored) {
  var output = '<div class="progress-statuses">' + soy.$$escapeHtml('Version') + ': ' + soy.$$escapeHtml(opt_data.name) + '<br />' + soy.$$escapeHtml(AJS.format('{0,choice,0#{0} issues|1#{0} issue|1\x3c{0} issues} in total',opt_data.totalCount)) + '<br /><table class="progress-statuses__table"><tbody>';
  var entryList287 = opt_data.entries;
  var entryListLen287 = entryList287.length;
  for (var entryIndex287 = 0; entryIndex287 < entryListLen287; entryIndex287++) {
    var entryData287 = entryList287[entryIndex287];
    output += '<tr><td>' + soy.$$escapeHtml(entryData287.name) + '</td><td><a href="' + soy.$$escapeHtml(entryData287.url) + '">' + aui.badges.badge({text: entryData287.count, extraClasses: 'progress-statuses__table__badge progress-statuses__table__badge_' + soy.$$escapeHtml(entryData287.type)}) + '</a></td></tr>';
  }
  output += '</tbody><tfoot><td colspan="2"><a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml('All issues') + '</a></td></tfoot></table></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.progressBarDialog.soyTemplateName = 'JIRA.Projects.Release.Templates.progressBarDialog';
}


JIRA.Projects.Release.Templates.date = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.formatted) ? '<time class="date" datetime="' + soy.$$escapeHtml(opt_data.iso) + '">' + soy.$$escapeHtml(opt_data.formatted) + '</time>' : '');
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.date.soyTemplateName = 'JIRA.Projects.Release.Templates.date';
}


JIRA.Projects.Release.Templates.noVersions = function(opt_data, opt_ignored) {
  return '<div class="no-versions no-table-common"><img class="releases-logo" src="' + soy.$$escapeHtml("") + '/download/resources/com.atlassian.jira.jira-projects-plugin:release-page-assets/page/project/release/image/versions-empty-state.svg" /><h4>' + soy.$$escapeHtml('You haven\x27t added any version to this project yet') + '</h4><p class="description">' + soy.$$escapeHtml('Versions are points-in-time for a project, and help you organise and schedule your work.') + '</p><p><a id="learn-more" target="_blank" href="' + soy.$$filterNoAutoescape(opt_data.learnMoreUrl) + '">' + soy.$$escapeHtml('Learn more') + '</a></p></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.noVersions.soyTemplateName = 'JIRA.Projects.Release.Templates.noVersions';
}


JIRA.Projects.Release.Templates.addVersion = function(opt_data, opt_ignored) {
  return '' + aui.form.form({id: 'releases-add__version', action: '', extraClasses: 'ajs-dirty-warning-subsequent-submits-allowed', content: '<div class="releases-add__name">' + aui.form.input({placeholderText: 'Version name', name: 'name', type: 'text'}) + '<div class="error-container"></div></div><div class="releases-add__date-start">' + aui.form.input({placeholderText: 'Start date (optional)', name: 'startDate', type: 'text', extraAttributes: ' autocomplete="off"'}) + '<a href="#" title="' + soy.$$escapeHtml('Select a date') + '">' + aui.icons.icon({icon: 'calendar', useIconFont: true, accessibilityText: 'Select a date'}) + '</a><div class="error-container" style="white-space: pre-wrap"></div></div><div class="releases-add__date-release">' + aui.form.input({placeholderText: 'Release date (optional)', name: 'releaseDate', type: 'text', extraAttributes: ' autocomplete="off"'}) + '<a href="#" title="' + soy.$$escapeHtml('Select a date') + '">' + aui.icons.icon({icon: 'calendar', useIconFont: true, accessibilityText: 'Select a date'}) + '</a><div class="error-container" style="white-space: pre-wrap"></div></div><div class="releases-add__description">' + aui.form.input({placeholderText: 'Description (optional)', name: 'description', type: 'text'}) + '<div class="error-container"></div></div><div class="releases-add__confirm">' + aui.buttons.button({text: 'Add', type: 'primary'}) + '</div>'});
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.addVersion.soyTemplateName = 'JIRA.Projects.Release.Templates.addVersion';
}


JIRA.Projects.Release.Templates.tableLayout = function(opt_data, opt_ignored) {
  return '' + JIRA.Projects.AbstractList.Templates.tableLayoutCommon({id: 'versions-table', class: 'versions-table', headerRow: '<tr><th class="versions-table__handle"> </th><th class="versions-table__name">' + soy.$$escapeHtml('Version') + '</th><th class="versions-table__status">' + soy.$$escapeHtml('Status') + '</th><th class="versions-table__progress">' + soy.$$escapeHtml('Progress') + '</th><th class="versions-table__date">' + soy.$$escapeHtml('Start date') + '</th><th class="versions-table__date">' + soy.$$escapeHtml('Release date') + '</th><th class="versions-table__description">' + soy.$$escapeHtml('Description') + '</th><th class="dynamic-table__actions">' + soy.$$escapeHtml('Actions') + '</th></tr>'});
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.tableLayout.soyTemplateName = 'JIRA.Projects.Release.Templates.tableLayout';
}


JIRA.Projects.Release.Templates.versionEdit = function(opt_data, opt_ignored) {
  return '' + aui.page.document({pageType: 'focused', pageSize: 'large', windowTitle: 'Edit version', extraClasses: 'version-edit', content: '' + aui.page.pageHeader({content: '' + aui.page.pageHeaderMain({content: '<h1>' + soy.$$escapeHtml('Edit version') + '</h1>'})}) + ((opt_data.decorator == 'dialog') ? JIRA.Projects.Release.Templates.versionEditFormPanel(opt_data) : aui.page.pagePanel({content: '' + aui.page.pagePanelContent({content: '' + JIRA.Projects.Release.Templates.versionEditFormPanel(opt_data)})}))});
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.versionEdit.soyTemplateName = 'JIRA.Projects.Release.Templates.versionEdit';
}


JIRA.Projects.Release.Templates.versionEditFormPanel = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.version && ! opt_data.forbidden) {
    output += JIRA.Projects.Release.Templates.versionEditForm(opt_data);
  } else if (opt_data.globalErrors) {
    output += '<div id="version-edit" class="form-body">';
    var param426 = '';
    var globalErrorList427 = opt_data.globalErrors;
    var globalErrorListLen427 = globalErrorList427.length;
    for (var globalErrorIndex427 = 0; globalErrorIndex427 < globalErrorListLen427; globalErrorIndex427++) {
      var globalErrorData427 = globalErrorList427[globalErrorIndex427];
      param426 += soy.$$escapeHtml(globalErrorData427);
    }
    output += aui.message.error({content: param426});
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.versionEditFormPanel.soyTemplateName = 'JIRA.Projects.Release.Templates.versionEditFormPanel';
}


JIRA.Projects.Release.Templates.versionEditForm = function(opt_data, opt_ignored) {
  var param443 = '' + ((opt_data.version.id) ? '<input type="hidden" name="id" value="' + soy.$$escapeHtml(opt_data.version.id) + '" />' : '') + ((opt_data.decorator) ? '<input type="hidden" name="decorator" value="' + soy.$$escapeHtml(opt_data.decorator) + '" />' : '') + ((opt_data.globalSuccess) ? aui.message.success({content: '' + soy.$$escapeHtml(opt_data.globalSuccess)}) : '');
  if (opt_data.globalErrors) {
    var param461 = '';
    var globalErrorList462 = opt_data.globalErrors;
    var globalErrorListLen462 = globalErrorList462.length;
    for (var globalErrorIndex462 = 0; globalErrorIndex462 < globalErrorListLen462; globalErrorIndex462++) {
      var globalErrorData462 = globalErrorList462[globalErrorIndex462];
      param461 += soy.$$escapeHtml(globalErrorData462);
    }
    param443 += aui.message.error({content: param461});
  }
  param443 += '<div class="form-body">' + aui.form.fieldGroup({content: '' + aui.form.label({content: '' + soy.$$escapeHtml('Name'), isRequired: 'true'}) + aui.form.input({id: 'version-name', name: 'name', type: 'text', value: opt_data.version.name}) + JIRA.Projects.Release.Templates.errorDiv({name: 'name', errors: opt_data.errors, extraAttributes: 'data-field=name'})}) + aui.form.fieldGroup({content: '' + aui.form.label({content: '' + soy.$$escapeHtml('Start date')}) + aui.form.input({placeholderText: 'Start date (optional)', name: 'userStartDate', type: 'text', value: opt_data.version.startDate.datePickerFormatted, extraAttributes: ' autocomplete="off" date-picker data-field-name="startDate"'}) + '<a href="#" title="' + soy.$$escapeHtml('Select a date') + '">' + aui.icons.icon({icon: 'calendar', useIconFont: true, accessibilityText: 'Select a date'}) + '</a>' + JIRA.Projects.Release.Templates.errorDiv({name: 'startDate', errors: opt_data.errors, extraAttributes: 'data-field=startDate'})}) + aui.form.fieldGroup({content: '' + aui.form.label({content: '' + soy.$$escapeHtml('Release date')}) + aui.form.input({placeholderText: 'Release date (optional)', name: 'userReleaseDate', type: 'text', value: opt_data.version.releaseDate.datePickerFormatted, extraAttributes: ' autocomplete="off" date-picker data-field-name="releaseDate"'}) + '<a href="#" title="' + soy.$$escapeHtml('Select a date') + '">' + aui.icons.icon({icon: 'calendar', useIconFont: true, accessibilityText: 'Select a date'}) + '</a>' + JIRA.Projects.Release.Templates.errorDiv({name: 'releaseDate', errors: opt_data.errors, extraAttributes: 'data-field=releaseDate'})}) + aui.form.fieldGroup({content: '' + aui.form.label({content: '' + soy.$$escapeHtml('Description')}) + aui.form.input({id: 'version-description', name: 'description', type: 'text', value: opt_data.version.description, placeholderText: 'Description (optional)'}) + JIRA.Projects.Release.Templates.errorDiv({name: 'description', errors: opt_data.errors, extraAttributes: 'data-field=description'})}) + '</div>' + aui.form.buttons({extraClasses: 'horizontally-aligned form-footer', content: '' + aui.form.submit({id: 'version-save-submit', type: 'primary', text: 'Save'}) + ((opt_data.urlCancel && opt_data.decorator == 'dialog') ? aui.buttons.button({id: 'version-edit-cancel', href: opt_data.urlCancel, type: 'link', text: 'Cancel', extraClasses: 'cancel', extraAttributes: 'data-project="' + soy.$$escapeHtml(opt_data.projectKey) + '"'}) : '')});
  var output = '' + aui.form.form({id: 'version-edit', action: soy.$$escapeHtml("") + '/rest/api/2/version/' + soy.$$escapeHtml(opt_data.version.id), extraClasses: 'version-edit-form', extraAttributes: 'data-return-url="' + soy.$$escapeHtml(opt_data.urlReturn) + '"', content: param443});
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.versionEditForm.soyTemplateName = 'JIRA.Projects.Release.Templates.versionEditForm';
}


JIRA.Projects.Release.Templates.errorDiv = function(opt_data, opt_ignored) {
  return '' + ((opt_data.errors.errors[opt_data.name]) ? '<div class="error" ' + ((opt_data.extraAttributes) ? soy.$$escapeHtml(opt_data.extraAttributes) : '') + '>' + soy.$$escapeHtml(opt_data.errors.errors[opt_data.name]) + '</div>' : '');
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.errorDiv.soyTemplateName = 'JIRA.Projects.Release.Templates.errorDiv';
}


JIRA.Projects.Release.Templates.calendarConfiguration = function(opt_data, opt_ignored) {
  return '<fieldset class="hidden datepicker-params"><div class="parameters"><input title="dateFormat" type="hidden" value="' + soy.$$escapeHtml(opt_data.ifFormat) + '" /></div></fieldset>';
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.calendarConfiguration.soyTemplateName = 'JIRA.Projects.Release.Templates.calendarConfiguration';
}


JIRA.Projects.Release.Templates.searchLayout = function(opt_data, opt_ignored) {
  return '<table class="top-container"><tr><td><div id="filter-container"></div></td><td><div id="merge-container"></div></td></tr></table>' + ((! require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<div id="submit-container"></div>' : (require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled() && ! opt_data.isProjectAdmin) ? '<div id="adg3"></div>' : '') + aui.page.pagePanelContent({content: '<div id="content-container"></div>' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<div id="submit-container"></div>' : '') + '<div id="config-data-container"></div>', extraClasses: 'aui-page-panel-content-no-table'});
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.searchLayout.soyTemplateName = 'JIRA.Projects.Release.Templates.searchLayout';
}


JIRA.Projects.Release.Templates.merge = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isProjectAdmin && opt_data.versionsSize > 1) ? '<a id="versions-merge" href="#"><img src="' + soy.$$escapeHtml("") + '/download/resources/com.atlassian.jira.jira-projects-plugin:release-page-assets/page/project/release/image/merge-versions-icon.svg" /> ' + soy.$$escapeHtml('Merge versions') + '</a>' : '<span></span>');
};
if (goog.DEBUG) {
  JIRA.Projects.Release.Templates.merge.soyTemplateName = 'JIRA.Projects.Release.Templates.merge';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/SubmitController.js' */
define("jira/projects/release/submit-controller",["jira/projects/libs/marionette","jira/ajs/ajax/ajax-util","jira/flag","jira/featureflags/feature-manager","jira/projects/release/submit-view","jira/projects/release/submit-model","jira/projects/abstract-list/submit-controller","jira/projects/abstract-model/submit-model-states"],function(e,t,i,s,r,a,n,o){var d=n.extend({initialize:function(e){this._viewModel=new a,this.pageableItems=e.pageableItems,this.isProjectAdmin=e.isProjectAdmin},showView:function(){var e=new r({model:this._viewModel,pageableItems:this.options.pageableItems});return this.listenTo(e,"save",this.versionAdd),e},versionAdd:function(e){var t=e.clone();return this.listenTo(t,"retry-add",function(){this._versionAdd(t,!1,o.IN_PROGRESS_ERROR)}),this._versionAdd(t,!0,o.IN_PROGRESS)},_versionAdd:function(e,t,i){return e.set("state",i),t&&this.pageableItems.addElement(e),e.save(i).done(function(){setTimeout(function(){e.get("state")===o.SUCCESSFUL&&e.set("state",o.READY)},5e3),e.trigger("added",e)}.bind(this)),e},displaySubmitView:function(){return this.isProjectAdmin}});return d});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/SubmitModelConverter.js' */
define("jira/projects/release/submit-model-converter",[],function(){var e={getDefaultStatus:function(){return["unmapped","toDo","inProgress","complete"].reduce(function(e,t){return e[t]={count:0,jqlUrl:""},e},{})},getDate:function(e,t){return{formatted:e,iso:t||""}}};return e});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/SubmitModel.js' */
define("jira/projects/release/submit-model",["backbone","jira/projects/abstract-list/submit-model","underscore","jquery","wrm/context-path","jira/projects/release/submit-model-converter","jira/projects/abstract-model/submit-model-states","jira/ajs/ajax/ajax-util","jira/projects/abstract-list/submit-model-events","wrm/context-path","jira/ajs/ajax/smart-ajax","jira/util/events"],function(e,t,s,r,a,i,o,n,c,l,u,d){var h=t.extend({RELATED_ISSUES_PATH:"/relatedIssueCounts",MERGE_PATH:"/mergeto/",urlRoot:a()+"/rest/api/2/version",defaults:s.extend({},t.prototype.defaults,{released:!1,archived:!1,operations:[]}),detailsPath:function(){return a()+"/rest/projects/1.0/project/"+encodeURIComponent(this.get("project"))+"/release/details/"+this.id},toDataJSON:function(){var e=this.toJSON(),t=s.pick(e,"project","name","description");return t.userStartDate=e.startDate.formatted,t.userReleaseDate=e.releaseDate.formatted,t},_traceItemAdded:function(){JIRA.trace("jira.version.add.finished")},parse:function(t,s){var r=e.Model.prototype.parse.call(this,t,s);return r.startDate=i.getDate(t.userStartDate,t.startDate),r.releaseDate=i.getDate(t.userReleaseDate,t.releaseDate),r.status=i.getDefaultStatus(),delete r.userStartDate,delete r.userReleaseDate,r},destroy:function(t){t=t||{},this.lastDestroyOptions=s.clone(t);var r=t.data?t.data.moveFixIssuesTo:void 0,a=this.collection;t.wait=!0;var i=e.Model.prototype.destroy.apply(this,arguments);return i&&(i.fail(function(e){this.set("state",o.ERROR_DELETE),this.set("errorMsg",AJS.escapeHtml(n.getErrorMessageFromXHR(e)))}.bind(this)),r>0?i.then(function(){var e=a.get(r);e?e.detailsSync().always(function(){JIRA.trace("jira.version.delete.finished")}):JIRA.trace("jira.version.delete.finished")}.bind(this)):i.always(function(){JIRA.trace("jira.version.delete.finished")}),this.trigger("removeItemEvent")),i},sync:function(t,s,r){switch(t){case"delete":var a=this._convertFormToReplacementData(r.data);return r.attrs=a,delete r.data,r.url=this.url()+"/removeAndSwap",e.sync("create",s,r);case"move":return r.url=this.url()+"/move",r.attrs=s?{after:s.url()}:{position:"First"},e.sync("create",this,r)}return e.sync.apply(this,arguments)},_convertFormToReplacementData:function(e){var e=e||{},t={};"swap"===e.affects&&(t.moveAffectedIssuesTo=e.moveAffectedIssuesTo),"swap"===e.fix&&(t.moveFixIssuesTo=e.moveFixIssuesTo);for(var s in e){var r=s.match(/^customField([0-9]+)Action$/);if(r){t.customFieldReplacementList=t.customFieldReplacementList||[];var a=e[s],i=r[1],o={customFieldId:Number(i),moveTo:"swap"===a?e["customField"+i+"MoveTo"]:null};t.customFieldReplacementList.push(o)}}return t},save:function(a,i){if(this.lastSaveAttributes=s.clone(a),i=i||{},this.isNew())return t.prototype.save.call(this,a,i);if(a){var n=r.Deferred();this.set("state",o.isStateError(this.get("state"))?o.IN_PROGRESS_ERROR:o.IN_PROGRESS);var c=i.error,l=i.success;return e.Model.prototype.save.call(this,[],{attrs:a}).done(function(e){this.detailsSync().always(function(){this.set("state",o.SUCCESSFUL),n.resolve(),l&&l.call(this,this,e)}.bind(this))}.bind(this)).fail(function(e){if(this.set("state",o.ERROR_UPDATE),n.reject(e),c){var t=r.parseJSON(e.responseText||e.data);c.call(this,this,t,e)}}.bind(this)),n}},getUnresolvedIssueCount:function(e){var t=this.id;e=e||{};e.error;return u.makeRequest({url:l()+"/rest/api/2/version/"+t+"/unresolvedIssueCount",complete:function(t,s,r){r.successful?e.success.call(this,r.data):e.success.call(this,r.data)}.bind(this)}),this},getMoveVersionsJSON:function(){var e=this.collection.filter(function(e){return!e.get("released")&&e!==this}.bind(this)).map(function(e,t){var s=e.toJSON();return this.collection.at(t+1)===this&&(s.nextScheduled=!0),s}.bind(this));return e},getRelatedIssueCount:function(e){var t=this;return e=e||{},u.makeRequest({url:this.url()+this.RELATED_ISSUES_PATH,complete:function(s,r,a){a.successful?e.success.call(t,a.data):t._serverErrorHandler(a)}}),this},getSwapVersionsJSON:function(){var e=this,t=[];return this.collection.each(function(s){s.get("archived")||s===e||t.push(s.toJSON())}),t.reverse()},_serverErrorHandler:function(e,t){var s={};if(400!==e.status){try{s=r.parseJSON(e.responseText||e.data)}catch(e){s.errorMessages=[e]}d.trigger(c.SERVER_ERROR,[s,e,t,this])}},merge:function(e){var t=this,s=this.url(),r=e.data,a=this.collection;return"string"!=typeof r.mergeTo&&e.error.call(this,{status:400,errorMessages:["parameters"]}),u.makeRequest({url:s+this.MERGE_PATH+r.mergeTo,type:"PUT",dataType:"json",timeout:12e4,complete:function(s,i,n){var c=n.data;if("string"==typeof n.data)try{c=JSON.parse(n.data)}catch(e){c={successful:!1,errorMessages:[String.valueOf(e)]},n.data=JSON.stringify(c)}var l=!(400===s.status&&c&&c.errors);if(n.successful){t.trigger("destroy",t,t.collection,e),e.success&&e.success.call(t,c);var u=a.get(r.mergeTo);u?u.detailsSync().always(function(){u.set("state",o.SUCCESSFUL),u.addStateTimeout(o.SUCCESSFUL,o.READY),JIRA.trace("jira.version.merge.finished")}):JIRA.trace("jira.version.merge.finished")}else l&&(t._serverErrorHandler(n),e.error&&e.error.call(t,c));e.complete&&e.complete.call(t,s.status,c)}}),this}});return h});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/PageableVersionsCollection.js' */
define("jira/projects/release/pageable-versions-collection",["backbone","jira/projects/release/submit-model","jira/projects/abstract-list/lazy-loading-collection"],function(e,i,o){var t=e.Collection.extend({model:i}),l=o.extend({collectionClass:t,initialize:function(e){o.prototype.initialize.apply(this,arguments),this.listenTo(this,"added",function(e){this._addToTop(this,e),this._addToTop(this.originalCollection,e),this._addToTop(this.fullCollection,e)}),this.listenTo(this,"reorder",function(e,i){this._moveBefore(this,e,i),this._moveBefore(this.originalCollection,e,i),this._moveBefore(this.fullCollection,e,i),this.trigger("collectionChanged")})},_addToTop:function(e,i){var o=e.indexOf(i);o>0&&(e.remove(i),e.add(i,{at:0}))},_moveBefore:function(e,i,o){e.remove(i,{silent:!0}),e.add(i,o&&{at:e.indexOf(o)})}});return l});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/SubmitView.js' */
define("jira/projects/release/submit-view",["jira/projects/abstract-list/submit-view","jira/projects/release/submit-model","jira/api/projects","jira/ajs/ajax/ajax-util","jira/flag","jira/util/data/meta","underscore","jira/moment","jira/projects/release/submit-model-converter","jira/projects/release/calendar-params-data"],function(e,t,a,r,i,n,s,o,d,u){var l=new Object,m=new Object,h=e.extend({template:JIRA.Projects.Release.Templates.addVersion,ui:{form:"form",allInputs:"input[name]",nameInput:"input[name='name']",dateStartInput:"input[name='startDate']",dateStartCalendarTrigger:".releases-add__date-start a",dateReleaseInput:"input[name='releaseDate']",dateReleaseCalendarTrigger:".releases-add__date-release a",descriptionInput:"input[name='description']",err_nameInput:".releases-add__name .error-container",err_dateStartInput:".releases-add__date-start .error-container",err_dateReleaseInput:".releases-add__date-release .error-container",addButton:".releases-add__confirm button"},events:{"submit @ui.form":"_onSubmit","input @ui.nameInput":"_validateForm","change @ui.dateStartInput":"_validateStartDate","change @ui.dateReleaseInput":"_validateReleaseDate"},validation:{nameInput:["_uniqueName","_constraint","_empty"]},onRender:function(){this._setupCalendar(this.ui.dateStartCalendarTrigger,this.ui.dateStartInput),this._setupCalendar(this.ui.dateReleaseCalendarTrigger,this.ui.dateReleaseInput),this._validateForm()},_setupCalendar:function(e,t){var a=s.extend({},u,{button:e,inputField:t});Calendar.setup(a)},_getFormData:function(){var e=this.ui.form.serializeArray().reduce(function(e,t){return e[t.name]=t.value,e},{});return e.project=a.getCurrentProjectKey(),e.startDate=d.getDate(e.startDate),e.releaseDate=d.getDate(e.releaseDate),e.status=d.getDefaultStatus(),e},_validateForm:function(e){var t=s.flatten([this._validateName(),this._validateStartDate(m),this._validateReleaseDate(m)]);return t.length>0?this.ui.addButton.attr("disabled","disabled"):this.ui.addButton.is(":disabled")&&(this.ui.addButton.removeAttr("disabled"),e&&this.ui.descriptionInput.is(e.target)&&this.ui.addButton.focus()),t},_onSubmit:function(e){e.preventDefault(),this._validateForm(e).length>0||(this.model.clear(),this.model.set(this._getFormData()),this.trigger("save",this.model),this.model.clear(),this.isDestroyed||(this.ui.allInputs.val(""),this.ui.nameInput.focus(),this._validateForm()))},_validateName:function(){return s.flatten(s.map(this.validation,function(e,t){var a=this.ui[t].val(),r=s.flatten(e.map(function(e){return this[e](a)},this)),i=r.filter(function(e){return e!==l});return i.length>0?this._showError(t,i.join(", ")):this._hideError(t),r},this))},_validateStartDate:function(e){return this._validateDate("dateStartInput","dateReleaseInput",!0,e)||[]},_validateReleaseDate:function(e){return this._validateDate("dateReleaseInput","dateStartInput",!1,e)||[]},_validateDate:function(e,t,a,r){var i,n=this.ui[e].val().trim();if(0==n.length)return this._hideError(e),void(r!==m&&this._validateForm());if(n=this._correctFormat(n)){this.ui[e].val(n);var s=this.ui[t].val().trim();s.length>0&&this._correctFormat(s)&&(this._hideError(t),this._compareDates(n,s,a)||(i="The start date cannot be after the release date."))}else i=AJS.format("Please enter the date in the following format: {0}",u.dateFormat);return this._showError(e,i),i?this.ui.addButton.attr("disabled","disabled"):r!==m&&this._validateForm(),i},_showError:function(e,t){this.ui["err_"+e].html(void 0!==t?t:"").toggleClass("error",void 0!==t)},_hideError:function(e){this.ui["err_"+e].html("").removeClass("error")},_uniqueName:function(e){return this.options.pageableItems.originalCollection.some(function(t){return(t.get("name")||"").toLowerCase()===(e||"").toLowerCase()})?"Version of such name already exists.":[]},_constraint:function(e){return e&&e.length>255?"255 character limit exceeded.":[]},_empty:function(e){return e&&0!==e.trim().length?[]:l},_compareDates:function(e,t,a){var r=o.splitDate(e,u.ifFormat),i=o.splitDate(t,u.ifFormat),n=new Date(r.year,r.month,r.day),s=new Date(i.year,i.month,i.day);return a?n<=s:s<=n},_correctFormat:function(e){var t=o.splitDate(e,u.ifFormat);if(t.month!==-1&&!isNaN(t.day)&&!isNaN(t.year)&&0!==t.day&&0!==t.year){var a=new Date(t.year,t.month,t.day);if(a.getFullYear()==t.year&&a.getMonth()==t.month)return e.toLowerCase()}}});return h});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/FilterModel.js' */
define("jira/projects/release/filter-model",["jira/projects/abstract-model/submit-model-states"],function(t){"use strict";var e=JIRA.Projects.AbstractList.FilterModel,s=e.extend({filterAttributes:["status","contains"],defaults:{status:"unreleased",contains:""},initialize:function(t){e.prototype.initialize.call(this,t),this.on("change:status change:contains",this.filterCollection),this.on("change:status change:contains",this.navigate)},_getStatus:function(){return this.get("status")||s.FILTER_NONE},_getContains:function(){return(this.get("contains")||"").toLowerCase()},emptyContainsField:function(){this.set("contains","")},filterCollection:function(){var t=this.pageableCollection.originalCollection.models.filter(this.elementMatchFilter,this);this.pageableCollection.resetFilter(t)},_statusMatches:function(t){var e=this._getStatus();return e===s.FILTER_ALL||e===s.FILTER_NONE||(t.get("archived")?this.containsStatus("archived"):this.containsStatus("released")&&t.get("released")||this.containsStatus("unreleased")&&!t.get("released"))},elementMatchFilter:function(e){if(e.get("state")===t.IN_PROGRESS||e.get("state")===t.IN_PROGRESS_ERROR)return!0;if(!this._statusMatches(e))return!1;var s=this._getContains();return""===s||e.get("name").toLowerCase().indexOf(s)>-1||e.get("description").toLowerCase().indexOf(s)>-1||e.get("startDate").formatted.toLowerCase().indexOf(s)>-1||e.get("releaseDate").formatted.toLowerCase().indexOf(s)>-1},containsStatus:function(t){var e=this.get("status")||s.FILTER_NONE;return 0===e.indexOf(t)||e.indexOf("-"+t)>0}},{FILTER_ALL:"all",FILTER_NONE:"no-filter"});return s});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/FilterView.js' */
define("jira/projects/page/release/view/filter",["jira/projects/libs/marionette","underscore","jira/projects/release/filter-model"],function(e,t,s){"use strict";var i=JIRA.Projects.Release.Templates,n=function(){return JIRA.trace.apply(JIRA,arguments)},a={CONTAINS_OPENED:"version-filter-search-opened",STATUS_PRESSED:"version-filter-status-pressed"};return e.ItemView.extend({template:i.filter,ui:{form:"form",unreleased:".version-filter-status-unreleased",released:".version-filter-status-released",archived:".version-filter-status-archived",contains:".text",quickFilter:".version-filter-status-text",searchContainer:".version-filter-search-container"},events:{"submit @ui.form":function(e){e.preventDefault()},"input @ui.contains":"inputContains","change @ui.contains":"inputContains","click @ui.released":"clickStatusReleased","click @ui.unreleased":"clickStatusUnreleased","click @ui.archived":"clickStatusArchived","focus @ui.contains":function(){this.ui.searchContainer.addClass(a.CONTAINS_OPENED)},"blur @ui.contains":function(){this._isContainsEmpty()&&this.ui.searchContainer.removeClass(a.CONTAINS_OPENED)}},modelEvents:{"change:status":function(){var e=this._getReleased(),t=this._getUnreleased(),s=this.ui.released.hasClass(a.STATUS_PRESSED),i=this.ui.unreleased.hasClass(a.STATUS_PRESSED);e&&!s&&this.ui.released.addClass(a.STATUS_PRESSED),!e&&s&&this.ui.released.removeClass(a.STATUS_PRESSED),t&&!i&&this.ui.unreleased.addClass(a.STATUS_PRESSED),!t&&i&&this.ui.unreleased.removeClass(a.STATUS_PRESSED),this.ui.archived.toggleClass(a.STATUS_PRESSED,this._getArchived()),n("project.release.status.changed")}},onRender:function(){this.ui.quickFilter.tooltip({gravity:"w"})},clickStatusReleased:function(e){this._clickStatus(e,!this._getReleased(),this._getUnreleased(),this._getArchived())},clickStatusUnreleased:function(e){this._clickStatus(e,this._getReleased(),!this._getUnreleased(),this._getArchived())},clickStatusArchived:function(e){this._clickStatus(e,this._getReleased(),this._getUnreleased(),!this._getArchived())},_clickStatus:function(e,t,s,i){e.preventDefault(),this.model.set("status",this._getCurrentStatus(t,s,i))},_isContainsEmpty:function(){return t.isEmpty(this.ui.contains.val())},searchContainerResize:function(){this._isContainsEmpty()?this.ui.contains.is(":focus")||this.ui.searchContainer.removeClass(a.CONTAINS_OPENED):this.ui.searchContainer.addClass(a.CONTAINS_OPENED)},_inputContains:t.debounce(function(){var e=this.ui.contains.val();this.model.set("contains",e)},100),inputContains:function(){this.searchContainerResize(),this._inputContains()},_getReleased:function(){var e=this.model.get("status");return e===s.FILTER_ALL||this.model.containsStatus("released")},_getUnreleased:function(){var e=this.model.get("status");return e===s.FILTER_ALL||this.model.containsStatus("unreleased")},_getArchived:function(){var e=this.model.get("status");return e===s.FILTER_ALL||this.model.containsStatus("archived")},_getCurrentStatus:function(e,t,i){if(e&&t&&i)return s.FILTER_ALL;if(!e&&!t&&!i)return s.FILTER_NONE;var n=[];return e&&n.push("released"),t&&n.push("unreleased"),i&&n.push("archived"),n.join("-")},serializeData:function(){var e=this;return{contains:this.model.get("contains"),isReleasedPressed:e._getReleased(),isUnreleasedPressed:e._getUnreleased(),isArchivedPressed:e._getArchived(),showArchived:e.options.isProjectAdmin}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/EmptyItemView.js' */
define("jira/projects/release/empty-item-view",["jira/projects/libs/marionette"],function(e){"use strict";var t=e.ItemView.extend({template:JIRA.Projects.Release.Templates.emptyRow,onRender:function(){this.unwrapTemplate()}});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/NoVersionsItemView.js' */
define("jira/projects/release/noversionsitemview",["jira/projects/libs/marionette","jira/projects/release/analytics"],function(e,r){"use strict";var n=e.ItemView.extend({template:JIRA.Projects.Release.Templates.noVersions,ui:{learnMoreLink:"#learn-more"},events:{"click @ui.learnMoreLink":"onLearnMoreClicked"},onRender:function(){this.unwrapTemplate(),r.emptyViewRendered()},onLearnMoreClicked:function(){r.releaseLearnMoreClicked()}});return n});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/ItemView.js' */
define("jira/projects/release/item-view",["jira/projects/abstract-list/item-view","jquery","jira/projects/libs/marionette","jira/projects/abstract-model/submit-model-states","jira/ajs/ajax/ajax-util","jira-project-config/utils","jira/projects/release/version-adapter"],function(e,t,i,r,n,s,a){"use strict";function o(e){var t;return t=404===e.readyState?"Version of such name does not exist":n.getErrorMessageFromXHR(e),AJS.escapeHtml(t)}var l=JIRA.Admin.Version.DeleteForm,c=JIRA.Admin.Version.ReleaseForm,u=e.extend({template:JIRA.Projects.Release.Templates.row,ui:_.extend({},e.prototype.ui,{dragHandle:".versions-table__handle .aui-icon",progressbar:".progressbar",deleteLink:".project-config-operations-delete",releaseversionLink:".project-config-operations-release",unreleaseversionLink:".project-config-operations-unrelease",archiveversionLink:".project-config-operations-archive",unarchiveversionLink:".project-config-operations-unarchive"}),modelEvents:_.extend({},e.prototype.modelEvents,{"retry-delete":"_deleteItemRetry","retry-update":"_updateItemRetry"}),outterEvents:{"click @ui.deleteLink":"deleteItem","click @ui.releaseversionLink":"release","click @ui.unreleaseversionLink":"unrelease","click @ui.archiveversionLink":"archive","click @ui.unarchiveversionLink":"unarchive"},onRender:function(){this.listenToElements(this.outterEvents),this.unwrapTemplate(),this.initializeProgressDialog()},_discardOperation:function(e){e.preventDefault(),this.model.discard(),this.flag&&this.flag.close()},deleteItem:function(e){e.preventDefault(),this._deletePerform()},_deleteItemRetry:function(){this.model.set("state",r.IN_PROGRESS_ERROR),this.model.destroy(this.model.lastDestroyOptions)},_deletePerform:function(){this._showLoading();var e=this.model.detailsSync();e.then(function(){s.openDialogForRow(l,this,"version-"+this.model.get("id")+"-delete-dialog",{width:700})}.bind(this)).fail(function(e){this.model.set("state",r.ERROR_DELETE),this.model.set("errorMsg",o(e))}.bind(this),this._hideLoading.bind(this))},_updateItemRetry:function(){this._saveChanges(this.model.lastSaveAttributes)},_saveChanges:function(e){this.model.save(e).done(function(){setTimeout(function(){this.model.get("state")===r.SUCCESSFUL&&this.model.set("state",r.READY)}.bind(this),5e3)}.bind(this))},release:function(e){e.preventDefault(),this._releasePerform()},_releasePerform:function(){var e=this.model,i=new a(e),r=s.openDialogForRow(c,i,"version-release-dialog");return t(r).on("Dialog.hide",function(){var t=this.$form.serializeObject(),i=t.moveUnfixedIssuesTo;if(i){var r=e.collection.get(i);r&&r.detailsSync().always(function(){JIRA.trace("jira.version.release.reload.finished")})}}),r},unrelease:function(e){e.preventDefault(),this._unreleasePerform()},_unreleasePerform:function(){this._saveChanges({released:!1})},archive:function(e){e.preventDefault(),this._archivePerform()},_archivePerform:function(){this._saveChanges({archived:!0})},unarchive:function(e){e.preventDefault(),this._unarchivePerform()},_unarchivePerform:function(){this._saveChanges({archived:!1})},initializeProgressDialog:function(){var e=this,i=AJS.InlineDialog(this.ui.progressbar,"version-progress-"+this.cid,function(e,r,n){var s=AJS.$(r),a=s.closest("tr"),o=a.find("td.versions-table__name a"),l=[],c=0;return s.find(".progressbar__entry").each(function(e,i){var r=t(i),n=+r.attr("data-count");c+=+n,l.push({name:r.attr("data-title"),type:r.attr("data-type"),url:r.attr("data-url"),count:n})}),e.html(JIRA.Projects.Release.Templates.progressBarDialog({name:o.text(),url:o.attr("href"),totalCount:c,entries:l})),n(),i.refresh(),!1},{gravity:"w",autoWidth:!0,onHover:!0,hideDelay:500});i.on("click","a",function(){e.trigger("progressDialogClicked")})}});return u});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/VersionAdapter.js' */
define("jira/projects/release/version-adapter",["backbone","jquery","jira/projects/abstract-model/submit-model-states","jira/ajs/ajax/ajax-util"],function(e,t,o,s){"use strict";var r=function(t){_.extend(this,e.Events),this._backboneModel=t,this.model=this};return r.RELEASE_SUCCESS_EVENT="version.model.save.success",r.RELEASE_ERROR_EVENT="version.model.save.error",r.prototype.getUnresolvedIssueCount=function(e){return this._backboneModel.getUnresolvedIssueCount(e),this},r.prototype.getMoveVersionsJSON=function(){return this._backboneModel.getMoveVersionsJSON()},r.prototype.toJSON=function(){return this._backboneModel.toJSON()},r.prototype.get=function(e){if("releaseDate"!==e)return this._backboneModel.get(e);var t=this._backboneModel.get("releaseDate");return t?t.iso:void 0},r.prototype.save=function(n,a){this._backboneModel.lastSaveAttributes=_.clone(n),a=a||{};var i=a.error,c=a.success,l=t.Deferred();return e.Model.prototype.save.call(this._backboneModel,[],{attrs:n}).done(function(e){l.resolve(),this._backboneModel.set("state",o.SUCCESSFUL),this._backboneModel.addStateTimeout(o.SUCCESSFUL,o.READY),c&&(c.call(this,this,e),this.trigger(r.RELEASE_SUCCESS_EVENT,n))}.bind(this)).fail(function(e){if(l.reject(e),400!=e.status&&this._backboneModel.set("state",o.ERROR_UPDATE),this._backboneModel.set("errorMsg",AJS.escapeHtml(s.getErrorMessageFromXHR(e))),i){var n=t.parseJSON(e.responseText||e.data);i.call(this._backboneModel,this._backboneModel,n,e),this.trigger(r.RELEASE_ERROR_EVENT,n)}}.bind(this)),l},r.prototype.render=function(){this._backboneModel.detailsSync()},r});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/ItemCollectionView.js' */
define("jira/projects/release/item-collection-view",["jquery","underscore","jira/projects/abstract-list/item-collection-view","jira/projects/release/item-view","jira/projects/release/empty-item-view"],function(e,i,t,r,c){"use strict";return t.extend({childView:r,emptyView:c})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/TableLayoutView.js' */
define("jira/projects/release/table-layout-view",["jira/projects/abstract-list/table-layout-view","jira/projects/release/item-collection-view","jira/projects/abstract-model/submit-model-states","jquery"],function(e,t,r,i){"use strict";var o=e.extend({template:JIRA.Projects.Release.Templates.tableLayout,ItemCollectionView:t,onRender:function(){e.prototype.onRender.apply(this,arguments),this.makeSortable()},makeSortable:function(){var e=this.$el.find("tbody.items"),t=!1;e.sortable({placeholder:{element:function(e){return i('<tr class="item-placeholder"><td colspan="'+e.find("td").length+'"></td></tr>').css("height",e.height()+"px")[0]},update:function(e,t){}},handle:".versions-table__handle",axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8e3,update:function(i,o){if(t)return e.sortable("cancel"),void(t=!1);var n=this.collection.get(o.item.data("version-id")),a=this.collection.at(this.collection.indexOf(n)+1),s=this.collection.get(o.item.nextAll("tr[data-version-id]").first().data("version-id"));n&&(n.set("state",r.IN_PROGRESS),n.sync("move",s,{}).then(function(){JIRA.trace("jira.version.reorder.success")}).fail(function(){this.reorder(n,a),JIRA.trace("jira.version.reorder.failure")}.bind(this)).always(function(){n.set("state",r.READY),JIRA.trace("jira.version.reorder.finished")}),this.reorder(n,s))}.bind(this),helper:function(e,t){var r=t.find("td"),o=t.clone();return o=o.appendTo("body").wrap('<table class="aui dynamic-table versions-table versions-table__readonly"><tbody class="items"></tbody></table>').parent().parent().css("left",t.offset().left+"px"),o.find("td").each(function(e,t){i(t).css("width",i(r[e]).width()+"px")}),o}}),i(document).keyup(function(r){r.keyCode===i.ui.keyCode.ESCAPE&&(t=!0,e.sortable("cancel"),t=!1)}),this.listenTo(this.collection,"add remove destroy",function(t,r){var i=e.data("sortable");i&&(i.refresh(),i.helper&&i._setContainment())})},reorder:function(e,t){var r=i(window).scrollTop();this.collection.trigger("reorder",e,t),i(window).scrollTop(r)}});return o});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/MergeView.js' */
define("jira/projects/release/merge-view",["jira/projects/libs/marionette","jira/dialog/form-dialog","jira/ajs/select/multi-select","jquery"],function(e,i,t,r){"use strict";var n=e.ItemView.extend({template:JIRA.Projects.Release.Templates.merge,ui:{mergeButton:"#versions-merge"},onRender:function(){this.ui.mergeButton.on("click",this.mergeVersions.bind(this))},initialize:function(e){this.pageableItems=e.pageableItems,this.isProjectAdmin=!!e.isProjectAdmin},serializeData:function(){return{isProjectAdmin:this.isProjectAdmin,versionsSize:this.pageableItems.originalCollection.length}},mergeVersions:function(e){e.preventDefault();var n=new JIRA.Admin.Version.MergeForm({collection:this.pageableItems.originalCollection}),o=function(e){return e.idsToMerge?e.idsToMerge=Array.isArray(e.idsToMerge)?e.idsToMerge:[e.idsToMerge]:e.idsToMerge=[],e},s=new i({id:"versionsMergeDialog",content:function(e){n.render(function(i){e(i)})},submitHandler:function(e){var i=o(this.$form.serializeObject());s.$popup.find("#idsToMerge + .error").length>0?(s.hideFooterLoadingIndicator(),s.$popup.find(".aui-button:disabled").removeAttr("disabled")):0===i.idsToMerge.length?s.hide():n.submit(i,function(){s.hide()}),e.preventDefault()}});return s.onContentReady(function(){var e=r("#versionsMergeDialog select[multiple]");new t({element:e,itemAttrDisplayed:"label"})}),s.show(),s}});return n});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/SearchLayoutView.js' */
define("jira/projects/release/searchlayoutview",["jira/projects/libs/marionette","backbone","jira/projects/page/release/view/filter","jira/projects/release/noversionsitemview","jira/projects/release/table-layout-view","jira/projects/release/merge-view","jira/projects/release/config-data-view"],function(e,i,t,n,r,o,s){"use strict";var a=e.LayoutView.extend({template:JIRA.Projects.Release.Templates.searchLayout,regions:{submitRegion:"#submit-container",filterRegion:"#filter-container",mainRegion:"#content-container",mergeRegion:"#merge-container",configDataRegion:"#config-data-container"},initialize:function(e){this.filter=e.filter,this.pageableItems=e.pageableItems,this.releaseLearnMoreUrl=e.releaseLearnMoreUrl,this.submitController=e.submitController,this.configDataModel=e.configDataModel,this.listenTo(this.pageableItems,"collectionChanged",this._renderMainRegion),this.isProjectAdmin=e.isProjectAdmin},serializeData:function(){return{isProjectAdmin:this.isProjectAdmin}},onRender:function(){this.submitController.displaySubmitView()&&this.submitRegion.show(this.submitController.showView()),this._renderMainRegion()},_renderMainRegion:function(){if(0===this.pageableItems.originalCollection.length)this.mainRegion.show(new n({model:new i.Model({learnMoreUrl:this.releaseLearnMoreUrl})})),this.filterRegion.empty(),this.filter.emptyContainsField(),this.mergeRegion.empty();else{this.filterRegion.show(new t({model:this.filter,isProjectAdmin:this.isProjectAdmin})),this.listenTo(this,"filterChanged",function(){this.filterRegion.currentView.render()});var e=new r({submitController:this._submitController,collection:this.pageableItems});this.mainRegion.show(e),this.mainRegion.currentView.on("childview:progressDialogClicked",function(){this.trigger("progressDialogClicked")}.bind(this));var a=new o({pageableItems:this.pageableItems,isProjectAdmin:this.isProjectAdmin});this.mergeRegion.show(a)}var l=new s({model:this.configDataModel});this.configDataRegion.show(l)}});return a});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/ConfigDataView.js' */
define("jira/projects/release/config-data-view",["jira/projects/libs/marionette"],function(e){"use strict";var t=e.ItemView.extend({template:JIRA.Projects.Release.Templates.calendarConfiguration});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/ConfigDataModel.js' */
define("jira/projects/release/config-data-model",["backbone","jira/projects/release/calendar-params-data"],function(e,a){"use strict";return e.Model.extend({defaults:{ifFormat:a.ifFormat}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/ReleasePageApp.js' */
define("jira/projects/page/release/release-page-app",["jira/projects/libs/marionette","jira/api/projects","jira/data/local-storage","wrm/data","backbone","jquery","jira/projects/release/searchlayoutview","jira/projects/release/submit-controller","jira/projects/release/pageable-versions-collection","jira/projects/release/filter-model","jira/projects/abstract-list/submit-model-events","jira/projects/release/config-data-model","jira/dialog/form-dialog","jira/util/events"],function(e,t,r,a,i,o,s,n,l,c,g,u,p,m){"use strict";function j(){return void 0!==t.getCurrentProjectId()}var d=a.claim("com.atlassian.jira.projects.page.release:projectAdmin"),f=new e.Application;return f.on("start",function(b){function R(e){try{r.setItem(I,e)}catch(e){console.warn(e)}}function v(){f.trigger("navigate")}if(j()){var A=t.getCurrentProjectId(),I="jira-projects:release-page-status-"+A,w=o("head");w.append(o("<meta>").attr("name","projectKey").attr("content",t.getCurrentProjectKey())),w.append(o("<meta>").attr("name","projectId").attr("content",t.getCurrentProjectId()));var P=b.container,y=a.claim("com.atlassian.jira.projects.page.release:learnMoreUrl");f.pageableItems=new l(null,{data:b.data}),f.filter=new c({pageableCollection:f.pageableItems,status:"unreleased",contains:""}),f.filter.filterCollection(),f.filter.on("change:status",function(e,t){R(t)}),f.pageableItems.filter=f.filter,f.configDataModel=new u,f.submitController=new n({pageableItems:f.pageableItems,isProjectAdmin:d}),f.addRegions({mainRegion:new e.Region({el:P})}),f.mainRegion.on("show",function(){AJS.populateParameters(),f.trigger("mainRegionShown")}),f.mainRegion.show(new s({filter:f.filter,pageableItems:f.pageableItems,releaseLearnMoreUrl:y,submitController:f.submitController,isProjectAdmin:d,configDataModel:f.configDataModel})),f.mainRegion.currentView.on("progressDialogClicked",function(){f.trigger("progressDialogClicked")}),f.mainRegion.currentView.on("navigate",v),f.router=new JIRA.Projects.AbstractList.Router,f.router.on("route:any",function(){var e=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",!0)||"unreleased",t=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("contains",!0)||"";+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("page",!0)||1;f.filter.set("status",e,{silent:!0}),R(e),f.filter.set("contains",t,{silent:!0}),f.filter.filterCollection(),f.mainRegion.currentView.trigger("filterChanged")}),f.filter.on("navigate",v),f.router.on("route:any",v);try{var h=r.getItem(I);!JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",!0)&&j()&&h&&(f.filter.set("status",h,{silent:!0}),JIRA.Projects.AbstractList.NavigationUtils.append("status",h))}catch(e){console.warn(e)}i.history&&i.History&&!i.History.started&&i.history.start({root:JIRA.Projects.AbstractList.NavigationUtils.getBackboneHistoryRoot(),pushState:JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported}),m.bind(g.SERVER_ERROR,function(e,t){var r=o("#project-config-error-console");t&&t.errorMessages&&(r.empty(),new p({id:"server-error-dialog",content:function(e){e(JIRA.Templates.Common.serverErrorDialog({message:t.errorMessages[0]}))}}).show())})}}),f});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = '/page/project/release/release-page-data.js' */
define("jira/projects/page/release/release-page-data",["jquery","jira/api/projects","jira/featureflags/feature-manager","jira/ajs/ajax/smart-ajax","wrm/data","wrm/context-path"],function(e,r,a,t,s,i){"use strict";var n=new e.Deferred;if(a.isFeatureEnabled("jira.sidebar.components.inlineversions"))try{n.resolve(s.claim("com.atlassian.jira.projects.page.release:versions"))}catch(e){n.reject("The data could not be obtained. This may be a temporary glitch or the server may be down.")}else e.ajax({type:"GET",url:i()+"/rest/projects/1.0/project/"+r.getCurrentProjectKey()+"/release/allversions",contentType:"application/json",timeout:12e4}).then(function(e){n.resolve(e)}).fail(function(e){n.reject(t.buildSimpleErrorContent(e))});return n.promise()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/babel-polyfill.js' */
!function(t,n,r){"use strict";!function(t){function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r={};n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:e})},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=64)}([function(t,n,e){var o=e(9),i=e(23),u=e(18),c=e(32),f=e(27),a=function(t,n,e){var s,l,p,h,v=t&a.F,y=t&a.G,g=t&a.S,b=t&a.P,d=t&a.B,x=y?o:g?o[n]||(o[n]={}):(o[n]||{}).prototype,m=y?i:i[n]||(i[n]={}),O=m.prototype||(m.prototype={});y&&(e=n);for(s in e)l=!v&&x&&x[s]!==r,p=(l?x:e)[s],h=d&&l?f(p,o):b&&"function"==typeof p?f(Function.call,p):p,x&&c(x,s,p,t&a.U),m[s]!=p&&u(m,s,h),b&&O[s]!=p&&(O[s]=p)};o.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(40)("wks"),o=r(26),i=r(9).Symbol,u="function"==typeof i;(t.exports=function(t){return e[t]||(e[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=e},function(t,n,r){var e=r(16);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(21),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},function(t,n,r){t.exports=!r(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(0),o=r(6),i=r(16),u=/"/g,c=function(t,n,r,e){var o=String(i(t)),c="<"+n;return""!==r&&(c+=" "+r+'="'+String(e).replace(u,"&quot;")+'"'),c+">"+o+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(c),e(e.P+e.F*o(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(28),o=r(16);t.exports=function(t){return e(o(t))}},function(t,r){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof n&&(n=e)},function(t,n,r){var e=r(15),o=r(51),i=r(24),u=Object.defineProperty;n.f=r(5)?Object.defineProperty:function(t,n,r){if(e(t),n=i(n,!0),e(r),o)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(6);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(0),o=r(23),i=r(6);t.exports=function(t,n){var r=(o.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*i(function(){r(1)}),"Object",u)}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,e){var o=e(1)("unscopables"),i=Array.prototype;i[o]==r&&e(18)(i,o,{}),t.exports=function(t){i[o][t]=!0}},function(t,n,r){var e=r(3);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){if(t==r)throw TypeError("Can't call method on  "+t);return t}},function(t,n,e){var o=e(27),i=e(28),u=e(2),c=e(4),f=e(50);t.exports=function(t,n){var e=1==t,a=2==t,s=3==t,l=4==t,p=6==t,h=5==t||p,v=n||f;return function(n,f,y){for(var g,b,d=u(n),x=i(d),m=o(f,y,3),O=c(x.length),S=0,j=e?v(n,O):a?v(n,0):r;O>S;S++)if((h||S in x)&&(g=x[S],b=m(g,S,d),t))if(e)j[S]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return S;case 2:j.push(g)}else if(l)return!1;return p?-1:s||l?l:j}}},function(t,n,r){var e=r(10),o=r(25);t.exports=r(5)?function(t,n,r){return e.f(t,n,o(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(54),o=r(44);t.exports=Object.keys||function(t){return e(t,o)}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(31),o=r(25),i=r(8),u=r(24),c=r(13),f=r(51),a=Object.getOwnPropertyDescriptor;n.f=r(5)?a:function(t,n){if(t=i(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return o(!e.f.call(t,n),t[n])}},function(n,r){var e=n.exports={version:"2.5.1"};"number"==typeof t&&(t=e)},function(t,n,r){var e=r(3);t.exports=function(t,n){if(!e(t))return t;var r,o;if(n&&"function"==typeof(r=t.toString)&&!e(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!e(o=r.call(t)))return o;if(!n&&"function"==typeof(r=t.toString)&&!e(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(t===r?"":t,")_",(++e+o).toString(36))}},function(t,n,e){var o=e(19);t.exports=function(t,n,e){if(o(t),n===r)return t;switch(e){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,o){return t.call(n,r,e,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),o=Math.max,i=Math.min;t.exports=function(t,n){return t=e(t),t<0?o(t+n,0):i(t,n)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(9),o=r(18),i=r(13),u=r(26)("src"),c=Function.toString,f=(""+c).split("toString");r(23).inspectSource=function(t){return c.call(t)},(t.exports=function(t,n,r,c){var a="function"==typeof r;a&&(i(r,"name")||o(r,"name",n)),t[n]!==r&&(a&&(i(r,u)||o(r,u,t[n]?""+t[n]:f.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:o(t,n,r):(delete t[n],o(t,n,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[u]||c.call(this)})},function(t,n,r){var e=r(26)("meta"),o=r(3),i=r(13),u=r(10).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(6)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},p=function(t,n){if(!i(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},h=function(t){return a&&v.NEED&&f(t)&&!i(t,e)&&s(t),t},v=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:p,onFreeze:h}},function(t,n){t.exports=!1},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(29);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(13),o=r(2),i=r(43)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),e(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports={}},function(t,n,r){t.exports=r(34)||!r(6)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(9)[t]})},function(t,n,r){var e=r(9),o=e["__core-js_shared__"]||(e["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){var e=r(10).f,o=r(13),i=r(1)("toStringTag");t.exports=function(t,n,r){t&&!o(t=r?t:t.prototype,i)&&e(t,i,{configurable:!0,value:n})}},function(t,n,r){var e=r(8),o=r(4),i=r(30);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=o(f.length),s=i(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(40)("keys"),o=r(26);t.exports=function(t){return e[t]||(e[t]=o(t))}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,e){var o=e(15),i=e(55),u=e(44),c=e(43)("IE_PROTO"),f=function(){},a=function(){var t,n=e(52)("iframe"),r=u.length;for(n.style.display="none",e(56).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;r--;)delete a.prototype[u[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f.prototype=o(t),e=new f,f.prototype=null,e[c]=t):e=a(),n===r?e:i(e,n)}},function(t,n,r){var e=r(54),o=r(44).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,o)}},function(t,n,r){var e=r(95),o=r(16);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(t))}},function(t,n,r){var e=r(1)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){var e=r(10),o=r(25);t.exports=function(t,n,r){n in t?e.f(t,n,o(0,r)):t[n]=r}},function(t,n,r){var e=r(126);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){t.exports=!r(5)&&!r(6)(function(){return 7!=Object.defineProperty(r(52)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(3),o=r(9).document,i=e(o)&&e(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,r){n.f=r(1)},function(t,n,r){var e=r(13),o=r(8),i=r(42)(!1),u=r(43)("IE_PROTO");t.exports=function(t,n){var r,c=o(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~i(a,r)||a.push(r));return a}},function(t,n,r){var e=r(10),o=r(15),i=r(20);t.exports=r(5)?Object.defineProperties:function(t,n){o(t);for(var r,u=i(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(9).document;t.exports=e&&e.documentElement},function(t,n,r){var e=r(8),o=r(46).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?c(t):o(e(t))}},function(t,n,e){var o=e(29),i=e(1)("toStringTag"),u="Arguments"==o(function(){return arguments}()),c=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,e,f;return t===r?"Undefined":null===t?"Null":"string"==typeof(e=c(n=Object(t),i))?e:u?o(n):"Object"==(f=o(n))&&"function"==typeof n.callee?"Arguments":f}},function(t,n,e){var o=e(21),i=e(16);t.exports=function(t){return function(n,e){var u,c,f=String(i(n)),a=o(e),s=f.length;return a<0||a>=s?t?"":r:(u=f.charCodeAt(a),u<55296||u>56319||a+1===s||(c=f.charCodeAt(a+1))<56320||c>57343?t?f.charAt(a):u:t?f.slice(a,a+2):c-56320+(u-55296<<10)+65536)}}},function(t,n,e){var o=e(34),i=e(0),u=e(32),c=e(18),f=e(13),a=e(38),s=e(101),l=e(41),p=e(37),h=e(1)("iterator"),v=!([].keys&&"next"in[].keys()),y=function(){return this};t.exports=function(t,n,e,g,b,d,x){s(e,n,g);var m,O,S,j=function(t){if(!v&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",w="values"==b,_=!1,A=t.prototype,F=A[h]||A["@@iterator"]||b&&A[b],E=F||j(b),k=b?w?j("entries"):E:r,M="Array"==n?A.entries||F:F;if(M&&(S=p(M.call(new t)))!==Object.prototype&&S.next&&(l(S,P,!0),o||f(S,h)||c(S,h,y)),w&&F&&"values"!==F.name&&(_=!0,E=function(){return F.call(this)}),o&&!x||!v&&!_&&A[h]||c(A,h,E),a[n]=E,a[P]=y,b)if(m={values:w?E:j("values"),keys:d?E:j("keys"),entries:k},x)for(O in m)O in A||u(A,O,m[O]);else i(i.P+i.F*(v||_),n,m);return m}},function(t,n,r){var e=r(19),o=r(2),i=r(28),u=r(4);t.exports=function(t,n,r,c,f){e(n);var a=o(t),s=i(a),l=u(a.length),p=f?l-1:0,h=f?-1:1;if(r<2)for(;;){if(p in s){c=s[p],p+=h;break}if(p+=h,f?p<0:l<=p)throw TypeError("Reduce of empty array with no initial value")}for(;f?p>=0:l>p;p+=h)p in s&&(c=n(c,s[p],p,a));return c}},function(t,n,e){function o(t,n,e,s,l,p,h,v){for(var y,g,b=l,d=0,x=!!h&&f(h,v,3);d<s;){if(d in e){if(y=x?x(e[d],d,n):e[d],g=!1,u(y)&&(g=y[a],g=g!==r?!!g:i(y)),g&&p>0)b=o(t,n,y,c(y.length),b,p-1)-1;else{if(b>=9007199254740991)throw TypeError();t[b]=y}b++}d++}return b}var i=e(36),u=e(3),c=e(4),f=e(27),a=e(1)("isConcatSpreadable");t.exports=o},function(t,n,r){var e=r(20),o=r(8),i=r(31).f;t.exports=function(t){return function(n){for(var r,u=o(n),c=e(u),f=c.length,a=0,s=[];f>a;)i.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){r(65),r(68),r(69),r(70),r(71),r(72),r(73),r(74),r(75),r(76),r(77),r(78),r(79),r(80),r(81),r(83),r(85),r(87),r(88),r(89),r(90),r(93),r(94),r(96),r(97),r(99),r(100),r(102),r(103),r(104),r(105),r(106),r(107),r(108),r(109),r(110),r(111),r(112),r(113),r(114),r(115),r(116),r(121),r(122),r(123),r(124),r(125),r(127),r(128),r(129),r(130),r(131),r(132),r(133),r(134),r(135),r(137),r(139),r(140),r(141),r(143),r(145),r(146),r(147),r(148),r(150),r(151),r(152),r(153),r(154),t.exports=r(155)},function(t,n,e){var o=e(9),i=e(13),u=e(5),c=e(0),f=e(32),a=e(33).KEY,s=e(6),l=e(40),p=e(41),h=e(26),v=e(1),y=e(53),g=e(66),b=e(67),d=e(36),x=e(15),m=e(8),O=e(24),S=e(25),j=e(45),P=e(57),w=e(22),_=e(10),A=e(20),F=w.f,E=_.f,k=P.f,M=o.Symbol,T=o.JSON,I=T&&T.stringify,W=v("_hidden"),C=v("toPrimitive"),N={}.propertyIsEnumerable,R=l("symbol-registry"),z=l("symbols"),D=l("op-symbols"),G=Object.prototype,J="function"==typeof M,K=o.QObject,U=!K||!K.prototype||!K.prototype.findChild,q=u&&s(function(){return 7!=j(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],E(t,n,r),e&&t!==G&&E(G,n,e)}:E,B=function(t){var n=z[t]=j(M.prototype);return n._k=t,n},L=J&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},Y=function(t,n,r){return t===G&&Y(D,n,r),x(t),n=O(n,!0),x(r),i(z,n)?(r.enumerable?(i(t,W)&&t[W][n]&&(t[W][n]=!1),r=j(r,{enumerable:S(0,!1)})):(i(t,W)||E(t,W,S(1,{})),t[W][n]=!0),q(t,n,r)):E(t,n,r)},Q=function(t,n){x(t);for(var r,e=b(n=m(n)),o=0,i=e.length;i>o;)Y(t,r=e[o++],n[r]);return t},$=function(t,n){return n===r?j(t):Q(j(t),n)},H=function(t){var n=N.call(this,t=O(t,!0));return!(this===G&&i(z,t)&&!i(D,t))&&(!(n||!i(this,t)||!i(z,t)||i(this,W)&&this[W][t])||n)},V=function(t,n){if(t=m(t),n=O(n,!0),t!==G||!i(z,n)||i(D,n)){var r=F(t,n);return!r||!i(z,n)||i(t,W)&&t[W][n]||(r.enumerable=!0),r}},X=function(t){for(var n,r=k(m(t)),e=[],o=0;r.length>o;)i(z,n=r[o++])||n==W||n==a||e.push(n);return e},Z=function(t){for(var n,r=t===G,e=k(r?D:m(t)),o=[],u=0;e.length>u;)!i(z,n=e[u++])||r&&!i(G,n)||o.push(z[n]);return o};J||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:r),n=function(r){this===G&&n.call(D,r),i(this,W)&&i(this[W],t)&&(this[W][t]=!1),q(this,t,S(1,r))};return u&&U&&q(G,t,{configurable:!0,set:n}),B(t)},f(M.prototype,"toString",function(){return this._k}),w.f=V,_.f=Y,e(46).f=P.f=X,e(31).f=H,e(35).f=Z,u&&!e(34)&&f(G,"propertyIsEnumerable",H,!0),y.f=function(t){return B(v(t))}),c(c.G+c.W+c.F*!J,{Symbol:M});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;tt.length>nt;)v(tt[nt++]);for(var rt=A(v.store),et=0;rt.length>et;)g(rt[et++]);c(c.S+c.F*!J,"Symbol",{for:function(t){return i(R,t+="")?R[t]:R[t]=M(t)},keyFor:function(t){if(!L(t))throw TypeError(t+" is not a symbol!");for(var n in R)if(R[n]===t)return n},useSetter:function(){U=!0},useSimple:function(){U=!1}}),c(c.S+c.F*!J,"Object",{create:$,defineProperty:Y,defineProperties:Q,getOwnPropertyDescriptor:V,getOwnPropertyNames:X,getOwnPropertySymbols:Z}),T&&c(c.S+c.F*(!J||s(function(){var t=M();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(t!==r&&!L(t)){for(var n,e,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);return n=o[1],"function"==typeof n&&(e=n),!e&&d(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!L(n))return n}),o[1]=n,I.apply(T,o)}}}),M.prototype[C]||e(18)(M.prototype,C,M.prototype.valueOf),p(M,"Symbol"),p(Math,"Math",!0),p(o.JSON,"JSON",!0)},function(t,n,r){var e=r(9),o=r(23),i=r(34),u=r(53),c=r(10).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(20),o=r(35),i=r(31);t.exports=function(t){var n=e(t),r=o.f;if(r)for(var u,c=r(t),f=i.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(0);e(e.S+e.F*!r(5),"Object",{defineProperty:r(10).f})},function(t,n,r){var e=r(0);e(e.S+e.F*!r(5),"Object",{defineProperties:r(55)})},function(t,n,r){var e=r(8),o=r(22).f;r(12)("getOwnPropertyDescriptor",function(){return function(t,n){return o(e(t),n)}})},function(t,n,r){var e=r(0);e(e.S,"Object",{create:r(45)})},function(t,n,r){var e=r(2),o=r(37);r(12)("getPrototypeOf",function(){return function(t){return o(e(t))}})},function(t,n,r){var e=r(2),o=r(20);r(12)("keys",function(){return function(t){return o(e(t))}})},function(t,n,r){r(12)("getOwnPropertyNames",function(){return r(57).f})},function(t,n,r){var e=r(3),o=r(33).onFreeze;r(12)("freeze",function(t){return function(n){return t&&e(n)?t(o(n)):n}})},function(t,n,r){var e=r(3),o=r(33).onFreeze;r(12)("seal",function(t){return function(n){return t&&e(n)?t(o(n)):n}})},function(t,n,r){var e=r(3),o=r(33).onFreeze;r(12)("preventExtensions",function(t){return function(n){return t&&e(n)?t(o(n)):n}})},function(t,n,r){var e=r(3);r(12)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(3);r(12)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(3);r(12)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(0);e(e.S+e.F,"Object",{assign:r(82)})},function(t,n,r){var e=r(20),o=r(35),i=r(31),u=r(2),c=r(28),f=Object.assign;t.exports=!f||r(6)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=o.f,l=i.f;f>a;)for(var p,h=c(arguments[a++]),v=s?e(h).concat(s(h)):e(h),y=v.length,g=0;y>g;)l.call(h,p=v[g++])&&(r[p]=h[p]);return r}:f},function(t,n,r){var e=r(0);e(e.S,"Object",{is:r(84)})},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(0);e(e.S,"Object",{setPrototypeOf:r(86).set})},function(t,n,e){var o=e(3),i=e(15),u=function(t,n){if(i(t),!o(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{r=e(27)(Function.call,e(22).f(Object.prototype,"__proto__").set,2),r(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return u(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):r),check:u}},function(t,n,r){var e=r(58),o={};o[r(1)("toStringTag")]="z",o+""!="[object z]"&&r(32)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(0),o=r(30),i=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?i(n):i(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){var e=r(0),o=r(8),i=r(4);e(e.S,"String",{raw:function(t){for(var n=o(t.raw),r=i(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){r(91)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){var e=r(0),o=r(16),i=r(6),u=r(92),c="["+u+"]",f="",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var o={},c=i(function(){return!!u[t]()||f[t]()!=f}),a=o[t]=c?n(p):u[t];r&&(o[r]=a),e(e.P+e.F*c,"String",o)},p=l.trim=function(t,n){return t=String(o(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,n,r){var e=r(0),o=r(59)(!1);e(e.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,n,e){var o=e(0),i=e(4),u=e(47),c="".endsWith;o(o.P+o.F*e(48)("endsWith"),"String",{endsWith:function(t){var n=u(this,t,"endsWith"),e=arguments.length>1?arguments[1]:r,o=i(n.length),f=e===r?o:Math.min(i(e),o),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,e){var o=e(3),i=e(29),u=e(1)("match");t.exports=function(t){var n;return o(t)&&((n=t[u])!==r?!!n:"RegExp"==i(t))}},function(t,n,e){var o=e(0),i=e(47);o(o.P+o.F*e(48)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:r)}})},function(t,n,r){var e=r(0);e(e.P,"String",{repeat:r(98)})},function(t,n,r){var e=r(21),o=r(16);t.exports=function(t){var n=String(o(this)),r="",i=e(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(n+=n))1&i&&(r+=n);return r}},function(t,n,e){var o=e(0),i=e(4),u=e(47),c="".startsWith;o(o.P+o.F*e(48)("startsWith"),"String",{startsWith:function(t){var n=u(this,t,"startsWith"),e=i(Math.min(arguments.length>1?arguments[1]:r,n.length)),o=String(t);return c?c.call(n,o,e):n.slice(e,e+o.length)===o}})},function(t,n,e){var o=e(59)(!0);e(60)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:r,done:!0}:(t=o(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){var e=r(45),o=r(25),i=r(41),u={};r(18)(u,r(1)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:o(1,r)}),i(t,n+" Iterator")}},function(t,n,r){r(7)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){r(7)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){r(7)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){r(7)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){r(7)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){r(7)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){r(7)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){r(7)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){r(7)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){r(7)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){r(7)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){r(7)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){r(7)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){var e=r(0);e(e.S,"Array",{isArray:r(36)})},function(t,n,e){var o=e(27),i=e(0),u=e(2),c=e(117),f=e(118),a=e(4),s=e(49),l=e(119);i(i.S+i.F*!e(120)(function(t){Array.from(t)}),"Array",{from:function(t){var n,e,i,p,h=u(t),v="function"==typeof this?this:Array,y=arguments.length,g=y>1?arguments[1]:r,b=g!==r,d=0,x=l(h);if(b&&(g=o(g,y>2?arguments[2]:r,2)),x==r||v==Array&&f(x))for(n=a(h.length),e=new v(n);n>d;d++)s(e,d,b?g(h[d],d):h[d]);else for(p=x.call(h),e=new v;!(i=p.next()).done;d++)s(e,d,b?c(p,g,[i.value,d],!0):i.value);return e.length=d,e}})},function(t,n,e){var o=e(15);t.exports=function(t,n,e,i){try{return i?n(o(e)[0],e[1]):n(e)}catch(n){var u=t.return;throw u!==r&&o(u.call(t)),n}}},function(t,n,e){var o=e(38),i=e(1)("iterator"),u=Array.prototype;t.exports=function(t){return t!==r&&(o.Array===t||u[i]===t)}},function(t,n,e){var o=e(58),i=e(1)("iterator"),u=e(38);t.exports=e(23).getIteratorMethod=function(t){if(t!=r)return t[i]||t["@@iterator"]||u[o(t)]}},function(t,n,r){var e=r(1)("iterator"),o=!1;try{var i=[7][e]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var r=!1;try{var i=[7],u=i[e]();u.next=function(){return{done:r=!0}},i[e]=function(){return u},t(i)}catch(t){}return r}},function(t,n,r){var e=r(0),o=r(49);e(e.S+e.F*r(6)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)o(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,e){var o=e(0),i=e(8),u=[].join;o(o.P+o.F*(e(28)!=Object||!e(11)(u)),"Array",{join:function(t){return u.call(i(this),t===r?",":t)}})},function(t,n,e){var o=e(0),i=e(56),u=e(29),c=e(30),f=e(4),a=[].slice;o(o.P+o.F*e(6)(function(){i&&a.call(i)}),"Array",{slice:function(t,n){var e=f(this.length),o=u(this);if(n=n===r?e:n,"Array"==o)return a.call(this,t,n);for(var i=c(t,e),s=c(n,e),l=f(s-i),p=Array(l),h=0;h<l;h++)p[h]="String"==o?this.charAt(i+h):this[i+h];return p}})},function(t,n,e){var o=e(0),i=e(19),u=e(2),c=e(6),f=[].sort,a=[1,2,3];o(o.P+o.F*(c(function(){a.sort(r)})||!c(function(){a.sort(null)})||!e(11)(f)),"Array",{sort:function(t){return t===r?f.call(u(this)):f.call(u(this),i(t))}})},function(t,n,r){var e=r(0),o=r(17)(0),i=r(11)([].forEach,!0);e(e.P+e.F*!i,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,n,e){var o=e(3),i=e(36),u=e(1)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=r),o(n)&&null===(n=n[u])&&(n=r)),n===r?Array:n}},function(t,n,r){var e=r(0),o=r(17)(1);e(e.P+e.F*!r(11)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,n,r){var e=r(0),o=r(17)(2);e(e.P+e.F*!r(11)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,n,r){var e=r(0),o=r(17)(3);e(e.P+e.F*!r(11)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,n,r){var e=r(0),o=r(17)(4);e(e.P+e.F*!r(11)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,n,r){var e=r(0),o=r(61);e(e.P+e.F*!r(11)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){var e=r(0),o=r(61);e(e.P+e.F*!r(11)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){var e=r(0),o=r(42)(!1),i=[].indexOf,u=!!i&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(11)(i)),"Array",{indexOf:function(t){return u?i.apply(this,arguments)||0:o(this,t,arguments[1])}})},function(t,n,r){var e=r(0),o=r(8),i=r(21),u=r(4),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(11)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=o(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,i(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){var e=r(0);e(e.P,"Array",{copyWithin:r(136)}),r(14)("copyWithin")},function(t,n,e){var o=e(2),i=e(30),u=e(4);t.exports=[].copyWithin||function(t,n){var e=o(this),c=u(e.length),f=i(t,c),a=i(n,c),s=arguments.length>2?arguments[2]:r,l=Math.min((s===r?c:i(s,c))-a,c-f),p=1;for(a<f&&f<a+l&&(p=-1,a+=l-1,f+=l-1);l-- >0;)a in e?e[f]=e[a]:delete e[f],f+=p,a+=p;return e}},function(t,n,r){var e=r(0);e(e.P,"Array",{fill:r(138)}),r(14)("fill")},function(t,n,e){var o=e(2),i=e(30),u=e(4);t.exports=function(t){for(var n=o(this),e=u(n.length),c=arguments.length,f=i(c>1?arguments[1]:r,e),a=c>2?arguments[2]:r,s=a===r?e:i(a,e);s>f;)n[f++]=t;return n}},function(t,n,e){var o=e(0),i=e(17)(5),u=!0;"find"in[]&&Array(1).find(function(){u=!1}),o(o.P+o.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:r)}}),e(14)("find")},function(t,n,e){var o=e(0),i=e(17)(6),u="findIndex",c=!0;u in[]&&Array(1)[u](function(){c=!1}),o(o.P+o.F*c,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:r)}}),e(14)(u)},function(t,n,e){var o=e(14),i=e(142),u=e(38),c=e(8);t.exports=e(60)(Array,"Array",function(t,n){this._t=c(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=r,i(1)):"keys"==n?i(0,e):"values"==n?i(0,t[e]):i(0,[e,t[e]])},"values"),u.Arguments=u.Array,o("keys"),o("values"),o("entries")},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){r(144)("Array")},function(t,n,r){var e=r(9),o=r(10),i=r(5),u=r(1)("species");t.exports=function(t){var n=e[t];i&&n&&!n[u]&&o.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,e){var o=e(0),i=e(42)(!0);o(o.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:r)}}),e(14)("includes")},function(t,n,r){var e=r(0),o=r(62),i=r(2),u=r(4),c=r(19),f=r(50);e(e.P,"Array",{flatMap:function(t){var n,r,e=i(this);return c(t),n=u(e.length),r=f(e,0),o(r,e,e,n,0,1,t,arguments[1]),r}}),r(14)("flatMap")},function(t,n,e){var o=e(0),i=e(62),u=e(2),c=e(4),f=e(21),a=e(50);o(o.P,"Array",{flatten:function(){var t=arguments[0],n=u(this),e=c(n.length),o=a(n,0);return i(o,n,n,e,0,t===r?1:f(t)),o}}),e(14)("flatten")},function(t,n,e){var o=e(0),i=e(149),u=e(8),c=e(22),f=e(49);o(o.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,e,o=u(t),a=c.f,s=i(o),l={},p=0;s.length>p;)(e=a(o,n=s[p++]))!==r&&f(l,n,e);return l}})},function(t,n,r){var e=r(46),o=r(35),i=r(15),u=r(9).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(i(t)),r=o.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(0),o=r(63)(!1);e(e.S,"Object",{values:function(t){return o(t)}})},function(t,n,r){var e=r(0),o=r(63)(!0);e(e.S,"Object",{entries:function(t){return o(t)}})},function(t,n,r){var e=r(0),o=r(2),i=r(19),u=r(10);r(5)&&e(e.P+r(39),"Object",{__defineGetter__:function(t,n){u.f(o(this),t,{get:i(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(0),o=r(2),i=r(19),u=r(10);r(5)&&e(e.P+r(39),"Object",{__defineSetter__:function(t,n){u.f(o(this),t,{set:i(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(0),o=r(2),i=r(24),u=r(37),c=r(22).f;r(5)&&e(e.P+r(39),"Object",{__lookupGetter__:function(t){var n,r=o(this),e=i(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){var e=r(0),o=r(2),i=r(24),u=r(37),c=r(22).f;r(5)&&e(e.P+r(39),"Object",{__lookupSetter__:function(t){var n,r=o(this),e=i(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})}]),"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):n.core=t}(1,1);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/underscore.js' */
(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,c=e.slice,o=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,d=e.filter,y=e.every,g=e.some,m=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?void(this._wrapped=n):new w(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.4";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;u<i;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(w.has(n,a)&&t.call(e,n[a],a,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length}if(A(n,function(c,o,l){o=a?a[--i]:--i,u?r=t.call(e,r,n[o],o,l):(r=n[o],u=!0)}),!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){if(t.call(r,n,u,i))return e=n,!0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:y&&n.every===y?n.every(t,e):(A(n,function(n,i,a){if(!(u=u&&t.call(e,n,i,a)))return r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:g&&n.some===g?n.some(t,e):(A(n,function(n,i,a){if(u||(u=t.call(e,n,i,a)))return r}),!!u)};w.contains=w.include=function(n,t){return null!=n&&(m&&n.indexOf===m?n.indexOf(t)!=-1:E(n,function(n){return n===t}))},w.invoke=function(n,t){var r=c.call(arguments,2),e=w.isFunction(t);return w.map(n,function(n){return(e?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.where=function(n,t,r){return w.isEmpty(t)?r?null:[]:w[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.findWhere=function(n,t){return w.where(n,t,!0)},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-(1/0);var e={computed:-(1/0),value:-(1/0)};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var k=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=k(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(r<e||void 0===e)return-1}return n.index<t.index?-1:1}),"value")};var F=function(n,t,r,e){var u={},i=k(t||w.identity);return A(n,function(t,a){var c=i.call(r,t,a,n);e(u,c,t)}),u};w.groupBy=function(n,t,r){return F(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return F(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;i<a;){var c=i+a>>>1;r.call(e,n[c])<u?i=c+1:a=c}return i},w.toArray=function(n){return n?w.isArray(n)?c.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){if(null!=n)return null==t||r?n[0]:c.call(n,0,t)},w.initial=function(n,t,r){return c.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,t,r){if(null!=n)return null==t||r?n[n.length-1]:c.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return c.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return R(n,t,[])},w.without=function(n){return w.difference(n,c.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(o.apply(e,arguments))},w.intersection=function(n){var t=c.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=o.apply(e,c.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=c.call(arguments),t=w.max(w.pluck(n,"length")),r=new Array(t),e=0;e<t;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;e<u;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=r<0?Math.max(0,u+r):r}if(m&&n.indexOf===m)return n.indexOf(t,r);for(;e<u;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);u<e;)i[u++]=n,n+=r;return i},w.bind=function(n,t){if(n.bind===j&&j)return j.apply(n,c.call(arguments,1));var r=c.call(arguments,2);return function(){return n.apply(t,r.concat(c.call(arguments)))}},w.partial=function(n){var t=c.call(arguments,1);return function(){return n.apply(this,t.concat(c.call(arguments)))}},w.bindAll=function(n){var t=c.call(arguments,1);return 0===t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=c.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(c.call(arguments,1)))},w.throttle=function(n,t){var r,e,u,i,a=0,c=function(){a=new Date,u=null,i=n.apply(r,e)};return function(){var o=new Date,l=t-(o-a);return r=this,e=arguments,l<=0?(clearTimeout(u),u=null,a=o,i=n.apply(r,e)):u||(u=setTimeout(c,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,c=function(){e=null,r||(u=n.apply(i,a))},o=r&&!e;return clearTimeout(e),e=setTimeout(c,t),o&&(u=n.apply(i,a)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return n<=0?t():function(){if(--n<1)return t.apply(this,arguments)}},w.keys=_||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(c.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=o.apply(e,c.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=o.apply(e,c.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(c.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var a=0,c=!0;if("[object Array]"==u){if(a=n.length,c=a==t.length)for(;a--&&(c=S(n[a],t[a],r,e)););}else{var o=n.constructor,f=t.constructor;if(o!==f&&!(w.isFunction(o)&&o instanceof o&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(a++,!(c=w.has(t,s)&&S(n[s],t[s],r,e))))break;if(c){for(s in t)if(w.has(t,s)&&!a--)break;c=!a}}return r.pop(),e.pop(),c};w.isEqual=function(n,t){return S(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=x||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),"function"!=typeof/./&&(w.isFunction=function(n){return"function"==typeof n}),w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return void 0===n},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;u<n;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};I.unescape=w.invert(I.escape);var M={escape:new RegExp("["+w.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+w.keys(I.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(M[n],function(t){return I[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),D.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=++N+"";return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){var e;r=w.defaults({},r,w.templateSettings);var u=new RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,c){return a+=n.slice(i,c).replace(B,function(n){return"\\"+q[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=c+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(c){throw c.source=a,c}if(t)return e(t,w);var o=function(n){return e.call(this,n,w)};return o.source="function("+(r.variable||"obj")+"){\n"+a+"}",o},w.chain=function(n){return w(n).chain()};var D=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/amd-shim/underscore.js' */
define("_",function(){return window._});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/setFocus.js' */
JIRA.setFocus=function(){var e="form.dont-default-focus",t="input:not(#issue-filter-submit), select, textarea, button, a.cancel",n=["div.aui-popup-content:visible","form.aui:visible","form:visible"],o=[],i=function(e,t,n,o){var i=!1;return AJS.$(t,e).not(n).find(o).each(function(){var e=AJS.$(this);if(e.is(":visible:enabled, a:visible"))return e.focus(),e.is(":text, :password, textarea")&&(e.is(".focus-select-end")?e.setCaretToPosition(e[0].value.length):e.setSelectionRange(0,e[0].value.length)),i=!0,!1}),i},s=function(){for(var e=0,t=o[o.length-1];!i(t.context,t.parentElementSelectors[e],t.excludeParentSelector,t.focusElementSelector)&&e<t.parentElementSelectors.length;)e++};return{FocusConfiguration:function(){this.context=document,this.excludeParentSelector=e,this.focusElementSelector=t,this.parentElementSelectors=n.slice(0),this.focusNow=s},triggerFocus:function(){0==o.length&&o.push(new this.FocusConfiguration),o[o.length-1].focusNow()},pushConfiguration:function(e){o.push(e)},popConfiguration:function(){o.pop()}}}(),jQuery(function(){JIRA.setFocus.triggerFocus()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/DateReset.js' */
Date.prototype.__msh_oldSetFullYear&&(Date.prototype.setFullYear=Date.prototype.__msh_oldSetFullYear);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/Namespaces.js' */
"undefined"==typeof GH&&(window.GH={}),"undefined"==typeof GH.view&&(GH.view={}),"undefined"==typeof GH.view.model&&(GH.view.model={}),"undefined"==typeof GH.Global&&(GH.Global={}),"undefined"==typeof GH.Dialog&&(GH.Dialog={}),"undefined"==typeof GH.Dialogs&&(GH.Dialogs={}),"undefined"==typeof GH.State&&(GH.State={}),"undefined"==typeof GH.XBoard&&(GH.XBoard={}),"undefined"==typeof GH.RapidBoard&&(GH.RapidBoard={}),"undefined"==typeof GH.HelpPaths&&(GH.HelpPaths={}),"undefined"==typeof GH.JQLAutoComplete&&(GH.JQLAutoComplete={}),"undefined"==typeof GH.RapidBoard.Util&&(GH.RapidBoard.Util={}),"undefined"==typeof GH.NumberFormat&&(GH.NumberFormat={}),"undefined"==typeof GH.UrlFormat&&(GH.UrlFormat={}),AJS.format=function(e){var t=/'(?!')/g,n=/^\d+$/,r=/^(\d+),number$/,a=/^(\d+),choice,(.+)/,o=/^\s*(-?\d+)([#<])(.*)/,i=function(e,t){var i,f,d="";if(i=e.match(n))d=t.length>++e?t[e]:"";else if(i=e.match(r))f=GH.NumberFormat&&GH.NumberFormat.format||_.identity,d=t.length>++i[1]?f(t[i[1]]):"";else if(i=e.match(a)){var l=t.length>++i[1]?t[i[1]]:null;if(null!==l){for(var u=i[2].split("|"),p=null,G=0;G<u.length;G++){var H=u[G].match(o);if(!H){console.log("Bad formatting of message: "+e);break}var s=parseInt(H[1],10);if(l<s){if(p){d=p;break}d=H[3];break}if(l==s&&"#"==H[2]){d=H[3];break}G==u.length-1&&(d=H[3]),p=H[3]}var m=[d].concat(Array.prototype.slice.call(t,1));d=AJS.format.apply(AJS,m)}}return d},f=function(e){for(var t=!1,n=-1,r=0,a=0;a<e.length;a++){var o=e.charAt(a);if("'"==o&&(t=!t),!t)if("{"===o)0===r&&(n=a),r++;else if("}"===o&&r>0&&(r--,0===r)){var i=[];return i.push(e.substring(0,a+1)),i.push(e.substring(0,n)),i.push(e.substring(n+1,a)),i}}return null},d=function(e){for(var n=arguments,r="",a=f(e);a;)e=e.substring(a[0].length),r+=a[1].replace(t,""),r+=i(a[2],n),a=f(e);return r+=e.replace(t,"")};return d.apply(AJS,arguments)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/SimpleClick.js' */
!function(){"use strict";var e=require("jquery");e.event.special.simpleClick={add:function(c){c._clickHandler=function(e){if(!e.ctrlKey&&!e.metaKey&&!e.shiftKey)return c.handler.apply(this,arguments)},e(this).on("click",c.selector,c._clickHandler)},remove:function(c){e(this).off("click",c.selector,c._clickHandler)}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/PromiseKeeper.js' */
!function(){"use strict";var n=require("jquery"),t=function i(t){return this instanceof i?(this._parent=t,this._doneCallbacks=n.Callbacks(),this._failCallbacks=n.Callbacks(),void(this._alwaysCallbacks=n.Callbacks())):new i};t.prototype={add:function(t){var i=n.Deferred();i.original=t;var e=this._getPending();this._abortIfPending(e),this._setPending(i);var a=this;return t.done(function(){i===a._getPending()&&(i.resolveWith(a,arguments),a._doneCallbacks.fireWith(a,arguments))}),t.fail(function(){i===a._getPending()&&(i.rejectWith(a,arguments),a._failCallbacks.fireWith(a,arguments))}),t.always(function(){i===a._getPending()&&a._alwaysCallbacks.fireWith(a,arguments)}),i.promise()},done:function(n){return this._doneCallbacks.add(n),this},fail:function(n){return this._failCallbacks.add(n),this},always:function(n){return this._alwaysCallbacks.add(n),this},reset:function(){this._abortIfPending(this._getPending()),this._setPending(null)},sub:function(){return new t(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(n){this._parent?this._parent._setPending(n):this._pending=n},_abortIfPending:function(t){t&&"pending"===t.state()&&(t.reject("abort"),n.isFunction(t.original.abort)&&t.original.abort())}},GH.PromiseKeeper=t}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/history.adapter.jquery.js' */
!function(n,i){var e=n.History=n.History||{},r=n.jQuery;if("undefined"!=typeof e.Adapter)throw new Error("History.js Adapter has already been loaded...");e.Adapter={bind:function(n,i,e){r(n).bind(i,e)},trigger:function(n,i){r(n).trigger(i)},onDomLoad:function(n){r(n)}},"undefined"!=typeof e.init&&e.init()}(window);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/history.js' */
!function(e,t){"use strict";var a=e.console||t,r=e.document,n=e.navigator,o=e.amplify||!1,i=e.setTimeout,s=e.clearTimeout,u=e.setInterval,l=e.JSON,d=e.History=e.History||{},c=e.history;if(l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode,"undefined"!=typeof d.init)throw new Error("History.js Core has already been loaded...");d.init=function(){return"undefined"!=typeof d.Adapter&&("undefined"!=typeof d.initCore&&d.initCore(),"undefined"!=typeof d.initHtml4&&d.initHtml4(),!0)},d.initCore=function(){if("undefined"!=typeof d.initCore.initialized)return!1;if(d.initCore.initialized=!0,d.options=d.options||{},d.options.hashChangeInterval=d.options.hashChangeInterval||100,d.options.safariPollInterval=d.options.safariPollInterval||500,d.options.doubleCheckInterval=d.options.doubleCheckInterval||500,d.options.storeInterval=d.options.storeInterval||1e3,d.options.busyDelay=d.options.busyDelay||250,d.options.debug=d.options.debug||!1,d.options.initialTitle=d.options.initialTitle||r.title,d.debug=function(){d.options.debug&&d.log.apply(d,arguments)},d.log=function(){var e,t,n,o=!("undefined"==typeof a||"undefined"==typeof a.log||"undefined"==typeof a.log.apply),i=r.getElementById("log");if(o){var s=Array.prototype.slice.call(arguments);e=s.shift(),"undefined"!=typeof a.debug?a.debug.apply(a,[e,s]):a.log.apply(a,[e,s])}else e="\n"+arguments[0]+"\n";for(t=1,n=arguments.length;t<n;++t){var u=arguments[t];if("object"==typeof u&&"undefined"!=typeof l)try{u=l.stringify(u)}catch(d){}e+="\n"+u+"\n"}return i?(i.value+=e+"\n-----\n",i.scrollTop=i.scrollHeight-i.clientHeight):o||alert(e),!0},d.getInternetExplorerMajorVersion=function(){var e=d.getInternetExplorerMajorVersion.cached="undefined"!=typeof d.getInternetExplorerMajorVersion.cached?d.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=r.createElement("div"),a=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&a[0];);return e>4&&e}();return e},d.isInternetExplorer=function(){var e=d.isInternetExplorer.cached="undefined"!=typeof d.isInternetExplorer.cached?d.isInternetExplorer.cached:Boolean(d.getInternetExplorerMajorVersion());return e},d.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(n.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(n.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8)},d.enabled=!d.emulated.pushState,d.bugs={setHash:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===n.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(n.userAgent)),safariPoll:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===n.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(n.userAgent)),ieDoubleCheck:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<7)},d.isEmptyObject=function(e){for(var t in e)return!1;return!0},d.cloneObject=function(e){var t,a;return e?(t=l.stringify(e),a=l.parse(t)):a={},a},d.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(e+=":"+r.location.port),e+="/"},d.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,a="";return 1===e.length&&(t=e[0],a=t.href.replace(/[^\/]+$/,"")),a=a.replace(/\/+$/,""),a&&(a+="/"),a},d.getBaseUrl=function(){var e=d.getBaseHref()||d.getBasePageUrl()||d.getRootUrl();return e},d.getPageUrl=function(){var e=d.getState(!1,!1),t=(e||{}).url||r.location.href,a=t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,a){return/\./.test(e)?e:e+"/"});return a},d.getBasePageUrl=function(){var e=r.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,a){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},d.getFullUrl=function(e,t){var a=e,r=e.substring(0,1);return t="undefined"==typeof t||t,/[a-z]+\:\/\//.test(e)||(a="/"===r?d.getRootUrl()+e.replace(/^\/+/,""):"#"===r?d.getPageUrl().replace(/#.*/,"")+e:"?"===r?d.getPageUrl().replace(/[\?#].*/,"")+e:t?d.getBaseUrl()+e.replace(/^(\.\/)+/,""):d.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),a.replace(/\#$/,"")},d.getShortUrl=function(e){var t=e,a=d.getBaseUrl(),r=d.getRootUrl();return d.emulated.pushState&&(t=t.replace(a,"")),t=t.replace(r,"/"),d.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},d.store=o?o.store("History.store")||{}:{},d.store.idToState=d.store.idToState||{},d.store.urlToId=d.store.urlToId||{},d.store.stateToId=d.store.stateToId||{},d.idToState=d.idToState||{},d.stateToId=d.stateToId||{},d.urlToId=d.urlToId||{},d.storedStates=d.storedStates||[],d.savedStates=d.savedStates||[],d.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var a=d.getLastSavedState();return!a&&t&&(a=d.createStateObject()),e&&(a=d.cloneObject(a),a.url=a.cleanUrl||a.url),a},d.getIdByState=function(e){var t=d.extractId(e.url);if(!t){var a=d.getStateString(e);if("undefined"!=typeof d.stateToId[a])t=d.stateToId[a];else if("undefined"!=typeof d.store.stateToId[a])t=d.store.stateToId[a];else{for(;;)if(t=(new Date).getTime()+~~(1e3*Math.random()),"undefined"==typeof d.idToState[t]&&"undefined"==typeof d.store.idToState[t])break;d.stateToId[a]=t,d.idToState[t]=e}}return t},d.normalizeState=function(e){if(e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized)return e;e.data&&"object"==typeof e.data||(e.data={});var t={};t.normalized=!0,t.title=e.title||"",t.url=d.getFullUrl(e.url||r.location.href),t.hash=d.getShortUrl(t.url),t.data=d.cloneObject(e.data),t.id=d.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl;var a=!d.isEmptyObject(t.data);return(t.title||a)&&(t.hash=d.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=d.getFullUrl(t.hash),(d.emulated.pushState||d.bugs.safariPoll)&&d.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t},d.createStateObject=function(e,t,a){var r={data:e,title:t,url:a};return r=d.normalizeState(r)},d.getStateById=function(e){e=String(e);var a=d.idToState[e]||d.store.idToState[e]||t;return a},d.getStateString=function(e){var t=d.normalizeState(e),a={data:t.data,title:e.title,url:e.url},r=l.stringify(a);return r},d.getStateId=function(e){var t=d.normalizeState(e),a=t.id;return a},d.getHashByState=function(e){var t,a=d.normalizeState(e);return t=a.hash},d.extractId=function(e){var t,a,r;return a=/(.*)\&_suid=([0-9]+)$/.exec(e),r=a?a[1]||e:e,t=a?String(a[2]||""):"",t||!1},d.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},d.extractState=function(e,t){var a=null;t=t||!1;var r=d.extractId(e);if(r&&(a=d.getStateById(r)),!a){var n=d.getFullUrl(e);r=d.getIdByUrl(n)||!1,r&&(a=d.getStateById(r)),a||!t||d.isTraditionalAnchor(e)||(a=d.createStateObject(null,null,n))}return a},d.getIdByUrl=function(e){var a=d.urlToId[e]||d.store.urlToId[e]||t;return a},d.getLastSavedState=function(){return d.savedStates[d.savedStates.length-1]||t},d.getLastStoredState=function(){return d.storedStates[d.storedStates.length-1]||t},d.hasUrlDuplicate=function(e){var t=!1,a=d.extractState(e.url);return t=a&&a.id!==e.id},d.storeState=function(e){return d.urlToId[e.url]=e.id,d.storedStates.push(d.cloneObject(e)),e},d.isLastSavedState=function(e){var t=!1;if(d.savedStates.length){var a=e.id,r=d.getLastSavedState(),n=r.id;t=a===n}return t},d.saveState=function(e){return!d.isLastSavedState(e)&&(d.savedStates.push(d.cloneObject(e)),!0)},d.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?d.savedStates[d.savedStates.length-1]:e<0?d.savedStates[d.savedStates.length+e]:d.savedStates[e]},d.getHash=function(){var e=d.unescapeHash(r.location.hash);return e},d.unescapeString=function(t){for(var a,r=t;;){if(a=e.unescape(r),a===r)break;r=a}return r},d.unescapeHash=function(e){var t=d.normalizeHash(e);return t=d.unescapeString(t)},d.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},d.setHash=function(e,t){if(t!==!1&&d.busy())return d.pushQueue({scope:d,callback:d.setHash,args:arguments,queue:t}),!1;var a=d.escapeHash(e);d.busy(!0);var n=d.extractState(e,!0);if(n&&!d.emulated.pushState)d.pushState(n.data,n.title,n.url,!1);else if(r.location.hash!==a)if(d.bugs.setHash){var o=d.getPageUrl();d.pushState(null,null,o+"#"+a,!1)}else r.location.hash=a;return d},d.escapeHash=function(t){var a=d.normalizeHash(t);return a=e.escape(a),d.bugs.hashEscape||(a=a.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),a},d.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=d.unescapeHash(t)},d.setTitle=function(e){var t=e.title;if(!t){var a=d.getStateByIndex(0);a&&a.url===e.url&&(t=a.title||d.options.initialTitle)}try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(n){}return r.title=t,d},d.queues=[],d.busy=function(e){if("undefined"!=typeof e?d.busy.flag=e:"undefined"==typeof d.busy.flag&&(d.busy.flag=!1),!d.busy.flag){s(d.busy.timeout);var t=function(){if(!d.busy.flag)for(var e=d.queues.length-1;e>=0;--e){var a=d.queues[e];if(0!==a.length){var r=a.shift();d.fireQueueItem(r),d.busy.timeout=i(t,d.options.busyDelay)}}};d.busy.timeout=i(t,d.options.busyDelay)}return d.busy.flag},d.fireQueueItem=function(e){return e.callback.apply(e.scope||d,e.args||[])},d.pushQueue=function(e){return d.queues[e.queue||0]=d.queues[e.queue||0]||[],d.queues[e.queue||0].push(e),d},d.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),d.busy()?d.pushQueue(e):d.fireQueueItem(e),d},d.clearQueue=function(){return d.busy.flag=!1,d.queues=[],d},d.stateChanged=!1,d.doubleChecker=!1,d.doubleCheckComplete=function(){return d.stateChanged=!0,d.doubleCheckClear(),d},d.doubleCheckClear=function(){return d.doubleChecker&&(s(d.doubleChecker),d.doubleChecker=!1),d},d.doubleCheck=function(e){return d.stateChanged=!1,d.doubleCheckClear(),d.bugs.ieDoubleCheck&&(d.doubleChecker=i(function(){return d.doubleCheckClear(),d.stateChanged||e(),!0},d.options.doubleCheckInterval)),d},d.safariStatePoll=function(){var t,a=d.extractState(r.location.href);if(!d.isLastSavedState(a))return t=a,t||(t=d.createStateObject()),d.Adapter.trigger(e,"popstate"),d},d.back=function(e){return e!==!1&&d.busy()?(d.pushQueue({scope:d,callback:d.back,args:arguments,queue:e}),!1):(d.busy(!0),d.doubleCheck(function(){d.back(!1)}),c.go(-1),!0)},d.forward=function(e){return e!==!1&&d.busy()?(d.pushQueue({scope:d,callback:d.forward,args:arguments,queue:e}),!1):(d.busy(!0),d.doubleCheck(function(){d.forward(!1)}),c.go(1),!0)},d.go=function(e,t){var a;if(e>0)for(a=1;a<=e;++a)d.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(a=-1;a>=e;--a)d.back(t)}return d},d.saveState(d.storeState(d.extractState(r.location.href,!0))),o&&(d.onUnload=function(){var e,t=o.store("History.store")||{};t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in d.idToState)d.idToState.hasOwnProperty(e)&&(t.idToState[e]=d.idToState[e]);for(e in d.urlToId)d.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=d.urlToId[e]);for(e in d.stateToId)d.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=d.stateToId[e]);d.store=t,o.store("History.store",t)},u(d.onUnload,d.options.storeInterval),d.Adapter.bind(e,"beforeunload",d.onUnload),d.Adapter.bind(e,"unload",d.onUnload)),d.emulated.pushState){var p=function(){};d.pushState=d.pushState||p,d.replaceState=d.replaceState||p}else d.onPopState=function(t){d.doubleCheckComplete();var a=d.getHash();if(a){var n=d.extractState(a||r.location.href,!0);return n?d.replaceState(n.data,n.title,n.url,!1):(d.Adapter.trigger(e,"anchorchange"),d.busy(!1)),d.expectedStateId=!1,!1}var o=!1;return t=t||{},"undefined"==typeof t.state&&("undefined"!=typeof t.originalEvent&&"undefined"!=typeof t.originalEvent.state?t.state=t.originalEvent.state||!1:"undefined"!=typeof t.event&&"undefined"!=typeof t.event.state&&(t.state=t.event.state||!1)),t.state=t.state||!1,o=t.state?d.getStateById(t.state):d.expectedStateId?d.getStateById(d.expectedStateId):d.extractState(r.location.href),o||(o=d.createStateObject(null,null,r.location.href)),d.expectedStateId=!1,d.isLastSavedState(o)?(d.busy(!1),!1):(d.storeState(o),d.saveState(o),d.setTitle(o),d.busy(!1),!0)},d.Adapter.bind(e,"popstate",d.onPopState),d.pushState=function(t,a,r,n){if(d.getHashByUrl(r)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(n!==!1&&d.busy())return d.pushQueue({scope:d,callback:d.pushState,args:arguments,queue:n}),!1;d.busy(!0);var o=d.createStateObject(t,a,r);return d.isLastSavedState(o)?d.busy(!1):(d.storeState(o),d.saveState(o),d.expectedStateId=o.id,c.pushState(o.id,o.title,o.url),d.Adapter.trigger(e,"statechange"),d.busy(!1)),!0},d.replaceState=function(t,a,r,n){if(d.getHashByUrl(r)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(n!==!1&&d.busy())return d.pushQueue({scope:d,callback:d.replaceState,args:arguments,queue:n}),!1;d.busy(!0);var o=d.createStateObject(t,a,r);return d.isLastSavedState(o)?d.busy(!1):(d.storeState(o),d.saveState(o),d.expectedStateId=o.id,c.replaceState(o.id,o.title,o.url),d.Adapter.trigger(e,"statechange"),d.busy(!1)),!0},d.bugs.safariPoll&&u(d.safariStatePoll,d.options.safariPollInterval),"Apple Computer, Inc."!==n.vendor&&"Mozilla"!==(n.appCodeName||"")||(d.Adapter.bind(e,"hashchange",function(){d.Adapter.trigger(e,"popstate")}),d.getHash()&&d.Adapter.onDomLoad(function(){d.Adapter.trigger(e,"hashchange")}))},d.init()}(window);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/amplify.store.js' */
!function(e,t){function r(e,r){var a=r.__amplify__?JSON.parse(r.__amplify__):{};i.addType(e,function(s,n,l){var p,u,o=n,d=(new Date).getTime();if(!s){o={};for(s in a)p=r[s],u=p?JSON.parse(p):{expires:-1},u.expires&&u.expires<=d?(delete r[s],delete a[s]):o[s.replace(/^__amplify__/,"")]=u.data;return r.__amplify__=JSON.stringify(a),o}if(s="__amplify__"+s,n===t){if(a[s]){if(p=r[s],u=p?JSON.parse(p):{expires:-1},!(u.expires&&u.expires<=d))return u.data;delete r[s],delete a[s]}}else if(null===n)delete r[s],delete a[s];else{u=JSON.stringify({data:n,expires:l.expires?d+l.expires:null});try{r[s]=u,a[s]=!0}catch(f){i[e]();try{r[s]=u,a[s]=!0}catch(f){throw i.error()}}}return r.__amplify__=JSON.stringify(a),o})}JSON.stringify=JSON.stringify||JSON.encode,JSON.parse=JSON.parse||JSON.decode;var i=e.store=function(e,t,r,a){var a=i.type;return r&&r.type&&r.type in i.types&&(a=r.type),i.types[a](e,t,r||{})};i.types={},i.type=null,i.addType=function(e,t){i.type||(i.type=e),i.types[e]=t,i[e]=function(t,r,a){return a=a||{},a.type=e,i(t,r,a)}},i.error=function(){return"amplify.store quota exceeded"};for(var a in{localStorage:1,sessionStorage:1})try{window[a].getItem&&r(a,window[a])}catch(s){}window.globalStorage&&(r("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===i.type&&(i.type="globalStorage")),function(){var e,r=document.createElement("div"),a="amplify";r.style.display="none",document.getElementsByTagName("head")[0].appendChild(r),r.addBehavior&&(r.addBehavior("#default#userdata"),r.load(a),e=r.getAttribute(a)?JSON.parse(r.getAttribute(a)):{},i.addType("userData",function(s,n,l){var p,u,o,d=n,f=(new Date).getTime();if(!s){d={};for(s in e)p=r.getAttribute(s),u=p?JSON.parse(p):{expires:-1},u.expires&&u.expires<=f?(r.removeAttribute(s),delete e[s]):d[s]=u.data;return r.setAttribute(a,JSON.stringify(e)),r.save(a),d}if(s=s.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),n===t){if(s in e){if(p=r.getAttribute(s),u=p?JSON.parse(p):{expires:-1},!(u.expires&&u.expires<=f))return u.data;r.removeAttribute(s),delete e[s]}}else null===n?(r.removeAttribute(s),delete e[s]):(o=r.getAttribute(s),u=JSON.stringify({data:n,expires:l.expires?f+l.expires:null}),r.setAttribute(s,u),e[s]=!0);r.setAttribute(a,JSON.stringify(e));try{r.save(a)}catch(y){null===o?(r.removeAttribute(s),delete e[s]):r.setAttribute(s,o),i.userData();try{r.setAttribute(s,u),e[s]=!0,r.save(a)}catch(y){throw null===o?(r.removeAttribute(s),delete e[s]):r.setAttribute(s,o),i.error()}}return d}))}(),r("memory",{})}(this.amplify=this.amplify||{});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/history.html4.js' */
!function(e,t){"use strict";var a=e.document,r=e.setTimeout||r,s=e.clearTimeout||s,n=e.setInterval||n,i=e.History=e.History||{};if("undefined"!=typeof i.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");i.initHtml4=function(){return"undefined"==typeof i.initHtml4.initialized&&(i.initHtml4.initialized=!0,i.enabled=!0,i.savedHashes=[],i.isLastHash=function(e){var t=i.getHashByIndex(),a=e===t;return a},i.saveHash=function(e){return!i.isLastHash(e)&&(i.savedHashes.push(e),!0)},i.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?i.savedHashes[i.savedHashes.length-1]:e<0?i.savedHashes[i.savedHashes.length+e]:i.savedHashes[e]},i.discardedHashes={},i.discardedStates={},i.discardState=function(e,t,a){var r=i.getHashByState(e),s={discardedState:e,backState:a,forwardState:t};return i.discardedStates[r]=s,!0},i.discardHash=function(e,t,a){var r={discardedHash:e,backState:a,forwardState:t};return i.discardedHashes[e]=r,!0},i.discardedState=function(e){var t=i.getHashByState(e),a=i.discardedStates[t]||!1;return a},i.discardedHash=function(e){var t=i.discardedHashes[e]||!1;return t},i.recycleState=function(e){var t=i.getHashByState(e);return i.discardedState(e)&&delete i.discardedStates[t],!0},i.emulated.hashChange&&(i.hashChangeInit=function(){i.checkerFunction=null;var t="";if(i.isInternetExplorer()){var r="historyjs-iframe",s=a.createElement("iframe");s.setAttribute("id",r),s.style.display="none",a.body.appendChild(s),s.contentWindow.document.open(),s.contentWindow.document.close();var d="",h=!1;i.checkerFunction=function(){if(h)return!1;h=!0;var a=i.getHash()||"",r=i.unescapeHash(s.contentWindow.document.location.hash)||"";return a!==t?(t=a,r!==a&&(d=r=a,s.contentWindow.document.open(),s.contentWindow.document.close(),s.contentWindow.document.location.hash=i.escapeHash(a)),i.Adapter.trigger(e,"hashchange")):r!==d&&(d=r,i.setHash(r,!1)),h=!1,!0}}else i.checkerFunction=function(){var a=i.getHash();return a!==t&&(t=a,i.Adapter.trigger(e,"hashchange")),!0};return n(i.checkerFunction,i.options.hashChangeInterval),!0},i.Adapter.onDomLoad(i.hashChangeInit)),void(i.emulated.pushState&&(i.onHashChange=function(t){var r=t&&t.newURL||a.location.href,s=i.getHashByUrl(r),n=null,d=null;if(i.isLastHash(s))return i.busy(!1),!1;if(i.doubleCheckComplete(),i.saveHash(s),s&&i.isTraditionalAnchor(s))return i.Adapter.trigger(e,"anchorchange"),i.busy(!1),!1;if(n=i.extractState(i.getFullUrl(s||a.location.href,!1),!0),i.isLastSavedState(n))return i.busy(!1),!1;d=i.getHashByState(n);var h=i.discardedState(n);return h?(i.getHashByIndex(-2)===i.getHashByState(h.forwardState)?i.back(!1):i.forward(!1),!1):(i.pushState(n.data,n.title,n.url,!1),!0)},i.Adapter.bind(e,"hashchange",i.onHashChange),i.pushState=function(t,r,s,n){if(i.getHashByUrl(s))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(n!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.pushState,args:arguments,queue:n}),!1;i.busy(!0);var d=i.createStateObject(t,r,s),h=i.getHashByState(d),o=i.getState(!1),c=i.getHashByState(o),u=i.getHash();return i.storeState(d),i.expectedStateId=d.id,i.recycleState(d),i.setTitle(d),h===c?(i.busy(!1),!1):h!==u&&h!==i.getShortUrl(a.location.href)?(i.setHash(h,!1),!1):(i.saveState(d),i.Adapter.trigger(e,"statechange"),i.busy(!1),!0)},i.replaceState=function(e,t,a,r){if(i.getHashByUrl(a))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&i.busy())return i.pushQueue({scope:i,callback:i.replaceState,args:arguments,queue:r}),!1;i.busy(!0);var s=i.createStateObject(e,t,a),n=i.getState(!1),d=i.getStateByIndex(-2);return i.discardState(n,s,d),i.pushState(s.data,s.title,s.url,!1),!0},i.getHash()&&!i.emulated.hashChange&&i.Adapter.onDomLoad(function(){i.Adapter.trigger(e,"hashchange")}))))},i.init()}(window);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/history/json2.js' */
var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,f,o,u,i=gap,a=e[t];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(t)),"function"==typeof rep&&(a=rep.call(e,t,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(a)){for(o=a.length,n=0;n<o;n+=1)u[n]=str(n,a)||"null";return f=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,f}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)r=rep[n],"string"==typeof r&&(f=str(r,a),f&&u.push(quote(r)+(gap?": ":":")+f));else for(r in a)Object.hasOwnProperty.call(a,r)&&(f=str(r,a),f&&u.push(quote(r)+(gap?": ":":")+f));return f=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,f}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,f=t[e];if(f&&"object"==typeof f)for(n in f)Object.hasOwnProperty.call(f,n)&&(r=walk(f,n),void 0!==r?f[n]=r:delete f[n]);return reviver.call(t,e,f)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/configuration/SPConfig.js' */
define("jira-agile/rapid/ui/SPConfig",[],function(){return Object.freeze({USE_STORED_TAB:"default",INITIAL_TAB:"filter",PARAM_NAME:"config"})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/state/State.js' */
GH.State.push=function(t,e){var r=GH.State.toUri(t);"undefined"==typeof e&&(e=document.title),History.pushState(t,e,r),AJS.$(AJS).trigger("gh.virtualpageview")},GH.State.replace=function(t,e){var r=GH.State.toUri(t);"undefined"==typeof e&&(e=document.title),History.replaceState(t,e,r)},GH.State.getViewState=function(){return History.getState().data},GH.State.getHashParams=function(){var t=window.location.href;return!(t.indexOf("#")<0)&&GH.State.toViewState(t)},GH.State.toViewState=function(t){if(t.lastIndexOf("?")<0)return{};var e=GH.State.getStateFromUri(t);return delete e._suid,e},GH.State.toUri=function(t){var e=AJS.parseUri(document.location.href);return e.anchor="",e.queryKey=AJS.$.extend({},t),e.toString()},GH.State.registerStateChangeListener=function(t){History.Adapter.bind(window,"statechange",t)},GH.State.registerStatePopListener=function(t){History.Adapter.bind(window,"popstate",t)},GH.State.getStateFromUri=function(t){var e=AJS.parseUri(t);return e.anchor&&(e=AJS.parseUri(e.anchor)),e.queryKey};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/state/UrlState.js' */
GH.RapidBoard.UrlState={},GH.RapidBoard.UrlState.dateFormat="%Y-%m-%d",GH.RapidBoard.UrlState.normalizeNumberParam=function(a,t){if(_.isUndefined(t)&&(t=null),void 0===a)return t;if(null===a)return t;var r=parseInt(a,10);return isFinite(r)?r:t},GH.RapidBoard.UrlState.normalizeBooleanParam=function(a,t){return _.isUndefined(t)&&(t=null),void 0===a?t:null===a?t:"false"!==a&&Boolean(a)},GH.RapidBoard.UrlState.normalizeDateParam=function(a,t){if(_.isUndefined(t)&&(t=null),void 0===a)return t;if(null===a)return t;var r=Date.parseDate(a,GH.RapidBoard.UrlState.dateFormat);return r},GH.RapidBoard.UrlState.normalizeNumberArrayParam=function(a){var t=[];if(_.isString(a)){var r=GH.RapidBoard.UrlState.normalizeNumberParam(a);null!==r&&t.push(r)}else _.isArray(a)&&_.each(a,function(a){var r=GH.RapidBoard.UrlState.normalizeNumberParam(a);null!==r&&t.push(r)});return t},GH.RapidBoard.UrlState.normalizeStringParam=function(a,t){if(_.isUndefined(t)&&(t=null),_.isArray(a)&&a.length>0){var r=a[0];return""!==r?decodeURIComponent(r):t}return _.isString(a)&&""!==a?decodeURIComponent(a):t},GH.RapidBoard.UrlState.normalizeStringArrayParam=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[];return _.isString(a)&&a.length>0?r=[GH.RapidBoard.UrlState.normalizeStringParam(a,null)]:_.isArray(a)&&(r=a.map(function(a){return GH.RapidBoard.UrlState.normalizeStringParam(a,null)})),r.length?r:t},GH.RapidBoard.UrlState.removeEmptyParams=function(a){var t={};return _.each(a,function(a,r){_.isArray(a)?a.length>0&&(t[r]=a):_.isString(a)?_.isEmpty(a)||(t[r]=a):null===a||void 0===a||(t[r]=a)}),t},GH.RapidBoard.UrlState.toUrlParameterString=function(a){var t="";return _.each(a,function(a,r){_.isArray(a)?_.each(a,function(e){t.length>0&&(t+="&"),t+=r+"="+encodeURIComponent(a)}):(t.length>0&&(t+="&"),t+=r+"="+encodeURIComponent(a))}),t},GH.RapidBoard.UrlState.setHandlers=function(a){GH.RapidBoard.UrlState.handlers=a},GH.RapidBoard.UrlState.handlers=[],GH.RapidBoard.UrlState.getNormalizedUrlState=function(){var a=GH.RapidBoard.UrlState.getCurrentUrlState(),t={};return _.each(GH.RapidBoard.UrlState.handlers,function(r){r.isApplicable(t)&&r.getNormalizedFromUrl(a,t)}),t},GH.RapidBoard.UrlState.toUrlState=function(a){var t={};return _.each(GH.RapidBoard.UrlState.handlers,function(r){r.isApplicable(a)&&r.toUrl(a,t)}),t},GH.RapidBoard.UrlState.deferredPushState=function(a){a<GH.RapidBoard.UrlState.lastPushReplace||GH.RapidBoard.UrlState.pushState()},GH.RapidBoard.UrlState.lastPushReplace=0,GH.RapidBoard.UrlState.pushState=function(a){GH.RapidBoard.UrlState.lastPushReplace=(new Date).getTime();var t=GH.RapidBoard.UrlState.getNormalizedRapidBoardState(),r=GH.RapidBoard.UrlState.toUrlState(t),e=GH.RapidBoard.UrlState.getNormalizedUrlState();_.isEqual(t,e)||GH.State.push(r,a)},GH.RapidBoard.UrlState.replaceState=function(a){GH.RapidBoard.UrlState.lastPushReplace=(new Date).getTime();var t=GH.RapidBoard.UrlState.getNormalizedRapidBoardState(),r=GH.RapidBoard.UrlState.toUrlState(t),e=GH.RapidBoard.UrlState.getNormalizedUrlState();_.isEqual(t,e)&&!a||GH.State.replace(r)},GH.RapidBoard.UrlState.getNormalizedRapidBoardState=function(){var a={};return _.each(GH.RapidBoard.UrlState.handlers,function(t){t.isApplicable(a)&&t.getNormalizedFromInternal(a)}),a},GH.RapidBoard.UrlState.loadState=function(){var a=GH.RapidBoard.UrlState.getNormalizedUrlState();_.each(GH.RapidBoard.UrlState.handlers,function(t){t.isApplicable(a)&&t.updateInternalFromNormalized(a)})},GH.RapidBoard.UrlState.getCurrentUrlState=function(){return GH.State.toViewState(GH.RapidBoard.UrlState._getHref())},GH.RapidBoard.UrlState._getHref=function(){return window.location.href},GH.RapidBoard.UrlState.hasUrlState=function(){return!_.isEmpty(GH.RapidBoard.UrlState.getCurrentUrlState())},GH.RapidBoard.UrlState.isUrlStateUpToDate=function(){var a=GH.RapidBoard.UrlState.getNormalizedRapidBoardState(),t=GH.RapidBoard.UrlState.getNormalizedUrlState();return _.isEqual(a,t)},GH.RapidBoard.UrlState.getViewStateRequestParameterString=function(){var a=GH.RapidBoard.UrlState.getCurrentUrlState(),t=GH.RapidBoard.UrlState.removeEmptyParams(a);return GH.RapidBoard.UrlState.toUrlParameterString(t)},GH.RapidBoard.UrlState.HISTORY_CHANGED="historyDidChange",GH.RapidBoard.UrlState.historyChanged=function(){return GH.RapidBoard.UrlState.isUrlStateUpToDate()?void AJS.$(GH).trigger(GH.RapidBoard.UrlState.HISTORY_CHANGED):(GH.RapidBoard.UrlState.logDifferenceInState(),GH.RapidBoard.UrlState.loadState(),GH.RapidBoard.reload(),void AJS.$(GH).trigger(GH.RapidBoard.UrlState.HISTORY_CHANGED))},GH.RapidBoard.UrlState.buggyHistoryPopped=function(){var a=GH.RapidBoard.UrlState.getNormalizedUrlState(),t=a.rapidBoard;GH.RapidBoard.State.setRapidViewId(t),GH.RapidBoard.refreshBoardData()},GH.RapidBoard.UrlState.historyPopped=function(){GH.RapidBoard.UrlState.isUrlStateUpToDate()||GH.RapidBoard.refreshBoardData()},GH.RapidBoard.UrlState.logDifferenceInState=function(){GH.RapidBoard.UrlState.getNormalizedRapidBoardState(),GH.RapidBoard.UrlState.getNormalizedUrlState()},GH.RapidBoard.UrlState.init=function(){var a=require("jira/featureflags/feature-manager"),t=require("jira-agile/features/feature-flags");setTimeout(function(){GH.State.registerStateChangeListener(GH.RapidBoard.UrlState.historyChanged),a.isFeatureEnabled(t.NEXT_3843_FIX_HISTORY_POPPED)?GH.State.registerStatePopListener(GH.RapidBoard.UrlState.historyPopped):GH.State.registerStatePopListener(GH.RapidBoard.UrlState.buggyHistoryPopped)},200)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/help/Tooltip.js' */
define("jira-agile/tooltip",["jquery","underscore"],function(t,i){"use strict";function e(i){var e=i.options.gravity;if("function"==typeof e&&(e=e.call(i.$element[0])),"n"===e.charAt(0)||"s"===e.charAt(0)){var n=i.$tip,r=n.offset(),o=Math.max(0,a-r.left),s=Math.max(0,a+r.left+n.outerWidth()-t(window).width()),l=n.find(".tipsy-arrow"),c=o&&s?0:o||-s;c?(n.css("left",parseInt(n.css("left"),10)+c),l.css("marginLeft",-l.outerWidth()/2-c)):l.css("marginLeft","")}}function n(t){var i=250;setTimeout(function(){t.$tip.is(":visible")&&(t.$element.is(":visible")?n(t):t.hide())},i)}function r(t,i){t&&(t.show(),t.$tip&&(e(t),n(t),i.trigger("show",t)))}var o=GH.Events,s=200,a=20,l={};return l.tipsify=function(e){e=i.extend({},e,{trigger:"manual",title:"data-tooltip"});var n=new o;if(!e.selector)return n;if(e.context&&i.isString(e.selector)){var a=e.selector;t(e.context).ghHoverIntent({interval:s,selector:a,over:function(){var i=t(this);if(i.is(":visible")){var o=i.tooltip(e).tipsy(!0);r(o,n)}},out:function(){var i=t(this).tipsy(!0);i&&i.hide()}})}else t(e.selector).tooltip(e).ghHoverIntent({interval:s,over:function(){var i=t(this).tipsy(!0);r(i,n)},out:function(){t(this).tipsy("hide")}});return n},l.enable=function(i){var e=t(i).tipsy(!0);e&&e.enable()},l.disable=function(i){var e=t(i).tipsy(!0);e&&e.disable()},l.hide=function(i){var e=t(i).tipsy(!0);e&&(t(i).trigger("mouseleave"),e.hide())},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/ajs-future.js' */
!function(){function t(t,e,n,o,i){t.buttonpanel||t.addButtonPanel(),i||(i="#"),this.page=t,this.onclick=n,this._onclick=function(){n.call(this,t.dialog,t)},this.item=AJS("a",e).attr("href",i).addClass("button-panel-link"),o&&this.item.addClass(o),"function"==typeof n&&this.item.click(this._onclick),t.buttonpanel.append(this.item),this.id=t.button.length,t.button[this.id]=this}AJS.Dialog.prototype.addCancel||(AJS.Dialog.prototype.addCancel=function(e,n){var o=this.page[this.curpage];new t(o,e,n,"button-panel-cancel-link");o.recalcSize()}),AJS.parseUri=function(t,e){function n(t){for(var e=n.options,o=e.parser[e.strictMode?"strict":"loose"].exec(t),i={},a=14;a--;)i[e.key[a]]=o[a]||"";return i[e.q.name]={},i[e.key[12]].replace(e.q.parser,function(t,n,o){n&&("object"==typeof i[e.q.name][n]?i[e.q.name][n].push(o):i[e.q.name][n]?i[e.q.name][n]=[i[e.q.name][n],o]:i[e.q.name][n]=o)}),i}return n.options={strictMode:!!e,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t=n(t),t.toString=function(){var e=[];return AJS.$.each(t.queryKey,function(t,n){_.isObject(n)?AJS.$.each(n,function(n,o){e.push(t+"="+o)}):e.push(t+"="+n)}),t.protocol+"://"+t.authority+t.path+"?"+e.join("&")+"#"+t.anchor},t}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/ajs-version.js' */
GH.ajsVersion=function(){if(!AJS.version)return{major:-1,minor:0,milestone:0};var n=AJS.version.split("."),e={major:n[0],minor:0,milestone:0};if(3==n.length)e.minor=n[1],e.milestone=n[2];else if(2==n.length){var i=n[1].split("-");2==i.length&&(e.minor=i[0],e.milestone=i[1].substring(i[1].indexOf("m")+1))}return e},GH.ajsVersionAfter=function(n,e,i){var r=GH.ajsVersion();return!(r.major<n)&&(!(e&&r.minor<e)&&!(i&&r.milestone<i))};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/ui-utils.js' */
GH.Util=GH.Util||{},GH.Util.UI={},GH.Util.UI.isDisabled=function(i){var t=AJS.$(i);return t.hasClass("disabled")||"true"==t.attr("aria-disabled")},GH.Util.UI.isEnabled=function(i){return!GH.Util.UI.isDisabled(i)},GH.Util.UI.isVisibleY=function(i){var t=AJS.$(window).height(),a=AJS.$(document).scrollTop();return i>a&&i<t+a},GH.Util.UI.isVisibleX=function(i){var t=AJS.$(window).width(),a=AJS.$(document).scrollLeft();return i>a&&i<t+a},GH.Util.UI.ariaEnable=function(i){AJS.$(i).removeAttr("aria-disabled")},GH.Util.UI.ariaDisable=function(i){AJS.$(i).attr("aria-disabled","true")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/Layout.js' */
GH.Layout={},GH.Layout.windowResizeTimer=null,GH.Layout.EVENT_DELAYED_RESIZE="delayedResize",GH.Layout.info={windowWidth:-1,windowHeight:-1},GH.Layout.getWindowWidth=function(){return GH.Layout.info.windowWidth},GH.Layout.getWindowHeight=function(){return GH.Layout.info.windowHeight},GH.Layout.bindDelayedWindowResize=_.once(function(){AJS.$(window).bind("resize",function(){null!=GH.Layout.windowResizeTimer&&window.clearTimeout(GH.Layout.windowResizeTimer),GH.Layout.windowResizeTimer=window.setTimeout(function(){GH.Layout.updateWindowSize()&&GH.Layout.fireDelayedWindowResize()},250)})}),GH.Layout.updateWindowSize=function(){var i=AJS.$(window),o=GH.Layout.info.windowWidth,n=GH.Layout.info.windowHeight,t=i.width(),e=i.height();return(o!=t||n!=e)&&(GH.Layout.info.windowWidth=t,GH.Layout.info.windowHeight=e,!0)},GH.Layout.fireDelayedWindowResize=function(){AJS.$(GH).trigger(GH.Layout.EVENT_DELAYED_RESIZE)},GH.Layout.initPreRender=function(){var i=AJS.$(window);GH.Layout.info.windowWidth=i.width(),GH.Layout.info.windowHeight=i.height()},GH.Layout.init=function(){GH.Layout.bindDelayedWindowResize()},GH.Layout.initPreRender();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/Footer.js' */
GH.Footer={},GH.Footer.agileFooter=function(){var o=AJS.$("#footer"),r=o.find(".footer-body:first ul:first"),e=o.find("#ghx-footer");JIRA.Version.isGreaterThanOrEqualTo("6.2")||r.before(e),e.css({visibility:""})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/Browser.js' */
GH.RapidBoard.Browsers={},GH.RapidBoard.Browsers.userAgentMap={mozilla:"Firefox"},GH.RapidBoard.Browsers.unsupportedBrowsers=[{name:"mozilla",versions:["1.7","1.8","1.9"]}],GH.RapidBoard.Browsers.init=function(){GH.RapidBoard.Browsers.unsupported()},GH.RapidBoard.Browsers.isLowerThanIE11=function(){return AJS.$.browser.msie&&parseFloat(AJS.$.browser.version)<11},GH.RapidBoard.Browsers.isGreaterThanIE9=function(){return AJS.$.browser.msie&&parseFloat(AJS.$.browser.version)>9},GH.RapidBoard.Browsers.isInputEventSupported=function(){return"oninput"in document.createElement("input")&&!AJS.$.browser.msie||GH.RapidBoard.Browsers.isGreaterThanIE9()},GH.RapidBoard.Browsers.describeBrowser=function(r){r=r||navigator.userAgent;var e=/chrome/.test(navigator.userAgent.toLowerCase()),o=!e&&/safari/.test(navigator.userAgent.toLowerCase()),s=AJS.$.uaMatch(r),a=s.browser,n=s.version.replace(/(\d+)\.(\d+).*$/,"$1.$2");return e?a="chrome":o&&(a="safari"),{name:a,version:n}},GH.RapidBoard.Browsers.unsupported=function(){var r,e,o,s=GH.RapidBoard.Browsers.describeBrowser(),a=GH.RapidBoard.Browsers.unsupportedBrowsers;for(e=0;e<a.length;e++)if(o=a[e],s.name==o.name&&o.versions.indexOf(s.version)>=0){var n=s.name;GH.RapidBoard.Browsers.userAgentMap[n]&&(n=GH.RapidBoard.Browsers.userAgentMap[n]);var i={"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Supported+Platforms","isLocal":false}.url;r=GH.tpl.rapid.notification.renderMessageHolder({browser:n,docsUrl:i}),AJS.$("body").prepend(r);break}},AJS.$(function(){GH.RapidBoard.Browsers.init()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/NumberFormat.js' */
GH.NumberFormat={},GH.NumberFormat.groupingSeparator=",",GH.NumberFormat.decimalSeparator=".",GH.NumberFormat.format=function(r){if(_.isNumber(r)){r=GH.Util.roundToDecimalPlaces(r,2);var t=r<<0,a=r.toString().split(".")[1],e=function(r){return r.split("").reverse().join("")},o=e(e(t.toString()).replace(/(\d{3})(?=\d)/g,"$1"+GH.NumberFormat.groupingSeparator));return o+(a?GH.NumberFormat.decimalSeparator+a:"")}},GH.NumberFormat.formatExponential=function(r){if(_.isNumber(r)){var t=Math.abs(r).toFixed(0).length-1,a=r/Math.pow(10,t);return GH.NumberFormat.format(a)+"e"+GH.NumberFormat.format(t)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/TimeFormat.js' */
GH.TimeFormatDisplays={},GH.TimeFormatDisplays.PRETTY="pretty",GH.TimeFormatDisplays.DAYS="days",GH.TimeFormatDisplays.HOURS="hours",GH.TimeFormatDisplays.MOST_SIGNIFICANT="most-significant",GH.TimeFormatDurationUnits={},GH.TimeFormatDurationUnits.SECONDS="seconds",GH.TimeFormatDurationUnits.MILLISECONDS="millis",GH.TimeFormat={},GH.TimeFormat.timeTrackingConfigOpts={hoursPerDay:8,daysPerWeek:5,timeFormat:GH.TimeFormatDisplays.PRETTY,symbols:{week:"w",day:"d",hour:"h",minute:"m"}},GH.TimeFormat.normalDisplayOpts={hoursPerDay:24,daysPerWeek:7,timeFormat:GH.TimeFormatDisplays.PRETTY,symbols:{week:"w",day:"{0}d",hour:"{0}h",minute:"{0}m"}},GH.TimeFormat.formatMinuteDuration=function(t){return GH.TimeFormat.formatDuration(t?6e4*t:0)},GH.TimeFormat.formatShortMinuteDuration=function(t){return GH.TimeFormat.formatShortDuration(t?6e4*t:0)},GH.TimeFormat.formatDuration=function(t){t||(t=0);var r=Math.floor(t/864e5),o=t-864e5*r,a=Math.floor(o/36e5);o-=36e5*a;var e=Math.floor(o/6e4),i="";return r>0&&(i+=r+" ",i+=r>1?AJS.format("days",r):AJS.format("day",r)),a>0&&(i.length>0&&(i+=" "),i+=a+" ",i+=a>1?AJS.format("hours",a):AJS.format("hour",a)),(t>0||0===i.length)&&(i.length>0&&(i+=" "),i+=e+" ",i+=0===e||e>1?AJS.format("minutes",e):AJS.format("minute",e)),i},GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration=function(t,r){return _.isUndefined(r)&&(r={durationUnit:GH.TimeFormatDurationUnits.SECONDS}),GH.TimeFormat._formatShortDuration(t,_.extend({},GH.TimeFormat.timeTrackingConfigOpts,r))},GH.TimeFormat.formatShortDuration=function(t){return GH.TimeFormat._formatShortDuration(t,_.extend({},GH.TimeFormat.normalDisplayOpts,{durationUnit:GH.TimeFormatDurationUnits.MILLISECONDS}))},GH.TimeFormat.formatSensibleShortDuration=function(t){var r=GH.TimeFormat._formatShortDuration(t,_.extend({},GH.TimeFormat.normalDisplayOpts,{durationUnit:GH.TimeFormatDurationUnits.MILLISECONDS,dropMinutesIfLongerThanADay:!0}));return 0===r.length&&(r=GH.TimeFormat.getZeroMinutesShortFormat()),r},GH.TimeFormat.getZeroMinutesShortFormat=function(){return AJS.format("{0}m",0)},GH.TimeFormat._formatShortDuration=function(t,r){if(t||(t=0),0===t)return"0";var o=GH.TimeFormat.normalDisplayOpts;r=_.isUndefined(r)?{}:r,r=_.extend({},o,r);var a,e,i,m,n,s=6e4,u=60*s,l=r.hoursPerDay*u,T=r.daysPerWeek*l;r.durationUnit===GH.TimeFormatDurationUnits.SECONDS&&(t*=1e3),a=Math.floor(t/T),n=t%T,e=Math.floor(n/l),n%=l,i=Math.floor(n/u),n%=u,m=Math.floor(n/s),r.dropMinutesIfLongerThanADay&&e>0&&(m=0);var f=[];r.timeFormat===GH.TimeFormatDisplays.PRETTY?f=[{val:a,fmt:r.symbols.week},{val:e,fmt:r.symbols.day},{val:i,fmt:r.symbols.hour},{val:m,fmt:r.symbols.minute}]:r.timeFormat===GH.TimeFormatDisplays.DAYS?(e+=a*r.daysPerWeek,i+=m/60,f=[{val:e,fmt:r.symbols.day},{val:i,fmt:r.symbols.hour}]):r.timeFormat===GH.TimeFormatDisplays.HOURS?(e+=a*r.daysPerWeek,i=e*r.hoursPerDay+i+m/60,f=[{val:i,fmt:r.symbols.hour}]):r.timeFormat===GH.TimeFormatDisplays.MOST_SIGNIFICANT&&(f=a>0?[{val:GH.Util.roundToDecimalPlaces(t/T,1),fmt:r.symbols.week}]:e>0?[{val:GH.Util.roundToDecimalPlaces(t/l,1),fmt:r.symbols.day}]:i>0?[{val:GH.Util.roundToDecimalPlaces(t/u,1),fmt:r.symbols.hour}]:[{val:m<1?"":GH.Util.roundToDecimalPlaces(t/s,1),fmt:r.symbols.minute}]);var D=function(t){var r="";return _.each(t,function(t){if(t.val>0){r.length>0&&(r+=" ");var o=t.fmt;o.indexOf("{0}")<0&&(o="{0}"+o);var a=GH.NumberFormat.format(t.val);r+=AJS.format(o,a)}}),!r&&t.length&&(r=AJS.format(_.last(t).fmt,"< 1")),r};return D(f)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/MouseUtils.js' */
GH.MouseUtils={},GH.MouseUtils.openInSameTab=function(e){return(_.isUndefined(e.which)||null===e.which||1===e.which||0===e.which&&AJS.$.browser.msie)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey&&!AJS.$.browser.msie)},GH.MouseUtils.getMetaKeys=function(e){return e?{metaPressed:e.metaKey||e.ctrlKey,shiftPressed:e.shiftKey}:{metaPressed:!1,shiftPressed:!1}},GH.MouseUtils.hasMetaKeys=function(e){return e.metaPressed||e.shiftPressed},GH.MouseUtils.isMetaPressed=function(e){return e.metaPressed},GH.MouseUtils.isShiftPressed=function(e){return e.shiftPressed};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/ScrollUtils.js' */
GH.ScrollUtils={},GH.ScrollUtils.scrollElementToViewPort=function(o,t,l){var r=o.scrollTop(),c=0;l.top<t.top?c=l.top-t.top:t.bottom<l.bottom&&(c=l.bottom-t.bottom),0!==c&&o.animate({scrollTop:r+c},"fast")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/UrlFormat.js' */
GH.UrlFormat={},GH.UrlFormat.defaultContextPath="",GH.UrlFormat.prependBaseUrl=function(t){if(t&&0!==t.indexOf("http://")&&0!==t.indexOf("https://")){var r=GH.Ajax&&GH.Ajax.CONTEXT_PATH?GH.Ajax.CONTEXT_PATH:GH.UrlFormat.defaultContextPath;t=r+t}return t},GH.UrlFormat.getUrlForIssues=function(t){var r=_.compact(_.pluck(t,"id")).join(","),e=""!==r?"id in ("+r+")":"";return GH.UrlFormat.prependBaseUrl("/issues/?jql="+encodeURIComponent(e))};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/CallbackManager.js' */
GH.CallbackManager={},GH.CallbackManager.callbacks={},GH.CallbackManager.executeCallbacks=function(a,l){var c=GH.CallbackManager.callbacks[a];c&&!_.isEmpty(c)&&(_.each(c,function(a){a.fn(l)}),delete GH.CallbackManager.callbacks[a])},GH.CallbackManager.registerCallback=function(a,l,c){var e=GH.CallbackManager.callbacks[a];e||(e=GH.CallbackManager.callbacks[a]=[]),e.push({name:l,fn:c})},GH.CallbackManager.deleteCallbacks=function(a){_.each(_.keys(GH.CallbackManager.callbacks),function(l){l.substr(0,a.length)==a&&delete GH.CallbackManager.callbacks[l]})},GH.CallbackManager.getCallbacks=function(a){return GH.CallbackManager.callbacks[a]||[]},GH.CallbackManager.clear=function(){GH.CallbackManager.callbacks={}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/configuration/InlineEditField.js' */
!function(){"use strict";var e=require("jira/ajs/select/single-select");GH.RapidBoard.Util.InlineEditable={},GH.RapidBoard.Util.InlineEditable.defaultFieldData=function(e,i){var t=e.attr("data-fieldname"),a=e.attr("data-fieldvalue"),n=e.attr("data-defaultvalue"),l=e.attr("data-maxdisplaylength");return{fieldName:t,fieldValue:a,defaultValue:n,maxDisplayLength:l}},GH.RapidBoard.Util.InlineEditable.defaultActivate=function(e){e.editElement.focus(),e.editElement.select()},GH.RapidBoard.Util.InlineEditable.defaultTextRenderView=function(e){var i=AJS.$(GH.tpl.inlineeditfield.renderBasicTextView({canEdit:!0,fieldName:e.fieldName,fieldValue:e.newValue,displayValue:e.newValue,defaultValue:e.defaultValue,maxDisplayLength:e.maxDisplayLength}));return i},GH.RapidBoard.Util.InlineEditable.pencilTextRenderView=function(e){var i=AJS.$(GH.tpl.inlineeditfield.renderPencilTextView({canEdit:!0,fieldName:e.fieldName,fieldValue:e.newValue,displayValue:e.newValue}));return i},GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView=function(e){var i=AJS.$(GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName:e.fieldName,fieldValue:e.newValue,displayValue:e.newValue}));return i},GH.RapidBoard.Util.InlineEditable.renderTextFieldInlineEdit=function(e,i){i||(i=GH.tpl.inlineeditfield.renderBasicTextFieldEdit);var t=AJS.$(i(e));return t.val(e.fieldValue),t.blur(function(i){GH.RapidBoard.Util.InlineEditable.submitChanges(e)}),t.keydown(function(i){27===i.keyCode?(i.stopPropagation(),GH.RapidBoard.Util.InlineEditable.cancelEdit(e)):13===i.keyCode&&(i.preventDefault(),GH.RapidBoard.Util.InlineEditable.submitChanges(e))}),t},GH.RapidBoard.Util.InlineEditable.defaultTextValidation=function(e){var i=e.editElement.val();return e.newValue=i,!0},GH.RapidBoard.Util.InlineEditable.renderUserPickerInlineEdit=function(e,i){var t={value:e.fieldValue},a=AJS.$(GH.tpl.inlineeditfield.renderUserPickerFieldEdit({name:"userpickerSelect",data:t}));return a},GH.RapidBoard.Util.InlineEditable.userPickerActivate=function(i){var t=i.editElement.find("select"),a=function(e){if(!e.finishSubmitted){e.finishSubmitted=!0;var i=e.selectObject,t=i.getSelectedDescriptor(),a=null;if(!t)return void GH.RapidBoard.Util.InlineEditable.cancelEdit(e);a=t.value(),a!==e.fieldValue?GH.RapidBoard.Util.InlineEditable.submitChanges(e):GH.RapidBoard.Util.InlineEditable.cancelEdit(e)}};GH.SingleSelect=e.extend({submitForm:function(){this.suggestionsVisible||(this.handleFreeInput(),a(i))},_handleEscape:function(e){this.suggestionsVisible&&(e.stopPropagation(),"keyup"===e.type&&this.hideSuggestions()),"keyup"===e.type&&GH.RapidBoard.Util.InlineEditable.cancelEdit(i)},_deactivate:function(){this.acceptFocusedSuggestion(),this.hideSuggestions(),a(i)}});var n=new GH.SingleSelect({element:t,showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,errorMessage:"The user \'{0}\' is invalid.",ajaxOptions:{url:GH.Ajax.CONTEXT_PATH+"/rest/api/1.0/users/picker",query:!0,minQueryLength:0,data:{showAvatar:!0},formatResponse:function(e){var i=[];return AJS.$(e).each(function(e,t){var a=new AJS.GroupDescriptor({weight:e,id:"user-suggestions",replace:!0,label:t.footer});AJS.$(t.users).each(function(){a.addItem(new AJS.ItemDescriptor({value:this.name,label:this.displayName,html:this.html,allowDuplicate:!1,icon:this.avatarUrl}))}),i.push(a)}),i}}});i.selectObject=n;var l=i.editElement.find("input");l.focus(),t.select()},GH.RapidBoard.Util.InlineEditable.userPickerValidation=function(e){var i=e.selectObject.getSelectedDescriptor();return e.newValue=i.value(),e.newDisplayValue=i.label(),0===e.newDisplayValue.length&&(e.newDisplayValue=e.newValue),!0},GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit=function(e,i){var t=AJS.$(GH.tpl.inlineeditfield.renderDatePickerFieldEdit({fieldName:e.fieldName,fieldValue:e.fieldValue}));return t},GH.RapidBoard.Util.InlineEditable.datePickerActivate=function(e,i){var t=e.fieldName;i=_.extend({},{cache:!1,firstDay:0,inputField:"ghx-datepicker-"+t,button:"ghx-datepicker-"+t+"_trigger_c",align:"Br",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",onClose:function(i){GH.RapidBoard.Util.InlineEditable.submitChanges(e),i.hide()},ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers},i),Calendar.setup(i),AJS.$("#ghx-datepicker-"+t).keydown(function(i){27===i.keyCode?(i.stopPropagation(),GH.RapidBoard.Util.InlineEditable.cancelEdit(e),GH.Validation.clearContextualErrors()):13===i.keyCode&&(i.preventDefault(),GH.RapidBoard.Util.InlineEditable.submitChanges(e))}),AJS.$("#ghx-datepicker-"+t).focus(),AJS.$("#ghx-datepicker-"+t).blur(function(){GH.RapidBoard.Util.InlineEditable.submitChanges(e)})},GH.RapidBoard.Util.InlineEditable.datePickerValidation=function(e){var i=e.editElement.find("input").val();return e.newValue=i,!0},GH.RapidBoard.Util.InlineEditable.activeEdits=[],GH.RapidBoard.Util.InlineEditable.cancelActiveEdits=function(){_.each(GH.RapidBoard.Util.InlineEditable.activeEdits,function(e){GH.RapidBoard.Util.InlineEditable.cancelEdit(e)})},GH.RapidBoard.Util.InlineEditable.submitActiveEdits=function(){return!_.isEmpty(GH.RapidBoard.Util.InlineEditable.activeEdits)&&(_.each(GH.RapidBoard.Util.InlineEditable.activeEdits,function(e){GH.RapidBoard.Util.InlineEditable.submitChanges(e)}),!0)},GH.RapidBoard.Util.InlineEditable.register=function(e,i){var t={getViewElement:function(e){return AJS.$(this)},getData:GH.RapidBoard.Util.InlineEditable.defaultFieldData,preEdit:function(e){},renderEdit:GH.RapidBoard.Util.InlineEditable.renderTextFieldInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.defaultActivate,validate:GH.RapidBoard.Util.InlineEditable.defaultTextValidation,save:function(e){GH.RapidBoard.Util.InlineEditable.updateView(e)},renderView:GH.RapidBoard.Util.InlineEditable.defaultTextRenderView,postEdit:function(e){},startEdit:GH.RapidBoard.Util.InlineEditable.startEdit};i&&AJS.$.extend(!0,t,i);var a=AJS.$(document);a.off("click",e).on("click",e,t,function(e){var i=e.data,a=i.getViewElement.call(this,e);t.startEdit(a,i)})},GH.RapidBoard.Util.InlineEditable.startEdit=function(e,i){var t;if(i.getData&&(t=i.getData(e,i)),t){if(t.viewElement=e,t.options=i,i.preEdit){var a=i.preEdit(t);if(a===!1)return}GH.RapidBoard.Util.InlineEditable.activeEdits.push(t);var n=i.renderEdit(t);t.editElement=n,AJS.$(t.viewElement).replaceWith(t.editElement),i.activate&&i.activate(t)}},GH.RapidBoard.Util.InlineEditable.cancelEdit=function(e){e.canceled=!0,e.editElement.replaceWith(e.viewElement),GH.Validation.clearContextualErrors(e.viewElement),e.options.postEdit&&e.options.postEdit(e),GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits(e)},GH.RapidBoard.Util.InlineEditable.submitChanges=function(e){var i=e.options.validate(e);return i?void e.options.save(e):void e.options.activate(e)},GH.RapidBoard.Util.InlineEditable.updateView=function(e){e.updated=!0;var i=e.options.renderView(e);e.viewElement=i,e.editElement.replaceWith(i),GH.Validation.clearContextualErrors(e.viewElement),e.options.postEdit&&e.options.postEdit(e),GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits(e)},GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits=function(e){GH.RapidBoard.Util.InlineEditable.activeEdits=_.without(GH.RapidBoard.Util.InlineEditable.activeEdits,e)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/configuration/InlineEditField.soy' */
// This file was automatically generated from InlineEditField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.inlineeditfield.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.inlineeditfield == 'undefined') { GH.tpl.inlineeditfield = {}; }


GH.tpl.inlineeditfield.renderBasicTextView = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.canEdit) ? ' class="field-value ghx-editable js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" tabindex="0"' : ' class="field-value ghx-readonly"') + ' data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + ((opt_data.fieldValue) ? soy.$$escapeHtml(opt_data.fieldValue) : '') + '"' + ((opt_data.defaultValue) ? ' data-defaultvalue="' + soy.$$escapeHtml(opt_data.defaultValue) + '"' : '') + ' data-maxdisplaylength="' + ((opt_data.maxDisplayLength) ? soy.$$escapeHtml(opt_data.maxDisplayLength) : '') + '" >' + ((opt_data.defaultValue && ! opt_data.displayValue) ? soy.$$escapeHtml(opt_data.defaultValue) : (opt_data.maxDisplayLength) ? soy.$$truncate(soy.$$escapeHtml(opt_data.displayValue), opt_data.maxDisplayLength, true) : soy.$$escapeHtml(opt_data.displayValue)) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderBasicTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderBasicTextView';
}


GH.tpl.inlineeditfield.renderBasicTextFieldEdit = function(opt_data, opt_ignored) {
  return '<input type="text" name="' + soy.$$escapeHtml(opt_data.fieldName) + '" class="text js-editing-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + ' ' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '" ' + ((opt_data.maxLength) ? 'maxlength="' + soy.$$escapeHtml(opt_data.maxLength) + '"' : '') + '>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderBasicTextFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderBasicTextFieldEdit';
}


GH.tpl.inlineeditfield.renderUserPickerFieldEdit = function(opt_data, opt_ignored) {
  return '<span><select class="js-default-user-picker" name="' + soy.$$escapeHtml(opt_data.name) + '">' + ((opt_data.data.avatarUrl) ? '<option selected="selected" style="background-image:url(\'' + soy.$$escapeHtml(opt_data.data.avatarUrl) + '\')" value="' + soy.$$escapeHtml(opt_data.data.value) + '">' : '<option selected="selected" value="' + soy.$$escapeHtml(opt_data.data.value) + '">') + ((opt_data.data.displayName) ? soy.$$escapeHtml(opt_data.data.displayName) : soy.$$escapeHtml(opt_data.data.value)) + '</option></select></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderUserPickerFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderUserPickerFieldEdit';
}


GH.tpl.inlineeditfield.renderDatePickerFieldEdit = function(opt_data, opt_ignored) {
  return '<span><input id="ghx-datepicker-' + soy.$$escapeHtml(opt_data.fieldName) + '" class="text medium-field js-editing-field" type="text" value="' + soy.$$escapeHtml(opt_data.fieldValue) + '"><span id="ghx-datepicker-' + soy.$$escapeHtml(opt_data.fieldName) + '_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar js-editing-field" title="' + soy.$$escapeHtml('Edit end date') + '">' + soy.$$escapeHtml('Edit') + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderDatePickerFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderDatePickerFieldEdit';
}


GH.tpl.inlineeditfield.renderPencilTextView = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.canEdit) ? ' class="field-value ghx-editable-secondary js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" tabindex="0"' : ' class="field-value ghx-readonly-secondary"') + ' data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" >' + soy.$$escapeHtml(opt_data.displayValue) + ((opt_data.canEdit) ? '<span class="js-edit-pencil ghx-icon ghx-icon-edit" title="' + soy.$$escapeHtml('Click to edit') + '"></span>' : '') + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderPencilTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderPencilTextView';
}


GH.tpl.inlineeditfield.renderRemoteTriggeredTextView = function(opt_data, opt_ignored) {
  return '<span class="field-value js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" >' + soy.$$escapeHtml(opt_data.displayValue) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderRemoteTriggeredTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderRemoteTriggeredTextView';
}


GH.tpl.inlineeditfield.renderJQLAutocomplete = function(opt_data, opt_ignored) {
  return '<span><textarea class="js-jql-autocomplete-field textarea" name="' + soy.$$escapeHtml(opt_data.name) + '" id="' + soy.$$escapeHtml(opt_data.namespace) + '-jql-' + ((opt_data.id) ? soy.$$escapeHtml(opt_data.id) : 'create') + '" cols="20" rows="2">' + ((opt_data.value) ? soy.$$escapeHtml(opt_data.value) : '') + '</textarea><span id="' + soy.$$escapeHtml(opt_data.namespace) + '-jql-errormsg-' + ((opt_data.id) ? soy.$$escapeHtml(opt_data.id) : 'create') + '" class="icon jqlgood js-jql-autocomplete-error"><span></span></span></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderJQLAutocomplete.soyTemplateName = 'GH.tpl.inlineeditfield.renderJQLAutocomplete';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.resizable.js' */
!function(t,e){function i(t){return parseInt(t,10)||0}function s(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,alsoResizeMirror:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,h,n,o=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)s=t.trim(e[i]),n="ui-resizable-"+s,h=t("<div class='ui-resizable-handle "+n+"'></div>"),h.css({zIndex:a.zIndex}),"se"===s&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(h);this._renderAxis=function(e){var i,s,h,n;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),h=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(h,n),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=h&&h[1]?h[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){a.disabled||o.resizing||(t(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,h=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(h=!0);return!this.options.disabled&&h},_mouseStart:function(e){var s,h,n,o=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),s=i(this.helper.css("left")),h=i(this.helper.css("top")),o.containment&&(s+=t(o.containment).scrollLeft()||0,h+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:h},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:s,top:h},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),l.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s=this.helper,h={},n=this.originalMousePosition,o=this.axis,a=this.position.top,l=this.position.left,r=this.size.width,p=this.size.height,d=e.pageX-n.left||0,g=e.pageY-n.top||0,f=this._change[o];return!!f&&(i=f.apply(this,[e,d,g]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==a&&(h.top=this.position.top+"px"),this.position.left!==l&&(h.left=this.position.left+"px"),this.size.width!==r&&(h.width=this.size.width+"px"),this.size.height!==p&&(h.height=this.size.height+"px"),s.css(h),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(h)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){this.resizing=!1;var i,s,h,n,o,a,l,r=this.options,p=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),h=s&&t.ui.hasScroll(i[0],"left")?0:p.sizeDiff.height,n=s?0:p.sizeDiff.width,o={width:p.helper.width()-n,height:p.helper.height()-h},a=parseInt(p.element.css("left"),10)+(p.position.left-p.originalPosition.left)||null,l=parseInt(p.element.css("top"),10)+(p.position.top-p.originalPosition.top)||null,r.animate||this.element.css(t.extend(o,{top:l,left:a})),p.helper.height(p.size.height),p.helper.width(p.size.width),this._helper&&!r.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,h,n,o,a=this.options;o={minWidth:s(a.minWidth)?a.minWidth:0,maxWidth:s(a.maxWidth)?a.maxWidth:1/0,minHeight:s(a.minHeight)?a.minHeight:0,maxHeight:s(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,h=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),h>o.minHeight&&(o.minHeight=h),i<o.maxWidth&&(o.maxWidth=i),n<o.maxHeight&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),s(t.left)&&(this.position.left=t.left),s(t.top)&&(this.position.top=t.top),s(t.height)&&(this.size.height=t.height),s(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,h=this.axis;return s(t.height)?t.width=t.height*this.aspectRatio:s(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===h&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===h&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,h=s(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=s(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=s(t.width)&&e.minWidth&&e.minWidth>t.width,a=s(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,r=this.position.top+this.size.height,p=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),h&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&p&&(t.left=l-e.minWidth),h&&p&&(t.left=l-e.maxWidth),a&&d&&(t.top=r-e.minHeight),n&&d&&(t.top=r-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,h,n=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(h=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")],s=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);h.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,h=this.originalPosition;return{top:h.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("resizable"),s=i.options,h=i._proportionallyResizeElements,n=h.length&&/textarea/i.test(h[0].nodeName),o=n&&t.ui.hasScroll(h[0],"left")?0:i.sizeDiff.height,a=n?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-o},r=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,p=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,p&&r?{top:p,left:r}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};h&&h.length&&t(h[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,s,h,n,o,a,l,r=t(this).data("resizable"),p=r.options,d=r.element,g=p.containment,f=g instanceof t?g.get(0):/parent/.test(g)?d.parent().get(0):g;f&&(r.containerElement=t(f),/document/.test(g)||g===document?(r.containerOffset={left:0,top:0},r.containerPosition={left:0,top:0},r.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(f),s=[],t(["Top","Right","Left","Bottom"]).each(function(t,h){s[t]=i(e.css("padding"+h))}),r.containerOffset=e.offset(),r.containerPosition=e.position(),r.containerSize={height:e.innerHeight()-s[3],width:e.innerWidth()-s[1]},h=r.containerOffset,n=r.containerSize.height,o=r.containerSize.width,a=t.ui.hasScroll(f,"left")?f.scrollWidth:o,l=t.ui.hasScroll(f)?f.scrollHeight:n,r.parentData={element:f,left:h.left,top:h.top,width:a,height:l}))},resize:function(e){var i,s,h,n,o=t(this).data("resizable"),a=o.options,l=o.containerOffset,r=o.position,p=o._aspectRatio||e.shiftKey,d={top:0,left:0},g=o.containerElement;g[0]!==document&&/static/.test(g.css("position"))&&(d=l),r.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),p&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=a.helper?l.left:0),r.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),p&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-d.left:o.offset.left-d.left)+o.sizeDiff.width),s=Math.abs((o._helper?o.offset.top-d.top:o.offset.top-l.top)+o.sizeDiff.height),h=o.containerElement.get(0)===o.element.parent().get(0),n=/relative|absolute/.test(o.containerElement.css("position")),h&&n&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,p&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,p&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var e=t(this).data("resizable"),i=e.options,s=e.containerOffset,h=e.containerPosition,n=e.containerElement,o=t(e.helper),a=o.offset(),l=o.outerWidth()-e.sizeDiff.width,r=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r}),e._helper&&!i.animate&&/static/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("resizable"),h=s.options,n=s.originalSize,o=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(e,s){t(e).each(function(){var e=t(this),h=t(this).data("ui-resizable-alsoresize"),n={},o=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(h[e]||0)+(a[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})};"object"!=typeof h.alsoResize||h.alsoResize.nodeType?l(h.alsoResize):t.each(h.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","alsoResizeMirror",{start:function(){var e=t(this).data("resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResizeMirror||i.alsoResizeMirror.parentNode?s(i.alsoResizeMirror):i.alsoResizeMirror.length?(i.alsoResizeMirror=i.alsoResizeMirror[0],s(i.alsoResizeMirror)):t.each(i.alsoResizeMirror,function(t){s(t)})},resize:function(e,i){var s=t(this).data("resizable"),h=s.options,n=s.originalSize,o=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(e,s){t(e).each(function(){var e=t(this),h=t(this).data("ui-resizable-alsoresize"),n={},o=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(h[e]||0)-(a[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})};"object"!=typeof h.alsoResizeMirror||h.alsoResizeMirror.nodeType?l(h.alsoResizeMirror):t.each(h.alsoResizeMirror,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("resizable"),i=e.options,s=e.size,h=e.originalSize,n=e.originalPosition,o=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,r=a[1]||1,p=Math.round((s.width-h.width)/l)*l,d=Math.round((s.height-h.height)/r)*r,g=h.width+p,f=h.height+d,c=i.maxWidth&&i.maxWidth<g,u=i.maxHeight&&i.maxHeight<f,m=i.minWidth&&i.minWidth>g,z=i.minHeight&&i.minHeight>f;i.grid=a,m&&(g+=l),z&&(f+=r),c&&(g-=l),u&&(f-=r),/^(se|s|e)$/.test(o)?(e.size.width=g,e.size.height=f):/^(ne)$/.test(o)?(e.size.width=g,e.size.height=f,e.position.top=n.top-d):/^(sw)$/.test(o)?(e.size.width=g,e.size.height=f,e.position.left=n.left-p):(e.size.width=g,e.size.height=f,e.position.top=n.top-d,e.position.left=n.left-p)}}),t.fn.agileResizable=t.fn.resizable}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.droppable.js' */
!function(e,t){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current;if(!s||(s.currentItem||s.element)[0]==this.element[0])return!1;var o=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==s.options.scope&&t.accept.call(t.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return o=!0,!1}),!o&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.23"}),e.ui.intersect=function(t,i,s){if(!i.offset)return!1;var o=(t.positionAbs||t.position.absolute).left,r=o+t.helperProportions.width,n=(t.positionAbs||t.position.absolute).top,a=n+t.helperProportions.height,l=i.offset.left,p=l+i.proportions.width,h=i.offset.top,c=h+i.proportions.height;switch(s){case"fit":return l<=o&&r<=p&&h<=n&&a<=c;case"intersect":return l<o+t.helperProportions.width/2&&r-t.helperProportions.width/2<p&&h<n+t.helperProportions.height/2&&a-t.helperProportions.height/2<c;case"pointer":var d=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,u=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,f=e.ui.isOver(u,d,h,l,i.proportions.height,i.proportions.width);return f;case"touch":return(n>=h&&n<=c||a>=h&&a<=c||n<h&&a>c)&&(o>=l&&o<=p||r>=l&&r<=p||o<l&&r>p);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var n=0;n<s.length;n++)if(!(s[n].options.disabled||t&&!s[n].accept.call(s[n].element[0],t.currentItem||t.element))){for(var a=0;a<r.length;a++)if(r[a]==s[n].element[0]){s[n].proportions.height=0;continue e}s[n].visible="none"!=s[n].element.css("display"),s[n].visible&&("mousedown"==o&&s[n]._activate.call(s[n],i),s[n].offset=s[n].element.offset(),s[n].proportions={width:s[n].element[0].offsetWidth,height:s[n].element[0].offsetHeight})}},drop:function(t,i){var s=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s=e.ui.intersect(t,this,this.options.tolerance),o=s||1!=this.isover?s&&0==this.isover?"isover":null:"isout";if(o){var r;if(this.options.greedy){var n=this.element.parents(":data(droppable):eq(0)");n.length&&(r=e.data(n[0],"droppable"),r.greedyChild="isover"==o?1:0)}r&&"isover"==o&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[o]=1,this["isout"==o?"isover":"isout"]=0,this["isover"==o?"_over":"_out"].call(this,i),r&&"isout"==o&&(r.isout=0,r.isover=1,r._over.call(r,i))}}})},dragStop:function(t,i){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.fn.agileDroppable=e.fn.droppable}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.sortable.js' */
!function(t,e){t.widget("ui.sortable",t.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,axisAdjusted:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",helperAdjusted:!1,items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",intersectionOverride:!1,helperProportions:!1,zIndex:1e3},_create:function(){this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&(/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData("sortable-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);var s=null,o=this;t(e.target).parents().each(function(){if(t.data(this,"sortable-item")==o)return s=t(this),!1});if(t.data(e.target,"sortable-item")==o&&(s=t(e.target)),!s)return!1;if(this.options.handle&&!i){var r=!1;if(t(this.options.handle,s).find("*").andSelf().each(function(){this==e.target&&(r=!0)}),!r)return!1}return this.currentItem=s,this._removeCurrentsFromItems(),!0},_mouseStart:function(i,s,o){var r=this.options,n=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(i),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),"function"==typeof this.options.additionalScrollParents?this.additionalScrollParents=this.options.additionalScrollParents():this.additionalScrollParents=e,this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.options.initializeTopAndLeft&&(this.helper[0].style.left=this.offset.left+"px",this.helper[0].style.top=this.offset.top+"px"),t.extend(this.offset,{click:{left:i.pageX-this.offset.left,top:i.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(i),this.originalPageX=i.pageX,this.originalPageY=i.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),"function"==typeof this.options.axisAdjusted&&this.options.axisAdjusted.apply(this),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.additionalScrollParents&&(this.additionalOverflowOffsets=[],this.additionalOverflowSizes=[],t.each(this.additionalScrollParents,function(e,i){var s=t(i);n.additionalOverflowOffsets[e]=s.offset(),n.additionalOverflowSizes[e]={width:s.width(),height:s.height()}})),this._trigger("start",i,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!o)for(var h=this.containers.length-1;h>=0;h--)this.containers[h]._trigger("activate",i,n._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&setTimeout(function(){t.ui.ddmanager.prepareOffsets(n,i)},0),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(i),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,s=!1;if(this.options.ignoreOriginalScroll||(this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(e.pageY-t(document).scrollTop()<i.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed)),e.pageX-t(document).scrollLeft()<i.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),this.additionalScrollParents){var o=this;t.each(this.additionalScrollParents,function(t,r){var n=o.additionalOverflowOffsets[t],h=o.additionalOverflowSizes[t];n.left<=e.pageX&&e.pageX<n.left+h.width&&(n.top+r.offsetHeight-e.pageY<i.scrollSensitivity?r.scrollTop=s=r.scrollTop+i.scrollSpeed:e.pageY-n.top<i.scrollSensitivity&&(r.scrollTop=s=r.scrollTop-i.scrollSpeed)),n.top<=e.pageY&&e.pageY<n.top+h.height&&(n.left+r.offsetWidth-e.pageX<i.scrollSensitivity?r.scrollLeft=s=r.scrollLeft+i.scrollSpeed:e.pageX-n.left<i.scrollSensitivity&&(r.scrollLeft=s=r.scrollLeft-i.scrollSpeed))})}s&&i.containment&&this._setContainment(),s!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),"function"==typeof this.options.helperAdjusted&&this.options.helperAdjusted.apply(this);var r=this.element.offset(),n={width:this.element.width(),height:this.element.height()};if(r.left<=e.pageX&&e.pageX<=r.left+n.width&&r.top<=e.pageY&&e.pageY<=r.top+n.height)for(var h=this.items.length-1;h>=0;h--){var a=this.items[h],l=a.item[0],c="function"==typeof this.options.intersectionOverride?this.options.intersectionOverride.apply(this,[a]):this._intersectsWithPointer(a);if(c&&!(l==this.currentItem[0]||this.placeholder[1==c?"next":"prev"]()[0]==l||t.ui.contains(this.placeholder[0],l)||"semi-dynamic"==this.options.type&&t.ui.contains(this.element[0],l))){if(this.direction=1==c?"down":"up","pointer"!=this.options.tolerance&&"function"!=typeof this.options.intersectionOverride&&!this._intersectsWithSides(a))break;this._rearrange(e,a),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,o=s.placeholder.offset();s.reverting=!0,t(this.helper).animate({left:o.left-this.offset.parent.left-s.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:o.top-this.offset.parent.top-s.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){var e=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,e._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,e._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,o=s+this.helperProportions.height,r=t.left,n=r+t.width,h=t.top,a=h+t.height,l=this.offset.click.top,c=this.offset.click.left,p=s+l>h&&s+l<a&&e+c>r&&e+c<n;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<n&&h<s+this.helperProportions.height/2&&o-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),s=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=i&&s,r=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return!!o&&(this.floating?n&&"right"==n||"down"==r?2:1:r&&("down"==r?2:1))},_intersectsWithSides:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),s=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"==r&&s||"left"==r&&!s:o&&("down"==o&&i||"up"==o&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i=[],s=[],o=this._connectWith();if(o&&e)for(var r=o.length-1;r>=0;r--)for(var n=t(o[r]),h=n.length-1;h>=0;h--){var a=t.data(n[h],"sortable");a&&a!=this&&!a.options.disabled&&s.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}s.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var r=s.length-1;r>=0;r--)s[r][0].each(function(){i.push(this)});return t(i)},_removeCurrentsFromItems:function(){for(var t=this.currentItem.find(":data(sortable-item)"),e=0;e<this.items.length;e++)for(var i=0;i<t.length;i++)t[i]==this.items[e].item[0]&&this.items.splice(e,1)},_refreshItems:function(e){this.items=[],this.containers=[this];var i=this.items,s=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],o=this._connectWith();if(o)for(var r=o.length-1;r>=0;r--)for(var n=t(o[r]),h=n.length-1;h>=0;h--){var a=t.data(n[h],"sortable");a&&a!=this&&!a.options.disabled&&(s.push([t.isFunction(a.options.items)?a.options.items.call(a.element[0],e,{item:this.currentItem}):t(a.options.items,a.element),a]),this.containers.push(a))}for(var r=s.length-1;r>=0;r--)for(var l=s[r][1],c=s[r][0],h=0,p=c.length;h<p;h++){var f=t(c[h]);f.data("sortable-item",l),i.push({item:f,instance:l,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item;e||(s.width=o.outerWidth(),s.height=o.outerHeight());var r=o.offset();s.left=r.left,s.top=r.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var r=this.containers[i].element.offset();this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(e){var i=e||this,s=i.options;if(!s.placeholder||s.placeholder.constructor==String){var o=s.placeholder;s.placeholder={element:function(){var e=t(document.createElement(i.currentItem[0].nodeName)).addClass(o||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return o||(e.style.visibility="hidden"),e},update:function(t,e){o&&!s.forcePlaceholderSize||(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=t(s.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),s.placeholder.update(i,i.placeholder)},_contactContainers:function(e){for(var i=null,s=null,o=this.containers.length-1;o>=0;o--)if(!t.ui.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(i&&t.ui.contains(this.containers[o].element[0],i.element[0]))continue;i=this.containers[o],s=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",e,this._uiHash(this)),this.containers[o].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1;else if(this.currentContainer!=this.containers[s]){for(var r=1e4,n=null,h=this.positionAbs[this.containers[s].floating?"left":"top"],a=this.items.length-1;a>=0;a--)if(t.ui.contains(this.containers[s].element[0],this.items[a].item[0])){var l=this.items[a][this.containers[s].floating?"left":"top"];Math.abs(l-h)<r&&(r=Math.abs(l-h),n=this.items[a])}if(!n&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[s],n?this._rearrange(e,n,null,!0):this._rearrange(e,null,this.containers[s].element,!0),this._trigger("change",e,this._uiHash()),this.containers[s]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(""==s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.options.helperProportions?this.helperProportions=this.options.helperProportions:this.helperProportions={width:this.helper.outerWidth()+(parseInt(this.helper.css("padding-left"))||0)+(parseInt(this.helper.css("padding-right"))||0)+(parseInt(this.helper.css("border-left-width"))||0)+(parseInt(this.helper.css("border-right-width"))||0)+(parseInt(this.helper.css("margin-left"))||0)+(parseInt(this.helper.css("margin-right"))||0),height:this.helper.outerHeight()+(parseInt(this.helper.css("padding-top"))||0)+(parseInt(this.helper.css("padding-bottom"))||0)+(parseInt(this.helper.css("border-top-width"))||0)+(parseInt(this.helper.css("border-bottom-width"))||0)+(parseInt(this.helper.css("margin-top"))||0)+(parseInt(this.helper.css("margin-bottom"))||0)}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),"document"!=e.containment&&"window"!=e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),"function"==typeof e.containment)this.containment=e.containment.apply(this);else if(!/^(document|window|parent)$/.test(e.containment)){var i=t(e.containment)[0],s=t(e.containment).offset(),o="hidden"!=t(i).css("overflow");this.containment=[s.left+(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0)-this.margins.top,s.left+(o?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(o?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"==e?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*s),left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*s)}},_generatePosition:function(e){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var r=e.pageX,n=e.pageY;if(this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top)),i.grid)){var h=this.originalPageY+Math.round((n-this.originalPageY)/i.grid[1])*i.grid[1];n=this.containment&&(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+i.grid[1]:h-i.grid[1]:h;var a=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0];r=this.containment&&(a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2])?a-this.offset.click.left<this.containment[0]?a+i.grid[0]:a-i.grid[0]:a}return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this,r=this.counter;window.setTimeout(function(){r==o.counter&&o.refreshPositions(!s)},0)},_clear:function(e,i){this.reverting=!1;var s=[];if(!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var o in this._storedCSS)"auto"!=this._storedCSS[o]&&"static"!=this._storedCSS[o]||(this._storedCSS[o]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||s.push(function(t){this._trigger("update",t,this._uiHash())}),!t.ui.contains(this.element[0],this.currentItem[0])){i||s.push(function(t){this._trigger("remove",t,this._uiHash())});for(var o=this.containers.length-1;o>=0;o--)t.ui.contains(this.containers[o].element[0],this.currentItem[0])&&!i&&(s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.containers[o])),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.containers[o])))}for(var o=this.containers.length-1;o>=0;o--)i||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",e,this._uiHash());for(var o=0;o<s.length;o++)s[o].call(this,e);this._trigger("stop",e,this._uiHash())}return!1}if(i||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var o=0;o<s.length;o++)s[o].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.extend(t.ui.sortable,{version:"1.8.11-greenhopper"}),t.fn.agileSortable=t.fn.sortable}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.ui.touch-punch.js' */
!function(o){function t(o,t){if(!(o.originalEvent.touches.length>1)){o.preventDefault();var e=o.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(n)}}if(o.support.touch="ontouchend"in document,o.support.touch){var e,n=o.ui.mouse.prototype,u=n._mouseInit;n._touchStart=function(o){var n=this;!e&&n._mouseCapture(o.originalEvent.changedTouches[0])&&(e=!0,n._touchMoved=!1,t(o,"mouseover"),t(o,"mousemove"),t(o,"mousedown"))},n._touchMove=function(o){e&&(this._touchMoved=!0,t(o,"mousemove"))},n._touchEnd=function(o){e&&(t(o,"mouseup"),t(o,"mouseout"),this._touchMoved||t(o,"click"),e=!1)},n._mouseInit=function(){var t=this;t.element.bind("touchstart",o.proxy(t,"_touchStart")).bind("touchmove",o.proxy(t,"_touchMove")).bind("touchend",o.proxy(t,"_touchEnd")),u.call(t)}}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.keygen.js' */
!function(e,t){e.KeyGenerator=function(){var e=["THE","A","AN","AS","AND","OF","OR"],n={},a=function(e){return e.join("").length},r=function(n){return t.grep(n,function(n,a){return t.inArray(n,e)===-1})},o=function(e){var n="";return t.each(e,function(e,t){n+=t.charAt(0)}),n},u=function(e){var t,n=!1;for(t=0;t<e.length;t++)if(i(e[t]))n=!0;else if(n)return e.substring(0,t+1);return e},i=function(e){return e&&1===e.length&&e.search("[AEIOUY]")!==-1};return n[199]="C",n[231]="c",n[252]="u",n[251]="u",n[250]="u",n[249]="u",n[233]="e",n[234]="e",n[235]="e",n[232]="e",n[226]="a",n[228]="a",n[224]="a",n[229]="a",n[225]="a",n[239]="i",n[238]="i",n[236]="i",n[237]="i",n[196]="A",n[197]="A",n[201]="E",n[230]="ae",n[198]="Ae",n[244]="o",n[246]="o",n[242]="o",n[243]="o",n[220]="U",n[255]="Y",n[214]="O",n[241]="n",n[209]="N",{generateKey:function(e,i){i=t.extend({},i);var c="number"==typeof i.desiredKeyLength?i.desiredKeyLength:4,h="number"==typeof i.maxKeyLength?i.maxKeyLength:1/0;if(e=t.trim(e),!e)return"";for(var s=[],g=0,f=e.length;g<f;g++){var l=n[e.charCodeAt(g)];s.push(l?l:e[g])}e=s.join("");var d=[];t.each(e.split(/\s+/),function(e,t){t&&(t=t.replace(/[^a-zA-Z]/g,""),t=t.toUpperCase(),t.length&&d.push(t))}),c&&a(d)>c&&(d=r(d));var m;if(0==d.length)m="";else if(1==d.length){var v=d[0],y=u(v);m=h<v.length||Math.abs(v.length-c)>=Math.abs(y.length-c)?y:v}else{var K=a(d),x=o(d);m=h<K||Math.abs(K-c)>=Math.abs(x.length-c)?x:d.join("")}return h&&m.length>h&&(m=m.substr(0,h)),m}}};var n=e.KeyGenerator();t.fn.generateFrom=function(e,a){var r={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},o=t(this).first(),e=e.first(),a=t.extend({},r,a);return function(){var r=function(){return o.data("autosuggest")!==!1},u=function(e){o.val()&&o.data("lastGeneratedValue")!==o.val()&&o.data("autosuggest",!1)},i=function(e){o.data("lastGeneratedValue",e),o.val(e)},c=function(){u(o.val()),f()},h=function(e){s(e,c)},s=function(e,n){var r,o=t(e.target);r=function(){g(e),n(),o.is(":visible")&&o.data("checkHook",setTimeout(r,a.timeoutMS))},o.data("checkHook")||o.data("checkHook",setTimeout(r,0))},g=function(e){var n=t(e.target);clearTimeout(n.data("checkHook")),n.removeData("checkHook")},f=function(){r()&&i(n.generateKey(e.val(),{desiredKeyLength:a.desiredKeyLength,maxKeyLength:a.maxKeyLength}))};e.attr("maxlength",a.maxNameLength),o.attr("maxlength",a.maxKeyLength),o.css("text-transform","uppercase"),document.activeElement&&document.activeElement===e[0]&&h({target:e[0]}),e.focus(h),e.blur(g)}(),this}}(window,jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/lib/jquery/jquery.hoverIntent.js' */
!function(e){e.fn.ghHoverIntent=function(t,n,o){var r={interval:100,sensitivity:7,timeout:0};r="object"==typeof t?e.extend(r,t):e.isFunction(n)?e.extend(r,{over:t,out:n,selector:o}):e.extend(r,{over:t,out:t,selector:n});var v,u,i,s,h=function(e){v=e.pageX,u=e.pageY},a=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(i-v)+Math.abs(s-u)<r.sensitivity?(e(n).off("mousemove.hoverIntent",h),n.hoverIntent_s=1,r.over.apply(n,[t])):(i=v,s=u,n.hoverIntent_t=setTimeout(function(){a(t,n)},r.interval),void 0)},I=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,r.out.apply(t,[e])},c=function(t){var n=jQuery.extend({},t),o=this;o.hoverIntent_t&&(o.hoverIntent_t=clearTimeout(o.hoverIntent_t)),"mouseenter"==t.type?(i=n.pageX,s=n.pageY,e(o).on("mousemove.hoverIntent",h),1!=o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){a(n,o)},r.interval))):(e(o).off("mousemove.hoverIntent",h),1==o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){I(n,o)},r.timeout)))};return this.on({"mouseenter.hoverIntent":c,"mouseleave.hoverIntent":c},r.selector)}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ops/Collection.js' */
GH.Collection={},GH.Collection.Map=function(t){return this instanceof GH.Collection.Map?(this.clear(),_.forEach(t,function(t,e){this.put(e,t)},this),this):new GH.Collection.Map(t)},GH.Collection.Map.prototype.clear=function(){return this.length=0,this._valuesByKey={},this},GH.Collection.Map.prototype.forEach=function(t,e){return _.forEach(this._valuesByKey,t,e),this},GH.Collection.Map.prototype.get=function(t){return this._valuesByKey[t]},GH.Collection.Map.prototype.has=function(t){return _.has(this._valuesByKey,t)},GH.Collection.Map.prototype.keys=function(){return _.keys(this._valuesByKey)},GH.Collection.Map.prototype.put=function(t,e){return this.has(t)||this.length++,this._valuesByKey[t]=e,this},GH.Collection.Map.prototype.remove=function(t){return this.has(t)&&(delete this._valuesByKey[t],this.length--),this},GH.Collection.Map.prototype.replace=GH.Collection.Map,GH.Collection.Map.prototype.toPlainObject=function(){return _.extend({},this._valuesByKey)},GH.Collection.Map.prototype.values=function(){return _.values(this._valuesByKey)},GH.Collection.Set=function(){return this instanceof GH.Collection.Set?(this._map=new GH.Collection.Map,this.length=0,this.add.apply(this,arguments),this):GH.Collection.Set.apply(new GH.Collection.Set,arguments)},GH.Collection.Set.prototype.add=function(){var t=this._map;return _.forEach(arguments,function(e){t.put(e,!0)},this),this.length=t.length,this},GH.Collection.Set.prototype.clear=function(){return this.length=0,this._map.clear(),this},GH.Collection.Set.prototype.forEach=function(t,e){return this._map.forEach(function(o,i){return t.call(e,i)}),this},GH.Collection.Set.prototype.has=function(t){return this._map.has(t)},GH.Collection.Set.prototype.remove=function(){var t=this._map;return _.forEach(arguments,function(e){t.remove(e)},!0),this.length=t.length,this},GH.Collection.Set.prototype.replace=GH.Collection.Set,GH.Collection.Set.prototype.toArray=function(){return this._map.keys()},GH.Collection.OrderedSet=function(){return this instanceof GH.Collection.OrderedSet?(this.clear(),this.push.apply(this,arguments),this):GH.Collection.OrderedSet.apply(new GH.Collection.OrderedSet,arguments)},GH.Collection.OrderedSet.prototype.clear=function(){return this.length=0,this._values=[],this._positionByValue=new GH.Collection.Map,this},GH.Collection.OrderedSet.prototype.push=function(){var t=this._positionByValue,e=this._values;return _.forEach(arguments,function(o){t.has(o)||(t.put(o,e.length),e.push(o))},this),this._values=e,this.length=e.length,this},GH.Collection.OrderedSet.prototype.first=function(){return this.get(0)},GH.Collection.OrderedSet.prototype.forEach=function(t,e){return _.forEach(this._values,t,e),this},GH.Collection.OrderedSet.prototype.get=function(t){return this._values[t]},GH.Collection.OrderedSet.prototype.has=function(t){return this._positionByValue.has(t)},GH.Collection.OrderedSet.prototype.indexOf=function(t){var e=this._positionByValue.get(t);return _.isUndefined(e)?-1:e},GH.Collection.OrderedSet.prototype.last=function(){return this.get(this.length-1)},GH.Collection.OrderedSet.prototype.pop=function(){var t=this._values.pop();return this._positionByValue.remove(t),this.length=this._values.length,t},GH.Collection.OrderedSet.prototype.remove=function(){var t=this._values;return _.forEach(arguments,function(e){var o=_.indexOf(t,e);o!==-1&&(t=t.slice(0,o).concat(t.slice(o+1)))}),this.replace.apply(this,t),this},GH.Collection.OrderedSet.prototype.replace=GH.Collection.OrderedSet,GH.Collection.OrderedSet.prototype.shift=function(){var t=this._values,e=t.shift();return this.replace.apply(this,t),e},GH.Collection.OrderedSet.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},GH.Collection.OrderedSet.prototype.unshift=function(){var t=this._positionByValue,e=this._values;return _.forEach(arguments,function(o){t.has(o)||e.unshift(o)},this),this.replace.apply(this,e),this},GH.Collection.OrderedMap=function(t){return this instanceof GH.Collection.OrderedMap?(this.clear(),_.forEach(t,function(t,e){this.put(e,t)},this),this):new GH.Collection.OrderedMap(t)},GH.Collection.OrderedMap.prototype.clear=function(){return this.length=0,this._keys=[],this._values=[],this._indexByKey=new GH.Collection.Map,this._valueByKey=new GH.Collection.Map,this},GH.Collection.OrderedMap.prototype.forEach=function(t,e){for(var o=this._keys,i=this._values,n=0,r=o.length;n<r;n++)t.call(e,i[n],o[n],n);return this},GH.Collection.OrderedMap.prototype.get=function(t){return this._valueByKey.get(t)},GH.Collection.OrderedMap.prototype.getByIndex=function(t){return this._values[t]},GH.Collection.OrderedMap.prototype.getKeyByIndex=function(t){return this._keys[t]},GH.Collection.OrderedMap.prototype.has=function(t){return this._indexByKey.has(t)},GH.Collection.OrderedMap.prototype.indexOf=function(t){return this._indexByKey.indexOf(t)},GH.Collection.OrderedMap.prototype.keys=function(){return this._keys.slice(0)},GH.Collection.OrderedMap.prototype.put=function(t,e){return this.has(t)||(this._indexByKey.put(t,this.length),this._valueByKey.put(t,e),this._keys.push(t),this._values.push(e),this.length++),this},GH.Collection.OrderedMap.prototype.remove=function(t){var e=this._indexByKey.get(t);if(e!==-1){this._indexByKey.remove(t),this._valueByKey.remove(t);var o=this._keys;this._keys=o.slice(0,e).concat(o.slice(e+1));var i=this._values;this._values=i.slice(0,e).concat(i.slice(e+1)),this.length--}return this},GH.Collection.OrderedMap.prototype.replace=GH.Collection.OrderedMap,GH.Collection.OrderedMap.prototype.toPlainObject=function(){return this._valueByKey.toPlainObject()},GH.Collection.OrderedMap.prototype.values=function(){return this._values.slice(0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/FindProjectsDialog.js' */
define("jira-agile/rapid/ui/dialog/find-projects-dialog",["jquery"],function(e){"use strict";return function(){var t=function(t){e(t).trigger("aui-button-invoke",{bubbles:!0}),e("#browse_link-content").one("aui-dropdown2-show-after",o)},o=function(){var e=document.querySelector("#project_view_all_link"),t=document.querySelector("body");e.setAttribute("aria-controls","find-projects-dialog"),t.insertAdjacentHTML("beforeend",GH.tpl.dialogs.findprojects.renderFindProjectsDialog());var o=function(){t.removeChild(r),e.removeAttribute("aria-controls")},r=document.querySelector("#find-projects-dialog");r.addEventListener("aui-hide",o),document.querySelector("#find-projects-dialog-button").addEventListener("click",o)},r=document.querySelector("#browse_link");r&&r.hasAttribute("data-dropdown2-loaded")?t(r):e("html").on("jira-header-plugin-dropdown2-menu-loaded",function(e){"browse_link"===e.target.id&&t(e.target)})}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/FindProjectsDialog.soy' */
// This file was automatically generated from FindProjectsDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.findprojects.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.findprojects == 'undefined') { GH.tpl.dialogs.findprojects = {}; }


GH.tpl.dialogs.findprojects.renderFindProjectsDialog = function(opt_data, opt_ignored) {
  return '' + aui.inlineDialog2.inlineDialog2({content: '' + GH.tpl.dialogs.findprojects.findProjectsContent(null), id: 'find-projects-dialog', alignment: 'right top', open: true, extraClasses: 'aui-help'});
};
if (goog.DEBUG) {
  GH.tpl.dialogs.findprojects.renderFindProjectsDialog.soyTemplateName = 'GH.tpl.dialogs.findprojects.renderFindProjectsDialog';
}


GH.tpl.dialogs.findprojects.findProjectsContent = function(opt_data, opt_ignored) {
  return '<h6>' + soy.$$escapeHtml('Explore project types') + '</h6><p>' + soy.$$filterNoAutoescape('Compare sample Scrum and Kanban projects,\x3cbr/\x3eand see what best suits your team.') + '</p>' + aui.buttons.button({id: 'find-projects-dialog-button', text: 'Ok, got it!', type: 'default'});
};
if (goog.DEBUG) {
  GH.tpl.dialogs.findprojects.findProjectsContent.soyTemplateName = 'GH.tpl.dialogs.findprojects.findProjectsContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/gh-findProjectMenuHint.js' */
require(["jira/data/session-storage","jira-agile/rapid/ui/dialog/find-projects-dialog"],function(e,i){"use strict";e.getItem("gh-findProjectMenuHint")&&(i(),e.removeItem("gh-findProjectMenuHint"))});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/Animation.js' */
GH.RapidBoard.Animation=function(o){function r(o,r,e){return o.addClass(d).animate(r,e||a).promise().done(function(){o.removeClass(d)})}function e(e,t,n,i){var a=o(e);return a.css({height:t}),r(a,{height:n},i).done(function(){a.css({height:""})})}function t(e,t){var n=o(e),i=n.height();n.css("height","auto");var a=n.height();return n.css("height",i),r(n,{height:a},t).done(function(){n.css("height","auto")})}function n(e,t){var n=o(e);return r(n,{height:0},t)}function i(r,e,t){var n=o(r),i=e||"#fff",t=t||"#d6d6d6",a="#ebf2f9",c="#ccd9ea";n.addClass(d),n.stop().animate({"background-color":a,"border-top-color":c,"border-left-color":c,"border-right-color":c,"border-bottom-color":c},250).delay(1200).animate({"background-color":i,"border-top-color":t,"border-left-color":t,"border-right-color":t,"border-bottom-color":t},500).promise().done(function(){n.css({"background-color":"","border-top-color":"","border-left-color":"","border-right-color":"","border-bottom-color":""}),n.removeClass(d)})}var a=200,c=500,d="js-animation-inprogress";return{DEFAULT_DURATION:a,LONG_DURATION:c,animateHeight:e,animateHeightToAuto:t,animateHeightToZero:n,fadeElement:i}}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/RapidBoard.js' */
GH.RapidBoard.API_EVENT_CAUSE_BOARD_RELOAD="GH.RapidBoard.causeBoardReload",GH.RapidBoard.Analytics={},GH.RapidBoard.projectKey=void 0,function(){var a=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.Analytics.toolsMenu=new a("gh.rapidboard.toolsmenu")}(),GH.RapidBoard.gotoRapidBoardPage=function(a,e){window.location.href=GH.RapidBoard.getRapidBoardPageUrl(a,e)},GH.RapidBoard.getRapidBoardPageUrl=function(a,e){var i=_.isUndefined(e)?"&useStoredSettings=true":"&view="+e;return GH.Navigation.getCanonicRapidBoardPageUrl(a)+i},GH.RapidBoard.gotoRapidViewConfiguration=function(a,e){window.location.href=GH.RapidBoard.getRapidViewConfigurationUrl(a,e)},GH.RapidBoard.getRapidViewConfigurationUrl=function(a,e){var i=GH.Ajax.CONTEXT_PATH+"/secure/RapidView.jspa?rapidView="+a;return e&&(i=i+"&config="+e),i},GH.RapidBoard.copyRapidViewAndGotoConfiguration=function(a,e){GH.RapidBoard.Analytics.toolsMenu.trigger("copy"),GH.Ajax.put({url:"/rapidview/"+a+"/copy"}).done(function(a){var i=AJS.format("Successfully copied board \u003cstrong\u003e{0}\u003c/strong\u003e to \u003cstrong\u003e{1}\u003c/strong\u003e.",AJS.escapeHTML(String(e)),AJS.escapeHTML(String(a.success.name)));GH.Notification.addPageLoadMessage(i),GH.RapidBoard.gotoRapidViewConfiguration(a.success.id)})},GH.RapidBoard.printCardsInRapidBoard=function(){var a=require("jira-agile/rapid/ui/print/card-printing-controller");GH.RapidBoard.State.isPlanMode()?a.printBoardPlanView(GH.RapidBoard.ViewController.collectPrintablePlanIssues()):GH.RapidBoard.State.isWorkMode()&&a.printBoardWorkView(GH.RapidBoard.ViewController.collectPrintableWorkIssues())},GH.RapidBoard.getManageViewsPageUrl=function(){return GH.Ajax.CONTEXT_PATH+"/secure/ManageRapidViews.jspa"},GH.RapidBoard.gotoManageViewsPage=function(){window.location.href=GH.RapidBoard.getManageViewsPageUrl()},GH.RapidBoard.getCurrentPageReturnUrl=function(){var a=GH.RapidBoard.UrlState.getViewStateRequestParameterString(),e="/secure/RapidBoard.jspa?"+a;return encodeURIComponent(e)},GH.RapidBoard.reload=function(){var a=GH.RapidBoard.State.getRapidViewIdWithInfo();return new Promise(function(e){GH.RapidViewConfig.fetchConfiguration(a).done(function(i){return GH.RapidBoard.setNewViewData(i),a.viewId?GH.RapidBoard.ViewController.preload(a.viewId).then(e):e(!0)})})},GH.RapidBoard.setNewViewData=function(a){GH.RapidBoard.State.setRapidViewId(a.id),GH.RapidBoard.BoardHeader.update(a),GH.ViewActions.initViewActions(a),GH.ViewActions.on("boardToolsRendered",function(){var a=GH.RapidBoard.State.getMode(),e=a?a:"board";AJS.$("#board-tools-section-content .js-view-action-configure").bind("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software."+e+".boardmenu.click.configure-board"})})}),GH.RapidBoard.ViewController.update(a)},GH.RapidBoard.initListeners=function(a){GH.RapidBoard.projectKey=AJS.$('meta[name="ghx-project-key"]').attr("content"),GH.Layout.init(),GH.Dialog.CreateView.init(),GH.RapidBoard.BoardHeader.init(),GH.RapidBoard.ViewController.init(a),GH.RapidBoard.QuickCreate.init(),GH.RapidBoard.QuickEdit.init(),JIRA.bind(GH.RapidBoard.API_EVENT_CAUSE_BOARD_RELOAD,GH.RapidBoard.reload)},GH.RapidBoard.init=function(){if(!AJS.$("body.ghx-print-card-body").length){GH.RapidBoard.State.setNewIssueViewEnabled(AJS.$("#ghx-issue-fragment").length>0),GH.RapidBoard.AnalyticsClient=require("jira/analytics/web-client");var a=require("jira-agile/rapid/global-events");a.trigger("pre-initialization"),AJS.$("#gh").html(GH.tpl.board.x.renderRapidBoard()),AJS.$("body").addClass("ghx-scroll-columns"),AJS.$.support.touch&&AJS.$("#gh").removeClass("ghx-no-touch").addClass("ghx-touch"),AJS.$(GH).bind("ghx.rapidview.deleted",function(a,e){GH.Notification.addPageLoadMessage(e.message),GH.RapidBoard.gotoManageViewsPage()});var e=parseInt(GH.RapidBoard.UrlState.getCurrentUrlState().rapidView);return(_.isUndefined(e)||_.isNaN(e))&&(e=GH.RapidBoard.State.getRapidViewId()),new Promise(function(a){return GH.RapidViewConfig.fetchConfiguration(e).done(function(a){GH.RapidBoard.initListeners(a),GH.RapidBoard.State.initializeState(),GH.RapidBoard.reload(),GH.Poller.init(),GH.RapidBoard.fireShowBoardAnalytics(a)})})}},function(){GH.RapidBoard.refreshBoardData=function(){var a=parseInt(GH.RapidBoard.UrlState.getCurrentUrlState().rapidView),e=!0;return GH.WorkDataLoader.markDirty(),GH.WorkDataLoader.clearEtag(),GH.RapidViewConfig.fetchConfiguration(a,e).then(function(e){return e.isSimpleBoard&&location.reload(),GH.RapidBoard.fireShowBoardAnalytics(e),GH.RapidBoard.UrlState.loadState(),GH.RapidBoard.setNewViewData(e),Promise.all([GH.RapidBoard.ViewController.preload(a),GH.RapidBoard.ViewController.sidebarController.updateSidebar(a)])})}}(),GH.RapidBoard.loadNewBoard=function(a){return GH.RapidBoard.State.setRapidViewId(a),GH.RapidBoard.State.pushState(),GH.RapidBoard.refreshBoardData()},GH.RapidBoard.viewModelComparator=function(a,e){return"string"!=typeof a.name?-1:"string"!=typeof e.name?1:a.name.toLowerCase()<e.name.toLowerCase()?-1:a.name.toLowerCase()>e.name.toLowerCase()?1:0},GH.RapidBoard.fireShowBoardAnalytics=function(a){function e(){JIRA.SmartAjax.makeRequest({type:"GET",contentType:"application/json",url:GH.Ajax.CONTEXT_PATH+"/rest/api/2/project/"+GH.RapidBoard.projectKey,success:function(a){"projectTypeKey"in a&&"software"!==a.projectTypeKey&&AJS.trigger("analytics",{name:"gh.rapidboard.show.global",data:{projectType:a.projectTypeKey}})}})}var i=!_.isUndefined(a);i&&(AJS.trigger("analytics",{name:"gh.rapidboard.show"}),AJS.trigger("analytics",{name:"gh.rapidboard.show."+(a.sprintSupportEnabled?"scrum":"kanban"),data:{boardId:a.id,kanbanBacklogEnabled:!!a.kanPlanEnabled,locationType:a.locationType}}),_.isEmpty(GH.RapidBoard.projectKey)||e())},GH.RapidBoard.sendIssueUpdatedTrackEvent=function(a,e){var i=GH.WorkController.rapidViewData,r=GH.RapidBoard.State.getBoardTypeForAnalytics(),o={source:GH.RapidBoard.State.isPlanMode()?"backlogScreen":"boardScreen",actionSubject:"issue",action:"updated",actionSubjectId:a.id,containerType:"project",containerId:a.projectId,objectType:"issue",objectId:a.id,attributes:{issueTypeId:a.typeId,projectType:"software",boardId:i.id,boardType:r,updatedItems:e}};GH.RapidBoard.AnalyticsClient.sendTrackEvent(o)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/InlineDialog.js' */
define("jira-agile/dialog/inline",["_","aui/inline-dialog"],function(i,n){var e={create:function(i,e,l,r){return r=r||{},GH.InlineDialog.remove(i),r=GH.InlineDialog._addBlurTriggerOverride(r,e),n(AJS.$(e),i,l,r)},remove:function(i){AJS.$("#inline-dialog-"+i).remove()},registerInlineDialogHacks:function(i,n){var e=n&&n.disregardClickSelectors||[],l=n&&n.validateClickToCloseFn||!1;AJS.$(document).bind("showLayer",function(n,r,a){"inlineDialog"===r&&a.id===i&&(a._validateClickToClose=function(i){for(var n=this.id,r=0;r<e.length;r++){var a=AJS.$(i.target);if(a.parents(e[r]).length>0)return!1;if(a.is(e[r]))return!1}return!(AJS.$(i.target).parents("#inline-dialog-"+n).length>0)&&!(l&&!l(i))},AJS.$("body").unbind("click."+a.id+".inline-dialog-check"))})},preventCloseOnClick:function(i){AJS.$(document).on("click","#inline-dialog-"+i,function(i){i.stopPropagation()})},_addBlurTriggerOverride:function(n,e){var l=n.upfrontCallback;return i.defaults({upfrontCallback:function(){AJS.$(e).blur(),i.isFunction(l)&&l.apply(this,arguments)}},n)}};return e}),AJS.namespace("GH.InlineDialog",null,require("jira-agile/dialog/inline"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/SideInlineDialog.js' */
define("jira-agile/dialog/side-inline",["jira-agile/dialog/inline","_"],function(e,i){return{create:function(n,a,l,r){return r=r||{},i.defaults(r,{gravity:"w",offsetX:15,offsetY:0}),e.create(n,a,l,r)}}}),AJS.namespace("GH.SideInlineDialog",null,require("jira-agile/dialog/side-inline"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/CreateView.soy' */
// This file was automatically generated from CreateView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.createviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.createviewdialog == 'undefined') { GH.tpl.createviewdialog = {}; }


GH.tpl.createviewdialog.renderDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu"><li class="menu-item active-tab"><a href="#ghx-create-presets"><strong>' + soy.$$escapeHtml('Presets') + '</strong></a></li><li class="menu-item"><a href="#ghx-create-advanced"><strong>' + soy.$$escapeHtml('Advanced') + '</strong></a></li></ul><div class="tabs-pane active-pane" id="ghx-create-presets">' + GH.tpl.createviewdialog.renderPresets(null) + '</div><div class="tabs-pane" id="ghx-create-advanced">' + GH.tpl.createviewdialog.renderAdvanced(opt_data) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderDialog.soyTemplateName = 'GH.tpl.createviewdialog.renderDialog';
}


GH.tpl.createviewdialog.renderPresets = function(opt_data, opt_ignored) {
  return '<div class="ghx-options">' + GH.tpl.createviewdialog.renderScrum(null) + GH.tpl.createviewdialog.renderKanban(null) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderPresets.soyTemplateName = 'GH.tpl.createviewdialog.renderPresets';
}


GH.tpl.createviewdialog.renderScrum = function(opt_data, opt_ignored) {
  return '<div class="ghx-module ghx-scrum"><h2>' + soy.$$escapeHtml('Scrum') + '</h2><p class="ghx-module-description">' + soy.$$escapeHtml('Scrum is a method of development where the focus is on planning, committing and delivering time-boxed chunks of work called Sprints.') + '</p><p>' + soy.$$escapeHtml('Presets are:') + '</p><ul><li>' + soy.$$escapeHtml('Story swimlanes') + '</li><li>' + soy.$$escapeHtml('Story Points as estimation statistic') + '</li><li>' + soy.$$escapeHtml('Two-week iterations (starting today)') + '</li><li>' + soy.$$escapeHtml('Standard Quick Filters') + '</li><li>' + soy.$$escapeHtml('Issues ordered by Rank') + '</li><li>' + soy.$$escapeHtml('Columns: To Do, In Progress, Done') + '</li></ul><p>' + soy.$$escapeHtml('These settings can be changed later.') + '</p><button class="aui-button">' + soy.$$escapeHtml('Select Scrum') + '</button></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderScrum.soyTemplateName = 'GH.tpl.createviewdialog.renderScrum';
}


GH.tpl.createviewdialog.renderKanban = function(opt_data, opt_ignored) {
  return '<div class="ghx-module ghx-kanban"><h2>' + soy.$$escapeHtml('Kanban') + '</h2><p class="ghx-module-description">' + soy.$$escapeHtml('Kanban is a method of development where the focus is on visualising your workflow and limiting work-in-progress. This assists you in making incremental improvements to your existing process.') + '</p><p>' + soy.$$escapeHtml('Presets are:') + '</p><ul><li>' + soy.$$escapeHtml('Expedite swimlane') + '</li><li>' + soy.$$escapeHtml('Issue Count as column statistic') + '</li><li>' + soy.$$escapeHtml('Days in column indicator') + '</li><li>' + soy.$$escapeHtml('Standard Quick Filters') + '</li><li>' + soy.$$escapeHtml('Issues ordered by Rank') + '</li><li>' + soy.$$escapeHtml('Columns: To Do, In Progress, Done') + '</li></ul><p>' + soy.$$escapeHtml('These settings can be changed later.') + '</p><button class="aui-button">' + soy.$$escapeHtml('Select Kanban') + '</button></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderKanban.soyTemplateName = 'GH.tpl.createviewdialog.renderKanban';
}


GH.tpl.createviewdialog.renderAdvanced = function(opt_data, opt_ignored) {
  return '<form action="#" method="post" class="aui"><p>' + soy.$$escapeHtml('Advanced allows the creation of a Kanban board using an existing Jira Saved Filter') + '</p><div class="field-group"><label for="ghx-view-name">' + soy.$$escapeHtml('Board name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-view-name" name="name"></div><h3>' + soy.$$escapeHtml('Jira Filter') + '</h3><fieldset><div class="field-group" id="ghx-filter-picker"><label for="ghx-create-filter-select">' + soy.$$escapeHtml('Saved filter') + '</label>' + ((opt_data.canSeeSavedFilters) ? '<select id="ghx-create-filter-select" class="hidden"></select><div id="ghx-filter-error"></div>' : '<span class="field-value">' + soy.$$escapeHtml('There are no saved filters.') + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&amp;createNew=true">' + soy.$$escapeHtml('Create a filter now.') + '</a></span>') + '</div><div id="ghx-create-permissioninfo-container"></div></fieldset><fieldset><div class="field-group"><button id="ghx-create-advanced-submit" class="aui-button ' + ((! opt_data.canSeeSavedFilters) ? 'js-disabled' : '') + '"' + ((! opt_data.canSeeSavedFilters) ? ' disabled="disabled"' : '') + '>' + soy.$$escapeHtml('Create') + '</button></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderAdvanced.soyTemplateName = 'GH.tpl.createviewdialog.renderAdvanced';
}


GH.tpl.createviewdialog.renderCreateNewView = function(opt_data, opt_ignored) {
  return '<div class="ghx-module"><form class="aui"><fieldset><div class="field-group"><label for="name">' + soy.$$escapeHtml('Board Name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-dialog-create-view-viewname"></div><div class="field-group"><label for="projects">' + soy.$$escapeHtml('Projects') + '<span class="aui-icon icon-required"></span></label><select id="ghx-dialog-create-view-viewprojects" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml('Select the projects to be included in this board.') + '</div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderCreateNewView.soyTemplateName = 'GH.tpl.createviewdialog.renderCreateNewView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/CreateView.js' */
!function(){"use strict";var e=require("jira/ajs/select/single-select"),a=require("aui/tabs");GH.Dialog.CreateView={};var t=require("jira-agile/rapid/analytics-tracker");GH.Dialog.CreateView.analytics=new t("gh.create.view"),GH.Dialog.CreateView.init=function(){GH.Dialog.registerDialog(".js-view-action-create",GH.StartWizardView.startWizard),GH.Dialog.registerDialog(".js-view-action-create-scrum",GH.Dialog.CreateView.openCreateScrum),GH.Dialog.registerDialog(".js-view-action-create-kanban",GH.Dialog.CreateView.openCreateKanban)},GH.Dialog.CreateView.openCreateScrum=function(){GH.Dialog.CreateView.openPresetDialog("scrum")},GH.Dialog.CreateView.openCreateKanban=function(){GH.Dialog.CreateView.openPresetDialog("kanban")},GH.Dialog.CreateView.open=function(){GH.Ajax.get({url:"/rapidview/createmodel"},"createView").done(GH.Dialog.CreateView.openWizard)},GH.Dialog.CreateView.openWizard=function(e){var a=function(e){GH.Dialog.CreateView.analytics.trigger("cancel",e.curpage.toString())},t=GH.Dialog.create({width:600,height:600,id:"ghx-dialog-create-view",onCancelFn:a});GH.Dialog.CreateView.analytics.trigger("start"),GH.Dialog.CreateView.renderSelectPresetPage(t,e),t.addPage(),GH.Dialog.CreateView.renderSelectNameAndProjectsPage(t,!0),t.gotoPage(0),t.gotoPanel(0),t.show(),GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv),AJS.$(t.getCurrentPanel().body).trigger("contentRefresh")},GH.Dialog.CreateView.openPresetDialog=function(e){var a=function(e){GH.Dialog.CreateView.analytics.trigger("cancel",e.curpage.toString())},t=GH.Dialog.create({width:600,height:600,id:"ghx-dialog-create-view",onCancelFn:a});t.selectedPreset=e,GH.Dialog.CreateView.analytics.trigger("start",e),GH.Dialog.CreateView.renderSelectNameAndProjectsPage(t,!1),t.gotoPage(0),t.gotoPanel(0),t.show(),t.updateHeight(),GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv),AJS.$("#"+t.id).find("input:visible:first").focus()},GH.Dialog.CreateView.renderSelectPresetPage=function(a,t){function i(){a.nextPage(),a.updateHeight(),AJS.$("#"+a.id).find("input:visible:first").focus(),GH.Dialog.CreateView.prepareNotificationDiv=function(){var e=AJS.$(a.getCurrentPanel().body),t=AJS.$("<div/>");return t.addClass("dialog-panel-body").prependTo(e),a.updateHeight(),t},GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.CreateView.prepareNotificationDiv)}a.addHeader("Create Board"),AJS.$("#"+a.id).addClass("ghx-dialog-create-view");var r=AJS.$(GH.tpl.createviewdialog.renderDialog({canSeeSavedFilters:t.canSeeSavedFilters}));a.addPanel("Select a Preset",r,"ghx-dialog-create-view-page"),GH.Dialog.CreateView.setupTabs(a.id),GH.Dialog.addCancelButton(a);var n=AJS.$("#"+a.id).find(".ghx-kanban button"),o=AJS.$("#"+a.id).find(".ghx-scrum button");n.click(function(){a.selectedPreset="kanban",i()}),o.click(function(){a.selectedPreset="scrum",i()}),r.find("form").submit(function(){return GH.Dialog.CreateView.submitAdvanced(),!1});var l=AJS.$("#ghx-create-filter-select");if(l.size()>0){new e({element:l,width:300,removeOnUnSelect:!0,overlabel:"Start typing for Filters",itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:GH.Ajax.buildRestUrl("/savedfilter/list.json"),formatResponse:function(e){if(e.errors){var a=GH.Ajax._convertJiraErrors(e.errors),t={searchName:"#ghx-create-filter-select"};return GH.Ajax.handleContextualErrors(a,t),!1}AJS.$("#ghx-create-filter-select").siblings(".ghx-error").remove();var i=[];return AJS.$(e.filters).each(function(){i.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))}),i}}});l.bind("selected",function(e,a){GH.Dialog.CreateView.updatePermissionInfo(a.properties.savedFilter)}),l.bind("unselect",function(e){GH.Dialog.CreateView.updatePermissionInfo(null)})}var d=AJS.$("#ghx-create-advanced-submit");d.click(function(e){return a.disableControls(),GH.Dialog.CreateView.submitAdvanced(a),!1})},GH.Dialog.CreateView.renderSelectNameAndProjectsPage=function(e,a){var t=AJS.$("#"+e.id),i="Create Board";"scrum"==e.selectedPreset?i="Create Scrum Board":"kanban"==e.selectedPreset&&(i="Create Kanban Board"),e.addHeader(i),t.addClass("ghx-dialog");var r=AJS.$(GH.tpl.createviewdialog.renderCreateNewView());e.addPanel(i,r,"ghx-dialog-create-view-page"),a&&e.addButton("Back",function(e){e.prevPage(),e.updateHeight()},"aui-button");var n=function(){var a=AJS.$("#"+e.id).find(".ghx-next");d()?a.attr("disabled","disabled").addClass("js-disabled"):a.removeAttr("disabled").removeClass("js-disabled")},o=t.find("#ghx-dialog-create-view-viewname"),l=new GH.BoardLocationPicker({selector:"#ghx-dialog-create-view-viewprojects",projectsOnly:!0,change:n,currentProjectId:JIRA.API&&JIRA.API.Projects?JIRA.API.Projects.getCurrentProjectId():null}),d=function(){return!o.val()||!l.hasValue()||l.hasErrors()},s=function(e){if(d()){var a=AJS.$("#"+e.id).find(".ghx-next");return a.attr("disabled","disabled").addClass("js-disabled"),!1}return GH.Dialog.CreateView.submitPresets(e)};e.addButton("Create",s,"ghx-next aui-button"),r.find("form").submit(function(){return s(e),!1}),GH.Dialog.addCancelButton(e),t.find(".ghx-next").attr("disabled","disabled").addClass("js-disabled"),o.keyup(n)},GH.Dialog.CreateView.setupTabs=function(e){a.setup();var t=GH.Dialog.CreateView.State.getPreferredTab();t&&a.change(AJS.$("a[href="+t+"]")),AJS.$("#"+e+" .menu-item").click(function(){var e=AJS.$(this);GH.Dialog.CreateView.State.setPreferredTab(e.find("a:first").attr("href"))})},GH.Dialog.CreateView.submitPresets=function(e){AJS.$(e.getCurrentPanel().body).find(".ghx-error").remove();var a=e.selectedPreset,t={name:AJS.$("#ghx-dialog-create-view-viewname").val(),projectIds:AJS.$("#ghx-dialog-create-view-viewprojects").val(),preset:a},i={name:"#ghx-dialog-create-view-viewname",projectIds:"#ghx-dialog-create-view-viewprojects",preset:a},r=function(e){"scrum"==a?GH.Dialog.CreateView.handleCreateResult(e,function(e){return GH.RapidBoard.gotoRapidBoardPage(e,"planning")},"preset",a):GH.Dialog.CreateView.handleCreateResult(e,GH.RapidBoard.gotoRapidBoardPage,"preset",a)};GH.Ajax.post({url:"/rapidview/create/presets",data:t,errorContextMap:i}).done(r)},GH.Dialog.CreateView.submitAdvanced=function(e){var a=AJS.$("#ghx-view-name"),t=a.val(),i=AJS.$("#ghx-create-filter-select");if(!GH.Validation.notBlank(a,"Name is a required field"))return void e.enableControls();if(!GH.Validation.notBlank(i,"A saved filter is required","#ghx-filter-error"))return void e.enableControls();var r=i.val()||[];GH.Ajax.post({url:"/rapidview/create/advanced",data:{name:t,filterId:r[0]},errorContextMap:{name:"#ghx-view-name",filterId:"#ghx-create-filter-select"}}).done(function(e){GH.Dialog.CreateView.handleCreateResult(e,GH.RapidBoard.gotoRapidViewConfiguration,"advanced","advanced")}).fail(e.enableControls)},GH.Dialog.CreateView.handleCreateResult=function(e,a,t,i){GH.Dialog.CreateView.analytics.trigger("complete",i);var r=t!==i&&i;"simple"!==t&&GH.PersistentMessages.CreateViewMessage.setView(e.success.id,e.success.name,t,r),a(e.success.id)},GH.Dialog.CreateView.updatePermissionInfo=function(e){var a=null!=e?GH.tpl.rapid.view.renderPermissionInfo({savedFilter:e}):"";AJS.$("#ghx-create-permissioninfo-container").html(a)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/CreateViewState.js' */
GH.Dialog.CreateView.State={},GH.Dialog.CreateView.State.data={},GH.Dialog.CreateView.State.setPreferredTab=function(e){GH.storage.put("gh.dialog.createView.preferredTab",e,!0)},GH.Dialog.CreateView.State.getPreferredTab=function(){return GH.storage.get("gh.dialog.createView.preferredTab",!0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/BoardAdminsPicker.js' */
GH.RapidBoard.BoardAdminsPicker=function(e){this.selector=e.selector,this.change=e.change,this.initialData=e.initialData,this.editData=e.editData,this.blur=e.blur},GH.RapidBoard.BoardAdminsPicker.prototype.show=function(){var e=AJS.$(this.selector);this.select=e,this.multiselect=new AJS.MultiSelect({element:e,width:400,errorMessage:"",itemAttrDisplayed:"label",ajaxOptions:{url:GH.Ajax.CONTEXT_PATH+GH.Ajax.REST_URL_BASE+"/rapidviewconfig/boardadminspicker?maxResults=15",formatResponse:function(e){var r,t=new AJS.GroupDescriptor({weight:0,label:"Groups"}),i=new AJS.GroupDescriptor({weight:1,label:"Users"});return _.each(e.users,function(e){e.key=e.key||e.name;var t=e.displayName+" ("+e.name+")";r=GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor("user",e.key,t,t),i.addItem(r)}),_.each(e.groups,function(e){r=GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor("group",e.name,e.name,e.name),t.addItem(r)}),[t,i]},query:!0}}),this.multiselect._addMultipleItems(this.initialData),this.select.bind("unselect",this.change),this.select.bind("change",this.change),this.multiselect.$field.focus(),this.multiselect.$field.blur(this.blur)},GH.RapidBoard.BoardAdminsPicker.prototype.getAjaxValue=function(){var e=this.getValue(),r={userKeys:[],groupKeys:[]};return null==e?r:(_.each(e,function(e){var t=e.split(":"),i=t[0],a=t[1];t.length<2||("user"==i&&r.userKeys.push(a),"group"==i&&r.groupKeys.push(a))}),r)},GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor=function(e,r,t,i){return new AJS.ItemDescriptor({value:e+":"+r,label:t,html:AJS.escapeHTML(String(i))})},GH.RapidBoard.BoardAdminsPicker.prototype.hasValue=function(){return!!this.select.val()},GH.RapidBoard.BoardAdminsPicker.prototype.hasErrors=function(){return this.multiselect.$container.parent().find(".error").length>0},GH.RapidBoard.BoardAdminsPicker.prototype.getValue=function(){return this.select.val()},GH.RapidBoard.BoardAdminsPicker.prototype.getElement=function(){return this.select},GH.RapidBoard.BoardAdminsPicker.sortModel=function(e){var r=function(e,r){return e.displayName.toLowerCase().localeCompare(r.displayName.toLowerCase())};return{userKeys:e.userKeys.sort(r),groupKeys:e.groupKeys.sort(r)}},GH.RapidBoard.BoardAdminsPicker.getOrderedUnion=function(e){var r=GH.RapidBoard.BoardAdminsPicker.sortModel(e);return _.union(r.groupKeys,r.userKeys)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/FindView.soy' */
// This file was automatically generated from FindView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.findviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.findviewdialog == 'undefined') { GH.tpl.findviewdialog = {}; }


GH.tpl.findviewdialog.renderFindExistingView = function(opt_data, opt_ignored) {
  return '<div class="ghx-module"><form class="aui"><fieldset><div class="field-group"><label for="name">' + soy.$$escapeHtml('Board Name') + '<span class="aui-icon icon-required"></span></label><select id="ghx-welcome-find-viewname" class="hidden"></select><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches.') + '</div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.findviewdialog.renderFindExistingView.soyTemplateName = 'GH.tpl.findviewdialog.renderFindExistingView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/dialog/FindView.js' */
!function(){"use strict";var e=require("jira/ajs/select/single-select");GH.Dialog.FindView={};var i=require("jira-agile/rapid/analytics-tracker");GH.Dialog.FindView.analytics=new i("gh.welcome.find.view"),GH.Dialog.FindView.init=function(){GH.Dialog.registerDialog(".js-find-view",GH.Dialog.FindView.openFindExistingViewDialog)},GH.Dialog.FindView.openFindExistingViewDialog=function(){var e=function(e){GH.Dialog.FindView.analytics.trigger("cancel",e.curpage.toString())},i=GH.Dialog.create({width:600,height:215,id:"ghx-welcome-dialog-view-find",onCancelFn:e});i.eventCategory="gh.welcome.find.view",GH.Dialog.FindView.analytics.trigger("start"),GH.Dialog.FindView.showFindViewStep(i),i.gotoPage(0),i.gotoPanel(0),i.show(),AJS.$("#ghx-welcome-find-viewname-field").focus(),AJS.$(i.getCurrentPanel().body).trigger("contentRefresh")},GH.Dialog.FindView.showFindViewStep=function(i){i.addHeader("Find an Existing Board"),AJS.$("#"+i.id).addClass("ghx-dialog");var n=AJS.$(GH.tpl.findviewdialog.renderFindExistingView());i.addPanel("Find an Existing Board",n,"ghx-welcome-page"),i.addButton("Use",GH.Dialog.FindView.validateViewFind,"aui-button"),n.find("form").submit(function(){return GH.Dialog.FindView.validateViewFind(i),!1});new e({element:AJS.$("#ghx-welcome-find-viewname"),width:300,removeOnUnSelect:!0,overlabel:"Start typing for names",itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:GH.Ajax.buildRestUrl("/rapidviews/list.json"),formatResponse:function(e){var i=[];return AJS.$(e.views).each(function(){i.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name))}))}),i}}});GH.Dialog.addCancelButton(i)},GH.Dialog.FindView.validateViewFind=function(e){var i={id:AJS.$("#ghx-welcome-find-viewname").val()},n={viewName:"#ghx-welcome-find-viewname"},a=function(){GH.Dialog.FindView.analytics.trigger("complete"),GH.RapidBoard.gotoRapidBoardPage(i.id)};AJS.$(e.getCurrentPanel().body).find(".ghx-error").remove(),GH.Ajax.get({url:"welcome/validateViewFind",data:i,errorContextMap:n},"validateViewFind").done(a)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/Avatar.soy' */
// This file was automatically generated from Avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.avatar.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.avatar == 'undefined') { GH.tpl.avatar = {}; }


GH.tpl.avatar.renderIssueAvatar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issue.hasCustomUserAvatar) ? GH.tpl.avatar.renderCustomUserAvatar({avatarUrl: opt_data.issue.avatarUrl, tooltipHtml: opt_data.tooltipHtml}) : (opt_data.issue.autoUserAvatar) ? GH.tpl.avatar.renderAutoUserAvatar({color: opt_data.issue.autoUserAvatar.color, letter: opt_data.issue.autoUserAvatar.letter, tooltipHtml: opt_data.tooltipHtml, borderColor: opt_data.drawAvatarTextBorder ? opt_data.issue.autoUserAvatar.color : null}) : '');
};
if (goog.DEBUG) {
  GH.tpl.avatar.renderIssueAvatar.soyTemplateName = 'GH.tpl.avatar.renderIssueAvatar';
}


GH.tpl.avatar.renderCustomUserAvatar = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.avatarUrl) + '" class="ghx-avatar-img"' + ((opt_data.tooltipHtml) ? 'alt="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '" data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '"' : '') + '>';
};
if (goog.DEBUG) {
  GH.tpl.avatar.renderCustomUserAvatar.soyTemplateName = 'GH.tpl.avatar.renderCustomUserAvatar';
}


GH.tpl.avatar.renderAutoUserAvatar = function(opt_data, opt_ignored) {
  return '<span class="ghx-avatar-img" style="background-color: ' + soy.$$escapeHtml(opt_data.color) + '; ' + ((opt_data.borderColor) ? ' border: 1px solid ' + soy.$$escapeHtml(opt_data.borderColor) + ' ' : '') + '"' + ((opt_data.tooltipHtml) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.letter) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.avatar.renderAutoUserAvatar.soyTemplateName = 'GH.tpl.avatar.renderAutoUserAvatar';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/field/StatusRenderer.soy' */
// This file was automatically generated from StatusRenderer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.status.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.status == 'undefined') { GH.tpl.status = {}; }


GH.tpl.status.renderIcon = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy3 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy3, maxWidth: opt_data.maxWidth}) : '<img src="' + soy.$$escapeHtml(opt_data.status.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.status.name) + '" title="' + soy.$$escapeHtml(opt_data.status.name) + '">' : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderIcon.soyTemplateName = 'GH.tpl.status.renderIcon';
}


GH.tpl.status.renderText = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy22 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy22, maxWidth: opt_data.maxWidth}) : soy.$$escapeHtml(opt_data.status.name) : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderText.soyTemplateName = 'GH.tpl.status.renderText';
}


GH.tpl.status.renderFull = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy35 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy35}) : '<img src="' + soy.$$escapeHtml(opt_data.status.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.status.name) + '" title="' + soy.$$escapeHtml(opt_data.status.name) + '">' + soy.$$escapeHtml(opt_data.status.name) + '</img>' : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderFull.soyTemplateName = 'GH.tpl.status.renderFull';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/field/EpicLinkRenderer.soy' */
// This file was automatically generated from EpicLinkRenderer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.field.epicLink.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.field == 'undefined') { GH.tpl.field = {}; }
if (typeof GH.tpl.field.epicLink == 'undefined') { GH.tpl.field.epicLink = {}; }


GH.tpl.field.epicLink.renderEpicLink = function(opt_data, opt_ignored) {
  var output = '';
  var name__soy3 = '' + GH.tpl.epic.getEpicNameStringNoAutoescape({epicLabel: opt_data.field.text, epicKey: opt_data.field.epicKey});
  output += (opt_data.removableIfAllowed && opt_data.field.canRemoveEpic) ? GH.tpl.field.issueLabel.renderLabel({extraClasses: ['js-epic-remove', opt_data.field.epicColor], isCloseable: true, closeIconText: 'Remove from epic', text: name__soy3, extraAttributes: {title: name__soy3, 'data-epickey': opt_data.field.epicKey}}) : GH.tpl.field.issueLabel.renderLabel({extraClasses: (opt_data.extraClasses != null ? opt_data.extraClasses : '') + ' ' + opt_data.field.epicColor, text: name__soy3, extraAttributes: {title: name__soy3, 'data-epickey': opt_data.field.epicKey}});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.field.epicLink.renderEpicLink.soyTemplateName = 'GH.tpl.field.epicLink.renderEpicLink';
}


GH.tpl.field.epicLink.renderEpicLinkFromIssue = function(opt_data, opt_ignored) {
  return '' + GH.tpl.field.issueLabel.renderLabel({extraClasses: opt_data.extraClasses + ' ' + opt_data.epic.epicColor, text: opt_data.epic.epicLabel, extraAttributes: {title: opt_data.epic.epicLabel, 'data-epickey': opt_data.epic.key}});
};
if (goog.DEBUG) {
  GH.tpl.field.epicLink.renderEpicLinkFromIssue.soyTemplateName = 'GH.tpl.field.epicLink.renderEpicLinkFromIssue';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common', location = 'includes/js/rapid/ui/component/field/IssueLabelRenderer.soy' */
// This file was automatically generated from IssueLabelRenderer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.field.issueLabel.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.field == 'undefined') { GH.tpl.field = {}; }
if (typeof GH.tpl.field.issueLabel == 'undefined') { GH.tpl.field.issueLabel = {}; }


GH.tpl.field.issueLabel.renderOrphanedSubtaskLabel = function(opt_data, opt_ignored) {
  var output = '';
  var text__soy3 = AJS.format('Sub-task of {0}',opt_data.parentKey);
  output += GH.tpl.field.issueLabel.renderLabel({adg3: opt_data.adg3, extraClasses: opt_data.extraClasses, text: text__soy3, extraAttributes: {title: text__soy3}});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.field.issueLabel.renderOrphanedSubtaskLabel.soyTemplateName = 'GH.tpl.field.issueLabel.renderOrphanedSubtaskLabel';
}


GH.tpl.field.issueLabel.renderLabel = function(opt_data, opt_ignored) {
  return '' + ((GH.tpl.adg3Enabled) ? aui.lozenges.lozenge(opt_data) : aui.labels.label(opt_data));
};
if (goog.DEBUG) {
  GH.tpl.field.issueLabel.renderLabel.soyTemplateName = 'GH.tpl.field.issueLabel.renderLabel';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/d3-3.3.8.js' */
d3=function(){function n(n){return null!=n&&!isNaN(n)}function t(n){return n.length}function e(n){for(var t=1;n*t%1;)t*=10;return t}function r(n,t){try{for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}catch(r){n.prototype=t}}function i(){}function u(){}function o(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function a(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var e=0,r=ao.length;e<r;++e){var i=ao[e]+t;if(i in n)return i}}function c(){}function l(){}function f(n){function t(){for(var t,r=e,i=-1,u=r.length;++i<u;)(t=r[i].on)&&t.apply(this,arguments);return n}var e=[],r=new i;return t.on=function(t,i){var u,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,u=e.indexOf(o)).concat(e.slice(u+1)),r.remove(t)),i&&e.push(r.set(t,{on:i})),n)},t}function s(){Zu.event.preventDefault()}function h(){for(var n,t=Zu.event;n=t.sourceEvent;)t=n;return t}function p(n){for(var t=new l,e=0,r=arguments.length;++e<r;)t[arguments[e]]=f(t);return t.of=function(e,r){return function(i){try{var u=i.sourceEvent=Zu.event;i.target=n,Zu.event=i,t[i.type].apply(e,r)}finally{Zu.event=u}}},t}function g(n){return lo(n,go),n}function v(n){return"function"==typeof n?n:function(){return fo(n,this)}}function d(n){return"function"==typeof n?n:function(){return so(n,this)}}function y(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function i(){this.setAttribute(n,t)}function u(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=Zu.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?u:i}function m(n){return n.trim().replace(/\s+/g," ")}function x(n){return new RegExp("(?:^|\\s+)"+Zu.requote(n)+"(?:\\s+|$)","g")}function M(n,t){function e(){for(var e=-1;++e<i;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<i;)n[e](this,r)}n=n.trim().split(/\s+/).map(_);var i=n.length;return"function"==typeof t?r:e}function _(n){var t=x(n);return function(e,r){if(i=e.classList)return r?i.add(n):i.remove(n);var i=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||e.setAttribute("class",m(i+" "+n))):e.setAttribute("class",m(i.replace(t," ")))}}function b(n,t,e){function r(){this.style.removeProperty(n)}function i(){this.style.setProperty(n,t,e)}function u(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?u:i}function w(n,t){function e(){delete this[n]}function r(){this[n]=t}function i(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?i:r}function S(n){return"function"==typeof n?n:(n=Zu.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,n)}}function k(n){return{__data__:n}}function N(n){return function(){return po(this,n)}}function E(n){return arguments.length||(n=Zu.ascending),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function A(n,t){for(var e=0,r=n.length;e<r;e++)for(var i,u=n[e],o=0,a=u.length;o<a;o++)(i=u[o])&&t(i,o,e);return n}function C(n){return lo(n,yo),n}function L(n){var t,e;return function(r,i,u){var o,a=n[u].update,c=a.length;for(u!=e&&(e=u,t=0),i>=t&&(t=i+1);!(o=a[t])&&++t<c;);return o}}function T(){var n=this.__transition__;n&&++n.active}function q(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function i(){var i=l(t,Xu(arguments));r.call(this),this.addEventListener(n,this[o]=i,i.$=e),i._=t}function u(){var t,e=new RegExp("^__on([^.]+)"+Zu.requote(n)+"$");for(var r in this)if(t=r.match(e)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),l=z;a>0&&(n=n.substring(0,a));var f=xo.get(n);return f&&(n=f,l=R),a?t?i:r:t?c:u}function z(n,t){return function(e){var r=Zu.event;Zu.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{Zu.event=r}}}function R(n,t){var e=z(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function D(){var n=".dragsuppress-"+ ++_o,t="touchmove"+n,e="selectstart"+n,r="dragstart"+n,i="click"+n,u=Zu.select(Wu).on(t,s).on(e,s).on(r,s),o=Bu.style,a=o[Mo];return o[Mo]="none",function(t){function e(){u.on(i,null)}u.on(n,null),o[Mo]=a,t&&(u.on(i,function(){s(),e()},!0),setTimeout(e,0))}}function P(n,t){t.changedTouches&&(t=t.changedTouches[0]);var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();if(bo<0&&(Wu.scrollX||Wu.scrollY)){e=Zu.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=e[0][0].getScreenCTM();bo=!(i.f||i.e),e.remove()}return bo?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}var u=n.getBoundingClientRect();return[t.clientX-u.left-n.clientLeft,t.clientY-u.top-n.clientTop]}function U(n){return n>0?1:n<0?-1:0}function j(n){return n>1?0:n<-1?wo:Math.acos(n)}function H(n){return n>1?ko:n<-1?-ko:Math.asin(n)}function F(n){return((n=Math.exp(n))-1/n)/2}function O(n){return((n=Math.exp(n))+1/n)/2}function Y(n){return((n=Math.exp(2*n))-1)/(n+1)}function I(n){return(n=Math.sin(n/2))*n}function Z(){}function V(n,t,e){return new X(n,t,e)}function X(n,t,e){this.h=n,this.s=t,this.l=e}function $(n,t,e){function r(n){return n>360?n-=360:n<0&&(n+=360),n<60?u+(o-u)*n/60:n<180?o:n<240?u+(o-u)*(240-n)/60:u}function i(n){return Math.round(255*r(n))}var u,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:t<0?0:t>1?1:t,e=e<0?0:e>1?1:e,o=e<=.5?e*(1+t):e+t-e*t,u=2*e-o,an(i(n+120),i(n),i(n-120))}function B(n,t,e){return new W(n,t,e)}function W(n,t,e){this.h=n,this.c=t,this.l=e}function J(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),G(e,Math.cos(n*=Ao)*t,Math.sin(n)*t)}function G(n,t,e){return new K(n,t,e)}function K(n,t,e){this.l=n,this.a=t,this.b=e}function Q(n,t,e){var r=(n+16)/116,i=r+t/500,u=r-e/200;return i=tn(i)*Ho,r=tn(r)*Fo,u=tn(u)*Oo,an(rn(3.2404542*i-1.5371385*r-.4985314*u),rn(-.969266*i+1.8760108*r+.041556*u),rn(.0556434*i-.2040259*r+1.0572252*u))}function nn(n,t,e){return n>0?B(Math.atan2(e,t)*Co,Math.sqrt(t*t+e*e),n):B(NaN,NaN,n)}function tn(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function en(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function rn(n){return Math.round(255*(n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function un(n){return an(n>>16,n>>8&255,255&n)}function on(n){return un(n)+""}function an(n,t,e){return new cn(n,t,e)}function cn(n,t,e){this.r=n,this.g=t,this.b=e}function ln(n){return n<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function fn(n,t,e){var r,i,u,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/i.exec(n))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(gn(i[0]),gn(i[1]),gn(i[2]))}return(u=Zo.get(n))?t(u.r,u.g,u.b):(null!=n&&"#"===n.charAt(0)&&(4===n.length?(o=n.charAt(1),o+=o,a=n.charAt(2),a+=a,c=n.charAt(3),c+=c):7===n.length&&(o=n.substring(1,3),a=n.substring(3,5),c=n.substring(5,7)),o=parseInt(o,16),a=parseInt(a,16),c=parseInt(c,16)),t(o,a,c))}function sn(n,t,e){var r,i,u=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-u,c=(o+u)/2;return a?(i=c<.5?a/(o+u):a/(2-o-u),r=n==o?(t-e)/a+(t<e?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=NaN,i=c>0&&c<1?0:r),V(r,i,c)}function hn(n,t,e){n=pn(n),t=pn(t),e=pn(e);var r=en((.4124564*n+.3575761*t+.1804375*e)/Ho),i=en((.2126729*n+.7151522*t+.072175*e)/Fo),u=en((.0193339*n+.119192*t+.9503041*e)/Oo);return G(116*i-16,500*(r-i),200*(i-u))}function pn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function gn(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function vn(n){return"function"==typeof n?n:function(){return n}}function dn(n){return n}function yn(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),mn(t,e,n,r)}}function mn(n,t,e,r){function i(){var n,t=c.status;if(!t&&c.responseText||t>=200&&t<300||304===t){try{n=e.call(u,c)}catch(r){return void o.error.call(u,r)}o.load.call(u,n)}else o.error.call(u,c)}var u={},o=Zu.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!Wu.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=i:c.onreadystatechange=function(){c.readyState>3&&i()},c.onprogress=function(n){var t=Zu.event;Zu.event=n;try{o.progress.call(u,c)}finally{Zu.event=t}},u.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",u)},u.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",u):t},u.responseType=function(n){return arguments.length?(l=n,u):l},u.response=function(n){return e=n,u},["get","post"].forEach(function(n){u[n]=function(){return u.send.apply(u,[n].concat(Xu(arguments)))}}),u.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var f in a)c.setRequestHeader(f,a[f]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=i&&u.on("error",i).on("load",function(n){i(null,n)}),o.beforesend.call(u,c),c.send(null==r?null:r),u},u.abort=function(){return c.abort(),u},Zu.rebind(u,o,"on"),null==r?u:u.get(xn(r))}function xn(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Mn(){var n=_n(),t=bn()-n;t>24?(isFinite(t)&&(clearTimeout(Bo),Bo=setTimeout(Mn,t)),$o=0):($o=1,Jo(Mn))}function _n(){var n=Date.now();for(Wo=Vo;Wo;)n>=Wo.t&&(Wo.f=Wo.c(n-Wo.t)),Wo=Wo.n;return n}function bn(){for(var n,t=Vo,e=1/0;t;)t.f?t=n?n.n=t.n:Vo=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Xo=n,e}function wn(n,t){var e=Math.pow(10,3*io(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Sn(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function kn(n){return n+""}function Nn(){}function En(n,t,e){var r=e.s=n+t,i=r-n,u=r-i;e.t=n-u+(t-i)}function An(n,t){n&&ca.hasOwnProperty(n.type)&&ca[n.type](n,t)}function Cn(n,t,e){var r,i=-1,u=n.length-e;for(t.lineStart();++i<u;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Ln(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)Cn(n[e],t,1);t.polygonEnd()}function Tn(){function n(n,t){n*=Ao,t=t*Ao/2+wo/4;var e=n-r,o=Math.cos(t),a=Math.sin(t),c=u*a,l=i*o+c*Math.cos(e),f=c*Math.sin(e);fa.add(Math.atan2(f,l)),r=n,i=o,u=a}var t,e,r,i,u;sa.point=function(o,a){sa.point=n,r=(t=o)*Ao,i=Math.cos(a=(e=a)*Ao/2+wo/4),u=Math.sin(a)},sa.lineEnd=function(){n(t,e)}}function qn(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function zn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Rn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Dn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Pn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Un(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function jn(n){return[Math.atan2(n[1],n[0]),H(n[2])]}function Hn(n,t){return io(n[0]-t[0])<No&&io(n[1]-t[1])<No}function Fn(n,t){n*=Ao;var e=Math.cos(t*=Ao);On(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function On(n,t,e){++ha,ga+=(n-ga)/ha,va+=(t-va)/ha,da+=(e-da)/ha}function Yn(){function n(n,i){n*=Ao;var u=Math.cos(i*=Ao),o=u*Math.cos(n),a=u*Math.sin(n),c=Math.sin(i),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);pa+=l,ya+=l*(t+(t=o)),ma+=l*(e+(e=a)),xa+=l*(r+(r=c)),On(t,e,r)}var t,e,r;wa.point=function(i,u){i*=Ao;var o=Math.cos(u*=Ao);t=o*Math.cos(i),e=o*Math.sin(i),r=Math.sin(u),wa.point=n,On(t,e,r)}}function In(){wa.point=Fn}function Zn(){function n(n,t){n*=Ao;var e=Math.cos(t*=Ao),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=i*c-u*a,f=u*o-r*c,s=r*a-i*o,h=Math.sqrt(l*l+f*f+s*s),p=r*o+i*a+u*c,g=h&&-j(p)/h,v=Math.atan2(h,p);Ma+=g*l,_a+=g*f,ba+=g*s,pa+=v,ya+=v*(r+(r=o)),ma+=v*(i+(i=a)),xa+=v*(u+(u=c)),On(r,i,u)}var t,e,r,i,u;wa.point=function(o,a){t=o,e=a,wa.point=n,o*=Ao;var c=Math.cos(a*=Ao);r=c*Math.cos(o),i=c*Math.sin(o),u=Math.sin(a),On(r,i,u)},wa.lineEnd=function(){n(t,e),wa.lineEnd=In,wa.point=Fn}}function Vn(){return!0}function Xn(n,t,e,r,i){var u=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(Hn(e,r)){i.lineStart();for(var a=0;a<t;++a)i.point((e=n[a])[0],e[1]);return void i.lineEnd()}var c=new Bn(e,n,null,(!0)),l=new Bn(e,null,c,(!1));c.o=l,u.push(c),o.push(l),c=new Bn(r,n,null,(!1)),l=new Bn(r,null,c,(!0)),c.o=l,u.push(c),o.push(l)}}),o.sort(t),$n(u),$n(o),u.length){for(var a=0,c=e,l=o.length;a<l;++a)o[a].e=c=!c;for(var f,s,h=u[0];;){for(var p=h,g=!0;p.v;)if((p=p.n)===h)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(var a=0,l=f.length;a<l;++a)i.point((s=f[a])[0],s[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g){f=p.p.z;for(var a=f.length-1;a>=0;--a)i.point((s=f[a])[0],s[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,g=!g}while(!p.v);i.lineEnd()}}}function $n(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Bn(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Wn(n,t,e,r){return function(i,u){function o(t,e){var r=i(t,e);n(t=r[0],e=r[1])&&u.point(t,e)}function a(n,t){var e=i(n,t);d.point(e[0],e[1])}function c(){m.point=a,d.lineStart()}function l(){m.point=o,d.lineEnd()}function f(n,t){v.push([n,t]);var e=i(n,t);M.point(e[0],e[1])}function s(){M.lineStart(),v=[]}function h(){f(v[0][0],v[0][1]),M.lineEnd();var n,t=M.clean(),e=x.buffer(),r=e.length;if(v.pop(),g.push(v),v=null,r){if(1&t){n=e[0];var i,r=n.length-1,o=-1;for(u.lineStart();++o<r;)u.point((i=n[o])[0],i[1]);return void u.lineEnd()}r>1&&2&t&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Jn))}}var p,g,v,d=t(u),y=i.invert(r[0],r[1]),m={point:o,lineStart:c,lineEnd:l,polygonStart:function(){m.point=f,m.lineStart=s,m.lineEnd=h,p=[],g=[],u.polygonStart()},polygonEnd:function(){m.point=o,m.lineStart=c,m.lineEnd=l,p=Zu.merge(p);var n=Qn(y,g);p.length?Xn(p,Kn,n,e,u):n&&(u.lineStart(),e(null,null,1,u),u.lineEnd()),u.polygonEnd(),p=g=null},sphere:function(){u.polygonStart(),u.lineStart(),e(null,null,1,u),u.lineEnd(),u.polygonEnd()}},x=Gn(),M=t(x);return m}}function Jn(n){return n.length>1}function Gn(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:c,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Kn(n,t){return((n=n.x)[0]<0?n[1]-ko-No:ko-n[1])-((t=t.x)[0]<0?t[1]-ko-No:ko-t[1])}function Qn(n,t){var e=n[0],r=n[1],i=[Math.sin(e),-Math.cos(e),0],u=0,o=0;fa.reset();for(var a=0,c=t.length;a<c;++a){var l=t[a],f=l.length;if(f)for(var s=l[0],h=s[0],p=s[1]/2+wo/4,g=Math.sin(p),v=Math.cos(p),d=1;;){d===f&&(d=0),n=l[d];var y=n[0],m=n[1]/2+wo/4,x=Math.sin(m),M=Math.cos(m),_=y-h,b=io(_)>wo,w=g*x;if(fa.add(Math.atan2(w*Math.sin(_),v*M+w*Math.cos(_))),u+=b?_+(_>=0?So:-So):_,b^h>=e^y>=e){var S=Rn(qn(s),qn(n));Un(S);var k=Rn(i,S);Un(k);var N=(b^_>=0?-1:1)*H(k[2]);(r>N||r===N&&(S[0]||S[1]))&&(o+=b^_>=0?1:-1)}if(!d++)break;h=y,g=x,v=M,s=n}}return(u<-No||u<No&&fa<0)^1&o}function nt(n){var t,e=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(u,o){var a=u>0?wo:-wo,c=io(u-e);io(c-wo)<No?(n.point(e,r=(r+o)/2>0?ko:-ko),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(u,r),t=0):i!==a&&c>=wo&&(io(e-i)<No&&(e-=i*No),io(u-a)<No&&(u-=a*No),r=tt(e,r,u,o),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=u,r=o),i=a},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function tt(n,t,e,r){var i,u,o=Math.sin(n-e);return io(o)>No?Math.atan((Math.sin(t)*(u=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(t))*Math.sin(n))/(i*u*o)):(t+r)/2}function et(n,t,e,r){var i;if(null==n)i=e*ko,r.point(-wo,i),r.point(0,i),r.point(wo,i),r.point(wo,0),r.point(wo,-i),r.point(0,-i),r.point(-wo,-i),r.point(-wo,0),r.point(-wo,i);else if(io(n[0]-t[0])>No){var u=n[0]<t[0]?wo:-wo;i=e*u/2,r.point(-u,i),r.point(0,i),r.point(u,i)}else r.point(t[0],t[1])}function rt(n){function t(n,t){return Math.cos(n)*Math.cos(t)>u}function e(n){var e,u,c,l,f;return{lineStart:function(){l=c=!1,f=1},point:function(s,h){var p,g=[s,h],v=t(s,h),d=o?v?0:i(s,h):v?i(s+(s<0?wo:-wo),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(p=r(e,g),(Hn(e,p)||Hn(g,p))&&(g[0]+=No,g[1]+=No,v=t(g[0],g[1]))),v!==c)f=0,v?(n.lineStart(),p=r(g,e),n.point(p[0],p[1])):(p=r(e,g),n.point(p[0],p[1]),n.lineEnd()),e=p;else if(a&&e&&o^v){var y;d&u||!(y=r(g,e,!0))||(f=0,o?(n.lineStart(),n.point(y[0][0],y[0][1]),n.point(y[1][0],y[1][1]),n.lineEnd()):(n.point(y[1][0],y[1][1]),n.lineEnd(),n.lineStart(),n.point(y[0][0],y[0][1])))}!v||e&&Hn(e,g)||n.point(g[0],g[1]),e=g,c=v,u=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return f|(l&&c)<<1}}}function r(n,t,e){var r=qn(n),i=qn(t),o=[1,0,0],a=Rn(r,i),c=zn(a,a),l=a[0],f=c-l*l;if(!f)return!e&&n;var s=u*c/f,h=-u*l/f,p=Rn(o,a),g=Pn(o,s),v=Pn(a,h);Dn(g,v);var d=p,y=zn(g,d),m=zn(d,d),x=y*y-m*(zn(g,g)-1);if(!(x<0)){var M=Math.sqrt(x),_=Pn(d,(-y-M)/m);if(Dn(_,g),_=jn(_),!e)return _;var b,w=n[0],S=t[0],k=n[1],N=t[1];S<w&&(b=w,w=S,S=b);var E=S-w,A=io(E-wo)<No,C=A||E<No;if(!A&&N<k&&(b=k,k=N,N=b),C?A?k+N>0^_[1]<(io(_[0]-w)<No?k:N):k<=_[1]&&_[1]<=N:E>wo^(w<=_[0]&&_[0]<=S)){var L=Pn(d,(-y+M)/m);return Dn(L,g),[_,jn(L)]}}}function i(t,e){var r=o?n:wo-n,i=0;return t<-r?i|=1:t>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var u=Math.cos(n),o=u>0,a=io(u)>No,c=Lt(n,6*Ao);return Wn(t,e,c,o?[0,-n]:[-wo,n-wo])}function it(n,t,e,r){return function(i){var u,o=i.a,a=i.b,c=o.x,l=o.y,f=a.x,s=a.y,h=0,p=1,g=f-c,v=s-l;if(u=n-c,g||!(u>0)){if(u/=g,g<0){if(u<h)return;u<p&&(p=u)}else if(g>0){if(u>p)return;u>h&&(h=u)}if(u=e-c,g||!(u<0)){if(u/=g,g<0){if(u>p)return;u>h&&(h=u)}else if(g>0){if(u<h)return;u<p&&(p=u)}if(u=t-l,v||!(u>0)){if(u/=v,v<0){if(u<h)return;u<p&&(p=u)}else if(v>0){if(u>p)return;u>h&&(h=u)}if(u=r-l,v||!(u<0)){if(u/=v,v<0){if(u>p)return;u>h&&(h=u)}else if(v>0){if(u<h)return;u<p&&(p=u)}return h>0&&(i.a={x:c+h*g,y:l+h*v}),p<1&&(i.b={x:c+p*g,y:l+p*v}),i}}}}}}function ut(n,t,e,r){function i(r,i){return io(r[0]-n)<No?i>0?0:3:io(r[0]-e)<No?i>0?2:1:io(r[1]-t)<No?i>0?1:0:i>0?3:2}function u(n,t){return o(n.x,t.x)}function o(n,t){var e=i(n,1),r=i(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=y.length,r=n[1],i=0;i<e;++i)for(var u,o=1,a=y[i],c=a.length,f=a[0];o<c;++o)u=a[o],f[1]<=r?u[1]>r&&l(f,u,n)>0&&++t:u[1]<=r&&l(f,u,n)<0&&--t,f=u;return 0!==t}function l(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(t[1]-n[1])}function f(u,a,c,l){var f=0,s=0;if(null==u||(f=i(u,c))!==(s=i(a,c))||o(u,a)<0^c>0){do l.point(0===f||3===f?n:e,f>1?r:t);while((f=(f+c+4)%4)!==s)}else l.point(a[0],a[1])}function s(i,u){return n<=i&&i<=e&&t<=u&&u<=r}function h(n,t){s(n,t)&&a.point(n,t)}function p(){L.point=v,y&&y.push(m=[]),k=!0,S=!1,b=w=NaN}function g(){d&&(v(x,M),_&&S&&A.rejoin(),d.push(A.buffer())),L.point=h,S&&a.lineEnd()}function v(n,t){n=Math.max(-ka,Math.min(ka,n)),t=Math.max(-ka,Math.min(ka,t));var e=s(n,t);if(y&&m.push([n,t]),k)x=n,M=t,_=e,k=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&S)a.point(n,t);else{var r={a:{x:b,y:w},b:{x:n,y:t}};C(r)?(S||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),N=!1):e&&(a.lineStart(),a.point(n,t),N=!1)}b=n,w=t,S=e}var d,y,m,x,M,_,b,w,S,k,N,E=a,A=Gn(),C=it(n,t,e,r),L={point:h,lineStart:p,lineEnd:g,polygonStart:function(){a=A,d=[],y=[],N=!0},polygonEnd:function(){a=E,d=Zu.merge(d);var t=c([n,r]),e=N&&t,i=d.length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),f(null,null,1,a),a.lineEnd()),i&&Xn(d,u,t,f,a),a.polygonEnd()),d=y=m=null}};return L}}function ot(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function at(n){var t=0,e=wo/3,r=bt(n),i=r(t,e);return i.parallels=function(n){return arguments.length?r(t=n[0]*wo/180,e=n[1]*wo/180):[t/wo*180,e/wo*180]},i}function ct(n,t){function e(n,t){var e=Math.sqrt(u-2*i*Math.sin(t))/i;return[e*Math.sin(n*=i),o-e*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),o=Math.sqrt(u)/i;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/i,H((u-(n*n+e*e)*i*i)/(2*i))]},e}function lt(){function n(n,t){Ea+=i*n-r*t,r=n,i=t}var t,e,r,i;qa.point=function(u,o){qa.point=n,t=r=u,e=i=o},qa.lineEnd=function(){n(t,e)}}function ft(n,t){n<Aa&&(Aa=n),n>La&&(La=n),t<Ca&&(Ca=t),t>Ta&&(Ta=t)}function st(){function n(n,t){o.push("M",n,",",t,u)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function i(){o.push("Z")}var u=ht(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return u=ht(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function ht(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function pt(n,t){ga+=n,va+=t,++da}function gt(){function n(n,r){var i=n-t,u=r-e,o=Math.sqrt(i*i+u*u);ya+=o*(t+n)/2,ma+=o*(e+r)/2,xa+=o,pt(t=n,e=r)}var t,e;Ra.point=function(r,i){Ra.point=n,pt(t=r,e=i)}}function vt(){Ra.point=pt}function dt(){function n(n,t){var e=n-r,u=t-i,o=Math.sqrt(e*e+u*u);ya+=o*(r+n)/2,ma+=o*(i+t)/2,xa+=o,o=i*n-r*t,Ma+=o*(r+n),_a+=o*(i+t),ba+=3*o,pt(r=n,i=t)}var t,e,r,i;Ra.point=function(u,o){Ra.point=n,pt(t=r=u,e=i=o)},Ra.lineEnd=function(){n(t,e)}}function yt(n){function t(t,e){n.moveTo(t,e),n.arc(t,e,o,0,So)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function i(){a.point=t}function u(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(n){return o=n,a},result:c};return a}function mt(n){function t(t){function r(e,r){e=n(e,r),t.point(e[0],e[1])}function i(){x=NaN,S.point=o,t.lineStart()}function o(r,i){var o=qn([r,i]),a=n(r,i);e(x,M,m,_,b,w,x=a[0],M=a[1],m=r,_=o[0],b=o[1],w=o[2],u,t),t.point(x,M)}function a(){S.point=r,t.lineEnd()}function c(){i(),S.point=l,S.lineEnd=f}function l(n,t){o(s=n,h=t),p=x,g=M,v=_,d=b,y=w,S.point=o}function f(){e(x,M,m,_,b,w,p,g,s,v,d,y,u,t),S.lineEnd=a,a()}var s,h,p,g,v,d,y,m,x,M,_,b,w,S={point:r,lineStart:i,lineEnd:a,polygonStart:function(){t.polygonStart(),S.lineStart=c},polygonEnd:function(){t.polygonEnd(),S.lineStart=i}};return S}function e(t,u,o,a,c,l,f,s,h,p,g,v,d,y){var m=f-t,x=s-u,M=m*m+x*x;if(M>4*r&&d--){var _=a+p,b=c+g,w=l+v,S=Math.sqrt(_*_+b*b+w*w),k=Math.asin(w/=S),N=io(io(w)-1)<No?(o+h)/2:Math.atan2(b,_),E=n(N,k),A=E[0],C=E[1],L=A-t,T=C-u,q=x*L-m*T;(q*q/M>r||io((m*L+x*T)/M-.5)>.3||a*p+c*g+l*v<i)&&(e(t,u,o,a,c,l,A,C,N,_/=S,b/=S,w,d,y),y.point(A,C),e(A,C,N,_,b,w,f,s,h,p,g,v,d,y))}}var r=.5,i=Math.cos(30*Ao),u=16;return t.precision=function(n){return arguments.length?(u=(r=n*n)>0&&16,t):Math.sqrt(r)},t}function xt(n){this.stream=n}function Mt(n){var t=mt(function(t,e){return n([t*Co,e*Co])});return function(n){var e=new xt(n=t(n));return e.point=function(t,e){n.point(t*Ao,e*Ao)},e}}function _t(n){return bt(function(){return n})()}function bt(n){function t(n){return n=a(n[0]*Ao,n[1]*Ao),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Co,n[1]*Co]}function r(){a=ot(o=Nt(y,m,x),u);var n=u(v,d);return c=p-n[0]*h,l=g+n[1]*h,i()}function i(){return f&&(f.valid=!1,f=null),t}var u,o,a,c,l,f,s=mt(function(n,t){return n=u(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,p=480,g=250,v=0,d=0,y=0,m=0,x=0,M=Sa,_=dn,b=null,w=null;return t.stream=function(n){return f&&(f.valid=!1),f=wt(M(o,s(_(n)))),f.valid=!0,f},t.clipAngle=function(n){return arguments.length?(M=null==n?(b=n,Sa):rt((b=+n)*Ao),i()):b},t.clipExtent=function(n){return arguments.length?(w=n,_=n?ut(n[0][0],n[0][1],n[1][0],n[1][1]):dn,i()):w},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(p=+n[0],g=+n[1],r()):[p,g]},t.center=function(n){return arguments.length?(v=n[0]%360*Ao,d=n[1]%360*Ao,r()):[v*Co,d*Co]},t.rotate=function(n){return arguments.length?(y=n[0]%360*Ao,m=n[1]%360*Ao,x=n.length>2?n[2]%360*Ao:0,r()):[y*Co,m*Co,x*Co]},Zu.rebind(t,s,"precision"),function(){return u=n.apply(this,arguments),t.invert=u.invert&&e,r()}}function wt(n){var t=new xt(n);return t.point=function(t,e){n.point(t*Ao,e*Ao)},t}function St(n,t){return[n,t]}function kt(n,t){return[n>wo?n-So:n<-wo?n+So:n,t]}function Nt(n,t,e){return n?t||e?ot(At(n),Ct(t,e)):At(n):t||e?Ct(t,e):kt}function Et(n){return function(t,e){return t+=n,[t>wo?t-So:t<-wo?t+So:t,e]}}function At(n){var t=Et(n);return t.invert=Et(-n),t}function Ct(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),f=l*r+a*i;return[Math.atan2(c*u-f*o,a*r-l*i),H(f*u+c*o)]}var r=Math.cos(n),i=Math.sin(n),u=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),f=l*u-c*o;return[Math.atan2(c*u+l*o,a*r+f*i),H(f*r-a*i)]},e}function Lt(n,t){var e=Math.cos(n),r=Math.sin(n);return function(i,u,o,a){var c=o*t;null!=i?(i=Tt(e,i),u=Tt(e,u),(o>0?i<u:i>u)&&(i+=o*So)):(i=n+o*So,u=n-.5*c);for(var l,f=i;o>0?f>u:f<u;f-=c)a.point((l=jn([e,-r*Math.cos(f),-r*Math.sin(f)]))[0],l[1])}}function Tt(n,t){var e=qn(t);e[0]-=n,Un(e);var r=j(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-No)%(2*Math.PI)}function qt(n,t,e){var r=Zu.range(n,t-No,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function zt(n,t,e){var r=Zu.range(n,t-No,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function Rt(n){return n.source}function Dt(n){return n.target}function Pt(n,t,e,r){var i=Math.cos(t),u=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=i*Math.cos(n),l=i*Math.sin(n),f=o*Math.cos(e),s=o*Math.sin(e),h=2*Math.asin(Math.sqrt(I(r-t)+i*o*I(e-n))),p=1/Math.sin(h),g=h?function(n){var t=Math.sin(n*=h)*p,e=Math.sin(h-n)*p,r=e*c+t*f,i=e*l+t*s,o=e*u+t*a;return[Math.atan2(i,r)*Co,Math.atan2(o,Math.sqrt(r*r+i*i))*Co]}:function(){return[n*Co,t*Co]};return g.distance=h,g}function Ut(){function n(n,i){var u=Math.sin(i*=Ao),o=Math.cos(i),a=io((n*=Ao)-t),c=Math.cos(a);Da+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*u-e*o*c)*a),e*u+r*o*c),t=n,e=u,r=o}var t,e,r;Pa.point=function(i,u){t=i*Ao,e=Math.sin(u*=Ao),r=Math.cos(u),Pa.point=n},Pa.lineEnd=function(){Pa.point=Pa.lineEnd=c}}function jt(n,t){function e(t,e){var r=Math.cos(t),i=Math.cos(e),u=n(r*i);return[u*i*Math.sin(t),u*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),i=t(r),u=Math.sin(i),o=Math.cos(i);return[Math.atan2(n*u,r*o),Math.asin(r&&e*u/r)]},e}function Ht(n,t){function e(n,t){var e=io(io(t)-ko)<No?0:o/Math.pow(i(t),u);return[e*Math.sin(u*n),o-e*Math.cos(u*n)]}var r=Math.cos(n),i=function(n){return Math.tan(wo/4+n/2)},u=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(i(t)/i(n)),o=r*Math.pow(i(n),u)/u;return u?(e.invert=function(n,t){var e=o-t,r=U(u)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/u,2*Math.atan(Math.pow(o/r,1/u))-ko]},e):Ot}function Ft(n,t){function e(n,t){var e=u-t;return[e*Math.sin(i*n),u-e*Math.cos(i*n)]}var r=Math.cos(n),i=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),u=r/i+n;return io(i)<No?St:(e.invert=function(n,t){var e=u-t;return[Math.atan2(n,e)/i,u-U(i)*Math.sqrt(n*n+e*e)]},e)}function Ot(n,t){return[n,Math.log(Math.tan(wo/4+t/2))]}function Yt(n){var t,e=_t(n),r=e.scale,i=e.translate,u=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=i.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=u.apply(e,arguments);if(o===e){if(t=null==n){var a=wo*r(),c=i();u([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function It(n,t){var e=Math.cos(t)*Math.sin(n);return[Math.log((1+e)/(1-e))/2,Math.atan2(Math.tan(t),Math.cos(n))]}function Zt(n){return n[0]}function Vt(n){return n[1]}function Xt(n,t,e,r){var i,u,o,a,c,l,f;return i=r[n],u=i[0],o=i[1],i=r[t],a=i[0],c=i[1],i=r[e],l=i[0],f=i[1],(f-o)*(a-u)-(c-o)*(l-u)>0}function $t(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Bt(n,t,e,r){var i=n[0],u=e[0],o=t[0]-i,a=r[0]-u,c=n[1],l=e[1],f=t[1]-c,s=r[1]-l,h=(a*(c-l)-s*(i-u))/(s*o-a*f);return[i+h*o,c+h*f]}function Wt(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Jt(){ye(this),this.edge=this.site=this.circle=null}function Gt(n){var t=Ba.pop()||new Jt;return t.site=n,t}function Kt(n){ce(n),Va.remove(n),Ba.push(n),ye(n)}function Qt(n){var t=n.circle,e=t.x,r=t.cy,i={x:e,y:r},u=n.P,o=n.N,a=[n];Kt(n);for(var c=u;c.circle&&io(e-c.circle.x)<No&&io(r-c.circle.cy)<No;)u=c.P,a.unshift(c),Kt(c),c=u;a.unshift(c),ce(c);for(var l=o;l.circle&&io(e-l.circle.x)<No&&io(r-l.circle.cy)<No;)o=l.N,a.push(l),Kt(l),l=o;a.push(l),ce(l);var f,s=a.length;for(f=1;f<s;++f)l=a[f],c=a[f-1],ge(l.edge,c.site,l.site,i);c=a[0],l=a[s-1],l.edge=he(c.site,l.site,null,i),ae(c),ae(l)}function ne(n){for(var t,e,r,i,u=n.x,o=n.y,a=Va._;a;)if(r=te(a,o)-u,r>No)a=a.L;else{if(i=u-ee(a,o),!(i>No)){r>-No?(t=a.P,e=a):i>-No?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Gt(n);if(Va.insert(t,c),t||e){if(t===e)return ce(t),e=Gt(t.site),Va.insert(c,e),c.edge=e.edge=he(t.site,c.site),ae(t),void ae(e);if(!e)return void(c.edge=he(t.site,c.site));ce(t),ce(e);var l=t.site,f=l.x,s=l.y,h=n.x-f,p=n.y-s,g=e.site,v=g.x-f,d=g.y-s,y=2*(h*d-p*v),m=h*h+p*p,x=v*v+d*d,M={x:(d*m-p*x)/y+f,y:(h*x-v*m)/y+s};ge(e.edge,l,g,M),c.edge=he(l,n,null,M),e.edge=he(n,g,null,M),ae(t),ae(e)}}function te(n,t){var e=n.site,r=e.x,i=e.y,u=i-t;if(!u)return r;var o=n.P;if(!o)return-(1/0);e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var f=a-r,s=1/u-1/l,h=f/l;return s?(-h+Math.sqrt(h*h-2*s*(f*f/(-2*l)-c+l/2+i-u/2)))/s+r:(r+a)/2}function ee(n,t){var e=n.N;if(e)return te(e,t);var r=n.site;return r.y===t?r.x:1/0}function re(n){this.site=n,this.edges=[]}function ie(n){for(var t,e,r,i,u,o,a,c,l,f,s=n[0][0],h=n[1][0],p=n[0][1],g=n[1][1],v=Za,d=v.length;d--;)if(u=v[d],u&&u.prepare())for(a=u.edges,c=a.length,o=0;o<c;)f=a[o].end(),r=f.x,i=f.y,l=a[++o%c].start(),t=l.x,e=l.y,(io(r-t)>No||io(i-e)>No)&&(a.splice(o,0,new ve(pe(u.site,f,io(r-s)<No&&g-i>No?{x:s,y:io(t-s)<No?e:g}:io(i-g)<No&&h-r>No?{x:io(e-g)<No?t:h,y:g}:io(r-h)<No&&i-p>No?{x:h,y:io(t-h)<No?e:p}:io(i-p)<No&&r-s>No?{x:io(e-p)<No?t:s,y:p}:null),u.site,null)),++c)}function ue(n,t){return t.angle-n.angle}function oe(){ye(this),this.x=this.y=this.arc=this.site=this.cy=null}function ae(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,i=n.site,u=e.site;if(r!==u){var o=i.x,a=i.y,c=r.x-o,l=r.y-a,f=u.x-o,s=u.y-a,h=2*(c*s-l*f);if(!(h>=-Eo)){var p=c*c+l*l,g=f*f+s*s,v=(s*p-l*g)/h,d=(c*g-f*p)/h,s=d+a,y=Wa.pop()||new oe;y.arc=n,y.site=i,y.x=v+o,y.y=s+Math.sqrt(v*v+d*d),y.cy=s,n.circle=y;for(var m=null,x=$a._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}$a.insert(m,y),m||(Xa=y)}}}}function ce(n){var t=n.circle;t&&(t.P||(Xa=t.N),$a.remove(t),Wa.push(t),ye(t),n.circle=null)}function le(n){for(var t,e=Ia,r=it(n[0][0],n[0][1],n[1][0],n[1][1]),i=e.length;i--;)t=e[i],(!fe(t,n)||!r(t)||io(t.a.x-t.b.x)<No&&io(t.a.y-t.b.y)<No)&&(t.a=t.b=null,e.splice(i,1))}function fe(n,t){var e=n.b;if(e)return!0;var r,i,u=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],f=n.l,s=n.r,h=f.x,p=f.y,g=s.x,v=s.y,d=(h+g)/2,y=(p+v)/2;if(v===p){if(d<o||d>=a)return;if(h>g){if(u){if(u.y>=l)return}else u={x:d,y:c};e={x:d,y:l}}else{if(u){if(u.y<c)return}else u={x:d,y:l};e={x:d,y:c}}}else if(r=(h-g)/(v-p),i=y-r*d,
r<-1||r>1)if(h>g){if(u){if(u.y>=l)return}else u={x:(c-i)/r,y:c};e={x:(l-i)/r,y:l}}else{if(u){if(u.y<c)return}else u={x:(l-i)/r,y:l};e={x:(c-i)/r,y:c}}else if(p<v){if(u){if(u.x>=a)return}else u={x:o,y:r*o+i};e={x:a,y:r*a+i}}else{if(u){if(u.x<o)return}else u={x:a,y:r*a+i};e={x:o,y:r*o+i}}return n.a=u,n.b=e,!0}function se(n,t){this.l=n,this.r=t,this.a=this.b=null}function he(n,t,e,r){var i=new se(n,t);return Ia.push(i),e&&ge(i,n,t,e),r&&ge(i,t,n,r),Za[n.i].edges.push(new ve(i,n,t)),Za[t.i].edges.push(new ve(i,t,n)),i}function pe(n,t,e){var r=new se(n,null);return r.a=t,r.b=e,Ia.push(r),r}function ge(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function ve(n,t,e){var r=n.a,i=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function de(){this._=null}function ye(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function me(n,t){var e=t,r=t.R,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function xe(n,t){var e=t,r=t.L,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function Me(n){for(;n.L;)n=n.L;return n}function _e(n,t){var e,r,i,u=n.sort(be).pop();for(Ia=[],Za=new Array(n.length),Va=new de,$a=new de;;)if(i=Xa,u&&(!i||u.y<i.y||u.y===i.y&&u.x<i.x))u.x===e&&u.y===r||(Za[u.i]=new re(u),ne(u),e=u.x,r=u.y),u=n.pop();else{if(!i)break;Qt(i.arc)}t&&(le(t),ie(t));var o={cells:Za,edges:Ia};return Va=$a=Ia=Za=null,o}function be(n,t){return t.y-n.y||t.x-n.x}function we(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function Se(n){return n.x}function ke(n){return n.y}function Ne(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ee(n,t,e,r,i,u){if(!n(t,e,r,i,u)){var o=.5*(e+i),a=.5*(r+u),c=t.nodes;c[0]&&Ee(n,c[0],e,r,o,a),c[1]&&Ee(n,c[1],o,r,i,a),c[2]&&Ee(n,c[2],e,a,o,u),c[3]&&Ee(n,c[3],o,a,i,u)}}function Ae(n,t){n=Zu.rgb(n),t=Zu.rgb(t);var e=n.r,r=n.g,i=n.b,u=t.r-e,o=t.g-r,a=t.b-i;return function(n){return"#"+ln(Math.round(e+u*n))+ln(Math.round(r+o*n))+ln(Math.round(i+a*n))}}function Ce(n,t){var e,r={},i={};for(e in n)e in t?r[e]=qe(n[e],t[e]):i[e]=n[e];for(e in t)e in n||(i[e]=t[e]);return function(n){for(e in r)i[e]=r[e](n);return i}}function Le(n,t){return t-=n=+n,function(e){return n+t*e}}function Te(n,t){var e,r,i,u,o,a=0,c=0,l=[],f=[];for(n+="",t+="",Ga.lastIndex=0,r=0;e=Ga.exec(t);++r)e.index&&l.push(t.substring(a,c=e.index)),f.push({i:l.length,x:e[0]}),l.push(null),a=Ga.lastIndex;for(a<t.length&&l.push(t.substring(a)),r=0,u=f.length;(e=Ga.exec(n))&&r<u;++r)if(o=f[r],o.x==e[0]){if(o.i)if(null==l[o.i+1])for(l[o.i-1]+=o.x,l.splice(o.i,1),i=r+1;i<u;++i)f[i].i--;else for(l[o.i-1]+=o.x+l[o.i+1],l.splice(o.i,2),i=r+1;i<u;++i)f[i].i-=2;else if(null==l[o.i+1])l[o.i]=o.x;else for(l[o.i]=o.x+l[o.i+1],l.splice(o.i+1,1),i=r+1;i<u;++i)f[i].i--;f.splice(r,1),u--,r--}else o.x=Le(parseFloat(e[0]),parseFloat(o.x));for(;r<u;)o=f.pop(),null==l[o.i+1]?l[o.i]=o.x:(l[o.i]=o.x+l[o.i+1],l.splice(o.i+1,1)),u--;return 1===l.length?null==l[0]?(o=f[0].x,function(n){return o(n)+""}):function(){return t}:function(n){for(r=0;r<u;++r)l[(o=f[r]).i]=o.x(n);return l.join("")}}function qe(n,t){for(var e,r=Zu.interpolators.length;--r>=0&&!(e=Zu.interpolators[r](n,t)););return e}function ze(n,t){var e,r=[],i=[],u=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;e<a;++e)r.push(qe(n[e],t[e]));for(;e<u;++e)i[e]=n[e];for(;e<o;++e)i[e]=t[e];return function(n){for(e=0;e<a;++e)i[e]=r[e](n);return i}}function Re(n){return function(t){return t<=0?0:t>=1?1:n(t)}}function De(n){return function(t){return 1-n(1-t)}}function Pe(n){return function(t){return.5*(t<.5?n(2*t):2-n(2-2*t))}}function Ue(n){return n*n}function je(n){return n*n*n}function He(n){if(n<=0)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(n<.5?e:3*(n-t)+e-.75)}function Fe(n){return function(t){return Math.pow(t,n)}}function Oe(n){return 1-Math.cos(n*ko)}function Ye(n){return Math.pow(2,10*(n-1))}function Ie(n){return 1-Math.sqrt(1-n*n)}function Ze(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/So*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*So/t)}}function Ve(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Xe(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function $e(n,t){n=Zu.hcl(n),t=Zu.hcl(t);var e=n.h,r=n.c,i=n.l,u=t.h-e,o=t.c-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:u<-180&&(u+=360),function(n){return J(e+u*n,r+o*n,i+a*n)+""}}function Be(n,t){n=Zu.hsl(n),t=Zu.hsl(t);var e=n.h,r=n.s,i=n.l,u=t.h-e,o=t.s-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:u<-180&&(u+=360),function(n){return $(e+u*n,r+o*n,i+a*n)+""}}function We(n,t){n=Zu.lab(n),t=Zu.lab(t);var e=n.l,r=n.a,i=n.b,u=t.l-e,o=t.a-r,a=t.b-i;return function(n){return Q(e+u*n,r+o*n,i+a*n)+""}}function Je(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Ge(n){var t=[n.a,n.b],e=[n.c,n.d],r=Qe(t),i=Ke(t,e),u=Qe(nr(e,t,-i))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Co,this.translate=[n.e,n.f],this.scale=[r,u],this.skew=u?Math.atan2(i,u)*Co:0}function Ke(n,t){return n[0]*t[0]+n[1]*t[1]}function Qe(n){var t=Math.sqrt(Ke(n,n));return t&&(n[0]/=t,n[1]/=t),t}function nr(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function tr(n,t){var e,r=[],i=[],u=Zu.transform(n),o=Zu.transform(t),a=u.translate,c=o.translate,l=u.rotate,f=o.rotate,s=u.skew,h=o.skew,p=u.scale,g=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:Le(a[0],c[0])},{i:3,x:Le(a[1],c[1])})):c[0]||c[1]?r.push("translate("+c+")"):r.push(""),l!=f?(l-f>180?f+=360:f-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:Le(l,f)})):f&&r.push(r.pop()+"rotate("+f+")"),s!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:Le(s,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=g[0]||p[1]!=g[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:e-4,x:Le(p[0],g[0])},{i:e-2,x:Le(p[1],g[1])})):1==g[0]&&1==g[1]||r.push(r.pop()+"scale("+g+")"),e=i.length,function(n){for(var t,u=-1;++u<e;)r[(t=i[u]).i]=t.x(n);return r.join("")}}function er(n,t){return t=t-(n=+n)?1/(t-n):0,function(e){return(e-n)*t}}function rr(n,t){return t=t-(n=+n)?1/(t-n):0,function(e){return Math.max(0,Math.min(1,(e-n)*t))}}function ir(n){for(var t=n.source,e=n.target,r=or(t,e),i=[t];t!==r;)t=t.parent,i.push(t);for(var u=i.length;e!==r;)i.splice(u,0,e),e=e.parent;return i}function ur(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function or(n,t){if(n===t)return n;for(var e=ur(n),r=ur(t),i=e.pop(),u=r.pop(),o=null;i===u;)o=i,i=e.pop(),u=r.pop();return o}function ar(n){n.fixed|=2}function cr(n){n.fixed&=-7}function lr(n){n.fixed|=4,n.px=n.x,n.py=n.y}function fr(n){n.fixed&=-5}function sr(n,t,e){var r=0,i=0;if(n.charge=0,!n.leaf)for(var u,o=n.nodes,a=o.length,c=-1;++c<a;)u=o[c],null!=u&&(sr(u,t,e),n.charge+=u.charge,r+=u.charge*u.cx,i+=u.charge*u.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,i+=l*n.point.y}n.cx=r/n.charge,n.cy=i/n.charge}function hr(n,t){return Zu.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=dr,n}function pr(n){return n.children}function gr(n){return n.value}function vr(n,t){return t.value-n.value}function dr(n){return Zu.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function yr(n){return n.x}function mr(n){return n.y}function xr(n,t,e){n.y0=t,n.y=e}function Mr(n){return Zu.range(n.length)}function _r(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function br(n){for(var t,e=1,r=0,i=n[0][1],u=n.length;e<u;++e)(t=n[e][1])>i&&(r=e,i=t);return r}function wr(n){return n.reduce(Sr,0)}function Sr(n,t){return n+t[1]}function kr(n,t){return Nr(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Nr(n,t){for(var e=-1,r=+n[0],i=(n[1]-r)/t,u=[];++e<=t;)u[e]=i*e+r;return u}function Er(n){return[Zu.min(n),Zu.max(n)]}function Ar(n,t){return n.parent==t.parent?1:2}function Cr(n){var t=n.children;return t&&t.length?t[0]:n._tree.thread}function Lr(n){var t,e=n.children;return e&&(t=e.length)?e[t-1]:n._tree.thread}function Tr(n,t){var e=n.children;if(e&&(i=e.length))for(var r,i,u=-1;++u<i;)t(r=Tr(e[u],t),n)>0&&(n=r);return n}function qr(n,t){return n.x-t.x}function zr(n,t){return t.x-n.x}function Rr(n,t){return n.depth-t.depth}function Dr(n,t){function e(n,r){var i=n.children;if(i&&(o=i.length))for(var u,o,a=null,c=-1;++c<o;)u=i[c],e(u,a),a=u;t(n,r)}e(n,null)}function Pr(n){for(var t,e=0,r=0,i=n.children,u=i.length;--u>=0;)t=i[u]._tree,t.prelim+=e,t.mod+=e,e+=t.shift+(r+=t.change)}function Ur(n,t,e){n=n._tree,t=t._tree;var r=e/(t.number-n.number);n.change+=r,t.change-=r,t.shift+=e,t.prelim+=e,t.mod+=e}function jr(n,t,e){return n._tree.ancestor.parent==t.parent?n._tree.ancestor:e}function Hr(n,t){return n.value-t.value}function Fr(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function Or(n,t){n._pack_next=t,t._pack_prev=n}function Yr(n,t){var e=t.x-n.x,r=t.y-n.y,i=n.r+t.r;return.999*i*i>e*e+r*r}function Ir(n){function t(n){f=Math.min(n.x-n.r,f),s=Math.max(n.x+n.r,s),h=Math.min(n.y-n.r,h),p=Math.max(n.y+n.r,p)}if((e=n.children)&&(l=e.length)){var e,r,i,u,o,a,c,l,f=1/0,s=-(1/0),h=1/0,p=-(1/0);if(e.forEach(Zr),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(i=e[1],i.x=i.r,i.y=0,t(i),l>2))for(u=e[2],$r(r,i,u),t(u),Fr(r,u),r._pack_prev=u,Fr(u,i),i=r._pack_next,o=3;o<l;o++){$r(r,i,u=e[o]);var g=0,v=1,d=1;for(a=i._pack_next;a!==i;a=a._pack_next,v++)if(Yr(a,u)){g=1;break}if(1==g)for(c=r._pack_prev;c!==a._pack_prev&&!Yr(c,u);c=c._pack_prev,d++);g?(v<d||v==d&&i.r<r.r?Or(r,i=a):Or(r=c,i),o--):(Fr(r,u),i=u,t(u))}var y=(f+s)/2,m=(h+p)/2,x=0;for(o=0;o<l;o++)u=e[o],u.x-=y,u.y-=m,x=Math.max(x,u.r+Math.sqrt(u.x*u.x+u.y*u.y));n.r=x,e.forEach(Vr)}}function Zr(n){n._pack_next=n._pack_prev=n}function Vr(n){delete n._pack_next,delete n._pack_prev}function Xr(n,t,e,r){var i=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,i)for(var u=-1,o=i.length;++u<o;)Xr(i[u],t,e,r)}function $r(n,t,e){var r=n.r+e.r,i=t.x-n.x,u=t.y-n.y;if(r&&(i||u)){var o=t.r+e.r,a=i*i+u*u;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*i+l*u,e.y=n.y+c*u-l*i}else e.x=n.x+r,e.y=n.y}function Br(n){return 1+Zu.max(n,function(n){return n.y})}function Wr(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Jr(n){var t=n.children;return t&&t.length?Jr(t[0]):n}function Gr(n){var t,e=n.children;return e&&(t=e.length)?Gr(e[t-1]):n}function Kr(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Qr(n,t){var e=n.x+t[3],r=n.y+t[0],i=n.dx-t[1]-t[3],u=n.dy-t[0]-t[2];return i<0&&(e+=i/2,i=0),u<0&&(r+=u/2,u=0),{x:e,y:r,dx:i,dy:u}}function ni(n){var t=n[0],e=n[n.length-1];return t<e?[t,e]:[e,t]}function ti(n){return n.rangeExtent?n.rangeExtent():ni(n.range())}function ei(n,t,e,r){var i=e(n[0],n[1]),u=r(t[0],t[1]);return function(n){return u(i(n))}}function ri(n,t){var e,r=0,i=n.length-1,u=n[r],o=n[i];return o<u&&(e=r,r=i,i=e,e=u,u=o,o=e),n[r]=t.floor(u),n[i]=t.ceil(o),n}function ii(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ac}function ui(n,t,e,r){var i=[],u=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)i.push(e(n[o-1],n[o])),u.push(r(t[o-1],t[o]));return function(t){var e=Zu.bisect(n,t,1,a)-1;return u[e](i[e](t))}}function oi(n,t,e,r){function i(){var i=Math.min(n.length,t.length)>2?ui:ei,c=r?rr:er;return o=i(n,t,c,e),a=i(t,n,c,qe),u}function u(n){return o(n)}var o,a;return u.invert=function(n){return a(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),i()):n},u.range=function(n){return arguments.length?(t=n,i()):t},u.rangeRound=function(n){return u.range(n).interpolate(Je)},u.clamp=function(n){return arguments.length?(r=n,i()):r},u.interpolate=function(n){return arguments.length?(e=n,i()):e},u.ticks=function(t){return fi(n,t)},u.tickFormat=function(t,e){return si(n,t,e)},u.nice=function(t){return ci(n,t),i()},u.copy=function(){return oi(n,t,e,r)},i()}function ai(n,t){return Zu.rebind(n,t,"range","rangeRound","interpolate","clamp")}function ci(n,t){return ri(n,ii(li(n,t)[2]))}function li(n,t){null==t&&(t=10);var e=ni(n),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),u=t/r*i;return u<=.15?i*=10:u<=.35?i*=5:u<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function fi(n,t){return Zu.range.apply(Zu,li(n,t))}function si(n,t,e){var r=-Math.floor(Math.log(li(n,t)[2])/Math.LN10+.01);return Zu.format(e?e.replace(ea,function(n,t,e,i,u,o,a,c,l,f){return[t,e,i,u,o,a,c,l||"."+(r-2*("%"===f)),f].join("")}):",."+r+"f")}function hi(n,t,e,r){function i(n){return(e?Math.log(n<0?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function u(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(i(t))}return o.invert=function(t){return u(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(i)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(i)),o):t},o.nice=function(){var t=ri(r.map(i),e?Math:lc);return n.domain(t),r=t.map(u),o},o.ticks=function(){var n=ni(r),o=[],a=n[0],c=n[1],l=Math.floor(i(a)),f=Math.ceil(i(c)),s=t%1?2:t;if(isFinite(f-l)){if(e){for(;l<f;l++)for(var h=1;h<s;h++)o.push(u(l)*h);o.push(u(l))}else for(o.push(u(l));l++<f;)for(var h=s-1;h>0;h--)o.push(u(l)*h);for(l=0;o[l]<a;l++);for(f=o.length;o[f-1]>c;f--);o=o.slice(l,f)}return o},o.tickFormat=function(n,t){if(!arguments.length)return cc;arguments.length<2?t=cc:"function"!=typeof t&&(t=Zu.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/u(c(i(n)+r))<=a?t(n):""}},o.copy=function(){return hi(n.copy(),t,e,r)},ai(o,n)}function pi(n,t,e){function r(t){return n(i(t))}var i=gi(t),u=gi(1/t);return r.invert=function(t){return u(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(i)),r):e},r.ticks=function(n){return fi(e,n)},r.tickFormat=function(n,t){return si(e,n,t)},r.nice=function(n){return r.domain(ci(e,n))},r.exponent=function(o){return arguments.length?(i=gi(t=o),u=gi(1/t),n.domain(e.map(i)),r):t},r.copy=function(){return pi(n.copy(),t,e)},ai(r,n)}function gi(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function vi(n,t){function e(e){return o[((u.get(e)||"range"===t.t&&u.set(e,n.push(e)))-1)%o.length]}function r(t,e){return Zu.range(n.length).map(function(n){return t+e*n})}var u,o,a;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new i;for(var o,a=-1,c=r.length;++a<c;)u.has(o=r[a])||u.set(o,n.push(o));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(o=n,a=0,t={t:"range",a:arguments},e):o},e.rangePoints=function(i,u){arguments.length<2&&(u=0);var c=i[0],l=i[1],f=(l-c)/(Math.max(1,n.length-1)+u);return o=r(n.length<2?(c+l)/2:c+f*u/2,f),a=0,t={t:"rangePoints",a:arguments},e},e.rangeBands=function(i,u,c){arguments.length<2&&(u=0),arguments.length<3&&(c=u);var l=i[1]<i[0],f=i[l-0],s=i[1-l],h=(s-f)/(n.length-u+2*c);return o=r(f+h*c,h),l&&o.reverse(),a=h*(1-u),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,u,c){arguments.length<2&&(u=0),arguments.length<3&&(c=u);var l=i[1]<i[0],f=i[l-0],s=i[1-l],h=Math.floor((s-f)/(n.length-u+2*c)),p=s-f-(n.length-u)*h;return o=r(f+Math.round(p/2),h),l&&o.reverse(),a=Math.round(h*(1-u)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return ni(t.a[0])},e.copy=function(){return vi(n,t)},e.domain(n)}function di(n,t){function e(){var e=0,u=t.length;for(i=[];++e<u;)i[e-1]=Zu.quantile(n,e/u);return r}function r(n){if(!isNaN(n=+n))return t[Zu.bisect(i,n)]}var i;return r.domain=function(t){return arguments.length?(n=t.filter(function(n){return!isNaN(n)}).sort(Zu.ascending),e()):n},r.range=function(n){return arguments.length?(t=n,e()):t},r.quantiles=function(){return i},r.invertExtent=function(e){return e=t.indexOf(e),e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},r.copy=function(){return di(n,t)},e()}function yi(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(u*(t-n))))]}function i(){return u=e.length/(t-n),o=e.length-1,r}var u,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],i()):[n,t]},r.range=function(n){return arguments.length?(e=n,i()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=t<0?NaN:t/u+n,[t,t+1/u]},r.copy=function(){return yi(n,t,e)},i()}function mi(n,t){function e(e){if(e<=e)return t[Zu.bisect(n,e)]}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return mi(n,t)},e}function xi(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return fi(n,t)},t.tickFormat=function(t,e){return si(n,t,e)},t.copy=function(){return xi(n)},t}function Mi(n){return n.innerRadius}function _i(n){return n.outerRadius}function bi(n){return n.startAngle}function wi(n){return n.endAngle}function Si(n){function t(t){function o(){l.push("M",u(n(f),a))}for(var c,l=[],f=[],s=-1,h=t.length,p=vn(e),g=vn(r);++s<h;)i.call(this,c=t[s],s)?f.push([+p.call(this,c,s),+g.call(this,c,s)]):f.length&&(o(),f=[]);return f.length&&o(),l.length?l.join(""):null}var e=Zt,r=Vt,i=Vn,u=ki,o=u.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(i=n,t):i},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?u=n:(u=dc.get(n)||ki).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function ki(n){return n.join("L")}function Ni(n){return ki(n)+"Z"}function Ei(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function Ai(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("V",(r=n[t])[1],"H",r[0]);return i.join("")}function Ci(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r=n[t])[0],"V",r[1]);return i.join("")}function Li(n,t){return n.length<4?ki(n):n[1]+zi(n.slice(1,n.length-1),Ri(n,t))}function Ti(n,t){return n.length<3?ki(n):n[0]+zi((n.push(n[0]),n),Ri([n[n.length-2]].concat(n,[n[1]]),t))}function qi(n,t){return n.length<3?ki(n):n[0]+zi(n,Ri(n,t))}function zi(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return ki(n);var e=n.length!=t.length,r="",i=n[0],u=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(u[0]-2*o[0]/3)+","+(u[1]-2*o[1]/3)+","+u[0]+","+u[1],i=n[1],c=2),t.length>1){a=t[1],u=n[c],c++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1];for(var l=2;l<t.length;l++,c++)u=n[c],a=t[l],r+="S"+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1]}if(e){var f=n[c];r+="Q"+(u[0]+2*a[0]/3)+","+(u[1]+2*a[1]/3)+","+f[0]+","+f[1]}return r}function Ri(n,t){for(var e,r=[],i=(1-t)/2,u=n[0],o=n[1],a=1,c=n.length;++a<c;)e=u,u=o,o=n[a],r.push([i*(o[0]-e[0]),i*(o[1]-e[1])]);return r}function Di(n){if(n.length<3)return ki(n);var t=1,e=n.length,r=n[0],i=r[0],u=r[1],o=[i,i,i,(r=n[1])[0]],a=[u,u,u,r[1]],c=[i,",",u,"L",Hi(xc,o),",",Hi(xc,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Fi(c,o,a);return n.pop(),c.push("L",r),c.join("")}function Pi(n){if(n.length<4)return ki(n);for(var t,e=[],r=-1,i=n.length,u=[0],o=[0];++r<3;)t=n[r],u.push(t[0]),o.push(t[1]);for(e.push(Hi(xc,u)+","+Hi(xc,o)),--r;++r<i;)t=n[r],u.shift(),u.push(t[0]),o.shift(),o.push(t[1]),Fi(e,u,o);return e.join("")}function Ui(n){for(var t,e,r=-1,i=n.length,u=i+4,o=[],a=[];++r<4;)e=n[r%i],o.push(e[0]),a.push(e[1]);for(t=[Hi(xc,o),",",Hi(xc,a)],--r;++r<u;)e=n[r%i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Fi(t,o,a);return t.join("")}function ji(n,t){var e=n.length-1;if(e)for(var r,i,u=n[0][0],o=n[0][1],a=n[e][0]-u,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],i=l/e,r[0]=t*r[0]+(1-t)*(u+i*a),r[1]=t*r[1]+(1-t)*(o+i*c);return Di(n)}function Hi(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Fi(n,t,e){n.push("C",Hi(yc,t),",",Hi(yc,e),",",Hi(mc,t),",",Hi(mc,e),",",Hi(xc,t),",",Hi(xc,e))}function Oi(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Yi(n){for(var t=0,e=n.length-1,r=[],i=n[0],u=n[1],o=r[0]=Oi(i,u);++t<e;)r[t]=(o+(o=Oi(i=u,u=n[t+1])))/2;return r[t]=o,r}function Ii(n){for(var t,e,r,i,u=[],o=Yi(n),a=-1,c=n.length-1;++a<c;)t=Oi(n[a],n[a+1]),io(t)<No?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,i=e*e+r*r,i>9&&(i=3*t/Math.sqrt(i),o[a]=i*e,o[a+1]=i*r));for(a=-1;++a<=c;)i=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),u.push([i||0,o[a]*i||0]);return u}function Zi(n){return n.length<3?ki(n):n[0]+zi(n,Ii(n))}function Vi(n){for(var t,e,r,i=-1,u=n.length;++i<u;)t=n[i],e=t[0],r=t[1]+gc,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Xi(n){function t(t){function c(){v.push("M",a(n(y),s),f,l(n(d.reverse()),s),"Z")}for(var h,p,g,v=[],d=[],y=[],m=-1,x=t.length,M=vn(e),_=vn(i),b=e===r?function(){return p}:vn(r),w=i===u?function(){return g}:vn(u);++m<x;)o.call(this,h=t[m],m)?(d.push([p=+M.call(this,h,m),g=+_.call(this,h,m)]),y.push([+b.call(this,h,m),+w.call(this,h,m)])):d.length&&(c(),d=[],y=[]);return d.length&&c(),v.length?v.join(""):null}var e=Zt,r=Zt,i=0,u=Vt,o=Vn,a=ki,c=a.key,l=a,f="L",s=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(i=u=n,t):u},t.y0=function(n){return arguments.length?(i=n,t):i},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=dc.get(n)||ki).key,l=a.reverse||a,f=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(s=n,t):s},t}function $i(n){return n.radius}function Bi(n){return[n.x,n.y]}function Wi(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]+gc;return[e*Math.cos(r),e*Math.sin(r)]}}function Ji(){return 64}function Gi(){return"circle"}function Ki(n){var t=Math.sqrt(n/wo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Qi(n,t){return lo(n,kc),n.id=t,n}function nu(n,t,e,r){var i=n.id;return A(n,"function"==typeof e?function(n,u,o){n.__transition__[i].tween.set(t,r(e.call(n,n.__data__,u,o)))}:(e=r(e),function(n){n.__transition__[i].tween.set(t,e)}))}function tu(n){return null==n&&(n=""),function(){this.textContent=n}}function eu(n,t,e,r){var u=n.__transition__||(n.__transition__={active:0,count:0}),o=u[e];if(!o){var a=r.time;o=u[e]={tween:new i,time:a,ease:r.ease,delay:r.delay,duration:r.duration},++u.count,Zu.timer(function(r){function i(r){return u.active>e?l():(u.active=e,o.event&&o.event.start.call(n,f,t),o.tween.forEach(function(e,r){(r=r.call(n,f,t))&&v.push(r)}),void Zu.timer(function(){return g.c=c(r||1)?Vn:c,1},0,a))}function c(r){if(u.active!==e)return l();for(var i=r/p,a=s(i),c=v.length;c>0;)v[--c].call(n,a);return i>=1?(o.event&&o.event.end.call(n,f,t),l()):void 0}function l(){return--u.count?delete u[e]:delete n.__transition__,1}var f=n.__data__,s=o.ease,h=o.delay,p=o.duration,g=Wo,v=[];return g.t=h+a,h<=r?i(r-h):void(g.c=i)},0,a)}}function ru(n,t){n.attr("transform",function(n){return"translate("+t(n)+",0)"})}function iu(n,t){n.attr("transform",function(n){return"translate(0,"+t(n)+")"})}function uu(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ou(n,t,e){function r(t){var e=n(t),r=u(e,1);return t-e<r-t?e:r}function i(e){return t(e=n(new qc(e-1)),1),e}function u(n,e){return t(n=new qc((+n)),e),n}function o(n,r,u){var o=i(n),a=[];if(u>1)for(;o<r;)e(o)%u||a.push(new Date((+o))),t(o,1);else for(;o<r;)a.push(new Date((+o))),t(o,1);return a}function a(n,t,e){try{qc=uu;var r=new uu;return r._=n,o(r,t,e)}finally{qc=Date}}n.floor=n,n.round=r,n.ceil=i,n.offset=u,n.range=o;var c=n.utc=au(n);return c.floor=c,c.round=au(r),c.ceil=au(i),c.offset=au(u),c.range=a,n}function au(n){return function(t,e){try{qc=uu;var r=new uu;return r._=t,n(r,e)._}finally{qc=Date}}}function cu(n){function t(t){for(var r,i,u,o=[],a=-1,c=0;++a<e;)37===n.charCodeAt(a)&&(o.push(n.substring(c,a)),null!=(i=Gc[r=n.charAt(++a)])&&(r=n.charAt(++a)),(u=Kc[r])&&(r=u(t,null==i?"e"===r?" ":"0":i)),o.push(r),c=a+1);return o.push(n.substring(c,a)),o.join("")}var e=n.length;return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=lu(e,n,t,0);if(r!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var i=null!=e.Z&&qc!==uu,u=new(i?uu:qc);return"j"in e?u.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(u.setFullYear(e.y,0,1),u.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(u.getDay()+5)%7:e.w+7*e.U-(u.getDay()+6)%7)):u.setFullYear(e.y,e.m,e.d),u.setHours(e.H+Math.floor(e.Z/100),e.M+e.Z%100,e.S,e.L),i?u._:u},t.toString=function(){return n},t}function lu(n,t,e,r){for(var i,u,o,a=0,c=t.length,l=e.length;a<c;){if(r>=l)return-1;if(i=t.charCodeAt(a++),37===i){if(o=t.charAt(a++),u=Qc[o in Gc?t.charAt(a++):o],!u||(r=u(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function fu(n){return new RegExp("^(?:"+n.map(Zu.requote).join("|")+")","i")}function su(n){for(var t=new i,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function hu(n,t,e){var r=n<0?"-":"",i=(r?-n:n)+"",u=i.length;return r+(u<e?new Array(e-u+1).join(t)+i:i)}function pu(n,t,e){Zc.lastIndex=0;var r=Zc.exec(t.substring(e));return r?(n.w=Vc.get(r[0].toLowerCase()),e+r[0].length):-1}function gu(n,t,e){Yc.lastIndex=0;var r=Yc.exec(t.substring(e));return r?(n.w=Ic.get(r[0].toLowerCase()),e+r[0].length):-1}function vu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function du(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e));return r?(n.U=+r[0],e+r[0].length):-1}function yu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e));return r?(n.W=+r[0],e+r[0].length):-1}function mu(n,t,e){Bc.lastIndex=0;var r=Bc.exec(t.substring(e));return r?(n.m=Wc.get(r[0].toLowerCase()),e+r[0].length):-1}function xu(n,t,e){Xc.lastIndex=0;var r=Xc.exec(t.substring(e));return r?(n.m=$c.get(r[0].toLowerCase()),e+r[0].length):-1}function Mu(n,t,e){return lu(n,Kc.c.toString(),t,e)}function _u(n,t,e){return lu(n,Kc.x.toString(),t,e)}function bu(n,t,e){return lu(n,Kc.X.toString(),t,e)}function wu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Su(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.y=Nu(+r[0]),e+r[0].length):-1}function ku(n,t,e){return/^[+-]\d{4}$/.test(t=t.substring(e,e+5))?(n.Z=+t,e+5):-1}function Nu(n){return n+(n>68?1900:2e3)}function Eu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Au(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function Cu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function Lu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function Tu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function qu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function zu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function Ru(n,t,e){var r=tl.get(t.substring(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}function Du(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=~~(io(t)/60),i=io(t)%60;return e+hu(r,"0",2)+hu(i,"0",2)}function Pu(n,t,e){Jc.lastIndex=0;var r=Jc.exec(t.substring(e,e+1));return r?e+r[0].length:-1}function Uu(n){function t(n){try{qc=uu;var t=new qc;return t._=n,e(t)}finally{qc=Date}}var e=cu(n);return t.parse=function(n){try{qc=uu;var t=e.parse(n);return t&&t._}finally{qc=Date}},t.toString=e.toString,t}function ju(n){return n.toISOString()}function Hu(n,t,e){function r(t){return n(t)}function i(n,e){var r=n[1]-n[0],i=r/e,u=Zu.bisect(rl,i);return u==rl.length?[t.year,li(n.map(function(n){return n/31536e6}),e)[2]]:u?t[i/rl[u-1]<rl[u]/i?u-1:u]:[al,li(n,e)[2]]}return r.invert=function(t){return Fu(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Fu)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Fu(+e+1),t).length}var u=r.domain(),o=ni(u),a=null==n?i(o,10):"number"==typeof n&&i(o,n);return a&&(n=a[0],t=a[1]),r.domain(ri(u,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Fu(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Fu(+t+1);return t}}:n))},r.ticks=function(n,t){var e=ni(r.domain()),u=null==n?i(e,10):"number"==typeof n?i(e,n):!n.range&&[{range:n},t];return u&&(n=u[0],t=u[1]),n.range(e[0],Fu(+e[1]+1),t<1?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Hu(n.copy(),t,e)},ai(r,n)}function Fu(n){return new Date(n)}function Ou(n){return function(t){for(var e=n.length-1,r=n[e];!r[1](t);)r=n[--e];return r[0](t)}}function Yu(n){return JSON.parse(n.responseText)}function Iu(n){var t=$u.createRange();return t.selectNode($u.body),t.createContextualFragment(n.responseText)}var Zu={version:"3.3.8"};Date.now||(Date.now=function(){return+new Date});var Vu=[].slice,Xu=function(n){return Vu.call(n)},$u=document,Bu=$u.documentElement,Wu=window;try{Xu(Bu.childNodes)[0].nodeType}catch(Ju){Xu=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}try{$u.createElement("div").style.setProperty("opacity",0,"")}catch(Gu){var Ku=Wu.Element.prototype,Qu=Ku.setAttribute,no=Ku.setAttributeNS,to=Wu.CSSStyleDeclaration.prototype,eo=to.setProperty;Ku.setAttribute=function(n,t){Qu.call(this,n,t+"")},Ku.setAttributeNS=function(n,t,e){no.call(this,n,t,e+"")},to.setProperty=function(n,t,e){eo.call(this,n,t+"",e)}}Zu.ascending=function(n,t){return n<t?-1:n>t?1:n>=t?0:NaN},Zu.descending=function(n,t){return t<n?-1:t>n?1:t>=n?0:NaN},Zu.min=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u&&!(null!=(e=n[i])&&e<=e);)e=void 0;for(;++i<u;)null!=(r=n[i])&&e>r&&(e=r)}else{for(;++i<u&&!(null!=(e=t.call(n,n[i],i))&&e<=e);)e=void 0;for(;++i<u;)null!=(r=t.call(n,n[i],i))&&e>r&&(e=r)}return e},Zu.max=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u&&!(null!=(e=n[i])&&e<=e);)e=void 0;for(;++i<u;)null!=(r=n[i])&&r>e&&(e=r)}else{for(;++i<u&&!(null!=(e=t.call(n,n[i],i))&&e<=e);)e=void 0;for(;++i<u;)null!=(r=t.call(n,n[i],i))&&r>e&&(e=r)}return e},Zu.extent=function(n,t){var e,r,i,u=-1,o=n.length;if(1===arguments.length){for(;++u<o&&!(null!=(e=i=n[u])&&e<=e);)e=i=void 0;for(;++u<o;)null!=(r=n[u])&&(e>r&&(e=r),i<r&&(i=r))}else{for(;++u<o&&!(null!=(e=i=t.call(n,n[u],u))&&e<=e);)e=void 0;for(;++u<o;)null!=(r=t.call(n,n[u],u))&&(e>r&&(e=r),i<r&&(i=r))}return[e,i]},Zu.sum=function(n,t){var e,r=0,i=n.length,u=-1;if(1===arguments.length)for(;++u<i;)isNaN(e=+n[u])||(r+=e);else for(;++u<i;)isNaN(e=+t.call(n,n[u],u))||(r+=e);return r},Zu.mean=function(t,e){var r,i=t.length,u=0,o=-1,a=0;if(1===arguments.length)for(;++o<i;)n(r=t[o])&&(u+=(r-u)/++a);else for(;++o<i;)n(r=e.call(t,t[o],o))&&(u+=(r-u)/++a);return a?u:void 0},Zu.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),i=+n[r-1],u=e-r;return u?i+u*(n[r]-i):i},Zu.median=function(t,e){return arguments.length>1&&(t=t.map(e)),t=t.filter(n),t.length?Zu.quantile(t.sort(Zu.ascending),.5):void 0},Zu.bisector=function(n){return{left:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){
var u=r+i>>>1;n.call(t,t[u],u)<e?r=u+1:i=u}return r},right:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var u=r+i>>>1;e<n.call(t,t[u],u)?i=u:r=u+1}return r}}};var ro=Zu.bisector(function(n){return n});Zu.bisectLeft=ro.left,Zu.bisect=Zu.bisectRight=ro.right,Zu.shuffle=function(n){for(var t,e,r=n.length;r;)e=Math.random()*r--|0,t=n[r],n[r]=n[e],n[e]=t;return n},Zu.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},Zu.pairs=function(n){for(var t,e=0,r=n.length-1,i=n[0],u=new Array(r<0?0:r);e<r;)u[e]=[t=i,i=n[++e]];return u},Zu.zip=function(){if(!(i=arguments.length))return[];for(var n=-1,e=Zu.min(arguments,t),r=new Array(e);++n<e;)for(var i,u=-1,o=r[n]=new Array(i);++u<i;)o[u]=arguments[u][n];return r},Zu.transpose=function(n){return Zu.zip.apply(Zu,n)},Zu.keys=function(n){var t=[];for(var e in n)t.push(e);return t},Zu.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},Zu.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},Zu.merge=function(n){for(var t,e,r,i=n.length,u=-1,o=0;++u<i;)o+=n[u].length;for(e=new Array(o);--i>=0;)for(r=n[i],t=r.length;--t>=0;)e[--o]=r[t];return e};var io=Math.abs;Zu.range=function(n,t,r){if(arguments.length<3&&(r=1,arguments.length<2&&(t=n,n=0)),(t-n)/r===1/0)throw new Error("infinite range");var i,u=[],o=e(io(r)),a=-1;if(n*=o,t*=o,r*=o,r<0)for(;(i=n+r*++a)>t;)u.push(i/o);else for(;(i=n+r*++a)<t;)u.push(i/o);return u},Zu.map=function(n){var t=new i;if(n instanceof i)n.forEach(function(n,e){t.set(n,e)});else for(var e in n)t.set(e,n[e]);return t},r(i,{has:function(n){return uo+n in this},get:function(n){return this[uo+n]},set:function(n,t){return this[uo+n]=t},remove:function(n){return n=uo+n,n in this&&delete this[n]},keys:function(){var n=[];return this.forEach(function(t){n.push(t)}),n},values:function(){var n=[];return this.forEach(function(t,e){n.push(e)}),n},entries:function(){var n=[];return this.forEach(function(t,e){n.push({key:t,value:e})}),n},forEach:function(n){for(var t in this)t.charCodeAt(0)===oo&&n.call(this,t.substring(1),this[t])}});var uo="\0",oo=uo.charCodeAt(0);Zu.nest=function(){function n(t,a,c){if(c>=o.length)return r?r.call(u,a):e?a.sort(e):a;for(var l,f,s,h,p=-1,g=a.length,v=o[c++],d=new i;++p<g;)(h=d.get(l=v(f=a[p])))?h.push(f):d.set(l,[f]);return t?(f=t(),s=function(e,r){f.set(e,n(t,r,c))}):(f={},s=function(e,r){f[e]=n(t,r,c)}),d.forEach(s),f}function t(n,e){if(e>=o.length)return n;var r=[],i=a[e++];return n.forEach(function(n,i){r.push({key:n,values:t(i,e)})}),i?r.sort(function(n,t){return i(n.key,t.key)}):r}var e,r,u={},o=[],a=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(Zu.map,e,0),0)},u.key=function(n){return o.push(n),u},u.sortKeys=function(n){return a[o.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},Zu.set=function(n){var t=new u;if(n)for(var e=0,r=n.length;e<r;++e)t.add(n[e]);return t},r(u,{has:function(n){return uo+n in this},add:function(n){return this[uo+n]=!0,n},remove:function(n){return n=uo+n,n in this&&delete this[n]},values:function(){var n=[];return this.forEach(function(t){n.push(t)}),n},forEach:function(n){for(var t in this)t.charCodeAt(0)===oo&&n.call(this,t.substring(1))}}),Zu.behavior={},Zu.rebind=function(n,t){for(var e,r=1,i=arguments.length;++r<i;)n[e=arguments[r]]=o(n,t,t[e]);return n};var ao=["webkit","ms","moz","Moz","o","O"];Zu.dispatch=function(){for(var n=new l,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=f(n);return n},l.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.substring(e+1),n=n.substring(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},Zu.event=null,Zu.requote=function(n){return n.replace(co,"\\$&")};var co=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,lo={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},fo=function(n,t){return t.querySelector(n)},so=function(n,t){return t.querySelectorAll(n)},ho=Bu[a(Bu,"matchesSelector")],po=function(n,t){return ho.call(n,t)};"function"==typeof Sizzle&&(fo=function(n,t){return Sizzle(n,t)[0]||null},so=function(n,t){return Sizzle.uniqueSort(Sizzle(n,t))},po=Sizzle.matchesSelector),Zu.selection=function(){return mo};var go=Zu.selection.prototype=[];go.select=function(n){var t,e,r,i,u=[];n=v(n);for(var o=-1,a=this.length;++o<a;){u.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(i=r[c])?(t.push(e=n.call(i,i.__data__,c,o)),e&&"__data__"in i&&(e.__data__=i.__data__)):t.push(null)}return g(u)},go.selectAll=function(n){var t,e,r=[];n=d(n);for(var i=-1,u=this.length;++i<u;)for(var o=this[i],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=Xu(n.call(e,e.__data__,a,i))),t.parentNode=e);return g(r)};var vo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Zu.ns={prefix:vo,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.substring(0,t),n=n.substring(t+1)),vo.hasOwnProperty(e)?{space:vo[e],local:n}:n}},go.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=Zu.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(y(t,n[t]));return this}return this.each(y(n,t))},go.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=n.trim().split(/^|\s+/g)).length,i=-1;if(t=e.classList){for(;++i<r;)if(!t.contains(n[i]))return!1}else for(t=e.getAttribute("class");++i<r;)if(!x(n[i]).test(t))return!1;return!0}for(t in n)this.each(M(t,n[t]));return this}return this.each(M(n,t))},go.style=function(n,t,e){var r=arguments.length;if(r<3){if("string"!=typeof n){r<2&&(t="");for(e in n)this.each(b(e,n[e],t));return this}if(r<2)return Wu.getComputedStyle(this.node(),null).getPropertyValue(n);e=""}return this.each(b(n,t,e))},go.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(w(t,n[t]));return this}return this.each(w(n,t))},go.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},go.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},go.append=function(n){return n=S(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},go.insert=function(n,t){return n=S(n),t=v(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},go.remove=function(){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})},go.data=function(n,t){function e(n,e){var r,u,o,a=n.length,s=e.length,h=Math.min(a,s),p=new Array(s),g=new Array(s),v=new Array(a);if(t){var d,y=new i,m=new i,x=[];for(r=-1;++r<a;)d=t.call(u=n[r],u.__data__,r),y.has(d)?v[r]=u:y.set(d,u),x.push(d);for(r=-1;++r<s;)d=t.call(e,o=e[r],r),(u=y.get(d))?(p[r]=u,u.__data__=o):m.has(d)||(g[r]=k(o)),m.set(d,o),y.remove(d);for(r=-1;++r<a;)y.has(x[r])&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],o=e[r],u?(u.__data__=o,p[r]=u):g[r]=k(o);for(;r<s;++r)g[r]=k(e[r]);for(;r<a;++r)v[r]=n[r]}g.update=p,g.parentNode=p.parentNode=v.parentNode=n.parentNode,c.push(g),l.push(p),f.push(v)}var r,u,o=-1,a=this.length;if(!arguments.length){for(n=new Array(a=(r=this[0]).length);++o<a;)(u=r[o])&&(n[o]=u.__data__);return n}var c=C([]),l=g([]),f=g([]);if("function"==typeof n)for(;++o<a;)e(r=this[o],n.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],n);return l.enter=function(){return c},l.exit=function(){return f},l},go.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},go.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=N(n));for(var u=0,o=this.length;u<o;u++){i.push(t=[]),t.parentNode=(e=this[u]).parentNode;for(var a=0,c=e.length;a<c;a++)(r=e[a])&&n.call(r,r.__data__,a)&&t.push(r)}return g(i)},go.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],i=r.length-1,u=r[i];--i>=0;)(e=r[i])&&(u&&u!==e.nextSibling&&u.parentNode.insertBefore(e,u),u=e);return this},go.sort=function(n){n=E.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},go.each=function(n){return A(this,function(t,e,r){n.call(t,t.__data__,e,r)})},go.call=function(n){var t=Xu(arguments);return n.apply(t[0]=this,t),this},go.empty=function(){return!this.node()},go.node=function(){for(var n=0,t=this.length;n<t;n++)for(var e=this[n],r=0,i=e.length;r<i;r++){var u=e[r];if(u)return u}return null},go.size=function(){var n=0;return this.each(function(){++n}),n};var yo=[];Zu.selection.enter=C,Zu.selection.enter.prototype=yo,yo.append=go.append,yo.empty=go.empty,yo.node=go.node,yo.call=go.call,yo.size=go.size,yo.select=function(n){for(var t,e,r,i,u,o=[],a=-1,c=this.length;++a<c;){r=(i=this[a]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,f=i.length;++l<f;)(u=i[l])?(t.push(r[l]=e=n.call(i.parentNode,u.__data__,l,a)),e.__data__=u.__data__):t.push(null)}return g(o)},yo.insert=function(n,t){return arguments.length<2&&(t=L(this)),go.insert.call(this,n,t)},go.transition=function(){for(var n,t,e=_c||++Nc,r=[],i=bc||{time:Date.now(),ease:He,delay:0,duration:250},u=-1,o=this.length;++u<o;){r.push(n=[]);for(var a=this[u],c=-1,l=a.length;++c<l;)(t=a[c])&&eu(t,c,e,i),n.push(t)}return Qi(r,e)},go.interrupt=function(){return this.each(T)},Zu.select=function(n){var t=["string"==typeof n?fo(n,$u):n];return t.parentNode=Bu,g([t])},Zu.selectAll=function(n){var t=Xu("string"==typeof n?so(n,$u):n);return t.parentNode=Bu,g([t])};var mo=Zu.select(Bu);go.on=function(n,t,e){var r=arguments.length;if(r<3){if("string"!=typeof n){r<2&&(t=!1);for(e in n)this.each(q(e,n[e],t));return this}if(r<2)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(q(n,t,e))};var xo=Zu.map({mouseenter:"mouseover",mouseleave:"mouseout"});xo.forEach(function(n){"on"+n in $u&&xo.remove(n)});var Mo=a(Bu.style,"userSelect"),_o=0;Zu.mouse=function(n){return P(n,h())};var bo=/WebKit/.test(Wu.navigator.userAgent)?-1:0;Zu.touches=function(n,t){return arguments.length<2&&(t=h().touches),t?Xu(t).map(function(t){var e=P(n,t);return e.identifier=t.identifier,e}):[]},Zu.behavior.drag=function(){function n(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function t(){return Zu.event.changedTouches[0].identifier}function e(n,t){return Zu.touches(n).filter(function(n){return n.identifier===t})[0]}function r(n,t,e,r){return function(){function o(){var n=t(f,p),e=n[0]-v[0],r=n[1]-v[1];d|=e|r,v=n,s({type:"drag",x:n[0]+c[0],y:n[1]+c[1],dx:e,dy:r})}function a(){y.on(e+"."+g,null).on(r+"."+g,null),m(d&&Zu.event.target===h),s({type:"dragend"})}var c,l=this,f=l.parentNode,s=i.of(l,arguments),h=Zu.event.target,p=n(),g=null==p?"drag":"drag-"+p,v=t(f,p),d=0,y=Zu.select(Wu).on(e+"."+g,o).on(r+"."+g,a),m=D();u?(c=u.apply(l,arguments),c=[c.x-v[0],c.y-v[1]]):c=[0,0],s({type:"dragstart"})}}var i=p(n,"drag","dragstart","dragend"),u=null,o=r(c,Zu.mouse,"mousemove","mouseup"),a=r(t,e,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},Zu.rebind(n,i,"on")};var wo=Math.PI,So=2*wo,ko=wo/2,No=1e-6,Eo=No*No,Ao=wo/180,Co=180/wo,Lo=Math.SQRT2,To=2,qo=4;Zu.interpolateZoom=function(n,t){function e(n){var t=n*m;if(y){var e=O(v),o=u/(To*h)*(e*Y(Lo*t+v)-F(v));return[r+o*l,i+o*f,u*e/O(Lo*t+v)]}return[r+n*l,i+n*f,u*Math.exp(Lo*t)]}var r=n[0],i=n[1],u=n[2],o=t[0],a=t[1],c=t[2],l=o-r,f=a-i,s=l*l+f*f,h=Math.sqrt(s),p=(c*c-u*u+qo*s)/(2*u*To*h),g=(c*c-u*u-qo*s)/(2*c*To*h),v=Math.log(Math.sqrt(p*p+1)-p),d=Math.log(Math.sqrt(g*g+1)-g),y=d-v,m=(y||Math.log(c/u))/Lo;return e.duration=1e3*m,e},Zu.behavior.zoom=function(){function n(n){n.on(E,l).on(Do+".zoom",h).on(A,g).on("dblclick.zoom",v).on(L,f)}function t(n){return[(n[0]-S.x)/S.k,(n[1]-S.y)/S.k]}function e(n){return[n[0]*S.k+S.x,n[1]*S.k+S.y]}function r(n){S.k=Math.max(N[0],Math.min(N[1],n))}function i(n,t){t=e(t),S.x+=n[0]-t[0],S.y+=n[1]-t[1]}function u(){_&&_.domain(M.range().map(function(n){return(n-S.x)/S.k}).map(M.invert)),w&&w.domain(b.range().map(function(n){return(n-S.y)/S.k}).map(b.invert))}function o(n){n({type:"zoomstart"})}function a(n){u(),n({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(n){n({type:"zoomend"})}function l(){function n(){f=1,i(Zu.mouse(r),h),a(u)}function e(){s.on(A,Wu===r?g:null).on(C,null),p(f&&Zu.event.target===l),c(u)}var r=this,u=q.of(r,arguments),l=Zu.event.target,f=0,s=Zu.select(Wu).on(A,n).on(C,e),h=t(Zu.mouse(r)),p=D();T.call(r),o(u)}function f(){function n(){var n=Zu.touches(g);return p=S.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=t(n))}),n}function e(){for(var t=Zu.event.changedTouches,e=0,u=t.length;e<u;++e)d[t[e].identifier]=null;var o=n(),c=Date.now();if(1===o.length){if(c-x<500){var l=o[0],f=d[l.identifier];r(2*S.k),i(l,f),s(),a(v)}x=c}else if(o.length>1){var l=o[0],h=o[1],p=l[0]-h[0],g=l[1]-h[1];y=p*p+g*g}}function u(){for(var n,t,e,u,o=Zu.touches(g),c=0,l=o.length;c<l;++c,u=null)if(e=o[c],u=d[e.identifier]){if(t)break;n=e,t=u}if(u){var f=(f=e[0]-n[0])*f+(f=e[1]-n[1])*f,s=y&&Math.sqrt(f/y);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+u[0])/2,(t[1]+u[1])/2],r(s*p)}x=null,i(n,t),a(v)}function h(){if(Zu.event.touches.length){for(var t=Zu.event.changedTouches,e=0,r=t.length;e<r;++e)delete d[t[e].identifier];for(var i in d)return void n()}b.on(M,null).on(_,null),w.on(E,l).on(L,f),k(),c(v)}var p,g=this,v=q.of(g,arguments),d={},y=0,m=Zu.event.changedTouches[0].identifier,M="touchmove.zoom-"+m,_="touchend.zoom-"+m,b=Zu.select(Wu).on(M,u).on(_,h),w=Zu.select(g).on(E,null).on(L,e),k=D();T.call(g),e(),o(v)}function h(){var n=q.of(this,arguments);m?clearTimeout(m):(T.call(this),o(n)),m=setTimeout(function(){m=null,c(n)},50),s();var e=y||Zu.mouse(this);d||(d=t(e)),r(Math.pow(2,.002*zo())*S.k),i(e,d),a(n)}function g(){d=null}function v(){var n=q.of(this,arguments),e=Zu.mouse(this),u=t(e),l=Math.log(S.k)/Math.LN2;o(n),r(Math.pow(2,Zu.event.shiftKey?Math.ceil(l)-1:Math.floor(l)+1)),i(e,u),a(n),c(n)}var d,y,m,x,M,_,b,w,S={x:0,y:0,k:1},k=[960,500],N=Ro,E="mousedown.zoom",A="mousemove.zoom",C="mouseup.zoom",L="touchstart.zoom",q=p(n,"zoomstart","zoom","zoomend");return n.event=function(n){n.each(function(){var n=q.of(this,arguments),t=S;_c?Zu.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},o(n)}).tween("zoom:zoom",function(){var e=k[0],r=k[1],i=e/2,u=r/2,o=Zu.interpolateZoom([(i-S.x)/S.k,(u-S.y)/S.k,e/S.k],[(i-t.x)/t.k,(u-t.y)/t.k,e/t.k]);return function(t){var r=o(t),c=e/r[2];this.__chart__=S={x:i-r[0]*c,y:u-r[1]*c,k:c},a(n)}}).each("end.zoom",function(){c(n)}):(this.__chart__=S,o(n),a(n),c(n))})},n.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},u(),n):[S.x,S.y]},n.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:+t},u(),n):S.k},n.scaleExtent=function(t){return arguments.length?(N=null==t?Ro:[+t[0],+t[1]],n):N},n.center=function(t){return arguments.length?(y=t&&[+t[0],+t[1]],n):y},n.size=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],n):k},n.x=function(t){return arguments.length?(_=t,M=t.copy(),S={x:0,y:0,k:1},n):_},n.y=function(t){return arguments.length?(w=t,b=t.copy(),S={x:0,y:0,k:1},n):w},Zu.rebind(n,q,"on")};var zo,Ro=[0,1/0],Do="onwheel"in $u?(zo=function(){return-Zu.event.deltaY*(Zu.event.deltaMode?120:1)},"wheel"):"onmousewheel"in $u?(zo=function(){return Zu.event.wheelDelta},"mousewheel"):(zo=function(){return-Zu.event.detail},"MozMousePixelScroll");Z.prototype.toString=function(){return this.rgb()+""},Zu.hsl=function(n,t,e){return 1===arguments.length?n instanceof X?V(n.h,n.s,n.l):fn(""+n,sn,V):V(+n,+t,+e)};var Po=X.prototype=new Z;Po.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),V(this.h,this.s,this.l/n)},Po.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),V(this.h,this.s,n*this.l)},Po.rgb=function(){return $(this.h,this.s,this.l)},Zu.hcl=function(n,t,e){return 1===arguments.length?n instanceof W?B(n.h,n.c,n.l):n instanceof K?nn(n.l,n.a,n.b):nn((n=hn((n=Zu.rgb(n)).r,n.g,n.b)).l,n.a,n.b):B(+n,+t,+e)};var Uo=W.prototype=new Z;Uo.brighter=function(n){return B(this.h,this.c,Math.min(100,this.l+jo*(arguments.length?n:1)))},Uo.darker=function(n){return B(this.h,this.c,Math.max(0,this.l-jo*(arguments.length?n:1)))},Uo.rgb=function(){return J(this.h,this.c,this.l).rgb()},Zu.lab=function(n,t,e){return 1===arguments.length?n instanceof K?G(n.l,n.a,n.b):n instanceof W?J(n.l,n.c,n.h):hn((n=Zu.rgb(n)).r,n.g,n.b):G(+n,+t,+e)};var jo=18,Ho=.95047,Fo=1,Oo=1.08883,Yo=K.prototype=new Z;Yo.brighter=function(n){return G(Math.min(100,this.l+jo*(arguments.length?n:1)),this.a,this.b)},Yo.darker=function(n){return G(Math.max(0,this.l-jo*(arguments.length?n:1)),this.a,this.b)},Yo.rgb=function(){return Q(this.l,this.a,this.b)},Zu.rgb=function(n,t,e){return 1===arguments.length?n instanceof cn?an(n.r,n.g,n.b):fn(""+n,an,$):an(~~n,~~t,~~e)};var Io=cn.prototype=new Z;Io.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,i=30;return t||e||r?(t&&t<i&&(t=i),e&&e<i&&(e=i),r&&r<i&&(r=i),an(Math.min(255,~~(t/n)),Math.min(255,~~(e/n)),Math.min(255,~~(r/n)))):an(i,i,i)},Io.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),an(~~(n*this.r),~~(n*this.g),~~(n*this.b))},Io.hsl=function(){return sn(this.r,this.g,this.b)},Io.toString=function(){return"#"+ln(this.r)+ln(this.g)+ln(this.b)};var Zo=Zu.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Zo.forEach(function(n,t){Zo.set(n,un(t))}),Zu.functor=vn,Zu.xhr=yn(dn),Zu.dsv=function(n,t){function e(n,e,u){arguments.length<3&&(u=e,e=null);var o=Zu.xhr(n,t,u);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:i(n)):e},o.row(e)}function r(n){return e.parse(n.responseText)}function i(n){return function(t){return e.parse(t.responseText,n)}}function o(t){return t.map(a).join(n)}function a(n){return c.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var c=new RegExp('["'+n+"\n]"),l=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var i=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(i(n),e)}:i})},e.parseRows=function(n,t){function e(){if(f>=c)return o;if(i)return i=!1,u;var t=f;if(34===n.charCodeAt(t)){for(var e=t;e++<c;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}f=e+2;var r=n.charCodeAt(e+1);return 13===r?(i=!0,10===n.charCodeAt(e+2)&&++f):10===r&&(i=!0),n.substring(t+1,e).replace(/""/g,'"')}for(;f<c;){var r=n.charCodeAt(f++),a=1;if(10===r)i=!0;else if(13===r)i=!0,10===n.charCodeAt(f)&&(++f,++a);else if(r!==l)continue;return n.substring(t,f-a)}return n.substring(t)}for(var r,i,u={},o={},a=[],c=n.length,f=0,s=0;(r=e())!==o;){for(var h=[];r!==u&&r!==o;)h.push(r),r=e();t&&!(h=t(h,s++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new u,i=[];return t.forEach(function(n){for(var t in n)r.has(t)||i.push(r.add(t))}),[i.map(a).join(n)].concat(t.map(function(t){return i.map(function(n){return a(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(o).join("\n")},e},Zu.csv=Zu.dsv(",","text/csv"),Zu.tsv=Zu.dsv(" ","text/tab-separated-values");var Vo,Xo,$o,Bo,Wo,Jo=Wu[a(Wu,"requestAnimationFrame")]||function(n){setTimeout(n,17)};Zu.timer=function(n,t,e){var r=arguments.length;r<2&&(t=0),r<3&&(e=Date.now());var i=e+t,u={c:n,t:i,f:!1,n:null};Xo?Xo.n=u:Vo=u,Xo=u,$o||(Bo=clearTimeout(Bo),$o=1,Jo(Mn))},Zu.timer.flush=function(){_n(),bn()};var Go=".",Ko=",",Qo=[3,3],na="$",ta=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(wn);Zu.formatPrefix=function(n,t){var e=0;return n&&(n<0&&(n*=-1),t&&(n=Zu.round(n,Sn(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e<=0?e+1:e-1)/3)))),ta[8+e/3]},Zu.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)},Zu.format=function(n){var t=ea.exec(n),e=t[1]||" ",r=t[2]||">",i=t[3]||"",u=t[4]||"",o=t[5],a=+t[6],c=t[7],l=t[8],f=t[9],s=1,h="",p=!1;switch(l&&(l=+l.substring(1)),(o||"0"===e&&"="===r)&&(o=e="0",r="=",c&&(a-=Math.floor((a-1)/4))),f){case"n":c=!0,f="g";break;case"%":s=100,h="%",f="f";break;case"p":s=100,h="%",f="r";break;case"b":case"o":case"x":case"X":"#"===u&&(u="0"+f.toLowerCase());case"c":case"d":p=!0,l=0;break;case"s":s=-1,f="r"}"#"===u?u="":"$"===u&&(u=na),"r"!=f||l||(f="g"),null!=l&&("g"==f?l=Math.max(1,Math.min(21,l)):"e"!=f&&"f"!=f||(l=Math.max(0,Math.min(20,l)))),f=ra.get(f)||kn;var g=o&&c;return function(n){if(p&&n%1)return"";var t=n<0||0===n&&1/n<0?(n=-n,"-"):i;if(s<0){var v=Zu.formatPrefix(n,l);n=v.scale(n),h=v.symbol}else n*=s;n=f(n,l);var d=n.lastIndexOf("."),y=d<0?n:n.substring(0,d),m=d<0?"":Go+n.substring(d+1);!o&&c&&(y=ia(y));var x=u.length+y.length+m.length+(g?0:t.length),M=x<a?new Array(x=a-x+1).join(e):"";return g&&(y=ia(M+y)),t+=u,n=y+m,("<"===r?t+n+M:">"===r?M+t+n:"^"===r?M.substring(0,x>>=1)+t+n+M.substring(x):t+(g?n:M+n))+h}};var ea=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ra=Zu.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=Zu.round(n,Sn(n,t))).toFixed(Math.max(0,Math.min(20,Sn(n*(1+1e-15),t))))}}),ia=dn;if(Qo){var ua=Qo.length;ia=function(n){for(var t=n.length,e=[],r=0,i=Qo[0];t>0&&i>0;)e.push(n.substring(t-=i,t+i)),i=Qo[r=(r+1)%ua];return e.reverse().join(Ko)}}Zu.geo={},Nn.prototype={s:0,t:0,add:function(n){En(n,this.t,oa),En(oa.s,this.s,this),this.s?this.t+=oa.t:this.s=oa.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var oa=new Nn;Zu.geo.stream=function(n,t){n&&aa.hasOwnProperty(n.type)?aa[n.type](n,t):An(n,t)};var aa={Feature:function(n,t){An(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)An(e[r].geometry,t)}},ca={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){Cn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Cn(e[r],t,0)},Polygon:function(n,t){Ln(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Ln(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)An(e[r],t)}};Zu.geo.area=function(n){return la=0,Zu.geo.stream(n,sa),la};var la,fa=new Nn,sa={sphere:function(){la+=4*wo},point:c,lineStart:c,lineEnd:c,polygonStart:function(){fa.reset(),sa.lineStart=Tn},polygonEnd:function(){var n=2*fa;la+=n<0?4*wo+n:n,sa.lineStart=sa.lineEnd=sa.point=c}};Zu.geo.bounds=function(){function n(n,t){x.push(M=[f=n,h=n]),t<s&&(s=t),t>p&&(p=t)}function t(t,e){var r=qn([t*Ao,e*Ao]);if(y){var i=Rn(y,r),u=[i[1],-i[0],0],o=Rn(u,i);Un(o),o=jn(o);var c=t-g,l=c>0?1:-1,v=o[0]*Co*l,d=io(c)>180;if(d^(l*g<v&&v<l*t)){var m=o[1]*Co;m>p&&(p=m)}else if(v=(v+360)%360-180,d^(l*g<v&&v<l*t)){var m=-o[1]*Co;m<s&&(s=m)}else e<s&&(s=e),e>p&&(p=e);d?t<g?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t):h>=f?(t<f&&(f=t),t>h&&(h=t)):t>g?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t)}else n(t,e);y=r,g=t}function e(){_.point=t}function r(){M[0]=f,M[1]=h,_.point=n,y=null}function i(n,e){if(y){var r=n-g;m+=io(r)>180?r+(r>0?360:-360):r}else v=n,d=e;sa.point(n,e),t(n,e)}function u(){sa.lineStart()}function o(){i(v,d),sa.lineEnd(),io(m)>No&&(f=-(h=180)),M[0]=f,M[1]=h,y=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var f,s,h,p,g,v,d,y,m,x,M,_={point:n,lineStart:e,lineEnd:r,polygonStart:function(){_.point=i,_.lineStart=u,_.lineEnd=o,m=0,sa.polygonStart()},polygonEnd:function(){sa.polygonEnd(),_.point=n,_.lineStart=e,_.lineEnd=r,fa<0?(f=-(h=180),s=-(p=90)):m>No?p=90:m<-No&&(s=-90),M[0]=f,M[1]=h}};return function(n){p=h=-(f=s=1/0),x=[],Zu.geo.stream(n,_);var t=x.length;if(t){x.sort(c);for(var e,r=1,i=x[0],u=[i];r<t;++r)e=x[r],l(e[0],i)||l(e[1],i)?(a(i[0],e[1])>a(i[0],i[1])&&(i[1]=e[1]),a(e[0],i[1])>a(i[0],i[1])&&(i[0]=e[0])):u.push(i=e);for(var o,e,g=-(1/0),t=u.length-1,r=0,i=u[t];r<=t;i=e,++r)e=u[r],(o=a(i[1],e[0]))>g&&(g=o,f=e[0],h=i[1])}return x=M=null,f===1/0||s===1/0?[[NaN,NaN],[NaN,NaN]]:[[f,s],[h,p]]}}(),Zu.geo.centroid=function(n){ha=pa=ga=va=da=ya=ma=xa=Ma=_a=ba=0,Zu.geo.stream(n,wa);var t=Ma,e=_a,r=ba,i=t*t+e*e+r*r;return i<Eo&&(t=ya,e=ma,r=xa,pa<No&&(t=ga,e=va,r=da),i=t*t+e*e+r*r,i<Eo)?[NaN,NaN]:[Math.atan2(e,t)*Co,H(r/Math.sqrt(i))*Co]};var ha,pa,ga,va,da,ya,ma,xa,Ma,_a,ba,wa={sphere:c,point:Fn,lineStart:Yn,lineEnd:In,polygonStart:function(){wa.lineStart=Zn},polygonEnd:function(){wa.lineStart=Yn}},Sa=Wn(Vn,nt,et,[-wo,-wo/2]),ka=1e9;Zu.geo.clipExtent=function(){var n,t,e,r,i,u,o={stream:function(n){return i&&(i.valid=!1),i=u(n),i.valid=!0,i},extent:function(a){return arguments.length?(u=ut(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),i&&(i.valid=!1,i=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(Zu.geo.conicEqualArea=function(){return at(ct)}).raw=ct,Zu.geo.albers=function(){return Zu.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Zu.geo.albersUsa=function(){function n(n){var u=n[0],o=n[1];return t=null,e(u,o),t||(r(u,o),t)||i(u,o),t}var t,e,r,i,u=Zu.geo.albers(),o=Zu.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=Zu.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=u.scale(),e=u.translate(),r=(n[0]-e[0])/t,i=(n[1]-e[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?a:u).invert(n)},n.stream=function(n){var t=u.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,i){t.point(n,i),e.point(n,i),r.point(n,i)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(u.precision(t),o.precision(t),a.precision(t),n):u.precision()},n.scale=function(t){return arguments.length?(u.scale(t),o.scale(.35*t),a.scale(t),n.translate(u.translate())):u.scale()},n.translate=function(t){if(!arguments.length)return u.translate();var l=u.scale(),f=+t[0],s=+t[1];return e=u.translate(t).clipExtent([[f-.455*l,s-.238*l],[f+.455*l,s+.238*l]]).stream(c).point,r=o.translate([f-.307*l,s+.201*l]).clipExtent([[f-.425*l+No,s+.12*l+No],[f-.214*l-No,s+.234*l-No]]).stream(c).point,i=a.translate([f-.205*l,s+.212*l]).clipExtent([[f-.214*l+No,s+.166*l+No],[f-.115*l-No,s+.234*l-No]]).stream(c).point,n},n.scale(1070)};var Na,Ea,Aa,Ca,La,Ta,qa={point:c,lineStart:c,lineEnd:c,polygonStart:function(){Ea=0,qa.lineStart=lt},polygonEnd:function(){qa.lineStart=qa.lineEnd=qa.point=c,Na+=io(Ea/2)}},za={point:ft,lineStart:c,lineEnd:c,polygonStart:c,polygonEnd:c},Ra={point:pt,lineStart:gt,lineEnd:vt,polygonStart:function(){Ra.lineStart=dt},polygonEnd:function(){Ra.point=pt,Ra.lineStart=gt,Ra.lineEnd=vt}};Zu.geo.transform=function(n){return{stream:function(t){var e=new xt(t);for(var r in n)e[r]=n[r];return e}}},xt.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Zu.geo.path=function(){function n(n){return n&&("function"==typeof a&&u.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=i(u)),Zu.geo.stream(n,o)),u.result()}function t(){return o=null,n}var e,r,i,u,o,a=4.5;return n.area=function(n){return Na=0,Zu.geo.stream(n,i(qa)),Na},n.centroid=function(n){return ga=va=da=ya=ma=xa=Ma=_a=ba=0,Zu.geo.stream(n,i(Ra)),ba?[Ma/ba,_a/ba]:xa?[ya/xa,ma/xa]:da?[ga/da,va/da]:[NaN,NaN]},n.bounds=function(n){return La=Ta=-(Aa=Ca=1/0),Zu.geo.stream(n,i(za)),[[Aa,Ca],[La,Ta]]},n.projection=function(n){return arguments.length?(i=(e=n)?n.stream||Mt(n):dn,t()):e},n.context=function(n){return arguments.length?(u=null==(r=n)?new st:new yt(n),"function"!=typeof a&&u.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(u.pointRadius(+t),+t),n):a},n.projection(Zu.geo.albersUsa()).context(null)},Zu.geo.projection=_t,Zu.geo.projectionMutator=bt,(Zu.geo.equirectangular=function(){return _t(St)}).raw=St.invert=St,Zu.geo.rotation=function(n){
function t(t){return t=n(t[0]*Ao,t[1]*Ao),t[0]*=Co,t[1]*=Co,t}return n=Nt(n[0]%360*Ao,n[1]*Ao,n.length>2?n[2]*Ao:0),t.invert=function(t){return t=n.invert(t[0]*Ao,t[1]*Ao),t[0]*=Co,t[1]*=Co,t},t},kt.invert=St,Zu.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=Nt(-n[0]*Ao,-n[1]*Ao,0).invert,i=[];return e(null,null,1,{point:function(n,e){i.push(n=t(n,e)),n[0]*=Co,n[1]*=Co}}),{type:"Polygon",coordinates:[i]}}var t,e,r=[0,0],i=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=Lt((t=+r)*Ao,i*Ao),n):t},n.precision=function(r){return arguments.length?(e=Lt(t*Ao,(i=+r)*Ao),n):i},n.angle(90)},Zu.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Ao,i=n[1]*Ao,u=t[1]*Ao,o=Math.sin(r),a=Math.cos(r),c=Math.sin(i),l=Math.cos(i),f=Math.sin(u),s=Math.cos(u);return Math.atan2(Math.sqrt((e=s*o)*e+(e=l*f-c*s*a)*e),c*f+l*s*a)},Zu.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return Zu.range(Math.ceil(u/d)*d,i,d).map(h).concat(Zu.range(Math.ceil(l/y)*y,c,y).map(p)).concat(Zu.range(Math.ceil(r/g)*g,e,g).filter(function(n){return io(n%d)>No}).map(f)).concat(Zu.range(Math.ceil(a/v)*v,o,v).filter(function(n){return io(n%y)>No}).map(s))}var e,r,i,u,o,a,c,l,f,s,h,p,g=10,v=g,d=90,y=360,m=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(u).concat(p(c).slice(1),h(i).reverse().slice(1),p(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(u=+t[0][0],i=+t[1][0],l=+t[0][1],c=+t[1][1],u>i&&(t=u,u=i,i=t),l>c&&(t=l,l=c,c=t),n.precision(m)):[[u,l],[i,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(m)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],y=+t[1],n):[d,y]},n.minorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],n):[g,v]},n.precision=function(t){return arguments.length?(m=+t,f=qt(a,o,90),s=zt(r,e,m),h=qt(l,c,90),p=zt(u,i,m),n):m},n.majorExtent([[-180,-90+No],[180,90-No]]).minorExtent([[-180,-80-No],[180,80+No]])},Zu.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||i.apply(this,arguments)]}}var t,e,r=Rt,i=Dt;return n.distance=function(){return Zu.geo.distance(t||r.apply(this,arguments),e||i.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,n):i},n.precision=function(){return arguments.length?n:0},n},Zu.geo.interpolate=function(n,t){return Pt(n[0]*Ao,n[1]*Ao,t[0]*Ao,t[1]*Ao)},Zu.geo.length=function(n){return Da=0,Zu.geo.stream(n,Pa),Da};var Da,Pa={sphere:c,point:c,lineStart:Ut,lineEnd:c,polygonStart:c,polygonEnd:c},Ua=jt(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(Zu.geo.azimuthalEqualArea=function(){return _t(Ua)}).raw=Ua;var ja=jt(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},dn);(Zu.geo.azimuthalEquidistant=function(){return _t(ja)}).raw=ja,(Zu.geo.conicConformal=function(){return at(Ht)}).raw=Ht,(Zu.geo.conicEquidistant=function(){return at(Ft)}).raw=Ft;var Ha=jt(function(n){return 1/n},Math.atan);(Zu.geo.gnomonic=function(){return _t(Ha)}).raw=Ha,Ot.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-ko]},(Zu.geo.mercator=function(){return Yt(Ot)}).raw=Ot;var Fa=jt(function(){return 1},Math.asin);(Zu.geo.orthographic=function(){return _t(Fa)}).raw=Fa;var Oa=jt(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(Zu.geo.stereographic=function(){return _t(Oa)}).raw=Oa,It.invert=function(n,t){return[Math.atan2(F(n),Math.cos(t)),H(Math.sin(t)/O(n))]},(Zu.geo.transverseMercator=function(){return Yt(It)}).raw=It,Zu.geom={},Zu.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,i,u,o,a,c,l,f,s,h,p,g,v=vn(e),d=vn(r),y=n.length,m=y-1,x=[],M=[],_=0;if(v===Zt&&r===Vt)t=n;else for(u=0,t=[];u<y;++u)t.push([+v.call(this,i=n[u],u),+d.call(this,i,u)]);for(u=1;u<y;++u)(t[u][1]<t[_][1]||t[u][1]==t[_][1]&&t[u][0]<t[_][0])&&(_=u);for(u=0;u<y;++u)u!==_&&(c=t[u][1]-t[_][1],a=t[u][0]-t[_][0],x.push({angle:Math.atan2(c,a),index:u}));for(x.sort(function(n,t){return n.angle-t.angle}),p=x[0].angle,h=x[0].index,s=0,u=1;u<m;++u){if(o=x[u].index,p==x[u].angle){if(a=t[h][0]-t[_][0],c=t[h][1]-t[_][1],l=t[o][0]-t[_][0],f=t[o][1]-t[_][1],a*a+c*c>=l*l+f*f){x[u].index=-1;continue}x[s].index=-1}p=x[u].angle,s=u,h=o}for(M.push(_),u=0,o=0;u<2;++o)x[o].index>-1&&(M.push(x[o].index),u++);for(g=M.length;o<m;++o)if(!(x[o].index<0)){for(;!Xt(M[g-2],M[g-1],x[o].index,t);)--g;M[g++]=x[o].index}var b=[];for(u=g-1;u>=0;--u)b.push(n[M[u]]);return b}var e=Zt,r=Vt;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},Zu.geom.polygon=function(n){return lo(n,Ya),n};var Ya=Zu.geom.polygon.prototype=[];Ya.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],i=0;++t<e;)n=r,r=this[t],i+=n[1]*r[0]-n[0]*r[1];return.5*i},Ya.centroid=function(n){var t,e,r=-1,i=this.length,u=0,o=0,a=this[i-1];for(arguments.length||(n=-1/(6*this.area()));++r<i;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],u+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[u*n,o*n]},Ya.clip=function(n){for(var t,e,r,i,u,o,a=Wt(n),c=-1,l=this.length-Wt(this),f=this[l-1];++c<l;){for(t=n.slice(),n.length=0,i=this[c],u=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],$t(o,f,i)?($t(u,f,i)||n.push(Bt(u,o,f,i)),n.push(o)):$t(u,f,i)&&n.push(Bt(u,o,f,i)),u=o;a&&n.push(n[0]),f=i}return n};var Ia,Za,Va,Xa,$a,Ba=[],Wa=[];re.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(ue),t.length},ve.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},de.prototype={insert:function(n,t){var e,r,i;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=Me(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.R&&(me(this,e),n=e,e=n.U),e.C=!1,r.C=!0,xe(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.L&&(xe(this,e),n=e,e=n.U),e.C=!1,r.C=!0,me(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,i=n.U,u=n.L,o=n.R;if(e=u?o?Me(o):u:o,i?i.L===n?i.L=e:i.R=e:this._=e,u&&o?(r=e.C,e.C=n.C,e.L=u,u.U=e,e!==o?(i=e.U,e.U=n.U,n=e.R,i.L=n,e.R=o,o.U=e):(e.U=i,i=e,n=e.R)):(r=n.C,n=e),n&&(n.U=i),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,me(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,xe(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,me(this,i),n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,xe(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,me(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,xe(this,i),n=this._;break}t.C=!0,n=i,i=i.U}while(!n.C);n&&(n.C=!1)}}},Zu.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],i=a[0][1],u=a[1][0],o=a[1][1];return _e(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,f=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=u&&l.y>=i&&l.y<=o?[[r,o],[u,o],[u,i],[r,i]]:[];f.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(u(n,t)/No)*No,y:Math.round(o(n,t)/No)*No,i:t}})}var r=Zt,i=Vt,u=r,o=i,a=Ja;return n?t(n):(t.links=function(n){return _e(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return _e(e(n)).cells.forEach(function(e,r){for(var i,u,o=e.site,a=e.edges.sort(ue),c=-1,l=a.length,f=a[l-1].edge,s=f.l===o?f.r:f.l;++c<l;)i=f,u=s,f=a[c].edge,s=f.l===o?f.r:f.l,r<u.i&&r<s.i&&we(o,u,s)<0&&t.push([n[r],n[u.i],n[s.i]])}),t},t.x=function(n){return arguments.length?(u=vn(r=n),t):r},t.y=function(n){return arguments.length?(o=vn(i=n),t):i},t.clipExtent=function(n){return arguments.length?(a=null==n?Ja:n,t):a===Ja?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===Ja?null:a&&a[1]},t)};var Ja=[[-1e6,-1e6],[1e6,1e6]];Zu.geom.delaunay=function(n){return Zu.geom.voronoi().triangles(n)},Zu.geom.quadtree=function(n,t,e,r,i){function u(n){function u(n,t,e,r,i,u,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,f=n.y;if(null!=c)if(io(c-e)+io(f-r)<.01)l(n,t,e,r,i,u,o,a);else{var s=n.point;n.x=n.y=n.point=null,l(n,s,c,f,i,u,o,a),l(n,t,e,r,i,u,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,i,u,o,a)}function l(n,t,e,r,i,o,a,c){var l=.5*(i+a),f=.5*(o+c),s=e>=l,h=r>=f,p=(h<<1)+s;n.leaf=!1,n=n.nodes[p]||(n.nodes[p]=Ne()),s?i=l:a=l,h?o=f:c=f,u(n,t,e,r,i,o,a,c)}var f,s,h,p,g,v,d,y,m,x=vn(a),M=vn(c);if(null!=t)v=t,d=e,y=r,m=i;else if(y=m=-(v=d=1/0),s=[],h=[],g=n.length,o)for(p=0;p<g;++p)f=n[p],f.x<v&&(v=f.x),f.y<d&&(d=f.y),f.x>y&&(y=f.x),f.y>m&&(m=f.y),s.push(f.x),h.push(f.y);else for(p=0;p<g;++p){var _=+x(f=n[p],p),b=+M(f,p);_<v&&(v=_),b<d&&(d=b),_>y&&(y=_),b>m&&(m=b),s.push(_),h.push(b)}var w=y-v,S=m-d;w>S?m=d+w:y=v+S;var k=Ne();if(k.add=function(n){u(k,n,+x(n,++p),+M(n,p),v,d,y,m)},k.visit=function(n){Ee(n,k,v,d,y,m)},p=-1,null==t){for(;++p<g;)u(k,n[p],s[p],h[p],v,d,y,m);--p}else n.forEach(k.add);return s=h=n=f=null,k}var o,a=Zt,c=Vt;return(o=arguments.length)?(a=Se,c=ke,3===o&&(i=e,r=t,e=t=0),u(n)):(u.x=function(n){return arguments.length?(a=n,u):a},u.y=function(n){return arguments.length?(c=n,u):c},u.extent=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],i=+n[1][1]),u):null==t?null:[[t,e],[r,i]]},u.size=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=e=0,r=+n[0],i=+n[1]),u):null==t?null:[r-t,i-e]},u)},Zu.interpolateRgb=Ae,Zu.interpolateObject=Ce,Zu.interpolateNumber=Le,Zu.interpolateString=Te;var Ga=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;Zu.interpolate=qe,Zu.interpolators=[function(n,t){var e=typeof t;return("string"===e?Zo.has(t)||/^(#|rgb\(|hsl\()/.test(t)?Ae:Te:t instanceof Z?Ae:"object"===e?Array.isArray(t)?ze:Ce:Le)(n,t)}],Zu.interpolateArray=ze;var Ka=function(){return dn},Qa=Zu.map({linear:Ka,poly:Fe,quad:function(){return Ue},cubic:function(){return je},sin:function(){return Oe},exp:function(){return Ye},circle:function(){return Ie},elastic:Ze,back:Ve,bounce:function(){return Xe}}),nc=Zu.map({"in":dn,out:De,"in-out":Pe,"out-in":function(n){return Pe(De(n))}});Zu.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.substring(0,t):n,r=t>=0?n.substring(t+1):"in";return e=Qa.get(e)||Ka,r=nc.get(r)||dn,Re(r(e.apply(null,Vu.call(arguments,1))))},Zu.interpolateHcl=$e,Zu.interpolateHsl=Be,Zu.interpolateLab=We,Zu.interpolateRound=Je,Zu.transform=function(n){var t=$u.createElementNS(Zu.ns.prefix.svg,"g");return(Zu.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Ge(e?e.matrix:tc)})(n)},Ge.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var tc={a:1,b:0,c:0,d:1,e:0,f:0};Zu.interpolateTransform=tr,Zu.layout={},Zu.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(ir(n[e]));return t}},Zu.layout.chord=function(){function n(){var n,l,s,h,p,g={},v=[],d=Zu.range(u),y=[];for(e=[],r=[],n=0,h=-1;++h<u;){for(l=0,p=-1;++p<u;)l+=i[h][p];v.push(l),y.push(Zu.range(u)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&y.forEach(function(n,t){n.sort(function(n,e){return a(i[t][n],i[t][e])})}),n=(So-f*u)/n,l=0,h=-1;++h<u;){for(s=l,p=-1;++p<u;){var m=d[h],x=y[m][p],M=i[m][x],_=l,b=l+=M*n;g[m+"-"+x]={index:m,subindex:x,startAngle:_,endAngle:b,value:M}}r[m]={index:m,startAngle:s,endAngle:l,value:(l-s)/n},l+=f}for(h=-1;++h<u;)for(p=h-1;++p<u;){var w=g[h+"-"+p],S=g[p+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,i,u,o,a,c,l={},f=0;return l.matrix=function(n){return arguments.length?(u=(i=n)&&i.length,e=r=null,l):i},l.padding=function(n){return arguments.length?(f=n,e=r=null,l):f},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},Zu.layout.force=function(){function n(n){return function(t,e,r,i){if(t.point!==n){var u=t.cx-n.x,o=t.cy-n.y,a=1/Math.sqrt(u*u+o*o);if((i-e)*a<v){var c=t.charge*a*a;return n.px-=u*c,n.py-=o*c,!0}if(t.point&&isFinite(a)){var c=t.pointCharge*a*a;n.px-=u*c,n.py-=o*c}}return!t.charge}}function t(n){n.px=Zu.event.x,n.py=Zu.event.y,a.resume()}var e,r,i,u,o,a={},c=Zu.dispatch("start","tick","end"),l=[1,1],f=.9,s=ec,h=rc,p=-30,g=.1,v=.8,d=[],y=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,s,h,v,m,x,M,_=d.length,b=y.length;for(e=0;e<b;++e)a=y[e],s=a.source,h=a.target,x=h.x-s.x,M=h.y-s.y,(v=x*x+M*M)&&(v=r*u[e]*((v=Math.sqrt(v))-i[e])/v,x*=v,M*=v,h.x-=x*(m=s.weight/(h.weight+s.weight)),h.y-=M*m,s.x+=x*(m=1-m),s.y+=M*m);if((m=r*g)&&(x=l[0]/2,M=l[1]/2,e=-1,m))for(;++e<_;)a=d[e],a.x+=(x-a.x)*m,a.y+=(M-a.y)*m;if(p)for(sr(t=Zu.geom.quadtree(d),r,o),e=-1;++e<_;)(a=d[e]).fixed||t.visit(n(a));for(e=-1;++e<_;)a=d[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*f,a.y-=(a.py-(a.py=a.y))*f);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(d=n,a):d},a.links=function(n){return arguments.length?(y=n,a):y},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(s="function"==typeof n?n:+n,a):s},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(f=+n,a):f},a.charge=function(n){return arguments.length?(p="function"==typeof n?n:+n,a):p},a.gravity=function(n){return arguments.length?(g=+n,a):g},a.theta=function(n){return arguments.length?(v=+n,a):v},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),Zu.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;a<c;++a)e[a]=[];for(a=0;a<l;++a){var i=y[a];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var u,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(u=o[a][n]))return u;return Math.random()*r}var t,e,r,c=d.length,f=y.length,g=l[0],v=l[1];for(t=0;t<c;++t)(r=d[t]).index=t,r.weight=0;for(t=0;t<f;++t)r=y[t],"number"==typeof r.source&&(r.source=d[r.source]),"number"==typeof r.target&&(r.target=d[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<c;++t)r=d[t],isNaN(r.x)&&(r.x=n("x",g)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof s)for(t=0;t<f;++t)i[t]=+s.call(this,y[t],t);else for(t=0;t<f;++t)i[t]=s;if(u=[],"function"==typeof h)for(t=0;t<f;++t)u[t]=+h.call(this,y[t],t);else for(t=0;t<f;++t)u[t]=h;if(o=[],"function"==typeof p)for(t=0;t<c;++t)o[t]=+p.call(this,d[t],t);else for(t=0;t<c;++t)o[t]=p;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=Zu.behavior.drag().origin(dn).on("dragstart.force",ar).on("drag.force",t).on("dragend.force",cr)),arguments.length?void this.on("mouseover.force",lr).on("mouseout.force",fr).call(e):e},Zu.rebind(a,c,"on")};var ec=20,rc=1;Zu.layout.hierarchy=function(){function n(t,o,a){var c=i.call(e,t,o);if(t.depth=o,a.push(t),c&&(l=c.length)){for(var l,f,s=-1,h=t.children=new Array(l),p=0,g=o+1;++s<l;)f=h[s]=n(c[s],g,a),f.parent=t,p+=f.value;r&&h.sort(r),u&&(t.value=p)}else delete t.children,u&&(t.value=+u.call(e,t,o)||0);return t}function t(n,r){var i=n.children,o=0;if(i&&(a=i.length))for(var a,c=-1,l=r+1;++c<a;)o+=t(i[c],l);else u&&(o=+u.call(e,n,r)||0);return u&&(n.value=o),o}function e(t){var e=[];return n(t,0,e),e}var r=vr,i=pr,u=gr;return e.sort=function(n){return arguments.length?(r=n,e):r},e.children=function(n){return arguments.length?(i=n,e):i},e.value=function(n){return arguments.length?(u=n,e):u},e.revalue=function(n){return t(n,0),n},e},Zu.layout.partition=function(){function n(t,e,r,i){var u=t.children;if(t.x=e,t.y=t.depth*i,t.dx=r,t.dy=i,u&&(o=u.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=u[l],e,c=a.value*r,i),e+=c}}function t(n){var e=n.children,r=0;if(e&&(i=e.length))for(var i,u=-1;++u<i;)r=Math.max(r,t(e[u]));return 1+r}function e(e,u){var o=r.call(this,e,u);return n(o[0],0,i[0],i[1]/t(o[0])),o}var r=Zu.layout.hierarchy(),i=[1,1];return e.size=function(n){return arguments.length?(i=n,e):i},hr(e,r)},Zu.layout.pie=function(){function n(u){var o=u.map(function(e,r){return+t.call(n,e,r)}),a=+("function"==typeof r?r.apply(this,arguments):r),c=(("function"==typeof i?i.apply(this,arguments):i)-a)/Zu.sum(o),l=Zu.range(u.length);null!=e&&l.sort(e===ic?function(n,t){return o[t]-o[n]}:function(n,t){return e(u[n],u[t])});var f=[];return l.forEach(function(n){var t;f[n]={data:u[n],value:t=o[n],startAngle:a,endAngle:a+=t*c}}),f}var t=Number,e=ic,r=0,i=So;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(i=t,n):i},n};var ic={};Zu.layout.stack=function(){function n(a,c){var l=a.map(function(e,r){return t.call(n,e,r)}),f=l.map(function(t){return t.map(function(t,e){return[u.call(n,t,e),o.call(n,t,e)]})}),s=e.call(n,f,c);l=Zu.permute(l,s),f=Zu.permute(f,s);var h,p,g,v=r.call(n,f,c),d=l.length,y=l[0].length;for(p=0;p<y;++p)for(i.call(n,l[0][p],g=v[p],f[0][p][1]),h=1;h<d;++h)i.call(n,l[h][p],g+=f[h-1][p][1],f[h][p][1]);return a}var t=dn,e=Mr,r=_r,i=xr,u=yr,o=mr;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:uc.get(t)||Mr,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:oc.get(t)||_r,n):r},n.x=function(t){return arguments.length?(u=t,n):u},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(i=t,n):i},n};var uc=Zu.map({"inside-out":function(n){var t,e,r=n.length,i=n.map(br),u=n.map(wr),o=Zu.range(r).sort(function(n,t){return i[n]-i[t]}),a=0,c=0,l=[],f=[];for(t=0;t<r;++t)e=o[t],a<c?(a+=u[e],l.push(e)):(c+=u[e],f.push(e));return f.reverse().concat(l)},reverse:function(n){return Zu.range(n.length).reverse()},"default":Mr}),oc=Zu.map({silhouette:function(n){var t,e,r,i=n.length,u=n[0].length,o=[],a=0,c=[];for(e=0;e<u;++e){for(t=0,r=0;t<i;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;e<u;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,i,u,o,a,c,l,f=n.length,s=n[0],h=s.length,p=[];for(p[0]=c=l=0,e=1;e<h;++e){for(t=0,i=0;t<f;++t)i+=n[t][e][1];for(t=0,u=0,a=s[e][0]-s[e-1][0];t<f;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);r<t;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;u+=o*n[t][e][1]}p[e]=c-=i?u/i*a:0,c<l&&(l=c)}for(e=0;e<h;++e)p[e]-=l;return p},expand:function(n){var t,e,r,i=n.length,u=n[0].length,o=1/i,a=[];for(e=0;e<u;++e){for(t=0,r=0;t<i;t++)r+=n[t][e][1];if(r)for(t=0;t<i;t++)n[t][e][1]/=r;else for(t=0;t<i;t++)n[t][e][1]=o}for(e=0;e<u;++e)a[e]=0;return a},zero:_r});Zu.layout.histogram=function(){function n(n,u){for(var o,a,c=[],l=n.map(e,this),f=r.call(this,l,u),s=i.call(this,f,l,u),u=-1,h=l.length,p=s.length-1,g=t?1:1/h;++u<p;)o=c[u]=[],o.dx=s[u+1]-(o.x=s[u]),o.y=0;if(p>0)for(u=-1;++u<h;)a=l[u],a>=f[0]&&a<=f[1]&&(o=c[Zu.bisect(s,a,1,p)-1],o.y+=g,o.push(n[u]));return c}var t=!0,e=Number,r=Er,i=kr;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=vn(t),n):r},n.bins=function(t){return arguments.length?(i="number"==typeof t?function(n){return Nr(n,t)}:vn(t),n):i},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},Zu.layout.tree=function(){function n(n,u){function o(n,t){var r=n.children,i=n._tree;if(r&&(u=r.length)){for(var u,a,l,f=r[0],s=f,h=-1;++h<u;)l=r[h],o(l,a),s=c(l,a,s),a=l;Pr(n);var p=.5*(f._tree.prelim+l._tree.prelim);t?(i.prelim=t._tree.prelim+e(n,t),i.mod=i.prelim-p):i.prelim=p}else t&&(i.prelim=t._tree.prelim+e(n,t))}function a(n,t){n.x=n._tree.prelim+t;var e=n.children;if(e&&(r=e.length)){var r,i=-1;for(t+=n._tree.mod;++i<r;)a(e[i],t)}}function c(n,t,r){if(t){for(var i,u=n,o=n,a=t,c=n.parent.children[0],l=u._tree.mod,f=o._tree.mod,s=a._tree.mod,h=c._tree.mod;a=Lr(a),u=Cr(u),a&&u;)c=Cr(c),o=Lr(o),o._tree.ancestor=n,i=a._tree.prelim+s-u._tree.prelim-l+e(a,u),i>0&&(Ur(jr(a,n,r),n,i),l+=i,f+=i),s+=a._tree.mod,l+=u._tree.mod,h+=c._tree.mod,f+=o._tree.mod;a&&!Lr(o)&&(o._tree.thread=a,o._tree.mod+=s-f),u&&!Cr(c)&&(c._tree.thread=u,c._tree.mod+=l-h,r=n)}return r}var l=t.call(this,n,u),f=l[0];Dr(f,function(n,t){n._tree={ancestor:n,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),o(f),a(f,-f._tree.prelim);var s=Tr(f,zr),h=Tr(f,qr),p=Tr(f,Rr),g=s.x-e(s,h)/2,v=h.x+e(h,s)/2,d=p.depth||1;return Dr(f,i?function(n){n.x*=r[0],n.y=n.depth*r[1],delete n._tree}:function(n){n.x=(n.x-g)/(v-g)*r[0],n.y=n.depth/d*r[1],delete n._tree}),l}var t=Zu.layout.hierarchy().sort(null).value(null),e=Ar,r=[1,1],i=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(i=null==(r=t),n):i?null:r},n.nodeSize=function(t){return arguments.length?(i=null!=(r=t),n):i?r:null},hr(n,t)},Zu.layout.pack=function(){function n(n,u){var o=e.call(this,n,u),a=o[0],c=i[0],l=i[1],f=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Dr(a,function(n){n.r=+f(n.value)}),Dr(a,Ir),r){var s=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;Dr(a,function(n){n.r+=s}),Dr(a,Ir),Dr(a,function(n){n.r-=s})}return Xr(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=Zu.layout.hierarchy().sort(Hr),r=0,i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},hr(n,e)},Zu.layout.cluster=function(){function n(n,u){var o,a=t.call(this,n,u),c=a[0],l=0;Dr(c,function(n){var t=n.children;t&&t.length?(n.x=Wr(t),n.y=Br(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var f=Jr(c),s=Gr(c),h=f.x-e(f,s)/2,p=s.x+e(s,f)/2;return Dr(c,i?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(p-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=Zu.layout.hierarchy().sort(null).value(null),e=Ar,r=[1,1],i=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(i=null==(r=t),n):i?null:r},n.nodeSize=function(t){return arguments.length?(i=null!=(r=t),n):i?r:null},hr(n,t)},Zu.layout.treemap=function(){function n(n,t){for(var e,r,i=-1,u=n.length;++i<u;)r=(e=n[i]).value*(t<0?0:t),e.area=isNaN(r)||r<=0?0:r}function t(e){var u=e.children;if(u&&u.length){var o,a,c,l=s(e),f=[],h=u.slice(),g=1/0,v="slice"===p?l.dx:"dice"===p?l.dy:"slice-dice"===p?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),f.area=0;(c=h.length)>0;)f.push(o=h[c-1]),f.area+=o.area,"squarify"!==p||(a=r(f,v))<=g?(h.pop(),g=a):(f.area-=f.pop().area,i(f,v,l,!1),v=Math.min(l.dx,l.dy),f.length=f.area=0,g=1/0);f.length&&(i(f,v,l,!0),f.length=f.area=0),u.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var u,o=s(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;u=a.pop();)c.push(u),c.area+=u.area,null!=u.z&&(i(c,u.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,i=0,u=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(e<u&&(u=e),e>i&&(i=e));return r*=r,t*=t,r?Math.max(t*i*g/r,r/(t*u*g)):1/0}function i(n,t,e,r){var i,u=-1,o=n.length,a=e.x,l=e.y,f=t?c(n.area/t):0;if(t==e.dx){for((r||f>e.dy)&&(f=e.dy);++u<o;)i=n[u],i.x=a,i.y=l,i.dy=f,a+=i.dx=Math.min(e.x+e.dx-a,f?c(i.area/f):0);i.z=!0,i.dx+=e.x+e.dx-a,e.y+=f,e.dy-=f}else{for((r||f>e.dx)&&(f=e.dx);++u<o;)i=n[u],i.x=a,i.y=l,i.dx=f,l+=i.dy=Math.min(e.y+e.dy-l,f?c(i.area/f):0);i.z=!1,i.dy+=e.y+e.dy-l,e.x+=f,e.dx-=f}}function u(r){var i=o||a(r),u=i[0];return u.x=0,u.y=0,u.dx=l[0],u.dy=l[1],o&&a.revalue(u),n([u],u.dx*u.dy/u.value),(o?e:t)(u),h&&(o=i),i}var o,a=Zu.layout.hierarchy(),c=Math.round,l=[1,1],f=null,s=Kr,h=!1,p="squarify",g=.5*(1+Math.sqrt(5));return u.size=function(n){return arguments.length?(l=n,u):l},u.padding=function(n){function t(t){var e=n.call(u,t,t.depth);return null==e?Kr(t):Qr(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Qr(t,n)}if(!arguments.length)return f;var r;return s=null==(f=n)?Kr:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,u},u.round=function(n){return arguments.length?(c=n?Math.round:Number,u):c!=Number},u.sticky=function(n){return arguments.length?(h=n,o=null,u):h},u.ratio=function(n){return arguments.length?(g=n,u):g},u.mode=function(n){return arguments.length?(p=n+"",u):p},hr(u,a)},Zu.random={normal:function(n,t){var e=arguments.length;return e<2&&(t=1),e<1&&(n=0),function(){var e,r,i;do e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r;while(!i||i>1);return n+t*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var n=Zu.random.normal.apply(Zu,arguments);return function(){return Math.exp(n())}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t/n}}},Zu.scale={};var ac={floor:dn,ceil:dn};Zu.scale.linear=function(){return oi([0,1],[0,1],qe,!1)},Zu.scale.log=function(){return hi(Zu.scale.linear().domain([0,1]),10,!0,[1,10])};var cc=Zu.format(".0e"),lc={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};Zu.scale.pow=function(){return pi(Zu.scale.linear(),1,[0,1])},Zu.scale.sqrt=function(){return Zu.scale.pow().exponent(.5)},Zu.scale.ordinal=function(){return vi([],{t:"range",a:[[]]})},Zu.scale.category10=function(){return Zu.scale.ordinal().range(fc)},Zu.scale.category20=function(){return Zu.scale.ordinal().range(sc)},Zu.scale.category20b=function(){return Zu.scale.ordinal().range(hc)},Zu.scale.category20c=function(){return Zu.scale.ordinal().range(pc)};var fc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(on),sc=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(on),hc=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(on),pc=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(on);Zu.scale.quantile=function(){return di([],[])},Zu.scale.quantize=function(){return yi(0,1,[0,1])},Zu.scale.threshold=function(){return mi([.5],[0,1])},Zu.scale.identity=function(){return xi([0,1])},Zu.svg={},Zu.svg.arc=function(){function n(){var n=t.apply(this,arguments),u=e.apply(this,arguments),o=r.apply(this,arguments)+gc,a=i.apply(this,arguments)+gc,c=(a<o&&(c=o,o=a,a=c),a-o),l=c<wo?"0":"1",f=Math.cos(o),s=Math.sin(o),h=Math.cos(a),p=Math.sin(a);return c>=vc?n?"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+-u+"A"+u+","+u+" 0 1,1 0,"+u+"M0,"+n+"A"+n+","+n+" 0 1,0 0,"+-n+"A"+n+","+n+" 0 1,0 0,"+n+"Z":"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+-u+"A"+u+","+u+" 0 1,1 0,"+u+"Z":n?"M"+u*f+","+u*s+"A"+u+","+u+" 0 "+l+",1 "+u*h+","+u*p+"L"+n*h+","+n*p+"A"+n+","+n+" 0 "+l+",0 "+n*f+","+n*s+"Z":"M"+u*f+","+u*s+"A"+u+","+u+" 0 "+l+",1 "+u*h+","+u*p+"L0,0Z"}var t=Mi,e=_i,r=bi,i=wi;return n.innerRadius=function(e){return arguments.length?(t=vn(e),n):t},n.outerRadius=function(t){return arguments.length?(e=vn(t),n):e},n.startAngle=function(t){return arguments.length?(r=vn(t),n):r},n.endAngle=function(t){return arguments.length?(i=vn(t),n):i},n.centroid=function(){var n=(t.apply(this,arguments)+e.apply(this,arguments))/2,u=(r.apply(this,arguments)+i.apply(this,arguments))/2+gc;return[Math.cos(u)*n,Math.sin(u)*n]},n};var gc=-ko,vc=So-No;Zu.svg.line=function(){return Si(dn)};var dc=Zu.map({linear:ki,"linear-closed":Ni,step:Ei,"step-before":Ai,"step-after":Ci,basis:Di,"basis-open":Pi,"basis-closed":Ui,bundle:ji,cardinal:qi,"cardinal-open":Li,"cardinal-closed":Ti,monotone:Zi});dc.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var yc=[0,2/3,1/3,0],mc=[0,1/3,2/3,0],xc=[0,1/6,2/3,1/6];Zu.svg.line.radial=function(){var n=Si(Vi);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},Ai.reverse=Ci,Ci.reverse=Ai,Zu.svg.area=function(){return Xi(dn)},Zu.svg.area.radial=function(){var n=Xi(Vi);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},Zu.svg.chord=function(){function n(n,a){var c=t(this,u,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?i(c.r,c.p1,c.r,c.p0):i(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var i=t.call(n,e,r),u=a.call(n,i,r),o=c.call(n,i,r)+gc,f=l.call(n,i,r)+gc;return{r:u,a0:o,a1:f,p0:[u*Math.cos(o),u*Math.sin(o)],p1:[u*Math.cos(f),u*Math.sin(f)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>wo)+",1 "+t}function i(n,t,e,r){return"Q 0,0 "+r}var u=Rt,o=Dt,a=$i,c=bi,l=wi;return n.radius=function(t){return arguments.length?(a=vn(t),n):a},n.source=function(t){return arguments.length?(u=vn(t),n):u},n.target=function(t){return arguments.length?(o=vn(t),n):o},n.startAngle=function(t){return arguments.length?(c=vn(t),n):c},n.endAngle=function(t){return arguments.length?(l=vn(t),n):l},n},Zu.svg.diagonal=function(){function n(n,i){var u=t.call(this,n,i),o=e.call(this,n,i),a=(u.y+o.y)/2,c=[u,{x:u.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=Rt,e=Dt,r=Bi;return n.source=function(e){return arguments.length?(t=vn(e),n):t},n.target=function(t){return arguments.length?(e=vn(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},Zu.svg.diagonal.radial=function(){var n=Zu.svg.diagonal(),t=Bi,e=n.projection;return n.projection=function(n){return arguments.length?e(Wi(t=n)):t},n},Zu.svg.symbol=function(){function n(n,r){return(Mc.get(t.call(this,n,r))||Ki)(e.call(this,n,r))}var t=Gi,e=Ji;return n.type=function(e){return arguments.length?(t=vn(e),n):t},n.size=function(t){return arguments.length?(e=vn(t),n):e},n};var Mc=Zu.map({circle:Ki,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Sc)),e=t*Sc;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/wc),e=t*wc/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/wc),e=t*wc/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});Zu.svg.symbolTypes=Mc.keys();var _c,bc,wc=Math.sqrt(3),Sc=Math.tan(30*Ao),kc=[],Nc=0;kc.call=go.call,kc.empty=go.empty,kc.node=go.node,kc.size=go.size,Zu.transition=function(n){return arguments.length?_c?n.transition():n:mo.transition()},Zu.transition.prototype=kc,kc.select=function(n){var t,e,r,i=this.id,u=[];n=v(n);for(var o=-1,a=this.length;++o<a;){u.push(t=[]);for(var c=this[o],l=-1,f=c.length;++l<f;)(r=c[l])&&(e=n.call(r,r.__data__,l,o))?("__data__"in r&&(e.__data__=r.__data__),
eu(e,l,i,r.__transition__[i]),t.push(e)):t.push(null)}return Qi(u,i)},kc.selectAll=function(n){var t,e,r,i,u,o=this.id,a=[];n=d(n);for(var c=-1,l=this.length;++c<l;)for(var f=this[c],s=-1,h=f.length;++s<h;)if(r=f[s]){u=r.__transition__[o],e=n.call(r,r.__data__,s,c),a.push(t=[]);for(var p=-1,g=e.length;++p<g;)(i=e[p])&&eu(i,p,o,u),t.push(i)}return Qi(a,o)},kc.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=N(n));for(var u=0,o=this.length;u<o;u++){i.push(t=[]);for(var e=this[u],a=0,c=e.length;a<c;a++)(r=e[a])&&n.call(r,r.__data__,a)&&t.push(r)}return Qi(i,this.id)},kc.tween=function(n,t){var e=this.id;return arguments.length<2?this.node().__transition__[e].tween.get(n):A(this,null==t?function(t){t.__transition__[e].tween.remove(n)}:function(r){r.__transition__[e].tween.set(n,t)})},kc.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function i(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function u(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?tr:qe,a=Zu.ns.qualify(n);return nu(this,"attr."+n,t,a.local?u:i)},kc.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(i));return r&&function(n){this.setAttribute(i,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(i.space,i.local));return r&&function(n){this.setAttributeNS(i.space,i.local,r(n))}}var i=Zu.ns.qualify(n);return this.tween("attr."+n,i.local?r:e)},kc.style=function(n,t,e){function r(){this.style.removeProperty(n)}function i(t){return null==t?r:(t+="",function(){var r,i=Wu.getComputedStyle(this,null).getPropertyValue(n);return i!==t&&(r=qe(i,t),function(t){this.style.setProperty(n,r(t),e)})})}var u=arguments.length;if(u<3){if("string"!=typeof n){u<2&&(t="");for(e in n)this.style(e,n[e],t);return this}e=""}return nu(this,"style."+n,t,i)},kc.styleTween=function(n,t,e){function r(r,i){var u=t.call(this,r,i,Wu.getComputedStyle(this,null).getPropertyValue(n));return u&&function(t){this.style.setProperty(n,u(t),e)}}return arguments.length<3&&(e=""),this.tween("style."+n,r)},kc.text=function(n){return nu(this,"text",n,tu)},kc.remove=function(){return this.each("end.transition",function(){var n;this.__transition__.count<2&&(n=this.parentNode)&&n.removeChild(this)})},kc.ease=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof n&&(n=Zu.ease.apply(Zu,arguments)),A(this,function(e){e.__transition__[t].ease=n}))},kc.delay=function(n){var t=this.id;return A(this,"function"==typeof n?function(e,r,i){e.__transition__[t].delay=+n.call(e,e.__data__,r,i)}:(n=+n,function(e){e.__transition__[t].delay=n}))},kc.duration=function(n){var t=this.id;return A(this,"function"==typeof n?function(e,r,i){e.__transition__[t].duration=Math.max(1,n.call(e,e.__data__,r,i))}:(n=Math.max(1,n),function(e){e.__transition__[t].duration=n}))},kc.each=function(n,t){var e=this.id;if(arguments.length<2){var r=bc,i=_c;_c=e,A(this,function(t,r,i){bc=t.__transition__[e],n.call(t,t.__data__,r,i)}),bc=r,_c=i}else A(this,function(r){var i=r.__transition__[e];(i.event||(i.event=Zu.dispatch("start","end"))).on(n,t)});return this},kc.transition=function(){for(var n,t,e,r,i=this.id,u=++Nc,o=[],a=0,c=this.length;a<c;a++){o.push(n=[]);for(var t=this[a],l=0,f=t.length;l<f;l++)(e=t[l])&&(r=Object.create(e.__transition__[i]),r.delay+=r.duration,eu(e,l,u,r)),n.push(e)}return Qi(o,u)},Zu.svg.axis=function(){function n(n){n.each(function(){var n,l=Zu.select(this),f=this.__chart__||e,s=this.__chart__=e.copy(),h=null==c?s.ticks?s.ticks.apply(s,a):s.domain():c,p=null==t?s.tickFormat?s.tickFormat.apply(s,a):dn:t,g=l.selectAll(".tick").data(h,s),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",No),d=Zu.transition(g.exit()).style("opacity",No).remove(),y=Zu.transition(g).style("opacity",1),m=ti(s),x=l.selectAll(".domain").data([0]),M=(x.enter().append("path").attr("class","domain"),Zu.transition(x));v.append("line"),v.append("text");var _=v.select("line"),b=y.select("line"),w=g.select("text").text(p),S=v.select("text"),k=y.select("text");switch(r){case"bottom":n=ru,_.attr("y2",i),S.attr("y",Math.max(i,0)+o),b.attr("x2",0).attr("y2",i),k.attr("x",0).attr("y",Math.max(i,0)+o),w.attr("dy",".71em").style("text-anchor","middle"),M.attr("d","M"+m[0]+","+u+"V0H"+m[1]+"V"+u);break;case"top":n=ru,_.attr("y2",-i),S.attr("y",-(Math.max(i,0)+o)),b.attr("x2",0).attr("y2",-i),k.attr("x",0).attr("y",-(Math.max(i,0)+o)),w.attr("dy","0em").style("text-anchor","middle"),M.attr("d","M"+m[0]+","+-u+"V0H"+m[1]+"V"+-u);break;case"left":n=iu,_.attr("x2",-i),S.attr("x",-(Math.max(i,0)+o)),b.attr("x2",-i).attr("y2",0),k.attr("x",-(Math.max(i,0)+o)).attr("y",0),w.attr("dy",".32em").style("text-anchor","end"),M.attr("d","M"+-u+","+m[0]+"H0V"+m[1]+"H"+-u);break;case"right":n=iu,_.attr("x2",i),S.attr("x",Math.max(i,0)+o),b.attr("x2",i).attr("y2",0),k.attr("x",Math.max(i,0)+o).attr("y",0),w.attr("dy",".32em").style("text-anchor","start"),M.attr("d","M"+u+","+m[0]+"H0V"+m[1]+"H"+u)}if(s.rangeBand){var N=s.rangeBand()/2,E=function(n){return s(n)+N};v.call(n,E),y.call(n,E)}else v.call(n,f),y.call(n,s),d.call(n,s)})}var t,e=Zu.scale.linear(),r=Ec,i=6,u=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Ac?t+"":Ec,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(i=+t,u=+arguments[e-1],n):i},n.innerTickSize=function(t){return arguments.length?(i=+t,n):i},n.outerTickSize=function(t){return arguments.length?(u=+t,n):u},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var Ec="bottom",Ac={top:1,right:1,bottom:1,left:1};Zu.svg.brush=function(){function n(u){u.each(function(){var u=Zu.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=u.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),u.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=u.selectAll(".resize").data(d,dn);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Cc[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var f,s=Zu.transition(u),h=Zu.transition(o);c&&(f=ti(c),h.attr("x",f[0]).attr("width",f[1]-f[0]),e(s)),l&&(f=ti(l),h.attr("y",f[0]).attr("height",f[1]-f[0]),r(s)),t(s)})}function t(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function e(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function r(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==Zu.event.keyCode&&(A||(x=null,L[0]-=f[1],L[1]-=h[1],A=2),s())}function p(){32==Zu.event.keyCode&&2==A&&(L[0]+=f[1],L[1]+=h[1],A=0,s())}function d(){var n=Zu.mouse(_),i=!1;M&&(n[0]+=M[0],n[1]+=M[1]),A||(Zu.event.altKey?(x||(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),L[0]=f[+(n[0]<x[0])],L[1]=h[+(n[1]<x[1])]):x=null),N&&y(n,c,0)&&(e(S),i=!0),E&&y(n,l,1)&&(r(S),i=!0),i&&(t(S),w({type:"brush",mode:A?"move":"resize"}))}function y(n,t,e){var r,i,a=ti(t),c=a[0],l=a[1],s=L[e],p=e?h:f,d=p[1]-p[0];if(A&&(c-=s,l-=d+s),r=(e?v:g)?Math.max(c,Math.min(l,n[e])):n[e],A?i=(r+=s)+d:(x&&(s=Math.max(c,Math.min(l,2*x[e]-r))),s<r?(i=r,r=s):i=s),p[0]!=r||p[1]!=i)return e?o=null:u=null,p[0]=r,p[1]=i,!0}function m(){d(),S.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),Zu.select("body").style("cursor",null),T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),w({type:"brushend"})}var x,M,_=this,b=Zu.select(Zu.event.target),w=a.of(_,arguments),S=Zu.select(_),k=b.datum(),N=!/^(n|s)$/.test(k)&&c,E=!/^(e|w)$/.test(k)&&l,A=b.classed("extent"),C=D(),L=Zu.mouse(_),T=Zu.select(Wu).on("keydown.brush",i).on("keyup.brush",p);if(Zu.event.changedTouches?T.on("touchmove.brush",d).on("touchend.brush",m):T.on("mousemove.brush",d).on("mouseup.brush",m),S.interrupt().selectAll("*").interrupt(),A)L[0]=f[0]-L[0],L[1]=h[0]-L[1];else if(k){var q=+/w$/.test(k),z=+/^n/.test(k);M=[f[1-q]-L[0],h[1-z]-L[1]],L[0]=f[q],L[1]=h[z]}else Zu.event.altKey&&(x=L.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),Zu.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),d()}var u,o,a=p(n,"brushstart","brush","brushend"),c=null,l=null,f=[0,0],h=[0,0],g=!0,v=!0,d=Lc[0];return n.event=function(n){n.each(function(){var n=a.of(this,arguments),t={x:f,y:h,i:u,j:o},e=this.__chart__||t;this.__chart__=t,_c?Zu.select(this).transition().each("start.brush",function(){u=e.i,o=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=ze(f,t.x),r=ze(h,t.y);return u=o=null,function(i){f=t.x=e(i),h=t.y=r(i),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){u=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,d=Lc[!c<<1|!l],n):c},n.y=function(t){return arguments.length?(l=t,d=Lc[!c<<1|!l],n):l},n.clamp=function(t){return arguments.length?(c&&l?(g=!!t[0],v=!!t[1]):c?g=!!t:l&&(v=!!t),n):c&&l?[g,v]:c?g:l?v:null},n.extent=function(t){var e,r,i,a,s;return arguments.length?(c&&(e=t[0],r=t[1],l&&(e=e[0],r=r[0]),u=[e,r],c.invert&&(e=c(e),r=c(r)),r<e&&(s=e,e=r,r=s),e==f[0]&&r==f[1]||(f=[e,r])),l&&(i=t[0],a=t[1],c&&(i=i[1],a=a[1]),o=[i,a],l.invert&&(i=l(i),a=l(a)),a<i&&(s=i,i=a,a=s),i==h[0]&&a==h[1]||(h=[i,a])),n):(c&&(u?(e=u[0],r=u[1]):(e=f[0],r=f[1],c.invert&&(e=c.invert(e),r=c.invert(r)),r<e&&(s=e,e=r,r=s))),l&&(o?(i=o[0],a=o[1]):(i=h[0],a=h[1],l.invert&&(i=l.invert(i),a=l.invert(a)),a<i&&(s=i,i=a,a=s))),c&&l?[[e,i],[r,a]]:c?[e,r]:l&&[i,a])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],u=o=null),n},n.empty=function(){return!!c&&f[0]==f[1]||!!l&&h[0]==h[1]},Zu.rebind(n,a,"on")};var Cc={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Lc=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Tc=Zu.time={},qc=Date,zc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];uu.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Rc.setUTCDate.apply(this._,arguments)},setDay:function(){Rc.setUTCDay.apply(this._,arguments)},setFullYear:function(){Rc.setUTCFullYear.apply(this._,arguments)},setHours:function(){Rc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Rc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Rc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Rc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Rc.setUTCSeconds.apply(this._,arguments)},setTime:function(){Rc.setTime.apply(this._,arguments)}};var Rc=Date.prototype,Dc="%a %b %e %X %Y",Pc="%m/%d/%Y",Uc="%H:%M:%S",jc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Hc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Fc=["January","February","March","April","May","June","July","August","September","October","November","December"],Oc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Tc.year=ou(function(n){return n=Tc.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),Tc.years=Tc.year.range,Tc.years.utc=Tc.year.utc.range,Tc.day=ou(function(n){var t=new qc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),Tc.days=Tc.day.range,Tc.days.utc=Tc.day.utc.range,Tc.dayOfYear=function(n){var t=Tc.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},zc.forEach(function(n,t){n=n.toLowerCase(),t=7-t;var e=Tc[n]=ou(function(n){return(n=Tc.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=Tc.year(n).getDay();return Math.floor((Tc.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});Tc[n+"s"]=e.range,Tc[n+"s"].utc=e.utc.range,Tc[n+"OfYear"]=function(n){var e=Tc.year(n).getDay();return Math.floor((Tc.dayOfYear(n)+(e+t)%7)/7)}}),Tc.week=Tc.sunday,Tc.weeks=Tc.sunday.range,Tc.weeks.utc=Tc.sunday.utc.range,Tc.weekOfYear=Tc.sundayOfYear,Tc.format=cu;var Yc=fu(jc),Ic=su(jc),Zc=fu(Hc),Vc=su(Hc),Xc=fu(Fc),$c=su(Fc),Bc=fu(Oc),Wc=su(Oc),Jc=/^%/,Gc={"-":"",_:" ",0:"0"},Kc={a:function(n){return Hc[n.getDay()]},A:function(n){return jc[n.getDay()]},b:function(n){return Oc[n.getMonth()]},B:function(n){return Fc[n.getMonth()]},c:cu(Dc),d:function(n,t){return hu(n.getDate(),t,2)},e:function(n,t){return hu(n.getDate(),t,2)},H:function(n,t){return hu(n.getHours(),t,2)},I:function(n,t){return hu(n.getHours()%12||12,t,2)},j:function(n,t){return hu(1+Tc.dayOfYear(n),t,3)},L:function(n,t){return hu(n.getMilliseconds(),t,3)},m:function(n,t){return hu(n.getMonth()+1,t,2)},M:function(n,t){return hu(n.getMinutes(),t,2)},p:function(n){return n.getHours()>=12?"PM":"AM"},S:function(n,t){return hu(n.getSeconds(),t,2)},U:function(n,t){return hu(Tc.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return hu(Tc.mondayOfYear(n),t,2)},x:cu(Pc),X:cu(Uc),y:function(n,t){return hu(n.getFullYear()%100,t,2)},Y:function(n,t){return hu(n.getFullYear()%1e4,t,4)},Z:Du,"%":function(){return"%"}},Qc={a:pu,A:gu,b:mu,B:xu,c:Mu,d:Au,e:Au,H:Lu,I:Lu,j:Cu,L:zu,m:Eu,M:Tu,p:Ru,S:qu,U:du,w:vu,W:yu,x:_u,X:bu,y:Su,Y:wu,Z:ku,"%":Pu},nl=/^\s*\d+/,tl=Zu.map({am:0,pm:1});cu.utc=Uu;var el=Uu("%Y-%m-%dT%H:%M:%S.%LZ");cu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ju:el,ju.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},ju.toString=el.toString,Tc.second=ou(function(n){return new qc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),Tc.seconds=Tc.second.range,Tc.seconds.utc=Tc.second.utc.range,Tc.minute=ou(function(n){return new qc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),Tc.minutes=Tc.minute.range,Tc.minutes.utc=Tc.minute.utc.range,Tc.hour=ou(function(n){var t=n.getTimezoneOffset()/60;return new qc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),Tc.hours=Tc.hour.range,Tc.hours.utc=Tc.hour.utc.range,Tc.month=ou(function(n){return n=Tc.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),Tc.months=Tc.month.range,Tc.months.utc=Tc.month.utc.range;var rl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],il=[[Tc.second,1],[Tc.second,5],[Tc.second,15],[Tc.second,30],[Tc.minute,1],[Tc.minute,5],[Tc.minute,15],[Tc.minute,30],[Tc.hour,1],[Tc.hour,3],[Tc.hour,6],[Tc.hour,12],[Tc.day,1],[Tc.day,2],[Tc.week,1],[Tc.month,1],[Tc.month,3],[Tc.year,1]],ul=[[cu("%Y"),Vn],[cu("%B"),function(n){return n.getMonth()}],[cu("%b %d"),function(n){return 1!=n.getDate()}],[cu("%a %d"),function(n){return n.getDay()&&1!=n.getDate()}],[cu("%I %p"),function(n){return n.getHours()}],[cu("%I:%M"),function(n){return n.getMinutes()}],[cu(":%S"),function(n){return n.getSeconds()}],[cu(".%L"),function(n){return n.getMilliseconds()}]],ol=Ou(ul);il.year=Tc.year,Tc.scale=function(){return Hu(Zu.scale.linear(),il,ol)};var al={range:function(n,t,e){return Zu.range(+n,+t,e).map(Fu)}},cl=il.map(function(n){return[n[0].utc,n[1]]}),ll=[[Uu("%Y"),Vn],[Uu("%B"),function(n){return n.getUTCMonth()}],[Uu("%b %d"),function(n){return 1!=n.getUTCDate()}],[Uu("%a %d"),function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],[Uu("%I %p"),function(n){return n.getUTCHours()}],[Uu("%I:%M"),function(n){return n.getUTCMinutes()}],[Uu(":%S"),function(n){return n.getUTCSeconds()}],[Uu(".%L"),function(n){return n.getUTCMilliseconds()}]],fl=Ou(ll);return cl.year=Tc.year.utc,Tc.scale.utc=function(){return Hu(Zu.scale.linear(),cl,fl)},Zu.text=yn(function(n){return n.responseText}),Zu.json=function(n,t){return mn(n,"application/json",Yu,t)},Zu.html=function(n,t){return mn(n,"text/html",Iu,t)},Zu.xml=yn(function(n){return n.responseXML}),Zu}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/d3-amd.js' */
define("jira-agile/d3",d3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/figue.js' */
var figue=function(){function r(r,t){for(var n=r.length,e=0,a=0;a<n;a++)e+=Math.pow(r[a]-t[a],2);return e=Math.sqrt(e)}function t(r,t){for(var n=r.length,e=0,a=0;a<n;a++)e+=Math.abs(r[a]-t[a]);return e}function n(r,t){for(var n=r.length,e=0,a=0;a<n;a++)e=Math.max(e,Math.abs(r[a]-t[a]));return e}function e(r,t){for(var n=r.length,e=new Array(n),a=0;a<n;a++)e[a]=r[a]+t[a];return e}function a(r,t){for(var n=t.length,e=new Array(n),a=0;a<n;a++)e[a]=r*t[a];return e}function i(r,t){for(var n="",e=0;e<t;e++)n+=r;return n}function h(r,t,n,e){for(var a=new Array(t.length),i=r+n,h=0;h<t.length;h++)a[h]=(r*t[h]+n*e[h])/i;return a}function o(r,t){var n=t-r.length;if(!(n<0)){var e=Math.floor(n/2);return i(" ",e)+r+i(" ",n-e)}}function f(r,t,n){var e=t-r.length;if(!(e<0))return i(" ",n)+r+i(" ",t-(r.length+n))}function l(r){for(var t=new Array(r.length),n=Math.pow(10,figue.PRINT_VECTOR_VALUE_PRECISION),e=0;e<r.length;e++)t[e]=Math.round(r[e]*n)/n;return t.join(",")}function u(r){var t=Math.pow(10,figue.PRINT_VECTOR_VALUE_PRECISION);return String(Math.round(r*t)/t)}function g(r,t,n,e,a,h){var s=new Array,A=l(r.centroid);if(r.isLeaf()){var v=String(r.label),E=1;a&&(E=Math.max(A.length,E)),e&&(E=Math.max(v.length,E)),s.push(o("|",E)),a&&s.push(o(A,E)),e&&s.push(o(v,E))}else{var M=u(r.dist),N=g(r.left,t,n,e,a,h),c=g(r.right,t,n,e,a,h),I=N[0].indexOf("|"),d=c[0].indexOf("|"),E=t+c[0].length+N[0].length;a&&(E=Math.max(A.length,E)),h&&(E=Math.max(M.length,E));var _=I+Math.floor((N[0].length-I+t+(1+d))/2);s.push(f("|",E,_)),a&&s.push(f(A,E,_-Math.floor(A.length/2))),h&&s.push(f(M,E,_-Math.floor(M.length/2)));var p=t+(N[0].length-I)+d+1,w=i("_",p);if(s.push(f(w,E,I)),n&&N.length!=c.length){var T,m;N.length>c.length?(m=N,T=c):(m=c,T=N),header=T[0];for(var y=m.length-T.length,L=0;L<y;L++)T.splice(0,0,header)}for(var L=0;L<Math.max(N.length,c.length);L++){var S="";S=L<N.length?N[L]:i(" ",N[0].length);var x="";x=L<c.length?c[L]:i(" ",c[0].length),s.push(S+i(" ",t)+x);S+i(" ",t)+x}}return s}function s(e,a,i,o){var f,l,u,g,s,A,v,M,N,c,I=a.length,d=new Array(I),_=new Array(I),p=new figue.Matrix(I,I),w=p.mtx,T=new Array(I);for(i==figue.EUCLIDIAN_DISTANCE?i=r:i==figue.MANHATTAN_DISTANCE?i=t:i==figue.MAX_DISTANCE&&(i=n),A=0;A<I;A++)for(d[A]=0,v=0;v<I;v++)A==v?w[A][v]=1/0:w[A][v]=i(a[A],a[v]),w[A][d[A]]>w[A][v]&&(d[A]=v);for(A=0;A<I;A++)T[A]=[],T[A][0]=new E(e[A],null,null,0,a[A]),_[A]=1;for(M=0;M<I-1;M++){for(l=0,A=0;A<I;A++)w[A][d[A]]<w[l][d[l]]&&(l=A);for(u=d[l],g=T[l][0],s=T[u][0],c=h(g.size,g.centroid,s.size,s.centroid),f=new E((-1),g,s,w[l][u],c),T[l].splice(0,0,f),_[l]+=_[u],v=0;v<I;v++)if(o==figue.SINGLE_LINKAGE)w[l][v]>w[u][v]&&(w[v][l]=w[l][v]=w[u][v]);else if(o==figue.COMPLETE_LINKAGE)w[l][v]<w[u][v]&&(w[v][l]=w[l][v]=w[u][v]);else if(o==figue.AVERAGE_LINKAGE){var m=(_[l]*w[l][v]+_[u]*w[u][v])/(_[l]+_[v]);w[v][l]=w[l][v]=m}for(w[l][l]=1/0,A=0;A<I;A++)w[A][u]=w[u][A]=1/0;for(v=0;v<I;v++)d[v]==u&&(d[v]=l),w[l][v]<w[l][d[l]]&&(d[l]=v);N=f}return N}function A(t,n){var i=n.length;if(t>=i)return null;for(var h=new Array(t),o=new Object,f=0;f<t;){var l=Math.floor(Math.random()*i);l in o||(o[l]=1,h[f]=n[l],f++)}for(var u=new Array(i),g=new Array(t),s=!0,A=0;s;){for(var v=0;v<t;v++)g[v]=0;for(var E=0;E<i;E++){for(var N,c=n[E],I=Number.MAX_VALUE,v=0;v<t;v++)dist=r(h[v],c),dist<I&&(I=dist,N=v);g[N]++,u[E]=N}for(var d=new Array(t),v=0;v<t;v++)d[v]=null;for(var E=0;E<i;E++)f=u[E],null==d[f]?d[f]=n[E]:d[f]=e(d[f],n[E]);for(var v=0;v<t;v++)d[v]=a(1/g[v],d[v]);s=!1;for(var v=0;v<t;v++)if(!M.call(d[v],h[v])){s=!0;break}h=d,A++,A>figue.KMEANS_MAX_ITERATIONS&&(s=!1)}return{centroids:h,assignments:u}}function v(r,t){this.rows=r,this.cols=t,this.mtx=new Array(r);for(var n=0;n<r;n++){for(var e=new Array(t),a=0;a<t;a++)e[a]=0;this.mtx[n]=e}}function E(r,t,n,e,a){this.label=r,this.left=t,this.right=n,this.dist=e,this.centroid=a,null==t&&null==n?(this.size=1,this.depth=0):(this.size=t.size+n.size,this.depth=1+Math.max(t.depth,n.depth))}function M(r){if(this.length!=r.length)return!1;for(var t=0;t<r.length;t++){if(this[t]instanceof Array&&!M.call(this[t],r[t]))return!1;if(this[t]!==r[t])return!1}return!0}return{SINGLE_LINKAGE:0,COMPLETE_LINKAGE:1,AVERAGE_LINKAGE:2,EUCLIDIAN_DISTANCE:0,MANHATTAN_DISTANCE:1,MAX_DISTANCE:2,PRINT_VECTOR_VALUE_PRECISION:2,KMEANS_MAX_ITERATIONS:10,Matrix:v,Node:E,generateDendogram:g,agglomerate:s,kmeans:A}}();figue.Matrix.prototype.toString=function(){for(var r=[],t=0;t<this.rows;t++)r.push(this.mtx[t].join("\t"));return r.join("\n")},figue.Node.prototype.isLeaf=function(){return null==this.left&&null==this.right},figue.Node.prototype.buildDendogram=function(r,t,n,e,a){var i=figue.generateDendogram(this,r,t,n,e,a);return i.join("\n")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/cluster.js' */
var clusterVectors=function(e,t,i,n,r){function s(e,t){e&&(e.dist&&e.dist>i?(s(e.left,t),s(e.right,t)):e.left||e.right?t.push({issues:u(e),point:[n.invert(e.centroid[0]),r.invert(e.centroid[1])],size:e.size,distance:e.dist,cluster:!0}):t.push({issue:e.label,point:[n.invert(e.centroid[0]),r.invert(e.centroid[1])],size:e.size,distance:e.dist,cluster:!1}))}function u(e){return e?1===e.size&&e.label?[e.label]:u(e.left).concat(u(e.right)):[]}var c=_.map(e,function(e){return[n(e[0]),r(e[1])]});if(0===e.length)return[];if(1===e.length)return[{issue:t[0],point:e[0],size:1,distance:0,cluster:!1}];var l=figue.agglomerate(t,c,figue.MAX_DISTANCE,figue.COMPLETE_LINKAGE),o=[];return s(l,o),o};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/core.js' */
var c3={};c3.defaults={x:function(n){return n[0]},y:function(n){return n[1]}},c3.checkIsNumber=function(n){if("number"!=typeof n)throw new Error("Expected a number, but received: "+n);return n},c3.isEmpty=function(n){return!n||!n.length},c3.prop=function(n){function t(n){return 0===arguments.length?e.call(this,r):(r=u.call(this,n,r),this)}var r=n,e=function(n){return n},u=function(n,t){return n};return t.get=function(n){return e=n,this},t.set=function(n){return u=n,this},t},c3.inherit=function(n,t){var r,e=c3.prop().get(function(e){if(null!=e)return e;for(var u=this.parent();u;u=u.parent())if("function"==typeof u[n]&&(e=u[n](),null!=e))return e;return r?r.call(this):t});return e.onDefault=function(n){return r=n,this},e},c3.event=function(n){function t(n,t){u.push({handler:n,context:t})}function r(t){var r=this;t=t||{},_.each(u,function(n){n.handler.call(n.context||r,t)}),n&&n.call(this,t)}function e(){return"function"==typeof arguments[0]?t.apply(this,arguments):r.apply(this,arguments),this}var u=[];return e.off=function(n,t){return u=_.reject(u,function(r){var e=null==n||r.handler==n,u=null==t||r.context==t;return e&&u}),this},e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/areaPlot.js' */
c3.areaPlot=function(){return c3.component("areaPlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("area").dataFilter(function(t){return[t]}).extend({areaConstructor:c3.prop(d3.svg.area)}).update(function(t){var e=this.areaConstructor()().x(this.x());this.cartesian()?e.y0(this.height()).y1(this.y()):e.y0(this.y()).y1(0),t.selection.attr("d",e(this.data()))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/axis.js' */
c3.axis=function(){return c3.component("axis").extend(c3.plottable()).extend(function(){this.selection().call(this.axis())}).extend({axisConstructor:c3.inherit("axisConstructor",d3.svg.axis),orient:c3.prop("bottom"),horizontal:function(){var t=this.orient();return"bottom"===t||"top"===t},axis:function(){var t=this.horizontal();return this.axisConstructor().call(this).scale(t?this.xScale():this.yScale()).orient(this.orient())}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/borderLayout.js' */
c3.borderLayout=function(){var t=function(){return c3.prop().set(function(t){return t.parent(this)})},e=c3.drawable().extend({data:function(){return h.occupiedRegions()}}).dataKey(function(t){return t.name}).update(function(t){var e=h.positions();t.selection.each(function(t){var h=d3.select(this),n=e[t.name];h.attr("transform","translate("+n.left+","+n.top+")"),t.component.width(n.width).height(n.height),t.component(h)})}),h=c3.component("borderLayout").extend(c3.plottable()).extend(function(){e(this.selection())}).extend({center:t(),north:t(),south:t(),west:t(),east:t(),xRange:function(){return[0,this.centerWidth()]},yRange:function(){return[this.centerHeight(),0]},centerWidth:function(){return this.positions().center.width},centerHeight:function(){return this.positions().center.height},occupiedRegions:function(){var t=this;return _.compact(_.map(["north","south","west","east","center"],function(e){var h=t[e]();return h?{name:e,component:t[e]()}:null}))},positions:function(){var t={top:c3.checkIsNumber(this.north()?this.north().height():0),bottom:c3.checkIsNumber(this.south()?this.south().height():0),left:c3.checkIsNumber(this.west()?this.west().width():0),right:c3.checkIsNumber(this.east()?this.east().width():0)},e=c3.checkIsNumber(this.width()),h=c3.checkIsNumber(this.height()),n={},i=n.center={left:t.left,top:t.top,width:e-t.left-t.right,height:h-t.top-t.bottom};return this.north()&&(n.north={top:t.top,left:t.left,height:t.top,width:i.width}),this.south()&&(n.south={top:h-t.bottom,left:t.left,height:t.bottom,width:i.width}),this.west()&&(n.west={top:t.top,left:t.left,height:i.height,width:t.left}),this.east()&&(n.east={top:t.top,left:e-t.right,height:i.height,width:t.right}),n}});return h};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/circlePlot.js' */
c3.circlePlot=function(){return c3.component("circlePlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("circle").update(function(t){t.selection.attr("cx",this.x()).attr("cy",this.y()).attr("r",this.radiusAccessor())}).extend({radiusAccessor:c3.prop(function(){return 4})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/clippable.js' */
c3.clippable=function(){var t=0;return function(){return c3.component("clippable").extend({clipped:c3.prop(!1)}).extend(function(){if(this.clipped()){var e=this,i=c3.singular().elementTag("clipPath").enter(function(i){var n="c3clip"+t;t++,e.selection().attr("clip-path","url(#"+n+")"),i.selection.attr("id",n).append("rect").attr("x","0").attr("y","0").attr("fill","none")}).update(function(t){t.selection.select("rect").attr("width",e.width()).attr("height",e.height())});i(this.selection())}})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/component.js' */
c3.component=function(n){function t(){var n=function(t){return n.applyTo(n,t)};return n}function e(n,t,e){for(var r in t)e&&r in e||(n[r]=t[r]);return n}var r=[],o=t(),p={displayName:n,selection:c3.prop(null),parent:c3.prop(null),applyTo:function(n,t){return o.selection(t),_.each(r,function(e){e.applyTo?e.applyTo(n,t):e.call(n,t)}),o},extend:function(n){return"function"==typeof n&&(n.parent&&n.parent(o),r.push(n)),e(o,n,p)}};return _.extend(o,p)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/deviationPlot.js' */
c3.deviationPlot=function(){return c3.component("deviationPlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("area").dataFilter(function(t){return[t]}).update(function(t){var e=this.yAccessor(),n=this.deviationAccessor(),a=this.yScale(),i=d3.svg.area().x(this.x()).y0(function(t){return a(e(t)+n(t))}).y1(function(t){return a(Math.max(e(t)-n(t),0))});t.selection.attr("d",i(this.data()))}).extend({deviationAccessor:c3.prop(function(t){return t[2]})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/drawable.js' */
c3.drawable=function(){return c3.component("drawable").extend(c3.withData()).extend(c3.withElements()).extend(function(){var t=this.dataBinding();this.enter({selection:this.drawEnter(t.enter())}),this.exit({selection:this.drawExit(t.exit())}),this.update({selection:t})}).extend({enter:c3.event(),exit:c3.event(),update:c3.event(),dataFilter:c3.prop(_.identity),dataBinding:function(){var t=this.dataFilter().call(this,this.data());return this.elements().data(t,this.dataKey())},drawEnter:function(t){var e=t.append(this.elementTag()),n=this.elementClass();return n&&e.classed(n,!0),e},drawExit:function(t){return t.remove()}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/fitToParent.js' */
c3.fitToParent=function(){return c3.component("fitToParent").extend({width:c3.prop(),height:c3.prop()}).extend(function(){var e=this.selection().node().domNode.parentElement;this.height(c3.checkIsNumber(e.clientHeight)),this.width(c3.checkIsNumber(e.clientWidth))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/gridLines.js' */
c3.gridLines=function(){return c3.component("gridLines").extend(c3.axis()).axisConstructor(function(){var t;switch(this.orient()){case"left":t=-this.width();break;case"right":t=this.width();break;case"top":t=-this.height();break;case"bottom":t=this.height()}return d3.svg.axis().tickSize(t).tickFormat("")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/label.js' */
c3.label=function(){return c3.component("label").extend(c3.singular()).extend({text:c3.prop(""),orient:c3.prop("bottom")}).elementTag("text").elementClass("label").enter(function(t){t.selection.attr("text-anchor","middle")}).update(function(t){t.selection.text(this.text());var e=0,i=0,h=0,n=t.selection.node().getBBox();switch(this.orient()){case"left":h=270,e=-1*this.width()+n.height,i=this.height()/2;break;case"right":h=90,e=this.width()-n.height,i=this.height()/2;break;case"top":h=0,e=this.width()/2,i=-1*this.height()+n.height;break;default:h=0,e=this.width()/2,i=this.height()-n.height/2}t.selection.attr("transform","translate("+e+", "+i+") rotate("+h+", 0, 0)")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/labelledAxis.js' */
c3.labelledAxis=function(){return c3.component("labelledAxis").extend(c3.axis()).extend(c3.label()).elementClass("axis-label")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/layerable.js' */
c3.layerable=function(){var e=c3.drawable().elementClass("layer").update(function(e){e.selection.each(function(e,n){e.component(d3.select(this).classed(e.name,!0))})});return c3.component("layerable").extend(function(){e(this.selection())}).extend(c3.plottable()).extend({layers:function(){return e.data()},getLayer:function(e){var n=_.findWhere(this.layers(),{name:e});return n?n.component:void 0},addLayer:function(e,n){return this.getLayer(e)||this.layers().push({name:e,component:n.parent(this)}),this},removeLayer:function(e){var n=this.layers(),t=_.reject(n,function(n){return n.name===e});return t.length!==n.length&&this.layers(t),this}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/linePlot.js' */
c3.linePlot=function(){return c3.component("linePlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("line").dataFilter(function(t){return[t]}).extend({lineConstructor:c3.prop(d3.svg.line)}).update(function(t){var e=this.lineConstructor()().x(this.x()).y(this.y());t.selection.attr("d",e(this.data())).attr("stroke","black").attr("fill","none")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/plottable.js' */
c3.plottable=function(){return c3.component("plottable").extend(c3.withData()).extend(c3.withDimensions()).extend(c3.clippable()).extend({x:function(){var t=this.xScale(),c=this.xAccessor();return function(e,n){return t(c(e,n))}},y:function(){var t=this.yScale(),c=this.yAccessor();return function(e,n){return t(c(e,n))}},xAccessor:c3.inherit("xAccessor",c3.defaults.x),yAccessor:c3.inherit("yAccessor",c3.defaults.y),xScaleConstructor:c3.inherit("xScaleConstructor",d3.scale.linear),yScaleConstructor:c3.inherit("yScaleConstructor",d3.scale.linear),xDomain:c3.inherit("xDomain").onDefault(function(){if(c3.isEmpty(this.data()))return[0,1];var t=c3.checkIsNumber(d3.min(this.data(),this.xAccessor())),c=c3.checkIsNumber(d3.max(this.data(),this.xAccessor()));return[t,c]}),yDomain:c3.inherit("yDomain").onDefault(function(){if(c3.isEmpty(this.data()))return[0,1];var t=c3.checkIsNumber(d3.min(this.data(),this.yAccessor())),c=c3.checkIsNumber(d3.max(this.data(),this.yAccessor()));return[t,c]}),xRange:c3.inherit("xRange").onDefault(function(){var t=c3.checkIsNumber(this.width());return[0,t]}),yRange:c3.inherit("yRange").onDefault(function(){var t=c3.checkIsNumber(this.height());return this.cartesian()?[t,0]:[0,t]}),xScale:function(){return this.xScaleConstructor().call(this).domain(this.xDomain()).range(this.xRange())},yScale:function(){return this.yScaleConstructor().call(this).domain(this.yDomain()).range(this.yRange())},cartesian:c3.prop(!0)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/singular.js' */
c3.singular=function(){return c3.component("singular").extend(c3.withElements()).extend({enter:c3.event(),update:c3.event(),exit:c3.event(),showCondition:c3.prop(function(){return!0})}).extend(function(){var e=this.elements();this.showCondition().call(this)?(e.node()||(e=this.selection().append(this.elementTag()),this.elementClass()&&e.classed(this.elementClass(),!0),this.enter({selection:e})),this.update({selection:e})):e.node()&&this.exit({selection:e.remove()})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/utils.js' */
c3.utils={wrapText:function(t,e,n){t.each(function(){for(var t,i=d3.select(this),o=i.text().split(/\s+/).reverse(),a=[o.pop()],h=[a];t=o.pop();)a.push(t),i.text(a.join(" ")),i.node().getComputedTextLength()>e&&(a.pop(),a=[t],h.push(a));i.text(null);var c=1.1,d=i.attr("y")||0,p=parseFloat(i.attr("dy"))||0;h.forEach(function(t,o){n&&(o-=h.length-1),i.append("tspan").attr({x:e/2,y:d,dy:o*c+p+"em"}).text(t.join(" "))})})},containText:function(t,e,n){t.each(function(){var t=this.__data__,i=d3.select(this),o={width:0,height:0},a=4;try{o=i.node().getBBox()}catch(h){}o.height+a>n(t)?i.text(""):o.width+a>e(t)&&i.text("")})},defaultViewBox:function(t){var e=t.node().parentNode.getBoundingClientRect();t.attr("viewBox","0 0 "+e.width+" "+e.height)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/withData.js' */
c3.withData=function(){return c3.component("withData").extend({data:c3.inherit("data",[]),dataKey:c3.inherit("dataKey")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/fillWithRect.js' */
c3.fillWithRect=function(){return c3.singular().elementTag("rect").elementClass("fill-rect").enter(function(t){t.selection.attr("x",0).attr("y",0).attr("fill","none").attr("width","100%").attr("height","100%").style("pointer-events","all")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/withDimensions.js' */
c3.withDimensions=function(){return c3.component("withDimensions").extend({width:c3.inherit("width").onDefault(function(){return parseInt(this.selection().style("width"),10)||0}),height:c3.inherit("height").onDefault(function(){return parseInt(this.selection().style("height"),10)||0})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/withElements.js' */
c3.withElements=function(){return c3.component("withElements").extend({elementTag:c3.prop("g"),elementClass:c3.prop(""),elementSelector:function(){return this.elementClass()?this.elementTag()+"."+this.elementClass():this.elementTag()},elements:function(){var e=this.selection().node();return this.selection().selectAll(this.elementSelector()).filter(function(){return this.parentNode===e})}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/interactive.js' */
c3.interactive=function(){function o(o){var n=e(o),t=n[0],u=n[1];return c.mouseCoordinates([t,u]),t>0&&u>0&&t<=c.width()&&u<=c.height()}function e(o){s();var e=o.pageX-r.left,n=o.pageY-r.top;return[e,n]}function n(){AJS.$(c.selection().node()).on("dragstart",function(o){o.preventDefault()})}function t(){c.domContext().on("mousemove",function(e){var n=o(e);!n&&i?(i=!1,c.mouseout(e)):n&&!i&&(i=!0,c.mouseover(e))}).on("mouseout",function(o){i&&(i=!1,c.mouseout(o))}),n()}function u(e){return function(n,t){return c.domContext().on(e+".c3."+n,function(e){o(e)&&(d3.event=e,t.call(this,e))}),this}}var r,c=c3.component(),i=!1,s=_.throttle(function(){r=AJS.$(c.region().selection().node()).offset()},200);return c.extend(c3.withDimensions()).extend(_.once(t)).extend({mouseCoordinates:c3.prop(),domContext:c3.prop(),region:c3.prop(),mousedown:u("mousedown"),mouseup:u("mouseup"),mousemove:u("mousemove"),mouseover:c3.event(),mouseout:c3.event()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/scrubber.js' */
c3.scrubber=function(){function e(){var e=r.parent().mouseCoordinates();r.elements().attr("x1",e[0]).attr("x2",e[0]),r.shouldHideScrubber()()||r.elements().style("visibility","")}function t(){r.elements().style("visibility","hidden")}function n(e){e.style("pointer-events","none")}function i(i){n(i.selection),this.interactiveLayer().mousemove("scrubber",function(){e()}).mouseout(function(){t()})}var r=c3.singular();return r.elementTag("line").enter(i).extend(c3.withDimensions()).extend({interactiveLayer:c3.prop(),shouldHideScrubber:c3.prop(function(){}),hideScrubber:t}).update(function(e){e.selection.attr("y1",0).attr("y2",this.height())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/barChart.js' */
c3.barChart=function(){return c3.component("barChart").extend(c3.drawable()).extend(c3.plottable()).elementTag("rect").xAccessor(function(t,e){return e}).yAccessor(function(t){return t}).extend({baselineAccessor:c3.prop(function(){return 0}),barWidth:function(){return this.xScale().rangeBand()},barHeight:function(){var t=this.baselineAccessor(),e=this.yAccessor(),r=this.yScale();return function(n){return r(t(n))-r(e(n))}},maxBarWidth:c3.prop(0),padding:c3.prop(.25).set(function(t){if(t>=0&&t<=1)return t;throw new Error("Expected padding to be between 0 and 1 inclusive, but received "+t)}),outerPadding:c3.prop(.25).set(function(t){if(t>=0&&t<=1)return t;throw new Error("Expected outerPadding to be between 0 and 1 inclusive, but received "+t)}),showLabels:c3.prop(!1),rotateLabels:c3.prop(!1),labelAccessor:function(){return this.xAccessor()},xRange:function(){var t=this.width(),e=t;return this.maxBarWidth()>0&&(e=Math.floor(this.maxBarWidth()/(1-this.padding())*(this.xDomain().length-this.padding()+2*this.outerPadding()))),[0,Math.min(e,t)]},xScale:function(){return d3.scale.ordinal().domain(this.xDomain()).rangeRoundBands(this.xRange(),this.padding(),this.outerPadding())},xDomain:c3.inherit("xDomain").onDefault(function(){return c3.isEmpty(this.data())?[0,1]:d3.range(this.data().length)}),yDomain:c3.inherit("yDomain").onDefault(function(){if(c3.isEmpty(this.data()))return[0,1];var t=c3.checkIsNumber(d3.min(this.data(),this.baselineAccessor())),e=c3.checkIsNumber(d3.max(this.data(),this.yAccessor()));return[t,e]})}).enter(function(t){"g"===this.elementTag()&&this.showLabels()&&t.selection.append("text").classed("bar-label",!0)}).update(function(t){var e=this.x(),r=this.y(),n=this.barWidth(),a=this.barHeight(),i=t.selection.select("text.bar-label");t.selection.attr("transform",function(t,n){return"translate("+e(t,n)+","+r(t,n)+")"}).attr("height",a).attr("width",n),this.showLabels()&&(i.attr("x",n/2).attr("y",a).text(this.labelAccessor()),this.rotateLabels()?i.attr("transform",function(t,e){return"rotate(90 "+n/2+","+a(t)+")"}).attr("text-anchor","start").attr("dx",".5em").attr("dy",".25em"):i.attr("transform",null).attr("text-anchor","middle").attr("dx",null).attr("dy","1.25em").call(c3.utils.wrapText,n))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/floatingBarChart.js' */
c3.floatingBarChart=function(){return c3.component("floatingBarChart").extend(c3.barChart()).yAccessor(function(n){return n[0]+n[1]}).baselineAccessor(function(n){return n[0]})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/stack.js' */
c3.stack=function(){return c3.component("stack").extend(c3.floatingBarChart()).elementTag("g").xAccessor(function(){return 0}).extend({classPrefix:c3.prop(),labelAccessor:function(){return this.yAccessor()},labelFormatter:function(){return d3.format(",d")}}).enter(function(t){var e=this.classPrefix();t.selection.insert("rect",":first-child").attr("class",function(t,r){return e+"-series-"+r})}).update(function(t){var e=this.classPrefix(),r=this.barHeight(),s=this.barWidth();t.selection.select("rect").attr("height",r).attr("width",s),this.showLabels()&&t.selection.select("text").attr("dy","0.45em").attr("y",function(t){return r(t)/2}).attr("class",function(t,r){return e+"-series-label-"+r}).classed("bar-label",!0).text(this.labelAccessor()).call(c3.utils.containText,function(){return s},r)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'includes/js/lib/c3/brush.js' */
c3.brush=function(){function t(t){i=t,a=!0,r(),s.elements().attr("x",t).attr("y",0).attr("width","1"),s.onDrag(t)}function n(t){if(a){var n=s.elements(),e=parseInt(t-i,10);e<0?n.attr("x",t):n.attr("x",i),n.attr("width",Math.abs(e));var r=_.sortBy([i,t],_.identity);s.onUpdate(r),s.currentRange(r)}}function e(t){a&&(a=!1,o(),s.onEndDrag(_.sortBy([i,t],_.identity)))}function r(){s.elements().style("display","")}function o(){s.elements().style("display","none")}var i=0,a=!1,s=c3.singular();return s.elementTag("rect").extend(c3.withDimensions()).enter(function(r){o(),r.selection.attr("height",this.height()).style("pointer-events","none");var i=this.interactiveLayer();i.mousedown("brush",function(){t(i.mouseCoordinates()[0])}).mousemove("brush",function(){n(i.mouseCoordinates()[0])}).mouseup("brush",function(){e(i.mouseCoordinates()[0])})}).extend({interactiveLayer:c3.prop(),onDrag:c3.event(),onUpdate:c3.event(),onEndDrag:c3.event(),currentRange:c3.prop(),cancelDrag:function(){a=!1,o()},isDragging:function(){return a}})};;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:sidebar', location = 'js/global-sidebar-api.js' */
!function(){var n,e=new Promise(function(e){n=e});e.done=function(n){return this.then(n)},AJS.namespace("JIRA.API"),JIRA.API.getSidebar=function(){return e},define("jira/globalnavigator/sidebar/bridge",function(){return function(e){n(e)}}),define("jira/globalnavigator/sidebar",function(){return e})}();
//# sourceMappingURL=global-sidebar-api-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:sidebar', location = 'js/imperative-api.js' */
!function(){var n,i=new Promise(function(i){n=i});AJS.namespace("JIRA.API"),JIRA.API.getNavigationApi=function(){return i},define("jira/navigation/bridge",function(){return function(i){n(i)}}),define("jira/navigation",function(){return i})}();
//# sourceMappingURL=imperative-api-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:sidebar', location = 'js/check-both-apis.js' */
require(["jira/globalnavigator/sidebar","jira/navigation","jira/analytics"],function(a,i,n){Promise.all([a,i]).then(function(){n.send({name:"navigation.imperative-api.both-apis-resolves"})})});
//# sourceMappingURL=check-both-apis-min.js.map
;
;
/* module-key = 'com.pyxis.greenhopper.jira:software-feedback-collector', location = 'includes/js/bridge/software-feedback-collector.js' */
!function(){var e=void 0,n=new Promise(function(n){e=n});n.done=function(e){return this.then(e)},define("jira-agile/bridge/software-feedback-collector/init",function(){return function(n){return e(n)}}),define("jira-agile/bridge/software-feedback-collector",function(){return n})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:software-feedback-collector', location = 'includes/js/rapid/ui/SimpleBoardSidebarController.js' */
!function(){"use strict";var e=require("jira-agile/bridge/software-feedback-collector"),r=require("jira/featureflags/feature-manager"),a=["com.pyxis.greenhopper.jira:project-sidebar-simple-feedback","com.pyxis.greenhopper.jira:project-sidebar-simple-feedback-2","com.pyxis.greenhopper.jira:global-sidebar-simple-feedback"],i=require("jira/featureflags/simplified-ux-feature-manager"),t=require("jquery");e.then(function(e){(AJS.Meta.get("is-agility-board")||r.isFeatureEnabled("jsw.agility.sidebar.software-feedback-collector.fix"))&&(i.isGlobalSidebarEnabled()?JIRA.API.getSidebar().then(function(r){r.on(r.events.BEFORE_NAVIGATE,function(r){a.includes(r.target.getId())&&e.openFeedbackCollector()})}):a.forEach(function(r){o('.aui-nav-item[data-link-id="'+r+'"',e.openFeedbackCollector)}))});var o=function(e,r){t(e).removeAttr("href"),t("body").on("click",e,function(e){e.preventDefault(),r()})}}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:breadcrumbs', location = 'js/global-breadcrumbs-api.js' */
!function(){var n,r=new Promise(function(r){n=r});r.done=function(n){return this.then(n)},define("jira/globalnavigator/breadcrumbs/bridge",function(){return function(r){n(r)}}),define("jira/globalnavigator/breadcrumbs",function(){return r})}();
//# sourceMappingURL=global-breadcrumbs-api-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:breadcrumbs', location = 'js/breadcrumbs-api.js' */
define("jira/atlaskit/breadcrumbs",["jira/featureflags/simplified-ux-feature-manager"],function(e){var t=AJS.contextPath(),r=JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key"),n=function(){return require("jira/globalnavigator/breadcrumbs")};return{Items:{REPORTS:{id:"breadcrumbs-item-reports",index:0,text:"Reports",href:r&&t+"/projects/"+r+"?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page"},RELEASES:{id:"breadcrumbs-item-releases-versions",index:0,text:"Releases",href:r&&t+"/projects/"+r+"?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page"},VERSIONS:{id:"breadcrumbs-item-releases-versions",index:0,text:"Versions",href:r&&t+"/projects/"+r+"?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page"}},render:function(){var e=document.getElementById("breadcrumbs-container");e?n().done(function(t){t.render(e)}):(AJS.trigger("analyticsEvent",{name:"jira.atlaskit.plugin.breadcrumbs.render.without.container"}),window.console&&console.warn("Attempted to render breadcrumbs, but container element with id: 'breadcrumbs-container' not found in DOM."))},isEnabled:function(){return e.isAdg3ModeOn()},insertItem:function(e){n().done(function(t){t.insertItem(e)})},removeItem:function(e){n().done(function(t){t.removeItem(e)})}}});
//# sourceMappingURL=breadcrumbs-api-min.js.map
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/const/PageMode.js' */
define("jira-agile/rapid/const/PageMode",function(){return Object.freeze({PLAN:"plan",WORK:"work",REPORT:"report"})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/QuickFiltersBridge.js' */
define("jira-agile/rapid/work/quick-filters-bridge",["jira/featureflags/simplified-ux-feature-manager"],function(i){function e(){return new Promise(function(i){return GH.bridge&&GH.bridge.FilterBridge?i(!0):r()?void a.then(function(){i(!0)}):i(!1)})}function r(){return!GH.gadget&&(i.isGlobalSidebarEnabled()||GH.RapidBoard.State.isAgilityBoard())}var n={},t=void 0,a=new Promise(function(i){t=i});return n.isReactFiltersEnabled=function(){return e()},n.onBridgeLoad=function(){t(!0)},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-IssueDialogUtil.js' */
define("jira-agile/dialog/issue-dialog-util",["jira/dialog/dialog-register","jquery"],function(e,s){return s.extend(e,{getDefaultAjaxOptions:function(){var e=JIRA.IssueNavigator.getSelectedIssueId(),s=this.options.url||this.$activeTrigger.attr("href")||this.$activeTrigger.data("url");if(/id=\{0\}/.test(s)){if(!e)return!1;s=s.replace(/(id=\{0\})/,"id="+e)}return{data:{decorator:"dialog",inline:"true"},url:s}},storeCurrentIssueIdOnSucessfulSubmit:function(){JIRA.IssueNavigator.setIssueUpdatedMsg({issueMsg:this.options.issueMsg,issueId:this.issueId,issueKey:this.issueKey}),this.issueId=null,this.issueKey=null,GH.IssueOperationShortcuts.clearOverrideSelectedIssue()}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/RapidBoard.soy' */
// This file was automatically generated from RapidBoard.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.board.x.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.board == 'undefined') { GH.tpl.board = {}; }
if (typeof GH.tpl.board.x == 'undefined') { GH.tpl.board.x = {}; }


GH.tpl.board.x.renderNoViewsAnonymous = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml('No boards are currently available.') + '</p><p><span class="aui-icon icon-generic"></span>' + soy.$$filterNoAutoescape(AJS.format('Boards may be visible if you {0}log in{1}.','<a href="' + opt_data.loginUrl + '">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderNoViewsAnonymous.soyTemplateName = 'GH.tpl.board.x.renderNoViewsAnonymous';
}


GH.tpl.board.x.renderNoViews = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml('No boards are currently available.') + '</p><p><span class="aui-icon icon-generic"></span>' + soy.$$filterNoAutoescape(AJS.format('{0}Create a new board{1}.','<a class="js-view-action-create">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderNoViews.soyTemplateName = 'GH.tpl.board.x.renderNoViews';
}


GH.tpl.board.x.renderRapidBoard = function(opt_data, opt_ignored) {
  return '<div id="ghx-header" class="' + soy.$$escapeHtml(GH.tpl.adg3Enabled ? 'contains-breadcrumbs' : '') + '">' + ((GH.tpl.adg3Enabled) ? JIRA.Templates.Headers.breadcrumbs(null) + '<div class="ghx-top-header"><div id="ghx-modes-tools"><span id="ghx-view-pluggable" /><div id="ghx-view-tools"></div></div><div id="ghx-view-selector"></div></div>' : '<div id="ghx-modes-tools"><span id="ghx-view-pluggable" /><div id="ghx-view-tools"></div></div><div id="ghx-view-selector"></div>') + '</div><div id="ghx-content-main" class="ghx-content-main"><div id="ghx-errors"></div><div id="ghx-rabid"><div id="ghx-operations"></div><div id="ghx-plan"></div><div id="ghx-report" class="ghx-chart"></div><div class="ghx-work-wrapper"><div id="ghx-work" class="ghx-work"></div></div></div></div><div class="ghx-throbber"></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderRapidBoard.soyTemplateName = 'GH.tpl.board.x.renderRapidBoard';
}


GH.tpl.board.x.renderSprintGoal = function(opt_data, opt_ignored) {
  return '' + ((opt_data.goal) ? '<div class="ghx-sprint-goal"><span title="' + soy.$$escapeHtml(opt_data.goal) + '">' + soy.$$escapeHtml(opt_data.goal) + '</span></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderSprintGoal.soyTemplateName = 'GH.tpl.board.x.renderSprintGoal';
}


GH.tpl.board.x.renderToolSections = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList36 = opt_data.sections;
  var sectionListLen36 = sectionList36.length;
  for (var sectionIndex36 = 0; sectionIndex36 < sectionListLen36; sectionIndex36++) {
    var sectionData36 = sectionList36[sectionIndex36];
    output += '<div class="ghx-view-section ' + soy.$$escapeHtml(sectionData36.cssClass) + '">' + ((sectionData36.id == 'board-tools-section') ? aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-more', iconText: sectionData36.label, extraClasses: 'ghx-actions-tools', id: sectionData36.id + '-button'}) : aui.buttons.button({text: sectionData36.label, extraClasses: 'ghx-actions-tools ghx-dropdown-trigger', id: sectionData36.id + '-button'})) + '<div class="aui-list" id="' + soy.$$escapeHtml(sectionData36.id) + '-content" style="display: none;"></div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderToolSections.soyTemplateName = 'GH.tpl.board.x.renderToolSections';
}


GH.tpl.board.x.renderSectionContent = function(opt_data, opt_ignored) {
  var output = '';
  var subItemList59 = opt_data.subItems;
  var subItemListLen59 = subItemList59.length;
  for (var subItemIndex59 = 0; subItemIndex59 < subItemListLen59; subItemIndex59++) {
    var subItemData59 = subItemList59[subItemIndex59];
    output += GH.tpl.board.x.renderSubItem({subItem: subItemData59, isFirst: subItemIndex59 == 0, isLast: subItemIndex59 == subItemListLen59 - 1});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderSectionContent.soyTemplateName = 'GH.tpl.board.x.renderSectionContent';
}


GH.tpl.board.x.renderSubItem = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.subItem.type == 'section') {
    output += '<ul id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" class="aui-list-section ' + soy.$$escapeHtml(opt_data.subItem.cssClass) + ' ' + ((opt_data.isFirst) ? ' aui-first' : '') + ((opt_data.isLast) ? ' aui-last' : '') + '">';
    var subItemList80 = opt_data.subItem.subItems;
    var subItemListLen80 = subItemList80.length;
    for (var subItemIndex80 = 0; subItemIndex80 < subItemListLen80; subItemIndex80++) {
      var subItemData80 = subItemList80[subItemIndex80];
      output += '<li class="aui-list-item">' + GH.tpl.board.x.renderSubItem({subItem: subItemData80, isFirst: subItemIndex80 == 0, isLast: subItemIndex80 == subItemListLen80 - 1}) + '</li>';
    }
    output += '</ul>';
  } else if (opt_data.subItem.type == 'webItem') {
    output += '<a role="button" href="' + soy.$$escapeHtml(opt_data.subItem.url) + '" ' + ((opt_data.subItem.id) ? 'id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" ' : '') + 'class="aui-list-item-link ' + soy.$$escapeHtml(opt_data.subItem.cssClass) + '">' + soy.$$escapeHtml(opt_data.subItem.label) + '</a>';
  } else if (opt_data.subItem.type == 'webPanel') {
    output += '<div ' + ((opt_data.subItem.id) ? 'id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" ' : '') + 'class="' + soy.$$escapeHtml(opt_data.subItem.cssClass) + '">' + soy.$$filterNoAutoescape(opt_data.subItem.html) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderSubItem.soyTemplateName = 'GH.tpl.board.x.renderSubItem';
}


GH.tpl.board.x.renderWelcomeProjectMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('You have created a Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,'/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectMessageKanban';
}


GH.tpl.board.x.renderWelcomeProjectMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('You have created a Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,'/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectMessageScrum';
}


GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('You have created a sample Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a sample project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,'/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban';
}


GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('You have created a sample Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a sample project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,'/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum';
}


GH.tpl.board.x.renderWelcomeViewMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeViewMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeViewMessageKanban';
}


GH.tpl.board.x.renderWelcomeViewMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeViewMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeViewMessageScrum';
}


GH.tpl.board.x.renderCreateViewMessage = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('View \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderCreateViewMessage.soyTemplateName = 'GH.tpl.board.x.renderCreateViewMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/state/RapidBoardUrlState.js' */
!function(){"use strict";var e=require("jira-agile/rapid/const/PageMode"),a=require("jira-agile/rapid/ui/SPConfig"),d=require("jira/featureflags/simplified-ux-feature-manager");GH.RapidBoardUrlState={},GH.RapidBoardUrlState.self="RapidBoardUrlState",GH.RapidBoardUrlState.isApplicable=function(e){return!0},GH.RapidBoardUrlState.getNormalizedFromUrl=function(i,t){t.rapidView=GH.RapidBoard.UrlState.normalizeNumberParam(i.rapidView),delete t.projectKey;var r=GH.RapidBoard.UrlState.normalizeStringParam(i.projectKey,null);if(null!==r&&(t.projectKey=r),GH.WorkController.isIssueModalPopupEnabled()&&GH.RapidBoard.State.getMode()===e.WORK){var o=GH.RapidBoard.UrlState.normalizeStringParam(i.modal,null);"detail"===o?t.issueModalOpened=!0:t.issueModalOpened=!1}var n=GH.RapidBoard.UrlState.normalizeStringParam(i[a.PARAM_NAME],null);null!==n&&(t.tab=n);var l=GH.RapidBoard.UrlState.normalizeStringParam(i.view,""),p=GH.RapidBoard.UrlState.normalizeBooleanParam(i.useStoredSettings,!1);if(!p||""!==l)switch(GH.RapidBoard.State.isLoadingKanPlanWhileItDisabled(l)&&(l="detail"),l){case"reporting":t.mode=e.REPORT,d.isAdg3ModeOn()&&(t.sprintSupportEnabled=GH.RapidBoard.State.isScrumBoard());break;case"planning":t.mode=e.PLAN,t.detailOpened=!0;break;case"planning.nodetail":t.mode=e.PLAN,t.detailOpened=!1;break;case"detail":t.mode=e.WORK,t.detailOpened=!0;break;case"":default:t.mode=e.WORK,t.detailOpened=!1}},GH.RapidBoardUrlState.toUrl=function(d,i){switch(_.isUndefined(d.rapidView)||(i.rapidView=d.rapidView),delete i.projectKey,_.isUndefined(d.projectKey)||(i.projectKey=d.projectKey),_.isUndefined(d.tab)||(i[a.PARAM_NAME]=d.tab),d.mode){case e.WORK:d.detailOpened&&(i.view="detail"),GH.WorkController.isIssueModalPopupEnabled()&&d.issueModalOpened&&(i.modal="detail");break;case e.REPORT:i.view="reporting";break;case e.PLAN:d.detailOpened?i.view="planning":i.view="planning.nodetail"}},GH.RapidBoardUrlState.getNormalizedFromInternal=function(a){a.rapidView=GH.RapidBoard.State.getRapidViewId(),a.mode=GH.RapidBoard.State.getMode(),delete a.projectKey;var i=GH.RapidBoard.State.getProjectKey();_.isUndefined(i)||(a.projectKey=i),a.mode===e.WORK?(a.detailOpened=GH.RapidBoard.State.isDetailsViewOpened(),GH.WorkController.isIssueModalPopupEnabled()&&(a.issueModalOpened=GH.RapidBoard.State.isIssueModalOpened())):a.mode===e.PLAN?a.detailOpened=GH.RapidBoard.State.isDetailsViewPlanOpened():a.mode===e.REPORT&&d.isAdg3ModeOn()&&(a.sprintSupportEnabled=GH.RapidBoard.State.isScrumBoard()),GH.RapidBoard.State.isConfigOpen()&&(a.tab=GH.RapidBoard.State.getSelectedConfigTab())},GH.RapidBoardUrlState.updateInternalFromNormalized=function(a){_.isUndefined(a.rapidView)||GH.RapidBoard.State.setRapidViewId(a.rapidView);var d=a.mode,i=a.detailOpened;if(_.isUndefined(d)||GH.RapidBoard.State.setMode(a.mode),GH.RapidBoard.State.setProjectKey(a.projectKey),_.isUndefined(i)||(d===e.PLAN?GH.PlanController.setDetailViewOpenedState(a.detailOpened):GH.WorkController.setDetailViewOpenedState(a.detailOpened)),GH.RapidBoard.State.setSelectedConfigTab(a.tab),GH.WorkController.isIssueModalPopupEnabled()){var t=a.issueModalOpened;d!==e.WORK||_.isUndefined(t)||GH.RapidBoard.State.setWorkIssueModalOpened(!!t)}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/VersionsModel.js' */
GH.VersionsModel=function(e){this.projects=e,this.fixVersions=void 0,this.canCreateVersion=!1},GH.VersionsModel.prototype.setProjects=function(e){this.projects=e},GH.VersionsModel.prototype.updateRawData=function(e){this.canCreateVersion=e.canCreateVersion,this.fixVersions=GH.VersionsModel.buildFixVersions(e,this.projects)},GH.VersionsModel.prototype.isValid=function(){return!!this.fixVersions},GH.VersionsModel.prototype.getVersions=function(){return this.fixVersions},GH.VersionsModel.prototype.getProjects=function(){return this.projects},GH.VersionsModel.prototype.canUserCreateVersion=function(){return this.canCreateVersion},GH.VersionsModel.prototype.getVersionsForIds=function(e){var r=_.chain(e).filter(function(e){return _.has(this.fixVersions,e)},this).map(function(e){return this.fixVersions[e]},this).value();return this.getFixVersionFromArray(r)},GH.VersionsModel.prototype.getUnreleasedVersionsForIds=function(e){var r=_.chain(e).filter(function(e){return _.has(this.fixVersions,e)},this).map(function(e){return this.fixVersions[e]},this).where({released:!1}).value();return this.getFixVersionFromArray(r)},GH.VersionsModel.prototype.getVersion=function(e){return _.has(this.fixVersions,e)?this.fixVersions[e]:null},GH.VersionsModel.prototype.getFixVersionFromArray=function(e){var r=_.sortBy(e,function(e){return e.sequence}),o={};return o.versions=r,o.formattedVersions=_.map(r,this.getToolTip).join(", "),o},GH.VersionsModel.prototype.getToolTip=function(e){return e.released?e.name+" (released)":e.name},GH.VersionsModel.prototype.sort=function(e,r){return e.project?e.project.key===r.project.key?e.sequence-r.sequence:e.project.key<r.project.key?-1:1:e.sequence-r.sequence},GH.VersionsModel.prototype.getUnreleasedVersionList=function(){return _.chain(_.toArray(this.fixVersions)).where({released:!1}).value().sort(this.sort)},GH.VersionsModel.prototype.getAllVersions=function(){return _.chain(_.toArray(this.fixVersions)).value().sort(this.sort)},GH.VersionsModel.prototype.containsId=function(e){return _.has(this.fixVersions,e)},GH.VersionsModel.prototype.isEmpty=function(){return _.isEmpty(this.fixVersions)},GH.VersionsModel.prototype.hasMultiProjects=function(){return this.projects.length>1},GH.VersionsModel.prototype.updateVersion=function(e){return!_.isUndefined(this.fixVersions[e.id])&&(this.fixVersions[e.id]=e,!0)},GH.VersionsModel.buildFixVersions=function(e,r){var o={};return _.each(e.versionsPerProject,function(e,s){s=parseInt(s,10),_.each(e,function(e){var t=_.findWhere(r,{id:s});void 0!==t&&(o[e.id]=_.clone(e),o[e.id].project=t)})}),o};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/VersionsDataService.js' */
!function(e,n){function r(){}var i=require("jira-agile/rapid/ajax");r.prototype={getVersionsModel:function(n){return i.get({url:"/xboard/plan/backlog/versions.json",data:{rapidViewId:n}},"versionsList").andThen(function(n){var r=new e(n.projects);return r.updateRawData(n.versionData),r})},getSimpleVersions:function(e){return this.getVersionsModel(e).andThen(function(e){return n.map(e.getAllVersions(),function(e){return{id:e.id,name:e.project?e.project.key+": "+e.name:e.name}})})},versionExists:function(e,r){return n.some(e,function(e){return e.id===r})}},GH.VersionsDataService=r,GH.versionsDataService=new r}(GH.VersionsModel,_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/SprintsDataService.js' */
!function(r){function t(){}var n=require("jira-agile/rapid/ajax");t.prototype={getSimpleSprints:function(r){return n.get({url:"/sprintquery/"+r,data:{includeFutureSprints:!1}},"getSimpleSprints").andThen(function(r){return r.sprints})}},GH.SprintsDataService=t,GH.sprintsDataService=new t}(_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/EpicsDataService.js' */
!function(e){"use strict";function n(){}var t=null,i=require("jira-agile/rapid/ajax");n.prototype={getEpics:function(e){return i.get({url:"/xboard/plan/backlog/epics.json",data:{rapidViewId:e}},"epicsList").andThen(function(e){return t=e.supportsPages,e.epics})},getSimpleEpics:function(n){return this.getEpics(n).andThen(function(n){return e.map(n,function(e){return{id:e.key,name:e.epicLabel?e.key+": "+e.epicLabel:"unlabelled"+"-"+e.key,linkedPagesCount:e.linkedPagesCount}})})},epicExists:function(n,t){return e.some(n,function(e){return e.id===t})},supportsPages:function(){if(null===t)throw"epic data has not been loaded yet";return t}},GH.EpicsDataService=n,GH.epicsDataService=new n}(_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/BoardDataLoader.js' */
define("jira-agile/rapid/board-data-loader",["require"],function(){"use strict";var e=this,a=require("jira-agile/rapid/const/PageMode"),r=require("wrm/data"),t="work-all-data",i="plan-all-data",n={};return n.loadData=function(a,t){if(GH.RapidBoard.State.isFirstLoad()&&!GH.gadget){var i=n.getModeKey(a),o=AJS.$.Deferred(),d=function(){t().done(function(a){o.resolveWith(e,[a])}).fail(function(a){o.rejectWith(e,[a])})};return r.claim(i,function(a){a?o.resolveWith(e,[a]):d()},d),GH.RapidBoard.State.changeFirstLoadState(),setTimeout(function(){performance.getEntriesByName&&performance.getEntriesByName("bigPipe.ghx-page-load-big-pipe.error").length>0&&d()},0),o.promise()}return t()},n.getModeKey=function(e){return e===a.WORK?t:i},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/configuration/DeleteRapidViewDialog.js' */
GH.RapidBoard.DeleteDialog={},GH.RapidBoard.DeleteDialog.showDeleteDialog=function(e,a,i,t,d){GH.RapidBoard.DeleteDialog.AnalyticsClient=require("jira/analytics/web-client");var r=GH.Dialog.create({width:500,height:150,id:"ghx-rapidview-delete"}),l="true"===t?"Agility":"true"===i?"Scrum":"Kanban";r.addPanel("","panel"),r.addButton("Delete",function(){r.disableControls(),r.dispose(),GH.RapidBoard.DeleteDialog["delete"](e,a,l,d)},"aui-button aui-button-primary"),GH.Dialog.addCancelButton(r);var n="Delete board",o=GH.tpl.deleterapidviewdialog.renderDefault(),p="Cannot delete board";"true"===i?(r.show(),GH.RapidBoard.DeleteDialog.showSpinner(r),GH.RapidBoard.DeleteDialog.getAllSprints(e).done(function(a){var i=a.values.filter(function(e){return"active"===e.state});if(i.length>0){var t=GH.tpl.deleterapidviewdialog.renderActiveSprints({activeSprints:i,rapidViewId:e});GH.RapidBoard.DeleteDialog.render(r,p,t,!0)}else GH.RapidBoard.DeleteDialog.render(r,n,o,!1)}).fail(function(){GH.RapidBoard.DeleteDialog.hideSpinner(r),GH.RapidBoard.DeleteDialog.render(r,p,null,!0)})):(GH.RapidBoard.DeleteDialog.render(r,n,o,!1),r.show()),AJS.$("#"+r.id).find(".dialog-button-panel .button-panel-cancel-link").focus(),GH.RapidBoard.DeleteDialog.AnalyticsClient.sendScreenEvent("deleteBoardModal",null,{boardType:l})},GH.RapidBoard.DeleteDialog["delete"]=function(e,a,i,t){GH.Ajax.del({url:"/rapidview/"+e}).done(function(d){GH.RapidBoard.DeleteDialog.handleSuccess(e,a,i,t)})},GH.RapidBoard.DeleteDialog.handleSuccess=function(e,a,i,t){AJS.$(GH).trigger("ghx.rapidview.deleted",{rapidViewId:e,rapidViewName:a,message:AJS.format("Successfully deleted board \u003cstrong\u003e{0}\u003c/strong\u003e",AJS.escapeHTML(String(a)))});var d={objectType:"board",objectId:e,attributes:{boardId:e,boardType:i},action:"deleted",actionSubject:"board",actionSubjectId:e,source:"deleteBoardModal"};t&&(d.containerType=t),GH.RapidBoard.DeleteDialog.AnalyticsClient.sendTrackEvent(d)},GH.RapidBoard.DeleteDialog.getAllSprints=function(e){return GH.Ajax.get({bareUrl:GH.Ajax.buildPublicRestUrl("/board/"+e+"/sprint")},"getAllSprintsForBoard")},GH.RapidBoard.DeleteDialog.showSpinner=function(e){e.getCurrentPanel().html(GH.tpl.deleterapidviewdialog.renderSpinner())},GH.RapidBoard.DeleteDialog.hideSpinner=function(e){e.getCurrentPanel().body.find(".ghx-spinner").hide()},GH.RapidBoard.DeleteDialog.render=function(e,a,i,t){e.addHeader(a),i&&(e.getCurrentPanel().html(i),e.updateHeight()),t&&e.disableControls()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/configuration/DeleteRapidViewDialog.soy' */
// This file was automatically generated from DeleteRapidViewDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.deleterapidviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.deleterapidviewdialog == 'undefined') { GH.tpl.deleterapidviewdialog = {}; }


GH.tpl.deleterapidviewdialog.renderDefault = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Are you sure you want to delete this board? You\x27ll have to recreate it if you change your mind.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.deleterapidviewdialog.renderDefault.soyTemplateName = 'GH.tpl.deleterapidviewdialog.renderDefault';
}


GH.tpl.deleterapidviewdialog.renderActiveSprints = function(opt_data, opt_ignored) {
  var output = '<p>' + soy.$$escapeHtml(AJS.format('This board contains {0,choice,1#an|1\x3c} active {0,choice,1#sprint|1\x3csprints}:',opt_data.activeSprints.length)) + '</p><ul class="delete-rapid-view-active-sprints">';
  var sprintList10 = opt_data.activeSprints;
  var sprintListLen10 = sprintList10.length;
  for (var sprintIndex10 = 0; sprintIndex10 < sprintListLen10; sprintIndex10++) {
    var sprintData10 = sprintList10[sprintIndex10];
    output += '<li><a href="' + soy.$$escapeHtml("") + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&sprint=' + soy.$$escapeHtml(sprintData10.id) + '" target="_blank">' + soy.$$escapeHtml(sprintData10.name) + '</a></li>';
  }
  output += '</ul><p>' + soy.$$escapeHtml(AJS.format('Close or delete the {0,choice,1#sprint|1\x3csprints} first, so you don\x27\x27t lose any work.',opt_data.activeSprints.length)) + '</p><p><em>' + soy.$$escapeHtml('Need guidance? See') + ' <a href="https://confluence.atlassian.com/jirasoftwarecloud/running-sprints-in-a-scrum-project-764478111.html">Running sprints in a scrum project</a>.</em></p>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.deleterapidviewdialog.renderActiveSprints.soyTemplateName = 'GH.tpl.deleterapidviewdialog.renderActiveSprints';
}


GH.tpl.deleterapidviewdialog.renderSpinner = function(opt_data, opt_ignored) {
  return '<div id="ghx-spinner-wrapper"><div class="ghx-spinner"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.deleterapidviewdialog.renderSpinner.soyTemplateName = 'GH.tpl.deleterapidviewdialog.renderSpinner';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/OnboardingPlaceholders.js' */
GH.planOnboarding={renderOnboarding:function(){},refresh:function(){},hide:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/ADG3SoyTemplateFlag.js' */
!function(){var e=require("jira/featureflags/simplified-ux-feature-manager");GH.tpl||(GH.tpl={}),GH.tpl.adg3Enabled=e.isAdg3StylesEnabled()}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/configuration/SPConfigController.js' */
define("jira-agile/rapid/ui/SPConfigController",["jira-agile/rapid/ui/SPConfigView","jira-agile/rapid/configuration/ConfigContextLoader","jira/featureflags/simplified-ux-feature-manager","jira/featureflags/feature-manager","jira-agile/features/feature-flags"],function(a,e,i,o,n){var r=!1,t={};return t.init=function(o){r=!1,a.prepareConfigView(o),e.getContext().then(function(){GH.RapidBoard.Config.init(),GH.RapidBoard.Config.Columns.on(GH.RapidBoard.Config.Columns.BACKLOG_COLUMN_STATUS_UPDATE,function(){i.isGlobalSidebarEnabled()?GH.RapidBoard.ViewController.sidebarController.updateSidebar(o.id):r=!0},"full-page-load-handler"),GH.RapidBoard.Config.events.on(GH.RapidBoard.Config.LOCATION_CHANGED,function(){r=!0},"full-page-load-handler")})},t.isOpen=function(){return a.isOpen()},t.openConfig=function(a){a&&GH.RapidBoard.State.setStoredSelectedConfigTab(a),GH.RapidBoard.State.openConfig(),GH.RapidBoard.State.pushState(),GH.RapidBoard.reload()},t.closeConfig=function(e){r?t.fullPageBackToBoard():(a.disposeConfigView(),GH.RapidBoard.State.closeConfig(),GH.RapidBoard.State.pushState())},t.fullPageBackToBoard=function(){var a=GH.RapidBoard.State.getRapidViewId(),e=AJS.contextPath()+"/secure/RapidBoard.jspa?rapidView="+a+"&useStoredSettings=true";window.location.href=e},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/configuration/SPConfigView.js' */
define("jira-agile/rapid/ui/SPConfigView",["jquery","jira/atlaskit/breadcrumbs"],function(e,r){var i={};return i.renderSpinner=function(){var r=e("<div></div>").addClass("ghx-throbber");e("#ghx-content-main").append(r),setTimeout(function(){return r.spin("large")},1e3)},i.prepareConfigView=function(r){e("#ghx-rabid").empty(),this.renderTitle({model:r,isLoading:!0}),this.renderSpinner()},i.disposeConfigView=function(){e("body").removeClass("ghx-board-configure"),e("#gh").html(GH.tpl.board.x.renderRapidBoard()),e("#ghx-operations").append(GH.tpl.viewcontroller.renderOperationsBar())},i.isOpen=function(){return e("body").hasClass("ghx-board-configure")},i.renderTitle=function(e){var i=e.model,n=e.isLoading;AJS.$("#ghx-header").html(GH.tpl.rapid.view.renderConfigurationHeader({name:i.name,rapidViewId:i.id})),r.isEnabled()&&r.render();var a=function(e){AJS.trigger("analyticsEvent",{name:"gh.config.back.to.board"}),n||(e.preventDefault(),GH.RapidBoard.ViewController.setMode(GH.RapidBoard.State.getMode()))};AJS.$("#back-to-board").off("click",a),AJS.$("#back-to-board").on("click",a)},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReleaseExistingVersionDialog.js' */
define("jira-agile/rapid/ui/dialog/release-existing-version-dialog",["jquery","underscore","jira/projects/release/version-adapter","jira/projects/release/submit-model","jira-project-config/utils","jira-agile/rapid/ajax","jira/analytics/web-client"],function(e,s,i,o,n,a,r){"use strict";function t(e){var s=l.get(e);return s&&s.get("project")&&s.get("project").name}var l,g=JIRA.Admin.Version.ReleaseForm,d=GH.Notification,u=Backbone.Collection.extend({model:o}),c={};c.init=function(){var e=GH.VersionController.getVersionModel(),i=e.getAllVersions();AJS.params.dateFormat=GH.TimeFormat.dateFormat,l=new u,s.each(i,function(e){var s=new o(e);l.add(s)})},c.show=function(e){a.get({url:"/release/existingVersionModel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),versionId:e}}).done(function(s){s.hasIssueOutOfScope?c.showGoToReleaseHubDialog(e,"This version has issues that are not included in the board. We recommend using the Release Hub instead."):s.hasIssueWithComplexMapping?c.showGoToReleaseHubDialog(e,"This version has issues with potential problems. We recommend using the Release Hub instead."):(c.showReleaseExistingDialog(e,s),r.sendPageEvent("releaseExistingVersionModal"))})},c.showReleaseExistingDialog=function(o,a){var r=this;GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start.existing");var d,u=function(s){if(s.moveUnfixedIssuesTo){var i=v(s.moveUnfixedIssuesTo);f(AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e released. The unresolved {1,choice,1#issue|1\u003cissues} are now in \u003cstrong\u003e{2}\u003c/strong\u003e.",d.versionName,d.issueCount,i))}else f("Version released");e(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete.existing")},c=function(e){s.isEmpty(e.errorMessages)||(d.hide(),m(d.versionName))},p=new i(l.get(o));p.on(i.RELEASE_SUCCESS_EVENT,u),p.on(i.RELEASE_ERROR_EVENT,c),d=n.openDialogForRow(g,p,"version-release-dialog"),d.onContentReady(h.bind(d,a.hasIssueInAnotherUnreleasedVersion,t(o))),e(d).on("Dialog.hide",function(){r.cancelled&&GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel.existing")})},c.showGoToReleaseHubDialog=function(e,s){var i=GH.Dialog.create({width:400,height:200,analyticsPageName:"releaseHubRedirectModal"}),o=GH.VersionController.getVersionModel(),n=o.getVersion(e);i.addHeader(AJS.format("Release version: {0}",n.name)),i.addPanel("","panel"),i.getCurrentPanel().html(s),i.addButton("Go to Release Hub",function(){window.location.href=a.CONTEXT_PATH+"/projects/"+n.project.key+"/versions/"+e}),GH.Dialog.addCancelButton(i),i.show()};var v=function(e){var s=l.get(e);return s&&s.get("name")},m=function(e){var s={};s.message=AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e can\'\'t be released at this time. Please refresh your browser and try again.",e),d.showErrors({errors:[s]})},f=function(e){d.showSuccess(e)},h=function(s,i){this.issuesCount=this.$form.find('input[name="issues-count"]').attr("value"),this.versionName=this.$form.find('input[name="version-name"]').attr("value");var o=this.$form.find("#project-config-version-release-form-unresolved-ignore-paragraph");o&&o.before(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial({issuesCount:this.issuesCount,versionName:this.versionName})));var n=this.$form.find("#project-config-version-release-form-unresolved-ignore-label");n.length&&(s?(e("#project-config-version-release-form-unresolved-message").after(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible())),n.append(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues({issuesCount:this.issuesCount,versionName:this.versionName})))):n.append(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues({versionName:this.versionName}))));var a=this.$form.find("#project-config-version-release-form-all-issues-resolved strong");a.length&&"undefined"===a.text()&&a.text(i)};return c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReleaseExistingVersionDialog.soy' */
// This file was automatically generated from ReleaseExistingVersionDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.ReleaseExistingVersionDialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.ReleaseExistingVersionDialog == 'undefined') { GH.tpl.dialogs.ReleaseExistingVersionDialog = {}; }


GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('{0,choice,1#This issue|1\x3cThese issues} will no longer be visible on your board if you release \x3cstrong\x3e{1}\x3c/strong\x3e.',typeof (opt_data.issuesCount) === 'number' ? opt_data.issuesCount : soy.$$escapeHtml(opt_data.issuesCount),typeof (opt_data.versionName) === 'number' ? opt_data.versionName : soy.$$escapeHtml(opt_data.versionName)))) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial.soyTemplateName = 'GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial';
}


GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Note that any issues in other unreleased versions will still be visible on your board.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible.soyTemplateName = 'GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible';
}


GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues = function(opt_data, opt_ignored) {
  return '<div class="description">' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Releasing \x3cstrong\x3e{0}\x3c/strong\x3e may remove {1,choice,1#this issue|1\x3cthese issues} from your board.',typeof (opt_data.versionName) === 'number' ? opt_data.versionName : soy.$$escapeHtml(opt_data.versionName),typeof (opt_data.issuesCount) === 'number' ? opt_data.issuesCount : soy.$$escapeHtml(opt_data.issuesCount)))) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues.soyTemplateName = 'GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues';
}


GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues = function(opt_data, opt_ignored) {
  return '<div class="description">' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Releasing \x3cstrong\x3e{0}\x3c/strong\x3e will remove these issues from your board.',typeof (opt_data.versionName) === 'number' ? opt_data.versionName : soy.$$escapeHtml(opt_data.versionName)))) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues.soyTemplateName = 'GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/QuickEdit.js' */
GH.RapidBoard.QuickEdit={},GH.RapidBoard.QuickEdit.fieldChanges={},GH.RapidBoard.QuickEdit.init=function(){AJS.$(AJS).unbind("QuickEdit.sessionComplete"),AJS.$(AJS).bind("QuickEdit.sessionComplete",function(){JIRA&&JIRA.IssueNavigator&&JIRA.IssueNavigator.setIssueUpdatedMsg&&JIRA.IssueNavigator.setIssueUpdatedMsg(),GH.Notification.showIssueMessage(),GH.RapidBoard.State.isDetailsViewPlanOpened()&&AJS.$("#ghx-issue-fragment").trigger("refresh-backlog-issue",{issueKey:GH.DetailsView.getSelectedIssueKey()}),AJS.$(GH).trigger("issueUpdated",{issueId:GH.IssueOperationShortcuts.getSelectedIssueId(),source:"quickEdit",fieldChanges:GH.RapidBoard.QuickEdit.fieldChanges}),GH.RapidBoard.QuickEdit.fieldChanges={},GH.IssueOperationShortcuts.clearOverrideSelectedIssue()}),JIRA.bind("Dialog.hide",function(e,i,s){"edit-issue-dialog"!==i.attr("id")||s!==JIRA.Dialog.HIDE_REASON.cancel&&s!==JIRA.Dialog.HIDE_REASON.escape||(GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),GH.RapidBoard.QuickEdit.fieldChanges={})}),AJS.$(GH).bind("QuickEdit.fieldChange",function(e,i){GH.RapidBoard.QuickEdit.fieldChanges[i.fieldId]=i.fieldChangeData}),JIRA&&JIRA.Dialog&&JIRA.Dialog.shouldShowIssueKeyInTitle&&(JIRA.Dialog.shouldShowIssueKeyInTitle=function(){return!0})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/QuickCreate.js' */
GH.RapidBoard.QuickCreate={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.QuickCreate.analytics=new e("gh.quickcreate")}(),GH.RapidBoard.QuickCreate.init=function(){function e(e){return function(s,i){AJS.$(GH).trigger("issueCreated",{issues:i,isSubtask:e});var t=_.pluck(i,"issueKey");GH.RapidBoard.QuickCreate.analytics.trigger("create",t)}}JIRA.unbind("QuickCreateIssue.sessionComplete"),JIRA.bind("QuickCreateIssue.sessionComplete",e(!1)),JIRA.unbind("QuickCreateSubtask.sessionComplete"),JIRA.bind("QuickCreateSubtask.sessionComplete",e(!0)),JIRA.unbind("QuickCreateEpic.sessionComplete"),JIRA.bind("QuickCreateEpic.sessionComplete",e(!1))},GH.RapidBoard.QuickCreate.showCreatedIssuesMessage=function(e,s){var i=GH.EpicConfig.getEpicIssueTypeId(),t=GH.SprintConfig.getSprintFieldId(),a={issues:e.issues,isSubtask:!!e.isSubtask,isRankable:GH.BacklogModel.isRankable()||GH.RankingModel.isRankable()};if(s){var u=_.filter(e.issues,function(e){return e.createdIssueDetails&&e.createdIssueDetails.fields.issuetype.id!==i}),r=!_.find(e.issues,function(e){return!(!e.createdIssueDetails||!e.createdIssueDetails.fields[t])&&e.createdIssueDetails.fields[t].length>0});a=_.extend(a,{isWorkMode:!0,issuesExcludingEpics:u,shouldShowAddToSprints:r},s)}GH.Notification.showSuccess(GH.tpl.quickcreate.renderFilteredIssuesSuccess(a),{timeout:1e4})},GH.RapidBoard.QuickCreate.showSubtaskCreatedMessage=function(e){GH.Notification.showSuccess(GH.tpl.quickcreate.renderSubtasksAddedMessage({issues:e.issues}),{timeout:1e4})},GH.RapidBoard.QuickCreate.showCreatedEpicsMessage=function(e,s){GH.Notification.showSuccess(GH.tpl.quickcreate.renderEpicsAddedMessage({isVisible:s,epics:e.issues}),{timeout:1e4})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/QuickCreate.soy' */
// This file was automatically generated from QuickCreate.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.quickcreate.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.quickcreate == 'undefined') { GH.tpl.quickcreate = {}; }


GH.tpl.quickcreate.renderFilteredIssuesSuccess = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy3 = '' + GH.tpl.quickcreate.issueLinksHtml(opt_data);
  var sprintHtml__soy6 = '' + ((opt_data.issuesMatch && opt_data.canManageSprints && opt_data.issuesExcludingEpics.length > 0 && opt_data.isRankable) ? GH.tpl.quickcreate.sprintHtml({sprints: opt_data.sprints, issues: opt_data.issuesExcludingEpics}) : '');
  output += (opt_data.isSubtask) ? soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#sub-task {1} has|1\x3csub-tasks {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy3)) : (opt_data.isWorkMode) ? soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#issue {1} has|1\x3cissues {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy3)) + ((opt_data.shouldShowAddToSprints) ? ' ' + soy.$$filterNoAutoescape(sprintHtml__soy6) : '') : soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#issue {1} has|1\x3cissues {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy3));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderFilteredIssuesSuccess.soyTemplateName = 'GH.tpl.quickcreate.renderFilteredIssuesSuccess';
}


GH.tpl.quickcreate.issueLinksHtml = function(opt_data, opt_ignored) {
  var output = '';
  var issueList28 = opt_data.issues;
  var issueListLen28 = issueList28.length;
  for (var issueIndex28 = 0; issueIndex28 < issueListLen28; issueIndex28++) {
    var issueData28 = issueList28[issueIndex28];
    output += '<a class="js-issue-link" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData28.issueKey) + '">' + soy.$$escapeHtml(issueData28.issueKey) + '</a>' + ((! (issueIndex28 == issueListLen28 - 1)) ? ', ' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.issueLinksHtml.soyTemplateName = 'GH.tpl.quickcreate.issueLinksHtml';
}


GH.tpl.quickcreate.issueKeysAttribute = function(opt_data, opt_ignored) {
  var output = '';
  var issueList41 = opt_data.issues;
  var issueListLen41 = issueList41.length;
  for (var issueIndex41 = 0; issueIndex41 < issueListLen41; issueIndex41++) {
    var issueData41 = issueList41[issueIndex41];
    output += soy.$$escapeHtml(issueData41.issueKey) + ((! (issueIndex41 == issueListLen41 - 1)) ? ',' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.issueKeysAttribute.soyTemplateName = 'GH.tpl.quickcreate.issueKeysAttribute';
}


GH.tpl.quickcreate.sprintHtml = function(opt_data, opt_ignored) {
  var output = '';
  var issueKeys__soy48 = '' + GH.tpl.quickcreate.issueKeysAttribute(opt_data);
  if (issueKeys__soy48.length > 0) {
    var sprintList53 = opt_data.sprints;
    var sprintListLen53 = sprintList53.length;
    for (var sprintIndex53 = 0; sprintIndex53 < sprintListLen53; sprintIndex53++) {
      var sprintData53 = sprintList53[sprintIndex53];
      output += '<a class="js-add-new-issue-to-sprint" data-issue-keys="' + soy.$$escapeHtml(issueKeys__soy48) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData53.id) + '">' + soy.$$escapeHtml(AJS.format('Add {0,choice,1# |1\x3call} to {1}',opt_data.issues.length,sprintData53.name)) + '</a> ' + ((! (sprintIndex53 == sprintListLen53 - 1)) ? '| ' : '');
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.sprintHtml.soyTemplateName = 'GH.tpl.quickcreate.sprintHtml';
}


GH.tpl.quickcreate.renderSubtasksAddedMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy66 = '' + GH.tpl.quickcreate.issueLinksHtml(opt_data);
  output += soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#sub-task {1} has|1\x3csub-tasks {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy66));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderSubtasksAddedMessage.soyTemplateName = 'GH.tpl.quickcreate.renderSubtasksAddedMessage';
}


GH.tpl.quickcreate.renderEpicsAddedMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy72 = '' + GH.tpl.quickcreate.issueLinksHtml({issues: opt_data.epics});
  output += (opt_data.isVisible) ? soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#epic {1} has|1\x3cepics {1} have} been created.',opt_data.epics.length,issueLinksHtml__soy72)) : soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#epic {1} has|1\x3cepics {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.epics.length,issueLinksHtml__soy72));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderEpicsAddedMessage.soyTemplateName = 'GH.tpl.quickcreate.renderEpicsAddedMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SwimlaneStalker.js' */
!function(){GH.SwimlaneStalker={};var e=400;GH.SwimlaneStalker.poolStalker=function(){var e=AJS.$("#ghx-column-header-group");if(e.length>0){var r=AJS.$("#ghx-pool"),a=t(e);r.css({"padding-top":a});var n=l(r,e,a);r.off("scroll.swimlaneStalker").on("scroll.swimlaneStalker",n),n(o)}};var o="positionImmediately",t=function(e){var o=AJS.$("#ghx-swimlane-header-stalker"),t=e.outerHeight();return o.is(":visible")?t-o.outerHeight():t};GH.SwimlaneStalker.repositionColumnHeaders=function(){var e=AJS.$("#ghx-pool"),r=AJS.$("#ghx-column-header-group"),a=t(r),n=l(e,r,a);n(o)};var l=function(e,t,l){var s=AJS.$("#ghx-swimlane-header-stalker"),c=AJS.$(".ghx-swimlane-header"),h=e.find(".ghx-columns");return function(u){u===o?(r(t,e),n(t,e,h),a(t,e)):(i(t,e,h),a(t,e));var d=e.scrollTop();if(0===d)return void s.hide();if(s.show(),s.trigger("test.show.swimlane.stalker"),c.length){var p=void 0;if(_.each(c,function(e){return e=AJS.$(e),e.position().top<=l&&void(p=e)}),p){var f=p.clone(),g=p.parent();s.toggleClass("ghx-closed",g.hasClass("ghx-closed")),s.empty().append(f)}}}};GH.SwimlaneStalker._createPoolScrollHandler=l;var r=function(e,o){e.css({position:"absolute",top:o.scrollTop()+"px",left:0,width:"auto"})},a=_.debounce(r,e),n=function(e,o,t){var l=t.width(),r=o.offset();e.css({position:"fixed",top:r.top,left:r.left,width:l})},i=_.debounce(n,e,!0)}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/ActiveSprintEmptyView.js' */
define("jira-agile/rapid/ui/work/ActiveSprintEmptyView",["jquery","quick-edit/init/create","jira-agile/rapid/ui/SPConfigController"],function(i,e,t){"use strict";function n(e,t,n,r,d,f){var v,E,w;d?(E=GH.RapidBoard.getRapidViewConfigurationUrl(n,"filter"),v=GH.tpl.rapid.activesprintemptyview.tooManyIssues):r?(E=GH.RapidBoard.getRapidViewConfigurationUrl(n,"columns"),v=GH.tpl.rapid.activesprintemptyview.noMappedColumns):e?(E=AJS.format(o,n),v=GH.tpl.rapid.activesprintemptyview.noActiveSprint,w=p):t?(E=AJS.format(a,n),v=GH.tpl.rapid.activesprintemptyview.clearAllFilters,w=l):(E=AJS.format(s,n),v=GH.tpl.rapid.activesprintemptyview.noIssue,w=u),this.linkAddr=E,this.view=i(v({linkAddr:E,boardSettingClass:"board-settings-link"})),this.secondLineView=this.view.find("p"),this.ctaLink=this.secondLineView.find("a:not(.board-settings-link)").click(w),this.rapidViewId=n,this.secondLineView.find("a.board-settings-link").click(c.bind(this)),this.ctaLinkHandler=w,GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,this._reloadView,this),i(f).append(this.view)}var r=AJS.contextPath(),o=r+"/secure/RapidBoard.jspa?rapidView={0}&view=planning.nodetail",a=r+"/secure/RapidBoard.jspa?rapidView={0}",s=r+"/secure/CreateIssue!default.jspa",d={HIDDEN:"hidden",DASHBOARD_MODE:"dashboard-mode",NO_MAPPED_COLUMNS_MODE:"no-mapped-columns-mode"},p=function(i){i.preventDefault(),GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_PLAN_MODE)},l=function(i){i.preventDefault(),GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_ALL_FILTERS_CLEARING)},c=function(i){i.preventDefault(),t.openConfig("columns")},u=function(i){i.preventDefault(),e.initIssueDialog({target:i.target})};return n.prototype.handleOnDashboardMode=function(){this.view.addClass(d.DASHBOARD_MODE)},n.prototype.handleNoMappedColumnsMode=function(){this.view.addClass(d.NO_MAPPED_COLUMNS_MODE)},n.prototype._reloadView=function(i){i&&this.secondLineView.removeClass(d.HIDDEN)},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/ActiveSprintEmptyView.soy' */
// This file was automatically generated from ActiveSprintEmptyView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.activesprintemptyview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.activesprintemptyview == 'undefined') { GH.tpl.rapid.activesprintemptyview = {}; }


GH.tpl.rapid.activesprintemptyview.noMappedColumns = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: 'Statuses are not mapped to the board columns', contentHtml: AJS.format('Check the \x3ca href\x3d\x22{0}\x22 class\x3d\x22{1}\x22\x3eboard settings\x3c/a\x3e',opt_data.linkAddr,opt_data.boardSettingClass)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noMappedColumns.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noMappedColumns';
}


GH.tpl.rapid.activesprintemptyview.tooManyIssues = function(opt_data, opt_ignored) {
  return '<div class="ghx-no-active-sprint-message"><div class="ghx-no-active-sprint-content ghx-too-many-issues"><div class="ghx-issue-limit-exceeded-icon"></div><h3>' + soy.$$escapeHtml('Too many issues are trying to load') + '</h3><p class="hidden">' + soy.$$escapeHtml('It will take you eons to scroll through mountains of issues.') + ' <a href="' + soy.$$escapeHtml(opt_data.linkAddr) + '" class="' + soy.$$escapeHtml(opt_data.boardSettingClass) + '">' + soy.$$escapeHtml('Update board filter') + '</a></p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.tooManyIssues.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.tooManyIssues';
}


GH.tpl.rapid.activesprintemptyview.noActiveSprint = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: 'There are no active sprints', contentHtml: AJS.format('Start sprints in the \x3ca href\x3d\x22{0}\x22\x3eBacklog\x3c/a\x3e',opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noActiveSprint.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noActiveSprint';
}


GH.tpl.rapid.activesprintemptyview.clearAllFilters = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: 'Issues are currently filtered', contentHtml: AJS.format('\x3ca href\x3d\x22{0}\x22\x3eClear all filters\x3c/a\x3e',opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.clearAllFilters.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.clearAllFilters';
}


GH.tpl.rapid.activesprintemptyview.noIssue = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: 'No issues here', contentHtml: AJS.format('\x3ca href\x3d\x22{0}\x22\x3eCreate an issue\x3c/a\x3e or check the \x3ca class\x3d\x22{1}\x22\x3eboard settings\x3c/a\x3e',opt_data.linkAddr,opt_data.boardSettingClass)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noIssue.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noIssue';
}


GH.tpl.rapid.activesprintemptyview.emptyMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-no-active-sprint-message"><div class="ghx-no-active-sprint-content"><div class="ghx-no-active-sprint-icon"></div><h3>' + soy.$$escapeHtml(opt_data.heading) + '</h3><p class="hidden">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.emptyMessage.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.emptyMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SwimlaneView.js' */
var _slicedToArray=function(){function e(e,a){var i=[],n=!0,t=!1,l=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(i.push(r.value),!a||i.length!==a);n=!0);}catch(o){t=!0,l=o}finally{try{!n&&s["return"]&&s["return"]()}finally{if(t)throw l}}return i}return function(a,i){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return e(a,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){"use strict";var e=require("jira-agile/rapid/ui/dialog/release-existing-version-dialog"),a=require("jira/featureflags/simplified-ux-feature-manager"),i=require("jira-agile/tooltip");GH.SwimlaneView={},GH.SwimlaneView.visible=!1,GH.SwimlaneView.detailViewColumnId=!1,GH.SwimlaneView.rapidViewData={},GH.SwimlaneView.NARROW_CARD_WIDTH=200,GH.SwimlaneView.XTRA_NARROW_CARD_WIDTH=150,GH.SwimlaneView.init=function(){AJS.$(document).on("click keydown","#ghx-pool .ghx-swimlane .ghx-swimlane-header .js-expander",GH.SwimlaneView.toggleCollapsedHandler),AJS.$(document).on("click","#ghx-swimlane-header-stalker .ghx-swimlane-header .js-expander",GH.SwimlaneView.floatingDockToggleCollapsedHandler),AJS.$(document).on("click",".js-view-action-expand-all",function(e){GH.SwimlaneView.expandAll(e),AJS.trigger("analyticsEvent",{name:"jira-software."+(GH.RapidBoard.State.getMode()||"board")+".boardmenu.click.expand-all-swimlanes"})}),AJS.$(document).on("click",".js-view-action-collapse-all",function(e){GH.SwimlaneView.collapseAll(e),AJS.trigger("analyticsEvent",{name:"jira-software."+(GH.RapidBoard.State.getMode()||"board")+".boardmenu.click.collapse-all-swimlanes"})}),AJS.$(GH).bind(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED,function(){GH.WorkDataLoader.clearEtag(),GH.WorkController.reload()}),AJS.$(document).on("click","button.js-sync",function(){GH.WorkController.analytics.trigger("movetodonebutton.clicked");var e=AJS.$(this).closest(".ghx-swimlane-header").attr("data-issue-key"),a=GH.GridDataController.getModel().getIssueDataByKey(e);GH.WorkController.resolveParentTask(a)})},GH.SwimlaneView.show=function(){GH.SwimlaneView.visible=!0,GH.SwimlaneView.renderSwimlanes()},GH.SwimlaneView.hide=function(){GH.SwimlaneView.visible=!1},GH.SwimlaneView.setRapidView=function(e){GH.SwimlaneView.rapidViewData=e},GH.SwimlaneView.setRapidViewConfig=function(e){GH.SwimlaneView.rapidViewConfig=e},GH.SwimlaneView.renderSwimlanes=function(){var e=AJS.$("#ghx-pool");if(!(e.length<1)){GH.SwimlaneStalker.poolStalker(),e.hide();var n=GH.GridDataController.getModel(),t=n.hasSwimlanes();t?e.addClass("ghx-has-swimlanes"):e.removeClass("ghx-has-swimlanes");var l=n.isParentChildStrategy();l?e.addClass("ghx-parent-child"):e.removeClass("ghx-parent-child");var r=n.getColumns(),s=[GH.tpl.rapid.swimlane.renderColumnsHeader({columns:r,statistics:GH.GridDataController.getStatistics()})],o=GH.SwimlaneView.getCalculatedDisplayIssueKeys(),d=n.getSwimlanes(),w=n.getCells(),m=n.getIssues(),S=n.getGroupData(),g=0;_.each(d,function(e){var a=n.getSwimlaneIssueCount(e.id);if(l&&!e.defaultSwimlane||a>0){var i=t&&GH.RapidBoard.State.isSwimlaneCollapsed(e.id);s.push(GH.tpl.rapid.swimlane.renderSwimlane({columns:r,swimlane:e,swimlaneStrategy:n.getSwimlaneStrategy(),swimlaneTitle:GH.SwimlaneView.getSwimlaneTitle(e,a),cells:w,issues:m,index:g,collapsed:i,issueCount:a,groupData:S,displayIssueKeys:o,selectedIssueKeys:GH.SwimlaneView.getSelectedKeysMap(),mainSelectedIssue:GH.WorkSelectionController.getSelectedIssueKey(),statLabel:GH.SwimlaneView.getStatisticLabel(),isRankable:GH.RankingModel.canUserRank(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()})),g++}});var u=0===g;e.toggleClass("ghx-no-issues",u),u&&s.push(GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns({columns:r})),s.push(GH.tpl.rapid.swimlane.renderEndOfPool({rendered:(new Date).getTime()})),e[0].innerHTML=s.join(""),0===g&&GH.SwimlaneView.renderActiveSprintEmptyMsg(e),GH.SwimlaneView.setBusted(e),GH.SwimlaneView.registerReleaseActionEvents(),e.show(),GH.RapidBoard.State.isWorkRenderImprovementEnabled()||GH.SwimlaneView.columnWidthChanged(),a.isAdg3StylesEnabled()&&i.tipsify({context:e,selector:".ghx-column-headers .ghx-xtra-narrow-card h2"}),GH.RapidBoard.State.isWorkRenderImprovementEnabled()||GH.WorkDragAndDrop.initDraggables(e)}},GH.SwimlaneView.renderActiveSprintEmptyMsg=function(e){var a=GH.UserData.hasUser(),i=GH.SwimlaneView.rapidViewData.sprintSupportEnabled&&!GH.WorkControls.hasSprints(),n=GH.WorkControls.getActiveQuickFilterCount(),t=GH.RapidBoard.State.getRapidViewId(),l=GH.GridDataController.isIssueLimitExceeded(),r=require("jira-agile/rapid/ui/work/ActiveSprintEmptyView"),s=new r(i,n,t,(!1),l,e);a&&(i||n?GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,!0):GH.RapidViewConfig.fetchConfiguration(t).done(function(e){GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,e.canEdit)})),GH.WorkController.setActiveSprintEmptyMsg(s)},GH.SwimlaneView.rerenderCellOfIssue=function(e){var a=GH.GridDataController.getModel().getIssuePositionByKey(e);a&&GH.SwimlaneView.rerenderCell(a.swimlaneId,a.columnId)},GH.SwimlaneView.rerenderCell=function(e,a){var i=GH.GridDataController.getModel(),n={swimlane:i.getSwimlaneById(e),column:i.getColumnById(a),cells:i.getCells(),issues:i.getIssues(),groupData:i.getGroupData(),displayIssueKeys:GH.SwimlaneView.getCalculatedDisplayIssueKeys(),selectedIssueKeys:GH.SwimlaneView.getSelectedKeysMap(),mainSelectedIssue:GH.WorkSelectionController.getSelectedIssueKey(),statLabel:GH.SwimlaneView.getStatisticLabel(),isRankable:GH.RankingModel.canUserRank(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()},t=GH.tpl.rapid.swimlane.renderIssueColumn(n),l=AJS.$(t),r=AJS.$("#ghx-pool").find('.ghx-swimlane[swimlane-id="'+e+'"]').find(".ghx-columns").find('.ghx-column[data-column-id="'+a+'"]');r.replaceWith(l),GH.WorkDragAndDrop.initDraggables(AJS.$("#ghx-pool"))},GH.SwimlaneView.getSelectedKeysMap=function(){var e=GH.WorkSelectionController.getSelectedIssueKeys(),a={};return _.each(e,function(e){a[e]=!0}),a},GH.SwimlaneView.getIssueCountLabel=function(e,a){return e.parentKey?AJS.format("{0,choice,0#0 sub-tasks|1#1 sub-task|1\u003c{0,number} sub-tasks}",a):AJS.format("{0,choice,0#0 issues|1#1 issue|1\u003c{0,number} issues}",a)},GH.SwimlaneView.getSwimlaneTitle=function(e,a){var i=GH.SwimlaneView.getIssueCountLabel(e,a);if(e.parentKey){var n=GH.GridDataController.getModel().getIssueDataByKey(e.parentKey);n&&(i+=" - "+n.summary)}else e.description?i+=" - "+e.description:e.query&&(i+=" - "+e.query);return i},GH.SwimlaneView.registerReleaseActionEvents=_.once(function(){GH.UserData.hasUser()&&(GH.SwimlaneView.rapidViewData.sprintSupportEnabled||GH.ReleaseVersionTrigger.on(GH.ReleaseVersionTrigger.RELEASE_VERSION,function(a){a?e.show(a):GH.SwimlaneView.openReleaseVersionDialog()},GH.SwimlaneView))}),GH.SwimlaneView.openReleaseVersionDialog=function(){var e=GH.RapidBoard.State.getRapidViewId(),a=GH.GridDataController.getModel().getDoneColumn();GH.Dialogs.ReleaseVersionDialog.showDialog(e,a.id)},GH.SwimlaneView.setBusted=function(e){GH.GridDataController.hasBustedColumns()?AJS.$(e).addClass("ghx-busted"):AJS.$(e).removeClass("ghx-busted")},GH.SwimlaneView.getCalculatedDisplayIssueKeys=function(e){var a=GH.GridDataController.getModel(),i=function(e){var a=e.split("-"),i=_slicedToArray(a,2),n=i[0],t=i[1];return{pkey:n,number:t}},n={};return e?n[e]=i(e):Object.keys(a.getIssues()).forEach(function(e){n[e]=i(e)}),n},GH.SwimlaneView.rerenderIssue=function(e){var a=GH.GridDataController.getModel(),i=a.getIssueDataByKey(e);if(i){GH.SwimlaneView.rerenderIssueCard(i),GH.SwimlaneView.updateSwimlaneHeader(i),GH.SwimlaneView.rerenderFakeParents(i);var n=AJS.$('.ghx-issue[data-issue-key="'+i.key+'"]'),t=n.parents(".ghx-column");GH.SwimlaneView.updateIssueLayoutAccording2Size(n,t.width())}},GH.SwimlaneView.rerenderFakeParents=function(e){if(!e.parentKey){var a=AJS.$('.js-fake-parent[data-issue-key="'+e.key+'"]');if(!(a.length<1)){var i=a.find(".ghx-parent-stub");i.attr("title",e.key+"  "+e.summary);var n=i.find(".ghx-summary");n.text(e.summary)}}},GH.SwimlaneView.rerenderIssueCard=function(e){var a=AJS.$('.js-issue[data-issue-key="'+e.key+'"]');if(a.length>0){var i=GH.SwimlaneView.getCalculatedDisplayIssueKeys(e.key),n=AJS.$(GH.tpl.rapid.card.card({issue:e,displayIssueKey:i[e.key],selectedIssueKeys:GH.SwimlaneView.getSelectedKeysMap(),statLabel:GH.SwimlaneView.getStatisticLabel(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()}));a.replaceWith(n),GH.WorkDragAndDrop.registerSingleCardDraggable(n)}},GH.SwimlaneView.columnWidthChanged=function(){var e=AJS.$("#ghx-pool").find(":not(.ghx-collapsed-column).ghx-column"),a=e.width();GH.SwimlaneView.updateIssueLayoutAccording2Size(e,a),JIRA.trace("gh.column.width.changed")},GH.SwimlaneView.updateIssueLayoutAccording2Size=function(e,a){var i=a<=GH.SwimlaneView.NARROW_CARD_WIDTH,n=a<=GH.SwimlaneView.XTRA_NARROW_CARD_WIDTH;e.toggleClass("ghx-narrow-card",i),e.toggleClass("ghx-xtra-narrow-card",n)},GH.SwimlaneView.updateSwimlaneHeader=function(e){var a=GH.GridDataController.getModel(),i=a.getParentSwimlaneByIssueKey(e.key);i&&(AJS.$(".ghx-swimlane").each(function(){var n=AJS.$(this);if(n.attr("swimlane-id")==i.id){var t=a.getSwimlaneIssueCount(i.id),l=GH.SwimlaneView.getSwimlaneTitle(i,t),r=GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent({swimlane:i,swimlaneTitle:l,swimlaneStrategy:a.getSwimlaneStrategy(),parent:e,issueCount:t}),s=n.find(".ghx-swimlane-header");s.html(r),e.flagged?s.addClass("ghx-flagged"):s.removeClass("ghx-flagged")}}),GH.SwimlaneStalker.repositionColumnHeaders())},GH.SwimlaneView.handleResizeEvent=function(){GH.SwimlaneView.visible&&GH.SwimlaneView.columnWidthChanged()},GH.SwimlaneView.getFloatingHeader=function(){return AJS.$("#ghx-swimlane-header-stalker .ghx-swimlane-header")},GH.SwimlaneView.floatingDockToggleCollapsedHandler=function(e){var a=GH.SwimlaneView.getFloatingHeader(),i=a.data("swimlane-id"),n=a.parents("#ghx-pool").find(".ghx-swimlane [data-swimlane-id="+i+"] .js-expander");GH.SwimlaneView.toggleCollapsedHandler.call(n,e)},GH.SwimlaneView.toggleCollapsedHandler=function(e){if("keydown"===e.type){if(13!==e.keyCode&&32!==e.keyCode)return;e.preventDefault()}var a=AJS.$(this),i=a.closest(".ghx-swimlane"),n=!i.hasClass("ghx-closed");a.attr("aria-expanded",!n),GH.SwimlaneView.setCollapsed(i,n)},GH.SwimlaneView.setCollapsed=function(e,a){var i=parseInt(e.attr("swimlane-id"),10),n=GH.SwimlaneView.getFloatingHeader();if(e.toggleClass("ghx-closed",a),i===n.data("swimlane-id")){var t=n.parents("#ghx-swimlane-header-stalker");t.toggleClass("ghx-closed",a)}GH.SwimlaneView.setCollapsedState(i,a),GH.Layout.fireDelayedWindowResize()},GH.SwimlaneView.setCollapsedById=function(e,a){AJS.$(".ghx-swimlane").each(function(){var i=AJS.$(this);i.attr("swimlane-id")==e&&i.hasClass("ghx-closed")!=a&&GH.SwimlaneView.setCollapsed(i,a)})},GH.SwimlaneView.collapseAll=function(e){return(!e||!AJS.$(e.target).closest("li").hasClass("disabled"))&&void AJS.$(".ghx-swimlane").addClass("ghx-closed").each(function(){GH.SwimlaneView.setCollapsedState(parseInt(AJS.$(this).attr("swimlane-id")),!0)})},GH.SwimlaneView.expandAll=function(e){return(!e||!AJS.$(e.target).closest("li").hasClass("disabled"))&&void AJS.$(".ghx-swimlane").removeClass("ghx-closed").each(function(){GH.SwimlaneView.setCollapsedState(parseInt(AJS.$(this).attr("swimlane-id")),!1)})},GH.SwimlaneView.toggleAllSwimlanes=function(){var e=GH.GridDataController.getModel();if(!e.hasSwimlanes())return!1;var a=e.getSwimlanes(),i=!0;_.any(a,function(e){if(!GH.RapidBoard.State.isSwimlaneCollapsed(e.id)){var a=!e.issueIds||e.issueIds.length>0;if(a)return i=!1,!0}}),i?GH.SwimlaneView.expandAll():GH.SwimlaneView.collapseAll()},GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey=function(e){var a=GH.GridDataController.getModel(),i=a.getSwimlaneIdByIssueKey(e),n=a.hasSwimlanes(),t=n&&GH.RapidBoard.State.isSwimlaneCollapsed(i);return!!t&&(GH.SwimlaneView.setCollapsedById(i,!1),!0)},GH.SwimlaneView.setSwimlaneCollapsedStateForIssueKey=function(e,a){var i=GH.GridDataController.getModel(),n=i.getSwimlaneIdByIssueKey(e),t=i.hasSwimlanes(),l=t&&GH.RapidBoard.State.isSwimlaneCollapsed(n);l!=a&&GH.SwimlaneView.setCollapsedState(n,a)},GH.SwimlaneView.setCollapsedState=function(e,a){GH.RapidBoard.State.setSwimlaneCollapsed(e,a)},GH.SwimlaneView.getStatisticLabel=function(){return GH.SwimlaneView.rapidViewConfig.trackingStatistic&&GH.SwimlaneView.rapidViewConfig.trackingStatistic.isEnabled?GH.SwimlaneView.rapidViewConfig.trackingStatistic.name:GH.SwimlaneView.rapidViewConfig.estimationStatistic.name}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SwimlaneView.soy' */
// This file was automatically generated from SwimlaneView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.swimlane.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.swimlane == 'undefined') { GH.tpl.rapid.swimlane = {}; }


GH.tpl.rapid.swimlane.renderSwimlane = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-swimlane' + ((opt_data.index == 0) ? ' ghx-first' : '') + ((opt_data.collapsed) ? ' ghx-closed' : '') + '" swimlane-id="' + soy.$$escapeHtml(opt_data.swimlane.id) + '" >';
  if (! (opt_data.index == 0 && opt_data.swimlane.defaultSwimlane)) {
    var parent__soy15 = opt_data.issues[opt_data.swimlane.parentKey];
    var lastColumn__soy16 = opt_data.columns[opt_data.columns.length - 1];
    var parentOutOfSync__soy17 = opt_data.swimlane.parentOutOfSync;
    output += '<div class="ghx-swimlane-header' + ((opt_data.swimlane.defaultSwimlane) ? ' ghx-swimlane-default' : '') + ((parent__soy15 && parent__soy15.done) ? ' ghx-done' : '') + ((parent__soy15 && parent__soy15.flagged) ? ' ghx-flagged' : '') + ((parent__soy15 && parentOutOfSync__soy17) ? ' ghx-out-of-sync' : '') + ((opt_data.selectedIssueKeys[opt_data.swimlane.parentKey]) ? ' ghx-selected' : '') + '"' + ((parent__soy15) ? 'data-issue-key="' + soy.$$filterNoAutoescape(parent__soy15.key) + '" data-issue-id="' + soy.$$filterNoAutoescape(parent__soy15.id) + '" aria-label="' + soy.$$escapeHtml(AJS.format('Swimlane for {0}',opt_data.swimlaneStrategy + ': ' + parent__soy15.key + ' ' + parent__soy15.summary)) + '" role="group"' : 'aria-label="' + soy.$$escapeHtml(AJS.format('Swimlane for {0}',opt_data.swimlaneStrategy + ': ' + opt_data.swimlane.name)) + '"') + ((opt_data.swimlaneStrategy == 'story') ? 'tabindex="0"' : '') + ' data-swimlane-id="' + soy.$$escapeHtml(opt_data.swimlane.id) + '" >' + GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent({swimlane: opt_data.swimlane, swimlaneTitle: opt_data.swimlaneTitle, swimlaneStrategy: opt_data.swimlaneStrategy, parent: parent__soy15, issueCount: opt_data.issueCount}) + ((parent__soy15 && parentOutOfSync__soy17) ? ' <div class="ghx-bandaid"><button class="aui-button js-sync">' + soy.$$escapeHtml(AJS.format('Move to {0}',lastColumn__soy16.name)) + '</button></div>' : '') + '</div>';
  }
  output += GH.tpl.rapid.swimlane.renderIssueColumns(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderSwimlane.soyTemplateName = 'GH.tpl.rapid.swimlane.renderSwimlane';
}


GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent = function(opt_data, opt_ignored) {
  return '<div role="button" tabindex="0" class="ghx-expander js-expander" aria-expanded="true" title="' + soy.$$escapeHtml('Toggle swimlane visibility') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-heading" data-tooltip="' + soy.$$escapeHtml(opt_data.swimlaneTitle) + '">' + ((opt_data.swimlane.avatarUrl) ? '<span class="ghx-swimlane-avatar" title="' + soy.$$escapeHtml(opt_data.swimlane.name) + '"><img src="' + soy.$$escapeHtml(opt_data.swimlane.avatarUrl) + '"></span>' : '') + ((opt_data.parent) ? '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.parent.key) + '" role="button" class="ghx-parent-key js-detailview">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</a>' : (opt_data.swimlaneStrategy == 'project') ? '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.swimlane.name) + '" role="button">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</a>' : '<span role="button">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</span>') + '<span class="ghx-info">' + ((opt_data.parent) ? GH.tpl.status.renderText({status: opt_data.parent.status}) : '') + '<span class="ghx-description">' + ((opt_data.swimlane.parentKey) ? soy.$$escapeHtml(AJS.format('{0,choice,0#0 sub-tasks|1#1 sub-task|1\x3c{0,number} sub-tasks}',opt_data.issueCount)) : soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.issueCount))) + '</span></span>' + ((opt_data.parent) ? '<span class="ghx-summary"><span class="aui-lozenge aui-lozenge-current">' + soy.$$escapeHtml('Flagged') + '</span>' + soy.$$escapeHtml(opt_data.parent.summary) + '</span>' : (opt_data.swimlaneStrategy == 'project') ? '<span>' + soy.$$escapeHtml(opt_data.swimlane.description) + '</span>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent.soyTemplateName = 'GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent';
}


GH.tpl.rapid.swimlane.renderStalkerSwimlane = function(opt_data, opt_ignored) {
  return '<div id="ghx-swimname"><b class="ghx-flip"></b><b class="ghx-flop"></b><h2><span class="ghx-swimlane-icon"></span><span class="ghx-name"></span><span class="ghx-qty"></span><span class="ghx-summary"></span></h2></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderStalkerSwimlane.soyTemplateName = 'GH.tpl.rapid.swimlane.renderStalkerSwimlane';
}


GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-columns ghx-sad-columns">';
  var columnList143 = opt_data.columns;
  var columnListLen143 = columnList143.length;
  for (var columnIndex143 = 0; columnIndex143 < columnListLen143; columnIndex143++) {
    var columnData143 = columnList143[columnIndex143];
    output += '<li class="ghx-column' + ((columnData143.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((columnData143.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-id="' + soy.$$escapeHtml(columnData143.id) + '" ></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns.soyTemplateName = 'GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns';
}


GH.tpl.rapid.swimlane.renderColumnsHeader = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-column-header-group" class="ghx-column-header-group' + ((opt_data.statistics.fieldConfigured) ? ' ghx-has-stats' : '') + ' ghx-fixed"><ul id="ghx-column-headers" class="ghx-column-headers">';
  var columnList162 = opt_data.columns;
  var columnListLen162 = columnList162.length;
  for (var columnIndex162 = 0; columnIndex162 < columnListLen162; columnIndex162++) {
    var columnData162 = columnList162[columnIndex162];
    output += '<li class="ghx-column' + ((columnData162.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((columnData162.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-id="' + soy.$$escapeHtml(columnData162.id) + '" >' + ((GH.tpl.adg3Enabled) ? '<div class="ghx-column-header-flex"><div class="ghx-column-header-flex-1"><h2 data-tooltip="' + soy.$$escapeHtml(columnData162.name) + '">' + soy.$$escapeHtml(columnData162.name) + '</h2>' + ((opt_data.statistics.fieldConfigured) ? GH.tpl.rapid.swimlane.renderColumnCount({column: columnData162}) : '') + '</div>' + ((opt_data.statistics.fieldConfigured) ? '<div class="ghx-limits">' + GH.tpl.rapid.swimlane.renderColumnConstraints({column: columnData162}) + '</div>' : '') + '</div>' : ((opt_data.statistics.fieldConfigured) ? GH.tpl.rapid.swimlane.renderColumnCount({column: columnData162}) : '') + '<h2 title="' + soy.$$escapeHtml(columnData162.name) + '" data-tooltip="' + soy.$$escapeHtml(columnData162.name) + '">' + soy.$$escapeHtml(columnData162.name) + '</h2>' + ((opt_data.statistics.fieldConfigured) ? '<div class="ghx-limits">' + GH.tpl.rapid.swimlane.renderColumnConstraints({column: columnData162}) + '</div>' : '')) + '</li>';
  }
  output += '</ul><div id="ghx-swimlane-header-stalker"></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnsHeader.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnsHeader';
}


GH.tpl.rapid.swimlane.renderColumnCount = function(opt_data, opt_ignored) {
  return '<div class="ghx-qty">' + ((opt_data.column.stats.hidden > 0) ? soy.$$escapeHtml(AJS.format('{0} of {1}',opt_data.column.stats.visible,opt_data.column.stats.visible + opt_data.column.stats.hidden)) : soy.$$escapeHtml(opt_data.column.stats.visible)) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnCount.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnCount';
}


GH.tpl.rapid.swimlane.renderColumnConstraints = function(opt_data, opt_ignored) {
  return '' + ((opt_data.column.min || opt_data.column.min == 0) ? '<span class="ghx-constraint ghx-busted ghx-busted-min" title="' + soy.$$escapeHtml('Minimum Constraint') + '">' + soy.$$escapeHtml('Min') + ' ' + soy.$$escapeHtml(opt_data.column.min) + '</span>' : '') + ((opt_data.column.max || opt_data.column.max == 0) ? '<span class="ghx-constraint ghx-busted ghx-busted-max" title="' + soy.$$escapeHtml('Maximum Constraint') + '">' + soy.$$escapeHtml('Max') + ' ' + soy.$$escapeHtml(opt_data.column.max) + '</span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnConstraints.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnConstraints';
}


GH.tpl.rapid.swimlane.renderIssueColumns = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-columns">';
  var columnList242 = opt_data.columns;
  var columnListLen242 = columnList242.length;
  for (var columnIndex242 = 0; columnIndex242 < columnListLen242; columnIndex242++) {
    var columnData242 = columnList242[columnIndex242];
    output += GH.tpl.rapid.swimlane.renderIssueColumn({swimlane: opt_data.swimlane, column: columnData242, cells: opt_data.cells, issues: opt_data.issues, groupData: opt_data.groupData, displayIssueKeys: opt_data.displayIssueKeys, selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssueColumns.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssueColumns';
}


GH.tpl.rapid.swimlane.renderIssueColumn = function(opt_data, opt_ignored) {
  return '<li class="ghx-column' + ((opt_data.column.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((opt_data.column.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-column-id="' + soy.$$escapeHtml(opt_data.column.id) + '" ><div class="ghx-wrap-issue">' + GH.tpl.rapid.swimlane.renderIssues({issueKeys: opt_data.cells[opt_data.swimlane.id][opt_data.column.id], issues: opt_data.issues, groupData: opt_data.groupData, displayIssueKeys: opt_data.displayIssueKeys, selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic}) + '</div></li>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssueColumn.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssueColumn';
}


GH.tpl.rapid.swimlane.renderIssues = function(opt_data, opt_ignored) {
  var output = '';
  var issueKeyList280 = opt_data.issueKeys;
  var issueKeyListLen280 = issueKeyList280.length;
  for (var issueKeyIndex280 = 0; issueKeyIndex280 < issueKeyListLen280; issueKeyIndex280++) {
    var issueKeyData280 = issueKeyList280[issueKeyIndex280];
    var issue__soy281 = opt_data.issues[issueKeyData280];
    if (opt_data.groupData.beginGroups[issue__soy281.id]) {
      if (! issue__soy281.parentId) {
        output += '<div class="ghx-parent-group js-parent-drag" role="listitem" tabindex="0" aria-label="' + soy.$$escapeHtml(issue__soy281.key) + ' ' + soy.$$escapeHtml(issue__soy281.summary) + '" data-issue-id="' + soy.$$filterNoAutoescape(issue__soy281.id) + '" data-issue-key="' + soy.$$filterNoAutoescape(issue__soy281.key) + '">';
      } else {
        var parentIssue__soy298 = opt_data.issues[issue__soy281.parentKey];
        output += ((opt_data.groupData.fakeParents[issue__soy281.id] && parentIssue__soy298) ? '<div class="ghx-parent-group js-fake-parent js-parent-drag" data-issue-key="' + soy.$$filterNoAutoescape(parentIssue__soy298.key) + '">' + ((opt_data.groupData.drawFakeParents) ? '<div class="ghx-parent-stub" title="' + soy.$$filterNoAutoescape(parentIssue__soy298.key) + ' &mdash; ' + soy.$$escapeHtml(parentIssue__soy298.summary) + '"><div class="ghx-group"><span class="ghx-key">' + soy.$$filterNoAutoescape(parentIssue__soy298.key) + '</span><span class="ghx-summary">' + soy.$$escapeHtml(parentIssue__soy298.summary) + '</span></div></div>' : '') : '') + '<div class="ghx-subtask-group">';
      }
    }
    output += GH.tpl.rapid.card.card({issue: issue__soy281, displayIssueKey: opt_data.displayIssueKeys[issue__soy281.key], selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic});
    if (opt_data.groupData.endGroups[issue__soy281.id]) {
      output += '</div>';
      var parentIssue__soy330 = opt_data.issues[issue__soy281.parentKey];
      output += (! opt_data.groupData.fakeParents[issue__soy281.id] || parentIssue__soy330) ? '</div>' : '';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssues.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssues';
}


GH.tpl.rapid.swimlane.renderEndOfPool = function(opt_data, opt_ignored) {
  return '<span id="js-pool-end" data-rendered="' + soy.$$escapeHtml(opt_data.rendered) + '"></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderEndOfPool.soyTemplateName = 'GH.tpl.rapid.swimlane.renderEndOfPool';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/ReleaseVersionTrigger.js' */
define("jira-agile/rapid/ui/work/release-version-trigger",["jquery","underscore","jira-agile/rapid/events","jira-agile/rapid/global-events","jira-agile/tooltip","jira-agile/rapid/ui/dialog/release-existing-version-dialog"],function(e,i,r,n,o,t){"use strict";function s(e){var i=e.find("#ghx-button-release-version-list"),r=e.find("#ghx-release-version-list");o.tipsify({selector:i,gravity:"e"}),i.on("click",function(){o.hide(i)}),r.on({"aui-dropdown2-show":function(){o.disable(i)},"aui-dropdown2-hide":function(e){o.enable(i)}})}function a(i){e("#ghx-release-version-list").find("a").off("click",l),i.find("#ghx-release-version-list a").on("click",l)}function l(e){var i=AJS.$(e.target).closest("a"),r=i.data("version");f.trigger(f.RELEASE_VERSION,r)}function g(){var e=u.getModel(),r=d.getVersionModel(),n=e.getDoneColumn(),o=e.getIssuesDataForColumn(n.id),t=r.getProjects().length>1,s=i.uniq(i.flatten(o.map(function(e){return e.fixVersions}))),a=r.getUnreleasedVersionsForIds(s).versions,l=i.find(o,function(e){return 0===e.fixVersions.length});return{canRelease:u.canRelease,anythingToRelease:!(!l&&!a.length),versions:a,hasIssuesWithoutVersion:l,hasMultipleProjects:t,doneColumnName:n.name}}var u,d;n.on("pre-initialization",function(){u=GH.GridDataController,d=GH.VersionController});var c,f=new r;return f.RELEASE_VERSION="release-version",f.remove=function(){c&&c.length&&c.remove()},f.render=function(){this.remove();var i=g();return c=e(GH.tpl.rapid.work.releaseVersionTrigger.renderReleaseVersionPicker(i)),t.init(),a(c),s(c),JIRA.trace("gh.release.version.trigger.rendered"),c},f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/ReleaseVersionTrigger.soy' */
// This file was automatically generated from ReleaseVersionTrigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.work.releaseVersionTrigger.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.work == 'undefined') { GH.tpl.rapid.work = {}; }
if (typeof GH.tpl.rapid.work.releaseVersionTrigger == 'undefined') { GH.tpl.rapid.work.releaseVersionTrigger = {}; }


GH.tpl.rapid.work.releaseVersionTrigger.renderReleaseVersionPicker = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy3 = '' + ((! opt_data.anythingToRelease) ? soy.$$escapeHtml('There are no issues to be released') : (! opt_data.canRelease) ? soy.$$escapeHtml('You must be a project administrator or Jira administrator to release versions.') : soy.$$escapeHtml(AJS.format('Release a version from the {0} column',opt_data.doneColumnName)));
  output += '<div id="ghx-release"><!-- Trigger --><button id="ghx-button-release-version-list" aria-owns="ghx-release-version-list" aria-haspopup="true" class="aui-button aui-style-default aui-dropdown2-trigger "' + ((! opt_data.canRelease || ! opt_data.anythingToRelease) ? 'aria-disabled="true" ' : '') + 'data-tooltip="' + soy.$$escapeHtml(tooltip__soy3) + '">' + soy.$$escapeHtml('Release') + '</button><!-- Dropdown --><div id="ghx-release-version-list" class="ghx-release-version-list aui-style-default aui-dropdown2">' + ((opt_data.hasIssuesWithoutVersion) ? '<div class="aui-dropdown2-section"><ul><li class="aui-list-item"><a class="aui-list-item-link" data-version="">' + soy.$$escapeHtml('New version') + '</a></li></ul></div>' : '');
  if (opt_data.versions.length > 0) {
    output += '<div class="aui-dropdown2-section"><ul>';
    var versionList28 = opt_data.versions;
    var versionListLen28 = versionList28.length;
    for (var versionIndex28 = 0; versionIndex28 < versionListLen28; versionIndex28++) {
      var versionData28 = versionList28[versionIndex28];
      output += '<li class="aui-list-item"><a data-version="' + soy.$$escapeHtml(versionData28.id) + '" class="aui-list-item-link"><div class="flex-group"><div class="flex-item"><span>' + soy.$$escapeHtml(versionData28.name) + '</span></div>' + ((opt_data.hasMultipleProjects && versionData28.project) ? '<div class="flex-item"><span class="ghx-project-key">' + soy.$$escapeHtml(versionData28.project.key) + '</span></div>' : '') + '</div></a></li>';
    }
    output += '</ul></div>';
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.work.releaseVersionTrigger.renderReleaseVersionPicker.soyTemplateName = 'GH.tpl.rapid.work.releaseVersionTrigger.renderReleaseVersionPicker';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/SprintTrigger.js' */
define("jira-agile/rapid/ui/work/sprint-meta-trigger",["jquery","jira-agile/rapid/work/work-controls","jira-agile/rapid/ui/plan/backlog-model"],function(t,i,e){var r={};return r.remove=function(){t(".ghx-sprint-meta").remove()},r.mapState=function(t){var i=1===t.sprints.length?t.sprints[0].id:t.getActiveSprintFilters()[0],r=t.getSprintById(i),n=!t.hasSprints()||!i||!r.canUpdateSprint,p=t.getTooltipCompleteSprintBtn(r,e.complexQuery());return{activeSprintId:i,activeSprint:r,isDisabled:n,tooltipText:p}},r.render=function(){var t=i.sprintfilters,e=r.mapState(t),n=e.activeSprintId,p=e.activeSprint,o=e.isDisabled,a=e.tooltipText,l=AJS.$(GH.tpl.component.sprintfilters.renderSprintMeta({sprint:p,isDisabled:o,tooltipText:a}));return l.find(".time").tooltip({html:!0,title:function(){return GH.tpl.component.sprintfilters.renderSprintDatesTooltip({sprint:p})}}),l.find(".complete-sprint-container").tooltip({html:!0,title:"data-tooltip"}),l.find(".js-complete-sprint").on("click",function(t){t.preventDefault(),GH.Dialogs.CompleteSprintDialog.showDialog(GH.RapidBoard.State.getRapidViewId(),n)}),l},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/ModeToolTriggers.js' */
define("jira-agile/rapid/ui/work/mode-tools-controller",["jquery","jira-agile/rapid/ui/work/release-version-trigger","jira-agile/rapid/ui/work/sprint-meta-trigger","jira-agile/rapid/work/work-controls"],function(r,e,i,a){function o(a){var o=a.workMode,t=a.hasUser;if(i.remove(),e.remove(),t){var l=r(n);switch(o){case s:l.prepend(e.render());break;case d:l.prepend(i.render())}}}var n="#ghx-modes-tools",d="sprint",s="kanban";return{render:o,SPRINT:d,KANBAN:s}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReleaseVersionDialog.js' */
GH.Dialogs.ReleaseVersionDialog={},GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED="versionReleased",GH.Dialogs.ReleaseVersionDialog.dialog=void 0,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ReleaseVersionDialog.analytics=new e("gh.release")}(),GH.Dialogs.ReleaseVersionDialog.showDialog=function(e,a){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>'),GH.Ajax.get({url:"/release/model.json",data:{rapidViewId:e,columnId:a}},"showReleaseVersionDialog").done(GH.Dialogs.ReleaseVersionDialog.renderDialog).fail(GH.Dialog.undim)},GH.Dialogs.ReleaseVersionDialog.renderDialog=function(e){_.each(e.projectIssueDetails,function(e){e.name=AJS.escapeHTML(String(e.name))});var a=GH.Dialogs.ReleaseVersionDialog.dialog=GH.Dialog.create({width:500,height:380,id:"ghx-dialog-release",onCancelFn:function(){GH.Dialogs.ReleaseVersionDialog.dialog=void 0,GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel",e.projectIssueDetails.length)},analyticsPageName:"releaseNewVersionModal"});AJS.$("#"+a.id).addClass("ghx-dialog"),a.addHeader("Release"),a.addPanel("","panel"),a.getCurrentPanel().html(GH.tpl.dialogs.releaseversion.renderReleaseDialog({model:e})),a.addButton("Release",function(){GH.Dialogs.ReleaseVersionDialog.release(e)},"aui-button aui-button-primary"),a.addCancel("Cancel",function(){a.cancel()}),AJS.$(".aui-dialog").addClass("ghx-dialog");new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-release-date",button:"ghx-release-date_trigger_c",align:"Tl",singleClick:!0,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start",e.projectIssueDetails.length),a.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.ReleaseVersionDialog.release=function(e){GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete",e.projectIssueDetails.length);var a=GH.Dialogs.ReleaseVersionDialog.dialog;a.disableControls(),a.showSpinner(),GH.Ajax.post({url:"/release",data:{versionName:AJS.$("#ghx-release-name").val(),releaseDate:AJS.$("#ghx-release-date").val(),description:AJS.$("#ghx-release-desc").val(),rapidViewId:e.rapidViewId,columnId:e.columnId},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date_trigger_c"}}).done(function(e){var a=GH.Dialogs.ReleaseVersionDialog.dialog;a&&(a.dispose(),GH.Dialogs.ReleaseVersionDialog.dialog=void 0),GH.Notification.showSuccess(e.success.message),AJS.$(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED)}).fail(function(){var e=GH.Dialogs.ReleaseVersionDialog.dialog;e&&(e.hideSpinner(),e.enableControls())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReleaseVersionDialog.soy' */
// This file was automatically generated from ReleaseVersionDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.releaseversion.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.releaseversion == 'undefined') { GH.tpl.dialogs.releaseversion = {}; }


GH.tpl.dialogs.releaseversion.renderReleaseDialog = function(opt_data, opt_ignored) {
  var output = '<div id="version-new">';
  if (opt_data.model.projectIssueDetails.length > 0) {
    output += '<ul id="ghx-release-navigator">';
    var projectList7 = opt_data.model.projectIssueDetails;
    var projectListLen7 = projectList7.length;
    for (var projectIndex7 = 0; projectIndex7 < projectListLen7; projectIndex7++) {
      var projectData7 = projectList7[projectIndex7];
      output += '<li><a title="' + soy.$$escapeHtml('View in Issue Navigator') + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/GHReleaseIssueNavigator.jspa?projectId=' + soy.$$escapeHtml(projectData7.id) + '&rapidViewId=' + soy.$$escapeHtml(opt_data.model.rapidViewId) + '&columnId=' + soy.$$escapeHtml(opt_data.model.columnId) + '">' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|2#{0} issues}',projectData7.issueCount)) + '</a> ' + soy.$$filterNoAutoescape(AJS.format('will be released from \x3cstrong\x3e{0}\x3c/strong\x3e',projectData7.name)) + '</li>';
    }
    output += '</ul>';
  }
  output += '<form action="#" class="aui"><fieldset><div class="field-group"><label for="ghx-release-name">' + soy.$$escapeHtml('Version name') + '</label><input id="ghx-release-name" type="text" class="text"><div id="query-results"></div></div><div class="field-group"><label for="ghx-release-date">' + soy.$$escapeHtml('Release date') + '</label><input type="text" id="ghx-release-date" value="' + soy.$$escapeHtml(opt_data.model.defaultReleaseDate) + '" class="text"><span id="ghx-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar">&nbsp;</span></div><div class="field-group"><label for="ghx-release-desc">' + soy.$$escapeHtml('Description') + '</label><textarea id="ghx-release-desc" rows="4" class="textarea"></textarea></div></fieldset></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.releaseversion.renderReleaseDialog.soyTemplateName = 'GH.tpl.dialogs.releaseversion.renderReleaseDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteSprintDialog.js' */
define("jira-agile/rapid/ui/dialog/complete-sprint-dialog",["require"],function(e){"use strict";function t(e,t){var n=t.success,i=Boolean(e.incompleteIssuesDestination===String(h.NEW_SPRINT_ID)),s={};if(i&&(s.timeout=h.NEW_SPRINT_MESSAGE_TIMEOUT),m.showSuccess(g.dialogs.completesprint.renderSuccessMessage(n),s),i){var a=AJS.$("#gh-complete-new-sprint-link");a.click(function(){GH.RapidBoard.ViewController.setMode(u.PLAN),m.clear()})}}function n(e){h.sprintSelect=new p,h.sprintSelect.initDropdown(),h.sprintSelect.on("change",s.bind(null,e))}function i(e){var t=e.incompleteIssues+e.partiallyCompleteIssues>0;return t&&(e.hasDestinationSprints||e.canCreateSprint)}function s(e,t){t?(e.incompleteIssuesDestination=t,a()):o()}function a(){h.$completeButton.enable(!0)}function o(){h.$completeButton.enable(!1)}function l(e){var t={completeIssues:e.completeIssues,totalIncompleteIssues:e.incompleteIssues+e.partiallyCompleteIssues,unfinishedParentsWithFinishedSubtasks:e.unfinishedParentsWithFinishedSubtasks?e.unfinishedParentsWithFinishedSubtasks.length:0,hasDestinationSprints:e.hasDestinationSprints,incompleteIssueDestinations:e.incompleteIssueDestinations,shouldShowSprintSelector:i(e),defaultIncompleteIssueDestination:e.defaultIncompleteIssueDestination};return t}var r=e("jquery"),p=e("jira-agile/rapid/ui/component/sprint-select"),u=e("jira-agile/rapid/const/PageMode"),d=e("jira-agile/rapid/ajax"),c=GH.Dialog,m=GH.Notification,g=GH.tpl,h={};return h.sprintSelect=null,h.EVENT_SPRINT_COMPLETED="sprintCompleted",h.BACKLOG_ID=-1,h.NEW_SPRINT_ID=-2,h.NEW_SPRINT_MESSAGE_TIMEOUT=1e4,h.analyticsMetaData=function(e){AJS.trigger("analyticsEvent",{name:"gh.sprint.complete",data:e})},h.showDialog=function(e,t){AJS.dim(),r(".aui-blanket").html('<span class="ghx-wait"></span>'),d.get({url:"/sprint/"+t+"/complete",data:{rapidViewId:e,sprintId:t}},"completesprintdialog").done(h.renderDialog).fail(function(){AJS.undim(),r(".aui-blanket").empty()})},h.renderDialog=function(e){var t=void 0!==e.finishedParentsWithUnfinishedSubtasks&&e.finishedParentsWithUnfinishedSubtasks.length>0,s=c.create({width:630,height:300,id:"ghx-dialog-complete-sprint",analyticsPageName:"completeSprintModal"});if(s.addHeader(AJS.format("Complete sprint: {0}",e.sprint.name)),s.addPanel("","panel"),t)s.getCurrentPanel().html(g.dialogs.completesprint.renderCanNotCompleteSprintDialog({issues:e.finishedParentsWithUnfinishedSubtasks}));else{new Calendar;s.getCurrentPanel().html(g.dialogs.completesprint.renderCompleteSprintDialog({model:l(e)})),s.addButton("Complete",function(){s.disableControls(),s.showSpinner(),h.complete(s,e)},"aui-button ghx-complete-button"),h.$completeButton=r("#ghx-dialog-complete-sprint").find(".ghx-complete-button"),i(e)&&n(e)}c.addCancelButton(s),r(".aui-dialog").addClass("ghx-dialog"),s.show(),r(".aui-blanket").empty(),r("#ghx-release-name").focus()},h.complete=function(e,n){d.put({url:"/sprint/"+n.sprint.id+"/complete",data:{rapidViewId:n.rapidViewId,sprintId:n.sprint.id,incompleteIssuesDestination:n.incompleteIssuesDestination},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date"}}).done(function(i){h.analyticsMetaData({sprintId:n.sprint.id,completeIssueCount:n.completeIssues,incompleteIssueCount:n.incompleteIssues,partiallyCompleteIssueCount:n.partiallyCompleteIssues}),e.dispose(),t(n,i),r(GH).trigger(h.EVENT_SPRINT_COMPLETED,n.sprint.id)}).fail(function(){e.hideSpinner(),e.enableControls()})},h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteSprintDialog.soy' */
// This file was automatically generated from CompleteSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.completesprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.completesprint == 'undefined') { GH.tpl.dialogs.completesprint = {}; }


GH.tpl.dialogs.completesprint.renderCompleteSprintDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues were |1#{0} issue was|2#{0} issues were} done','<strong>' + opt_data.model.completeIssues + '</strong>',opt_data.model.completeIssues)) + ((opt_data.model.totalIncompleteIssues > 0 && opt_data.model.unfinishedParentsWithFinishedSubtasks > 0) ? '<br/>' + ((opt_data.model.totalIncompleteIssues == opt_data.model.unfinishedParentsWithFinishedSubtasks) ? soy.$$filterNoAutoescape(AJS.format('{0} {1,choice,1#issue was|2#issues were} incomplete (and had all of {1,choice,1#its|2#their} sub-tasks complete)','<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues)) : soy.$$filterNoAutoescape(AJS.format('{0} {1,choice,1#issue was|2#issues were} incomplete ({2} of which had all of {3,choice,1#its|2#their} sub-tasks complete)','<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues,'<strong>' + opt_data.model.unfinishedParentsWithFinishedSubtasks + '</strong>',opt_data.model.unfinishedParentsWithFinishedSubtasks))) : (opt_data.model.totalIncompleteIssues > 0) ? '<br/>' + soy.$$filterNoAutoescape(AJS.format('{0} {1,choice,0#issues were|1#issue was|2#issues were} incomplete','<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues)) : '') + '</p><p>' + ((opt_data.model.shouldShowSprintSelector) ? soy.$$escapeHtml('Select where all the incomplete issues should be moved:') : soy.$$escapeHtml('Incomplete issues will be moved to the backlog')) + '</p>' + ((opt_data.model.shouldShowSprintSelector) ? GH.tpl.component.sprintselect.renderSingleSelect({items: opt_data.model.incompleteIssueDestinations, selectedItem: opt_data.model.defaultIncompleteIssueDestination}) : '') + '<p class="ghx-description">' + soy.$$escapeHtml('Sub-tasks are not included in the total(s) above, and are always included in the same sprint as their parent issue.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completesprint.renderCompleteSprintDialog.soyTemplateName = 'GH.tpl.dialogs.completesprint.renderCompleteSprintDialog';
}


GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog = function(opt_data, opt_ignored) {
  var output = '<div><p>' + soy.$$escapeHtml('Sprint cannot be completed as there are incomplete subtasks on the following issues:') + '</p><ul>';
  var issueKeyList39 = opt_data.issues;
  var issueKeyListLen39 = issueKeyList39.length;
  for (var issueKeyIndex39 = 0; issueKeyIndex39 < issueKeyListLen39; issueKeyIndex39++) {
    var issueKeyData39 = issueKeyList39[issueKeyIndex39];
    output += '<li>' + soy.$$escapeHtml(issueKeyData39) + '</li>';
  }
  output += '<ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog.soyTemplateName = 'GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog';
}


GH.tpl.dialogs.completesprint.renderSuccessMessage = function(opt_data, opt_ignored) {
  return '<span>' + ((opt_data.newSprintName) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('\x27\x27{0}\x27\x27 successfully completed and new \x3ca id\x3d\x22gh-complete-new-sprint-link\x22\x3e\x27\x27{1}\x27\x27\x3c/a\x3e created in the backlog',typeof (opt_data.completedSprintName) === 'number' ? opt_data.completedSprintName : soy.$$escapeHtml(opt_data.completedSprintName),typeof (opt_data.newSprintName) === 'number' ? opt_data.newSprintName : soy.$$escapeHtml(opt_data.newSprintName)))) : soy.$$escapeHtml('Sprint successfully completed')) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completesprint.renderSuccessMessage.soyTemplateName = 'GH.tpl.dialogs.completesprint.renderSuccessMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReopenSprintDialog.js' */
GH.Dialogs.ReopenSprintDialog={},GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED="sprintReopened",GH.Dialogs.ReopenSprintDialog.analyticsMetaData=function(e){AJS.trigger("analyticsEvent",{name:"gh.sprint.reopen",data:e})},GH.Dialogs.ReopenSprintDialog.showDialog=function(e,a){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>'),GH.Ajax.get({url:"/sprint/"+a+"/reopen",data:{rapidViewId:e,sprintId:a}},"reopensprintdialog").done(GH.Dialogs.ReopenSprintDialog.renderDialog).fail(function(){AJS.undim(),AJS.$(".aui-blanket").empty()})},GH.Dialogs.ReopenSprintDialog.renderDialog=function(e){var a=GH.Dialog.create({width:630,height:270,id:"ghx-dialog-reopen-sprint",analyticsPageName:"reopenSprintModal"});if(a.addHeader("Reopen sprint"),a.addPanel("","panel"),0!==e.issuesMovedBack){new Calendar;a.getCurrentPanel().html(GH.tpl.dialogs.reopensprint.renderReopenSprintDialog({model:e})),a.addButton("Reopen",function(){a.disableControls(),a.showSpinner(),GH.Dialogs.ReopenSprintDialog.complete(a,e)},"aui-button")}else a.getCurrentPanel().html(GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog({model:e}));GH.Dialog.addCancelButton(a),AJS.$(".aui-dialog").addClass("ghx-dialog"),a.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.ReopenSprintDialog.complete=function(e,a){GH.Ajax.put({url:"/sprint/"+a.sprint.id+"/reopen",data:{rapidViewId:a.rapidViewId,sprintId:a.sprint.id},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date"}}).done(function(i){GH.Dialogs.ReopenSprintDialog.analyticsMetaData({sprintId:a.sprint.id,issuesMovedBack:a.issuesMovedBack,completedIssuesNotMovedBack:a.completedIssuesNotMovedBack,incompleteIssuesNotMovedBack:a.incompleteIssuesNotMovedBack}),e.dispose(),GH.Notification.showSuccess(i.success.message),AJS.$(GH).trigger(GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED,a.sprint.id)}).fail(function(){e.hideSpinner(),e.enableControls()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ReopenSprintDialog.soy' */
// This file was automatically generated from ReopenSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.reopensprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.reopensprint == 'undefined') { GH.tpl.dialogs.reopensprint = {}; }


GH.tpl.dialogs.reopensprint.renderReopenSprintDialog = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml(opt_data.model.sprint.name) + '</h4><div class="issue-moved-back">' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues|1#{0} issue|2#{0} issues} will be moved back to the sprint you\x27\x27re reopening.','<strong>' + opt_data.model.issuesMovedBack + '</strong>',opt_data.model.issuesMovedBack)) + '</div>' + GH.tpl.dialogs.reopensprint.reopenDetails_(opt_data) + '<p class="ghx-description">' + soy.$$escapeHtml('Sub-tasks are not included in the total(s) above, and are always included in the same sprint as their parent issue.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.renderReopenSprintDialog.soyTemplateName = 'GH.tpl.dialogs.reopensprint.renderReopenSprintDialog';
}


GH.tpl.dialogs.reopensprint.reopenDetails_ = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.completedIssuesNotMovedBack > 0) ? '<div class="completed-issue-not-moved-back">' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues are|1#{0} issue is|2#{0} issues are} already completed in another sprint, and cannot be moved back.','<strong>' + opt_data.model.completedIssuesNotMovedBack + '</strong>',opt_data.model.completedIssuesNotMovedBack)) + '</div>' : '') + ((opt_data.model.incompleteIssuesNotMovedBack > 0) ? '<div class="incompleted-issue-not-moved-back">' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues are|1#{0} issue is|2#{0} issues are} part of another active sprint, and cannot be moved back.','<strong>' + opt_data.model.incompleteIssuesNotMovedBack + '</strong>',opt_data.model.incompleteIssuesNotMovedBack)) + '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.reopenDetails_.soyTemplateName = 'GH.tpl.dialogs.reopensprint.reopenDetails_';
}


GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog = function(opt_data, opt_ignored) {
  return '<div><p>' + soy.$$escapeHtml('Reopening the sprint is not possible because there are no issues in this sprint.') + '</p><p>' + GH.tpl.dialogs.reopensprint.reopenDetails_(opt_data) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog.soyTemplateName = 'GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteParentDialog.js' */
GH.Dialogs.CompleteParentDialog={},GH.Dialogs.CompleteParentDialog.EVENT_PARENT_COMPLETED="parentCompleted",GH.Dialogs.CompleteParentDialog.showDialog=function(e,t,a){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>'),GH.Dialogs.CompleteParentDialog.renderDialog(e,t,a.name)},GH.Dialogs.CompleteParentDialog.renderDialog=function(e,t,a){var o=GH.Dialog.create({width:500,height:250,id:"ghx-dialog-complete-parent"});o.addHeader(AJS.format("Update Parent Issue",e.key)),o.addPanel("","panel"),o.getCurrentPanel().html(GH.tpl.dialogs.completeparent.renderCompleteParentDialog({issue:e,transitions:t,columnName:AJS.escapeHTML(String(a))})),t.length>0?(o.addButton("Update",function(){o.disableControls(),1==t.length?GH.Dialogs.CompleteParentDialog.complete(o,e,t[0].id):GH.Dialogs.CompleteParentDialog.complete(o,e,AJS.$(".js-complete-parent").find("input:checked").val())},"aui-button"),GH.Dialog.addCancelButton(o)):o.addButton("Acknowledge",function(){o.disableControls(),o.dispose()},"aui-button"),AJS.$(".aui-dialog").addClass("ghx-dialog"),o.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.CompleteParentDialog.complete=function(e,t,a){GH.IssueOperationShortcuts.setOverrideSelectedIssue(t),e.dispose(),GH.WorkDragAndDrop.executeWorkflowTransition(t.id,a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CompleteParentDialog.soy' */
// This file was automatically generated from CompleteParentDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.completeparent.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.completeparent == 'undefined') { GH.tpl.dialogs.completeparent = {}; }


GH.tpl.dialogs.completeparent.renderCompleteParentDialog = function(opt_data, opt_ignored) {
  var output = '<form class="aui">';
  if (opt_data.transitions.length > 1) {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format('All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.',opt_data.issue.key,opt_data.columnName)) + '<br/>' + soy.$$escapeHtml('To update this parent issue to match, select a transition:') + '</p><fieldset class="group js-complete-parent">';
    var transitionList12 = opt_data.transitions;
    var transitionListLen12 = transitionList12.length;
    for (var transitionIndex12 = 0; transitionIndex12 < transitionListLen12; transitionIndex12++) {
      var transitionData12 = transitionList12[transitionIndex12];
      output += '<div class="radio"><input type="radio" name="transition" id="' + soy.$$escapeHtml(transitionData12.id) + '" value="' + soy.$$escapeHtml(transitionData12.id) + '" ' + ((transitionIndex12 == 0) ? 'checked="checked"' : '') + '><label for="' + soy.$$escapeHtml(transitionData12.id) + '">' + soy.$$escapeHtml(transitionData12.name) + '</label></div>';
    }
    output += '</fieldset>';
  } else if (opt_data.transitions.length == 1) {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format('All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.',opt_data.issue.key,opt_data.columnName)) + '<br/>' + soy.$$escapeHtml('Do you want to update this parent issue to match?') + '</p>';
  } else {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format('All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.',opt_data.issue.key,opt_data.columnName)) + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('However, the parent issue cannot be moved into the \x3cstrong\x3e{0}\x3c/strong\x3e column as there are no matching transitions.',opt_data.columnName)) + '</p>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completeparent.renderCompleteParentDialog.soyTemplateName = 'GH.tpl.dialogs.completeparent.renderCompleteParentDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/RapidViewConfig.js' */
!function(i){var a=!1,e=require("wrm/data"),n=require("underscore");i.RapidViewConfig={},i.RapidViewConfig.currentData={},i.RapidViewConfig.fetchConfiguration=function(r,o){n.isNull(r)?r={viewId:null,fromLocalStorage:!0}:n.isObject(r)||(r={viewId:r,fromLocalStorage:!1});var t=r.viewId,d=r.fromLocalStorage;if(!a){var g=e.claim("com.atlassian.greenhopper:rapid-view-config");g&&(i.RapidViewConfig.handleData(g),i.RapidViewConfig.currentData.promise=AJS.$.Deferred().resolve(g.currentViewConfig).promise()),a=!0}if(o||i.RapidViewConfig.currentData.id!==t){var p={returnDefaultBoard:d};t&&(p.rapidViewId=t);var f=i.Ajax.get({url:"/xboard/config.json",data:p,deferErrorHandling:!0},"rapidViewConfig");f.done(function(a){i.RapidViewConfig.handleData(a),AJS.$("#ghx-issue-fragment").trigger("rapid-view-configuration-updated")}),i.RapidViewConfig.currentData={id:t,promise:f.pipe(function(i){return i.currentViewConfig},i.RapidViewConfig.handleRapidLoadError),data:null}}return i.RapidViewConfig.currentData.promise},i.RapidViewConfig.handleRapidLoadError=function(a,e){if(404===e.status){var n;n="anonymous"===i.Ajax.getUserFromAJS()?AJS.format("The requested board cannot be viewed because it either does not exist or you do not have permission to view it. This board may be visible if you \u003ca href=\"{0}\"\u003elog in\u003c/a\u003e.",i.Navigation.getLoginUrl()):"The requested board cannot be viewed because it either does not exist or you do not have permission to view it.",i.Notification.addPageLoadMessage(n,"warning"),i.RapidBoard.gotoManageViewsPage()}},i.RapidViewConfig.handleData=function(a){i.RapidViewConfig.storeGlobalConfig(a.globalConfig),i.RapidViewConfig.currentData.id=a.currentViewConfig.id,i.RapidViewConfig.currentData.data=a.currentViewConfig,i.RapidViewConfig.canManageSprints=a.currentViewConfig.canManageSprints,i.RapidViewConfig.canEdit=a.currentViewConfig.canEdit,i.RapidViewConfig.kanPlanEnabled=a.currentViewConfig.kanPlanEnabled,i.RapidViewConfig.isBoardAdmin=a.currentViewConfig.isBoardAdmin,i.RapidViewConfig.canManageSprints=a.currentViewConfig.canManageSprints,i.RapidViewConfig.modifySprintSupport()},i.RapidViewConfig.storeGlobalConfig=function(a){i.NumberFormat.groupingSeparator=a.numberGroupingSeparator,i.NumberFormat.decimalSeparator=a.numberDecimalSeparator,i.TimeFormat.timeTrackingConfigOpts=a.timeTrackingConfig,i.TimeFormat.dateTimePickerFormat=a.dateTimePickerFormat,i.TimeFormat.dateFormat=a.dateFormat,i.TimeFormat.userTimeZoneLabel=a.userTimeZoneLabel,i.TimeFormat.useISO8601WeekNumbers=a.useISO8601WeekNumbers,i.RapidBoard.parallelSprints=a.parallelSprints,i.EpicConfig.setEpicConfig(a.epicConfig),i.SprintConfig.setSprintConfig(a.sprintConfig),i.UserData.setGlobalConfig(a),i.Config.setSampleDataAvailable(a.isSampleDataAvailable)},i.RapidViewConfig.modifySprintSupport=function(){var a=AJS.$("body");a.removeClass("ghx-days-in-column-disabled ghx-days-in-column-enabled ghx-sprint-support ghx-no-sprint-support"),i.RapidBoard.State.isScrumBoard()?a.addClass("ghx-sprint-support"):a.addClass("ghx-no-sprint-support"),i.RapidViewConfig.currentData.data.showDaysInColumn?a.addClass("ghx-days-in-column-enabled"):a.addClass("ghx-days-in-column-disabled")}}(GH);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/configuration/ConfigContextLoader.js' */
define("jira-agile/rapid/configuration/ConfigContextLoader",["wrm/require"],function(i){var e=void 0;return{prefetch:function(){e&&!e.isRejected()||(e=i(["wrc!com.pyxis.greenhopper.jira:gh-rapid-config"]))},getContext:function(){return this.prefetch(),e.fail(function(){GH.Notification.showError("We\'re having trouble contacting the server. Refresh the page and try again.")}),e}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/extra-fields/ExtraFieldsHelper.js' */
define("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper",["require"],function(e){"use strict";var t=e("underscore"),r={epiclink:function(e){return GH.EpicConfig.getEpicNameString(e.text,e.epicKey)},html:function(e){return e.html&&"&nbsp;"!==e.html?(e.useSoyNoAutoescape=!0,e.html):""}},n=function(e){return e.html||e.text},i={prepareExtraFields:function(e){t.each(e,function(e){var t=r[e.renderer]||n;e.renderedContent=t(e)})}};return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/extra-fields/ExtraFields.soy' */
// This file was automatically generated from ExtraFields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.extraFields.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.extraFields == 'undefined') { GH.tpl.extraFields = {}; }


GH.tpl.extraFields.renderExtraField = function(opt_data, opt_ignored) {
  var output = '';
  var contentOrNone__soy3 = opt_data.extraField.renderedContent || 'None';
  var tooltip__soy4 = '' + ((opt_data.extraField.useSoyNoAutoescape) ? soy.$$escapeHtml(opt_data.extraField.label) + ': ' + soy.$$filterNoAutoescape(contentOrNone__soy3) : soy.$$escapeHtml(opt_data.extraField.label) + ': ' + soy.$$escapeHtml(contentOrNone__soy3));
  output += '<span class="ghx-extra-field ' + ((! opt_data.extraField.renderedContent) ? 'ghx-fa' : '') + '" data-tooltip="' + soy.$$escapeHtml(tooltip__soy4) + '"><span class="ghx-extra-field-content">' + ((opt_data.extraField.useSoyNoAutoescape) ? soy.$$filterNoAutoescape(contentOrNone__soy3) : soy.$$escapeHtml(contentOrNone__soy3)) + '</span></span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.extraFields.renderExtraField.soyTemplateName = 'GH.tpl.extraFields.renderExtraField';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogView.js' */
define("jira-agile/rapid/ui/plan/BacklogView",["require"],function(e){"use strict";var a=e("underscore"),n=e("jquery"),i=e("jira-agile/rapid/global-events"),r=e("jira-agile/rapid/ui/plan/backlog-model2"),s=e("jira-agile/rapid/ui/plan/sprint-view"),l=e("jira-agile/rapid/ui/plan/sprint-backlog-view"),t=e("jira-agile/rapid/ui/plan/sprint-model"),d=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),o=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),c=void 0;i.on("pre-initialization",function(){c=e("jira-agile/rapid/ui/plan/backlog-controller")});var g={};return g.containerSelector="#ghx-backlog",g.getContainer=function(){return g.container||(g.container=n(g.containerSelector)),g.container},g.draw=function(){g.container=void 0;var e=n(g.containerSelector);e.html(GH.tpl.backlogview.renderBacklogView({}));var i=c.calculateIssueRenderData();s.renderAllSprints(i),GH.RapidBoard.State.isCollapsibleBacklogEnabled()||l.renderBacklog(i),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||(GH.planOnboarding.renderOnboarding(),a.delay(function(){o.enableDragAndDrop(),g.registerClickHandlers(),s.registerTwixies(),GH.sprintActions.createDropdown(),n("#ghx-backlog").attr("data-rendered",(new Date).getTime())}))},g.registerClickHandlers=function(){n(g.containerSelector).delegate(".js-clear-all-filters","click",function(e){c.clearFilters()})},g.redrawChangedModel=function(e){g.redrawChangedModels([e])},g.redrawChangedModels=function(e){GH.RapidBoard.State.isCollapsibleBacklogEnabled()?a.each(e,function(e){s.updateSprintViewForModel(e)}):a.each(e,function(e){t.isSprintModel(e)?s.updateSprintViewForModel(e):r.isBacklogModel(e)&&l.updateBacklog()}),GH.planOnboarding.renderOnboarding(),o.enableDragAndDrop(),GH.sprintActions.createDropdown()},g.updateSprintsAfterAddRemove=function(){var e=c.calculateIssueRenderData();s.renderAllSprints(e),GH.planOnboarding.renderOnboarding(),o.enableDragAndDrop(),GH.sprintActions.createDropdown()},g.updateIssueSelectionState=function(e){var a=!1,i=null,r=d.getSelectedIssueKey();a=r,n(g.containerSelector).find(".js-issue").removeClass("ghx-selected ghx-selected-primary").each(function(e,s){var l=n(s),t=l.data("issue-key");d.isInSelection(t)&&(l.addClass("ghx-selected"),r==t&&l.addClass("ghx-selected-primary")),null!=a&&t===a&&(i=l)}),i&&e&&g._scrollToView(i)},g.updateHiddenIssues=function(){var e=c.calculateIssueRenderData(),i=n("#ghx-backlog");i.css({display:"none"});var r=i.find(".js-issue-list");a.each(r,function(a){var i=n(a);if(!i.is(".js-empty-list")){var r=g._updateIssuesVisibilityInIssueList(i,e);r?i.removeClass("ghx-has-issues").addClass("ghx-no-issues"):i.removeClass("ghx-no-issues").addClass("ghx-has-issues")}}),s.updateSprintStatistics(),GH.RapidBoard.State.isCollapsibleBacklogEnabled()||l.updateBacklogHeader(),GH.planOnboarding.renderOnboarding(),i.css({display:""})},g._updateIssuesVisibilityInIssueList=function(e,i){var r=e.find(".js-issue"),s=!0;a.each(r,function(e){var a=n(e),r=a.attr("data-issue-key");if(i.hiddenIssues[r]){if(a.addClass("ghx-filtered"),!a.hasClass("ghx-issue-subtask")){var l=a.parents(".ghx-parent-group");l.addClass("js-fake-parent")}}else{if(a.removeClass("ghx-filtered"),!a.hasClass("ghx-issue-subtask")){var l=a.parents(".ghx-parent-group");l.removeClass("js-fake-parent")}s=!1}});var l=e.find(".js-fake-parent");return l.each(function(e,a){a=n(a),0===a.find(".js-issue:not(.ghx-filtered)").length?a.addClass("ghx-parent-group-filtered"):a.removeClass("ghx-parent-group-filtered")}),s},g.checkBacklogWidth=function(){var e=g.getContainer().width();e<600?n("body").addClass("ghx-plan-band-1").removeClass("ghx-plan-band-2"):n("body").addClass("ghx-plan-band-2").removeClass("ghx-plan-band-1"),GH.planOnboarding.refresh()},g._scrollToView=function(e){var a=n("#ghx-backlog"),i=a[0].getBoundingClientRect(),r=e[0].getBoundingClientRect();GH.ScrollUtils.scrollElementToViewPort(a,i,r)},g});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogView.soy' */
// This file was automatically generated from BacklogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.backlogview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.backlogview == 'undefined') { GH.tpl.backlogview = {}; }


GH.tpl.backlogview.renderBacklogView = function(opt_data, opt_ignored) {
  return '<div id="ghx-content-group"><div class="ghx-sprint-group"/><div class="ghx-backlog-group"/></div>';
};
if (goog.DEBUG) {
  GH.tpl.backlogview.renderBacklogView.soyTemplateName = 'GH.tpl.backlogview.renderBacklogView';
}


GH.tpl.backlogview.renderDragOverlay = function(opt_data, opt_ignored) {
  return '<div class="ghx-drag-overlay"></div>';
};
if (goog.DEBUG) {
  GH.tpl.backlogview.renderDragOverlay.soyTemplateName = 'GH.tpl.backlogview.renderDragOverlay';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanView.js' */
define("jira-agile/rapid/ui/plan/plan-view",["require","jquery","jira-agile/rapid/global-events","jira-agile/rapid/ui/plan/plan-controls","jira-agile/rapid/ui/kanplan/kanplan-acknowledge","jira-agile/tooltip","jira-agile/rapid/const/PageMode","jira-agile/rapid/ui/bento/bento-features","jira/analytics","jira/featureflags/feature-manager"],function(e,i,a,l,n,o,s,t,r,d){"use strict";var g,p,c=void 0;a.on("pre-initialization",function(){p=e("jira-agile/rapid/ui/plan/plan-controller"),g=e("jira-agile/rapid/ui/plan/BacklogView"),c=e("jira-agile/rapid/ui/plan/plan-drag-and-drop")});var u={},h=!1;return u.init=function(){var e=i(document);e.on("click",".js-view-action-toggle-releases-column, .js-release-toggle",p.toggleVersionsColumn),e.on("click",".js-view-action-toggle-epics-column, .js-epic-toggle",p.toggleEpicsColumn),e.on("click",".js-view-actions-plan .js-view-action-toggle-epics-lozenge",p.toggleEpicsShowOnBacklog),h=GH.RapidBoard.State.isAgilityBoard()},u.show=function(){u.detailViewPositioned=!1,i("body").addClass("ghx-mode-planning");var e=GH.tpl.plancontroller.renderSkeleton({shouldShowEpic:!h&&GH.RapidBoard.State.showEpicAsPanel(),shouldHidePanels:h});i("#ghx-plan").empty().append(e);var a=i(".js-release-toggle");o.tipsify({selector:a,gravity:"w",html:!0,className:"ghx-tipsy-alt"});var l=i(".js-epic-toggle");o.tipsify({selector:l,gravity:"w",html:!0,className:"ghx-tipsy-alt"});var s=GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.isSimpleBoard,r=s||t.isBentoInBacklogEnabled();GH.DetailsView.setContainerSelector("#ghx-detail-view"),GH.DetailsView.setOptions({canClose:!0,showActionsCog:!0,showSubtaskTab:!0,showLogWorkTrigger:!1,updateSizeHandler:u.updateDetailViewSize,closeHandler:p.closeDetailsView,isBentoInBacklogEnabled:r}),r&&AJS.$("#ghx-issue-fragment").on("hide-backlog-issue",function(){p.closeDetailsView()}),u.applyBacklogWillChangePerfHandlers(),GH.RapidBoard.State.isKanbanBoard()&&n.show(),delete g.container},u.updateDetailViewState=function(){var e=p.isDetailsViewOpened();e?(i("#ghx-plan-group").addClass("ghx-has-detail"),i("#ghx-detail-view").css({display:""})):(i("#ghx-plan-group").removeClass("ghx-has-detail"),i("#ghx-detail-view").css({display:"none"})),GH.ViewActions.setDetailViewVisible(e)},u.updateVersionColumnState=function(){var e=i("#ghx-version-column"),a=i("#ghx-plan-group"),l=i(".js-release-toggle"),n=p.isVersionsColumnVisible();n?(e.css({display:""}),a.addClass("ghx-version-expanded"),l.addClass("ghx-active"),o.disable(l)):(e.css({display:"none"}),a.removeClass("ghx-version-expanded"),l.attr("data-tooltip",GH.tpl.plancontroller.renderVersionPanelTipsyExpand()).removeClass("ghx-active"),o.enable(l)),GH.ViewActions.setVersionsPanelVisible(n)},u.updateEpicsColumnState=function(){var e=i("#ghx-epic-column"),a=i("#ghx-plan-group"),l=i(".js-epic-toggle"),n=p.isEpicsColumnVisible()&&GH.RapidBoard.State.showEpicAsPanel();n?(e.css({display:""}),a.addClass("ghx-epic-expanded"),l.addClass("ghx-active")):(e.css({display:"none"}),a.removeClass("ghx-epic-expanded"),l.attr("data-tooltip",GH.tpl.plancontroller.renderEpicPanelTipsyExpand()).removeClass("ghx-active")),GH.ViewActions.setEpicsPanelVisible(n)},u.updateViewActions=function(){GH.ViewActions.setDetailViewVisible(p.isDetailsViewOpened()),GH.ViewActions.setEpicsPanelVisible(p.isEpicsColumnVisible()),GH.ViewActions.setVersionsPanelVisible(p.isVersionsColumnVisible()),GH.GridDataController.getModel()&&GH.ViewActions.setSwimlanes(GH.GridDataController.getModel().hasSwimlanes())},u.updateHorizontalPositioning=function(){GH.DetailsView.updateSize()},u.applyBacklogWillChangePerfHandlers=function(){var e=function(e){return function(a){c.isAnyIssueBeingDragged()||i(a.currentTarget).toggleClass("will-change",e)}};i("#ghx-backlog").hover(e(!0),e(!1))},u.updateDetailViewSize=function(){var e=i("#ghx-detail-issue");if(e.length>0){var a=e.outerHeight(),l=i("#ghx-detail-head"),n=l.outerHeight(),o=i("#js-detail-nav-content");o.css({height:a-n-13})}},u.doUpdateDetailsView=function(){u.detailViewPositioned||(u.detailViewPositioned=!0,u.updateFixedElementPositioning())},u.hide=function(){i("body").removeClass("ghx-mode-planning"),i("#ghx-plan").empty()},u.hideLoadingFilter=function(){i("body").removeClass("ghx-loading-quickfilter")},u.showLoadingBacklog=function(){i("body").addClass("ghx-loading-backlog"),i(".ghx-throbber").spin("large")},u.hideLoadingBacklog=function(){i("body").removeClass("ghx-loading-backlog"),i(".ghx-throbber").spin(!1)},u.updateFixedElementPositioning=function(){p.isVisible&&(l.resizeQuickFilters({mode:s.PLAN}),u.updateHorizontalPositioning())},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanAcknowledge.js' */
define("jira-agile/rapid/ui/kanplan/kanplan-acknowledge",["require"],function(){"use strict";var e=require("underscore"),n=require("jquery"),a=require("jira-agile/rapid/const/PageMode"),o={},r=require("jira-agile/rapid/ui/kanplan/kan-plan-feature-service"),i={},l="kanplan.acknowledge.display",d=null;o.init=function(){d=t()};var t=function(){i=GH.storage.get(l);var a=null;if(e.isNull(i)){var o=function(e){i=e,GH.storage.put(l,e)};a=GH.Ajax.get({url:"/xboard/plan/kanban/acknowledgeDisplay"}),a.done(o)}else a=n.Deferred().resolve();return a};return o.show=function(){o.hide(),d&&d.done(function(){if(o.canShowAcknowledge()){var e=void 0;GH.RapidBoard.State.isWorkMode()?(e=n(GH.tpl.kanplan.kanplanacknowledge.renderWorkMode()),e.find(".aui-button-primary").on("click",function(){o.close().always(function(){GH.RapidBoard.ViewController.setMode(a.PLAN)})})):e=n(GH.tpl.kanplan.kanplanacknowledge.renderPlanMode({learnMoreURL:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+your+Kanban+backlog","isLocal":false}.url})),e.find(".ghx-ack-close").on("click",o.close),n("#gh").prepend(e)}})},o.canShowAcknowledge=function(){return!!r.shouldShowKanbanBacklog()&&(GH.RapidBoard.State.isWorkMode()?!i.isClosedOnWorkMode:!i.isClosedOnPlanMode)},o.hide=function(){n("#gh").find(".ghx-kanplan-ack").remove(),GH.RapidBoard.ViewController.handleResizeEvent()},o.close=function(){var e=GH.Ajax.post({url:"/xboard/plan/kanban/closeAcknowledge?mode="+GH.RapidBoard.State.data.mode});return e.done(function(){GH.RapidBoard.State.isWorkMode()?i.isClosedOnWorkMode=!0:i.isClosedOnPlanMode=!0,GH.storage.put(l,i),o.hide()}),e},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanConvertDialog.js' */
function _classCallCheck(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,e,t){return e&&n(a.prototype,e),t&&n(a,t),a}}();define("jira-agile/rapid/ui/kanplan/KanPlanConvertDialog",["jira-agile/rapid/ui/kanplan/kan-plan-feature-service","jira-agile/rapid/events","jira-agile/rapid/analytics-tracker","jira-agile/rapid/ui/SPConfigController"],function(n,a,e,t){function i(n){var a=GH.Dialog.create({width:600,height:360,id:"ghx-kanplan-convert",onCancelFn:n.cancelCallback});return a.startAction=function(n){this.disableControls(),this.showSpinner(),_.isFunction(n)&&n()},a.stopAction=function(){this.enableControls(),this.hideSpinner()},a.addHeader("Kanban backlog"),a.addPanel("","panel"),a.getCurrentPanel().html(GH.tpl.kanplan.convertDialog({columnName:n.columnName})),a.addButton("Let me choose",a.startAction.bind(a,n.secondaryCallback),"aui-button"),a.addButton("Yes, use this column",a.startAction.bind(a,n.callback),"aui-button aui-button-primary"),a.addCancel("Cancel",function(){return a.cancel(a)}),a}var r=function(){function e(){_classCallCheck(this,e),new a(this)}return _createClass(e,[{key:"setRapidViewId",value:function(n){this.rapidViewId=n}},{key:"setColumnName",value:function(n){this.columnName=n}},{key:"show",value:function(){var a=this,r=function(){n.autoConvertKanPlan(a.rapidViewId).done(function(){a.trigger(e.CONVERT_SUCCESS)}).fail(l.stopAction.bind(l)),e.Analytics.confirm()},o=e.Analytics.cancel,c=function(){e.Analytics.configure(),t.openConfig("columns"),l.remove()},l=i({callback:r,secondaryCallback:c,cancelCallback:o,columnName:this.columnName});l.show()}}]),e}();r.CONVERT_SUCCESS="kanplan.convert.success";var o=new e("jira-software.kanplan.onboarding.convert");return r.Analytics={confirm:function(){return o.trigger("confirm")},configure:function(){return o.trigger("configure")},cancel:function(){return o.trigger("cancel")}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanConvertDialog.soy' */
// This file was automatically generated from KanPlanConvertDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }


GH.tpl.kanplan.convertDialog = function(opt_data, opt_ignored) {
  return '<div><div class="ghx-kanban-convert-image"></div><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('The Kanban backlog gives you a bigger space to plan work for your team. To enable, we\x27\x27ll move your \x3cstrong\x3e{0}\x3c/strong\x3e column to the new view. Is this the right column?',typeof (opt_data.columnName) === 'number' ? opt_data.columnName : soy.$$escapeHtml(opt_data.columnName)))) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.convertDialog.soyTemplateName = 'GH.tpl.kanplan.convertDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanAcknowledge.soy' */
// This file was automatically generated from KanPlanAcknowledge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.kanplanacknowledge.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }
if (typeof GH.tpl.kanplan.kanplanacknowledge == 'undefined') { GH.tpl.kanplan.kanplanacknowledge = {}; }


GH.tpl.kanplan.kanplanacknowledge.renderWorkMode = function(opt_data, opt_ignored) {
  return '<div class="ghx-kanplan-ack"><div class="ghx-kanplan-ack-container ghx-kanplan-ack-workmode"><div class="ghx-ack-close-button ghx-ack-close"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close acknowledge') + '</span></div><h2>' + soy.$$escapeHtml('Your Kanban board simplified') + '</h2><p>' + soy.$$filterNoAutoescape(AJS.format('You now have a Kanban backlog, where you get more space to plan your team\x27\x27s work. With this, your Kanban board is now a distraction-free zone for your work-in-progress.','<b>','</b>','<b>','</b>')) + '</p><div class="ghx-button-container"><button class="aui-button aui-button-primary">' + soy.$$escapeHtml('Take me there') + '</button><a href="#" class="ghx-ack-close">' + soy.$$escapeHtml('Not now') + '</a></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.kanplanacknowledge.renderWorkMode.soyTemplateName = 'GH.tpl.kanplan.kanplanacknowledge.renderWorkMode';
}


GH.tpl.kanplan.kanplanacknowledge.renderPlanMode = function(opt_data, opt_ignored) {
  return '<div class="ghx-kanplan-ack"><div class="ghx-kanplan-ack-container ghx-kanplan-ack-planmode"><div class="ghx-ack-close-button ghx-ack-close"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close acknowledge') + '</span></div><h2>' + soy.$$escapeHtml('Your bigger and better Backlog') + '</h2><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('You now have a dedicated backlog to create, prioritize, and select work for development. Meanwhile, your Kanban board is now a distraction-free zone for your work-in-progress.')) + '</p><div class="ghx-button-container"><button class="aui-button aui-button-primary ghx-ack-close">' + soy.$$escapeHtml('OK, got it') + '</button><a target="_blank" href="' + soy.$$escapeHtml(opt_data.learnMoreURL) + '">' + soy.$$escapeHtml('Learn more') + '</a></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.kanplanacknowledge.renderPlanMode.soyTemplateName = 'GH.tpl.kanplan.kanplanacknowledge.renderPlanMode';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogController.js' */
define("jira-agile/rapid/ui/plan/backlog-controller",["require"],function(e){"use strict";function i(e){var i=n.getIssueData(e);i&&i.parentKey&&n.isParentAndCollapsed(i.parentKey)&&S.toggleExpandState(i.parentKey)}function t(e){if(GH.RapidBoard.State.isKanbanBoard()){var i=s.map(e.issues,function(e){return e.issueKey});return n.hasAnyIssueInvisible(i)}return!0}function a(e,i,t){var a=[];return s.each(i,function(i){t[i]||a.push(e[i])}),a}var s=e("underscore"),r=e("jquery"),n=e("jira-agile/rapid/ui/plan/backlog-model"),l=e("jira-agile/rapid/ui/plan/BacklogView"),d=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),o=e("jira-agile/rapid/global-events"),u=e("jira-agile/rapid/ui/plan/sprint-backlog-controller"),c=e("jira-agile/rapid/ui/plan/sprint-view"),p=e("jira-agile/rapid/ui/plan/sprint-backlog-view"),g=e("jira-agile/rapid/ui/plan/sprint-config"),f=e("jira-agile/rapid/ui/plan/plan-rank-controller"),I=e("jira-agile/rapid/ui/plan/plan-controls"),v=e("jira-agile/rapid/ui/plan/plan-view"),S=e("jira-agile/rapid/ui/plan/plan-issue-list-view"),h=e("jira-agile/rapid/ui/plan/plan-controller"),E=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),b=e("jira-agile/rapid/ui/plan/sprint-controller"),C=e("jira-agile/rapid/const/PageMode"),H=e("jira-agile/rapid/configuration/ConfigContextLoader"),w=e("jira-agile/rapid/board-data-loader"),V=e("jira/featureflags/simplified-ux-feature-manager"),D=e("jira-agile/rapid/work/quick-filters-bridge"),k=e("jira-agile/rapid/ui/bento/bento-features"),y=e("jira-agile/features/feature-flags"),G=e("jira/featureflags/feature-manager"),F=null;o.on("pre-initialization",function(){F=e("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason")});var m=new GH.Events;m.visible=!1,m.rapidViewData=void 0,m.rapidViewConfig=void 0,m.firstIssueView=!0,m.lastExecutedSearchFilter=void 0,m.issueCreatedCallbacks={},m.init=function(){d.init(),u.init(),b.init(),f.init();var e=r(GH);e.bind("issueUpdated",m.handleIssueUpdated),AJS.$("#ghx-issue-fragment").on("issue-updated",function(e,i){var t={type:"issueUpdated"},a={issueKey:i.issueKey,fieldId:i.fieldId,source:"detailView"};m.handleIssueUpdated(t,a)}),e.bind("issueCreated",m.handleIssueCreated),e.bind("issuesRemovedFromSprint",m.handleIssuesRemovedFromSprint),e.bind(GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED,m.handleSprintStarted),r(I.quickfilters).bind("quickFilterChange",function(){m.visible&&m.loadData()})},m.setRapidView=function(e){m.rapidViewData=e},m.setRapidViewConfig=function(e){m.rapidViewConfig=e},m.show=function(e){return!!m.rapidViewData&&(m.visible=!0,void m.loadData().done(e))},m.hide=function(){GH.EpicView.hide(),m.visible=!1},m.loadData=function(e){v.showLoadingBacklog();var i=w.loadData(C.PLAN,function(){return B(e)});return m.processGetDataResponse(e,i)};var B=function(){var e=m.rapidViewData.id,i={rapidViewId:e,activeQuickFilters:I.quickfilters.getActiveQuickFilters(),selectedProjectKey:GH.RapidBoard.projectKey};s.isEmpty(i.activeQuickFilters)&&delete i.activeQuickFilters,GH.planOnboarding.refresh();var t="/xboard/plan/backlog/data.json",a={url:t,data:i,deferErrorHandling:!0};return GH.Ajax.get(a,"backlogDataModel")};m.processGetDataResponse=function(e,i){var t=this,a=m.rapidViewData.id,s=AJS.$.Deferred(),r=i.done(function(i){m.processData(e,i),s.resolve()});return r.fail(function(e){if(v.hideLoadingBacklog(),h.hide(),GH.RapidBoard.State.isKanbanBoard()){var i=t._getMessageFromErrorResponse(e);i==="Kanban backlog is not enabled for this board"&&(GH.RapidBoard.ViewController.sidebarController.removePlanMenuItem(a),AJS.flag({type:"info",body:i}),GH.RapidBoard.ViewController.setMode(C.WORK))}s.resolve()}),s.promise()},m._getMessageFromErrorResponse=function(e){return e.error&&e.error.errors&&e.error.errors[0]&&e.error.errors[0].message},m.processData=function(e,i){m.visible&&(m.lastExecutedSearchFilter=void 0,n.setRankCustomFieldId(i.rankCustomFieldId),n.setEstimationStatistic(m.rapidViewConfig.estimationStatistic),n.setTrackingStatistic(m.rapidViewConfig.trackingStatistic),GH.VersionController.setProjects(i.projects),GH.VersionController.setVersions(i.versionData),GH.EpicController.setEpicData(i.epicData),n.setData(i),n.setCanManageSprints(i.canManageSprints),n.setComplexQuery(i.complexQuery),n.setCanCreateIssue(i.canCreateIssue),n.setSupportsPages(i.supportsPages),d.validateCurrentSelection(),GH.VersionController.validateSelectedVersion(),GH.EpicController.validateSelectedEpic(),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||(GH.VersionView.show(),GH.EpicView.show()),m.updateVersionFiltering(!0),m.updateEpicFiltering(!0),l.draw(),GH.VersionController.registerVersionsCount(),GH.EpicController.registerEpicsCount(i.epicData),m.updateBoardState(i),I.searchFilter.clearLastSearch(),I.searchFilter.searchQuery(),v.hideLoadingBacklog(),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||GH.RapidBoard.ViewController.updateContentContainer(),h.updateDetailsView(d.getSelectedIssueKey(),null,e),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||l.updateIssueSelectionState(!0),k.isBentoInBacklogEnabled()&&GH.RapidBoard.State.isPlanMode()&&GH.RapidBoard.State.isDetailsViewPlanOpened()&&(AJS.$("#ghx-issue-fragment").trigger("detail-view-ready",GH.DetailsView.getSelectedIssueKey(),m.firstIssueView),m.firstIssueView=!1),H.prefetch(),JIRA.trace("gh.rapid.view.rendered"),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()&&h.trigger("after:show"))},m.updateBoardState=function(e){if(e&&e.versionData&&e.versionData.versionsPerProject&&e.issues&&e.projects&&e.epicData&&e.epicData.epics){var i=Object.getOwnPropertyNames(e.versionData.versionsPerProject).map(function(i){return e.versionData.versionsPerProject[i].length}).reduce(function(e,i){return e+i},0);GH.RapidBoard.State.numberOfIssues.set(e.issues.length),GH.RapidBoard.State.numberOfProjects.set(e.projects.length),GH.RapidBoard.State.numberOfVersions.set(i),GH.RapidBoard.State.numberOfEpics.set(e.epicData.epics.length)}},m.updateUIAfterSelectionChange=function(e){l.updateIssueSelectionState(e.doScroll),h.updateDetailsView(d.getSelectedIssueKey(),e.openDetailsView)},m.updateEpicData=function(){if(!m.visible)return r.Deferred().resolve();var e={rapidViewId:m.rapidViewData.id};return GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:e},"epics").done(function(e){m.visible&&m.setEpicData(e)})},m.setEpicData=function(e){GH.EpicController.setEpicData(e),GH.EpicView.updateEpics()},m.updateVersionData=function(){if(!m.visible)return r.Deferred().resolve();var e={rapidViewId:m.rapidViewData.id,activeQuickFilters:I.quickfilters.getActiveQuickFilters()};return GH.Ajax.get({url:"/xboard/plan/backlog/versions.json",data:e},"versions").done(function(e){m.visible&&m.setVersionData(e.versionData)})},m.setVersionData=function(e){GH.VersionController.setVersions(e),GH.VersionController.validateSelectedVersion(),GH.VersionView.updateView()},m.moveIssues=function(e,i,t,a){var s=n.moveIssuesNew(e,i,t,a);return l.redrawChangedModels(s),!n.isRankable()||n.hasAnySubtasks(e)},m.reorderIssuesInSprint=function(e,i){var t=n.reorderIssuesInModel(e,i);l.redrawChangedModels(t)},m.revertStatistics=function(){c.updateSprintStatistics(),GH.RapidBoard.State.isCollapsibleBacklogEnabled()||p.updateBacklogHeader()},m.handleSprintStarted=function(){d.clearSelection(),GH.RapidBoard.State.isAgilityBoard()?GH.Navigation.gotoDefaultRapidBoardPageAfterSprintStarted(m.rapidViewData.id):(GH.RapidBoard.ViewController.setMode(C.WORK),GH.RapidBoard.State.pushState())},m.handleIssueForEpicCreated=function(e,i){if(m.visible)return s.isUndefined(m.handleIssueForEpicCreated.deferred)&&(m.handleIssueForEpicCreated.deferred=new r.Deferred,setTimeout(function(){m.loadData().then(function(){m.handleIssueForEpicCreated.deferred.resolve(),m.handleIssueForEpicCreated.deferred=void 0},function(){m.handleIssueForEpicCreated.deferred.reject()})},0)),m.handleIssueForEpicCreated.deferred},m.registerIssueCreatedCallback=function(e,i){m.issueCreatedCallbacks[e]=i},m.unregisterIssueCreatedCallback=function(e){delete m.issueCreatedCallbacks[e]},m.handleIssueCreated=function(e,i){if(m.visible){m.trigger("before:rankCreatedIssue");var t=s.clone(m.issueCreatedCallbacks);setTimeout(function(){m.handleIssueCreatedImpl(i,t).always(function(){m.trigger("after:rankCreatedIssue")})},0)}},m.handleIssueCreatedImpl=function(e,i){function t(e){var i=s.map(e,function(e){return{issueKey:e.key,issueId:e.id,issueType:e.fields.issuetype.id}}),t=GH.EpicConfig.getEpicIssueTypeId();return s.reduce(i,function(e,i){return i.issueType===t?e.epics.push(i):e.issues.push(i),e},{issues:[],epics:[]})}if(e.isSubtask)return void m.subtasksCreated(e);var a=r.Deferred();return m.getIssueDetails(e.issues,"issuetype").then(function(e){var s=t(e.issues);m.issuesAndEpicsCreated(s.issues,s.epics,i).always(function(){a.resolve()})}),a.promise()},m.getIssueDetails=function(e,i){var t=s.pluck(e,"issueKey");return m.getIssueDetailsByKeys(t,i)},m.getIssueDetailsByKeys=function(e,i){var t=e.join(","),a="issueKey in ("+t+")";return GH.Ajax.get({bareUrl:GH.Ajax.buildBareRestUrl("/rest/api/2/search"),data:{jql:a,fields:i}},"getissues")},m.issuesAndEpicsCreated=function(e,i,t){if(!s.isEmpty(e)||!s.isEmpty(i)){if(GH.RapidBoard.State.showEpicAsPanel()&&s.isEmpty(e))return m.reloadAndShowCreatedEpics(i);var a=s.map(t,function(t){return!!s.isFunction(t)&&t(e,i)}),n=s.filter(a,function(e){return e&&(e instanceof r.Deferred||s.isFunction(e.promise))}),l=s.map(n,function(e){var i=r.Deferred();return e.always?e.always(i.resolve):e.then(i.resolve,i.resolve),i});return r.when.apply(r,l).then(function(){m.reloadAndSelectCreatedIssues(e)})}},m.subtasksCreated=function(e){var a=k.isBentoEnabled()&&e.isSubtask;a||(GH.DetailsViewScrollTracker.setSelectedTab(GH.DetailsView.TAB_SUBTASKS),m.loadData(F.SUBTASKS_CHANGED).done(function(){e&&e.issues&&e.issues.length>0&&i(e.issues[0].issueKey),t(e)&&GH.RapidBoard.QuickCreate.showSubtaskCreatedMessage(e)}))},m.reloadAndSelectCreatedIssues=function(e){return m.loadData().done(function(){var i=s.last(e),t=n.isIssueVisible(i.issueKey);t?d.selectIssue(i.issueKey):GH.RapidBoard.QuickCreate.showCreatedIssuesMessage({issues:e})})},m.reloadAndShowCreatedEpics=function(e){m.updateEpicData().done(function(){m._showCreatedEpicsMessage(e),GH.EpicView.renderNewEpics(e)})},m._showCreatedEpicsMessage=function(e){var i=s.last(e),t=GH.EpicController.getEpicModel().getEpicList(),a=t.isIssueVisible(i.issueKey);GH.RapidBoard.QuickCreate.showCreatedEpicsMessage({issues:e},a),a&&GH.EpicView.scrollToBottom()},m._getIssueId=function(e){var i=n.findModelWithIssue(e);return i?i.getIssueList().getIssueIdForKey(e):null},m.handleIssueUpdated=function(e,i){if(m.visible){var t=i.issueKey?m._getIssueId(i.issueKey):parseInt(i.issueId,10),a=n.findModelWithIssue(t),s=!a,r=!1,l=!1,d=!1,o=!1;if("quickEdit"===i.source?(r=!0,l=!0,d=!0,!a&&n.trackingStatistic.isEnabled&&(o=!0)):(l="epic"===i.fieldId||i.fieldId===m.rapidViewConfig.estimationStatistic.fieldId||i.fieldId===GH.EpicConfig.getEpicLinkFieldId(),d="fixVersions"===i.fieldId||"versions"===i.fieldId||i.fieldId===m.rapidViewConfig.estimationStatistic.fieldId),GH.DetailsView.opts.isBentoInBacklogEnabled)"sprint"!==i.fieldId&&i.fieldId!==g.getSprintFieldId()||(o=!0);else if(i.fieldChanges){var u=i.fieldChanges[g.getSprintFieldId()];u&&u.original!==u.updated&&(o=!0)}null==t&&(o=!0),o?s?m.loadData(F.SUBTASKS_CHANGED):m.loadData():(d?m.updateVersionData().then(m.reloadSingleIssue.bind(null,t)):m.reloadSingleIssue(t),r&&(s?h.reloadDetailView(F.SUBTASKS_CHANGED):h.reloadDetailView()),l&&m.updateEpicData())}},m.handleIssuesRemovedFromSprint=function(e,i){m.visible&&(1===i.issueKeys.length&&(d.selectIssue(i.issueKeys[0]),d.selectionManager._addSelectedIssueKeys(i.issueKeys)),m.loadData())},m.reloadSingleIssue=function(e){var i={rapidViewId:m.rapidViewData.id,issueId:e},t=GH.BacklogModel.getIssueDataForId(e),a=null;t&&t.parentId&&(a=t.epic),GH.Ajax.get({url:"/xboard/plan/backlog/issue.json",data:i},"updateSingleIssue."+e).done(function(e){a&&(e.epic=a),m.updateIssues(e),JIRA.trace("gh.backlog.issue.updated."+e.key)})},m.updateIssues=function(e){s.isArray(e)||(e=[e]);var i=[],t=!1;s.each(e,function(e){var a=n.findModelWithIssue(e.key);a&&(GH.RapidBoard.State.showEpicAsPanel()&&e.typeId===GH.EpicConfig.getEpicIssueTypeId()?(a.getIssueList().removeIssues(e.key),t=!0):a.getIssueList().updateIssue(e),i.push(a))});var a=e.map(function(e){return n.isSubtask(e.key)?e.parentKey:e.key});if(n.assignSubtasksToSameEpicAsParent(a),n.updateFiltering(),t){m.updateEpicData(),d.validateCurrentSelection();var r=d.getSelectedIssueKey();GH.DetailsView.setSelectedIssueKey(r),h.reloadDetailView()}l.redrawChangedModels(i)},m.removeIssues=function(e,i){e.getIssueList().removeIssues(i),l.redrawChangedModel(e)},m.isFiltersActive=function(){return!s.isEmpty(I.quickfilters.getActiveQuickFilters())},m.executeSearch=function(e){if(s.isNull(e))m.lastExecutedSearchFilter=null;else{var i=" ";V.isStickyQuickfilterFixEnabled()&&(m.lastExecutedSearchText=e),m.lastExecutedSearchFilter=function(t){return t=t||{},e.test(t.key+i+t.summary+i+t.typeName+i+t.assignee+i+t.assigneeName)}}E.setInstantFilter(m.lastExecutedSearchFilter);var t=n.updateFiltering();return t&&l.updateHiddenIssues(),V.isStickyQuickfilterFixEnabled()&&GH.RapidBoard.State.replaceState(),!1};var R=function(e,i,t){var a=void 0;a=i.length?function(e){return i.some(function(i){return t(e,i)})}:function(){return!0},E.setFilter(e,a);var s=n.updateFiltering();s&&l.updateHiddenIssues()};return m.filterByAssignees=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return R("assignees",e,function(e,i){return!e.assignee&&!i||e.assignee===i})},m.filterByLabels=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return R("labels",e,function(e,i){return e.labels&&e.labels.includes(i)})},m.clearFilters=function(){var i=I.quickfilters.clearFilters();if(G.isFeatureEnabled(y.DEFER_FILTERS_AND_HANDLERS)?(JIRA.API.getSidebar().then(function(){return D.isReactFiltersEnabled().then(function(e){e&&GH.bridge.FilterBridge.clearFilters()})}),e("jira/navigation").then(function(){return D.isReactFiltersEnabled().then(function(e){e&&GH.bridge.FilterBridge.clearFilters()})})):D.isReactFiltersEnabled().then(function(e){e&&GH.bridge.FilterBridge.clearFilters()}),I.searchFilter.clearSearchBox(),GH.VersionController.setFilteredVersionId(null),GH.EpicController.setFilteredEpicKey(null),GH.EpicController.clearVersionFiltering(),i)E.clearAllFilters(),m.loadData().done(function(){GH.RapidBoard.State.pushState()});else{var t=E.clearAllFilters();if(t){GH.EpicView.deselectAllEpics(),GH.VersionView.deselectAllVersions();var a=n.updateFiltering();a&&l.updateHiddenIssues(),GH.RapidBoard.State.pushState()}}},m.updateEpicFiltering=function(e){var i=GH.EpicController.getFilteredEpicKey();E.setEpicFilter(i);var t=n.updateFiltering();t&&!e&&l.updateHiddenIssues()},m.updateVersionFiltering=function(e){var i=GH.VersionController.getFilteredVersionId();E.setVersionFilter(i);var t=n.updateFiltering();t&&!e&&l.updateHiddenIssues(),GH.EpicController.applyVersionFiltering()},m.calculateIssueRenderData=function(){var e=d.getSelectedIssueKeys(),i={};s.each(e,function(e){i[e]=!0});var t=d.getSelectedIssueKey(),a=n.getHiddenBySearchIssues();return{selectedIssueKeys:i,mainSelectedIssue:t,hiddenIssues:a}},m.extractPrintableIssuesFromAllSprints=function(){var e=[];return s.each(n.getSprintModels(),function(i){var t=i.getSprintData(),r=a(i.getIssueList().getAllIssues(),i.getIssueList().getVisibleRankables(),n.getHiddenBySearchIssues());s.isEmpty(r)||e.push({sprintId:t.id,sprintName:t.name,issues:r})}),e},m.getPrintableIssuesFromPlanBacklog=function(){var e=n.getBacklogModel2().getIssueList();return a(e.getAllIssues(),e.getVisibleRankables(),n.getHiddenBySearchIssues())},m.getEpicMap=function(){return GH.EpicController.getEpicModel().getEpicList().getAllIssues()},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogStatistics.js' */
define("jira-agile/rapid/ui/plan/backlog-statistics",["require"],function(t){"use strict";var e=t("underscore"),a=t("jira-agile/rapid/global-events"),i=(t("jira/featureflags/feature-manager"),void 0);a.on("pre-initialization",function(){i=t("jira-agile/rapid/ui/plan/backlog-model")});var s={EXCLUDE_SUBTASKS_COLUMN_CONSTRAINT:"issueCountExclSubs"};return s.ignoredStatisticTypes={issueCount:!0,none:!0},s.getIssueListEstimateStatistics=function(t){var e=s._calculateSprintModelStatistics(t),a=i.estimationStatistic,n={};n.shown=a&&a.isEnabled&&!s.ignoredStatisticTypes[a.typeId]||!1,n.shown&&(n.name=a?a.name:"",n.total={raw:e.estimate.total,formatted:s.formatStatisticForRendering(a,e.estimate.total)},n.visible={raw:e.estimate.visible,formatted:s.formatStatisticForRendering(a,e.estimate.visible)});var r=i.trackingStatistic,l={};return l.shown=r&&r.isEnabled&&!s.ignoredStatisticTypes[a.typeId]&&(e.estimate.total!=e.tracking.total||e.estimate.visible!=e.tracking.visible)||!1,l.shown&&(l.name=r?r.name:"",l.total={raw:e.tracking.total,formatted:s.formatStatisticForRendering(r,e.tracking.total)},l.visible={raw:e.tracking.visible,formatted:s.formatStatisticForRendering(r,e.tracking.visible)}),{estimate:n,tracking:l}},s._calculateSprintModelStatistics=function(t){var a,i=t.getAllIssues(),s=0,n=0,r=0,l=0,o=0,u=0;return e.each(i,function(i){var c=t.isIssueVisible(i.key);e.isUndefined(i.estimateStatistic)||e.isUndefined(i.estimateStatistic.statFieldValue.value)||(a=i.estimateStatistic.statFieldValue.value,s+=a,c&&(n+=a)),e.isUndefined(i.trackingStatistic)||e.isUndefined(i.trackingStatistic.statFieldValue.value)||(a=i.trackingStatistic.statFieldValue.value,r+=a,c&&(l+=a)),o++,c&&u++}),{estimate:{total:s,visible:n},tracking:{total:r,visible:l},issueCount:{total:o,visible:u}}},s.formatStatisticForRendering=function(t,e){return"duration"==t.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e):GH.NumberFormat.format(e)},s.getAllIssuesBeforeIndex=function(t,e,a,i){var n=[];i=i||function(t){return!s._isRankableId(e[t])};for(var r=a-1;r>=0&&i(r);r--)n=[e[r]].concat(n);return s._mapIssueKeysToIssues(t,n)},s._isRankableId=function(t){return e.isNumber(t)},s._mapIssueKeysToIssues=function(t,a){var i=e.map(a,function(e){return t[e]});return e.filter(i,function(t){return!e.isUndefined(t)})},s.getIssueListStats=function(t,a,i){var n,r=t.getAllIssues(),l=e.keys(r).length,o=t.getNumVisibleIssues(),u=l>0;return n=a?i?s.getActiveSprintEmptyMessage(!u):s.getFutureSprintEmptyMessage(!u):s.getBacklogEmptyMessage(!u),{totalCount:l,visibleCount:o,allVisible:l===o,noneVisible:0===o,hasIssues:u,empty:!u,emptyMessage:n}},s.getBacklogEmptyMessage=function(t){return t?"Your backlog is empty.":"There are no issues that match your current filter."},s.getFutureSprintEmptyMessage=function(t){return t?GH.RapidBoard.State.isScrumBoard()?"Plan a sprint by dragging the sprint footer down below some issues, or by dragging issues here.":"There are no issues on the board.":GH.RapidBoard.State.isScrumBoard()?"There are no issues that match your current filter.":"There are no issues that match your current filter."},s.getActiveSprintEmptyMessage=function(t){return t?"There are no issues in this sprint.":"There are no issues that match your current filter."},s.calculateSprintProgress=function(t,a,i){var n=s._getTodoInProgressDoneMapping(a),r=[{nameKey:"gh.boards.notstarted",name:"Not Started",title:"",total:{value:0,text:"0"}},{nameKey:"gh.boards.inprog",name:"In Progress",title:"",total:{value:0,text:"0"}},{nameKey:"gh.boards.done",name:"Done",title:"",total:{value:0,text:"0"}}];e.each(t.getAllIssues(),function(t){var a=n[t.statusId];e.isUndefined(a)||t.hidden||t.estimateStatistic&&t.estimateStatistic.statFieldValue&&t.estimateStatistic.statFieldValue.value&&(r[a].total.value+=t.estimateStatistic.statFieldValue.value)});var l=e.reduce(r,function(t,e){return t+e.total.value},0);if(!l)return e.each(r,function(t){t.total.text=""}),r;var o=s.formatStatisticForRendering(i,l);return e.each(r,function(t){t.total.text=s.formatStatisticForRendering(i,t.total.value),t.title=GH.tpl.sprintview.renderProgressIndicatorTitle({indicator:t,allIndicatorsTotalText:o,statLabel:i.name})}),r},s._getTodoInProgressDoneMapping=function(t){for(var a={},i=function(t){a[t]=n},s=0;s<t.length;s++){var n,r=t[s],l=r.statusIds;n=0===s?0:s===t.length-1?2:1,e.each(l,i)}return a},s.splitIssuesIntoNotDoneAndDone=function(t,a){var i=s._getTodoInProgressDoneMapping(a),n=[],r=[];return e.each(t,function(t){var e=i[t.statusId];2==e?r.push(t):n.push(t)}),{notDone:n,done:r}},s.getAssignedWorkStats=function(t){function a(t,e){return{assignee:t,assigneeName:e,totalEstimate:0,totalTrackingEstimate:0,issues:[]}}function n(t){t.totalEstimateText=s.formatStatisticForRendering(i.estimationStatistic,t.totalEstimate),i.trackingStatistic.isEnabled&&(t.totalTrackingEstimateText=s.formatStatisticForRendering(i.trackingStatistic,t.totalTrackingEstimate))}var r=t.getVisibleIssues(),l=e.reduce(r,function(t,e){var i,s=e.assignee;s?(t.assignees[s]||(t.assignees[s]=a(s,e.assigneeName)),i=t.assignees[s]):i=t.unassigned,i.issues.push(e),t.all.issues.push(e);var n=e.estimateStatistic&&e.estimateStatistic.statFieldValue&&e.estimateStatistic.statFieldValue.value;n&&(i.totalEstimate+=n,t.all.totalEstimate+=n);var r=e.trackingStatistic&&e.trackingStatistic.statFieldValue&&e.trackingStatistic.statFieldValue.value;return r&&(i.totalTrackingEstimate+=r,t.all.totalTrackingEstimate+=r),t},{unassigned:a(null,null),assignees:{},all:a(null,null)}),o=e.toArray(l.assignees).sort(function(t,e){return e.totalEstimate-t.totalEstimate||t.assigneeName.localeCompare(e.assigneeName)}),u=i.estimationStatistic;return s.ignoredStatisticTypes[u.typeId]||(e.each(o,n),n(l.unassigned),n(l.all)),{unassigned:l.unassigned,assigned:o,all:l.all}},s.calculateStatisticsFieldValue=function(t,e){return e.typeId===s.EXCLUDE_SUBTASKS_COLUMN_CONSTRAINT?t.getIssuesExcludingSubtasks().length:t.getIssueCount()},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintBacklogController.js' */
define("jira-agile/rapid/ui/plan/sprint-backlog-controller",["require"],function(i){"use strict";var r=i("jira-agile/rapid/ui/plan/sprint-backlog-view"),n={};return n.init=function(){r.init()},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintBacklogView.js' */
define("jira-agile/rapid/ui/plan/sprint-backlog-view",["require","jquery","underscore","jira-agile/rapid/global-events","jira-agile/rapid/ui/plan/sprint-controller","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/backlog-statistics"],function(a,e,t,i,s,r,n){"use strict";function o(){e(".js-add-sprint").tooltip({html:!0,title:"data-tooltip"})}var l;i.on("pre-initialization",function(){l=a("jira-agile/rapid/ui/plan/backlog-controller")});var p={};p.containerSelector=".ghx-backlog-group",p.init=function(){e(document).on("click",".js-add-sprint",s.addSprint)},p.renderBacklog=function(a){var t=c(a),i=e(".ghx-backlog-group");i.append(e(t)),o()},p.updateBacklog=function(){var a=l.calculateIssueRenderData(),t=c(a),i=e(".ghx-backlog-group");i.empty().append(e(t)),o()},p.updateBacklogHeader=function(){e(".js-marker-backlog-header").replaceWith(d()),o()};var c=function(a){var e=r.getBacklogModel2(),t=e.getIssueList(),i=n.getIssueListStats(t,!1),s=t.getVisibleRankables(),o=t.getAllIssues(),l=GH.IssueListUtil.issueListToTree(s.map(function(a){return o[a]}));GH.IssueListUtil.applyExpandedState(l,GH.RapidBoard.State.getExpandedIssueKeys());var p={issueKeys:s,issues:l,issueListStats:i,epics:GH.EpicController.getEpicModel().getEpicList().getAllIssues(),issueRenderData:a,statLabel:r.estimationStatistic.name,estimationEnabled:r.estimationStatistic.isEnabled,isRankable:r.isRankable(),canManageSprints:r.canManageSprints(),complexQuery:r.complexQuery(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),shouldDisplayCreateSprintButton:GH.RapidBoard.State.isScrumBoard(),extraClasses:GH.RapidBoard.State.isKanbanBoard()?"ghx-kanban-backlog":void 0,isAgility:GH.RapidBoard.State.isAgilityBoard()};return GH.tpl.sprintbacklogview.renderBacklogIssues(p)},d=function(){var a=r.getBacklogModel2(),e=a.getIssueList(),t=n.getIssueListStats(e,!1),i={issueListStats:t,canManageSprints:r.canManageSprints(),complexQuery:r.complexQuery(),shouldDisplayCreateSprintButton:GH.RapidBoard.State.isScrumBoard()};return GH.tpl.sprintbacklogview.renderBacklogHeader(i)};return p});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintBacklogView.soy' */
// This file was automatically generated from SprintBacklogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintbacklogview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintbacklogview == 'undefined') { GH.tpl.sprintbacklogview = {}; }


GH.tpl.sprintbacklogview.renderBacklogIssues = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-error-group" ></div><div class="ghx-onboarding-fillyourbacklog-group"></div><div class="ghx-backlog-container ghx-open ghx-everything-else' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + GH.tpl.sprintbacklogview.renderBacklogHeader(opt_data) + '<div class="js-issue-list ghx-issues' + ((opt_data.issueListStats.noneVisible) ? ' ghx-no-issues' + ((opt_data.issueListStats.empty) ? ' js-empty-list' : '') : ' ghx-has-issues') + '"><div class="ghx-plan-dropzone"></div>' + GH.tpl.planissuelist.renderIssueList(opt_data) + '<div class="ghx-helper"><div class="ghx-description">' + soy.$$escapeHtml(opt_data.issueListStats.emptyMessage) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderBacklogIssues.soyTemplateName = 'GH.tpl.sprintbacklogview.renderBacklogIssues';
}


GH.tpl.sprintbacklogview.renderBacklogHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-backlog-header js-marker-backlog-header"><div class="header-left"><div class="ghx-expander"></div><div class="ghx-name">' + soy.$$escapeHtml('Backlog') + '</div>' + GH.tpl.planissuelist.renderIssueCount(opt_data) + '</div><div class="header-right"><div class="ghx-controls aui-group"><div class="aui-item">' + ((opt_data.shouldDisplayCreateSprintButton) ? '<button class="js-add-sprint aui-button ' + ((! opt_data.canManageSprints) ? ' disabled' : '') + '"' + ((! opt_data.canManageSprints) ? ((opt_data.complexQuery) ? 'data-tooltip="' + soy.$$escapeHtml('Only a Jira administrator can update this sprint. Try selecting a project in your current board filter.') + '"' : 'data-tooltip="' + soy.$$escapeHtml('You need the Manage sprints permission for all projects in the origin board to create a sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e') + '"') + 'aria-disabled="true"' : 'data-tooltip=""') + '>' + soy.$$escapeHtml('Create sprint') + '</button>' : '') + '</div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderBacklogHeader.soyTemplateName = 'GH.tpl.sprintbacklogview.renderBacklogHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanIssueListView.js' */
define("jira-agile/rapid/ui/plan/plan-issue-list-view",["require"],function(e){"use strict";function t(){return Array.prototype.join.call(arguments,", ")}var n=e("jquery"),s=e("jira-agile/rapid/ui/plan/backlog-model"),a="issue-key",r="fake-parent-issue-key",i=".js-issue",l=".ghx-marker",u=".ghx-parent-group",d="ghx-subtask",o={};return o.findPreviousVisibleIssueElementInList=function(e){var t=e.prevAll().filter(i).not(":hidden");return t.length?t:null},o.findPrevRankableElement=function(e){var n=e.prevAll().filter(t(l,i,u)).not(":hidden");return n.length&&this.getRankableId(e)===this.getRankableId(n)&&(n=n.prev()),n},o.findNextRankableElement=function(e){var n=e.nextAll().filter(t(l,i,u)).not(":hidden");return n.length&&this.getRankableId(e)===this.getRankableId(n)&&(n=n.next()),n},o.getIssueKey=function(e){return o.getClosestIssueElement(e).data(a)},o.getIssueId=function(e){return o.getClosestIssueElement(e).data(a)},o.isSubtask=function(e){return o.getClosestIssueElement(e).hasClass(d)},o.getRankableId=function(e){if(!e)return!1;var t=e.data(r)||e.data(a);if(!t){var n=o.getClosestIssueElement(e);if(n.length>0)return n.data(a)}return t},o.getIssueByKey=function(e){return n(".js-issue[data-issue-key="+e+"]")},o.toggleExpandState=function(e){_.isString(e)&&(e=o.getIssueByKey(e));var t="ghx-subtasks-expanded",n=e.parents(u),s=o.getIssueKey(e);n.toggleClass(t);var a=n.hasClass(t);return a?GH.RapidBoard.State.addIssueKeyToExpanded(s):GH.RapidBoard.State.removeIssueKeyFromExpanded(s),a},o.expandAllAfterTransition=function(e){e.forEach(function(e){if(s.isParentAndCollapsed(e))o.toggleExpandState(e);else if(s.isSubtask(e)){var t=s.getIssueData(e).parentKey;s.isParentAndCollapsed(t)&&o.toggleExpandState(t)}})},o.getClosestIssueElement=function(e){return e.closest(i)},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanIssueListFiltering.js' */
define("jira-agile/rapid/ui/plan/plan-issue-list-filtering",["require"],function(e){"use strict";var i=e("underscore"),n={};return n.EPIC_FILTER_KEY_NONE="none",n.VERSION_FILTER_ID_NONE="none",n.allFilters={},n.isNoneEpicFilterKey=function(e){return e===n.EPIC_FILTER_KEY_NONE},n.isNoneVersionFilterId=function(e){return e===n.VERSION_FILTER_ID_NONE},n.setFilter=function(e,i){i?n.allFilters[e]=i:delete n.allFilters[e]},n.clearAllFilters=function(){var e=!i.isEmpty(i.keys(n.allFilters));return n.allFilters={},e},n._getCompoundFilter=function(){return function(e){var t=i.any(n.allFilters,function(i){return!i(e)});return!t}},n.setEpicFilter=function(e){var t=null;return n.isNoneEpicFilterKey(e)?t=function(e){return i.isEmpty(e.epic)}:n.isEpicIssueSelectable(e)&&(t=function(i){return i.epic===e}),n.setFilter("epics",t)},n.isEpicIssueSelectable=function(e){var i=GH.EpicController.getEpicModel().getEpicList();return i.isIssueValid(e)&&i.isIssueVisible(e)},n.setVersionFilter=function(e){var t=null;return n.isNoneVersionFilterId(e)?t=function(e){return i.isEmpty(e.fixVersions)}:n.isVersionSelectable(e)&&(t=function(n){return i.some(n.fixVersions,function(i){return i===parseInt(e,10)})}),n.setFilter("versions",t)},n.isVersionSelectable=function(e){return null!=e},n.setInstantFilter=function(e){n.setFilter("instant",e)},n.applyToIssueLists=function(e){var t=n._getCompoundFilter(),r=!1;return i.each(e,function(e){var i=e.applySearchFilter(t);r=r||i}),r},n.applyToIssueList=function(e){n.applyToIssueLists([e])},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionView.js' */
!function(){"use strict";var e=require("jira/ajs/dropdown/dropdown");GH.TimeFormat,require("jira/featureflags/feature-manager");GH.VersionView={},GH.VersionView.dropdowns=[],GH.VersionView.init=function(){GH.VersionView.initializeInlineEdits()},GH.VersionView.shouldHidePanels=function(){return GH.RapidBoard.State.isAgilityBoard()},GH.VersionView.getContainer=function(e){return(e||_.isUndefined(GH.VersionView.container))&&(GH.VersionView.container=AJS.$("#ghx-version-column")),GH.VersionView.container},GH.VersionView.show=function(){if(!GH.VersionView.shouldHidePanels()){var e=GH.VersionController.getVersionModel(),i=GH.VersionView.getContainer(!0);i.html(GH.tpl.versionview.renderSkeleton({canCreateVersion:e.canUserCreateVersion()}));var t=i.find(".ghx-classification-scrollview");t.delegate(".ghx-classification-item","click",function(e){AJS.$(e.target).closest(".js-version-details-link, .js-version-actions, .js-editable-field, .js-editing-field, .aui-iconfont-calendar, input.text").not(".js-edit-versionName-trigger").length>0||GH.VersionView.toggleFiltering(AJS.$(this))}),t.delegate(".js-version-details-toggle","click",function(e){return GH.VersionView.toggleVersionDisplay(AJS.$(this)),!1}),t.delegate(".js-version-name","click",function(e){e.preventDefault()}),GH.VersionQuickCreate.setAccessibleProjects(e.projects),GH.VersionView.renderVersions(),GH.VersionQuickCreate.registerCreateVersionDialog()}},GH.VersionView.updateView=function(){GH.VersionView.renderVersions(),GH.PlanDragAndDrop.initializeClassificationDnD()},GH.VersionView.renderVersions=function(){var i=GH.VersionController.getVersionModel();if(!_.isUndefined(i)&&i.isValid()){var t={},n=GH.VersionController.getFilteredVersionId(),a=i.getUnreleasedVersionList();_.each(a,function(e){t[e.id]="open"==GH.VersionView.getTwixieState(e.id),e.versionStats.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.versionStats.doneEstimate),e.versionStats.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.versionStats.totalEstimate),e.versionStats.isIssueCountStatistic="issueCount"===GH.BacklogModel.estimationStatistic.typeId,e.versionStats.estimateStatisticName=GH.BacklogModel.estimationStatistic.name}),GH.VersionView.getContainer().find(".ghx-classification-scrollview").html(GH.tpl.versionview.renderVersions({versions:a,isNoneSelected:GH.PlanIssueListFiltering.isNoneVersionFilterId(n),isAllSelected:!n,selectedVersionId:n,isVersionExpandedById:t,canEditVersions:i.canUserCreateVersion(),showProjects:i.hasMultiProjects(),showEstimates:GH.RapidBoard.State.isScrumBoard()})),AJS.$(".js-version-actions").each(function(){var i=this,t="#"+AJS.$(i).attr("id").replace(/^dd-trigger-/,"dd-content-"),n=AJS.$(t),a=e.create({trigger:i,content:n,alignment:AJS.LEFT});AJS.$(a).bind("showLayer",function(){GH.RapidBoard.Util.InlineEditable.submitActiveEdits()}),GH.VersionView.dropdowns.push(a[0])})}},GH.VersionView.toggleFiltering=function(e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),GH.VersionView.deselectAllVersions();var i,t=e.attr("data-version-id");GH.VersionController.getFilteredVersionId()===t?i=null:(i=t,AJS.$("#ghx-version-column").find(".ghx-classification-all").removeClass("ghx-selected"),e.addClass("ghx-selected")),GH.VersionController.setFilteredVersionId(i),GH.RapidBoard.State.pushState(),GH.BacklogController.updateVersionFiltering(!1)},GH.VersionView.deselectAllVersions=function(){var e=AJS.$("#ghx-version-column"),i=e.find(".ghx-classification-item");i.removeClass("ghx-selected"),e.find(".ghx-classification-all").addClass("ghx-selected")},GH.VersionView.setTwixieState=function(e,i){var t="versionTwix-"+e;GH.BoardState.setPerViewValue(t,i)},GH.VersionView.getTwixieState=function(e){var i="versionTwix-"+e;return GH.BoardState.getPerViewValue(i,"closed")},GH.VersionView.toggleVersionDisplay=function(e){var i=e.parents(".ghx-classification-item");GH.VersionView.toggleVersionDisplayByElementWithAnimation(i)},GH.VersionView.toggleVersionDisplayByElement=function(e){var i=e.attr("data-version-id");e.hasClass("ghx-open")?(e.removeClass("ghx-open").addClass("ghx-closed"),GH.VersionView.setTwixieState(i,"closed")):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.VersionView.setTwixieState(i,"open"))},GH.VersionView.toggleVersionDisplayByElementWithAnimation=function(e){var i=e.attr("data-version-id"),t=e.find(".ghx-expanded");e.hasClass("ghx-open")?GH.RapidBoard.Animation.animateHeight(t,195,0).done(function(){e.removeClass("ghx-open").addClass("ghx-closed"),GH.VersionView.setTwixieState(i,"closed")}):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.RapidBoard.Animation.animateHeight(t,0,195).done(function(){GH.VersionView.setTwixieState(i,"open")}))},GH.VersionView.hideDropdown=function(){_.each(GH.VersionView.dropdowns,function(e){e.hide()})},GH.VersionView.initializeInlineEdits=function(){GH.RapidBoard.Util.InlineEditable.register(".js-edit-version-name",{renderView:GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView,preEdit:GH.RapidBoard.Util.InlineEditable.cancelActiveEdits,getViewElement:function(e){var i=AJS.$(this).parents(".js-version-actions-list").attr("data-version-id");return AJS.$('.ghx-classification-item[data-version-id="'+i+'"]').find(".js-edit-versionName-trigger")},getData:function(e){var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return i.versionId=e.parents(".ghx-classification-item").attr("data-version-id"),GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),AJS.$(e).closest(".ghx-header").addClass("ghx-editing-name"),i.maxLength=30,i},validate:function(e){var i=e.editElement.val();return!!GH.Validation.notBlank(e.editElement,"Version Name is required")&&(e.newValue=i,!0)},save:function(e){GH.VersionView.updateVersion(e.versionId,{name:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})},postEdit:function(e){AJS.$(e.viewElement).closest(".ghx-header").removeClass("ghx-editing-name")}});var e={getData:function(e){GH.RapidBoard.Util.InlineEditable.cancelActiveEdits();var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return i.versionId=e.parents(".ghx-classification-item").attr("data-version-id"),i}};GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-description-trigger",_.extend({},e,{save:function(e){GH.VersionView.updateVersion(e.versionId,{description:e.newValue}),GH.RapidBoard.Util.InlineEditable.updateView(e)}}));var i=(new Calendar,_.extend({},e,{renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:function(e){GH.RapidBoard.Util.InlineEditable.datePickerActivate(e,{ifFormat:GH.TimeFormat.dateFormat,showsTime:!1})},validate:function(e){return e.newValue=e.editElement.find("input").val(),!0},postEdit:function(e){AJS.$(e.viewElement).closest(".js-version-date").siblings(".ghx-error").remove()}}));GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-startDateFormatted-trigger",_.extend({},i,{save:function(e){GH.VersionView.updateVersion(e.versionId,{startDateFormatted:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})}})),GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-releaseDateFormatted-trigger",_.extend({},i,{save:function(e){GH.VersionView.updateVersion(e.versionId,{releaseDateFormatted:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})}}))},GH.VersionView.updateVersion=function(e,i){var t='.ghx-classification-item[data-version-id="'+e+'"]';return GH.VersionController.updateVersion(e,i,{name:t+" .js-version-name",description:t+" .js-version-description",startDate:t+" .js-version-start-date",releaseDate:t+" .js-version-release-date"},function(){AJS.$(t+" .ghx-error").empty()})},GH.VersionView.renderNewVersions=function(e){var i=AJS.$("#ghx-version-column");_.each(e,function(e){var t=i.find('.ghx-classification-item[data-version-id="'+e.id+'"]');t.hasClass("ghx-open")||GH.VersionView.toggleVersionDisplayByElement(t),GH.RapidBoard.Animation.animateHeight(t,0,251,GH.RapidBoard.Animation.LONG_DURATION)})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionView.soy' */
// This file was automatically generated from VersionView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.versionview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.versionview == 'undefined') { GH.tpl.versionview = {}; }


GH.tpl.versionview.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-group"><div class="ghx-classification-header"><div class="ghx-actions">' + ((opt_data.canCreateVersion) ? aui.buttons.button({extraClasses: ['aui-button-link', 'js-create-version'], text: 'Create version'}) + '<span class="ghx-divider">|</span>' : '') + '<div class="ghx-close js-release-toggle" title="' + soy.$$escapeHtml('Hide versions panel') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove-label"></span></div></div><h2>' + soy.$$escapeHtml('Versions') + '</h2></div><div class="ghx-classification-scrollview"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderSkeleton.soyTemplateName = 'GH.tpl.versionview.renderSkeleton';
}


GH.tpl.versionview.renderVersions = function(opt_data, opt_ignored) {
  var output = GH.tpl.versionview.renderAllVersions(opt_data) + '<div class="ghx-classification-cards">';
  var versionList19 = opt_data.versions;
  var versionListLen19 = versionList19.length;
  for (var versionIndex19 = 0; versionIndex19 < versionListLen19; versionIndex19++) {
    var versionData19 = versionList19[versionIndex19];
    output += GH.tpl.versionview.renderVersion({version: versionData19, isSelected: opt_data.selectedVersionId == versionData19.id, isVersionExpanded: opt_data.isVersionExpandedById[versionData19.id], canEditVersions: opt_data.canEditVersions, showProjects: opt_data.showProjects, showEstimates: opt_data.showEstimates});
  }
  output += '</div>' + ((opt_data.versions.length > 0) ? GH.tpl.versionview.renderVersionPending(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersions.soyTemplateName = 'GH.tpl.versionview.renderVersions';
}


GH.tpl.versionview.renderVersion = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item' + ((opt_data.isVersionExpanded) ? ' ghx-open' : ' ghx-closed') + ((! opt_data.canEditVersions) ? ' ghx-read-only' : '') + ((opt_data.isSelected) ? ' ghx-selected' : '') + '" data-version-id="' + soy.$$escapeHtml(opt_data.version.id) + '"><div class="ghx-inner"><div class="ghx-expander js-version-details-toggle" title="' + soy.$$escapeHtml('Hide/show version information') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName: 'versionName', fieldValue: opt_data.version.name, displayValue: opt_data.version.name}) + '</span>' + ((opt_data.version.project && opt_data.showProjects) ? '<span class="ghx-project-key" title="' + soy.$$escapeHtml(opt_data.version.project.name) + '">' + soy.$$escapeHtml(opt_data.version.project.key) + '</span>' : '') + ((opt_data.canEditVersions) ? '<span id="dd-trigger-' + soy.$$escapeHtml(opt_data.version.id) + '" class="ghx-swatch js-version-actions"></span>' : '') + '</h3><div id="dd-content-' + soy.$$escapeHtml(opt_data.version.id) + '" class="aui-list ghx-href-fix-list js-version-actions-list" data-version-id="' + soy.$$escapeHtml(opt_data.version.id) + '"><ul class="aui-list-section aui-last">' + ((opt_data.canEditVersions) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-edit-version-name">' + soy.$$escapeHtml('Edit name') + '</a></li>' : '') + '</ul></div></div><div class="ghx-expanded"><div class="ghx-summary js-version-description">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'description', fieldValue: opt_data.version.description, displayValue: opt_data.version.description, maxDisplayLength: 200, defaultValue: 'No description'}) + '</div>' + ((opt_data.version.project) ? '<div><a class="js-version-details-link" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.version.project.key) + '/fixforversion/' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml('Details') + '</a></div><hr />' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Start Date') + '</div><div class="aui-item ghx-version-date js-version-date js-version-start-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'startDateFormatted', fieldValue: opt_data.version.startDateFormatted, displayValue: opt_data.version.startDateFormatted, defaultValue: 'None'}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Release date') + '</div><div class="aui-item ghx-version-date js-version-date js-version-release-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'releaseDateFormatted', fieldValue: opt_data.version.releaseDateFormatted, displayValue: opt_data.version.releaseDateFormatted, defaultValue: 'None'}) + '</div></div><div class="aui-group js-version-issues-count"><div class="aui-item">' + soy.$$escapeHtml('Issues') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.totalIssueCount}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Completed') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.done}) + '</div></div>' + ((opt_data.showEstimates) ? ((! opt_data.version.versionStats.isIssueCountStatistic) ? '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Unestimated') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.notEstimated}) + '</div></div>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + aui.badges.badge({extraAttributes: {title: opt_data.version.versionStats.estimateStatisticName}, text: opt_data.version.versionStats.estimateTotal}) + '</div></div>' : '') + '</div><div class="ghx-subheader"><ul class="ghx-classification-progress" title="' + soy.$$escapeHtml(AJS.format('{0} ({1} {2} {3} {4})',AJS.format('{0}% of {1} done',opt_data.version.versionStats.percentageCompleted,opt_data.version.versionStats.isIssueCountStatistic ? 'issues' : 'estimated work'),opt_data.version.versionStats.estimateDone,'of',opt_data.version.versionStats.estimateTotal,opt_data.version.versionStats.isIssueCountStatistic ? '' : opt_data.version.versionStats.estimateStatisticName)) + '" ><li class="ghx-implemented" style="width:' + soy.$$escapeHtml(opt_data.version.versionStats.percentageCompleted) + '%;"></li></ul></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersion.soyTemplateName = 'GH.tpl.versionview.renderVersion';
}


GH.tpl.versionview.renderAllVersions = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-all' + ((opt_data.isAllSelected) ? ' ghx-selected' : '') + '"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml('All issues') + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderAllVersions.soyTemplateName = 'GH.tpl.versionview.renderAllVersions';
}


GH.tpl.versionview.renderVersionPending = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-pending' + ((opt_data.isNoneSelected) ? ' ghx-selected' : '') + '" data-version-id="none"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml('Issues without versions') + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersionPending.soyTemplateName = 'GH.tpl.versionview.renderVersionPending';
}


GH.tpl.versionview.renderDontAskAgain = function(opt_data, opt_ignored) {
  return '<div class="ghx-dialog-tip"><input id="ghx-dont-ask-for-confirmation" type="checkbox" name="dontask"><label for="ghx-dont-ask-for-confirmation" type="checkbox" checked=false><span class="checkbox-label">Don\u2019t show again</span></label></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderDontAskAgain.soyTemplateName = 'GH.tpl.versionview.renderDontAskAgain';
}


GH.tpl.versionview.renderQuickCreateView = function(opt_data, opt_ignored) {
  var output = '<form class="aui"><fieldset><div class="field-group"><label for="projects">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"></span></label><select id="ghx-version-project" class="hidden">';
  var projectList171 = opt_data.projects;
  var projectListLen171 = projectList171.length;
  for (var projectIndex171 = 0; projectIndex171 < projectListLen171; projectIndex171++) {
    var projectData171 = projectList171[projectIndex171];
    output += '<option value="' + soy.$$escapeHtml(projectData171.id) + '">' + soy.$$escapeHtml(projectData171.name) + '</option>';
  }
  output += '</select><div class="ghx-error"></div></div><div class="field-group"><label for="ghx-version-name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-version-name"><div class="ghx-error"></div></div><div class="field-group"><label for="ghx-version-description">' + soy.$$escapeHtml('Description') + '</label><input class="text" type="text" maxlength="130" id="ghx-version-description"></div><div class="field-group"><label for="ghx-version-start-date">' + soy.$$escapeHtml('Start Date') + '</label><input id="ghx-version-start-date" class="text medium-field" type="text"><span id="ghx-version-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit Start Date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-version-start-date-error"></span></div><div class="field-group"><label for="ghx-version-release-date">' + soy.$$escapeHtml('Release date') + '</label><input id="ghx-version-release-date" class="text medium-field" type="text"><span id="ghx-version-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit Release Date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-version-release-date-error"></span></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderQuickCreateView.soyTemplateName = 'GH.tpl.versionview.renderQuickCreateView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionController.js' */
GH.VersionController={},GH.VersionController.model=null,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.VersionController.analytics=new e("gh.rapidboard.versions","versionCount","")}(),GH.VersionController.init=function(){GH.VersionController.model=new GH.VersionsModel([]);var e=AJS.$(GH);e.bind(GH.VersionQuickCreate.EVENT_VERSION_CREATED,function(e,r){GH.VersionController.handleVersionCreated(r.createdVersion)}),GH.VersionView.init()},GH.VersionController.setProjects=function(e){GH.VersionController.model&&GH.VersionController.model.setProjects(e)},GH.VersionController.setVersions=function(e){GH.VersionController.model&&GH.VersionController.model.updateRawData(e)},GH.VersionController.getVersionModel=function(){return GH.VersionController.model},GH.VersionController.registerVersionsCount=function(){var e=GH.VersionController.model,r=e.getUnreleasedVersionList().length;GH.VersionController._triggerVersionCount(r)},GH.VersionController._triggerVersionCount=_.once(function(e){GH.VersionController.analytics.trigger(e)}),GH.VersionController.getFilteredVersionId=function(){return GH.BoardState.getPerViewValue("planSelectedVersion",null)},GH.VersionController.setFilteredVersionId=function(e){GH.BoardState.setPerViewValue("planSelectedVersion",e)},GH.VersionController.hasFilteredVersion=function(){return null!=GH.VersionController.getFilteredVersionId()},GH.VersionController.validateSelectedVersion=function(){var e=GH.VersionController.getVersionModel(),r=GH.VersionController.getFilteredVersionId(),o=GH.PlanIssueListFiltering.isNoneVersionFilterId(r)&&!e.isEmpty()||e.containsId(r);o||(GH.VersionController.setFilteredVersionId(void 0),GH.RapidBoard.UrlState.replaceState())},GH.VersionController.setIssuesVersion=function(e,r){var o=[];_.isEmpty(r)||(_.each(r,function(r){o.push(r.fixVersions),r.fixVersions=[e]}),GH.BacklogController.updateIssues(r));var n=_.pluck(r,"key");GH.VersionController.setIssuesVersionOnServer(e,n).done(function(){GH.Notification.showSuccess("Selection successfully added to the version"),r.forEach(function(r,n){var i=[];o[n].forEach(function(r){r!==e&&i.push({name:"fixVersions",oldValId:r,newValId:e})}),i.length>0&&GH.RapidBoard.sendIssueUpdatedTrackEvent(r,i)}),GH.PlanController.isActive()&&(GH.BacklogController.updateVersionData(),GH.VersionController._reloadDetailsView(GH.PlanController))}).fail(function(){GH.PlanController.isActive()&&GH.BacklogController.loadData()})},GH.VersionController.clearIssuesVersion=function(e){if(!_.isEmpty(e)){var r=[];if(_.each(e,function(e){e.fixVersions&&e.fixVersions.length>0&&(e.fixVersions=[],r.push(e))}),!_.isEmpty(r)){GH.BacklogController.updateIssues(r);var o=_.pluck(e,"key");GH.VersionController.clearIssuesVersionOnServer(o).done(function(){GH.Notification.showSuccess("Selection successfully removed from all versions"),GH.PlanController.isActive()?(GH.BacklogController.updateVersionData(),GH.VersionController._reloadDetailsView(GH.PlanController)):GH.WorkController.isActive()&&GH.VersionController._reloadDetailsView(GH.WorkController)}).fail(function(){GH.PlanController.isActive()&&GH.BacklogController.loadData()})}}},GH.VersionController.updateVersion=function(e,r,o,n){var i=GH.VersionController.getVersionModel(),t=i.getVersion(e),l=_.keys(r),s={};return _.each(l,function(e){s[e]=t[e]||void 0}),_.extend(t,r),i.updateVersion(t),GH.BacklogView.draw(),GH.VersionController._reloadDetailsView(GH.PlanController),n(),GH.VersionController.updateVersionOnServer(t,o).fail(function(){_.extend(t,s),i.updateVersion(t),GH.BacklogView.draw(),GH.VersionController._reloadDetailsView(GH.PlanController)})},GH.VersionController.updateVersionOnServer=function(e,r){return GH.Ajax.post({url:"/versions/"+e.id,data:{id:e.id,projectId:e.project.id,name:e.name,description:e.description,releaseDate:e.releaseDateFormatted,startDate:e.startDateFormatted},errorContextMap:r})},GH.VersionController.setIssuesVersionOnServer=function(e,r){return GH.Ajax.put({url:"/xboard/issue/fixversion/set",data:{issueKeys:r,versionId:e}})},GH.VersionController.clearIssuesVersionOnServer=function(e){return GH.Ajax.put({url:"/xboard/issue/fixversion/clear",data:{issueKeys:e}})},GH.VersionController.handleVersionCreated=function(e){GH.BacklogController.visible&&setTimeout(function(){GH.VersionController.handleVersionCreatedImpl(e)},0)},GH.VersionController.handleVersionCreatedImpl=function(e){GH.BacklogController.updateVersionData().done(function(){GH.VersionView.renderNewVersions([e])})},GH.VersionController._reloadDetailsView=function(e){var r=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");e.reloadDetailView(r.VERSION_PANEL_CHANGED)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/version/VersionQuickCreate.js' */
!function(){"use strict";var e=require("jira/ajs/select/single-select"),r=GH.TimeFormat;GH.VersionQuickCreate={},GH.VersionQuickCreate.EVENT_VERSION_CREATED="versionCreated",GH.VersionQuickCreate.accessibleProjects=[],GH.VersionQuickCreate.setAccessibleProjects=function(e){GH.VersionQuickCreate.accessibleProjects=e},GH.VersionQuickCreate.showDialog=function(){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>'),GH.VersionQuickCreate.renderDialog()},GH.VersionQuickCreate.renderDialog=function(){var e=GH.Dialog.create({width:450,height:350,id:"ghx-dialog-create-version"});e.addHeader("Create Version"),e.addPanel("","panel"),e.getCurrentPanel().html(GH.tpl.versionview.renderQuickCreateView({projects:GH.VersionQuickCreate.accessibleProjects})),e.addButton("Create",function(){e.disableControls(),GH.VersionQuickCreate.submit(e)},"aui-button"),GH.Dialog.addCancelButton(e),GH.VersionQuickCreate.registerProjectControls(),GH.VersionQuickCreate.registerCalendarControls(),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),e.updateHeight(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-version-name").focus()},GH.VersionQuickCreate.submit=function(e){GH.Validation.clearContextualErrors(AJS.$("#ghx-dialog-create-version"));var r=GH.VersionQuickCreate._extractModel();GH.Ajax.post({url:"/versions",data:r,errorContextMap:{projectId:"#ghx-version-project",name:"#ghx-version-name",startDate:"#ghx-version-start-date-error",releaseDate:"#ghx-version-release-date-error"}}).done(function(r){var t=r.success;e.dispose(),GH.Notification.showSuccess(AJS.format("Version \'\'{0}\'\' was successfully created.","<strong>"+AJS.escapeHTML(String(t.name))+"</strong>")),AJS.$(GH).trigger(GH.VersionQuickCreate.EVENT_VERSION_CREATED,[{createdVersion:t}])}).fail(e.enableControls)},GH.VersionQuickCreate.registerCalendarControls=function(){new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-version-release-date",button:"ghx-version-release-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!1,timeFormat:12,positionStyle:"fixed",ifFormat:r.dateFormat,useISO8601WeekNumbers:r.useISO8601WeekNumbers}),Calendar.setup({firstDay:0,inputField:"ghx-version-start-date",button:"ghx-version-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!1,timeFormat:12,positionStyle:"fixed",ifFormat:r.dateFormat,useISO8601WeekNumbers:r.useISO8601WeekNumbers})},GH.VersionQuickCreate.registerProjectControls=function(){return new e({element:AJS.$("#ghx-version-project"),revertOnInvalid:!0,width:250})},GH.VersionQuickCreate.registerCreateVersionDialog=function(){var e=AJS.$("#ghx-version-column");e.find(".js-create-version").click(function(){GH.VersionQuickCreate.showDialog()})},GH.VersionQuickCreate._extractModel=function(){var e=AJS.$("#ghx-dialog-create-version");return{projectId:e.find("#ghx-version-project :selected").val(),name:e.find("#ghx-version-name").val(),description:e.find("#ghx-version-description").val(),releaseDate:e.find("#ghx-version-release-date").val(),startDate:e.find("#ghx-version-start-date").val()}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ConvertWorkflow.js' */
GH.Dialogs.ConvertWorkflow={},GH.Dialogs.ConvertWorkflow.EVENT_WORKFLOW_CONVERTED="workflowConverted",GH.Dialogs.ConvertWorkflow.statusSelect=void 0,function(){var o=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ConvertWorkflow.analytics=new o("gh.config.simplify.workflow.dialog.change")}(),GH.Dialogs.ConvertWorkflow.showDialog=function(o){GH.Dialog.dim(),GH.Ajax.get({url:"/workflow/convert.json",data:{rapidViewId:o}},"convertWorkflow").done(GH.Dialogs.ConvertWorkflow.renderDialog).fail(GH.Dialog.undim),GH.Dialogs.ConvertWorkflow.analytics.trigger("start")},GH.Dialogs.ConvertWorkflow.renderDialog=function(o){var e=function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("cancel")},t=GH.Dialog.create({width:575,height:300,id:"ghx-dialog-convert-workflow",onCancelFn:e}),r=o.numIssuesToMigrate&&o.numIssuesToMigrate>0;GH.Dialogs.ConvertWorkflow.renderDialogIntroPage(t,o),GH.Dialogs.ConvertWorkflow.renderStatusResolutionDonePage(t,o,r),r&&GH.Dialogs.ConvertWorkflow.renderDialogIssuesUpdatePage(t,o),GH.Dialogs.ConvertWorkflow.renderDialogProgressPage(t,o),AJS.$(".aui-dialog").addClass("ghx-dialog"),t.gotoPage(0),t.gotoPanel(0),t.show(),t.updateHeight(),AJS.$(".aui-blanket").empty()},GH.Dialogs.ConvertWorkflow.renderDialogIntroPage=function(o,e){o.addHeader("Simplify workflow"),o.addPanel("",GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro({projectName:AJS.escapeHTML(String(e.projectName)),workflowSchemeName:AJS.escapeHTML(String(e.workflowSchemeName)),adminWorkflowUrl:GH.Ajax.CONTEXT_PATH+"/plugins/servlet/project-config/"+e.projectKey+"/workflows",simplifyWorkflowLearnMoreUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+the+Simplified+Workflow","isLocal":false}.url})),o.addButton("Next",function(){o.nextPage(),_.each(e.statuses,function(o){o.resolutionDoneCandidate&&GH.Dialogs.ConvertWorkflow.statusSelect.addItem(new AJS.ItemDescriptor({value:o.id,label:o.name}))}),o.updateHeight()},"ghx-dialog-convert-next aui-button"),GH.Dialog.addCancelButton(o)},GH.Dialogs.ConvertWorkflow.renderStatusResolutionDonePage=function(o,e,t){o.addPage(),o.addHeader("Simplify workflow"),o.addPanel("",GH.tpl.dialogs.convertworkflow.renderStatusResolution({urls:{simplifiedWorkflow:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+the+Simplified+Workflow","isLocal":false}.url}}));var r=AJS.$("#ghx-resolution-done-statuses-select");GH.Dialogs.ConvertWorkflow.statusSelect=new AJS.MultiSelect({element:r,width:350,itemAttrDisplayed:"label",suggestions:function(){return _.map(e.statuses,function(o){return new AJS.ItemDescriptor({value:o.id,label:o.name})})}}),AJS.$("#ghx-resolution-done-statuses-select-multi-select").keydown(function(o){if(13==o.keyCode&&!GH.Dialogs.ConvertWorkflow.statusSelect.suggestionsVisible)return o.preventDefault(),!1}),t?o.addButton("Next",function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("showWarning"),o.nextPage(),o.updateHeight()},"ghx-dialog-convert-next aui-button"):GH.Dialogs.ConvertWorkflow.addSimplifyButton(o,e),GH.Dialog.addCancelButton(o)},GH.Dialogs.ConvertWorkflow.renderDialogIssuesUpdatePage=function(o,e){o.addPage(),o.addHeader("Simplify workflow");var t=GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues({projectName:AJS.escapeHTML(String(e.projectName)),workflowSchemeName:AJS.escapeHTML(String(e.workflowSchemeName)),numIssuesToMigrate:GH.NumberFormat.format(e.numIssuesToMigrate),isSysAdmin:e.isSysAdmin,backupUrl:GH.Ajax.CONTEXT_PATH+"/secure/admin/XmlBackup!default.jspa"});o.addPanel("",t),GH.Dialogs.ConvertWorkflow.addSimplifyButton(o,e),GH.Dialog.addCancelButton(o)},GH.Dialogs.ConvertWorkflow.renderDialogProgressPage=function(o,e){o.addPage(),o.addHeader("Simplify workflow");var t=GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress({});o.addPanel("",t),GH.Dialogs.ConvertWorkflow.addAcknowledgeButton(o,e)},GH.Dialogs.ConvertWorkflow.addSimplifyButton=function(o,e){o.addButton("Simplify",function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("simplify"),o.nextPage(),o.updateHeight(),o.disableControls(),GH.Dialogs.ConvertWorkflow.submit(o,e)},"aui-button")},GH.Dialogs.ConvertWorkflow.addAcknowledgeButton=function(o,e){o.addButton("Acknowledge",function(){o.disableControls(),o.dispose(),AJS.$(GH).trigger(GH.Dialogs.ConvertWorkflow.EVENT_WORKFLOW_CONVERTED)},"aui-button")},GH.Dialogs.ConvertWorkflow.submit=function(o,e){var t=AJS.$("#ghx-resolution-done-statuses-select"),r=t.val();GH.Ajax.post({url:"/workflow/convert.json",data:{projectKey:e.projectKey,resolutionDoneStatusIds:r}}).done(function(e){GH.Dialogs.ConvertWorkflow.handleConversionResult(o,e)}).fail(o.enableControls)},GH.Dialogs.ConvertWorkflow.handleConversionResult=function(o,e){var t=e.success.numIssuesToMigrate,r=e.success.taskId,a=function(e){GH.Dialogs.ConvertWorkflow.analytics.trigger("complete");var t=AJS.$("#ghx-convert-workflow-progress");if(t.find(".ghx-current-progress").css({width:"100%"}),o.enableControls(),e.successful)t.append(GH.Notification.auiMessage({title:"Workflow migration complete.",type:"success"}));else{var r=GH.Ajax._convertJiraErrors(e.errorCollection).getGlobalErrors();t.append(GH.Notification.auiMessage({title:"Workflow migration did not complete successfully.",type:"error",messageHtml:!0,message:GH.tpl.rapid.notification.renderErrorMessages({errors:r})}))}o.updateHeight()};t&&0!=t?r&&GH.Dialogs.ConvertWorkflow.getTaskStatus(r,a):a({finished:!0,successful:!0})},GH.Dialogs.ConvertWorkflow.getTaskStatus=function(o,e){GH.Ajax.get({url:"/configuration/jiraTask/"+o+".json"}).done(function(t){if(t.finished)console.log("Workflow migration finished. Successful? "+t.successful),e(t);else{console.log("Workflow migration progress: "+t.progress);var r=AJS.$("#ghx-convert-workflow-progress");r.find(".ghx-current-progress").css({width:""+t.progress+"%"}),setTimeout(function(){GH.Dialogs.ConvertWorkflow.getTaskStatus(o,e)},2e3)}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ConvertWorkflow.soy' */
// This file was automatically generated from ConvertWorkflow.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.convertworkflow.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.convertworkflow == 'undefined') { GH.tpl.dialogs.convertworkflow = {}; }


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('Simplifying the workflow for project {0}{1}{2} will make it managed by Jira Software. This will allow Project Administrators to add and remove steps from the workflow by configuring the columns of the board.','<b>',opt_data.projectName,'</b>')) + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('The original workflow and scheme for this project will be copied and not modified. You can revert this change by re-associating the workflow scheme {0}{1}{2} to this project using Jira\x27\x27s {3}administration interface{4}.','<b>',opt_data.workflowSchemeName,'</b>','<a href="' + opt_data.adminWorkflowUrl + '">','</a>')) + '</p><p>' + soy.$$escapeHtml('The simplified workflow will:') + '<ul><li>' + soy.$$escapeHtml('allow free movement of issues between any column') + '</li><li>' + soy.$$escapeHtml('remove all transition conditions, validators, post functions and screens') + '</li></ul></p><p>' + soy.$$filterNoAutoescape(AJS.format('Read {0}the documentation{1} for more information.','<a href="' + opt_data.simplifyWorkflowLearnMoreUrl + '">','</a>')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro';
}


GH.tpl.dialogs.convertworkflow.renderStatusResolution = function(opt_data, opt_ignored) {
  return '<p class="description">' + soy.$$filterNoAutoescape(AJS.format('Choose statuses that will trigger the {0}resolution{1} to be set to \x22Done\x22.','<a href="' + opt_data.urls.simplifiedWorkflow + '">','</a>')) + '</p><div class="aui-item"><form class="aui"><fieldset><div class="field-group" id="ghx-status-picker"><label for="ghx-resolution-done-statuses-select">' + soy.$$escapeHtml('Statuses for \x27Done\x27') + '<span class="aui-icon icon-required"></span></label><select id="ghx-resolution-done-statuses-select" multiple="multiple" class="hidden"></select><div id="ghx-resolution-done-statuses-error"></div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderStatusResolution.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderStatusResolution';
}


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning"><p><span class="aui-icon icon-warning"></span>' + soy.$$filterNoAutoescape(AJS.format('{0}Note{1}: You are about to change all {2} issues in project {0}{3}{1}.','<b>','</b>',opt_data.numIssuesToMigrate,opt_data.projectName)) + '</p></div>' + ((opt_data.isSysAdmin) ? '<p>' + soy.$$filterNoAutoescape(AJS.format('This process can take a long time, and therefore it is advisable to perform this operation when the system is under \x3cstrong\x3elow load\x3c/strong\x3e. Please ensure that you have a {0}backup{1} of your data before proceeding.','<a href="' + opt_data.backupUrl + '">','</a>')) + '</p>' : '<p>' + soy.$$filterNoAutoescape('This process can take a long time, and therefore it is advisable to perform this operation when the system is under \x3cstrong\x3elow load\x3c/strong\x3e. Please ensure that you contact a System Administrator to create an XML backup of your data before proceeding.') + '</p>') + '<p>' + soy.$$filterNoAutoescape(AJS.format('If the process fails or Jira is shutdown before the process completes, you can attempt to associate the workflow scheme {0} with project {1} again.',opt_data.workflowSchemeName,opt_data.projectName)) + '</p>' + ((opt_data.isSysAdmin) ? '<p>' + soy.$$escapeHtml('If the process fails again, please restore from backup to ensure that issues in the project remain in a consistent state.') + '</p>' : '<p>' + soy.$$filterNoAutoescape('If the process fails again, please contact a System Administrator so they can restore from backup to ensure that issues in the project remain in a consistent state.') + '</p>');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues';
}


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress = function(opt_data, opt_ignored) {
  return '<div id="ghx-convert-workflow-progress"><div class="ghx-progress-bar"><div class="ghx-current-progress" style="width: 1%;"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CreateStatus.js' */
!function(){"use strict";var t=require("jira/ajs/select/single-select");GH.Dialogs.CreateStatus={},GH.Dialogs.CreateStatus.dialog=null,GH.Dialogs.CreateStatus.EVENT_STATUS_CREATED="statusCreated",GH.Dialogs.CreateStatus.statusCategoryPicker=null,GH.Dialogs.CreateStatus.statusNamePicker=null,GH.Dialogs.CreateStatus.statusNameChangedTimeout=null,function(){var t=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.CreateStatus.analytics=new t("gh.config.add.status.dialog.change")}(),GH.Dialogs.CreateStatus.showDialog=function(t){GH.Dialogs.CreateStatus.renderDialog(t),GH.Dialogs.CreateStatus.analytics.trigger("start")},GH.Dialogs.CreateStatus.renderDialog=function(t){var a=function(){GH.Dialogs.CreateStatus.analytics.trigger("cancel")},e=GH.Dialogs.CreateStatus.dialog=GH.Dialog.create({width:575,height:200,id:"ghx-dialog-create-status",onCancelFn:a});e.addHeader("Add status"),e.addPanel("","panel");var s=AJS.$(GH.tpl.dialogs.createstatus.renderCreateStatusDialog({}));e.getCurrentPanel().html(s);var r=function(){return e.disableControls(),GH.Dialogs.CreateStatus.submit(e,t),!1};e.addButton("Add",r,"aui-button"),s.submit(r),GH.Dialog.addCancelButton(e),GH.Dialogs.CreateStatus.registerStatusCategoryControls(e),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),AJS.$(".aui-blanket").empty(),GH.Dialogs.CreateStatus.registerStatusNameField(),AJS.$("#ghx-status-name-field").focus()},GH.Dialogs.CreateStatus.registerStatusNameField=function(){GH.Dialogs.CreateStatus.statusNamePicker=new t({removeOnUnSelect:!1,element:"#ghx-status-name",submitInputVal:!0,userEnteredOptionsMsg:"New Status",ajaxOptions:{url:GH.Ajax.buildBareRestUrl("/rest/api/2/status"),query:!0,formatResponse:function(t){var a=new AJS.GroupDescriptor({weight:0,label:"Existing Statuses"});return _.each(t,function(t){a.addItem(new AJS.ItemDescriptor({value:t.name,label:t.name,html:AJS.escapeHTML(String(t.name))}))}),[a]}}})},GH.Dialogs.CreateStatus.bindStatusNameEvents=function(){var t=AJS.$("#ghx-status-name-field");AJS.$("#ghx-status-name").change(GH.Dialogs.CreateStatus.handleStatusNameChanged);var a=GH.RapidBoard.Browsers.isInputEventSupported();t.on(a?"input":"keypress",function(){clearTimeout(GH.Dialogs.CreateStatus.statusNameChangedTimeout),GH.Dialogs.CreateStatus.statusNameChangedTimeout=setTimeout(GH.Dialogs.CreateStatus.handleStatusNameChanged,275)})},GH.Dialogs.CreateStatus.handleStatusNameChanged=function(){var t,a=AJS.$("#ghx-status-name-field").val()||"",e=AJS.$.trim(a.toLowerCase());t=a?AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")):AJS.$.Deferred().resolve([]),t.done(function(t){var a=_.find(t,function(t){return t.name.toLowerCase()===e});a?(GH.Dialogs.CreateStatus.statusCategoryPicker.disableWithValue(a.statusCategory.id),GH.Dialogs.CreateStatus.addStatusExistsErrors()):(GH.Dialogs.CreateStatus.statusCategoryPicker.enableWithValueIfDisabled(GH.StatusCategoryPicker.defaultStatusCategoryId),GH.Dialogs.CreateStatus.clearErrors())})},GH.Dialogs.CreateStatus.addStatusExistsErrors=function(){AJS.$("#js-status-category-error").text("The category for the existing status with this name will be used")},GH.Dialogs.CreateStatus.clearErrors=function(){AJS.$("#js-status-category-error").text("Helps identify where an issue is in its lifecycle")},GH.Dialogs.CreateStatus.registerStatusCategoryControls=function(){GH.Dialogs.CreateStatus.fetchStatusCategoryConfig().done(function(t){t&&GH.Dialogs.CreateStatus.renderStatusCategoryPicker().done(function(){GH.Dialogs.CreateStatus.dialog.updateHeight()})})},GH.Dialogs.CreateStatus.renderStatusCategoryPicker=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/statuscategory")).then(function(t){var a=_.reject(t,function(t){return"undefined"===t.key});AJS.$("#js-status-category-picker-container").html(GH.tpl.dialogs.createstatus.renderCategoryPicker()),GH.Dialogs.CreateStatus.bindStatusNameEvents(),GH.Dialogs.CreateStatus.statusCategoryPicker=GH.StatusCategoryPicker.build({element:AJS.$("#ghx-status-category-picker"),statusCategories:a})})},GH.Dialogs.CreateStatus.fetchStatusCategoryConfig=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")).andThen(function(t){return _.find(t,function(t){return _.isObject(t.statusCategory)})})},GH.Dialogs.CreateStatus.submit=function(t,a){clearTimeout(GH.Dialogs.CreateStatus.statusNameChangedTimeout);var e=AJS.$("#ghx-status-name").val()||[],s=AJS.$("#ghx-status-category-picker").val(),r={rapidViewId:a,name:AJS.$.trim(e.pop()),statusCategoryId:parseInt(s,10)||GH.StatusCategoryPicker.defaultStatusCategoryId};GH.Ajax.post({url:"/workflow/status/create.json",data:r,errorContextMap:{name:"#ghx-status-name"}}).done(function(a){GH.Dialogs.CreateStatus.analytics.trigger("complete"),t.dispose(),AJS.$(GH).trigger(GH.Dialogs.CreateStatus.EVENT_STATUS_CREATED,a.success)}).fail(function(){GH.Dialogs.CreateStatus.dialog.updateHeight(),t.enableControls()})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/CreateStatus.soy' */
// This file was automatically generated from CreateStatus.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.createstatus.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.createstatus == 'undefined') { GH.tpl.dialogs.createstatus = {}; }


GH.tpl.dialogs.createstatus.renderCreateStatusDialog = function(opt_data, opt_ignored) {
  return '<form class="aui"><fieldset><div class="field-group"><label for="ghx-status-name">' + soy.$$escapeHtml('Name') + ':<span class="aui-icon icon-required"></span></label><select id="ghx-status-name"></select></div></fieldset><div id="js-status-category-picker-container"></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.createstatus.renderCreateStatusDialog.soyTemplateName = 'GH.tpl.dialogs.createstatus.renderCreateStatusDialog';
}


GH.tpl.dialogs.createstatus.renderCategoryPicker = function(opt_data, opt_ignored) {
  return '<fieldset><div class="field-group"><label for="ghx-status-category">' + soy.$$escapeHtml('Category') + ':<span class="aui-icon icon-required"></span></label><select id="ghx-status-category-picker" class="hidden"></select><div id="js-status-category-error" class="description">' + soy.$$escapeHtml('Helps identify where an issue is in its lifecycle') + '</div></div></fieldset>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.createstatus.renderCategoryPicker.soyTemplateName = 'GH.tpl.dialogs.createstatus.renderCategoryPicker';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddColumn.js' */
GH.Dialogs.AddColumn={},GH.Dialogs.AddColumn.EVENT_COLUMN_ADDED="columnAdded",GH.Dialogs.AddColumn.statusCategoryPicker=null,GH.Dialogs.AddColumn.statusNameChangedTimeout=null,function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.AddColumn.analytics=new a("gh.config.add.column.dialog.change")}(),GH.Dialogs.AddColumn.showDialog=function(a,t){var o={rapidViewId:a,alsoAddStatus:t};GH.Dialogs.AddColumn.renderDialog(o),GH.Dialogs.AddColumn.analytics.trigger("start")},GH.Dialogs.AddColumn.renderDialog=function(a){var t=function(){GH.Dialogs.AddColumn.analytics.trigger("cancel")},o=GH.Dialogs.AddColumn.dialog=GH.Dialog.create({width:575,height:200,id:"ghx-dialog-add-column",onCancelFn:t});o.addHeader("Add column"),o.addPanel("","panel");var e=AJS.$(GH.tpl.dialogs.addcolumn.renderAddColumnDialog({}));o.getCurrentPanel().html(e);var n=function(){return o.disableControls(),GH.Dialogs.AddColumn.submit(o,a),!1};o.addButton("Add",n,"aui-button"),e.submit(n),GH.Dialog.addCancelButton(o),GH.Dialogs.AddColumn.registerStatusCategoryControls(),AJS.$(".aui-dialog").addClass("ghx-dialog"),o.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-column-name").focus()},GH.Dialogs.AddColumn.submit=function(a,t){clearTimeout(GH.Dialogs.AddColumn.statusNameChangedTimeout);var o=AJS.$("#ghx-column-name").val(),e=AJS.$("#ghx-status-category-picker").val(),n={rapidViewId:t.rapidViewId,name:AJS.$.trim(o),alsoAddStatus:t.alsoAddStatus,statusCategoryId:parseInt(e,10)||GH.StatusCategoryPicker.defaultStatusCategoryId};GH.Ajax.post({url:"/rapidviewconfig/columns",data:n,errorContextMap:{name:"#ghx-column-name"}}).done(function(t){GH.Dialogs.AddColumn.analytics.trigger("complete"),a.dispose(),AJS.$(GH).trigger(GH.Dialogs.AddColumn.EVENT_COLUMN_ADDED,t.success)}).fail(function(){GH.Dialogs.AddColumn.dialog.updateHeight(),a.enableControls()})},GH.Dialogs.AddColumn.handleColumnNameChanged=function(){var a,t=AJS.$("#ghx-column-name").val()||"",o=AJS.$.trim(t.toLowerCase());a=t?AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")):AJS.$.Deferred().resolve([]),a.done(function(a){var t=_.find(a,function(a){return a.name.toLowerCase()===o});t?(GH.Dialogs.AddColumn.statusCategoryPicker.disableWithValue(t.statusCategory.id),GH.Dialogs.AddColumn.addStatusExistsErrors()):(GH.Dialogs.AddColumn.statusCategoryPicker.enableWithValueIfDisabled(GH.StatusCategoryPicker.defaultStatusCategoryId),GH.Dialogs.AddColumn.clearErrors())})},GH.Dialogs.AddColumn.addStatusExistsErrors=function(){AJS.$("#js-status-category-error").text("The category for the existing status with this name will be used")},GH.Dialogs.AddColumn.clearErrors=function(){AJS.$("#js-status-category-error").text("Helps identify where an issue is in its lifecycle")},GH.Dialogs.AddColumn.registerStatusCategoryControls=function(){GH.Dialogs.AddColumn.fetchStatusCategoryConfig().done(function(a){a&&GH.Dialogs.AddColumn.renderStatusCategoryPicker().done(function(){GH.Dialogs.AddColumn.dialog.updateHeight()})})},GH.Dialogs.AddColumn.renderStatusCategoryPicker=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/statuscategory")).then(function(a){var t=_.reject(a,function(a){return"undefined"===a.key});AJS.$("#js-status-category-picker-container").html(GH.tpl.dialogs.createstatus.renderCategoryPicker()),GH.Dialogs.AddColumn.bindColumnNameEvents(),GH.Dialogs.AddColumn.statusCategoryPicker=GH.StatusCategoryPicker.build({element:AJS.$("#ghx-status-category-picker"),statusCategories:t})})},GH.Dialogs.AddColumn.fetchStatusCategoryConfig=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")).andThen(function(a){return _.find(a,function(a){return _.isObject(a.statusCategory)})})},GH.Dialogs.AddColumn.bindColumnNameEvents=function(){var a=AJS.$("#ghx-column-name"),t=GH.RapidBoard.Browsers.isInputEventSupported();a.on(t?"input":"keypress",function(){clearTimeout(GH.Dialogs.AddColumn.statusNameChangedTimeout),GH.Dialogs.AddColumn.statusNameChangedTimeout=setTimeout(GH.Dialogs.AddColumn.handleColumnNameChanged,275)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddColumn.soy' */
// This file was automatically generated from AddColumn.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.addcolumn.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.addcolumn == 'undefined') { GH.tpl.dialogs.addcolumn = {}; }


GH.tpl.dialogs.addcolumn.renderAddColumnDialog = function(opt_data, opt_ignored) {
  return '<form class="aui"><fieldset><div class="field-group"><label for="ghx-column-name">' + soy.$$escapeHtml('Name') + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-column-name" value=""></div></fieldset><div id="js-status-category-picker-container"></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.addcolumn.renderAddColumnDialog.soyTemplateName = 'GH.tpl.dialogs.addcolumn.renderAddColumnDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveStatus.js' */
GH.Dialogs.RemoveStatus={},GH.Dialogs.RemoveStatus.EVENT_STATUS_REMOVED="statusRemoved",function(){var t=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.RemoveStatus.analytics=new t("gh.config.remove.status.dialog.change")}(),GH.Dialogs.RemoveStatus.showDialog=function(t,a){GH.Dialog.dim(),GH.Ajax.get({url:"/workflow/status/remove.json",data:{rapidViewId:t,statusId:a}},"removeStatusDialog").done(GH.Dialogs.RemoveStatus.renderDialog).fail(GH.Dialog.undim),GH.Dialogs.RemoveStatus.analytics.trigger("start")},GH.Dialogs.RemoveStatus.renderDialog=function(t){var a=function(){GH.Dialogs.RemoveStatus.analytics.trigger("cancel")},e=GH.Dialog.create({width:575,height:250,id:"ghx-dialog-remove-status",onCancelFn:a});e.addHeader("Remove status"),e.addPanel("","panel");var i=AJS.escapeHTML(String(t.statusName)),s="",o="";if(t.isInitialStatus){var l=AJS.escapeHTML(String(t.newInitialStatusName));s=AJS.format("{0} is the initial status for project {1}.",t.statusName,t.projectName),o=AJS.format("Any issues which are created in this project will now default to status {0}{1}{2}.","<b>",l,"</b>")}e.getCurrentPanel().html(GH.tpl.dialogs.removestatus.renderRemoveStatusDialog({statusName:i,isInitialStatus:t.isInitialStatus,newInitialStatusTitle:s,newInitialStatusDesc:o})),e.addButton("Remove",function(){e.disableControls(),GH.Dialogs.RemoveStatus.submit(e,t)},"aui-button"),GH.Dialog.addCancelButton(e),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),e.updateHeight()},GH.Dialogs.RemoveStatus.submit=function(t,a){var e={statusId:a.statusId,workflowName:a.workflowName,isInitialStatus:!1};a.isInitialStatus&&(e.isInitialStatus=a.isInitialStatus,e.newInitialStatusId=a.newInitialStatusId),GH.Ajax.post({url:"/workflow/status/remove.json",data:e}).done(function(e){GH.Dialogs.RemoveStatus.analytics.trigger("complete"),t.dispose(),AJS.$(GH).trigger(GH.Dialogs.RemoveStatus.EVENT_STATUS_REMOVED,a.statusId)}).fail(t.enableControls)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveStatus.soy' */
// This file was automatically generated from RemoveStatus.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.removestatus.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.removestatus == 'undefined') { GH.tpl.dialogs.removestatus = {}; }


GH.tpl.dialogs.removestatus.renderRemoveStatusDialog = function(opt_data, opt_ignored) {
  return ((opt_data.isInitialStatus) ? GH.tpl.rapid.notification.renderAuiMessage({type: 'info', title: opt_data.newInitialStatusTitle, message: opt_data.newInitialStatusDesc, messageHtml: true, icon: true}) : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format('Are you sure you want to remove status {0}{1}{2} from the current workflow?','<b>',opt_data.statusName,'</b>')) + '</p><p>' + soy.$$escapeHtml('This will not affect any other workflows that use this status.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.removestatus.renderRemoveStatusDialog.soyTemplateName = 'GH.tpl.dialogs.removestatus.renderRemoveStatusDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/StartSprintDialog.js' */
GH.Dialogs.StartSprintDialog={},GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED="sprintStarted";var ffManager=require("jira/featureflags/feature-manager");!function(){var t=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.StartSprintDialog.analytics=new t("gh.start.sprint.dialog.change")}(),GH.Dialogs.StartSprintDialog.analyticsMetaData=function(t){AJS.trigger("analyticsEvent",{name:"gh.sprint.start",data:t})},GH.Dialogs.StartSprintDialog.showDialog=function(t,a,i){AJS.dim(),AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>'),GH.Ajax.get({url:"/sprint/"+a+"/start",data:{rapidViewId:t,sprintId:a}},"showStartSprintDialog").done(function(t){ffManager.isFeatureEnabled("jsw.agility.always.issue.count")&&GH.RapidBoard.State.isAgilityBoard()&&(t.countNotEstimatedIssues=0,t.issuesNotEstimated=[]),GH.Dialogs.StartSprintDialog.renderDialog(t,i<t.numIssues)}).fail(GH.Dialog.undim),GH.Dialogs.StartSprintDialog.analytics.trigger("start")},GH.Dialogs.StartSprintDialog.renderDialog=function(t,a){var i=function(){GH.Dialogs.StartSprintDialog.analytics.trigger("cancel")},e=GH.Dialog.create({width:575,height:500+(a?70:0)+(t.countNotEstimatedIssues>0?90:0)+(t.noTrackingEstimateIssueCount>0?90:0),id:"ghx-dialog-start-sprint",onCancelFn:i,analyticsPageName:"startSprintModal"});e.addHeader("Start sprint"),e.addPanel("","panel");var r=[{value:7,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",1)},{value:14,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",2)},{value:21,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",3)},{value:28,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",4)},{value:"custom",text:"Custom"}];e.getCurrentPanel().html(GH.tpl.dialogs.startsprint.renderStartSprintDialog({numIssues:t.numIssues,defaultName:t.defaultName,defaultStartDate:t.defaultStartDate,defaultEndDate:t.defaultEndDate,showFilteredIssuesWarning:a,numNotEstimatedIssues:t.countNotEstimatedIssues,numExtraNotEstimatedIssues:t.countNotEstimatedIssues-t.issuesNotEstimated.length,snapshotIssuesNotEstimated:_.flatten([_.first(t.issuesNotEstimated,t.issuesNotEstimated.length-1)]).join(", "),lastIssueNotEstimated:_.last(t.issuesNotEstimated),numNoTrackingEstimateIssues:t.noTrackingEstimateIssueCount,numExtraNoTrackingEstimateIssues:t.noTrackingEstimateIssueCount-t.noTrackingEstimateIssues.length,snapshotIssuesNoTrackingEstimate:_.flatten([_.first(t.noTrackingEstimateIssues,t.noTrackingEstimateIssues.length-1)]).join(", "),lastIssueNoTrackingEstimate:_.last(t.noTrackingEstimateIssues),listOfSprintDurations:r,hasNoSubtaskDoneStatus:t.hasNoSubtaskDoneStatus,endSprintHelpUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Ending+a+Sprint","isLocal":false}.url,sprintGoal:t.sprintGoal})),e.addButton("Start",function(){e.disableControls(),GH.Dialogs.StartSprintDialog.submit(e,t)},"aui-button"),GH.Dialog.addCancelButton(e),GH.Dialogs.StartSprintDialog.registerCalendarControls(),GH.Dialogs.StartSprintDialog.registerDurationDropdown(AJS.$(document.body),r),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-sprint-name").focus(),GH.Dialogs.StartSprintDialog.registerWorkdayCounter(t.rapidViewId,e)},GH.Dialogs.StartSprintDialog.submit=function(t,a){var i=AJS.$("#ghx-dialog-start-sprint"),e={rapidViewId:a.rapidViewId,sprintId:a.sprintId,name:i.find("#ghx-sprint-name").val(),startDate:i.find("#ghx-sprint-start-date").val(),endDate:i.find("#ghx-sprint-end-date").val(),goal:i.find("#ghx-sprint-goal-input").val()};GH.Validation.clearContextualErrors(i),GH.Ajax.put({url:"/sprint/"+a.sprintId+"/start",data:e,errorContextMap:{name:"#ghx-sprint-name",startDate:"#ghx-sprint-start-date-error",endDate:"#ghx-sprint-end-date-error",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).done(function(i){var r=a.numIssues,n=GH.Dialogs.StartSprintDialog.calculateSprintDuration(e.startDate,e.endDate);a.totalStatistic;GH.Dialogs.StartSprintDialog.analytics.trigger("complete"),GH.Dialogs.StartSprintDialog.analyticsMetaData({sprintId:a.sprintId,numIssues:r,sprintDuration:n,totalStatistic:a.totalStatistic}),t.dispose(),GH.RapidBoard.State.isAgilityBoard()||GH.Notification.showSuccess(AJS.format("Sprint \'\'{0}\'\' has successfully been started.",AJS.escapeHTML(String(i.success.name)))),AJS.$(GH).trigger(GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED)}).fail(t.enableControls)},GH.Dialogs.StartSprintDialog.registerCalendarControls=function(){new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-sprint-start-date",button:"ghx-sprint-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),Calendar.setup({firstDay:0,inputField:"ghx-sprint-end-date",button:"ghx-sprint-end-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers})},GH.Dialogs.StartSprintDialog.calculateWorkDaysRemaining=function(t,a,i,e){var r=Date.parseDate(t,GH.TimeFormat.dateTimePickerFormat).getTime(),n=Date.parseDate(a,GH.TimeFormat.dateTimePickerFormat).getTime();GH.Ajax.get({url:"/rapidviewconfig/workingdays/period",data:{rapidViewId:i,startDate:r,endDate:n}},"workingdaysperiod").done(function(t){AJS.$("#ghx-sprint-work-days-remaining").remove(),e.getCurrentPanel().body.append(GH.tpl.dialogs.startsprint.renderWorkDaysInSprint({numWorkDaysInSprint:t.days,helpLinkUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Configuring+Working+Days","isLocal":false}.url})),AJS.$("#ghx-sprint-work-days-loading").hide()}).fail(function(){AJS.$("#ghx-sprint-work-days-remaining").remove()})},GH.Dialogs.StartSprintDialog.calculateSprintDuration=function(t,a){return Math.ceil(GH.Dialogs.StartSprintDialog.calculateSprintDurationExact(t,a)).toString()},GH.Dialogs.StartSprintDialog.calculateSprintDurationExact=function(t,a){var i=moment(Date.parseDate(t,GH.TimeFormat.dateTimePickerFormat)),e=moment(Date.parseDate(a,GH.TimeFormat.dateTimePickerFormat)),r=e.diff(i,"days",!0);return r},GH.Dialogs.StartSprintDialog.registerDurationDropdown=function(t,a){var i=t.find("#ghx-sprint-duration"),e=t.find("#ghx-sprint-start-date"),r=t.find("#ghx-sprint-end-date"),n=t.find("#ghx-sprint-end-date_trigger_c"),s=function(){if("custom"!==i.val()){var t=moment(Date.parseDate(e.val(),GH.TimeFormat.dateTimePickerFormat));t.add(parseInt(i.val()),"days"),r.val(t.toDate().print(GH.TimeFormat.dateTimePickerFormat))}};i.change(function(){var t="custom"!==i.val();r.prop("disabled",t),s()}),e.change(s);var o=function(t){var a=GH.Dialogs.StartSprintDialog.calculateSprintDurationExact(e.val(),r.val()),i=_.find(t,function(t){return a===t.value});return i?i.value:"custom"},l=function(){i.val(o(a)).trigger("change")};l(),n.click(function(){r.prop("disabled")&&(i.val("custom").trigger("change"),r.prop("disabled",!1).focus(),n.trigger("click"))}),e.focusout(l),r.focusout(l)},GH.Dialogs.StartSprintDialog.registerWorkdayCounter=function(t,a){var i=AJS.$("#ghx-sprint-start-date"),e=AJS.$("#ghx-sprint-end-date"),r=AJS.$("#ghx-sprint-duration"),n=function(){GH.Dialogs.StartSprintDialog.calculateWorkDaysRemaining(i.val(),e.val(),t,a)};n(),i.change(n),e.change(n),r.change(function(){"custom"!==r.val()&&n()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/StartSprintDialog.soy' */
// This file was automatically generated from StartSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.startsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.startsprint == 'undefined') { GH.tpl.dialogs.startsprint = {}; }


GH.tpl.dialogs.startsprint.renderStartSprintDialog = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.numNotEstimatedIssues > 0) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml(AJS.format('{0,choice,0#Issue|1#Issue|2#Issues} {0,choice,0#{2}|1#{3}|2#{2} and {3}|5#{2}, {3}} {1,choice,0# |1#and {1} other|2#and {1} others} {0,choice,0#does|1#does|2#do} not have a value for the \x27\x27Estimate\x27\x27 field. Values entered after the start of the sprint will be treated as scope change.',opt_data.numNotEstimatedIssues,opt_data.numExtraNotEstimatedIssues,opt_data.snapshotIssuesNotEstimated,opt_data.lastIssueNotEstimated)) + '</p></div>' : '') + ((opt_data.numNoTrackingEstimateIssues > 0) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml(AJS.format('{0,choice,0#Issue|1#Issue|2#Issues} {0,choice,0#{2}|1#{3}|2#{2} and {3}|5#{2}, {3}} {1,choice,0# |1#and {1} other|2#and {1} others} {0,choice,0#does|1#does|2#do} not have a value for the \x27\x27Remaining\x27\x27 field. Values entered after the start of the sprint will be treated as scope change.',opt_data.numNoTrackingEstimateIssues,opt_data.numExtraNoTrackingEstimateIssues,opt_data.snapshotIssuesNoTrackingEstimate,opt_data.lastIssueNoTrackingEstimate)) + '</p></div>' : '') + ((opt_data.showFilteredIssuesWarning) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Includes issue(s) currently hidden by a Quick Filter or the Instant Filter.') + '</p></div>' : '') + ((opt_data.hasNoSubtaskDoneStatus) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('You will not be able to complete this sprint, as it includes sub-tasks that cannot be transitioned to the \x22Done\x22 column.') + ' <a href="' + soy.$$escapeHtml(opt_data.endSprintHelpUrl) + '" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a></p></div>' : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues|1#{0} issue|2#{0} issues} will be included in this sprint.','<strong>' + opt_data.numIssues + '</strong>',opt_data.numIssues)) + '</p><form class="aui"><fieldset><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml('Sprint name') + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-sprint-name" value="' + soy.$$escapeHtml(opt_data.defaultName) + '"></div><div class="field-group"><label for="ghx-sprint-duration">' + soy.$$escapeHtml('Duration') + ':<span class="aui-icon icon-required"></span></label><select class="select" id="ghx-sprint-duration" name="ghx-sprint-duration">';
  var durationList37 = opt_data.listOfSprintDurations;
  var durationListLen37 = durationList37.length;
  for (var durationIndex37 = 0; durationIndex37 < durationListLen37; durationIndex37++) {
    var durationData37 = durationList37[durationIndex37];
    output += '<option value="' + soy.$$escapeHtml(durationData37.value) + '">' + soy.$$escapeHtml(durationData37.text) + '</option>';
  }
  output += '</select></div><div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml('Start date') + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-start-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.defaultStartDate) + '"><span id="ghx-sprint-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit start date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-start-date-error"></span></div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml('End date') + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-end-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.defaultEndDate) + '"><span id="ghx-sprint-end-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit end date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-end-date-error"></span></div><div class="field-group"><label for="ghx-sprint-goal-input">' + soy.$$escapeHtml('Sprint goal:') + '</label><textarea class="textarea full-width-field" name="goal" id="ghx-sprint-goal-input">' + ((opt_data.sprintGoal) ? soy.$$escapeHtml(opt_data.sprintGoal) : '') + '</textarea></div></fieldset></form><span id="ghx-sprint-work-days-loading" class="aui-icon aui-icon-wait">' + soy.$$escapeHtml('Loading...') + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.startsprint.renderStartSprintDialog.soyTemplateName = 'GH.tpl.dialogs.startsprint.renderStartSprintDialog';
}


GH.tpl.dialogs.startsprint.renderWorkDaysInSprint = function(opt_data, opt_ignored) {
  return '<p id="ghx-sprint-work-days-remaining" class="ghx-sprint-dialog-working-days">' + soy.$$filterNoAutoescape(AJS.format('There {1,choice,0#are|1#is|1\x3care} {0}{1} working {1,choice,0#days|1#day|1\x3cdays}{2} in this sprint','<strong>',opt_data.numWorkDaysInSprint,'</strong>')) + '<span id=\'ghx-sprint-work-days-help\'><span class="aui-icon aui-icon-small aui-iconfont-help ghx-sprint-help-icon"></span><a href=' + soy.$$escapeHtml(opt_data.helpLinkUrl) + ' target="_blank">' + soy.$$escapeHtml('More about working days') + '</a></span></p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.startsprint.renderWorkDaysInSprint.soyTemplateName = 'GH.tpl.dialogs.startsprint.renderWorkDaysInSprint';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveIssuesFromSprintDialog.soy' */
// This file was automatically generated from RemoveIssuesFromSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.removeissuesfromsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.removeissuesfromsprint == 'undefined') { GH.tpl.dialogs.removeissuesfromsprint = {}; }


GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Sprint scope will be affected by this action.') + '</p></div>';
  var changeList6 = opt_data.changes;
  var changeListLen6 = changeList6.length;
  for (var changeIndex6 = 0; changeIndex6 < changeListLen6; changeIndex6++) {
    var changeData6 = changeList6[changeIndex6];
    output += GH.tpl.dialogs.issuemovedialog.renderChange({change: changeData6});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog.soyTemplateName = 'GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/RemoveIssuesFromSprintDialog.js' */
GH.RemoveIssuesFromSprintDialog={},GH.RemoveIssuesFromSprintDialog.Analytics={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.RemoveIssuesFromSprintDialog.Analytics.remove=new e("gh.sprint.issue.remove")}(),GH.RemoveIssuesFromSprintDialog.constructDialog=function(e,i){var n=GH.Dialog.create({width:600,height:250,id:"ghx-remove-issues-from-sprint",onCancelFn:function(n){i.reject(e)}}),t=_.reduce(e.changes,function(e,i){return e+i.issueKeys.length},0);n.addHeader(AJS.format("Move {0,choice,1# issue|2\u003c issues}",t)),n.addPanel("","panel");var o=GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog(e);n.getCurrentPanel().html(o);var s="Confirm";n.addButton(s,function(){n.disableControls(),n.dispose(),i.resolve(e)},"aui-button"),GH.Dialog.addCancelButton(n),n.show(),n.updateHeight(),AJS.$("#"+n.id).find(".dialog-button-panel .button-panel-cancel-link").focus()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddIssuesToActiveSprintDialog.soy' */
// This file was automatically generated from AddIssuesToActiveSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.addissuestoactivesprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.addissuestoactivesprint == 'undefined') { GH.tpl.dialogs.addissuestoactivesprint = {}; }


GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Sprint scope will be affected by this action.') + '</p></div>';
  var changeList6 = opt_data.changes;
  var changeListLen6 = changeList6.length;
  for (var changeIndex6 = 0; changeIndex6 < changeListLen6; changeIndex6++) {
    var changeData6 = changeList6[changeIndex6];
    output += GH.tpl.dialogs.issuemovedialog.renderChange({change: changeData6});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog.soyTemplateName = 'GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/AddIssuesToActiveSprintDialog.js' */
GH.AddIssuesToActiveSprintDialog={},GH.AddIssuesToActiveSprintDialog.Analytics={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.AddIssuesToActiveSprintDialog.Analytics.add=new e("gh.activesprint.issue.add")}(),GH.AddIssuesToActiveSprintDialog.showDialog=function(e,t){var i=GH.IssueMoveController.getAllIssueKeys(e),a=GH.Dialog.create({width:600,height:250,id:"ghx-add-issues-to-active-sprint",onCancelFn:function(e){t.reject(i)}});a.addHeader(AJS.format("Move {0,choice,1# issue|2\u003c issues}",i.length)),a.addPanel("","panel");var n=GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog(e);a.getCurrentPanel().html(n);var s="Confirm";a.addButton(s,function(){a.disableControls(),a.dispose(),t.resolve(e)},"aui-button"),GH.Dialog.addCancelButton(a),a.show(),a.updateHeight(),AJS.$("#"+a.id).find(".dialog-button-panel .button-panel-cancel-link").focus()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/IssueMoveDialog.soy' */
// This file was automatically generated from IssueMoveDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.issuemovedialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.issuemovedialog == 'undefined') { GH.tpl.dialogs.issuemovedialog = {}; }


GH.tpl.dialogs.issuemovedialog.renderChange = function(opt_data, opt_ignored) {
  return '' + ((opt_data.change.issueKeys.length > 0) ? '<p>' + GH.tpl.dialogs.issuemovedialog.renderMoveMessage({issueKeys: opt_data.change.issueKeys, fromSprint: opt_data.change.currentSprint, toSprint: opt_data.change.targetSprint}) + '</p>' : '') + ((opt_data.change.doneIssueKeys.length > 0) ? '<p>' + GH.tpl.dialogs.issuemovedialog.renderRemoveMessage({issueKeys: opt_data.change.doneIssueKeys}) + '</p>' : '');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderChange.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderChange';
}


GH.tpl.dialogs.issuemovedialog.renderRemoveMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issuesHtml__soy18 = '' + GH.tpl.dialogs.issuemovedialog.renderIssues(opt_data);
  output += soy.$$filterNoAutoescape(AJS.format('{0} {1,choice,1# is|2\x3c are} done and will be removed and only appear in reports.',issuesHtml__soy18,opt_data.issueKeys.length));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderRemoveMessage.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderRemoveMessage';
}


GH.tpl.dialogs.issuemovedialog.renderMoveMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issuesHtml__soy24 = '' + GH.tpl.dialogs.issuemovedialog.renderIssues(opt_data);
  var fromSprintHtml__soy27 = '' + GH.tpl.dialogs.issuemovedialog.renderSprintBacklog({sprint: opt_data.fromSprint});
  var toSprintHtml__soy30 = '' + GH.tpl.dialogs.issuemovedialog.renderSprintBacklog({sprint: opt_data.toSprint});
  output += soy.$$filterNoAutoescape(AJS.format('{0} will be moved from {1} to {2}.',issuesHtml__soy24,fromSprintHtml__soy27,toSprintHtml__soy30));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderMoveMessage.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderMoveMessage';
}


GH.tpl.dialogs.issuemovedialog.renderSprintBacklog = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.sprint) {
    var sprintHtml__soy38 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.sprint.name});
    output += soy.$$filterNoAutoescape(AJS.format('sprint {0}',sprintHtml__soy38));
  } else {
    output += soy.$$escapeHtml('the backlog');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderSprintBacklog.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderSprintBacklog';
}


GH.tpl.dialogs.issuemovedialog.renderIssues = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issueKeys.length == 1) {
    var firstHtml__soy48 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    output += soy.$$filterNoAutoescape(AJS.format('{0}',firstHtml__soy48));
  } else if (opt_data.issueKeys.length == 2) {
    var firstHtml__soy54 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    var secondHtml__soy57 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[1]});
    output += soy.$$filterNoAutoescape(AJS.format('{0} and {1}',firstHtml__soy54,secondHtml__soy57));
  } else if (opt_data.issueKeys.length > 2) {
    var firstHtml__soy63 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    var secondHtml__soy66 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[1]});
    var moreCountHtml__soy69 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys.length - 2});
    output += soy.$$filterNoAutoescape(AJS.format('{0}, {1} and {2} more {3,choice,1# issue|2\x3c issues}',firstHtml__soy63,secondHtml__soy66,moreCountHtml__soy69,opt_data.issueKeys.length - 2));
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderIssues.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderIssues';
}


GH.tpl.dialogs.issuemovedialog.emphasis = function(opt_data, opt_ignored) {
  return '<strong>' + soy.$$escapeHtml(opt_data.value) + '</strong>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.emphasis.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.emphasis';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/ConfirmDialog.js' */
GH.ConfirmDialog={},GH.ConfirmDialog.create=function(n,a){var t={header:"Confirmation",content:"Are you sure?",contentEscaping:!0,onConfirmFn:function(){},onCancelFn:function(){},width:433,height:184,analyticsPageName:void 0},e=_.defaults(a,t),i=GH.Dialog.create({id:n,width:e.width,height:e.height,closeOnOutsideClick:!1,onCancelFn:e.onCancelFn,analyticsPageName:e.analyticsPageName});i.addHeader(e.header);var o;return o=e.contentEscaping?AJS.$("<div />").text(e.content):AJS.$("<div />").html(e.content),i.addPanel("",o,"ghx-confirm-dialog-panel"),i.addButton("Confirm",function(n){n.dispose(),e.onConfirmFn()},"aui-button"),GH.Dialog.addCancelButton(i),AJS.$("#"+i.id).addClass("ghx-dialog"),i};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/IssueSelectionManager.js' */
!function(){"use strict";var e=require("jira/viewissue/comment/comment-form");GH.IssueSelectionManagerModel={isIssueValid:function(e){return!1},getIssueIndex:function(e){return-1},canAddToSelection:function(e,t){return!1},getIssueRange:function(e,t){return[e,t]}},GH.IssueSelectionManager=function(e,t){this.model=e,this.selectedIssuesStateKey=t,this.lastNonShiftSelectedKey=void 0,this.lastShiftSelectedKey=void 0},GH.IssueSelectionManager.prototype.validateCurrentSelection=function(){var e=this.getSelectedIssueKeys(),t=e.slice(0).reverse(),s=[];return _.each(t,function(e){this.model.isIssueValid(e)&&(0===s.length||this.model.canAddToSelection(s,e))&&s.push(e)},this),s.reverse(),!_.isEqual(e,s)&&(this.storeSelectedIssueStack(s),!0)},GH.IssueSelectionManager.prototype.selectIssue=function(e){var t=e?[e]:[];this._replaceSelectedIssueKeys(t),this._setLastNonShiftSelectedKey(e)},GH.IssueSelectionManager.prototype.getSelectedIssueKeys=function(){return GH.BoardState.getPerViewValue(this.selectedIssuesStateKey,[])},GH.IssueSelectionManager.prototype.storeSelectedIssueStack=function(e){GH.BoardState.setPerViewValue(this.selectedIssuesStateKey,e)},GH.IssueSelectionManager.prototype.getSelectedIssuesInOrder=function(){var e=this.getSelectedIssueKeys();return _.sortBy(e,this.model.getIssueIndex.bind(this.model))},GH.IssueSelectionManager.prototype.isInSelection=function(e){var t=this.getSelectedIssueKeys();return _.contains(t,e)},GH.IssueSelectionManager.prototype.hasSelection=function(){var e=this.getSelectedIssueKeys();return!_.isEmpty(e)},GH.IssueSelectionManager.prototype._addToSelection=function(e){if(!this.isInSelection(e)){var t=this.getSelectedIssueKeys();t.push(e),this.storeSelectedIssueStack(t)}},GH.IssueSelectionManager.prototype._addSelectedIssueKeys=function(e){var t=this;_.each(e,function(e){t._addToSelection(e)})},GH.IssueSelectionManager.prototype._removeFromSelection=function(e){var t=this.getSelectedIssueKeys();t=_.without(t,e),this.storeSelectedIssueStack(t)},GH.IssueSelectionManager.prototype.removeSelectedIssueKeys=function(e){var t=this;_.each(e,function(e){t._removeFromSelection(e)})},GH.IssueSelectionManager.prototype._replaceSelectedIssueKeys=function(e){this._clearSelectedIssueKeys(),this._addSelectedIssueKeys(e)},GH.IssueSelectionManager.prototype._clearSelectedIssueKeys=function(){this.storeSelectedIssueStack([])},GH.IssueSelectionManager.prototype.getSelectedIssueKey=function(){var e=this.getSelectedIssueKeys(),t=e[e.length-1];return t||null},GH.IssueSelectionManager.prototype._getLastNonShiftSelectedKey=function(){if(!this.lastNonShiftSelectedKey){var e=this.getSelectedIssueKey();if(e&&this.model.isIssueValid(e))return this._setLastNonShiftSelectedKey(e),e}return this.lastNonShiftSelectedKey},GH.IssueSelectionManager.prototype._setLastNonShiftSelectedKey=function(e){this.lastNonShiftSelectedKey=e,this.lastShiftSelectedKey=void 0},GH.IssueSelectionManager.prototype._getLastShiftSelectedKey=function(){return this.lastShiftSelectedKey},GH.IssueSelectionManager.prototype._setLastShiftSelectedKey=function(e){this.lastShiftSelectedKey=e},GH.IssueSelectionManager.prototype.handleIssueClick=function(e,t){var s=GH.MouseUtils.isMetaPressed(e),i=GH.IssueSelectionManager.getMultiSelectType(e);if(!this.model.isIssueValid(t))return!1;if(!GH.IssueSelectionManager.canChangeIssueSelection())return!1;if(i&&!this.model.canAddToSelection(this.getSelectedIssueKeys(),t))return!1;if(i)if(i===GH.IssueSelectionManager._META_MULTI_SELECT)this.isInSelection(t)?this.removeSelectedIssueKeys([t]):this._addSelectedIssueKeys([t]),this._setLastNonShiftSelectedKey(t);else{var n=this._getLastNonShiftSelectedKey(),o=this.getSelectedIssueKeys();if(0!==o.length&&n&&this.model.isIssueValid(n)){var c=this.model.getIssueRange(n,t);if(s){var a=[],l=this._getLastShiftSelectedKey();l&&(a=this.model.getIssueRange(n,l)||[],a=_.without(a,c)),this.removeSelectedIssueKeys(a),this._addSelectedIssueKeys(c)}else this._replaceSelectedIssueKeys(c)}else this.selectIssue(t);this._setLastShiftSelectedKey(t)}else this.selectIssue(t);return!0},GH.IssueSelectionManager._NO_MULTI_SELECT=0,GH.IssueSelectionManager._META_MULTI_SELECT=1,GH.IssueSelectionManager._SHIFT_MULTI_SELECT=2,GH.IssueSelectionManager.getMultiSelectType=function(e){var t=GH.MouseUtils.isMetaPressed(e),s=GH.MouseUtils.isShiftPressed(e),i=GH.IssueSelectionManager._NO_MULTI_SELECT;return s?i=GH.IssueSelectionManager._SHIFT_MULTI_SELECT:t&&!s&&(i=GH.IssueSelectionManager._META_MULTI_SELECT),i},GH.IssueSelectionManager.canChangeIssueSelection=function(){var t=e.handleBrowseAway();return!(t&&!window.confirm(t))||(e.focus(),!1)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanDragAndDrop.js' */
define("jira-agile/rapid/ui/plan/plan-drag-and-drop",["require"],function(e){"use strict";function t(e){return{revert:0,zIndex:3e3,appendTo:"body",helper:"clone",scroll:!0,additionalScrollParents:function(){return o("#ghx-backlog, .ghx-classification-scrollview")},ignoreOriginalScroll:!0,update:function(t,r){y.skipNextRank?e.agileSortable("cancel"):y.updateHandler.apply(this,[t,r])},start:function(t,r){y.skipNextRank=!1,e.addClass("ghx-drag-in-progress");var n=o(r.item.context).hasClass("ghx-marker");n&&e.addClass("ghx-sprint-divider-drag-in-progress"),y.dragStartHandler.apply(this,[t,r])},stop:function(t,r){e.removeClass("ghx-drag-in-progress ghx-sprint-divider-drag-in-progress"),y.dragStopHandler.apply(this,[t,r])}}}function r(e,t){a(o("#ghx-version-column"),"version-id",e,t)}function n(e,t){a(o("#ghx-epic-column"),"epic-id",e,t)}function a(e,t,r,n){var a=function(e){return e.addClass("ghx-target-hover-rejected").attr(y.REJECTION_REASON_ATTRIBUTE,r)},i=e.find(".ghx-classification-cards .ghx-classification-item"),s=void 0;if(l.isFunction(n)){var d=function(e,r){var a=o(r).data(t);return n(parseInt(a,10))};s=i.filter(d)}a(s||i),l.isFunction(n)&&!n(null)||a(e.find(".ghx-classification-pending"))}function i(e,t,r,n){var a=p.calculateIssueMoveModel(e,t),i=p.confirmMove(a);return i.fail(function(){h.reload()}),i.done(function(a){y.trigger("before:sprintRankIssue",{selectedIssueNo:e.length});var i=[],d=[],g=p.isMoveBetweenActiveSprints(a)||p.isOnlyRankOperation(a);if(g)i=e;else{var f=a.changes[0];i=f.issueKeys,d=f.doneIssueKeys}var v=!1;if(l.isEmpty(i)||(v=C.moveIssues(i,t,r,n)),!l.isEmpty(d)){var k=c.findModelWithIssue(d[0]);C.removeIssues(k,d)}var m=[];l.isEmpty(i)?m.push(o.Deferred().resolve(null)):m.push(GH.RankController.sprintRankIssues(c.getRankCustomFieldId(),i,t,n,r,null,v)),l.isEmpty(d)?m.push(o.Deferred().resolve(null)):m.push(GH.RankController.sprintRankIssues(c.getRankCustomFieldId(),d,null,null,null)),o.when.apply(null,m).done(function(e,r){I.triggerAnalytics(a);var n=e&&GH.RankController.getErrorRankResultFromResponse(e[0]);n||(n=r&&GH.RankController.getErrorRankResultFromResponse(r[0])),n?(GH.Notification.showWarning(n.errors[0]),h.reload(function(){y.trigger("after:sprintRankIssue")})):(y.refreshDetailsView(a),u.showSprintRankSuccessMessage(a),e[0].success.newIssuesOrder&&C.reorderIssuesInSprint(e[0].success.newIssuesOrder,t),s(a),y.trigger("after:sprintRankIssue"))}).fail(function(){h.reload(function(){y.trigger("after:sprintRankIssue")})})}),i.done(function(){JIRA.trace("gh.plan.ranking.complete")}),i}function s(e){var t=e.changes[0],r=[],n=null,a=null;t.currentSprint&&(n=t.currentSprint.id),t.targetSprint&&(a=t.targetSprint.id),n!==a?r.push({name:"sprint",oldValId:n,newValId:a}):r.push({name:"customfield_"+GH.BacklogModel.getRankCustomFieldId()}),t.issueKeys.forEach(function(e){GH.RapidBoard.sendIssueUpdatedTrackEvent(GH.BacklogModel.getIssueData(e),r)})}var o=e("jquery"),l=e("underscore"),d=e("jira-agile/rapid/global-events"),g=e("jira-agile/rapid/analytics-tracker"),c=e("jira-agile/rapid/ui/plan/backlog-model"),u=e("jira-agile/rapid/ui/plan/issue-actions"),p=e("jira-agile/rapid/ui/plan/issue-move-controller"),h=e("jira-agile/rapid/ui/plan/plan-controller"),f=e("jira-agile/rapid/ui/plan/plan-controls"),v=e("jira-agile/rapid/ui/plan/kanban-transition-and-rank"),k=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),m=e("jira-agile/rapid/ui/plan/sprint-view"),I=e("jira-agile/rapid/ui/plan/sprint-controller"),S=e("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"),x=e("jira-agile/rapid/events"),C=void 0,b=void 0,R=void 0,E=void 0;d.on("pre-initialization",function(){C=e("jira-agile/rapid/ui/plan/backlog-controller"),b=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),R=e("jira-agile/rapid/ui/plan/BacklogView"),E=e("jira-agile/rapid/ui/plan/plan-issue-list-view")});var y=new x;y.currentDragElement=void 0,y.currentSprintId=null,y.REJECTION_REASON_ATTRIBUTE="data-target-rejected-reason";var H={VERSION_PROJECT_MISMATCH:"versionProjectMismatch",SUBTASKS_IN_EPIC:"subtasksInEpic"};y.analytics={},y.analytics.sprints=new g("gh.sprint.issues"),y.analytics.ranking=new g("gh.rapidboard.rankissues"),y.cancel=!1,y.skipNextRank=!1,y.getCancelSelector=function(){var e=":input,button,.js-fake-parent,.ghx-subtask-group, .ghx-not-rankable",t=c.canManageSprints();return t||(e+=",.ghx-marker"),e};var D=function(e){var r=this,n=Object.assign(t(e),{revert:!0,revertDuration:0,start:function(t,n){y.skipNextRank=!1,e.addClass("ghx-drag-in-progress"),y.dragStartHandler.apply(r,[t,n]);var a=o(n.helper.context);a.addClass("ghx-draggable-fake-placeholder"),o(n.helper).width(a.width())},stop:function(t,n){e.removeClass("ghx-drag-in-progress"),y.dragStopHandler.apply(r,[t,n]);var a=o(n.helper.context);a.removeClass("ghx-draggable-fake-placeholder"),y.skipNextRank===!1&&y.showNotRankableWarning()}});e.on("mousedown",function(){document.activeElement&&document.activeElement.blur()}).find(".js-issue").draggable(n)},j=function(e){var r=y.getCancelSelector(),n=e.find(".js-issue").first();e.on("mousedown",function(){document.activeElement&&document.activeElement.blur()}).agileSortable(Object.assign(t(e),{forceHelperSize:!0,helperProportions:{width:n.width(),height:n.height()},initializeTopAndLeft:!0,containment:function(){if(!this.helper.hasClass("ghx-marker"))return!1;var e=this.currentItem.parent(),t=e.find(".js-issue-list"),r=t.offset();return[0,r.top,1e4,1e4]},intersectionOverride:function(e){var t=o.ui.isOverAxis(this.positionAbs.top+this.helperProportions.height/2,e.top,e.height),r=o.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&r,a=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return!!n&&(this.floating?i&&"right"==i||"down"==a?2:1:a&&("down"==a?2:1))},helperAdjusted:function(){y.markerMove&&y.adjustMarkerDragOverlayHeight.apply(this)},axisAdjusted:function(){var e="y";this.currentItem.is(".js-issue")&&(e="both"),this.options.axis=e},items:".js-parent-drag:not(.ghx-filtered)",cancel:r,change:y.changeHandler}))};return y.enableDragAndDrop=function(){function e(e){return e.find(".ghx-dropzone-active").length||!e.hasClass("ghx-open")||e.find(".ghx-no-issues").length}var r=o("#ghx-content-group");y.skipNextRank=!1;var n=function(){document.activeElement&&"ghx-backlog-search-input"===document.activeElement.id&&o("#ghx-backlog-search-input").blur()};r.mousedown(function(e){o(e.target).is(".js-editing-field")||(n(),GH.RapidBoard.Util.InlineEditable.submitActiveEdits()&&e.stopPropagation())}),c.isRankable()?j(r):D(r),o(".ghx-backlog-container").agileDroppable({accept:".js-sortable.js-issue",hoverClass:"ghx-target-hover",tolerance:"pointer",drop:function(t,r){var n=o(r.helper),a=o(this);if(e(a)&&!y.cancel){var i=b.getSelectedIssueKeys(),s=null,d=null,g=o(this).data("sprint-id");GH.RapidBoard.State.isCollapsibleBacklogEnabled()?(d=g===c.BACKLOG_ID?g:parseInt(g,10),s=c.getSprintModel(d)):(d=parseInt(g,10)||null,s=c.getSprintModel(d),s||(s=c.getBacklogModel2())),y.analytics.sprints.trigger("addbydragndrop","selectedIssuesCount",i.length);var u=null;E.isSubtask(n)||(u=l.last(s.getIssueList().getOrder())),y.skipNextRank=!0,setTimeout(function(){y.rankIssues(i,d,u,null)})}}}),r.find(".ghx-subtask-group").agileSortable(Object.assign({items:".ghx-subtask"},t(r))),y.initializeClassificationDnD()},y.initializeClassificationDnD=function(){var e=y.getCancelSelector(),t=o(".ghx-classification-cards"),r=o("#ghx-epic-column").find(".ghx-classification-cards");r.agileSortable({helper:"clone",axis:"y",revert:0,zIndex:3e3,containment:"parent",start:function(e,t){y.dragStartHandler.apply(this,[e,t])},stop:y.dragStopHandler,tolerance:"pointer",items:".js-parent-drag, .js-sortable",cancel:e,update:function(e,t){y.updateHandler.apply(this,[e,t])}});var n=t.find(".ghx-classification-item").add(o(".ghx-classification-pending")),a=0;n.agileDroppable({accept:".js-sortable.js-issue",hoverClass:"ghx-target-hover",tolerance:"pointer",over:function(e,t){o(this).hasClass("ghx-target-hover-rejected")&&(a++,a>0&&t.helper.css("cursor","not-allowed"))},out:function(e,t){o(this).hasClass("ghx-target-hover-rejected")&&(a--,a<=0&&t.helper.css("cursor",""))},drop:function(){a=0;var e=o(this),t=e.attr("data-epic-key"),r=e.attr("data-version-id");if(!y.cancel){var n=b.getSelectedIssueKeys();if(e.hasClass("ghx-target-hover-rejected")){var i=e.attr(y.REJECTION_REASON_ATTRIBUTE),s=void 0;switch(i){case H.VERSION_PROJECT_MISMATCH:s=AJS.format("Issues can only be added to a version that belongs to the same project as the {0,choice,0#issues|1#issue|2#issues}",n.length);break;case H.SUBTASKS_IN_EPIC:s="You can\'t add sub-tasks to epics. Sub-tasks are automatically associated with the same epic as their parent issues."}s&&GH.Notification.showWarnings(s,{autoHide:!0,preRendered:!0})}else if(l.isEmpty(t)){if(!l.isEmpty(r)){var d=[];l.each(n,function(e){var t=c.getIssueData(e);t&&d.push(t)});var g=l.some(d,function(e){return e.fixVersions.length>1}),u=function(){k.isNoneVersionFilterId(r)?GH.VersionController.clearIssuesVersion(d):GH.VersionController.setIssuesVersion(parseInt(r,10),d)};if(g&&!GH.storage.get("gh.dialog.versionChangeConfirm.dontAsk",!1)){var p;if(k.isNoneVersionFilterId(r))p=AJS.format("This action will remove any versions from the {0,choice,0#issues|1#issue|2#issues}",d.length);else{var h=GH.VersionController.getVersionModel().getVersion(parseInt(r,10));p=AJS.format("Adding the selected {1,choice,0#issues|1#issue|2#issues} to version {0} will remove the {1,choice,0#issues|1#issue|2#issues} from any other versions","<b>"+AJS.escapeHTML(String(h.name))+"</b>",d.length)}var f="ghx-version-change-confirm-dialog";GH.ConfirmDialog.create(f,{content:p,contentEscaping:!1,onConfirmFn:function(){u()}}).show(),o("#"+f).find(".dialog-button-panel").prepend(GH.tpl.versionview.renderDontAskAgain());var v=o("#ghx-dont-ask-for-confirmation");v.change(function(){GH.storage.put("gh.dialog.versionChangeConfirm.dontAsk",v.is(":checked"),!1)})}else setTimeout(u)}}else k.isNoneEpicFilterKey(t)?GH.EpicController.removeIssuesFromAssociatedEpics(n):GH.EpicController.addIssuesToEpic(t,n);y.skipNextRank=!0}}})},y.dragStartHandler=function(e,t){y.cancel=!1;var r=o(t.item?t.item:t.helper[0]),n=o(this),a=r.hasClass("ghx-marker")||r.hasClass("js-parent-drag");setTimeout(function(){f.stopEdits()},0),GH.EpicView.hideDropdown(),GH.VersionView.hideDropdown(),GH.PlanContextMenuController.hideContextMenu(),o(document).bind("keydown.planDragAndDrop",function(e){27==e.keyCode&&(y.cancel=!0,n.agileSortable("cancel"),a&&C.revertStatistics())}),r.hasClass("js-issue")?(y.markerMove=!1,y.issueDragStartHandler.apply(this,[e,t])):a&&(y.markerMove=!0,y.markerDragStartHandler.apply(this,[e,t])),GH.LinkedPagesController.hideCurrentDialog()},y.dragStopHandler=function(e,t){var r=o(t.item?t.item:t.helper[0]);y.hideDropZones(),o(document).unbind("keydown.planDragAndDrop"),r.hasClass("js-issue")?y.issueDragStopHandler.apply(this,[e,t]):(r.hasClass("ghx-marker")||r.hasClass("js-parent-drag"))&&y.markerDragStopHandler.apply(this,[e,t])},y.updateHandler=function(e,t){var r=o(t.item);y.cancel||(r.hasClass("js-issue")?y.issueUpdateHandler(e,t):r.hasClass("ghx-marker")||r.hasClass("js-parent-drag")?y.markerUpdateHandler(e,t):r.hasClass("ghx-classification-item")&&y.epicUpdateHandler(e,t))},y.changeHandler=function(e,t){var r=o(t.item),n=r.hasClass("js-issue"),a=t.placeholder,i=a.parent(),s=i.hasClass("js-issue-list");if(n){if(!s){var l=a.prevAll(".js-issue-list");l.length&&l.append(a)}}else{var d=m.getSprintIdForMarker(o(t.item)),g=m.getSprintIdForElement(a),c=d===g;if(c){if(s){var u=!a.next(".js-issue").length;u&&i.after(a)}}else if(!s){var l=a.prevAll(".js-issue-list");l.length&&l.append(a)}}r.hasClass("js-issue")||(r.hasClass("ghx-marker")||r.hasClass("js-parent-drag"))&&y.markerChangeHandler(e,t)},y.issueDragStartHandler=function(e,t){var a=o(t.helper);!E.isSubtask(a)&&c.isRankable()||y.setupDropZones(E.getIssueId(a)),y.currentDragElement=a,y.currentSprintId=m.getSprintIdForElement(o(t.item));var i=E.getIssueKey(a);b.ensureIssueSelected(e,i);var s=b.getSelectedIssueKeys(),d=b.getCollapsedSubTasksToSelection(s);d.length>0&&b.addSelectedIssueKeys(d),s.length>1&&(a.hasClass("ghx-parent-group")?a.children(".js-issue").addClass("ghx-move-main").find(".ghx-move-count > b").text(s.length):a.addClass("ghx-move-main").find(".ghx-move-count > b").text(s.length));var g=l.chain(s).map(function(e){return c.getIssueData(e).projectId}).uniq().value();g.length>1?r(H.VERSION_PROJECT_MISMATCH,l.isNumber):r(H.VERSION_PROJECT_MISMATCH,function(e){var t=GH.VersionController.getVersionModel().getVersion(e);return t&&t.project&&l.first(g)!==t.project.id});var u=s.some(c.isSubtask);u&&n(H.SUBTASKS_IN_EPIC)},y.issueDragStopHandler=function(e,t){var r=o(t.item?t.item:t.helper[0]);r.css("cursor",""),r.hasClass("ghx-parent-group")?r.children(".js-issue").removeClass("ghx-move-main"):r.removeClass("ghx-move-main"),y.currentDragElement=null,o(".ghx-classification-cards").find(".ghx-target-hover-rejected").removeClass("ghx-target-hover-rejected").removeAttr(y.REJECTION_REASON_ATTRIBUTE);var n=E.getIssueByKey(r.data("issue-key")),a=m.getSprintIdForElement(n),i=y.currentSprintId!==a,s=b.getSelectedIssuesInOrder();i&&E.expandAllAfterTransition(s)},y.isIssueBeingDragged=function(e){var t=y.currentDragElement;if(t){var r=AJS.$(t).data("issue-key");return e===r}},y.isAnyIssueBeingDragged=function(){return!!y.currentDragElement},y.isIssueInListBeingDragged=function(e){return l.find(e,function(e){return y.isIssueBeingDragged(e)})},y.issueUpdateHandler=function(e,t){var r=o(t.item),n=b.getSelectedIssuesInOrder();y.analytics.ranking.trigger("dragAndDrop",n.length);var a=E.findPrevRankableElement(r),i=E.getRankableId(a),s=E.findNextRankableElement(r),l=E.getRankableId(s),d=m.getSprintIdForElement(r),g=!!i,c=!!l;g&&c&&(l=!1),y.rankIssues(n,d,i,l)},y.epicUpdateHandler=function(e,t){function r(e){return{key:e.attr("data-epic-key"),id:e.attr("data-epic-id")}}var n=o(t.item),a=r(n),i=n.prev(),s=i.length>0&&r(i),l=n.next(),d=l.length>0&&r(l),g=[a.key];GH.EpicController.reorderEpics(g,s.key,d.key);var u=function(){h.reload()},p=function(e){var t=GH.RankController.getErrorRankResultFromResponse(e);t&&(GH.Notification.showWarning(t.errors[0]),h.reload())};GH.RankController.rankEpics(c.getRankCustomFieldId(),a.id,d.id,s.id).fail(u).done(p)},y.setupDropZones=function(e){var t=c.findModelWithIssue(e),r=l.filter(o(".ghx-backlog-container"),function(e){var r=o(e).data("sprint-id")||"backlog";return r!==t.getId()});y.showDropZones(r)},y.showDropZones=function(e){l.each(e,function(e){o(e).find(".js-issue-list").addClass("ghx-dropzone-active")})},y.hideDropZones=function(){o(".js-issue-list").removeClass("ghx-dropzone-active")},y.rankIssues=function(e,t,r,n){return GH.RapidBoard.State.isIssueListBacklog()?(y.trigger("before:kanbanRankIssue",{selectedIssueNo:e.length}),v.assignToListAndRank(e,t,r,n).always(function(){y.trigger("after:kanbanRankIssue")}),o.Deferred().resolve()):GH.RapidBoard.State.isKanbanBoard()?(y.trigger("before:kanbanRankIssue",{selectedIssueNo:e.length}),v.transitionAndRankIssues(e,t,r,n).always(function(){y.trigger("after:kanbanRankIssue")}),o.Deferred().resolve()):i(e,t,r,n)},y.refreshDetailsView=function(e){if(h.isDetailsViewOpened()&&!p.isOnlyRankOperation(e)){var t=GH.DetailsView.selectedIssueKey,r=p.getAllIssueKeys(e);l.contains(r,t)&&GH.DetailsView.reload(S.DETAILS_FIELD_CHANGED)}},y.markerDragStartHandler=function(e,t){var r=o(t.item),n=r.parent(),a=n.offset(),i=n.children(".js-issue-list"),s=i.offset(),l=r.height(),d=o(GH.tpl.backlogview.renderDragOverlay({})),g=o("#ghx-backlog").offset().top,c=function(e){var t=e.top;return t<g?g:t},u=function(e){return t.helper.offset().top-e+l},p=c(s),h=u(p);d.css({top:p,left:a.left+1,height:h,width:n.outerWidth()-2}).appendTo("body"),y.adjustMarkerDragOverlayHeight=function(){this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");var e=i.offset(),t=c(e),r=u(t);d[0].style.top=t+"px",d[0].style.height=r+"px"};var f=o(t.helper);r.closest(".ghx-sprint-planned").addClass("ghx-active-drag"),y.currentDragElement=f},y.markerChangeHandler=function(e,t){var r=o(t.placeholder),n=m.getSprintIdForMarker(t.item);if(n){var a=m.getSprintIdForElement(r),i=E.findPreviousVisibleIssueElementInList(r),s=E.getRankableId(i);y.updateTemporarySprintStatistics(n,a,s)}},y.markerDragStopHandler=function(){var e=o(".ghx-backlog-container");e.removeClass("ghx-active-drag ghx-overtaken"),o(".ghx-drag-overlay").remove(),y.currentDragElement=null},y.markerUpdateHandler=function(e,t){y.analytics.sprints.trigger("footerdrag");var r=o(t.item),n=m.getSprintIdForMarker(r);if(n){var a=m.getSprintIdForElement(r),i=E.findPreviousVisibleIssueElementInList(r),s=E.getRankableId(i);y.handleMarkerDragRanking(n,a,s)}},y.handleMarkerDragRanking=function(e,t,r){var n=c.calculateRankingDataForSprintMarkerMove(e,t,r);if(n){var a=y.rankIssues(n.issueKeys,n.sprintId,n.prevRankableId,n.nextRankableId);a.done(function(){var e=b.validateCurrentSelection();e&&R.updateIssueSelectionState(!1)})}if(e!=t&&!r){var i=[];t?i.push(c.getSprintModel(t)):i.push(c.getBacklogModel2()),n||i.push(c.getSprintModel(e)),R.redrawChangedModels(i)}},y.updateTemporarySprintStatistics=function(e,t,r){var n=c.getSprintModel(e);if(n){var a=c.calculateTemporaryDataForSprintWithMarker(e,t,r);m.markAsOvertaken(a.modelsData.otherAffectedModels),m.updateSprintStatisticForDraggedSprint(n,a.issueList)}},y._findShownElementByClass=function(e){return function(t){var r=o(t);return r.hasClass(e)&&!r.is(":hidden")}},y._findShownElement=function(e){var t=o(e);return!t.is(":hidden")},y.showNotRankableWarning=function(){var e=GH.RapidBoard.getRapidViewConfigurationUrl(C.rapidViewData.id,"filter"),t='<a href="'+e+'">',r="</a>",n=AJS.format("Ranking is disabled, as the Filter Query for this board is not ordered by ascending Rank. Please check your {0}filter configuration{1}.",t,r);GH.Notification.showWarning(n)},y});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/KanbanTransitionAndRank.js' */
define("jira-agile/rapid/ui/plan/kanban-transition-and-rank",["require"],function(e){"use strict";function a(e){return GH.Ajax.put({url:"/xboard/transitionAndRank",data:e}).fail(f.reload)}function n(e){return GH.Ajax.put({url:"/xboard/assignToListAndRank",data:e}).fail(f.reload)}function s(e,a,n,s){return w.fireTransitionAnalytics("jira-software.plan.issuecard.drop.success",e),y.refreshDetailsView(s),e.calculateNewIssuesOrder&&m.reorderIssuesInSprint(a.newIssuesOrder,n),JIRA.trace("gh.plan.ranking.complete"),w.triggerIssuesUpdateEvent(e.issueKeys),AJS.$.Deferred().resolve().promise()}function i(e,a){w.fireTransitionAnalytics("jira-software.plan.issuecard.drop.success",e);var n=g.getIssueIdForKey(e.issueKeys[0]);return GH.WorkDragAndDrop.executeWorkflowTransition(n,a.id,a.targetStatus),r(e)}function r(e){return GH.RankController.rankIssues(e.rankCustomFieldId,e.issueKeys,e.rankBeforeIssueIdOrKey,e.rankAfterIssueIdOrKey).fail(function(){t(!1,e.issueKeys.length),f.reload()}).done(function(a){var n=GH.RankController.getErrorRankResultFromResponse(a);n?(t(!1,e.issueKeys.length,n.errors[0]),GH.Notification.showWarning(n.errors[0]),f.reload()):(t(!0,e.issueKeys.length),a.success.rankableChanges.forEach(function(e){if(e.wasChanged){var a=[{name:"customfield_"+GH.BacklogModel.getRankCustomFieldId()}];GH.RapidBoard.sendIssueUpdatedTrackEvent(GH.BacklogModel.getIssueData(e.issueKey),a)}}),JIRA.trace("gh.plan.ranking.complete"))})}function t(e,a,n){var s={name:"jira-software.plan.issuecard.drag-rank."+(e?"success":"error"),data:{boardtype:"kanban",issuecount:a}};n&&(s.data.cause=n),AJS.trigger("analyticsEvent",s)}function o(e,n,r,t){var o=p.createTransitionStatusDialog(n.possibleTransitions,e.issueKeys);return o.on("submit",function(o){w.trigger("before:submitMultipleTransitionsDialog",{selectedIssueNo:e.issueKeys.length}),w.fireViewAnalytics("jira-software.plan.transition-menu.view.confirm",e,n);var u=d.find(n.possibleTransitions,function(e){return e.id===parseInt(o)}),l=void 0;u.hasTransitionView?l=i(e,u):(e.selectedTransitionId=u.id,l=a(e).then(function(a){return w.showTransitionSuccessMessage(e.issueKeys),a.isSuccess()&&w.sendIssueTransitionedTrackEvent(e,n),s(e,a.success,r,t)})),l.always(function(){w.trigger("after:submitMultipleTransitionsDialog")})},o),o.on("cancel",function(){w.fireTransitionAnalytics("jira-software.plan.issuecard.transition.selection.dialog.cancelled",e),w.fireViewAnalytics("jira-software.plan.transition-menu.view.cancel",e,n),f.reload()},o),o.show(),AJS.$.Deferred().resolve().promise()}var u=e("jquery"),d=e("underscore"),l=e("jira/dialog/dialog-register"),c=e("jira-agile/rapid/global-events"),g=e("jira-agile/rapid/ui/plan/backlog-model"),f=e("jira-agile/rapid/ui/plan/plan-controller"),p=e("jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils"),v=e("jira-agile/rapid/ui/plan/issue-move-controller"),I=e("jira/util/events"),k=e("jira-agile/rapid/events"),y=void 0,m=void 0,T=void 0;c.on("pre-initialization",function(){m=e("jira-agile/rapid/ui/plan/backlog-controller"),T=e("jira-agile/rapid/ui/plan/BacklogView"),y=e("jira-agile/rapid/ui/plan/plan-drag-and-drop")}),I.bind("Dialog.hide",function(e,a,n,s){if(GH.RapidBoard.State.isPlanMode()&&GH.RapidBoard.State.isKanbanBoard()&&s&&s.match(/^workflow-transition-(\d+)-dialog$/)&&l[s].cancelled){f.reload();var i=g.sprintModels[0].sprintData.column.statusIds,r=GH.WorkDragAndDrop.transitionTargetStatus;AJS.trigger("analyticsEvent",{name:"jira-software.plan.issuecard.transition.view.dialog.cancelled",data:{boardtype:"kanban",toselectedfordevelopment:i.indexOf(r.toString())!==-1,issuecount:1}})}});var w=new k;w.transitionAndRankIssues=function(e,n,t,d){if(0===e.length)return u.Deferred().resolve();var l=v.calculateIssueMoveModel(e,n),c=m.moveIssues(e,n,t,d),f={rapidViewId:GH.RapidBoard.State.getRapidViewId(),issueKeys:e,targetColumn:b(l),rankCustomFieldId:g.getRankCustomFieldId(),calculateNewIssuesOrder:c,rankBeforeIssueIdOrKey:d||void 0,rankAfterIssueIdOrKey:t||void 0,mode:GH.RapidBoard.State.getMode()};if(v.isOnlyRankOperation(l))return r(f);var p=function(e){var a=e.success;return 0===a.possibleTransitions.length?(w.sendIssueTransitionedTrackEvent(f,a),s(f,a,n,l)):a.possibleTransitions.length>1?o(f,a,n,l):i(f,a.possibleTransitions[0])};return a(f).then(p,function(){return u.Deferred().resolve()})},w.assignToListAndRank=function(e,a,i,t){if(0===e.length)return u.Deferred().resolve();var o=v.calculateIssueMoveModel(e,a),d=m.moveIssues(e,a,i,t),l={rapidViewId:GH.RapidBoard.State.getRapidViewId(),issueKeys:e,rankCustomFieldId:g.getRankCustomFieldId(),target:v.isMoveToBacklog(o)?"BACKLOG":"BOARD",calculateNewIssuesOrder:d,rankBeforeIssueIdOrKey:t,rankAfterIssueIdOrKey:i};if(v.isOnlyRankOperation(o))return r(l);var c=function(e){var n=e.success;return w.sendIssueRankedTrackEvent(l),s(l,n,a,o)};return n(l).then(c,function(){return u.Deferred().resolve()})},w.getObservable=function(){return AJS.$(GH)},w.triggerIssuesUpdateEvent=function(e){var a=this;e.forEach(function(e){var n=g.getIssueData(e);a.getObservable().trigger("issueUpdated",{issueId:n.id,source:"issueRank"})})},w.fireTransitionAnalytics=function(e,a){AJS.trigger("analyticsEvent",{name:e,data:{boardtype:"kanban",toselectedfordevelopment:!a.addToBacklog,issuecount:a.issueKeys.length}})},w.fireViewAnalytics=function(e,a,n){AJS.trigger("analyticsEvent",{name:e,data:{boardType:"kanban",issueCount:a.issueKeys.length,optionCount:n.possibleTransitions.length}})},w.showTransitionSuccessMessage=function(e){1===e.length?GH.Notification.showSuccess(AJS.format("Issue {0} successfully transitioned.",e)):GH.Notification.showSuccess(AJS.format("Issues {0} successfully transitioned.",e.join(", ")))};var b=function(e){var a=v.isMoveToBacklog(e),n=a?g.getBacklogModel2():g.getSprintModels()[0],s=n.getColumn();return s.id};return w.sendIssueTransitionedTrackEvent=function(e,a){var n=null;if(e.selectedTransitionId)n=a.possibleTransitions.find(function(a){return a.id===e.selectedTransitionId}).targetStatus;else{var s=m.rapidViewConfig.columns.find(function(a){return a.id==e.targetColumn});n=s.statusIds[0]}e.issueKeys.forEach(function(e){var a=GH.BacklogModel.getIssueData(e),s=a.status?a.status.id:null;if(s!==n){var i=[{name:"status",oldValId:s,newValId:n}];GH.RapidBoard.sendIssueUpdatedTrackEvent(a,i)}})},w.sendIssueRankedTrackEvent=function(e){"BOARD"!==e.target&&"BACKLOG"!==e.target||e.issueKeys.forEach(function(e){var a=GH.BacklogModel.getIssueData(e),n=[{name:"customfield_"+GH.BacklogModel.getRankCustomFieldId()}];GH.RapidBoard.sendIssueUpdatedTrackEvent(a,n)})},w});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanController.js' */
function _toConsumableArray(e){if(Array.isArray(e)){for(var i=0,t=Array(e.length);i<e.length;i++)t[i]=e[i];return t}return Array.from(e)}var _extends=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};define("jira-agile/rapid/ui/plan/plan-controller",["require"],function(e){"use strict";function i(){GH.bridge.FilterBridge.reset(),t(),P.unsubscribeQuickFilterUpdate&&P.unsubscribeQuickFilterUpdate(),P.unsubscribeQuickFilterUpdate=GH.bridge.FilterBridge.on("update",function(e){var i=S.getActiveQuickFilterIds();P.activeFilters=Object.assign({},e,{searchText:e.searchText.trim()}),S.setActiveQuickFilterIds(e.quickFilterList),GH.RapidBoard.State.pushState(),i.length!==e.quickFilterList.length&&GH.PlanController.reload(function(){D.isStickyQuickfilterFixEnabled()&&l()}),c.executeSearch(new RegExp(P.activeFilters.searchText||"","i")),c.filterByAssignees(e.assigneeList&&e.assigneeList.map(function(e){return e===B?null:e})),c.filterByLabels(e.labelList)})}function t(){var e=S.getQuickFilters().map(function(e){return _extends({},e,{id:parseInt(e.id,10)})});GH.bridge.FilterBridge.loadQuickFilterList(e),l(),n(),D.isStickyQuickfilterFixEnabled()&&r()}function a(){var e=I.getUserConfig();if(e)return{id:e.name,name:e.displayName,avatarUrl:e.avatarUrl}}function n(){var e=a();e&&GH.bridge.FilterBridge.loadCurrentUser&&GH.bridge.FilterBridge.loadCurrentUser(e)}function r(){var e=P.activeFilters,i=e.searchText||"";i&&c.executeSearch(new RegExp(i||"","i")),GH.bridge.FilterBridge.loadSearchText(i)}function s(){var e=P.activeFilters,i={};GH.BacklogModel.map(function(i){var t=i.assignee||B;return{id:t,name:i.assigneeName||"Unassigned",avatarUrl:i.avatarUrl,isActive:!!e.assigneeList&&e.assigneeList.indexOf(t)>-1}}).forEach(function(e){i[e.id]=e});var t=a();return t&&!i[t.id]&&(i[t.id]=t),Object.values(i)}function o(){var e=s().map(function(e){var i=e.id;return i}),i=P.activeFilters.assigneeList,t=i.filter(function(i){return e.includes(i)});return t.length===i.length?{isValid:!0,assigneeList:t}:{isValid:!1,assigneeList:t}}function l(){if(D.isStickyQuickfilterFixEnabled()){var e=o(),i=e.isValid,t=e.assigneeList;i||(P.activeFilters.assigneeList=t,GH.RapidBoard.State.replaceState())}GH.bridge.FilterBridge.loadAssigneeList(s()),GH.bridge.FilterBridge.loadLabelList&&GH.bridge.FilterBridge.loadLabelList(d())}function d(){var e=new Set,i=GH.BacklogModel.map(function(e){return e.labels||[]});return i.forEach(function(i){return i.forEach(function(i){return e.add(i)})}),[].concat(_toConsumableArray(e))}var u,c,p,g=e("jquery"),f=e("underscore"),w=e("jira-agile/rapid/global-events"),V=e("jira/analytics/web-client"),b=e("jira-agile/rapid/analytics-tracker"),S=e("jira-agile/rapid/ui/plan/plan-controls"),H=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),h=e("jira-agile/rapid/ui/plan/plan-view"),v=(e("jira-agile/rapid/ui/kanplan/kan-plan-feature-service"),e("jira-agile/rapid/const/PageMode")),G=e("jira-agile/rapid/events"),m=e("jira-agile/rapid/work/quick-filters-bridge"),B="UNASSIGNED_USER_ID",D=e("jira/featureflags/simplified-ux-feature-manager"),C=e("jira-agile/features/feature-flags"),k=e("jira/featureflags/feature-manager"),R=e("jira-agile/rapid/ui/plan/sprint-view"),I=e("jira-agile/rapid/user-data"),y=e("jira-agile/rapid/ui/bento/bento-features"),F=void 0,E=void 0;w.on("pre-initialization",function(){u=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),c=e("jira-agile/rapid/ui/plan/backlog-controller"),F=e("jira-agile/rapid/ui/plan/BacklogView"),E=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),p=e("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-controller")});var P=new G;P.isVisible=!1,P.viewData=void 0,P.currentViewConfig={},P.activeFilters={assigneeList:[]},P.unsubscribeQuickFilterUpdate=null,P.analytics=function(e){return new b("gh.planningboard."+e)},P.init=f.once(function(){h.init(),S.init(),GH.VersionController.init(),GH.EpicController.init(),c.init(),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()&&P.on("after:show",function(){f.delay(function(){GH.VersionView.show(),GH.EpicView.show(),GH.RapidBoard.ViewController.updateContentContainer(),F.updateIssueSelectionState(!0),GH.planOnboarding.renderOnboarding(),E.enableDragAndDrop(),F.registerClickHandlers(),R.registerTwixies(),GH.sprintActions.createDropdown(),g("#ghx-backlog").attr("data-rendered",(new Date).getTime())})})}),P.isActive=function(){return P.isVisible},P.setRapidView=function(e){P.rapidViewData=e,c.setRapidView(e)};var j=function(){m.isReactFiltersEnabled().then(function(e){e&&i(),GH.RapidBoard.State.isIssueListBacklog()&&p.showDialog(P.rapidViewData.id)})};P.show=function(){if(P.rapidViewData)return P.isVisible=!0,h.show(),P.configureUI(),P.attachControlFHandler(),P.loadRapidViewConfig().then(function(){k.isFeatureEnabled(C.DEFER_FILTERS_AND_HANDLERS)?(JIRA.API.getSidebar().then(function(){return j()}),e("jira/navigation").then(function(){return j()})):j()})},P.configureUI=function(){var e=u.getSelectedIssueKey();GH.DetailsView.setRapidViewId(P.rapidViewData.id),e&&GH.DetailsView.setSelectedIssueKey(e),h.updateDetailViewState(),h.updateVersionColumnState(),h.updateEpicsColumnState()},P.lastPushUpdate=0,P.pushTimeoutHandler=void 0,P.updateDetailsView=function(e,i,t,a){var n=300,r=(new Date).getTime();return P.lastPushUpdate<r-n?(P.doUpdateDetailsView(e,i,t,a),void(P.lastPushUpdate=r+n)):(P.pushTimeoutHandler&&window.clearTimeout(P.pushTimeoutHandler),void(P.pushTimeoutHandler=window.setTimeout(function(){P.doUpdateDetailsView(e,i,t),P.lastPushUpdate=(new Date).getTime()},n)))},P.doUpdateDetailsView=function(e,i,t,a){(GH.RapidBoard.State.isDetailsViewPlanOpened()||i)&&(GH.DetailsView.setSelectedIssueKey(e),null==u.getSelectedIssueKey()?(P.setDetailViewOpenedState(!1),GH.DetailsView.hide()):(P.setDetailViewOpenedState(!0),GH.DetailsView.show(t,a)),P.trigger("before:openDetailView"),e&&setTimeout(function(){GH.RapidBoard.State.pushState()},0),h.doUpdateDetailsView())},P.reloadDetailView=function(e){P.isDetailsViewOpened()&&(P.setDetailViewOpenedState(!0),GH.DetailsView.show(e))},P.reload=function(e){P.isVisible&&c.show(e)},P.hide=function(){P.isVisible=!1,c.hide(),GH.DetailsView.hide(),P.detachControlFHandler(),h.hide(),GH.planOnboarding.refresh(),P.unsubscribeQuickFilterUpdate&&P.unsubscribeQuickFilterUpdate()},P.loadRapidViewConfig=function(){return new Promise(function(e,i){GH.RapidViewConfig.fetchConfiguration(P.rapidViewData.id).done(function(t){P.currentViewConfig=t,GH.RapidBoard.State.isPlanModeAvailable()&&P.initializePlanMode().then(e,i)}).fail(i)})},P.initializePlanMode=function(){return new Promise(function(e){P.isVisible&&(S.setRapidViewConfig(P.currentViewConfig),c.setRapidViewConfig(P.currentViewConfig),GH.DetailsView.setRapidViewConfig(P.currentViewConfig),S.renderControls(),GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),h.hideLoadingFilter(),H.setInstantFilter(null),c.show(function(){A(),L(),e(!0)}),P.configureUI(),P.isDetailsViewOpened()&&GH.DetailsView.preloadData(),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||GH.RapidBoard.ViewController.updateContentContainer())})};var A=function(){var e=f.reduce(GH.BacklogModel.getAllIssueListsNew(),function(e,i){return e+i.getIssueCount()},0),i={boardtype:GH.RapidBoard.State.isScrumBoard()?"scrum":"kanban",backlogissuecount:GH.BacklogModel.getBacklogModel2().getIssueList().getIssueCount(),totalissuecount:e};if(GH.RapidBoard.State.isKanbanBoard()){var t=f.first(GH.BacklogModel.getSprintModels());if(f.isUndefined(t))return;i.selectedfordevelopmentissuecount=t.getIssueList().getIssueCount()}AJS.trigger("analyticsEvent",{name:"jira-software.plan.view",data:i})},L=function(){var e=GH.RapidBoard.State.getBoardTypeForAnalytics(),i={objectType:"board",objectId:P.rapidViewData.id,containerType:GH.RapidViewConfig.currentData.data.locationType,attributes:{boardId:P.rapidViewData.id,boardType:e,numEpics:GH.RapidBoard.State.numberOfEpics.get(),numVersions:GH.RapidBoard.State.numberOfVersions.get(),numIssues:GH.RapidBoard.State.numberOfIssues.get()},action:"viewed",actionSubject:"backlog",actionSubjectId:P.rapidViewData.id,source:"backlogScreen"};if("project"===i.containerType&&JIRA.API&&JIRA.API.Projects&&(i.containerId=JIRA.API.Projects.getCurrentProjectId()),GH.RapidBoard.State.isAgilityBoard()){var t=GH.BacklogModel.getSprintModels(),a=t.length;1===a&&t[0].sprintData.id===-1&&(a=0),i.attributes.numSprints=a}V.sendScreenEvent("backlogScreen",null,{boardType:e,isIssueDetailVisible:GH.RapidBoard.State.isDetailsViewPlanOpened(),isNewIssueView:y.isBentoEnabled()}),V.sendTrackEvent(i)};return P.isDetailsViewOpened=function(){return!!GH.RapidBoard.State.isDetailsViewPlanOpened()&&!!GH.DetailsView.getSelectedIssueKey()},P.setDetailViewOpenedState=function(e){e=e||!1,GH.RapidBoard.State.setPlanViewDetailsViewOpened(e),h.updateDetailViewState()},P.closeDetailsView=function(){GH.DetailsView.hasCurrentError()||P.isDetailsViewOpened()&&(P.setDetailViewOpenedState(!1),GH.RapidBoard.State.pushState(),GH.DetailsView.hide(),h.updateHorizontalPositioning())},P.toggleDetailsView=function(e){if(P.isDetailsViewOpened())P.closeDetailsView();else{var i=u.getSelectedIssueKey();P.updateDetailsView(i,!0,null,e)}},P.toggleEpicsShowOnBacklog=function(){GH.ViewActions.toggleEpicsShowOnRapidBoard(),P.reload(),AJS.trigger("analyticsEvent",{name:"jira-software.plan.boardmenu.click."+(GH.RapidBoard.State.getEpicShownOnRapidBoard()?"show":"hide")+"-epic-lables"})},P.isVersionsColumnVisible=function(){return GH.BoardState.getPerViewValue("planVersionsVisible",!1)},P.isEpicsColumnVisible=function(){return GH.BoardState.getPerViewValue("planEpicsVisible",!1)},P.isVersionsColumnVisiblePersisted=function(){return GH.BoardState.getPerViewValue("planVersionsVisible",!1)},P.isEpicsColumnVisiblePersisted=function(){return GH.BoardState.getPerViewValue("planEpicsVisible",!1)},P.setVersionsColumnVisible=function(e){GH.BoardState.setPerViewValue("planVersionsVisible",!!e)},P.setEpicsColumnVisible=function(e){GH.BoardState.setPerViewValue("planEpicsVisible",!!e)},P.toggleVersionsColumn=function(){var e=P.isVersionsColumnVisible();e=!e,P.setVersionsColumnVisible(e),GH.RapidBoard.State.pushState(),h.updateVersionColumnState(),h.updateHorizontalPositioning(),AJS.trigger("analyticsEvent",{name:"jira-software.plan.boardmenu.click."+(e?"show":"hide")+"-versions-panel"})},P.toggleEpicsColumn=function(){var e=P.isEpicsColumnVisible();e=!e,P.setEpicsColumnVisible(e),GH.RapidBoard.State.pushState(),h.updateEpicsColumnState(),h.updateHorizontalPositioning(),AJS.trigger("analyticsEvent",{name:"jira-software.plan.boardmenu.click."+(e?"show":"hide")+"-epics-panel"})},P.attachControlFHandler=function(){g(document).bind("keydown",P.controlFHandler)},P.detachControlFHandler=function(){g(document).unbind("keydown",P.controlFHandler)},P.controlFHandler=function(e){e.ctrlKey&&"f"===String.fromCharCode(e.which).toLowerCase()&&P.analytics("shortcuts").trigger("controlf")},P.collectPrintableIssues=function(){return GH.RapidBoard.State.isCollapsibleBacklogEnabled()?{sprintIssues:c.extractPrintableIssuesFromAllSprints(),epics:c.getEpicMap(),viewMode:v.PLAN,boardType:GH.RapidBoard.State.getBoardType()}:{sprintIssues:c.extractPrintableIssuesFromAllSprints(),backlogIssues:c.getPrintableIssuesFromPlanBacklog(),epics:c.getEpicMap(),viewMode:v.PLAN,boardType:GH.RapidBoard.State.getBoardType()}},P});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanFeatureService.js' */
define("jira-agile/rapid/ui/kanplan/kan-plan-feature-service",["require","jira-agile/rapid/ajax"],function(a,n){"use strict";var r={};return r.shouldShowKanbanBacklog=function(){return GH.RapidViewConfig.kanPlanEnabled},r.autoConvertKanPlan=function(a){return n.post({url:"/xboard/plan/kanban/"+a+"/autoConvert"})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanDialogUtils.js' */
define("jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils",["jquery","underscore","jira-agile/rapid/events"],function(n,t,a){"use strict";function e(e){var i=GH.Dialog.create({width:e.width,height:e.height,id:e.id,onCancelFn:function(){return i.trigger("cancel")}});new a(i);var r=n("#"+i.id);return r.addClass("ghx-dialog"),i.addHeader(e.header),i.addPanel("","panel"),i.getCurrentPanel().html(e.message),i.addButton(e.submitButton,function(){var n={};t.isFunction(e.getSubmitModel)&&(n=e.getSubmitModel()),i.disableControls(),i.dispose(),i.trigger("submit",n)},"aui-button aui-button-primary"),t.isUndefined(e.cancelLink)===!1&&i.addCancel(e.cancelLink,function(){i.cancel(i)}),i}var i={};return i.createTransitionStatusDialog=function(n,t){return AJS.trigger("analyticsEvent",{name:"jira-software.plan.transition-menu.view",data:{boardType:"kanban",issueCount:t.length,optionCount:n.length}}),e({width:500,height:300,id:"ghx-kanplan-transition-status",header:"Choose a transition",message:GH.tpl.kanplan.dialogutils.transitionStatusContent({transitions:n,issueKeys:t.join(", "),numIssues:t.length}),submitButton:"Choose",cancelLink:"Cancel",getSubmitModel:function(){var n=AJS.$("#ghx-kanplan-transition-status input[name=status]:checked");return n.attr("id")}})},i.createAutoOffShowEpicAsPanelDialog=function(){var n=e({width:400,height:200,header:"Disable Kanban backlog",message:"By disabling the Kanban backlog, any epics in the Epics panel will now be displayed as cards on your board.",submitButton:"Confirm",cancelLink:"Cancel"});return n},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanDialogUtils.soy' */
// This file was automatically generated from KanPlanDialogUtils.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.dialogutils.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }
if (typeof GH.tpl.kanplan.dialogutils == 'undefined') { GH.tpl.kanplan.dialogutils = {}; }


GH.tpl.kanplan.dialogutils.transitionStatusContent = function(opt_data, opt_ignored) {
  var output = '<p>' + ((opt_data.numIssues == 1) ? soy.$$escapeHtml(AJS.format('Choose one of {0} available transitions for issue {1}',opt_data.transitions.length,opt_data.issueKeys)) : soy.$$escapeHtml(AJS.format('Choose one of {0} available transitions for issues {1}',opt_data.transitions.length,opt_data.issueKeys))) + '</p><form>';
  var transitionList10 = opt_data.transitions;
  var transitionListLen10 = transitionList10.length;
  for (var transitionIndex10 = 0; transitionIndex10 < transitionListLen10; transitionIndex10++) {
    var transitionData10 = transitionList10[transitionIndex10];
    output += '<div class="kanplan-transition-status-option"><input id="' + soy.$$escapeHtml(transitionData10.id) + '" type="radio" name="status" value="' + soy.$$escapeHtml(transitionData10.targetStatus) + '" ' + ((transitionIndex10 == 0) ? ' checked ' : '') + '><label for="' + soy.$$escapeHtml(transitionData10.id) + '">' + soy.$$escapeHtml(transitionData10.name) + '</label></div>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.kanplan.dialogutils.transitionStatusContent.soyTemplateName = 'GH.tpl.kanplan.dialogutils.transitionStatusContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanController.soy' */
// This file was automatically generated from PlanController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.plancontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.plancontroller == 'undefined') { GH.tpl.plancontroller = {}; }


GH.tpl.plancontroller.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-plan-group" class="ghx-plan-group' + ((! opt_data.shouldShowEpic) ? ' ghx-no-epic-panel' : '') + '"><div id="ghx-classification-menu-column" class="' + ((opt_data.shouldHidePanels) ? 'agility-backlog-panel-hidden' : '') + '"><ul id="ghx-classification-menu" class="ghx-ide-menu ghx-classification-menu"><li role="button" class="js-release-toggle ghx-release-toggle"><span class="ghx-inner">' + soy.$$escapeHtml('Versions') + '</span></li>' + ((opt_data.shouldShowEpic) ? '<li role="button" class="js-epic-toggle ghx-epic-toggle"><span class="ghx-inner">' + soy.$$escapeHtml('Epics') + '</span></li>' : '') + '</ul></div><div id="ghx-version-column" class="ghx-version-column ghx-classification-column' + ((opt_data.shouldHidePanels) ? ' agility-backlog-panel-hidden' : '') + '"></div><div id="ghx-epic-column" class="ghx-epic-column ghx-classification-column ' + ((opt_data.shouldHidePanels) ? ' agility-backlog-panel-hidden' : '') + '"></div><div id="ghx-backlog-column" class="ghx-backlog-column"><div id="ghx-backlog" class="ghx-backlog' + ((opt_data.shouldHidePanels) ? ' agility-backlog' : '') + '"></div></div><div id="ghx-detail-view" class="ghx-detail-view"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderSkeleton.soyTemplateName = 'GH.tpl.plancontroller.renderSkeleton';
}


GH.tpl.plancontroller.renderEpicPanelTipsyExpand = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml('Show epics panel') + '<b>' + soy.$$escapeHtml('Use epics to plan features across multiple sprints.') + '</b>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderEpicPanelTipsyExpand.soyTemplateName = 'GH.tpl.plancontroller.renderEpicPanelTipsyExpand';
}


GH.tpl.plancontroller.renderVersionPanelTipsyExpand = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml('Show versions panel') + '<b>' + soy.$$escapeHtml('Use versions to keep track of code releases.') + '</b>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderVersionPanelTipsyExpand.soyTemplateName = 'GH.tpl.plancontroller.renderVersionPanelTipsyExpand';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanControls.js' */
define("jira-agile/rapid/ui/plan/plan-controls",["require"],function(e){var i=e("jquery"),r=e("jira-agile/rapid/const/PageMode"),t=e("jira-agile/rapid/work/quick-filters-bridge"),n=e("jira-agile/features/feature-flags"),a=e("jira/featureflags/feature-manager"),l=(e("jira/featureflags/simplified-ux-feature-manager"),{});return l.rapidViewConfig={},l.quickfilters=void 0,l.searchFilter=void 0,l.setRapidViewConfig=function(e){l.rapidViewConfig=e,l.quickfilters.setRapidViewConfig(e)},l.init=function(){l.quickfilters=new GH.Components.QuickFilters("planQuickFilters"),l.searchFilter=new GH.Components.SearchFilter(GH.BacklogController.executeSearch)},l.setActiveQuickFilterIds=function(e){l.quickfilters.setActiveQuickFilters(e)},l.getActiveQuickFilterIds=function(){return l.quickfilters.getActiveQuickFilters()},l.renderControls=function(){var u=i("#ghx-controls-plan"),c=document.getElementById("ghx-quick-filters");a.isFeatureEnabled(n.DEFER_FILTERS_AND_HANDLERS)?(JIRA.API.getSidebar().then(function(){return t.isReactFiltersEnabled().then(function(e){e&&c?(GH.bridge.FilterBridge.unmount(c),GH.bridge.FilterBridge.render(c)):(u.empty(),u.append(l.searchFilter.render()),u.append(l.quickfilters.renderQuickFilters({mode:r.PLAN})))})}),e("jira/navigation").then(function(){return t.isReactFiltersEnabled().then(function(e){e&&c?(GH.bridge.FilterBridge.unmount(c),GH.bridge.FilterBridge.render(c)):(u.empty(),u.append(l.searchFilter.render()),u.append(l.quickfilters.renderQuickFilters({mode:r.PLAN})))})})):t.isReactFiltersEnabled().then(function(e){e&&c?(GH.bridge.FilterBridge.unmount(c),GH.bridge.FilterBridge.render(c)):(u.empty(),u.append(l.searchFilter.render()),u.append(l.quickfilters.renderQuickFilters({mode:r.PLAN})))}),GH.ViewActions.setMode(r.PLAN)},l.stopEdits=function(){l.searchFilter.stopEdit(i("#ghx-controls-plan"))},l.resizeQuickFilters=function(){l.quickfilters.quickExpanderLayout({mode:r.PLAN})},l.getQuickFilters=function(){return l.quickfilters.getQuickFilters()},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanUrlState.js' */
define("jira-agile/rapid/ui/plan/plan-url-state",["require"],function(e){"use strict";var i=e("underscore"),r=e("jira-agile/rapid/ui/plan/plan-controller"),l=e("jira-agile/rapid/ui/plan/plan-controls"),s=e("jira-agile/rapid/const/PageMode"),t=e("jira/featureflags/simplified-ux-feature-manager"),a={};return a.self="PlanUrlState",a.isApplicable=function(e){return e.mode===s.PLAN},a.getNormalizedFromUrl=function(e,i){i["plan.selectedIssue"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedIssue,null),i.quickFilter=GH.RapidBoard.UrlState.normalizeNumberArrayParam(e.quickFilter),i.versions="visible"===GH.RapidBoard.UrlState.normalizeStringParam(e.versions,""),i.epics="visible"===GH.RapidBoard.UrlState.normalizeStringParam(e.epics,""),i["plan.selectedEpic"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedEpic,null),i["plan.selectedVersion"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedVersion,null),t.isStickyQuickfilterFixEnabled()&&(i.search=GH.RapidBoard.UrlState.normalizeStringParam(e.search,""),i.assignee=GH.RapidBoard.UrlState.normalizeStringArrayParam(e.assignee,[]).map(function(e){return"_unassigned_"===e?"UNASSIGNED_USER_ID":e}))},a.toUrl=function(e,r){i.isNull(e["plan.selectedIssue"])||(r.selectedIssue=e["plan.selectedIssue"]),e.quickFilter.length>0&&(r.quickFilter=e.quickFilter),e.versions&&(r.versions="visible"),e.epics&&(r.epics="visible"),i.isNull(e["plan.selectedEpic"])||(r.selectedEpic=e["plan.selectedEpic"]),i.isNull(e["plan.selectedVersion"])||(r.selectedVersion=e["plan.selectedVersion"]),t.isStickyQuickfilterFixEnabled()&&(e.search&&(r.search=encodeURIComponent(e.search)),e.assignee&&(r.assignee=e.assignee.map(function(e){return"UNASSIGNED_USER_ID"===e?"_unassigned_":e})))},a.getNormalizedFromInternal=function(e){r.init(),e["plan.selectedIssue"]=GH.BacklogSelectionController.getSelectedIssueKey(),e.quickFilter=l.quickfilters.getActiveQuickFilters(),e.versions=r.isVersionsColumnVisiblePersisted(),e.epics=r.isEpicsColumnVisiblePersisted(),e["plan.selectedEpic"]=GH.EpicController.getFilteredEpicKey(),e["plan.selectedVersion"]=GH.VersionController.getFilteredVersionId(),t.isStickyQuickfilterFixEnabled()&&(e.search=GH.PlanController.activeFilters.searchText,e.assignee=GH.PlanController.activeFilters.assigneeList)},a.updateInternalFromNormalized=function(e){r.init(),GH.BacklogSelectionController.setIssueFromUrlState(e["plan.selectedIssue"]),l.quickfilters.setActiveQuickFilters(e.quickFilter),r.setVersionsColumnVisible(e.versions),r.setEpicsColumnVisible(e.epics),GH.EpicController.setFilteredEpicKey(e["plan.selectedEpic"]),GH.VersionController.setFilteredVersionId(e["plan.selectedVersion"]),t.isStickyQuickfilterFixEnabled()&&(GH.PlanController.activeFilters.searchText=e.search,e.assignee&&(GH.WorkController.activeFilters.assigneeList=e.assignee.map(function(e){return"_unassigned_"===e?"UNASSIGNED_USER_ID":e})))},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanRankController.js' */
define("jira-agile/rapid/ui/plan/plan-rank-controller",["require"],function(e){"use strict";var r=e("underscore"),a=e("jquery"),s=e("jira-agile/rapid/global-events"),i=void 0,n=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),t=e("jira-agile/rapid/ui/plan/backlog-model"),l=e("jira-agile/rapid/ui/plan/backlog-model2"),u=e("jira-agile/rapid/events");s.on("pre-initialization",function(){i=e("jira-agile/rapid/ui/plan/backlog-controller")});var o=new u;return o.init=function(){i.registerIssueCreatedCallback("rankIssues",o.rankCreatedIssues)},o.rankCreatedIssues=function(e){var r=n.getSelectedIssuesInOrder();return r&&r.length>0?o.rankCreatedIssuesBySelection(e,r):o.rankCreatedIssuesByVisibility(e)},o.rankCreatedIssuesBySelection=function(e,a){var s,i,n=r.last(a),u=t.findModelWithIssue(r.first(a));if(u&&l.isBacklogModel(u)?(s=n,i=!1):(s=t.getBacklogModel2().getIssueList().getFirstRankableIssueKeyInColumn(),i=!0),s)return o.rankCreatedIssuesAgainstIssue(e,s,i)},o.rankCreatedIssuesByVisibility=function(e){function r(e){var r=e.offset().top;return r>l&&r<t+l}var s,i=a(".ghx-backlog-group"),n=a(".js-issue",i),t=a(document).height(),l=a(document).scrollTop(),u=n.filter(function(){var e=a(this);return r(e)});if(s=u.length>0?u.first():n.first(),s&&1===s.length){var d=s.attr("data-issue-key");return o.rankCreatedIssuesAgainstIssue(e,d,!0)}},o.rankCreatedIssuesAgainstIssue=function(e,a,s){var i=r.pluck(e,"issueKey"),n=i.reverse();return GH.RankController.rankIssues(t.getRankCustomFieldId(),n,s?a:null,s?null:a,{deferErrorHandling:!0})},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogModel.js' */
define("jira-agile/rapid/ui/plan/backlog-model2",["require"],function(e){var t=e("jira-agile/rapid/ui/plan/issue-list-model"),s=function(e,s,n){this.column=s,this.issueList=new t("backlog",e,GH.VersionController.getVersionModel()),this.isIssueLimitExceeded=n||!1};return s.isBacklogModel=function(e){return"backlog"===e.getType()},s.prototype.getIssueList=function(){return this.issueList},s.prototype.getId=function(){return"backlog"},s.prototype.getType=function(){return"backlog"},s.prototype.getColumn=function(){return this.column},s}),define("jira-agile/rapid/ui/plan/backlog-model",["require"],function(e){"use strict";function t(e){var t=e.issues,s=e.sprints,n={};i.each(s,function(e){i.each(e.issuesIds,function(t){n[t]=e.id})});var r={};i.each(s,function(e){r[e.id]=[]});var u=[];i.each(t,function(e){o.prepareExtraFields(e.extraFields);var t=n[e.id];t?r[t].push(e):u.push(e)});var l=[];i.each(s,function(e){var t=new a(e,r[e.id]);l.push(t)});var d=new GH.BacklogModel2(u,(void 0),e.isIssueLimitExceeded);c.sprintModels=l,c.backlogModel2=d,c.addFakeBacklogModel(u)}function s(e){var t=e.backlogColumn.statusIds,s=e.selectedForDevelopmentColumn.statusIds,n=[],r=[];i.each(e.issues,function(e){o.prepareExtraFields(e.extraFields),t.indexOf(e.statusId)!==-1?n.push(e):s.indexOf(e.statusId)!==-1&&r.push(e)}),c.backlogModel2=new GH.BacklogModel2(n,e.backlogColumn,e.isIssueLimitExceeded),c.sprintModels=[new a({id:-1,name:e.selectedForDevelopmentColumn.name,state:"FUTURE",column:e.selectedForDevelopmentColumn},r)],c.addFakeBacklogModel(n,e.backlogColumn)}function n(e){var t=e.boardIssueIds,s=[],n=[];i.each(e.issues,function(e){o.prepareExtraFields(e.extraFields),t.indexOf(e.id)!==-1?n.push(e):s.push(e)}),c.backlogModel2=new GH.BacklogModel2(s,{},e.isIssueLimitExceeded),c.sprintModels=[new a({id:-1,name:"On the Board",state:"FUTURE",column:{}},n)],c.addFakeBacklogModel(s)}var i=e("underscore"),r=e("jira-agile/rapid/global-events"),a=e("jira-agile/rapid/ui/plan/sprint-model"),u=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),l=e("jira-agile/rapid/ui/plan/issue-list-model"),o=e("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"),d=null;r.on("pre-initialization",function(){d=e("jira-agile/rapid/ui/plan/sprint-controller")});var c={};return c.rankCustomFieldId=void 0,c.estimationStatistic={},c.trackingStatistic={},c.sprintModels=[],c.backlogModel2=null,c.setData=function(e){c.calculateIssueLists(e),c.hasBulkChangePermission=e.hasBulkChangePermission,c.isIssueLimitExceeded=e.isIssueLimitExceeded},c.BACKLOG_ID="backlog",c.calculateIssueLists=function(e){GH.RapidBoard.State.isScrumBoard()?t(e):GH.RapidBoard.State.isIssueListBacklog()?n(e):s(e)},c.addFakeBacklogModel=function(e,t){if(t=t?t:{},GH.RapidBoard.State.isCollapsibleBacklogEnabled()){var s=new a({id:c.BACKLOG_ID,name:"Backlog",state:"FUTURE",column:t},e);c.sprintModels.push(s)}},c.addNewSprint=function(e){var t=new a(e,[]);GH.RapidBoard.State.isCollapsibleBacklogEnabled()?c.sprintModels.splice(c.sprintModels.length-1,0,t):c.sprintModels.push(t)},c.removeSprintAndMoveIssues=function(e){for(var t,s,n=c.getAllModels(),r=0;r<n.length;r++){var u=n[r];if(a.isSprintModel(u)&&u.getSprintId()===e){t=u,s=n[r+1];break}}var l=!1;if(t){var o=t.getIssueList().getIssuesInOrder();if(!i.isEmpty(o)){var d=s.getIssueList();d.prependIssues(o),l=GH.BacklogModel2.isBacklogModel(s)}c.sprintModels=i.reject(c.sprintModels,function(t){return t.getSprintId()===e})}return l},c.updateDataForSprint=function(e,t){var s=c.getSprintModel(e);return s&&s.setSprintData(t),s},c.moveSprintUp=function(e){return c._swapSprint(e,-1)},c.moveSprintDown=function(e){return c._swapSprint(e,1)},c._swapSprint=function(e,t){var s=GH.Util.indexOf(c.sprintModels,function(t){if(t.getSprintId()===e)return t});if(GH.Util.swapArrayItems(c.sprintModels,s,s+t)){var n=c.sprintModels[s];return n.getSprintId()}return null},c.getSprintModels=function(){return c.sprintModels},c.getActiveSprintModels=function(){return i.filter(c.sprintModels,function(e){return"ACTIVE"===e.getSprintData().state})},c.getFutureSprintModels=function(){return i.filter(c.sprintModels,function(e){return"FUTURE"===e.getSprintData().state&&e.getSprintId()!==c.BACKLOG_ID})},c.getSprintModel=function(e){return i.find(c.sprintModels,function(t){return e===t.getSprintId()})},c.getBacklogModel2=function(){return GH.RapidBoard.State.isCollapsibleBacklogEnabled()?i.last(c.sprintModels):c.backlogModel2},c.getAllModels=function(){if(GH.RapidBoard.State.isCollapsibleBacklogEnabled())return c.getSprintModels();var e=c.getSprintModels(),t=c.getBacklogModel2();return i.flatten([e,t],!0)},c.getAllIssueListsNew=function(){var e=[];return GH.RapidBoard.State.isCollapsibleBacklogEnabled()?i.each(c.getSprintModels(),function(t){e.push(t.getIssueList())}):(i.each(c.getSprintModels(),function(t){e.push(t.getIssueList())}),c.getBacklogModel2()&&e.push(c.getBacklogModel2().getIssueList())),e},c.findModelWithIssue=function(e){var t=null;return i.any(c.getAllModels(),function(s){return!!s.getIssueList().isIssueValid(e)&&(t=s,!0)}),t},c.getNextModel=function(e){for(var t=c.getAllModels(),s=0;s<t.length;s++)if(e.getId()===t[s].getId()){if(s+1<t.length)return t[s+1];break}return null},c.calculateRankingDataForSprintMarkerMove=function(e,t,s){var n=c._calculateIncludedModelsData(e,t);if(e===t){var r=[];if(r=s?n.draggedSprintModel.getIssueList().getVisibleIssuesDataAfterKey(s):n.draggedSprintModel.getIssueList().getAllVisibleIssuesData(),!i.isEmpty(r)){var u=c.getNextModel(n.draggedSprintModel);if(u){var l=a.isSprintModel(u)?u.getSprintId():null,o=i.first(u.getIssueList().getIssuesInOrder()),d=o?o.key:null,g=i.map(r,function(e){return e.key});if(!i.isEmpty(g))return{sprintId:l,nextRankableId:d,issueKeys:g}}}}else{var p=c.getIssueDataForVisisbleIssuesInModelsUpToIssueKey(n.otherAffectedModels,t,s),l=e,I=i.last(n.draggedSprintModel.getIssueList().getIssuesInOrder()),f=I?I.key:null,g=i.map(p,function(e){return e.key});if(!i.isEmpty(g))return{sprintId:l,prevRankableId:f,issueKeys:g}}return null},c.calculateTemporaryDataForSprintWithMarker=function(e,t,s){var n=c._calculateIncludedModelsData(e,t),r=n.draggedSprintModel.getIssueList().getAllInvisibleIssuesData(),a=c.getIssueDataForVisisbleIssuesInModelsUpToIssueKey(n.models,t,s),u=i.flatten([r,a],!0),o=i.map(r,function(e){return e.key}),d=new l("fakesprint-"+e,u,GH.VersionController.getVersionModel());return d.setHiddenBySearchIssues(o),{issueList:d,modelsData:n}},c._calculateIncludedModelsData=function(e,t){for(var s=c.getSprintModels(),n=!1,i={draggedSprintModel:null,otherAffectedModels:[],models:[]},r=0;r<s.length;r++){var a=s[r],u=a.getSprintId();if(u==e?(i.draggedSprintModel=a,i.models.push(a),n=!0):n&&d.isTwixieOpen(u)&&(i.otherAffectedModels.push(a),i.models.push(a)),u==t)break}return t||(i.otherAffectedModels.push(c.getBacklogModel2()),i.models.push(c.getBacklogModel2())),i},c.getIssueDataForVisisbleIssuesInModelsUpToIssueKey=function(e,t,s){for(var n=[],r=0;r<e.length;r++){var u=e[r],l=u.getIssueList(),o=a.isSprintModel(u);o&&u.getSprintId()===t||!o&&!t?s&&n.push(l.getVisibleIssuesDataBeforeIncludingKey(s)):n.push(l.getAllVisibleIssuesData())}return n=i.flatten(n,!0)},c.reorderIssuesInModel=function(e,t){var s=t||"backlog",n=c.getAllModels().find(function(e){return e.getId()===s});if(n){var i=n.getIssueList(),r=i.getAllIssues();return i.setOrder(e.filter(function(e){return r[e]})),[n]}return[]},c.moveIssuesNew=function(e,t,s,n){if(0!==e.length){var r=[],a=[],u=t||"backlog",l=null;if(i.each(c.getAllModels(),function(t){if(t.getId()==u)l=t;else{var s=t.getIssueList(),n=s.removeIssues(e);i.isEmpty(n)||(a.push(t),r.push(n))}}),r=i.flatten(r,!0),l){var o=l.getIssueList();o.addIssues(r),o.reorderIssues(e,s,n),a.push(l)}return a}},c.hasAnySubtasks=function(e){var t=this;if(!e)throw"Selection of issueKeys as an {array} must be provided.";return e.some(function(e){return t.getIssueData(e).parentId})},c.assignSubtasksToSameEpicAsParent=function(e){e.forEach(function(e){var t=c.getIssueData(e);t&&i.each(c.getSubtasks(e),function(e){e.epic=t.epic})})},c.isIssueSelectable=function(e){var t=c.getAllIssueListsNew();return i.any(t,function(t){return t.isIssueValid(e)&&t.isIssueVisible(e)})},c.getIssueIndex=function(e){var t=-1,s=c.getAllIssueListsNew();return i.any(s,function(s){return!!s.isIssueValid(e)&&(t=s.getIssueIndex(e),!0)}),t},c.canAddToSelection=function(e,t){var s=c.getAllIssueListsNew();return i.any(s,function(s){return s.isIssueValid(t)&&s.canAddToSelection(e,t)})},c.getIssueRange=function(e,t){var s=[],n=c.getAllIssueListsNew();return i.any(n,function(n){return!(!n.isIssueValid(e)||!n.isIssueValid(t))&&(s=n.getIssueRange(e,t),!0)}),s},c.getNextIssueKey=function(e){for(var t=c.getAllModels(),s=0;s<t.length;s++){var n=t[s];if(n.getIssueList().isIssueValid(e)){var i=!1,r=a.isSprintModel(n),u=d.isTwixieOpen(n.getId());if((r&&u||!r)&&(i=n.getIssueList().getNextIssueKey(e)))return i;for(var l=s+1;l<t.length;l++){var o=t[l];if(r=a.isSprintModel(o),u=d.isTwixieOpen(o.getId()),(!r||u)&&(i=o.getIssueList().getFirstVisibleIssueKey()))break}return i}}},c.getPreviousIssueKey=function(e){for(var t=c.getAllModels(),s=0;s<t.length;s++){var n=t[s];if(n.getIssueList().isIssueValid(e)){var i=!1,r=a.isSprintModel(n),u=d.isTwixieOpen(n.getId());if((r&&u||!r)&&(i=n.getIssueList().getPreviousIssueKey(e)))return i;for(var l=s-1;l>=0;l--){var o=t[l];if(r=a.isSprintModel(o),u=d.isTwixieOpen(o.getId()),(!r||u)&&(i=o.getIssueList().getLastVisibleIssueKey()))break}return i}}},c.getFirstRankableIssueKeyInColumn=function(e){var t=null!=e,s=t?[e]:[],n=!1,r=c.getAllIssueListsNew();return i.any(r,function(i){return!(t&&!i.isIssueValid(e))&&(n=i.getFirstRankableIssueKeyInColumn(s),!0)}),n},c.getLastRankableIssueKeyInColumn=function(e){var t=null!=e,s=t?[e]:[],n=!1,r=c.getAllIssueListsNew();return i.any(r,function(i){return!(t&&!i.isIssueValid(e))&&(n=i.getLastRankableIssueKeyInColumn(s),!0)}),n},c.getBestFitSelectionAfterRank=function(e){var t=c.findModelWithIssue(i.first(e));return t?t.getIssueList().getBestFitSelectionAfterRank(e):null},c.setRankCustomFieldId=function(e){c.rankCustomFieldId=e},c.setEstimationStatistic=function(e){c.estimationStatistic={isEnabled:e.isEnabled,typeId:e.typeId,name:e.name,renderer:e.renderer}},c.setTrackingStatistic=function(e){c.trackingStatistic={isEnabled:e.isEnabled,typeId:e.typeId,name:e.name,renderer:e.renderer}},c.isRankable=function(){return!i.isUndefined(c.rankCustomFieldId)},c.getRankCustomFieldId=function(){return c.rankCustomFieldId},c.getHiddenBySearchIssues=function(){var e={};return i.each(c.getAllIssueListsNew(),function(t){var s=t.getHiddenBySearchIssues();e=i.extend(e,s)}),e},c.isSubtask=function(e){return c._anyIssueList(e,function(t){return t.isSubtask(e)})},c.getSubtasks=function(e){var t=[];return i.each(c.getAllIssueListsNew(),function(s){t=t.concat(s.getSubtasks(e))}),t},c.getIssueData=function(e){return c._anyIssueList(e,function(t){return t.getIssueData(e)})},c.getIssueDataForId=function(e){return c._anyIssueList(e,function(t){return t.getIssueDataForId(e)})},c.getIssueIdForKey=function(e){return c._anyIssueList(e,function(t){return t.getIssueIdForKey(e)})},c.isParentAndCollapsed=function(e){return c._anyIssueList(e,function(t){return t.isCollapsed(e)&&t.hasSubTasks(e)})},c.map=function(e){return c.getAllIssueListsNew().reduce(function(t,s){var n=s.getAllIssues();return t.concat(Object.keys(n).map(function(t){return e(n[t])}))},[])},c._anyIssueList=function(e,t){var s=null;return i.any(c.getAllIssueListsNew(),function(n){return!!n.isIssueValid(e)&&(s=t(n),!0)}),s},c.isIssueVisible=function(e){var t=c.findModelWithIssue(e);if(t){var s=t.getIssueList();return s.isIssueValid(e)&&s.isIssueVisible(e)}return!1},c.hasAnyIssueInvisible=function(e){return e.some(function(e){return!c.isIssueVisible(e)})},c.canManageSprints=function(){return c._canManageSprints},c.setCanManageSprints=function(e){c._canManageSprints=e},c.complexQuery=function(){return Boolean(c._complexQuery)},c.setComplexQuery=function(e){c._complexQuery=e},c.canCreateIssue=function(){return c._canCreateIssue},c.setCanCreateIssue=function(e){c._canCreateIssue=e},c.supportsPages=function(){return c._supportsPages},c.setSupportsPages=function(e){c._supportsPages=e},c.updateFiltering=function(){var e=c.getAllIssueListsNew();return u.applyToIssueLists(e)},c.getEpicsFilteredForVersion=function(e){var t=!1;i.isString(e)&&(u.isNoneVersionFilterId(e)?t=!0:e=parseInt(e,10));var s=GH.EpicController.getEpicModel().getEpicList();if(0===s.getIssueCount())return[];var n=s.getOrder(),r=[];return i.each(c.getAllIssueListsNew(),function(s){if(n.length>0){var a=s.getAllIssues();i.each(a,function(s){if(s.epic&&i.contains(n,s.epic)){var a=!1;if(t&&i.isEmpty(s.fixVersions)?a=!0:!t&&i.contains(s.fixVersions,e)&&(a=!0),a&&(r.push(s.epic),n=i.without(n,s.epic),0===n.length))return!1}})}}),{filtered:n,unfiltered:r}},c.removeEpicFromIssues=function(e){var t=[];return i.each(e,function(e){var s=c.getIssueData(e);s&&s.epic&&(delete s.epic,t.push(s))}),t},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/EditSprintDialog.soy' */
// This file was automatically generated from EditSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.editsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.editsprint == 'undefined') { GH.tpl.dialogs.editsprint = {}; }


GH.tpl.dialogs.editsprint.renderEditSprintDialog = function(opt_data, opt_ignored) {
  return '<form class="aui"><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml('Sprint name') + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-sprint-name" value="' + soy.$$escapeHtml(opt_data.sprint.name) + '"></div>' + ((! (opt_data.sprint.state == 'FUTURE')) ? '<div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml('Start date') + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-start-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.sprint.startDate) + '"><span id="ghx-sprint-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit start date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-start-date-error"></span></div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml('End date') + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-end-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.sprint.endDate) + '"><span id="ghx-sprint-end-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit end date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-end-date-error"></span></div>' : '') + '<div class="field-group"><label for="ghx-sprint-goal-input">' + soy.$$escapeHtml('Sprint goal:') + '</label><textarea class="textarea full-width-field" name="goal" id="ghx-sprint-goal-input">' + ((opt_data.sprint.goal) ? soy.$$escapeHtml(opt_data.sprint.goal) : '') + '</textarea></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.editsprint.renderEditSprintDialog.soyTemplateName = 'GH.tpl.dialogs.editsprint.renderEditSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/EditSprintDialog.js' */
define("jira-agile/rapid/ui/dialog/edit-sprint-dialog",["require"],function(t){"use strict";function a(){new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-sprint-start-date",button:"ghx-sprint-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),Calendar.setup({firstDay:0,inputField:"ghx-sprint-end-date",button:"ghx-sprint-end-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers})}function e(t){t.dialog.disableControls(),GH.Validation.clearContextualErrors(r("#"+t.dialog.id));var a=r("#ghx-sprint-name").val(),e=r("#ghx-sprint-start-date").val(),i=r("#ghx-sprint-end-date").val(),n=r("#ghx-sprint-goal-input").val();GH.Ajax.put({url:"/sprint/"+t.sprint.id,data:{name:a,startDate:e,endDate:i,goal:n,rapidViewId:t.rapidViewId},errorContextMap:{name:"#ghx-sprint-name",startDate:"#ghx-sprint-start-date-error",endDate:"#ghx-sprint-end-date-error",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).always(function(){t.dialog.enableControls()}).done(function(a){t.dialog.dispose(),AJS.$(GH).trigger(GH.Components.EVENT_SPRINT_UPDATED,a.success)});var d={sprintState:t.sprint.state,sprintNameUpdated:a!==t.sprint.name,sprintGoalUpdated:"undefined"==typeof t.sprint.goal?0!==n.trim().length:n!==t.sprint.goal};"ACTIVE"===t.sprint.state&&(d.sprintStartDateUpdated=e!==t.sprint.startDate,d.sprintEndDateUpdated=i!==t.sprint.endDate),AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.update.click",data:d})}function i(t){return function(){AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.cancel.click",data:{sprintState:t.sprintData.state}})}}var r=t("jquery"),n={};return n.show=function(t,n){var d=GH.Dialog.create({id:"ghx-dialog-edit-sprint",width:575,height:"FUTURE"===n.sprintData.state?310:390,onCancelFn:i(n),analyticsPageName:"editSprintModal"});d.addHeader(AJS.format("Edit sprint: {0}",n.getName())),d.addPanel("","panel"),d.getCurrentPanel().html(GH.tpl.dialogs.editsprint.renderEditSprintDialog({sprint:n.sprintData})),d.addButton("Update",function(){e({rapidViewId:t,sprint:n.sprintData,dialog:d})}),GH.Dialog.addCancelButton(d),a(),d.show(),r("#ghx-dialog-edit-sprint .dialog-page-body form").on("submit",function(t){t.preventDefault()})},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintController.js' */
define("jira-agile/rapid/ui/plan/sprint-controller",["require"],function(t){"use strict";var e,i,a=t("jquery"),n=t("jira-agile/rapid/global-events"),r=t("jira-agile/rapid/analytics-tracker"),o=t("jira-agile/rapid/ui/plan/sprint-view"),p=t("jira-agile/rapid/ui/plan/backlog-model"),s=t("jira-agile/rapid/ui/dialog/edit-sprint-dialog"),d=function(t,e){return l.analytics.trigger("deletesprint"),GH.Ajax.del({url:"/sprint/"+e+"?rapidViewId="+t})};n.on("pre-initialization",function(){e=t("jira-agile/rapid/ui/plan/backlog-controller"),i=t("jira-agile/rapid/ui/plan/BacklogView")});var l={};return l.analytics=new r("gh.rapidboard.sprint.controller"),l.init=function(){o.init(),a(GH).bind(GH.Components.EVENT_SPRINT_UPDATED,l.handleSprintUpdated)},l.handleSprintUpdated=function(t,e){var a=p.updateDataForSprint(e.id,e);a&&i.redrawChangedModel(a)},l.addSprint=function(){var t=a(this);GH.Util.UI.isDisabled(t)||(GH.Util.UI.ariaDisable(t),GH.Ajax.post({url:"/sprint/"+e.rapidViewData.id}).done(function(t){l.analytics.trigger("addsprint");var e=t.success;p.addNewSprint(e),i.updateSprintsAfterAddRemove()}).always(function(){GH.Util.UI.ariaEnable(t)}))},l.openStartSprintDialog=function(t){var e=GH.RapidBoard.State.getRapidViewId(),i=p.getSprintModel(t),a=i.getIssueList();if(!(a.getAllIssues().length<1)){var n=a.getNumVisibleIssues();GH.Dialogs.StartSprintDialog.showDialog(e,t,n)}},l.deleteSprintFromBacklog=function(t){var e=GH.RapidBoard.State.getRapidViewId(),i=p.getSprintModel(t).sprintData;l.deleteSprint(e,i,l.onDialogueConfirm)},l.onDialogueConfirm=function(t){var e=p.removeSprintAndMoveIssues(t);e?i.draw():i.updateSprintsAfterAddRemove()},l.deleteSprint=function(t,e,i){GH.ConfirmDialog.create("ghx-remove-planned-sprint-confirm-dialog",{contentEscaping:!1,content:AJS.format("Are you sure you want to delete sprint {0}{1}{2}?","<b>",AJS.escapeHTML(String(e.name)),"</b>"),header:"Delete sprint",onConfirmFn:function(){return d(t,e.id).done(function(){return i(e.id)})},analyticsPageName:"deleteSprintModal"}).show()},l.isTwixieOpen=function(t){return"open"===l._getTwixieState(t)},l.toggleTwixie=function(t){var e=l.isTwixieOpen(t);l.setTwixieOpen(t,!e)},l.setTwixieOpen=function(t,e){var i=e?"open":"closed";l._setTwixieState(t,i),o.updateTwixieState(t),t===p.BACKLOG_ID&&AJS.trigger("analyticsEvent",{name:"jira-software.boards.backlog.collapse",data:{state:i}})},l._setTwixieState=function(t,e){var i="sprintTwix-"+t;GH.BoardState.setPerViewValue(i,e)},l._getTwixieState=function(t){var e="sprintTwix-"+t;return GH.BoardState.getPerViewValue(e,"open")},l.moveSprintUp=function(t){l._moveSprint(t,p.moveSprintUp)},l.moveSprintDown=function(t){l._moveSprint(t,p.moveSprintDown)},l._moveSprint=function(t,e){var a=e(t);null!=a&&(i.updateSprintsAfterAddRemove(),GH.Ajax.put({url:"/sprint/"+t+"/swap",data:{otherSprintId:a}}).done(function(){l.analytics.trigger("movesprint")}).fail(function(){e(a),i.updateSprintsAfterAddRemove()}))},l.editSprint=function(t){var e=GH.RapidBoard.State.getRapidViewId(),i=p.getSprintModel(t);s.show(e,i),AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.view",data:{sprintState:i.sprintData.state}}),AJS.trigger("analyticsEvent",{name:"jsw.agility.backlog.sprint.edit"})},l.triggerAnalytics=function(t){if(1===t.changes.length){var e,i=t.changes[0],a=i.currentSprint,n=i.targetSprint;a&&n&&"FUTURE"===a.state&&"FUTURE"===n.state&&(e="movebetweenfuturesprints"),a&&n&&"ACTIVE"===a.state&&"ACTIVE"===n.state&&(e="movebetweenactivesprints"),a&&n&&"FUTURE"===a.state&&"ACTIVE"===n.state&&(e="movefromfuturetoactivesprint"),a&&n&&"ACTIVE"===a.state&&"FUTURE"===n.state&&(e="movefromactivetofuturesprint"),!a&&n&&"ACTIVE"===n.state&&(e="addtoactivesprint"),!a&&n&&"FUTURE"===n.state&&(e="addtofuturesprint"),a&&!n&&"FUTURE"===a.state&&(e="removefromfuturesprint"),a&&!n&&"ACTIVE"===a.state&&(e="removefromactivesprint"),e&&l.analytics.trigger(e)}},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintModel.js' */
define("jira-agile/rapid/ui/plan/sprint-model",["require"],function(t){"use strict";var i=t("underscore"),n=t("jira-agile/rapid/ui/plan/issue-list-model"),r=t("jira-agile/rapid/global-events"),e=null;r.on("pre-initialization",function(){e=t("jira-agile/rapid/ui/plan/backlog-model")});var a=function(t,i){this.sprintData=t,this.issueList=new n("sprint-"+t.id,i,GH.VersionController.getVersionModel())};return a.isSprintModel=function(t){return!!GH.RapidBoard.State.isCollapsibleBacklogEnabled()||"sprint"===t.getType()},a.prototype.getSprintData=function(){return this.sprintData},a.prototype.setSprintData=function(t){this.sprintData=t},a.prototype.getIssueList=function(){return this.issueList},a.prototype.getId=function(){return this.sprintData.id},a.prototype.getType=function(){return"sprint"},a.prototype.getName=function(){return this.sprintData.name},a.prototype.getSprintId=function(){return this.sprintData.id},a.prototype.isFutureSprint=function(){return"FUTURE"===this.sprintData.state},a.prototype.isActiveSprint=function(){return"ACTIVE"===this.sprintData.state},a.prototype.isBacklog=function(){return this.sprintData.id===e.BACKLOG_ID},a.prototype.getColumn=function(){return this.sprintData.column},a.prototype.getLinkedPagesCount=function(){var t=this.sprintData.linkedPagesCount,n=GH.PageIssueLinksModel.list(this.sprintData.id).length,r=t;return(!i.isNumber(t)||t<n)&&(r=n),r},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/AssignedWorkDialog.js' */
define("jira-agile/rapid/ui/plan/assigned-work-dialog",["require"],function(t){"use strict";var i=t("underscore"),e=t("jira/dialog/form-dialog"),a=e.extend({_getDefaultOptions:function(){return i.extend(this._super(),{content:function(t){var i=GH.tpl.assignedWorkDialog.renderDialogContents({assignedWorkStats:this.options.assignedWorkStats,sprintName:this.options.sprintName,estimateStatisticName:this.options.estimateStatisticName,trackingStatisticName:this.options.trackingStatisticName});t(i)}})}});return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/AssignedWorkDialog.soy' */
// This file was automatically generated from AssignedWorkDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.assignedWorkDialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.assignedWorkDialog == 'undefined') { GH.tpl.assignedWorkDialog = {}; }


GH.tpl.assignedWorkDialog.renderDialogContents = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Workload by assignee') + ' - ' + soy.$$escapeHtml(opt_data.sprintName) + '</h2><div class="form-body ghx-assigned-work-table"><table class="aui"><thead><tr><th>' + soy.$$escapeHtml('Assignee') + '</th><th class="ghx-right">' + soy.$$escapeHtml('Issues') + '</th>' + ((opt_data.assignedWorkStats.all.totalEstimateText != null) ? '<th class="ghx-right">' + soy.$$escapeHtml(opt_data.estimateStatisticName) + '</th>' : '') + ((opt_data.assignedWorkStats.all.totalTrackingEstimateText != null) ? '<th class="ghx-right">' + soy.$$escapeHtml(opt_data.trackingStatisticName) + '</th>' : '') + '</tr></thead><tbody>' + GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: opt_data.assignedWorkStats.unassigned, noAssigneeText: '' + soy.$$escapeHtml('Unassigned')});
  var assignedWorkEntryList27 = opt_data.assignedWorkStats.assigned;
  var assignedWorkEntryListLen27 = assignedWorkEntryList27.length;
  for (var assignedWorkEntryIndex27 = 0; assignedWorkEntryIndex27 < assignedWorkEntryListLen27; assignedWorkEntryIndex27++) {
    var assignedWorkEntryData27 = assignedWorkEntryList27[assignedWorkEntryIndex27];
    output += GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: assignedWorkEntryData27});
  }
  output += '</tbody><tfoot>' + GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: opt_data.assignedWorkStats.all, noAssigneeText: '' + soy.$$escapeHtml('Total')}) + '</tfoot></table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.assignedWorkDialog.renderDialogContents.soyTemplateName = 'GH.tpl.assignedWorkDialog.renderDialogContents';
}


GH.tpl.assignedWorkDialog.renderTableRow = function(opt_data, opt_ignored) {
  return '<tr><td>' + ((opt_data.noAssigneeText) ? '<span class="ghx-no-avatar">' + soy.$$escapeHtml(opt_data.noAssigneeText) + '</span>' : GH.tpl.avatar.renderIssueAvatar({issue: opt_data.assignedWorkEntry.issues[0]}) + soy.$$escapeHtml(opt_data.assignedWorkEntry.assigneeName)) + '</td><td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.issues.length) + '</td>' + ((opt_data.assignedWorkEntry.totalEstimateText != null) ? '<td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.totalEstimateText) + '</td>' : '') + ((opt_data.assignedWorkEntry.totalTrackingEstimateText != null) ? '<td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.totalTrackingEstimateText) + '</td>' : '') + '</tr>';
};
if (goog.DEBUG) {
  GH.tpl.assignedWorkDialog.renderTableRow.soyTemplateName = 'GH.tpl.assignedWorkDialog.renderTableRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/XflowPlanSprintBridge.js' */
define("jira-agile/rapid/ui/plan/xflow-plan-sprint-bridge",["jira-agile/rapid/ui/plan/xflow-plan-sprint-element"],function(n){var e={},i={},t=null,r=1e4,l=function(){return"number"==typeof t},a=function(){l()&&clearTimeout(t)},o=new Promise(function(n){return e.onBridgeLoad=n});e.render=function(e,t,r){return o.then(function(l){var a=function(e){var a=require("jira-agile/rapid/ui/plan/sprint-view"),o=a.getSprintIdForElement(e),d=i[o];if(d&&d.element===e)return d.xflowPlanSprintElement;d&&d.xflowPlanSprintElement!==e&&d.xflowPlanSprintElement.finalize();var u=new n(e,l,{showLinkedPages:t,linkedPagesCount:r});return i[o]={xflowPlanSprintElement:u,element:e},u};a(e).render()})};var d=function(){AJS.$("body").append('<style id="xflow-hide-linked">.ghx-linked { visibility: hidden; }')},u=function(){AJS.$("#xflow-hide-linked").remove()};return e.hideOriginalLinkedPages=function(){a(),d()},e.showOriginalLinkedPages=function(){a(),u()},e.tentativelyHideOriginalLinkedPages=function(){l()||(d(),t=setTimeout(function(){u(),AJS.trigger("analyticsEvent",{name:"grow0.xflow.tentatively.hide.original.linked.pages.timeout"})},r))},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/XflowPlanSprintElement.js' */
define("jira-agile/rapid/ui/plan/xflow-plan-sprint-element",["underscore"],function(e){var t=AJS.$,n=function(n,i,o){this.element=n,this.api=i;var r={showLinkedPages:!1,linkedPagesCount:0,isLinkedPagesDialogOpen:!1,openLinkedPagesFunction:t.noop};this.state=e.extend({},r,o),this.observer=null,this.observeAnchorElement()};return n.prototype._unhideElement=function(){t(this.element).removeClass("hidden")},n.prototype.render=function(){var t=this,n=e.extend(this.state,{openLinkedPagesFunction:function(){return t.openSprintLinkedPagesDialog()}});this.api.render(this._getReactAppElement(),function(){return t._unhideElement()},n)},n.prototype.openSprintLinkedPagesDialog=function(){var e=this,t=require("jira-agile/rapid/ui/plan/sprint-view");t.showSprintLinkedPagesDialog(this._getDialogAnchorElement(),{gravity:"n",offsetX:-100,offsetY:10,hideCallback:function(){e.setState({isLinkedPagesDialogOpen:!1})}}),this.setState({isLinkedPagesDialogOpen:!0})},n.prototype._getReactAppElement=function(){return this.element.querySelector(".xflow-plan-sprint-app")},n.prototype._getDialogAnchorElement=function(){return this.element.querySelector(".xflow-plan-sprint-app-linked-pages-trigger")},n.prototype.observeAnchorElement=function(){var e=this,t=new MutationObserver(function(){var t=require("jira-agile/rapid/ui/plan/sprint-view"),n=t.getSprintIdForElement(e.element),i=GH.PageIssueLinksModel.model[n];i&&e.setState({linkedPagesCount:i.length})});this.observer=t.observe(this._getDialogAnchorElement(),{childList:!0})},n.prototype.setState=function(t){var n=e.extend({},this.state,t);e.isEqual(n,this.state)||(this.state=n,this.render())},n.prototype.finalize=function(){this.observer&&"function"==typeof this.observer.disconnect&&this.observer.disconnect()},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintView.js' */
define("jira-agile/rapid/ui/plan/sprint-view",["require","underscore","jira-agile/rapid/global-events","jira-agile/rapid/analytics-tracker","jira-agile/rapid/ui/plan/sprint-model","jira-agile/rapid/ui/plan/assigned-work-dialog","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/backlog-statistics","jira-agile/tooltip","jira-agile/rapid/const/PageMode"],function(t,i,e,a,n,r,s,o,l,p){"use strict";var d,g,c=t("jira/featureflags/simplified-ux-feature-manager"),S=t("jira-agile/rapid/ui/plan/xflow-plan-sprint-bridge");e.on("pre-initialization",function(){d=t("jira-agile/rapid/ui/plan/sprint-controller"),g=t("jira-agile/rapid/ui/plan/backlog-controller")});var u={};u.init=function(){var t=AJS.$(document);t.on("click",".js-sprint-start",u.handleStartSprintClick),t.on("click",".js-sprint-container .js-view-entity-pages",u.handleViewSprintLinkedPages),t.on("click",".js-assigned-work-dialog-trigger",u.handleViewAllAssignedWork)},u.handleStartSprintClick=function(t){if(!AJS.$(t.target).hasClass("disabled")){var i=u.getSprintIdForElement(t.target);d.openStartSprintDialog(i)}},u.showSprintLinkedPagesDialog=function(t,i){var e=AJS.$(t),a=u.getSprintIdForElement(e);GH.LinkedPagesController.showDialogForSprint(p.PLAN,a,e,i)},u.handleViewSprintLinkedPages=function(t){u.showSprintLinkedPagesDialog(t.target)},u.handleDeleteSprintClick=function(t){if(!AJS.$(t.target).hasClass("disabled")){var i=u.getSprintIdForElement(t.target);d.deleteSprintFromBacklog(i)}},u.handleViewAllAssignedWork=function(t){t.preventDefault();var i=u.getSprintIdForElement(t.target),e=s.getSprintModel(i),n=new r({id:"assigned-work-dialog",assignedWorkStats:o.getAssignedWorkStats(e.getIssueList()),sprintName:e.getName(),estimateStatisticName:s.estimationStatistic.name,trackingStatisticName:s.trackingStatistic.name});n.show(),l.hide(".js-assigned-work-dialog-trigger"),new a("gh.assignedWork.dialog").trigger("show")},u._renderXflowPlanSprint=function(t,i){var e=GH.RapidBoard.State.isScrumBoard();if(e){var a=s.supportsPages(),n=t.find(".xflow-plan-sprint");n.length&&S.render(n[0],a,i.getLinkedPagesCount())}},u.registerTwixies=function(){AJS.$("#ghx-backlog").undelegate(".ghx-backlog-container .ghx-expander","click.sprintTwix"),AJS.$("#ghx-backlog").delegate(".ghx-backlog-container .ghx-expander","click.sprintTwix",u.handleTwixieClick)},u.handleTwixieClick=function(t){var i=AJS.$(this).closest(".ghx-backlog-container"),e=i.attr("data-sprint-id");d.toggleTwixie(e)},u.updateTwixieState=function(t){var i=d.isTwixieOpen(t),e=AJS.$('.js-sprint-container[data-sprint-id="'+t+'"]');i?e.removeClass("ghx-closed").addClass("ghx-open"):e.removeClass("ghx-open").addClass("ghx-closed")},u.updateSprintViewForModel=function(t){u._updateSprint(t)},u.renderAllSprints=function(t){var e=s.getSprintModels(),a=AJS.$("#ghx-backlog").find(".ghx-sprint-group").empty();c.isBacklogViewPlanSprintXflowEnabled()&&GH.RapidBoard.State.isScrumBoard()&&S.tentativelyHideOriginalLinkedPages(),i.each(e,function(i){var e=AJS.$(GH.tpl.sprintview.renderSprintContainer({sprintData:i.getSprintData(),isMetaExpanded:d.isTwixieOpen(i.getSprintId()),isKanbanColumn:GH.RapidBoard.State.isKanbanBoard()&&!i.isBacklog()})),n=u._renderSprintContent(i,t);c.isBacklogViewPlanSprintXflowEnabled()&&u._renderXflowPlanSprint(n,i),e.filter(".ghx-backlog-container").append(n),a.append(e)}),u.enableTooltips()},u._updateSprint=function(t){var i=AJS.$('.js-sprint-container[data-sprint-id="'+t.getSprintId()+'"]');if(0!==i.length){var e=g.calculateIssueRenderData(),a=u._renderSprintContent(t,e);c.isBacklogViewPlanSprintXflowEnabled()&&u._renderXflowPlanSprint(a,t),i.empty().append(a),u.enableTooltips()}},u._renderSprintContent=function(t,i){var e=u.calculateSprintIssueListStats(t,t.getIssueList()),a=t.getSprintData(),n=u._getManageSprintData(a),r=GH.RapidBoard.State.isKanbanBoard()?a.column.min:void 0,o=GH.RapidBoard.State.isKanbanBoard()?a.column.max:void 0,l=t.getIssueList().getVisibleRankables(),p=t.getIssueList().getAllIssues(),d=GH.IssueListUtil.issueListToTree(l.map(function(t){return p[t]}));GH.IssueListUtil.applyExpandedState(d,GH.RapidBoard.State.getExpandedIssueKeys());var g=GH.RapidBoard.State.isScrumBoard(),S=s.supportsPages()&&g&&!t.isBacklog(),k={sprintData:a,manageSprintData:n,isRankable:s.isRankable(),showLinkedPages:S,linkedPagesCount:t.getLinkedPagesCount(),issues:d,issueListStats:e,epics:GH.EpicController.getEpicModel().getEpicList().getAllIssues(),issueRenderData:i,statLabel:s.estimationStatistic.name,trackLabel:s.trackingStatistic.name,estimationEnabled:s.estimationStatistic.isEnabled,showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),showAssignedWorkStats:GH.RapidBoard.State.isScrumBoard(),showSprintActions:GH.RapidBoard.State.isScrumBoard(),showSprintFooter:!GH.RapidBoard.State.isAgilityBoard()&&GH.RapidBoard.State.isScrumBoard(),minIssueCount:r,maxIssueCount:o,showXflowPlanSprint:c.isBacklogViewPlanSprintXflowEnabled()&&g,isAgility:GH.RapidBoard.State.isAgilityBoard(),shouldDisplayCreateSprintButton:t.isBacklog()};return AJS.$(GH.tpl.sprintview.renderSprintContent(k))},u.updateSprintStatistics=function(){var t=s.getSprintModels();i.each(t,function(t){var i=u.calculateSprintIssueListStats(t,t.getIssueList());u._updateSprintStatisticsDom(t,i,!1)})},u.updateSprintStatisticForDraggedSprint=function(t,i){var e=u.calculateSprintIssueListStats(t,i);u._updateSprintStatisticsDom(t,e,!0)},u.markAsOvertaken=function(t){var e=!1,a=[];i.each(t,function(t){n.isSprintModel(t)?a.push(t.getSprintId()):e=!0}),AJS.$(".js-sprint-container").each(function(){var t=AJS.$(this);i.contains(a,u.getSprintIdForElement(t))?t.addClass("ghx-overtaken"):t.removeClass("ghx-overtaken")}),AJS.$(".ghx-everything-else").each(function(){var t=AJS.$(this);e?t.addClass("ghx-overtaken"):t.removeClass("ghx-overtaken")})},u._updateSprintStatisticsDom=function(t,i,e){var a=AJS.$('.js-sprint-container[data-sprint-id="'+t.getSprintId()+'"]'),n=u._renderSprintIssueCount(i);if(a.find(".ghx-issue-count").replaceWith(n),GH.RapidBoard.State.isScrumBoard()&&a.find(".ghx-assigned-work-stats").replaceWith(GH.tpl.sprintview.renderAssignedWork({assignedWork:i.assignedWorkStats.assigned,estimateStatisticName:s.estimationStatistic.name,trackingStatisticName:s.trackingStatistic.name})),t.isFutureSprint()){var r=u._renderFutureSprintFooterContent(i);a.find(".gh-sprint-footer-stats").empty().append(r),e&&AJS.$('.gh-sprint-footer-stats[data-sprint-id="'+t.getSprintId()+'"]').empty().append(r)}u.enableTooltips()},u._renderSprintMetaInfos=function(t){return GH.tpl.sprintview.renderSprintMetaInfos({sprintData:t.getSprintData()})},u._renderSprintIssueCount=function(t){return GH.tpl.planissuelist.renderIssueCount({issueListStats:t})},u._renderFutureSprintFooterContent=function(t){return GH.RapidBoard.State.isScrumBoard()?GH.tpl.sprintview.renderFutureSprintFooterContent({issueListStats:t}):""},u._getManageSprintData=function(t){var i=s.getActiveSprintModels(),e=s.getFutureSprintModels(),a=i.length>0,n=GH.RapidBoard.parallelSprints,r=e.length>0?e[0].getSprintData().id:null,o=(n||!a)&&t.canUpdateSprint,l=s.canManageSprints(),p=s.complexQuery();return{canStartSprint:o,canUpdateSprint:t.canUpdateSprint,canManageSprints:l,complexQuery:p,hasOpenSprints:a,parallelSprints:n,firstFutureSprintId:r}},u.calculateSprintIssueListStats=function(t,e){var a=!0;GH.RapidBoard.State.isCollapsibleBacklogEnabled()&&(a=!t.isBacklog());var n=o.getIssueListStats(e,a,t.isActiveSprint());if(t.isFutureSprint()){var r=o.getIssueListEstimateStatistics(e);i.extend(n,r)}else n.progressIndicators=o.calculateSprintProgress(e,g.rapidViewConfig.columns,s.estimationStatistic);return n.assignedWorkStats=o.getAssignedWorkStats(e),GH.RapidBoard.State.isKanbanBoard()&&(n.statisticsFieldValue=o.calculateStatisticsFieldValue(e,g.rapidViewConfig.statisticConfig)),n},u.getSprintIdForElement=function(t){var i=AJS.$(t).closest(".js-sprint-container");return i.length?k(i):null},u.getSprintIdForMarker=function(t){var i=AJS.$(t).closest(".js-marker");return i.length?k(i):null};var k=function(t){return GH.RapidBoard.State.isCollapsibleBacklogEnabled()?parseInt(t.data("sprint-id"),10)||s.BACKLOG_ID:parseInt(t.data("sprint-id"),10)};return u.enableTooltips=function(){AJS.$(".js-sprint-start").tooltip({html:!0,title:"data-tooltip"}),l.tipsify({selector:".js-assigned-work-dialog-trigger"})},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintView.soy' */
// This file was automatically generated from SprintView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintview == 'undefined') { GH.tpl.sprintview = {}; }


GH.tpl.sprintview.renderSprintContainer = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-error-group"></div><div class="ghx-onboarding-fillyourbacklog-group"></div><div data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '" class="ghx-backlog-container ' + soy.$$escapeHtml(opt_data.sprintData.state == 'FUTURE' ? 'ghx-sprint-planned' : 'ghx-sprint-active') + ' js-sprint-container ' + soy.$$escapeHtml(opt_data.isMetaExpanded ? 'ghx-open' : 'ghx-closed') + ((opt_data.isKanbanColumn) ? ' ghx-kanban-column' : '') + '" ></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintContainer.soyTemplateName = 'GH.tpl.sprintview.renderSprintContainer';
}


GH.tpl.sprintview.renderSprintContent = function(opt_data, opt_ignored) {
  var output = GH.tpl.sprintview.renderSprintHeader(opt_data) + '<div class="ghx-meta' + ((! opt_data.manageSprintData.canManageSprints) ? ' ghx-disabled' : '') + '" >' + ((opt_data.showAssignedWorkStats && ! opt_data.isAgility) ? GH.tpl.sprintview.renderAssignedWork({assignedWork: opt_data.issueListStats.assignedWorkStats.assigned, estimateStatisticName: opt_data.statLabel, trackingStatisticName: opt_data.trackLabel}) : '') + '<div class="ghx-issues js-issue-list' + ((opt_data.issueListStats.noneVisible) ? ' ghx-no-issues' + ((opt_data.issueListStats.empty) ? ' js-empty-list' : '') : ' ghx-has-issues') + '"><div class="ghx-plan-dropzone"></div>' + GH.tpl.planissuelist.renderIssueList(opt_data) + '<div class="ghx-helper"><div class="ghx-description">' + soy.$$escapeHtml(opt_data.issueListStats.emptyMessage) + '</div></div></div>';
  var isMarkerDraggable__soy51 = opt_data.isRankable && opt_data.sprintData.id != 'backlog';
  output += ((opt_data.sprintData.state == 'FUTURE') ? '<div class="ghx-marker js-parent-drag js-marker ' + ((! isMarkerDraggable__soy51) ? 'ghx-not-rankable' : '') + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '"><div class="gh-sprint-divider"><div class="gh-grabber-left-container"><div class="gh-grabber-left"></div></div><div class="gh-grabber"></div><div class="gh-grabber-right-container"><div class="gh-grabber-right"></div>' + GH.tpl.sprintview.renderFutureSprintFooter(opt_data) + '</div></div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintContent.soyTemplateName = 'GH.tpl.sprintview.renderSprintContent';
}


GH.tpl.sprintview.renderSprintHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-backlog-header js-sprint-header" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '"><div class="header-left"><div class="ghx-expander"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-name">' + soy.$$escapeHtml(opt_data.sprintData.name) + '</div>' + ((opt_data.minIssueCount) ? '<div class="ghx-kanban-column-min"><span class="aui-lozenge' + ((opt_data.issueListStats.statisticsFieldValue < opt_data.minIssueCount) ? ' aui-lozenge-current' : '') + '">' + soy.$$escapeHtml('Min') + ' ' + soy.$$escapeHtml(opt_data.minIssueCount) + '</span></div>' : '') + ((opt_data.maxIssueCount) ? '<div class="ghx-kanban-column-max"><span class="aui-lozenge' + ((opt_data.issueListStats.statisticsFieldValue > opt_data.maxIssueCount) ? ' aui-lozenge-error' : '') + '">' + soy.$$escapeHtml('Max') + ' ' + soy.$$escapeHtml(opt_data.maxIssueCount) + '</span></div>' : '') + GH.tpl.planissuelist.renderIssueCount(opt_data) + '</div><div class="header-right">' + ((opt_data.showSprintActions && opt_data.shouldDisplayCreateSprintButton) ? '<div class="aui-item"><button class="js-add-sprint aui-button ' + ((! opt_data.manageSprintData.canManageSprints) ? ' disabled' : '') + '"' + ((! opt_data.manageSprintData.canManageSprints) ? ((opt_data.manageSprintData.complexQuery) ? 'data-tooltip="' + soy.$$escapeHtml('Only a Jira administrator can update this sprint. Try selecting a project in your current board filter.') + '"' : 'data-tooltip="' + soy.$$escapeHtml('You need the Manage sprints permission for all projects in the origin board to create a sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e') + '"') + 'aria-disabled="true"' : 'data-tooltip=""') + '>' + soy.$$escapeHtml('Create sprint') + '</button></div>' : (opt_data.sprintData.state == 'FUTURE') ? (opt_data.showSprintActions) ? GH.tpl.sprintview.renderFutureSprintControls(opt_data) : '' : GH.tpl.sprintview.renderSprintProgress(opt_data) + ((opt_data.showSprintActions) ? '<div class="ghx-controls aui-group">' + ((opt_data.showXflowPlanSprint) ? GH.tpl.sprintview.renderXflowPlanSprint(null) : '') + GH.tpl.sprintview.renderSprintActions(opt_data) + '</div>' : '')) + '</div>' + ((opt_data.sprintData.goal) ? '<div class="aui-group ghx-sprint-goal-group">' + GH.tpl.board.x.renderSprintGoal({goal: opt_data.sprintData.goal}) + '</div>' : '') + ((opt_data.sprintData.state != 'FUTURE' || opt_data.showLinkedPages) ? '<div class="ghx-sprint-info aui-group aui-group-split"><div class="ghx-dates aui-item">' + ((opt_data.sprintData.state != 'FUTURE') ? GH.tpl.sprintview.renderSprintMetaInfos(opt_data) : '') + '</div>' + ((opt_data.showLinkedPages) ? GH.tpl.sprintview.renderSprintMetaLinkedTrigger(opt_data) : '') + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintHeader.soyTemplateName = 'GH.tpl.sprintview.renderSprintHeader';
}


GH.tpl.sprintview.renderFutureSprintControls = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls aui-group">' + GH.tpl.sprintview.renderStartSprintItem(opt_data) + ((opt_data.showXflowPlanSprint) ? GH.tpl.sprintview.renderXflowPlanSprint(null) : '') + GH.tpl.sprintview.renderSprintActions(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintControls.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintControls';
}


GH.tpl.sprintview.renderSprintMetaInfos = function(opt_data, opt_ignored) {
  return '<div class="ghx-date">' + soy.$$escapeHtml(opt_data.sprintData.startDate) + '</div><div class="ghx-divider">&bull;</div><div class="ghx-date">' + soy.$$escapeHtml(opt_data.sprintData.endDate) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintMetaInfos.soyTemplateName = 'GH.tpl.sprintview.renderSprintMetaInfos';
}


GH.tpl.sprintview.renderSprintMetaLinkedTrigger = function(opt_data, opt_ignored) {
  return '<div class="ghx-linked aui-item">' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.linkedPagesCount, title: 'Create and view pages linked to this sprint'}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintMetaLinkedTrigger.soyTemplateName = 'GH.tpl.sprintview.renderSprintMetaLinkedTrigger';
}


GH.tpl.sprintview.renderSprintProgress = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issueListStats.progressIndicators) {
    output += '<div class="ghx-badge-group">';
    var indicatorList192 = opt_data.issueListStats.progressIndicators;
    var indicatorListLen192 = indicatorList192.length;
    for (var indicatorIndex192 = 0; indicatorIndex192 < indicatorListLen192; indicatorIndex192++) {
      var indicatorData192 = indicatorList192[indicatorIndex192];
      var state__soy193 = '' + ((indicatorIndex192 == 0) ? ' ghx-not-started' : (indicatorIndex192 == indicatorListLen192 - 1) ? ' ghx-done' : ' ghx-in-progress');
      var text__soy201 = '' + ((indicatorData192.total.text) ? soy.$$escapeHtml(indicatorData192.total.text) : ' ');
      output += aui.badges.badge({text: text__soy201, extraAttributes: {title: indicatorData192.title}, extraClasses: [state__soy193]});
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintProgress.soyTemplateName = 'GH.tpl.sprintview.renderSprintProgress';
}


GH.tpl.sprintview.renderProgressIndicatorTitle = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.indicator.name) + ': ' + soy.$$escapeHtml(opt_data.indicator.total.text) + ' ' + soy.$$escapeHtml('of') + ' ' + soy.$$escapeHtml(opt_data.allIndicatorsTotalText) + ' (' + soy.$$escapeHtml(opt_data.statLabel) + ')';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderProgressIndicatorTitle.soyTemplateName = 'GH.tpl.sprintview.renderProgressIndicatorTitle';
}


GH.tpl.sprintview.renderStartSprintItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.manageSprintData.firstFutureSprintId == opt_data.sprintData.id || opt_data.manageSprintData.parallelSprints) ? '<div class="aui-item">' + ((opt_data.manageSprintData.canStartSprint && opt_data.issueListStats.hasIssues) ? '<button class="js-sprint-start aui-button" data-tooltip="">' + soy.$$escapeHtml('Start sprint') + '</button>' : '<button class="js-sprint-start aui-button disabled" aria-disabled="true"' + ((! opt_data.issueListStats.hasIssues) ? 'data-tooltip="' + soy.$$escapeHtml('Sprint cannot be started because it contains no issues') + '"' : (opt_data.manageSprintData.hasOpenSprints && ! opt_data.manageSprintData.parallelSprints) ? 'data-tooltip="' + soy.$$escapeHtml('Can be planned but not started until the completion of above active sprint') + '"' : (! opt_data.manageSprintData.canStartSprint) ? (opt_data.manageSprintData.complexQuery) ? 'data-tooltip="' + soy.$$escapeHtml('Only a Jira administrator can start or complete this sprint. Try selecting a project in your current board filter.') + '"' : 'data-tooltip="' + soy.$$escapeHtml(AJS.format('You need the {0}Manage sprints permission{1} to start or complete this sprint','<a class="manage-sprint-permission-help" href="#">','</a>')) + '"' : '') + '>' + soy.$$escapeHtml('Start sprint') + '</button>') + '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderStartSprintItem.soyTemplateName = 'GH.tpl.sprintview.renderStartSprintItem';
}


GH.tpl.sprintview.renderSprintActions = function(opt_data, opt_ignored) {
  var output = '<div class="aui-item">';
  var url__soy260 = soy.$$escapeHtml("") + '/rest/greenhopper/1.0/xboard/plan/sprints/actions?sprintId=' + soy.$$escapeHtml(opt_data.sprintData.id);
  output += aui.buttons.button({extraClasses: ['aui-button', 'js-sprint-actions-trigger'], tagName: 'a', text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconType: 'aui', extraAttributes: {href: url__soy260, 'data-sprint-id': opt_data.sprintData.id}}) + '</a></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintActions.soyTemplateName = 'GH.tpl.sprintview.renderSprintActions';
}


GH.tpl.sprintview.renderXflowPlanSprint = function(opt_data, opt_ignored) {
  return '<div class="aui-item xflow-plan-sprint hidden"><div class="xflow-plan-sprint-app"></div><div class="xflow-plan-sprint-app-linked-pages-trigger"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderXflowPlanSprint.soyTemplateName = 'GH.tpl.sprintview.renderXflowPlanSprint';
}


GH.tpl.sprintview.renderAssignedWork = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-assigned-work-stats">';
  var assignedWorkEntryList276 = opt_data.assignedWork;
  var assignedWorkEntryListLen276 = assignedWorkEntryList276.length;
  for (var assignedWorkEntryIndex276 = 0; assignedWorkEntryIndex276 < assignedWorkEntryListLen276; assignedWorkEntryIndex276++) {
    var assignedWorkEntryData276 = assignedWorkEntryList276[assignedWorkEntryIndex276];
    output += GH.tpl.avatar.renderIssueAvatar({issue: assignedWorkEntryData276.issues[0], tooltipHtml: soy.$$escapeHtml(assignedWorkEntryData276.assigneeName) + '<table>' + ((assignedWorkEntryData276.totalEstimateText) ? '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData276.totalEstimateText) + '</td><td>' + soy.$$escapeHtml(opt_data.estimateStatisticName) + '</td></tr>' : '') + ((assignedWorkEntryData276.totalTrackingEstimateText) ? '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData276.totalTrackingEstimateText) + '</td><td>' + soy.$$escapeHtml(opt_data.trackingStatisticName) + '</td></tr>' : '') + '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData276.issues.length) + '</td><td>' + soy.$$escapeHtml('Issues') + '</td></tr></table>'});
  }
  if (opt_data.assignedWork.length) {
    var tooltip__soy304 = '' + soy.$$escapeHtml('View summary of assigned work');
    output += aui.buttons.button({extraAttributes: {'data-tooltip': tooltip__soy304}, extraClasses: ['js-assigned-work-dialog-trigger', 'aui-button-subtle', 'aui-button-compact'], text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconType: 'aui', iconText: tooltip__soy304});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderAssignedWork.soyTemplateName = 'GH.tpl.sprintview.renderAssignedWork';
}


GH.tpl.sprintview.renderFutureSprintFooter = function(opt_data, opt_ignored) {
  return '<div class="gh-sprint-footer-stats js-marker" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '">' + ((opt_data.showSprintFooter && ! opt_data.isAgility) ? GH.tpl.sprintview.renderFutureSprintFooterContent(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintFooter.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintFooter';
}


GH.tpl.sprintview.renderFutureSprintFooterContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-stats ' + ((! opt_data.issueListStats.allVisible) ? 'ghx-is-filtered' : '') + '"><div class="ghx-stat-total"><span class="ghx-label">' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.issueListStats.totalCount)) : soy.$$escapeHtml(AJS.format('{1} of {0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues} visible',opt_data.issueListStats.totalCount,opt_data.issueListStats.visibleCount))) + '</span>';
  if (opt_data.issueListStats.tracking.shown) {
    output += '<span class="ghx-label">' + soy.$$escapeHtml('Remaining') + '</span>';
    var label__soy340 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted) + ' ' + soy.$$escapeHtml(opt_data.issueListStats.tracking.name) : soy.$$escapeHtml(AJS.format('{0} of {1} {2} visible',opt_data.issueListStats.tracking.visible.formatted,opt_data.issueListStats.tracking.total.formatted,opt_data.issueListStats.tracking.name)));
    var badgetext__soy348 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted) : soy.$$escapeHtml(opt_data.issueListStats.tracking.visible.formatted) + '/' + soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted));
    output += aui.badges.badge({extraClasses: ['ghx-estimate-badge'], text: badgetext__soy348, extraAttributes: {title: label__soy340}});
  }
  if (opt_data.issueListStats.estimate.shown) {
    output += '<span class="ghx-label">' + soy.$$escapeHtml('Estimate') + '</span>';
    var label__soy365 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted) + ' ' + soy.$$escapeHtml(opt_data.issueListStats.estimate.name) : soy.$$escapeHtml(AJS.format('{0} of {1} {2} visible',opt_data.issueListStats.estimate.visible.formatted,opt_data.issueListStats.estimate.total.formatted,opt_data.issueListStats.estimate.name)));
    var badgetext__soy373 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted) : soy.$$escapeHtml(opt_data.issueListStats.estimate.visible.formatted) + '/' + soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted));
    output += aui.badges.badge({text: badgetext__soy373, extraAttributes: {title: label__soy365}});
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintFooterContent.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintFooterContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/sprintactions/SprintActions.js' */
define("jira-agile/rapid/ui/component/sprintactions/sprint-actions",["require"],function(n){"use strict";var t=n("jquery"),i=n("underscore"),r=n("jira-agile/rapid/ui/plan/backlog-model"),e=n("jira-agile/rapid/ui/plan/sprint-controller"),o=AJS.Dropdown,a=function(){};return a.CORE_SPRINT_ACTIONS={"gh-sprint-move-up":e.moveSprintUp,"gh-sprint-move-down":e.moveSprintDown,"gh-sprint-delete":e.deleteSprintFromBacklog,"gh-sprint-delete-disabled":t.noop,"gh-sprint-edit":e.editSprint},a.prototype={getDropDownTrigger:function(){return t(".js-sprint-actions-trigger")},createDropdown:function(){var n=this,i=o.create({trigger:this.getDropDownTrigger(),ajaxOptions:{dataType:"json",cache:!1,formatSuccess:function(i){var r=i.id,e=n.getSprintData(r);return i.sections=n.filterActions(i.sections,e),t(GH.tpl.component.sprintactions.sprintActionsDropdown(i))}}});return t(document).off("click",".js-sprint-action"),t(document).on("click",".js-sprint-action",function(t){n.clickSprintAction(t)}),i},getSprintData:function(n){var t=!1,e=!1,o=r.getFutureSprintModels(),a=r.getSprintModel(n);return o.length>1&&a.isFutureSprint()&&(t=i.first(o).getSprintId()!==n,e=i.last(o).getSprintId()!==n),{canMoveUp:t,canMoveDown:e,canManageSprints:r.canManageSprints()}},filterActions:function(n,t){return i.each(n,function(n){n.actions=i.reject(n.actions,function(n){return"gh-sprint-move-up"===n.id&&!(t.canMoveUp&&t.canManageSprints)||"gh-sprint-move-down"===n.id&&!(t.canMoveDown&&t.canManageSprints)}),i.each(n.actions,function(n){n.disabled=n.styleClass&&n.styleClass.indexOf("disabled")>=0})}),i.filter(n,function(n){return n.actions.length>0})},clickSprintAction:function(n){var i=t(n.currentTarget),r=i.data("sprint-id"),e=i.attr("id"),o=a.CORE_SPRINT_ACTIONS[e];o&&(n.preventDefault(),o(r))}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/sprintactions/SprintActions.soy' */
// This file was automatically generated from SprintActions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintactions.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintactions == 'undefined') { GH.tpl.component.sprintactions = {}; }


GH.tpl.component.sprintactions.sprintActionsDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list js-sprint-actions-list">';
  if (opt_data.sections && opt_data.sections.length > 0) {
    var sectionList6 = opt_data.sections;
    var sectionListLen6 = sectionList6.length;
    for (var sectionIndex6 = 0; sectionIndex6 < sectionListLen6; sectionIndex6++) {
      var sectionData6 = sectionList6[sectionIndex6];
      output += '<ul class=" aui-list-section' + ((sectionIndex6 == sectionListLen6 - 1) ? ' aui-last' : '') + '">';
      var actionList12 = sectionData6.actions;
      var actionListLen12 = actionList12.length;
      for (var actionIndex12 = 0; actionIndex12 < actionListLen12; actionIndex12++) {
        var actionData12 = actionList12[actionIndex12];
        output += '<li class="aui-list-item' + ((actionData12.disabled) ? ' disabled' : '') + '"><a href="' + soy.$$escapeHtml(actionData12.url) + '" class="aui-list-item-link js-sprint-action' + ((actionData12.styleClass) ? ' ' + soy.$$escapeHtml(actionData12.styleClass) : '') + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(actionData12.id) + '"' + ((actionData12.desc) ? 'title="' + soy.$$escapeHtml(actionData12.desc) + '"' : '') + '>' + soy.$$escapeHtml(actionData12.name) + '</a></li>';
      }
      output += '</ul>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintactions.sprintActionsDropdown.soyTemplateName = 'GH.tpl.component.sprintactions.sprintActionsDropdown';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanKBShortcuts.js' */
define("jira-agile/rapid/ui/plan/plan-kb-shortcuts",["require"],function(e){"use strict";var i=e("jira-agile/rapid/analytics-tracker"),t=e("jira-agile/rapid/ui/plan/backlog-model"),a=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),n=e("jira-agile/rapid/ui/plan/plan-controller"),s=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),r=e("jira-agile/rapid/ui/plan/sprint-model"),l={};return l.analytics=new i("gh.rapidboard.rankissues"),l.sendToTop=function(e){if(t.isRankable()){var i=a.getSelectedIssueKey();if(i){var o=t.getFirstRankableIssueKeyInColumn(i),u=a.getSelectedIssuesInOrder();l.analytics.trigger("sendToTop"+(e?e:""),u.length);var d=t.getBestFitSelectionAfterRank(u);if(d&&a.selectIssue(d),o){var c=t.findModelWithIssue(i),g=r.isSprintModel(c),p=g?c.getSprintId():null;s.rankIssues(u,p,null,o).done(function(e){GH.Notification.showSuccess("Issue has been re-ranked to the top of its column.")}).fail(function(){n.reload()})}}}},l.sendToBottom=function(e){if(t.isRankable()){var i=a.getSelectedIssueKey();if(i){var o=t.getLastRankableIssueKeyInColumn(i),u=a.getSelectedIssuesInOrder();l.analytics.trigger("sendToBottom"+(e?e:""),u.length);var d=t.getBestFitSelectionAfterRank(u);if(o){d&&a.selectIssue(d);var c=t.findModelWithIssue(i),g=r.isSprintModel(c),p=g?c.getSprintId():null;s.rankIssues(u,p,o,null).done(function(e){GH.Notification.showSuccess("Issue has been re-ranked to the bottom of its column.")}).fail(function(){n.reload()})}}}},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/BacklogSelectionController.js' */
define("jira-agile/rapid/ui/plan/backlog-selection-controller",["require"],function(e){"use strict";var t,n,s=e("jquery"),a=e("jira-agile/rapid/global-events"),l=e("jira-agile/rapid/ui/plan/backlog-model"),i=e("jira-agile/rapid/ui/plan/plan-issue-list-view"),o=e("jira-agile/rapid/ui/plan/plan-context-menu-controller");a.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/plan/backlog-controller"),n=e("jira-agile/rapid/ui/plan/BacklogView")});var u={};return u.selectionDataModel={},u.selectionManager=void 0,u.init=function(){u.selectionDataModel={isIssueValid:l.isIssueSelectable,getIssueIndex:l.getIssueIndex,canAddToSelection:l.canAddToSelection,getIssueRange:l.getIssueRange},u.selectionManager=new GH.IssueSelectionManager(u.selectionDataModel,"backlog.selectedIssues"),s(document).on("click",n.containerSelector+" .js-issue",u.handleIssueClick),s(document).on("contextmenu",n.containerSelector+" .js-issue",u.handleIssueContextMenu),s(document).on("click",n.containerSelector+" .js-issue .ghx-card-expander",u.handleIssueToggleClick)},u.handleIssueContextMenu=function(e){var t=i.getIssueKey(s(this)),n=u.isInSelection(t);n||(u.selectionManager.handleIssueClick(GH.MouseUtils.getMetaKeys(e),t),u.updateUIAndState({openDetailsView:!1,doScroll:!0})),o.showContextMenuAt(e)},u.handleIssueClick=function(e){var t=i.getIssueKey(s(this)),n=s(e.target).hasClass("js-key-link"),a=!GH.MouseUtils.openInSameTab(e);return!(!n||!a)||(e.preventDefault(),void u.handleIssueSelectionEvent(e,t,!0))},u.validateCurrentSelection=function(){var e=u.selectionManager.validateCurrentSelection();return e&&(GH.RapidBoard.State.replaceState(),u.deferredPushState()),e},u.handleIssueSelectionEvent=function(e,t,n){var s=GH.MouseUtils.getMetaKeys(e),a=u.selectionManager.handleIssueClick(s,t),l=GH.IssueSelectionManager.getMultiSelectType(s);l&&(n=!1),a&&u.updateUIAndState({openDetailsView:n,doScroll:!1})},u.handleIssueToggleClick=function(e){e.stopPropagation();var t=i.getClosestIssueElement(s(this)),n=i.getIssueKey(s(this)),a=i.toggleExpandState(t);a||u.selectIssue(n)},u.selectIssue=function(e){u.selectionManager.selectIssue(e),u.updateUIAndState({openDetailsView:!1,doScroll:!0})},u.clearSelection=function(){u.selectIssue(null)},u.selectNextIssue=function(){var e=null,t=u.getSelectedIssueKey();e=t?l.getNextIssueKey(t):l.getFirstRankableIssueKeyInColumn(null),e||(e=t),u.selectIssue(e)},u.selectPreviousIssue=function(){var e=null,t=u.getSelectedIssueKey();e=t?l.getPreviousIssueKey(t):l.getLastRankableIssueKeyInColumn(null),e||(e=t),u.selectIssue(e)},u.updateUIAndState=function(e){t.updateUIAfterSelectionChange(e),GH.RapidBoard.UrlState.replaceState()},u.pushTimeoutHandler=void 0,u.deferredPushState=function(){var e=1e3,t=new Date;GH.RapidBoard.UrlState.pushTimeoutHandler&&window.clearTimeout(GH.RapidBoard.UrlState.pushTimeoutHandler),GH.RapidBoard.UrlState.pushTimeoutHandler=window.setTimeout(function(){GH.RapidBoard.UrlState.deferredPushState(t)},e)},u.ensureIssueSelected=function(e,t){if(!u.selectionManager.isInSelection(t))if(l.canAddToSelection(u.selectionManager.getSelectedIssueKeys(),t))u.handleIssueSelectionEvent(e,t);else{u.selectionManager.selectIssue(t);var n=!0;GH.RapidBoard.State.isDetailsViewPlanOpened()||(n=!1),u.updateUIAndState({openDetailsView:n,doScroll:!0})}},u.getSelectedIssueKeys=function(){return u.selectionManager.getSelectedIssueKeys()},u.getSelectedIssueKey=function(){return u.selectionManager.getSelectedIssueKey()},u.isInSelection=function(e){return u.selectionManager.isInSelection(e)},u.setIssueFromUrlState=function(e){u.selectionManager.selectIssue(e)},u.addSelectedIssueKeys=function(e){u.selectionManager._addSelectedIssueKeys(e)},u.getCollapsedSubTasksToSelection=function(e){var t=[];return e.forEach(function(e){l.isParentAndCollapsed(e)&&(t=t.concat(l.getSubtasks(e).map(function(e){return e.key})))}),t},u.getSelectedIssuesInOrder=function(){return u.selectionManager.getSelectedIssuesInOrder()},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueListModel.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira-agile/rapid/ui/plan/issue-list-model",["require"],function(e){"use strict";var t=e("underscore"),s=e("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"),r=function(e,t,s){this.fixVersions=s;var r=this.data={};r.id=e,r.issueByKey={},r.order=[],r.visibleIssueKeys=new GH.Collection.OrderedSet,r.hiddenIssueKeys={},r.fakeParentKeys={},this.addIssues(t)};return r.prototype.addIssues=function(e){var s=this.data.issueByKey,r=this.data.order;t.each(e,function(e){this.fixVersions&&this.processFixVersion(e);var t=e.key;s[t]=e,r.push(t)},this),this.buildCache()},r.prototype.prependIssues=function(e){var s=this.data.issueByKey,r=this.data.order;t.each(e,function(e){this.fixVersions&&this.processFixVersion(e);var t=e.key;s[t]=e},this);var i=t.map(e,function(e){return e.key});this.data.order=t.flatten([i,r],!0),this.buildCache()},r.getOrderKeyForMarkerId=function(e){return"%%-"+e},r.prototype.getIssuesInOrder=function(){var e=[],s=this.data.order,r=this.data.issueByKey;return t.forEach(s,function(t,s){e.push(r[t])},this),e},r.prototype.getId=function(){return this.data.id},r.prototype.buildCache=function(){var e=this.data.visibleIssueKeys.clear(),s=this.data.orderByKey={};t.forEach(this.data.order,function(t,i){if(this._isMarkerId(t))s[r.getOrderKeyForMarkerId(t)]=i;else{s[t]=i;var n=this.data.issueByKey[t];n&&!n.hidden&&e.push(t)}},this)},r.prototype._isMarkerId=function(e){return t.isNumber(e)},r.prototype.indexOfRankable=function(e){this._isMarkerId(e)&&(e=r.getOrderKeyForMarkerId(e));var s=this.data.orderByKey[e];return t.isUndefined(s)?-1:s},r.prototype.containsRankable=function(e){return this.indexOfRankable(e)!==-1},r.prototype.insertMarker=function(e,s){var i=0,n=this.data.order;this.containsRankable(e)&&(n=t.without(n,e)),s&&(i=t.indexOf(n,s),i<0?i=0:i++),0===i?n.unshift(e):n=t.flatten([n.slice(0,i),e,n.slice(i)]);var a={};t.forEach(n,function(e,t){this._isMarkerId(e)&&(e=r.getOrderKeyForMarkerId(e)),a[e]=t},this),this.data.order=n,this.data.orderByKey=a},r.prototype.removeMarker=function(e){if(this.containsRankable(e)){var s=t.without(this.data.order,e),i={};t.forEach(s,function(e,t){this._isMarkerId(e)&&(e=r.getOrderKeyForMarkerId(e)),i[e]=t},this),this.data.order=s,this.data.orderByKey=i}},r.prototype.isSubtask=function(e){var t=this.getIssueData(e);return Boolean(t&&t.parentKey)},r.prototype.reorderIssues=function(e,s,r){var i=this,n=this.data.order,a=void 0,o=s||r,u=this.isSubtask(o);if(s){var d=this.getRealAfterKey(s);a=n.indexOf(d)+1}else{var y=this.getRealBeforeKey(r);a=n.indexOf(y)}if(u){var h=this.getIssueData(o).parentKey;e=e.filter(function(e){var t=i.getIssueData(e);return t&&t.parentKey===h})}else{var f=[];e.forEach(function(e){if(i.isIssueValid(e)&&!i.isSubtask(e)){var t=Object.values(i.data.issueByKey).filter(function(t){return t.parentKey===e}).map(function(e){return e.key});f.push(e),t.forEach(function(e){return f.push(e)})}}),e=f}var p=n.slice(0,a),c=n.slice(a);p=this.withoutArray(p,e),c=this.withoutArray(c,e);var l=t.flatten([p,e,c]);this.setOrder(l)},r.prototype.getRealAfterKey=function(e){if(this.isSubtask(e))return e;var t=Array.from(this.data.order).reverse(),s=this.findFirstSubtaskOfParentInList(t,e);return s?s:e},r.prototype.getRealBeforeKey=function(e){return this.isSubtask(e)||this.data.order.includes(e)?e:this.findFirstSubtaskOfParentInList(this.data.order,e)},r.prototype.findFirstSubtaskOfParentInList=function(e,t){var s=this;return e.find(function(e){var r=s.getIssueData(e);return r&&r.parentKey===t})},r.prototype.getRankableBeforeId=function(e){var t=this.indexOfRankable(e);return t>0&&this.data.order[t-1]},r.prototype.isIssueHiddenBySearchByKey=function(e){return this.data.hiddenIssueKeys[e]||!1},r.prototype.isIssueHiddenBySearchByKeyOrCollapsedSubTask=function(e){if(this.isSubtask(e)){var t=this.getIssueData(e).parentKey;if(!this.isFakeParent(t)&&this.isCollapsed(t))return!0}return this.isIssueHiddenBySearchByKey()},r.prototype.updateIssue=function(e){return s.prepareExtraFields(e.extraFields),this.processFixVersion(e),!t.isUndefined(this.data.issueByKey[e.key])&&(this.data.issueByKey[e.key]=e,this.buildCache(),!0)},r.prototype.processFixVersion=function(e){this.fixVersions&&(e.fixVersionsUI=this.fixVersions.getVersionsForIds(e.fixVersions))},r.prototype.getNumVisibleIssues=function(){return this.getNumVisibleIssuesBeforeRankable(!1)},r.prototype.getNumVisibleIssuesBeforeRankable=function(e){var s,r=this;if(e!==!1){var i=this.indexOfRankable(e);if(i<0)return!1;s=r._first(r.data.order,i)}else s=r.data.order;var n=t.filter(s,function(e){return r.isIssueVisible(e)});return n.length},r.prototype.getAllIssues=function(){return this.data.issueByKey},r.prototype.getVisibleIssues=function(){var e={};return t.each(this.data.issueByKey,function(t,s){this.isIssueVisible(s)&&(e[s]=t)},this),e},r.prototype.getVisibleRankables=function(){var e=this;return this.data.order.filter(function(t){return!!e.isIssueValid(t)&&(!!e._isMarkerId(t)||e.getIssueIndex(t)!==-1)})},r.prototype.getVisibleIssueKeys=function(){return this.data.visibleIssueKeys},r.prototype.getHiddenBySearchIssues=function(){return this.data.hiddenIssueKeys},r.prototype.setHiddenBySearchIssues=function(e){this.data.hiddenIssueKeys=e},r.prototype.getIssueKeyAtIndex=function(e){var t=this.data.visibleIssueKeys;return t.length>e?t.get(e):t.last()},r.prototype.getFirstVisibleIssueKey=function(){for(var e=this.data.visibleIssueKeys,t=0;t<e.length;t++){var s=e.get(t);if(!this.isIssueHiddenBySearchByKey(s))return s}return!1},r.prototype.getLastVisibleIssueKey=function(){for(var e=this.data.visibleIssueKeys,t=e.length-1;t>0;t--){var s=e.get(t);if(!this.isIssueHiddenBySearchByKey(s))return s}return!1},r.prototype.getIssueIndex=function(e){return this.data.visibleIssueKeys.indexOf(e)},r.prototype.getIssueData=function(e){return this.data.issueByKey[e]},r.prototype.getIssueDataForId=function(e){return t.find(this.data.issueByKey,function(t){return t.id===e})||void 0},r.prototype.getIssueIdForKey=function(e){var t=this.getIssueData(e);if(t)return t.id},r.prototype.isIssueVisible=function(e){return this.getIssueIndex(e)!==-1&&!this.isIssueHiddenBySearchByKey(e)},r.prototype.isIssueValid=function(e){return t.isString(e)?!t.isUndefined(this.data.issueByKey[e]):t.any(this.data.issueByKey,function(t){return e==t.id})},r.prototype.areIssuesValid=function(e){if(0===e.length)return!1;var s=this;return t.all(e,function(e){return s.isIssueValid(e)})},r.prototype.getFirstRankableIssueKeyInColumn=function(e){var s;s=t.isArray(e)?e:t.isString(e)?[e]:[];for(var r=this.data.visibleIssueKeys,i=0,n=r.length;i<n;i++)if(t.indexOf(s,r.get(i))===-1)return r.get(i);return!1},r.prototype.getLastRankableIssueKeyInColumn=function(e){var s;s=t.isArray(e)?e:t.isString(e)?[e]:[];for(var r=this.data.visibleIssueKeys,i=r.length-1;i>=0;i--)if(t.indexOf(s,r.get(i))===-1)return r.get(i);return!1},r.prototype.getBestFitSelectionAfterRank=function(e){var t=this.getNextIssueKeyAfterRank(e);return t||(t=this.getPreviousIssueKeyAfterRank(e)),t},r.prototype.getNextIssueKeyAfterRank=function(e){var s=t.last(e);return this.getNextIssueKey(s)},r.prototype.getNextIssueKey=function(e){for(var t=this.getIssueIndex(e),s=this.data.visibleIssueKeys;++t<s.length;){var r=s.get(t);if(!this.isIssueHiddenBySearchByKeyOrCollapsedSubTask(r))return r}return!1},r.prototype.getPreviousIssueKeyAfterRank=function(e){var s=t.first(e);return this.getPreviousIssueKey(s)},r.prototype.getPreviousIssueKey=function(e){for(var t=this.getIssueIndex(e),s=this.data.visibleIssueKeys;--t>=0;){var r=s.get(t);if(!this.isIssueHiddenBySearchByKeyOrCollapsedSubTask(r))return r}return!1},r.prototype.getLastParentSubTask=function(e){var t=this.getSubtasks(e);return t[t.length-1]},r.prototype.getIssueRange=function(e,s){var r,i,n=[],a=this.data.visibleIssueKeys,o=this.getIssueIndex(e),u=this.getIssueIndex(s);if(t.isUndefined(o)||t.isUndefined(u))return n;if(o<u)for(r=o;r<=u;r++)i=a.get(r),this.isIssueHiddenBySearchByKey(i)||n.push(i);else for(r=o;u<=r;r--)i=a.get(r),this.isIssueHiddenBySearchByKey(i)||n.push(i);return n},r.prototype.canAddToSelection=function(e,s){var r=t.filter(e,function(e){return this.getIssueIndex(e)!==-1},this);return!(e.length>0&&r.length!=e.length)&&this.isIssueVisible(s)},r.prototype.removeIssues=function(e){var s=this;e="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:[e];var r=[];return t.each(e,function(e){var i=s.data.issueByKey[e];i&&(r.push(i),delete s.data.issueByKey[e],s.data.order=t.without(s.data.order,e))}),this.buildCache(),r},r.prototype.getLastVisibleKeyBefore=function(e){if(void 0!==e){for(var t,s=0;s<this.data.order.length;s++){var r=this.data.order[s];if(!this._isMarkerId(r)&&this.isIssueVisible(r)&&(t=r),r===e)break}return t}},r.prototype.getOrder=function(){return this.data.order},r.prototype.setOrder=function(e){this.data.order=e,this.buildCache()},r.prototype.applySearchFilter=function(e){var t=this,s=!1;return t.data.visibleIssueKeys.forEach(function(r){var i=t.data.issueByKey[r],n=t.data.hiddenIssueKeys[r]||!1,a=!e(i);s=s||n!==a,a?t.data.hiddenIssueKeys[r]=!0:delete t.data.hiddenIssueKeys[r]}),s},r.prototype.areIssuesBetweenMarkers=function(e,s,r){var i=this.getIssuesBetweenMarkers(s,r),n=!0;return t.forEach(e,function(e){t.contains(i,e)||(n=!1)}),n},r.prototype.getIssuesBetweenMarkers=function(e,t){var s=this.indexOfRankable(e),r=this.indexOfRankable(t);if(s>r){var i=r;r=s,s=i}return this.getOrder().slice(s+1,r)},r.prototype.getMarkerIdBeforeId=function(e){this._isMarkerId(e)&&(e=r.getOrderKeyForMarkerId(e));var s=this.data.orderByKey[e];if(t.isUndefined(s))return!1;for(var i=s-1;i>=0;i--)if(this._isMarkerId(this.data.order[i]))return this.data.order[i];return!1},r.prototype.getLastMarkerId=function(){for(var e=!1,t=this.data.order,s=t.length,r=s-1;r>=0;r--){var i=t[r];if(this._isMarkerId(i)){e=i;break}}return e},r.prototype.getMarkerIds=function(){var e=[];return t.each(this.data.order,function(t){this._isMarkerId(t)&&e.push(t)},this),e},r.prototype.withoutArray=function(e,s){var r=e;return t.each(s,function(e){r=t.without(r,e)}),r},r.prototype._first=function(e,s){return s=parseInt(s,10),0===s?[]:t.first(e,s)},r.prototype.getIssueCount=function(){var e=0;return t.each(this.data.issueByKey,function(t){e++}),e},r.prototype.getAllInvisibleIssuesData=function(){var e=this.data.order;return this._getInvisibleIssuesDataForKeys(e)},r.prototype.getAllVisibleIssuesData=function(){var e=this.data.order;return this._getVisibleIssuesDataForKeys(e)},r.prototype.getVisibleIssuesDataBeforeIncludingKey=function(e){var t=this.indexOfRankable(e);if(t<0)return[];var s=this.data.order.slice(0,t+1);return this._getVisibleIssuesDataForKeys(s)},r.prototype.getVisibleIssuesDataAfterKey=function(e){var t=this.indexOfRankable(e);if(t<0)return[];var s=this.data.order.slice(t+1);return this._getVisibleIssuesDataForKeys(s)},r.prototype.getSubtasks=function(e){return t.filter(this.data.issueByKey,function(t){return t.parentId===e||t.parentKey===e})},r.prototype.hasSubTasks=function(e){return this.getSubtasks(e).length>0},r.prototype.getIssuesExcludingSubtasks=function(){return t.filter(this.data.issueByKey,function(e){return t.isUndefined(e.parentId)})},r.prototype._getVisibleIssuesDataForKeys=function(e){var s=[];return t.each(e,function(e){if(this.isIssueVisible(e)){var t=this.getIssueData(e);s.push(t)}},this),s},r.prototype._getInvisibleIssuesDataForKeys=function(e){var s=[];return t.each(e,function(e){var t=this.getIssueData(e);(t.hidden||this.isIssueHiddenBySearchByKey(e))&&s.push(t)},this),s},r.prototype.isCollapsed=function(e){return!this.getExpandedIssueKeys().includes(e)},r.prototype.isFakeParent=function(e){return!this.data.issueByKey[e]},r.prototype.getExpandedIssueKeys=function(){var e=this;return GH.RapidBoard.State.getExpandedIssueKeys().filter(function(t){return e.data.issueByKey[t]})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueMoveController.js' */
define("jira-agile/rapid/ui/plan/issue-move-controller",["require"],function(t){"use strict";var r=t("underscore"),n=t("jquery"),e=t("jira-agile/rapid/global-events"),i=t("jira-agile/rapid/ui/plan/backlog-model"),a=t("jira-agile/rapid/ui/plan/backlog-statistics"),u=t("jira-agile/rapid/ui/plan/sprint-model"),s=void 0;e.on("pre-initialization",function(){s=t("jira-agile/rapid/ui/plan/backlog-controller")});var o={};return o.confirmMove=function(t){var r=n.Deferred(),e=o.isMoveFromActiveSprints(t),i=o.isAddToActiveSprint(t);return e?GH.RemoveIssuesFromSprintDialog.constructDialog(t,r):i?GH.AddIssuesToActiveSprintDialog.showDialog(t,r):r.resolve(t),r},o.calculateIssueMoveModel=function(t,n){var e=null,o=null,c=!1,p=!1;r.each(i.getAllModels(),function(r){var i=u.isSprintModel(r);r.getIssueList().areIssuesValid(t)&&(e=r,c=i),n&&i&&r.getSprintId()===n?(o=r,p=!0):n||i||(o=r,p=!1)});var l=c&&!e.isFutureSprint()&&(!p||o.isFutureSprint()),g=[],S=[];if(l){var d=[],v=e.getIssueList();r.each(t,function(t){var r=v.getIssueData(t);r&&d.push(r)});var f=s.rapidViewConfig.columns,m=a.splitIssuesIntoNotDoneAndDone(d,f);g=r.map(m.notDone,function(t){return t.key}),S=r.map(m.done,function(t){return t.key})}else g=t;return{changes:[{currentSprint:c?e.getSprintData():null,targetSprint:p?o.getSprintData():null,issueKeys:g,doneIssueKeys:S}]}},o.isMoveBetweenActiveSprints=function(t){return r.some(t.changes,function(t){var r=t.currentSprint&&"FUTURE"!=t.currentSprint.state,n=t.targetSprint&&"FUTURE"!=t.targetSprint.state;return r&&n})},o.isMoveFromActiveSprints=function(t){return r.some(t.changes,function(t){var r=t.currentSprint&&"FUTURE"!=t.currentSprint.state,n=t.currentSprint&&t.targetSprint&&t.currentSprint.id===t.targetSprint.id;return r&&!n})},o.isOnlyRankOperation=function(t){return r.some(t.changes,function(t){var r=t.currentSprint&&t.targetSprint&&t.currentSprint.id===t.targetSprint.id,n=!t.currentSprint&&!t.targetSprint;return r||n})},o.isRankBetweenFutureAndBacklog=function(t){return r.some(t.changes,function(t){var r=!t.currentSprint||"FUTURE"===t.currentSprint.state,n=!t.targetSprint||"FUTURE"===t.targetSprint.state;return r&&n})},o.isMoveToBacklog=function(t){return r.some(t.changes,function(t){var r=!!t.currentSprint&&t.currentSprint.id!==i.BACKLOG_ID,n=!t.targetSprint||t.targetSprint.id===i.BACKLOG_ID;return r&&n})},o.isAddToActiveSprint=function(t){return r.some(t.changes,function(t){var r=t.targetSprint&&"FUTURE"!==t.targetSprint.state,n=!t.currentSprint||!t.targetSprint||t.currentSprint.id!==t.targetSprint.id;return n&&r})},o.getAllIssueKeys=function(t){var n=[];return r.each(t.changes,function(t){n.push(t.issueKeys),n.push(t.doneIssueKeys)}),r.flatten(n,!0)},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanInlineDialog.js' */
function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(e,i,t){return i&&n(e.prototype,i),t&&n(e,t),e}}();define("jira-agile/rapid/ui/kanplan/KanPlanInlineDialog",["jquery","jira-agile/rapid/events"],function(n,e){"use strict";var i=function(){function i(){_classCallCheck(this,i),new e(this)}return _createClass(i,[{key:"getInlineDialogAnchor",value:function(){return this.inlineDialogContainer}},{key:"setInlineDialogAnchor",value:function(n){this.inlineDialogContainer=n}},{key:"getInlineDialog",value:function(){return this.dialog}},{key:"render",value:function(){var e=this;this.isRendered||(this.dialog=new AJS.HelpTip({title:"Kanban backlog",bodyHtml:"This column is getting full. Want an easier way to manage it?",anchor:n(document.body),showCloseButton:!0,closeButtonText:"Not now",showNextButton:!0,nextButtonText:"Tell me more",callbacks:{init:function(){e.trigger("dialog:init"),e.initEvents()}}}),this.dialog.show=function(){this.view.show()},this.isRendered=!0)}},{key:"getInlineDialogDomElement",value:function(){return this.getInlineDialog().view.$el}},{key:"initEvents",value:function(){var n=this,e=this.getInlineDialogDomElement(),i=function(){n.trigger("moreButton:click")};e.find(".helptip-next").off("click",i).on("click",i);var t=function(){n.trigger("closeButton:click")};e.find(".helptip-close").off("click",t).on("click",t),e.addClass("js-kanplan-enable-inline-dialog")}},{key:"show",value:function(){this.render();var n=this.getInlineDialogAnchor();this.getInlineDialog().view.changeAnchor(n),this.getInlineDialog().show()}},{key:"hide",value:function(){this.getInlineDialog()&&this.getInlineDialog().hide()}}]),i}();return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanInlineDialogController.js' */
function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,i,a){return i&&n(e.prototype,i),a&&n(e,a),e}}();define("jira-agile/rapid/ui/kanplan/KanPlanInlineDialogController",["jira-agile/rapid/ui/kanplan/KanPlanInlineDialog","jira-agile/rapid/ui/kanplan/KanPlanConvertDialog","jira-agile/rapid/events","jira-agile/rapid/analytics-tracker"],function(n,e,i,a){"use strict";function t(n){r.trigger(n,"issueCount",l)}var l,r=new a("jira-software.kanplan.enable-prompt"),o=new n,s="ghx.kanplan.inlineDialog.dismissed",u=20,c=3,g=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"init",value:function(){o.on("moreButton:click",function(){n.trigger(n.CONTINUE_EVENT),t("tellmemore")}),o.on("closeButton:click",function(){n.markAsDismissed(),t("notnow")})}},{key:"changeVisibility",value:function(e){o.setInlineDialogAnchor(GH.WorkView.getFirstColumnHeader().find("h2")),n.isVisible(e)&&(o.show(),t("show"))}},{key:"hide",value:function(){o.hide()}},{key:"isVisible",value:function(n){return!(!GH.RapidBoard.State.isKanbanBoard()||GH.RapidViewConfig.kanPlanEnabled)&&(!(!GH.UserData.userConfig.isGlobalAdmin&&!GH.RapidViewConfig.isBoardAdmin)&&(!GH.BoardState.getPerViewValue(s)&&(!(n.getColumns().length<c)&&(l=n.getColumnIssueCount(n.getFirstColumn().id),!(l<u)))))}},{key:"markAsDismissed",value:function(){GH.BoardState.setPerViewValue(s,!0)}}]),n}();return g.CONTINUE_EVENT="kanplan.inlineDialog.continue.event",new i(g)});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/kanplan/KanPlanOnboardingController.js' */
function _classCallCheck(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,a){for(var i=0;i<a.length;i++){var e=a[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(a,i,e){return i&&n(a.prototype,i),e&&n(a,e),a}}();define("jira-agile/rapid/ui/kanplan/KanPlanOnboardingController",["jira-agile/rapid/events","jira-agile/rapid/analytics-tracker","jira-agile/rapid/ui/kanplan/KanPlanInlineDialogController","jira-agile/rapid/ui/kanplan/KanPlanConvertDialog"],function(n,a,i,e){var t=void 0,r=void 0,l=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"init",value:function(){r=GH.RapidBoard.State.getRapidViewId(),i.init(),i.on(i.CONTINUE_EVENT,function(){t.show()},this),t=new e,t.on(e.CONVERT_SUCCESS,function(){i.markAsDismissed(),AJS.reloadViaWindowLocation()},this)}},{key:"update",value:function(n){t&&(t.setRapidViewId(r),t.setColumnName(n.getFirstColumn().name),i.changeVisibility(n))}},{key:"hide",value:function(){i.hide()}}]),n}();return l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogController.js' */
define("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-controller",["require"],function(e){"use strict";var a=e("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-dialog"),i=e("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-service"),o=e("jira-agile/rapid/ui/plan/plan-controller"),r={},s="jira-software.agility.backlog-issue-move.";return r.showDialog=function(e){i.shouldShow(e).done(function(i){i.value&&i.value.ask&&(a.render(e,r.handleConfirmMoveIssues,r.handleDoNotMoveIssues),AJS.trigger("analyticsEvent",{name:s+"show"}))})},r.handleConfirmMoveIssues=function(e){AJS.trigger("analyticsEvent",{name:s+"execute"}),a.hide(),i.moveIssues(e).done(function(){AJS.trigger("analyticsEvent",{name:s+"execute.success"}),i.setBoardEntityPropertyAsHasAlreadyPromptedUser(e),o.reload(),console.error("should have reloaded plan mode")}).fail(function(){AJS.trigger("analyticsEvent",{name:s+"execute.failure"})})},r.handleDoNotMoveIssues=function(e){AJS.trigger("analyticsEvent",{name:s+"cancel"}),a.hide(),i.setBoardEntityPropertyAsHasAlreadyPromptedUser(e)},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogService.js' */
define("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-service",["require"],function(r){"use strict";var t={};return t.shouldShow=function(r){return GH.Ajax.get({bareUrl:GH.Ajax.buildBareRestUrl(AJS.format("{0}/board/{1}/properties/jsw-spb-first-column-migration",GH.Ajax.PUBLIC_REST_URL_BASE,r.toString())),deferErrorHandling:!0},"jswSpbFirstColumnMigration")},t.moveIssues=function(r){return GH.Ajax.put({url:"/xboard/migrateFirstColumnToBacklog",data:{rapidViewId:r}})},t.setBoardEntityPropertyAsHasAlreadyPromptedUser=function(r){return GH.Ajax.del({bareUrl:GH.Ajax.buildBareRestUrl(AJS.format("{0}/board/{1}/properties/jsw-spb-first-column-migration",GH.Ajax.PUBLIC_REST_URL_BASE,r.toString()))})},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogDialog.js' */
define("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-dialog",["require"],function(i){"use strict";var e=i("jquery"),o="move-issues-to-agility-backlog-dialog",n=void 0,a={addActiveClass:!1,fadeTime:0,noBind:!0,cacheContent:!0,persistent:!0},t={};return t.render=function(i,t,l){var s=e(".agility-backlog .js-sprint-container .ghx-name")[0];n=GH.SideInlineDialog.create(o,s,function(e,o,n){e.html(GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent()).addClass("ghx-inline-dialog"),e.find("#agility-backlog-dialog-moveissues-button-confirm").click(function(){t(i)}),e.find("#agility-backlog-dialog-moveissues-button-cancel").click(function(){l(i)}),n()},a),n.show()},t.hide=function(){n&&n.hide()},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogDialog.soy' */
// This file was automatically generated from MoveIssuesToAgilityBacklogDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog == 'undefined') { GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog = {}; }


GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container" id="ghx-agility-move-issues-to-backlog-dialog"><h5>' + soy.$$escapeHtml('Fill your backlog with to-do\x27s') + '</h5><p>' + soy.$$escapeHtml('Want to move all issues in your board\x27s first column to the backlog?') + '</p><div class="ghx-agility-move-issues-to-backlog-dialog-buttons">' + aui.buttons.button({id: 'agility-backlog-dialog-moveissues-button-confirm', text: 'Move', type: 'primary'}) + aui.buttons.button({id: 'agility-backlog-dialog-moveissues-button-cancel', text: 'No thanks', type: 'subtle'}) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent.soyTemplateName = 'GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/bento/bento-issue-api.js' */
!function(){var n=void 0,i=new Promise(function(i){n=i});i.done=function(n){return this.then(n)},define("jira-agile/rapid/ui/bento/bridge",function(){return function(i){n(i)}}),define("jira-agile/rapid/ui/bento/api",function(){return i})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/bento/bento-features.js' */
define("jira-agile/rapid/ui/bento/bento-features",["jira/featureflags/feature-manager","jira-agile/features/feature-flags"],function(e,a){"use strict";var n=function(){return"true"===AJS.$('meta[name="ghx-user-bento-enabled"]').attr("content")},t=function(){return n()},r=function(){var r=GH.RapidBoard.State.isScrumBoard()||GH.RapidBoard.State.isKanbanBoard();return r&&n()&&t()&&e.isFeatureEnabled(a.ISSUE_DETAILS_BOARD_SIDEBAR)},i=function(){return n()&&r()&&"sidebar"===GH.BoardState.getGlobalValue("ghx-issue-fragment-view-mode")},u=function(){return n()&&r()&&"modal"===GH.BoardState.getGlobalValue("ghx-issue-fragment-view-mode")},o=function(){return e.isFeatureEnabled(a.BENTO_ISSUE_DETAILS_KEYBOARD_SHORTCUTS)},s=function(){return e.isFeatureEnabled(a.ISSUE_DETAILS_SPRINT_AS_LINK)};return{isBentoEnabled:n,isBentoInBacklogEnabled:t,isBentoSidebarOnBoardEnabled:r,isUsingBentoSidebarOnBoard:i,isUsingBentoModalOnBoard:u,isIssueDetailsKeyboardShortcutsEnabled:o,isIssueDetailsSprintAsLinkEnabled:s}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkDataCacheService.js' */
define("jira-agile/rapid/ui/work/work-data-cache-service",["require"],function(){"use strict";var e=require("jira-agile/rapid/ajax"),r=require("jira/featureflags/feature-manager"),a=require("jira-agile/features/feature-flags"),t=1440,i=60*t*1e3,n={};GH.RapidBoard.State.isWorkRenderImprovementEnabled()||GH.WorkController.on("after:render",function(e){setTimeout(function(){n.storeData(e)},0)}),n.storeData=function(e){if(e.issuesData){var r=e.rapidViewId;e.createdTime=(new Date).getTime();var a=u(r),i=LZString.compressToUTF16(JSON.stringify(e));lscache.flushExpired(),lscache.set(a,i,t)&&n._submitWorkEtag(r,e.etagData.etag)}},n.getData=function(e){if(!r.isFeatureEnabled(a.WORK_MODE_DATA_CACHE))return null;var t=u(e);try{var i=LZString.decompressFromUTF16(lscache.get(t)),s=JSON.parse(i);return n._isDataExpired(s)?null:s}catch(o){return null}},n._isDataExpired=function(e){var r=(new Date).getTime();return r-e.createdTime>=i},n._submitWorkEtag=function(r,a){return e.put({url:"/userData/workEtag/"+r+"?etag="+a})};var u=function(e){var r=GH.UserData.getUserName();return"gh.work.data."+r+"."+e};return n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkController.js' */
function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,o=Array(e.length);r<e.length;r++)o[r]=e[r];return o}return Array.from(e)}var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e};!function(){"use strict";function e(e,r){if(GH.WorkDataLoader.markDirty(),GH.WorkDataLoader.clearEtag(),e&&4!==e.readyState){if("timeout"===e.statusText)return void GH.Notification.showError(null,AJS.format("We\'\'re trying to move your {0,choice,1#issue|1\u003cissues}, but the server isn\'\'t talking to us. Please refresh the page and try again.",r.length));GH.Notification.showError(null,"We\'re having trouble moving issues right now. Check your network connection, refresh the page and try again.")}GH.WorkController.reload()}function r(){return GH.WorkView.detailViewOpen&&GH.DetailsView.hasEditsInProgress()}function o(){var e=s().map(function(e){var r=e.id;return r}),r=GH.WorkController.activeFilters.assigneeList,o=r.filter(function(r){return e.includes(r)});return o.length===r.length?{isValid:!0,newAssigneeList:o}:{isValid:!1,newAssigneeList:o}}function t(){var e=GH.WorkController.rapidViewData.id,r=!0,o=GH.WorkDataLoader.getData(e);o.done(function(e){n(e.issuesData.issues)}),GH.WorkController.unsubscribeQuickFilterUpdate&&GH.WorkController.unsubscribeQuickFilterUpdate(),GH.WorkController.unsubscribeQuickFilterUpdate=GH.bridge.FilterBridge.on("update",function(e){var o=GH.WorkControls.getActiveQuickFilterIds();GH.WorkController.activeFilters=Object.assign({},e,{searchText:e.searchText.trim()}),GH.WorkControls.setActiveQuickFilterIds(e.quickFilterList),GH.RapidBoard.State.pushState(),o.length===e.quickFilterList.length&&r?GH.WorkController.initialData&&GH.WorkController.setPoolData(GH.WorkController.initialData):(GH.WorkController.reload(),r=!0),!GH.RapidBoard.State.isKanbanBoard()&&e.selectedSprint&&GH.RapidBoard.WorkSubnavigatorContextProvider.selectedItem()!==e.selectedSprint&&GH.RapidBoard.WorkSubnavigatorContextProvider.selectionHandler(e.selectedSprint)}),GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_ISSUE_DATA_RELOADED,function(){r=!1,a()}),GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_ISSUE_CREATED,function(){r=!1,a()}),GH.WorkRanking.on(GH.WorkRanking.events.RANK_CHANGE,function(){r=!1}),GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_ALL_FILTERS_CLEARING,function(){GH.bridge.FilterBridge.clearFilters()})}function i(){var e=GH.RapidBoard.WorkSubnavigatorContextProvider.selectedItem(),r=GH.RapidBoard.WorkSubnavigatorContextProvider.itemList().reduce(function(e,r){return e.concat(r)},[]).map(function(r){return{id:r.id,name:r.label,isActive:r.id===e}});GH.bridge.FilterBridge.loadSprintPicker(r)}function n(){I.isGlobalSidebarEnabled()&&GH.bridge.FilterBridge.reset(),a()}function a(){var e=GH.WorkControls.quickfilters.getQuickFilters().map(function(e){return _extends({},e,{id:parseInt(e.id,10)})});GH.bridge.FilterBridge.loadQuickFilterList(e),d(),I.isGlobalSidebarEnabled()&&(I.isStickyQuickfilterFixEnabled()&&u(),GH.WorkController.isSprintSupportEnabled()&&i())}function l(){var e=GH.GridDataController.getModel();return Object.values(e.getIssues())}function s(){var e=GH.WorkController.activeFilters,r=l(),o=r.map(function(r){var o=r.assignee||A;return{id:o,name:r.assigneeName||"Unassigned",avatarUrl:r.avatarUrl,isActive:!!e.assigneeList&&e.assigneeList.indexOf(o)>-1}}).reduce(function(e,r){return e.find(function(e){return r.id===e.id})?e:e.concat(r)},[]);return o}function d(){var e=s();GH.bridge.FilterBridge.loadAssigneeList(e)}function u(){var e=GH.WorkController.activeFilters;e.searchText&&GH.bridge.FilterBridge.loadSearchText(e.searchText)}function G(e,r){return e&&e.search(new RegExp(r,"i"))>-1}var H=require("jira/analytics/web-client"),c=require("jira-agile/rapid/analytics-tracker"),k=require("jira-agile/rapid/const/PageMode"),C=require("jira-agile/rapid/work/quick-filters-bridge"),p=require("jira-agile/rapid/ui/kanplan/KanPlanOnboardingController"),W=require("jira-agile/rapid/global-events"),g=require("jira-agile/features/feature-flags"),f=require("jira-agile/rapid/configuration/ConfigContextLoader"),S=require("jira/util/logger"),D=require("jira/featureflags/feature-manager"),I=require("jira/featureflags/simplified-ux-feature-manager"),w=require("jira-agile/rapid/ui/bento/api"),E=require("jira-agile/rapid/ui/bento/bento-features"),h=require("underscore"),b=require("jquery"),V=void 0,v=void 0,m=void 0;W.on("pre-initialization",function(){v=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"),m=require("jira-agile/rapid/ui/work/work-transition-service"),V=require("jira-agile/rapid/ui/work/work-data-cache-service")});var R=30;GH.WorkController=new GH.Events,GH.WorkController.viewData=void 0,GH.WorkController.activeFilters={},GH.WorkController.initialData=null,GH.WorkController.currentViewConfig={},GH.WorkController.isVisible=!1,GH.WorkController.unsubscribeQuickFilterUpdate=null,GH.WorkController.CALLBACK_POOL_RENDERED="gh.work.pool.rendered",GH.WorkController.CALLBACK_POOL_LOADED="gh.work.pool.loaded",GH.WorkController.EVENT_NAMES={ON_PLAN_MODE:"OnPlanMode",ON_ALL_FILTERS_CLEARING:"OnAllFiltersClearing",ON_RELOAD_EMPTY_STATE_VIEW:"OnReloadEmptyStateMessage",ON_ISSUE_DATA_RELOADED:Symbol("ON_ISSUE_DATA_RELOADED"),ON_ISSUE_CREATED:Symbol("ON_ISSUE_CREATED")},GH.WorkController.TRANSITION="transition",GH.WorkController.QUICK_EDIT="quickEdit",GH.WorkController.FIX_VERSIONS_FIELD_ID="fixVersions",GH.WorkController.analytics=new c("gh.workmode");var A="UNASSIGNED_USER_ID",T=function(e){h.delay(function(){function r(){return I.isGlobalSidebarEnabled()&&D.isFeatureEnabled("compass-initialize-rapidboard-after-sidebar-has-loaded")}GH.SwimlaneView.columnWidthChanged(),GH.WorkView.updateDetailViewVisibilityAndSize(),GH.WorkController.ensureSelectionExpanded(),GH.WorkController.updateBoardState(e),GH.CallbackManager.executeCallbacks(GH.WorkController.CALLBACK_POOL_RENDERED),GH.WorkDragAndDrop.initDraggables(b("#ghx-pool")),GH.RapidBoard.ViewController.updateContentContainer(),GH.WorkView.scrollIssueToView(),D.isFeatureEnabled(g.WORK_MODE_DATA_CACHE)&&e&&(r()?JIRA.API.getSidebar().then(function(){V.storeData(e)}):V.storeData(e))})};GH.WorkController.init=h.once(function(){GH.WorkControls.init(),GH.WorkKBNavigation.init(),GH.WorkView.init(),GH.SwimlaneView.init(),GH.WorkSelectionController.init(),GH.WorkDragAndDrop.init(),GH.VersionController.init(),b(GH).bind("issueSelected",GH.WorkController.handleIssueSelectionEvent),b(GH.WorkControls.quickfilters).bind("quickFilterChange",function(){GH.WorkController.isVisible&&GH.WorkController.reload()}),b(GH.WorkControls.sprintfilters).bind("sprintFilterChange",function(){GH.WorkController.isVisible&&GH.WorkController.reload()}),b("#ghx-issue-fragment").on("close",function(){var e=!0;GH.WorkController.isIssueModalPopupEnabled()&&(GH.RapidBoard.State.setWorkIssueModalOpened(!1),GH.RapidBoard.State.pushState()),GH.WorkController.checkForUpdates(e)}),E.isIssueDetailsSprintAsLinkEnabled()&&b("#ghx-issue-fragment").on("refresh-sprints-on-board",function(e,r){GH.WorkControls.setActiveSprintFilterIds(r.sprintIds),GH.WorkController.reload(),GH.RapidBoard.State.pushState()}),b(GH).bind("issueCreated",GH.WorkController.handleIssueCreatedEvent),b(GH).bind("issueUpdated",GH.WorkController.handleIssueUpdatedEvent),E.isBentoSidebarOnBoardEnabled()&&b("#ghx-issue-fragment").on("issue-updated",function(e,r){var o={type:"issueUpdated"},t={issueKey:r.issueKey,fieldId:r.fieldId,source:"detailView"};GH.WorkController.handleIssueUpdatedEvent(o,t)}),b(GH).bind("issuesRemovedFromSprint",GH.WorkController.handleIssuesRemovedFromSprint),b(GH).bind("workModeUIReady",function(){m.checkForUpdates()}),p.init(),GH.RapidBoard.State.isWorkRenderImprovementEnabled()&&GH.WorkController.on("after:render",function(e){D.isFeatureEnabled(g.DEFER_FILTERS_AND_HANDLERS)?(JIRA.API.getSidebar().then(function(){T(e)}),require("jira/navigation").then(function(){T(e)})):T(e)})}),GH.WorkController.setRapidView=function(e){GH.WorkController.rapidViewData=e,GH.SwimlaneView.setRapidView(GH.WorkController.rapidViewData)},GH.WorkController.isSprintSupportEnabled=function(){return GH.WorkController.rapidViewData.sprintSupportEnabled};var O=function(){D.isFeatureEnabled(g.DEFER_FILTERS_AND_HANDLERS)?(JIRA.API.getSidebar().then(function(){return C.isReactFiltersEnabled().then(function(e){e&&setTimeout(t,0)})}),require("jira/navigation").then(function(){return C.isReactFiltersEnabled().then(function(e){e&&setTimeout(t,0)})})):C.isReactFiltersEnabled().then(function(e){e&&t()})};GH.WorkController.show=function(){if(GH.WorkController.rapidViewData)return GH.WorkController.isVisible=!0,GH.WorkView.show(),GH.DetailsView.setRapidViewId(GH.WorkController.rapidViewData.id),GH.WorkController.loadRapidViewConfig().done(function(){y(),B(),O(),GH.WorkController.showIssueModalIfNeeded(),E.isUsingBentoSidebarOnBoard()&&GH.RapidBoard.State.isWorkMode()&&GH.RapidBoard.State.isDetailsViewOpened()&&AJS.$("#ghx-issue-fragment").trigger("detail-view-ready",GH.WorkSelectionController.getSelectedIssueKey())})},GH.WorkController.hide=function(){GH.Poller.removePoller("WorkPoller"),GH.SwimlaneView.hide(),GH.WorkView.hide(),GH.DetailsView.hide(),GH.WorkController.isVisible=!1,GH.WorkDataLoader.markDirty(),p.hide(),GH.WorkController.unsubscribeQuickFilterUpdate&&GH.WorkController.unsubscribeQuickFilterUpdate()},GH.WorkController.isActive=function(){return GH.WorkController.isVisible},GH.WorkController.loadRapidViewConfig=function(){var e=new b.Deferred,r=function(r){if(GH.WorkController.isVisible){GH.WorkController.currentViewConfig=r;var o=GH.WorkController.initializeWorkMode();o.done(function(){e.resolveWith(this)}),o.fail(function(){e.rejectWith(this)})}};return GH.RapidViewConfig.fetchConfiguration(GH.WorkController.rapidViewData.id).done(r),e.promise()},GH.WorkController.initializeWorkMode=function(){if(GH.WorkController.currentViewConfig.columns&&!(GH.WorkController.currentViewConfig.columns.length<0))return GH.WorkControls.setRapidViewConfig(GH.WorkController.currentViewConfig),GH.SwimlaneView.setRapidViewConfig(GH.WorkController.currentViewConfig),GH.DetailsView.setRapidViewConfig(GH.WorkController.currentViewConfig),GH.WorkControls.renderControls(),GH.WorkView.hideLoadingFilter(),GH.RapidBoard.State.isWorkRenderImprovementEnabled()||GH.RapidBoard.ViewController.updateContentContainer(),GH.WorkController.configureUI(),GH.WorkView.detailViewOpen&&(GH.DetailsView.preloadData(),GH.RapidBoard.State.isWorkRenderImprovementEnabled()&&GH.WorkController.openDetailsView(GH.DetailsView.getSelectedIssueKey())),GH.WorkController.loadPoolData().done(function(){m.preloadData()})},GH.WorkController.optimisticallyTransition=function(r,o,t,i,n){var a=GH.RapidBoard.State.getRapidViewId(),l={rapidViewId:a,issueKeys:r,targetColumn:n,selectedTransitionId:o},s=GH.WorkController.submitTransitionAndRank(l);return GH.WorkController.moveIssuesTo(r,i,n),s.done(function(){r.forEach(function(e){GH.WorkController.handleIssueUpdatedEvent({},{issueId:GH.GridDataController.getModel().getIssueIdForKey(e),source:GH.WorkController.TRANSITION})}),GH.Dialog.createParentCompletedCheckCallback(r[0])()}).fail(function(o,t){return e(t,r)})},GH.WorkController.moveIssuesTo=function(e,r,o){GH.GridDataController.getModel().moveIssuesToColumn(e,r,o),GH.WorkView.skipNextDetailViewUpdate(),GH.WorkController.updateUI()},GH.WorkController.submitTransitionAndRank=function(e){return GH.Ajax.put({url:"/xboard/transitionAndRank",data:e,timeout:1e3*R})},GH.WorkController._rollbackOnFailure=e,GH.WorkController.preload=function(e){return GH.WorkDataLoader.getData(e)},GH.WorkController.reload=function(){return GH.WorkDataLoader.markDirty(),GH.Notification.clearBoardUpdatedMessage(),GH.WorkController.loadPoolData()},GH.WorkController.loadPoolData=function(){GH.WorkView.showLoadingPool();var e=GH.WorkController.rapidViewData.id,r=GH.WorkDataLoader.getData(e);return r.done(function(e){GH.WorkController.setPoolData(e),w.done(function(r){if(r&&r.fetchIssues&&e&&e.issuesData&&e.issuesData.issues){var o=e.issuesData.issues.filter(function(e){return!e.hidden}).map(function(e){var r=e.key;return r});o&&o.length>0&&r.fetchIssues(o)}})}),r.fail(GH.WorkController.handleInvalidSprint),r.fail(function(){GH.WorkView.hideLoadingPool()}),r},GH.WorkController.handleInvalidSprint=function(e,r,o){var t=e.error&&e.error.errors&&e.error.errors[0]&&e.error.errors[0].message;GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),t&&t==="Sprint does not exist"?GH.WorkControls.sprintfilters.validateActiveSprints():t&&t==="This board has no columns with a mapped status."?GH.WorkController.renderNoMappedColumnsMsg():GH.Ajax.handleGlobalErrors(e,r,o)},GH.WorkController.checkForUpdates=function(e){var o=GH.WorkController.rapidViewData.id,t=GH.WorkDataLoader.checkForUpdates(o);return t.done(function(o){e&&!r()?o===GH.WorkDataLoader.NEW_DATA_WITH_CHANGES?GH.WorkController.applyLoadedData():o===GH.WorkDataLoader.NEW_DATA_NO_CHANGE&&GH.WorkController.reloadDetailView():o===GH.WorkDataLoader.NEW_DATA_WITH_CHANGES&&GH.WorkController.showBoardUpdatedMessage()}),t.fail(function(e){var r=e.error.errors&&e.error.errors[0]&&e.error.errors[0].message;r&&r==="Sprint does not exist"&&GH.Notification.showWarnings("Sorry, either the sprint\'s been deleted, or you don\'t have permission to view it.",{autoHide:!1,preRendered:!0})}),t},GH.WorkController.showBoardUpdatedMessage=function(){GH.Notification.showBoardUpdatedMessage().done(function(){GH.WorkController.applyLoadedData()})},GH.WorkController.applyLoadedData=function(){var e=GH.WorkController.rapidViewData.id,r=GH.WorkDataLoader.getData(e);r.done(function(e){GH.WorkController.setPoolData(e),GH.Notification.clearBoardUpdatedMessage()})},GH.WorkController.hasDataChanged=function(e){return GH.GridDataController.hasDataChanged(e)},GH.WorkController.setPoolData=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(GH.WorkController.isVisible){var o=!1;e!==GH.WorkController.initialData&&(GH.WorkController.initialData=e,o=!0),D.isFeatureEnabled(g.DEFER_FILTERS_AND_HANDLERS)?(JIRA.API.getSidebar().then(function(){return setTimeout(function(){C.isReactFiltersEnabled().then(function(t){t&&(e.issuesData.issues=GH.WorkController.getFilteredIssues(e.issuesData.issues),r||setTimeout(function(){return GH.WorkController.setPoolData(e,!0)},0),o&&a())})},0)}),require("jira/navigation").then(function(){return setTimeout(function(){C.isReactFiltersEnabled().then(function(t){t&&(e.issuesData.issues=GH.WorkController.getFilteredIssues(e.issuesData.issues),r||setTimeout(function(){return GH.WorkController.setPoolData(e,!0)},0),o&&a())})},0)})):C.isReactFiltersEnabled().then(function(t){t&&(e.issuesData.issues=GH.WorkController.getFilteredIssues(e.issuesData.issues),r||GH.WorkController.setPoolData(e,!0),o&&a())}),GH.GridDataController.setData(e),GH.CallbackManager.executeCallbacks(GH.WorkController.CALLBACK_POOL_LOADED),GH.WorkController.setSprintData(e),e.sprintsData?GH.WorkControls.setSprintData(e.sprintsData.sprints,e.sprintsData.canManageSprints):GH.WorkControls.setSprintData([],!1),GH.VersionController.setProjects(e.issuesData.projects),GH.VersionController.setVersions(e.versionData),GH.WorkController.initializeSelection(),GH.RapidBoard.State.isWorkRenderImprovementEnabled()?GH.WorkController.updateUI(e):(GH.WorkController.ensureSelectionExpanded(),GH.WorkController.updateUI(),GH.WorkController.updateBoardState(e),GH.CallbackManager.executeCallbacks(GH.WorkController.CALLBACK_POOL_RENDERED),GH.WorkController.trigger("after:render",e)),f.prefetch(),S.trace("gh.rapid.view.rendered"),GH.Poller.addPoller("WorkPoller",GH.WorkController.checkForUpdates)}},GH.WorkController.updateBoardState=function(e){if(e&&e.versionData&&e.versionData.versionsPerProject&&e.issuesData&&e.issuesData.issues&&e.issuesData.projects){var r=Object.getOwnPropertyNames(e.versionData.versionsPerProject).map(function(r){return e.versionData.versionsPerProject[r].length}).reduce(function(e,r){return e+r},0),o=e.issuesData.issues.filter(function(e){return null!=e.parentId});GH.RapidBoard.State.numberOfIssues.set(e.issuesData.issues.length),GH.RapidBoard.State.numberOfSubtasks.set(o.length),GH.RapidBoard.State.numberOfProjects.set(e.issuesData.projects.length),GH.RapidBoard.State.numberOfVersions.set(r),GH.RapidBoard.State.numberOfEpics.reset()}},GH.WorkController.setSprintData=function(e){GH.WorkController.sprintData=e.sprintsData},GH.WorkController.initializeSelection=function(){GH.WorkKBNavigation.initCurrentPosition(),GH.WorkSelectionController.validateCurrentSelection()},GH.WorkController.ensureSelectionExpanded=function(){var e=GH.WorkSelectionController.getSelectedIssueKey();e&&GH.SwimlaneView.setSwimlaneCollapsedStateForIssueKey(e,!1)},GH.WorkController.updateUI=function(e){GH.WorkController.configureUI(),GH.WorkController.renderUI(),GH.RapidBoard.State.isWorkRenderImprovementEnabled()||GH.WorkView.scrollIssueToView(),b(GH).trigger("workModeUIReady"),GH.RapidBoard.State.isWorkRenderImprovementEnabled()&&GH.WorkController.trigger("after:render",e)},GH.WorkController.configureUI=function(){var e=GH.WorkSelectionController.getSelectedIssueKey(),r=GH.WorkController.isDetailsViewOpened();!e&&r&&(GH.RapidBoard.State.isWorkRenderImprovementEnabled()||GH.WorkController.setDetailViewOpenedState(!1),r=!1),GH.WorkView.configureUI(!!r&&e),GH.RapidBoard.State.isWorkRenderImprovementEnabled()&&GH.WorkController.setDetailViewOpenedState(r)},GH.WorkController.renderUI=function(){GH.RapidBoard.State.isNewIssueViewEnabled()&&!GH.DetailsView.opts.isUsingBentoSidebarOnBoard&&GH.WorkController.closeDetailsView(),GH.WorkController.renderModeTools(),GH.WorkControls.drawSprints(),GH.WorkView.renderPoolAndDetailView(),GH.RapidBoard.State.isWorkRenderImprovementEnabled()||GH.WorkView.scrollIssueToView();var e=GH.GridDataController.getModel();p.update(e),GH.WorkControls.updateSwimlaneOptions(e.hasSwimlanes()),GH.RapidBoard.State.isWorkRenderImprovementEnabled()||GH.RapidBoard.ViewController.updateContentContainer()},GH.WorkController.renderModeTools=function(){var e=require("jira-agile/rapid/ui/work/mode-tools-controller");e.render({hasUser:GH.UserData.hasUser(),workMode:GH.WorkController.isSprintSupportEnabled()?e.SPRINT:e.KANBAN})},GH.WorkController.setDetailViewOpenedState=function(e){GH.RapidBoard.State.setWorkViewDetailsViewOpened(e||!1),GH.RapidBoard.State.isWorkRenderImprovementEnabled()&&(e?b("#ghx-detail-view").css({display:""}):b("#ghx-detail-view").css({display:"none"}))},GH.WorkController.isDetailsViewOpened=function(){return!E.isBentoEnabled()||E.isUsingBentoSidebarOnBoard()?GH.RapidBoard.State.isDetailsViewOpened():GH.WorkView.isIssueModalOpened()},GH.WorkController.getStatisticField=function(){return GH.WorkController.currentViewConfig.statisticConfig.typeId},GH.WorkController.toggleDetailsView=function(e){if(!E.isBentoEnabled()||E.isUsingBentoSidebarOnBoard())if(GH.WorkController.isDetailsViewOpened())GH.WorkController.closeDetailsView();else{var r=GH.WorkSelectionController.getSelectedIssueKey();GH.WorkController.openDetailsView(r,e)}else GH.RapidBoard.State.isNewIssueViewEnabled()&&(GH.WorkView.isIssueModalOpened()?GH.WorkView.closeIssueModal():GH.WorkSelectionController.getSelectedIssueKey()&&GH.WorkView.displayIssueModal({},e))},GH.WorkController.openDetailsView=function(e,r){if((!GH.RapidBoard.State.isNewIssueViewEnabled()||GH.DetailsView.opts.isUsingBentoSidebarOnBoard)&&e){var o=GH.WorkSelectionController.getSelectedIssueKey(),t=!1;o&&o==e||(t=!0,GH.WorkSelectionController.selectIssue(e,{pushState:!1})),GH.WorkController.isDetailsViewOpened()?GH.WorkController.updateDetailViewIssue(e,r):(t=!0,GH.WorkController.setDetailViewOpenedState(!0),GH.WorkView.openOrCloseDetailView(e,r)),t&&GH.RapidBoard.State.pushState()}},GH.WorkController.closeDetailsView=function(){GH.DetailsView.hasCurrentError()||GH.WorkController.isDetailsViewOpened()&&(GH.WorkController.setDetailViewOpenedState(!1),GH.RapidBoard.State.pushState(),GH.WorkView.openOrCloseDetailView(!1))},GH.WorkController.reloadDetailView=function(e){!E.isBentoEnabled()&&GH.WorkController.isDetailsViewOpened()&&GH.DetailsView.reload(e)},GH.WorkController.updateDetailViewIssue=function(e,r){GH.WorkController.isDetailsViewOpened()&&(GH.DetailsView.setSelectedIssueKey(e),GH.DetailsView.show(null,r))},GH.WorkController.issueModalApi=function(){return w},GH.WorkController.isIssueModalPopupEnabled=function(){return D.isFeatureEnabled(g.AGILE_BOARD_ISSUE_DIALOG_ON_PAGE_LOAD)},GH.WorkController.showIssueModalIfNeeded=function(){if(GH.WorkController.isIssueModalPopupEnabled()&&GH.WorkSelectionController.getSelectedIssueKey()&&GH.RapidBoard.State.isNewIssueViewEnabled()&&!GH.WorkView.isIssueModalOpened()&&!GH.DetailsView.opts.isUsingBentoSidebarOnBoard){var e=GH.RapidBoard.UrlState.getCurrentUrlState().modal;"detail"===e&&w.done(function(){return GH.WorkView.displayIssueModal({loadedWithInitialPageLoad:!0})})}},GH.WorkController.toggleEpicsShowOnWorkboard=function(){GH.ViewActions.toggleEpicsShowOnRapidBoard(),GH.WorkController.updateUI(),AJS.trigger("analyticsEvent",{name:"jira-software.work.boardmenu.click."+(GH.RapidBoard.State.getEpicShownOnRapidBoard()?"show":"hide")+"-epic-lables"})},GH.WorkController.handleIssueSelectionEvent=function(e,r){var o=GH.WorkSelectionController.getSelectedIssueKey();GH.WorkController.isDetailsViewOpened()&&(o?GH.WorkController.updateDetailViewIssue(o):GH.WorkController.closeDetailsView())},GH.WorkController.resolveParentTask=function(e){GH.WorkController.isVisible&&GH.Ajax.get({url:"/xboard/issue/subtasksInFinalColumn.json",data:{issueId:e.id,rapidViewId:GH.WorkController.rapidViewData.id}},"subtaskCompletionCheck").done(function(r){GH.WorkController.loadTransitions(e,r)}).fail(GH.WorkView.hideLoadingPool)},GH.WorkController.loadTransitions=function(e,r){GH.WorkController.isVisible&&r.subtasksInFinalColumn&&GH.Ajax.get({url:"/xboard/issue/transitions.json",data:{issueId:e.id}},"loadTransitions").done(function(r){var o=GH.GridDataController.getModel(),t=h.last(o.data.columns);if(t){for(var i=[],n=0;n<r.transitions.length;n++)for(var a=0;a<t.statusIds.length;a++)t.statusIds[a]==r.transitions[n].targetStatus&&i.push(r.transitions[n]);GH.Dialogs.CompleteParentDialog.showDialog(e,i,t)}})},GH.WorkController.handleIssueUpdatedEvent=function(e,r){if(GH.WorkController.isVisible){var o=!1,t=!1,i=r.issueKey?GH.GridDataController.getModel().getIssueIdForKey(r.issueKey):parseInt(r.issueId,10);if(r.fieldChanges){GH.WorkDataLoader.markDirty();var n=r.fieldChanges[GH.SprintConfig.getSprintFieldId()];n&&n.original!=n.updated&&(o=!0),r.fieldId===GH.WorkController.FIX_VERSIONS_FIELD_ID&&(t=!0)}if(r.source!==GH.WorkController.QUICK_EDIT&&r.source!==GH.WorkController.TRANSITION||(GH.WorkDataLoader.markDirty(),t=!0),o)GH.WorkController.reload();else{if(GH.WorkController.loadIssue(i).done(function(){t&&GH.WorkController.updateVersionData()}),r.source===GH.WorkController.QUICK_EDIT){var a=GH.GridDataController.getModel().getIssueDataById(i);a&&a.parentId?GH.WorkController.reloadDetailView(v.SUBTASKS_CHANGED):GH.WorkController.reloadDetailView()}r.source===GH.WorkController.TRANSITION&&GH.WorkController.reloadDetailView(v.DETAILS_FIELD_CHANGED)}}},GH.WorkController.loadIssue=function(e){return GH.Ajax.get({url:"/xboard/work/issue.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),issueId:e}},"loadIssue."+e).done(function(e){var r=GH.GridDataController.getModel();r&&(GH.WorkController.sendTrackEventOnIssueLoaded(r.data.issues[e.key],e),r.updateIssueData(e),w.done(function(r){r&&r.updateIssueData&&r.updateIssueData(e)}),GH.WorkDragAndDrop.isIssueBeingDragged(e.key)||(GH.SwimlaneView.rerenderIssue(e.key),S.trace("gh.work.issue.updated"+e.key)),GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_ISSUE_DATA_RELOADED,e))})},GH.WorkController.sendTrackEventOnIssueLoaded=function(e,r){var o=[];if(e.status.id!=r.status.id&&o.push({name:"status",oldValId:e.status.id,newValId:r.status.id}),e.status.statusCategory.id!=r.status.statusCategory.id&&o.push({name:"statusCategory",oldValId:e.status.statusCategory.id,newValId:r.status.statusCategory.id,oldValName:e.status.statusCategory.key,newValName:r.status.statusCategory.key}),o.length>0){var t=GH.GridDataController.getModel().data.issues[e.key];GH.RapidBoard.sendIssueUpdatedTrackEvent(t,o)}},GH.WorkController.handleIssueCreatedEvent=function(e,r){GH.WorkController.isVisible&&setTimeout(function(){GH.WorkController.reloadAndSelectCreatedIssues(r)},0)},GH.WorkController.reloadAndSelectCreatedIssues=function(e){var r=e.issues,o=h.map(r,function(e){return e.issueKey}),t=GH.WorkController.reload(),i=GH.Ajax.get({url:"/xboard/issue/matchesBoard",data:{rapidViewId:GH.WorkController.rapidViewData.id,issueIdsOrKeys:o}}).andThen(function(e){return e.issueIdsOrKeys&&e.issueIdsOrKeys.length===o.length},function(){return b.Deferred().resolve(!1)});return b.when(t,i).done(function(r,t){GH.WorkController._issueCreatedCallback(o,e,t),GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_ISSUE_CREATED)})},GH.WorkController.updateVersionData=function(){if(!GH.WorkController.isVisible)return(new b.Deferred).resolve();var e={rapidViewId:GH.WorkController.rapidViewData.id};return GH.Ajax.get({url:"/xboard/work/versions",data:e}).done(function(e){GH.WorkController.isVisible&&GH.WorkController.setVersionData(e.versionData)})},GH.WorkController.setVersionData=function(e){GH.VersionController.setVersions(e),GH.WorkController.renderModeTools()},GH.WorkController._issueCreatedCallback=function(e,r,o){var t=[],i=GH.GridDataController.getModel();h.each(e,function(e){i.isIssueValid(e)&&t.push(e)});var n=E.isBentoEnabled()&&r.isSubtask;if(!n){var a=!1;h.isEmpty(t)||(a=h.last(t),GH.WorkSelectionController.selectIssue(a));var l=a&&GH.WorkSelectionController.isInSelection(a);if(!l){var s=h.extend({},GH.WorkController.sprintData,{issuesMatch:o});GH.RapidBoard.QuickCreate.showCreatedIssuesMessage(r,s),b(".js-add-new-issue-to-sprint").unbind("click"),b(".js-add-new-issue-to-sprint").click(GH.WorkController.addNewIssueToSprint)}}},GH.WorkController.addNewIssueToSprint=function(e){GH.WorkController.trigger("before:addNewIssueToSprint"),GH.Notification.clear(),GH.WorkController.analytics.trigger("addtosprintaftercreate");var r=b(e.target),o=r.attr("data-sprint-id"),t=r.attr("data-issue-keys").split(","),i=GH.GridDataController.getModel(),n=h.last(i.data.order);GH.RankController.sprintRankIssues(GH.RankingModel.getRankCustomFieldId(),t,o,null,n).done(function(e){var r=GH.WorkController.reload();r.done(function(){i=GH.GridDataController.getModel();var e=!1,r=!1;h.each(t,function(o){i.isIssueValid(o)?e=o:r=!0}),e&&GH.WorkSelectionController.selectIssue(e),r&&GH.Notification.showSuccess(AJS.format("Your {0,choice,1#issue has|1\u003cissues have} been added to the sprint but {0,choice,1#it is|1\u003cone or more are} not currently visible.",t.length),{timeout:1e4}),GH.WorkController.trigger("after:addNewIssueToSprint")})}).fail(function(){GH.WorkController.trigger("after:addNewIssueToSprint")})},GH.WorkController.handleIssuesRemovedFromSprint=function(e,r){GH.WorkController.isVisible&&GH.WorkController.reload()},GH.WorkController.changeModeToPlan=function(){GH.RapidBoard.ViewController.setMode(k.PLAN)},GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_PLAN_MODE,GH.WorkController.changeModeToPlan),GH.WorkController.clearAllFiltersAndReload=function(){var e=GH.WorkControls.quickfilters;e&&(e.clearFilters(),GH.RapidBoard.State.pushState()),GH.WorkController.reload()},GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_ALL_FILTERS_CLEARING,GH.WorkController.clearAllFiltersAndReload),GH.WorkController.renderNoMappedColumnsMsg=function(){var e=b(".ghx-no-active-sprint-message");if(!(e.length>0)){var r=b("#ghx-work");if(!(r.length<1)){var o=require("jira-agile/rapid/ui/work/ActiveSprintEmptyView"),t=GH.RapidBoard.State.getRapidViewId(),i=new o((!1),(!1),t,(!0),(!1),r);GH.RapidViewConfig.fetchConfiguration(t).done(function(e){GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,e.canEdit)}),i.handleNoMappedColumnsMode(),GH.WorkController.setActiveSprintEmptyMsg(i)}}},GH.WorkController.handleEmptyMessageInDashboard=function(){h.isUndefined(GH.WorkController.activeSprintEmptyMsg)||GH.WorkController.activeSprintEmptyMsg.handleOnDashboardMode()},GH.WorkController.setActiveSprintEmptyMsg=function(e){GH.WorkController.activeSprintEmptyMsg=e},GH.WorkController.collectPrintableIssues=function(){return{issues:GH.GridDataController.collectPrintableIssues(),viewMode:k.WORK,boardType:GH.WorkControls.getBoardType()}};var y=function(){var e=GH.GridDataController.getModel(),r=e.getIssues(),o=e.getSubtasks(),t=GH.RapidBoard.State.getBoardTypeForAnalytics(),i=E.isBentoEnabled()&&!E.isBentoSidebarOnBoardEnabled();H.sendScreenEvent("boardScreen",null,{boardType:t,isIssueDetailVisible:GH.WorkController.isDetailsViewOpened(),isModal:i,isNewIssueView:E.isBentoEnabled()}),AJS.trigger("analyticsEvent",{name:"jira-software.work.show",data:{boardId:GH.RapidViewConfig.currentData.id,boardType:GH.RapidBoard.State.getBoardType(),subtaskCount:o.length,standardIssueCount:h.size(r)-o.length}})},B=function(){var e=GH.RapidViewConfig.currentData.data,r=GH.GridDataController.model.data.swimlaneIssueMapping,o=Object.keys(r),t=o.filter(function(e){return r[e].length>0}),i=GH.GridDataController.model.data.columns.filter(function(e){return null!=e.max}),n=Object.values(GH.GridDataController.model.data.issues).length,a=Object.values(GH.GridDataController.model.data.issues).filter(function(e){return null!=e.parentId}),l=Object.values(GH.GridDataController.model.data.issues).filter(function(e){return 1==e.hidden});H.sendTrackEvent({containerType:e.locationType,objectType:"board",objectId:e.id,source:"boardScreen",actionSubject:"board",actionSubjectId:e.id,action:"viewed",attributes:{boardId:e.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),numIssues:n,numSubtasks:a.length,numColumns:e.columns.length,hasHorizontalScrollbar:!1,hasFilteredIssues:l.length>0,hasColumnLimits:i.length>0,hasSwimlanes:e.swimlanes.length>0,numSwimlanes:e.swimlanes.length,numVisibleSwimlanes:t.length}})};GH.WorkController.getFilteredIssues=function(e){var r=GH.WorkController.activeFilters,t=[].concat(_toConsumableArray(e));if(r){if(I.isStickyQuickfilterFixEnabled()){var i=o(),n=i.isValid,a=i.newAssigneeList;n||(GH.WorkController.activeFilters.assigneeList=a,GH.RapidBoard.State.replaceState())}if(r.assigneeList&&r.assigneeList.length>0){var l=r.assigneeList.includes(A);e=e.filter(function(e){return!(!l||e.assignee)||r.assigneeList.indexOf(e.assignee)!==-1})}r.issueTypeList&&r.issueTypeList.length>0&&(e=e.filter(function(e){return r.issueTypeList.indexOf(e.typeId)!==-1})),r.searchText&&r.searchText.length>0&&(e=e.filter(function(e){return G(e.assigneeName,r.searchText)||G(e.assignee,r.searchText)||G(e.summary,r.searchText)||G(e.key,r.searchText)||G(e.typeName,r.searchText)}));var s={};e.forEach(function(e){s[e.key]=!0}),t.forEach(function(e){e.hiddenByClientFilter&&(e.hidden=!1,e.hiddenByClientFilter=!1),e.hidden||s[e.key]||(e.hidden=!0,e.hiddenByClientFilter=!0)})}return t}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkController.soy' */
// This file was automatically generated from WorkController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.workcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.workcontroller == 'undefined') { GH.tpl.workcontroller = {}; }


GH.tpl.workcontroller.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-pool-column"><div id="ghx-pool" data-skate-ignore></div></div><div id="ghx-detail-view" class="ghx-detail-view"></div>';
};
if (goog.DEBUG) {
  GH.tpl.workcontroller.renderSkeleton.soyTemplateName = 'GH.tpl.workcontroller.renderSkeleton';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkDataLoader.js' */
!function(){GH.WorkDataLoader={},GH.WorkDataLoader.NEW_DATA_WITH_CHANGES="new data with changes",GH.WorkDataLoader.NEW_DATA_NO_CHANGE="new data no change",GH.WorkDataLoader.NO_DATA_CHANGE="no data change",GH.WorkDataLoader.currentData=void 0,GH.WorkDataLoader.loadingData=void 0;var a=require("jira-agile/rapid/board-data-loader"),r=require("jira-agile/rapid/const/PageMode"),t=require("underscore"),e=require("jira/featureflags/feature-manager"),o=require("jira-agile/features/feature-flags"),i=require("jira-agile/rapid/global-events"),d=void 0;i.on("pre-initialization",function(){d=require("jira-agile/rapid/ui/work/work-data-cache-service")}),GH.WorkDataLoader.getData=function(a){return GH.WorkDataLoader.getDataForViewId(a).promise},GH.WorkDataLoader.markDirty=function(){GH.WorkDataLoader.currentData&&(GH.WorkDataLoader.currentData.dirty=!0),GH.WorkDataLoader.loadingData&&(GH.WorkDataLoader.loadingData.dirty=!0)},GH.WorkDataLoader.clearEtag=function(){GH.WorkDataLoader.currentData&&GH.WorkDataLoader.currentData.data&&delete GH.WorkDataLoader.currentData.data.etagData.etag},GH.WorkDataLoader.getDataForViewId=function(a,r){if(!r&&GH.WorkDataLoader.isDataUpToDate(GH.WorkDataLoader.currentData,a))return GH.WorkDataLoader.currentData;if(GH.WorkDataLoader.isDataUpToDate(GH.WorkDataLoader.loadingData,a))return GH.WorkDataLoader.loadingData;var t=void 0===GH.WorkDataLoader.currentData,i=e.isFeatureEnabled(o.WORK_MODE_DATA_CACHE),D=GH.WorkDataLoader.currentData?GH.WorkDataLoader.currentData.data:d.getData(a),s=!!D&&D.etagData.etag,u=GH.WorkDataLoader.load(a,s),c=new AJS.$.Deferred;return u.requestPromise.done(function(r){var e=this;GH.WorkDataLoader.loadingData===u&&(GH.WorkDataLoader.currentData=GH.WorkDataLoader.loadingData,r.etagData.etag===s?(r=D,i&&t&&n(r,!0)):i&&t&&n(r,!1),GH.WorkDataLoader.currentData.data=r,GH.WorkDataLoader.loadingData=void 0,i&&!r.issuesData?GH.WorkDataLoader.load(a,null).requestPromise.done(function(a){GH.WorkDataLoader.currentData.data=a,c.resolveWith(e,[a])}):c.resolveWith(this,[r]))}),u.requestPromise.fail(c.reject),u.promise=c.promise(),GH.WorkDataLoader.loadingData=u,GH.WorkDataLoader.loadingData};var n=function(a,r){var t=!a.issuesData,e=t?0:a.issuesData.issues.length;AJS.trigger("analyticsEvent",{name:"jira-software.work.data.cache",data:{isHit:r,isInvalidData:t,issueCount:e}})};GH.WorkDataLoader.isLoadingData=function(){return GH.WorkDataLoader.loadingData&&"pending"===GH.WorkDataLoader.loadingData.promise.state()},GH.WorkDataLoader.checkForUpdates=function(a){var r=AJS.$.Deferred();if(GH.WorkDataLoader.isLoadingData())r.resolveWith(this,["ignore"]);else{var t=GH.WorkDataLoader.currentData.data.etagData.etag,e=GH.WorkDataLoader.getDataForViewId(a,!0);e.promise.done(function(a){a.etagData.etag===t?r.resolveWith(this,[GH.WorkDataLoader.NO_DATA_CHANGE]):GH.WorkController.hasDataChanged(a)?r.resolveWith(this,[GH.WorkDataLoader.NEW_DATA_WITH_CHANGES]):r.resolveWith(this,[GH.WorkDataLoader.NEW_DATA_NO_CHANGE])}),e.promise.fail(r.reject)}return r.promise()},GH.WorkDataLoader.isDataUpToDate=function(a,r){return!(!a||a.dirty)&&((!a.promise||!a.promise.isRejected())&&GH.WorkDataLoader.areRequestParamsUpToDate(a,r))},GH.WorkDataLoader.areRequestParamsUpToDate=function(a,r){var e=GH.WorkControls.getActiveQuickFilterIds(),o=GH.WorkControls.getActiveSprintIds();return a.viewId===r&&t.isEqual(a.activeQuickFilters,e)&&t.isEqual(a.activeSprints,o)},GH.WorkDataLoader.load=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={};i.viewId=t,i.activeQuickFilters=GH.WorkControls.getActiveQuickFilterIds().slice(),i.activeSprints=GH.WorkControls.getActiveSprintIds().slice();var d={rapidViewId:t,selectedProjectKey:GH.RapidBoard.projectKey};return e&&(d.etag=e),i.activeQuickFilters&&i.activeQuickFilters.length>0&&!o&&(d.activeQuickFilters=i.activeQuickFilters),i.activeSprints&&i.activeSprints.length>0&&(d.activeSprints=i.activeSprints),i.requestPromise=a.loadData(r.WORK,function(){return GH.WorkDataLoader.submitLoadAllDataRequest(i,d)}),i},GH.WorkDataLoader.submitLoadAllDataRequest=function(a,r){var t="/xboard/work/allData.json";return GH.Ajax.get({url:t,data:r,deferErrorHandling:!0},"workAllData")}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkView.js' */
GH.WorkView={},GH.WorkView.isVisible=!1,GH.WorkView.detailViewOpen=!1,GH.WorkView.isRendering=!1,GH.WorkView.init=function(){AJS.$(GH).bind(GH.Layout.EVENT_DELAYED_RESIZE,GH.WorkView.handleResizeEvent),AJS.$(document).on("click",".js-view-actions-work .js-view-action-toggle-epics-lozenge",GH.WorkController.toggleEpicsShowOnWorkboard)},GH.WorkView.show=function(){var e=require("jira-agile/rapid/ui/bento/bento-features");GH.WorkView.isVisible=!0,GH.WorkView.showLoading();var i=GH.tpl.workcontroller.renderSkeleton({});AJS.$("#ghx-work").empty().append(i),GH.DetailsView.setContainerSelector("#ghx-detail-view"),GH.DetailsView.setOptions({canClose:!0,showActionsCog:!0,showSubtaskTab:!0,showLogWorkTrigger:!0,updateSizeHandler:GH.WorkView.updateDetailViewSize,closeHandler:GH.WorkController.closeDetailsView,isUsingBentoSidebarOnBoard:e.isUsingBentoSidebarOnBoard()}),e.isBentoSidebarOnBoardEnabled()&&(AJS.$("#ghx-issue-fragment").on("hide-backlog-issue",function(){e.isUsingBentoSidebarOnBoard()&&GH.WorkController.closeDetailsView()}),AJS.$("#ghx-issue-fragment").on("issue.details.view.switch-to-modal",function(){e.isUsingBentoSidebarOnBoard()&&GH.WorkView.setAndShowDetailViewInModalMode()}),AJS.$("#ghx-issue-fragment").on("issue.details.view.switch-to-sidebar",function(){e.isUsingBentoSidebarOnBoard()||GH.WorkView.setAndShowDetailViewInSidebarMode()})),GH.RapidBoard.State.isKanbanBoard()&&GH.WorkView.showKanPlanAcknowledge()},GH.WorkView.getFirstColumnHeader=function(){return AJS.$(AJS.$("#ghx-column-headers .ghx-column").get(0))},GH.WorkView.hide=function(){GH.WorkView.isVisible=!1,GH.WorkView.hideLoading(),AJS.$("#ghx-detail-view").css({display:"none"}),AJS.$("#ghx-work").empty(),GH.WorkView.hideKanPlanAcknowledge()},GH.WorkView.configureUI=function(e){GH.WorkView.detailViewOpen=!!e,GH.DetailsView.setSelectedIssueKey(e)},GH.WorkView.renderPoolAndDetailView=function(){GH.WorkView.isRendering=!0,GH.WorkView.hideLoadingPool(),GH.SwimlaneView.show(),GH.RapidBoard.State.isWorkRenderImprovementEnabled()||(GH.WorkView.updateDetailViewVisibilityAndSize(),GH.WorkView.updateDetailView(),GH.RapidBoard.ViewController.updateContentContainer()),GH.WorkView.isRendering=!1},GH.WorkView.scrollIssueToView=function(){var e=GH.WorkSelectionController.getSelectedIssueKey();e&&GH.WorkSelectionController.gotoIssue(e)},GH.WorkView.setAndShowDetailViewInModalMode=function(){GH.WorkController.closeDetailsView(),GH.BoardState.setGlobalValue("ghx-issue-fragment-view-mode","modal"),GH.DetailsView.opts.isUsingBentoSidebarOnBoard=!1;var e=GH.WorkSelectionController.getSelectedIssueKey();e&&GH.WorkView.displayIssueModal()},GH.WorkView.setAndShowDetailViewInSidebarMode=function(){GH.WorkView.closeIssueModal(),GH.BoardState.setGlobalValue("ghx-issue-fragment-view-mode","sidebar"),GH.DetailsView.opts.isUsingBentoSidebarOnBoard=!0;var e=GH.WorkSelectionController.getSelectedIssueKey();e&&GH.WorkController.openDetailsView(e)},GH.WorkView.openOrCloseDetailView=function(e,i){GH.WorkView.configureUI(e),GH.WorkView.toggleDetailViewVisibility(),GH.WorkView.updateDetailView(i)},GH.WorkView.displayIssueModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.skipStateUpdate,o=e.loadedWithInitialPageLoad,t=arguments[1];GH.WorkController.issueModalApi().done(function(e){var i=GH.RapidBoard.State.getBoardType(),n=GH.RapidViewConfig.currentData.id,a={issueKey:GH.WorkSelectionController.getSelectedIssueKey(),isLoadedWithPage:o,boardType:i,boardId:n};t&&(a.shortcutAction=t),e&&e.show?e.show(a):AJS.$("#ghx-issue-fragment").trigger("show",a)}),GH.WorkController.isIssueModalPopupEnabled()&&!i&&(GH.RapidBoard.State.setWorkIssueModalOpened(!0),GH.RapidBoard.State.pushState())},GH.WorkView.isIssueModalOpened=function(){return AJS.$("#ghx-issue-fragment").hasClass("software-issue-app-opened")},GH.WorkView.closeIssueModal=function(){GH.WorkController.issueModalApi().done(function(e){e&&e.close?e.close():AJS.$("#ghx-issue-fragment").trigger("hide")})},GH.WorkView.updateFixedElementPositioning=function(){GH.WorkView.isVisible&&(GH.WorkControls.resizeQuickFilters(),GH.DetailsView.updateSize(),GH.SwimlaneStalker.poolStalker())},GH.WorkView.updateAllSizings=function(){GH.WorkView.updateDetailViewVisibilityAndSize()},GH.WorkView.updateDetailView=function(e){return GH.WorkView.skipDetailsView?void delete GH.WorkView.skipDetailsView:(GH.WorkView.detailViewOpen?GH.DetailsView.show(null,e):GH.DetailsView.hide(),GH.SwimlaneStalker.poolStalker(),void GH.SwimlaneView.columnWidthChanged())},GH.WorkView.skipNextDetailViewUpdate=function(){GH.WorkView.skipDetailsView=!0},GH.WorkView.getEstimatedColumnWidth=function(){var e=AJS.$("#ghx-work").width(),i=GH.WorkView.detailViewOpen?GH.DetailsView.minWidth:0,o=GH.GridDataController.getModel(),t=o.getColumns().length,n=10*(t+1)+20,a=Math.floor((e-i-n)/t);return a},GH.WorkView.getIssueKeyDimensions=function(){var e=AJS.$("#ghx-pool .js-issue:visible").eq(0),i=parseInt(e.find(".js-key-link").css("font-size"),10),o=e.find(".ghx-issue-fields").width()||e.find(".ghx-stat-fields .ghx-stat-2").width();return{availableWidth:o,approxCharacterWidth:i?.7*i:null}},GH.WorkView.updateMinHeightsSettings=function(){GH.WorkView.detailViewOpen?(AJS.$("#ghx-work").addClass("ghx-has-detail"),AJS.$("#ghx-detail-view").css({display:""})):(AJS.$("#ghx-detail-view").css({display:"none"}),AJS.$("#ghx-work").removeClass("ghx-has-detail"))},GH.WorkView.getBand=function(){var e=GH.WorkView.getEstimatedColumnWidth();return e<=126?1:e<=165?2:3},GH.WorkView.toggleDetailViewVisibility=function(){var e=GH.DetailsView.getContainer();GH.WorkView.detailViewOpen?(GH.DetailsView.opts.isUsingBentoSidebarOnBoard&&AJS.$("#ghx-pool-column").addClass("ghx-pool-column-compact"),e.css({display:""}),GH.DetailsView.updateSize()):(AJS.$("#ghx-pool-column").removeClass("ghx-pool-column-compact"),e.css({display:"none"}));var i=AJS.$("#ghx-pool"),o=GH.WorkView.getBand();i.toggleClass("ghx-band-1",1===o).toggleClass("ghx-band-2",2===o).toggleClass("ghx-band-3",3===o)},GH.WorkView.updateDetailViewVisibilityAndSize=function(){GH.WorkView.toggleDetailViewVisibility()},GH.WorkView.updateDetailViewSize=function(){if(!GH.RapidBoard.State.isWorkRenderImprovementEnabled()||GH.DetailsView.opts.isUsingBentoSidebarOnBoard){var e=AJS.$("#ghx-detail-issue");if(e.length>0){var i=e.outerHeight(),o=AJS.$("#ghx-detail-head"),t=o.outerHeight(),n=AJS.$("#js-detail-nav-content");n.css({height:i-t-13})}}},GH.WorkView.showLoading=function(){AJS.$("body").addClass("ghx-loading-pool ghx-loading-quickfilter")},GH.WorkView.hideLoading=function(){AJS.$("body").removeClass("ghx-loading-pool ghx-loading-quickfilter")},GH.WorkView.hideLoadingFilter=function(){AJS.$("body").removeClass("ghx-loading-quickfilter")},GH.WorkView.showLoadingPool=function(){AJS.$("body").addClass("ghx-loading-pool"),AJS.$(".ghx-throbber").spin("large")},GH.WorkView.hideLoadingPool=function(){AJS.$("body").removeClass("ghx-loading-pool"),AJS.$(".ghx-throbber").spin(!1)},GH.WorkView.handleResizeEvent=function(){GH.WorkView.isVisible&&GH.GridDataController.getModel()&&(GH.WorkView.isRendering||(GH.WorkView.updateAllSizings(),GH.SwimlaneView.handleResizeEvent(),GH.SwimlaneStalker.poolStalker()))},function(){var e=require("jira-agile/rapid/ui/kanplan/kanplan-acknowledge");GH.WorkView.showKanPlanAcknowledge=function(){e.show()},GH.WorkView.hideKanPlanAcknowledge=function(){e.hide()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkControls.js' */
define("jira-agile/rapid/work/work-controls",["jquery","jira-agile/rapid/const/PageMode","jira-agile/rapid/work/quick-filters-bridge","jira-agile/features/feature-flags","jira/featureflags/feature-manager"],function(e,i,t,r,n){var o={};return o.rapidViewConfig={},o.quickfilters=void 0,o.sprintfilters=void 0,o.init=function(){o.quickfilters=new GH.Components.QuickFilters("activeQuickFilters"),o.sprintfilters=new GH.Components.SprintFilters("workSprintFilters"),GH.Components.sprintFiltersInit(),o.sprintfilters.initializeInlineEdits(),e(document).delegate("#ghx-complete-sprint","click",o.openCompleteSprintDialog),e(GH).bind(GH.Dialogs.CompleteSprintDialog.EVENT_SPRINT_COMPLETED,function(t,r){e("#ghx-modes-tools .ghx-sprint-meta").remove(),GH.ReportController.selectChart("sprintRetrospective"),GH.RapidBoard.ViewController.setMode(i.REPORT),GH.SprintRetrospectiveController.sprintPicker.storeSelectedItemId(r),GH.SprintRetrospectiveController.tryMarkSprintForRetroDialog(r),GH.RapidBoard.ViewController.sidebarController.updateSidebar()}),e(GH).bind(GH.Components.EVENT_SPRINT_UPDATED,o.handleSprintUpdated)},o.setRapidViewConfig=function(e){o.rapidViewConfig=e,o.quickfilters.setRapidViewConfig(e),o.sprintfilters.setRapidViewConfig(e)},o.hasSprints=function(){return o.sprintfilters.hasSprints()},o.getBoardType=function(){return o.hasSprints()?"scrum":"kanban"},o.setSprintData=function(e,i){this.canManageSprints=i,o.sprintfilters.setSprintData(e,i),o.sprintfilters.validateActiveSprints()},o.drawSprints=function(){GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),GH.WorkController.isSprintSupportEnabled()&&o.sprintfilters.drawSprints()},o.handleSprintUpdated=function(e,i){o.sprintfilters.updateSprintData(i.id,i)},o.getActiveQuickFilterIds=function(){return o.quickfilters.getActiveQuickFilters()},o.getActiveQuickFilterCount=function(){return o.getActiveQuickFilterIds().length},o.setActiveQuickFilterIds=function(e){o.quickfilters.setActiveQuickFilters(e)},o.getActiveSprintIds=function(){return o.sprintfilters.getActiveSprintFilters()},o.setActiveSprintFilterIds=function(e){o.sprintfilters.setActiveSprintFilters(e)},o.renderControls=function(){var s=e("#ghx-controls-work");s.empty(),o.rapidViewConfig.sprintSupportEnabled&&!GH.RapidBoard.ViewController.shouldShowSubnavigator()&&s.append(o.sprintfilters.renderComponent());var a=document.getElementById("ghx-quick-filters");n.isFeatureEnabled(r.DEFER_FILTERS_AND_HANDLERS)?(JIRA.API.getSidebar().then(function(){return setTimeout(function(){t.isReactFiltersEnabled().then(function(e){e&&a?(GH.bridge.FilterBridge.unmount(a),GH.bridge.FilterBridge.render(a)):o.renderLegacyFilter(s)})},0)}),require("jira/navigation").then(function(){return setTimeout(function(){t.isReactFiltersEnabled().then(function(e){e&&a?(GH.bridge.FilterBridge.unmount(a),GH.bridge.FilterBridge.render(a)):o.renderLegacyFilter(s)})},0)})):t.isReactFiltersEnabled().then(function(e){e&&a?(GH.bridge.FilterBridge.unmount(a),GH.bridge.FilterBridge.render(a)):o.renderLegacyFilter(s)}),GH.ViewActions.setMode(i.WORK),GH.ViewActions.setSwimlanes(!1)},o.renderLegacyFilter=function(e){o.currentQuickFilterElement&&o.currentQuickFilterElement.remove(),o.currentQuickFilterElement=o.quickfilters.renderQuickFilters({mode:i.WORK}),e.append(o.currentQuickFilterElement)},o.updateSwimlaneOptions=function(e){GH.ViewActions.setSwimlanes(e)},o.openCompleteSprintDialog=function(i){i.preventDefault();var t=e(this);if(!t.hasClass("ghx-disabled")){var r=parseInt(t.attr("data-sprint-id"),10),n=o.sprintfilters.getSprintById(r);if(n){o.sprintfilters.removeDialog();var s=GH.RapidBoard.State.getRapidViewId();GH.Dialogs.CompleteSprintDialog.showDialog(s,n.id)}}},o.resizeQuickFilters=function(){o.quickfilters.quickExpanderLayout({mode:i.WORK})},o}),AJS.namespace("GH.WorkControls",null,require("jira-agile/rapid/work/work-controls"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkUrlState.js' */
!function(){"use strict";var e=require("jira-agile/rapid/const/PageMode"),r=require("jira/featureflags/simplified-ux-feature-manager");GH.WorkUrlState={},GH.WorkUrlState.self="WorkUrlState",GH.WorkUrlState.isApplicable=function(r){return!r.mode||r.mode===e.WORK},GH.WorkUrlState.getNormalizedFromUrl=function(e,t){t.selectedIssue=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedIssue,null),t.sprint=GH.RapidBoard.UrlState.normalizeNumberArrayParam(e.sprint),t.quickFilter=GH.RapidBoard.UrlState.normalizeNumberArrayParam(e.quickFilter),r.isStickyQuickfilterFixEnabled()&&(t.search=GH.RapidBoard.UrlState.normalizeStringParam(e.search,""),t.assignee=GH.RapidBoard.UrlState.normalizeStringArrayParam(e.assignee,[]))},GH.WorkUrlState.toUrl=function(e,t){e.selectedIssue&&(t.selectedIssue=e.selectedIssue),e.sprint.length>0&&(t.sprint=e.sprint),e.quickFilter.length>0&&(t.quickFilter=e.quickFilter),r.isStickyQuickfilterFixEnabled()&&(e.search&&(t.search=encodeURIComponent(e.search)),e.assignee&&(t.assignee=e.assignee))},GH.WorkUrlState.getNormalizedFromInternal=function(e){GH.WorkController.init(),e.quickFilter=GH.WorkControls.getActiveQuickFilterIds(),e.sprint=GH.WorkControls.getActiveSprintIds(),e.selectedIssue=GH.WorkSelectionController.getSelectedIssueKey(),r.isStickyQuickfilterFixEnabled()&&(e.search=GH.WorkController.activeFilters.searchText,e.assignee=GH.WorkController.activeFilters.assigneeList)},GH.WorkUrlState.updateInternalFromNormalized=function(e){var t=GH.RapidBoard.UrlState.getCurrentUrlState(),i=GH.RapidBoard.UrlState.normalizeBooleanParam(t.useStoredSettings,!1);GH.WorkController.init(),i||(GH.WorkSelectionController.setIssueFromUrlState(e.selectedIssue),GH.WorkControls.setActiveQuickFilterIds(e.quickFilter),GH.WorkControls.setActiveSprintFilterIds(e.sprint),r.isStickyQuickfilterFixEnabled()&&(GH.WorkController.activeFilters.searchText=e.search,e.assignee&&(GH.WorkController.activeFilters.assigneeList=e.assignee)))}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesService.js' */
GH.LinkedPagesService=function(){return{initiateRemoteLinkConversation:function(){return GH.Ajax.get({url:"/remoteLinkConversation",dataType:"text"},"remoteLinkConversation")}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesController.js' */
GH.LinkedPagesController={},GH.LinkedPagesController.EPIC="epic",GH.LinkedPagesController.VERSION="version",GH.LinkedPagesController.SPRINT="sprint",GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION="/plugins/createcontent/init-dialog.action",GH.LinkedPagesController._dialog=null,GH.LinkedPagesController._authenticated=!1,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.LinkedPagesController.analytics={show:new e("gh.linkedPages.dialog.show"),count:new e("gh.linkedPages.dialog.count"),action:new e("gh.linkedPages.dialog.action")}}(),GH.LinkedPagesController._pollingConversations=!1,GH.LinkedPagesController._dialogByLinkCreationToken={},GH.LinkedPagesController.initDialogTrigger=function(e,n,o,i){i.on("click",GH.Util.wrapPreventDefault(function(){GH.LinkedPagesController._showDialog(e,n,o,i)}))},GH.LinkedPagesController._showDialog=function(e,n,o,i,r){var a=new GH.LinkedPagesInlineDialog({entityType:e,agileMode:n,entityId:o,trigger:i});a.dialogOptions=_.extend({},a.dialogOptions,r),a.show(),GH.LinkedPagesController.analytics.show.trigger([n,e].join(".")),GH.LinkedPagesController._dialog=a,GH.LinkedPagesController._authenticated||(AJS.$(document).bind("applinks.auth.completion",GH.LinkedPagesController._handleAuthenticationCompleted),GH.LinkedPagesController._authenticated=!0)},GH.LinkedPagesController.showDialogForEpic=_.partial(GH.LinkedPagesController._showDialog,GH.LinkedPagesController.EPIC),GH.LinkedPagesController.showDialogForSprint=_.partial(GH.LinkedPagesController._showDialog,GH.LinkedPagesController.SPRINT),GH.LinkedPagesController.hideCurrentDialog=function(){GH.LinkedPagesController._dialog&&GH.LinkedPagesController._dialog.hide()},GH.LinkedPagesController.getLinkedPagesForEntity=function(e,n){switch(e){case GH.LinkedPagesController.EPIC:return GH.LinkedPagesController._getLinkedPagesForEpic(n);case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:return GH.LinkedPagesController._getLinkedPagesForSprint(n)}},GH.LinkedPagesController._getLinkedPagesForEpic=function(e){return GH.Ajax.get({url:"/epics/"+e+"/pages"},"getEpicLinkedPages").done(function(n){GH.PageIssueLinksModel.set(e,n.pages),GH.LinkedPagesController.analytics.count.trigger("epic","pages",n.pages.length)})},GH.LinkedPagesController._getLinkedPagesForSprint=function(e){return GH.Ajax.get({url:"/sprint/"+e+"/pages"},"getSprintLinkedPages").done(function(n){GH.PageIssueLinksModel.set(e,n.pages),GH.LinkedPagesController.analytics.count.trigger("sprint","pages",n.pages.length)})},GH.LinkedPagesController.startRemoteLinkCreationConversation=function(e){return GH.LinkedPagesController._ensurePolling(),GH.LinkedPagesService.initiateRemoteLinkConversation().done(function(n){GH.LinkedPagesController._dialogByLinkCreationToken[n]=e})},GH.LinkedPagesController.removeLinkedPage=function(e,n,o){var i;switch(e){case GH.LinkedPagesController.EPIC:i=GH.Ajax.del({url:"/issuelink/"+o});break;case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:i=GH.Ajax.del({url:"/api/sprints/"+n+"/remotelink/"+o})}return i.done(function(){GH.PageIssueLinksModel.removeLink(n,o),GH.LinkedPagesController.analytics.action.trigger([e,"removeLink"].join("."))}),i},GH.LinkedPagesController.searchPages=function(e,n,o){return GH.PageSearchRequestService.search(n,o).andThen(function(e){var o=GH.PageIssueLinksModel.list(n);return e.pages=_.reject(e.pages,function(e){return _.findWhere(o,{pageId:e.id})}),GH.PagesSearchModel.set(n,e.pages),e})},GH.LinkedPagesController.addLink=function(e,n,o,i){switch(e){case GH.LinkedPagesController.EPIC:return GH.LinkedPagesController._addLinkForEpic(n,o);case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:return GH.LinkedPagesController._addLinkForSprint(n,o,i)}},GH.LinkedPagesController._addLinkForEpic=function(e,n){return GH.Ajax.post({url:"/epics/"+e+"/pages",data:{pageId:n}},"addConfluencePageToEpic").andThen(function(o){var i=o.success;return GH.PageIssueLinksModel.addLink(e,i),GH.PagesSearchModel.removePage(e,n),GH.LinkedPagesController.analytics.action.trigger("epic.addLink"),i})},GH.LinkedPagesController._addLinkForSprint=function(e,n,o){return GH.Ajax.post({url:"/sprint/"+e+"/pages",data:{pageId:n,pageTitle:o}},"addConfluencePageToSprint").andThen(function(o){var i=o.success;return GH.PageIssueLinksModel.addLink(e,i),GH.PagesSearchModel.removePage(e,n),GH.LinkedPagesController.analytics.action.trigger("sprint.addLink"),i})},GH.LinkedPagesController._handleAuthenticationCompleted=function(e,n,o,i,r){var a=GH.LinkedPagesController._dialog;o&&a?a.isSearchMode()?(a.showSearch(a.getSearchQuery()),a.refresh()):a.show():GH.Notification.showWarning("Authentication with Confluence failed. Please check your credentials or Application Links configuration in Confluence.")},GH.LinkedPagesController._ensurePolling=function(){GH.LinkedPagesController._pollingConversations||(GH.Poller.addPoller("linkedPagePoller",function(){GH.Ajax.get({url:"/remoteLinkConversation/statuses",traditional:!0,data:{token:_.keys(GH.LinkedPagesController._dialogByLinkCreationToken)}},"remoteLinksConversationStatuses").done(function(e){var n=_.pluck(_.where(e,{status:"REDEEMED"}),"token"),o=_.pick(GH.LinkedPagesController._dialogByLinkCreationToken,n);_.each(o,function(e,n){var o=GH.LinkedPagesController._dialog;o===e&&o.isVisible()&&o.show(),delete GH.LinkedPagesController._dialogByLinkCreationToken[n]})})}),GH.LinkedPagesController._pollingConversations=!0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/PageSearchRequestService.js' */
GH.PageSearchRequestService={},GH.PageSearchRequestService.delay=400,GH.PageSearchRequestService.timeoutId=null,GH.PageSearchRequestService.search=function(e,c){GH.PageSearchRequestService.cancel();var t=AJS.$.Deferred();return GH.PageSearchRequestService.timeoutId=setTimeout(function(){GH.PageSearchRequestService._execute(t,e,c)},GH.PageSearchRequestService.delay),t.promise()},GH.PageSearchRequestService.cancel=function(){null!=GH.PageSearchRequestService.timeoutId&&(clearTimeout(GH.PageSearchRequestService.timeoutId),GH.PageSearchRequestService.timeoutId=null)},GH.PageSearchRequestService._scheduleRequest=function(e,c){GH.PageSearchRequestService.timeoutId=setTimeout(function(){GH.PageSearchRequestService._execute(e,c)},GH.PageSearchRequestService.delay)},GH.PageSearchRequestService._execute=function(e,c,t){var r=GH.PageSearchRequestService.timeoutId,a=GH.Ajax.get({url:"/integration/confluence/pages/search",data:{searchQuery:t},deferErrorHandling:!0},"searchConfluencePagesForEpic");a.done(function(c){r===GH.PageSearchRequestService.timeoutId&&(GH.PageSearchRequestService._replaceHighlightTokensWithHtml(c.pages),e.resolveWith(e,arguments))}),a.fail(function(c){r===GH.PageSearchRequestService.timeoutId&&e.rejectWith(e,arguments)})},GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START="@@@hl@@@",GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END="@@@endhl@@@",GH.PageSearchRequestService._replaceHighlightTokensWithHtml=function(e){var c=function(e){return e.replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START,"g"),"<strong>").replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END,"g"),"</strong>")},t=function(e){return e.replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START,"g"),"").replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END,"g"),"")};return _.each(e,function(e){e.title&&(e.titleHtml=c(e.title),e.title=t(e.title)),e.space&&(e.spaceHtml=c(e.space),e.space=t(e.space))}),e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/PageIssueLinksModel.js' */
GH.PageIssueLinksModel={},GH.PageIssueLinksModel.model={},GH.PageIssueLinksModel.set=function(e,s){GH.PageIssueLinksModel.model[e]=s},GH.PageIssueLinksModel.get=function(e,s){return _.find(GH.PageIssueLinksModel.model[e],function(e){return e.id===s})},GH.PageIssueLinksModel.list=function(e){return GH.PageIssueLinksModel.model[e]||[]},GH.PageIssueLinksModel.removeLink=function(e,s){s=parseInt(s,10),GH.PageIssueLinksModel.model[e]=_.reject(GH.PageIssueLinksModel.model[e],function(e){return e.id===s})},GH.PageIssueLinksModel.addLink=function(e,s){_.isArray(GH.PageIssueLinksModel.model[e])||(GH.PageIssueLinksModel.model[e]=[]),GH.PageIssueLinksModel.model[e].push(s)},GH.PageIssueLinksModel.clear=function(e){delete GH.PageIssueLinksModel.model[e]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/PagesSearchModel.js' */
GH.PagesSearchModel={},GH.PagesSearchModel.model={},GH.PagesSearchModel.set=function(e,a){GH.PagesSearchModel.model[e]=a},GH.PagesSearchModel.list=function(e){return GH.PagesSearchModel.model[e]},GH.PagesSearchModel.get=function(e,a){return a=parseInt(a,10),_.find(GH.PagesSearchModel.model[e],function(e){return e.id===a})},GH.PagesSearchModel.removePage=function(e,a){a=parseInt(a,10),GH.PagesSearchModel.model[e]=_.reject(GH.PagesSearchModel.model[e],function(e){return e.id===a})},GH.PagesSearchModel.clear=function(e){delete GH.PagesSearchModel.model[e]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesCommon.soy' */
// This file was automatically generated from LinkedPagesCommon.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.linkedpages.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.linkedpages == 'undefined') { GH.tpl.component.linkedpages = {}; }


GH.tpl.component.linkedpages.createPageInputs = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="' + soy.$$escapeHtml(opt_data.entityTypeParam) + '" value="' + soy.$$escapeHtml(opt_data.entityId) + '"><input type="hidden" name="applinkId" value="' + soy.$$escapeHtml(opt_data.applinkId) + '"><input type="hidden" name="agileMode" value="' + soy.$$escapeHtml(opt_data.agileMode) + '">' + ((opt_data.fallbackUrl) ? '<input type="hidden" name="fallbackUrl" value="' + soy.$$escapeHtml(opt_data.fallbackUrl) + '">' : '');
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.createPageInputs.soyTemplateName = 'GH.tpl.component.linkedpages.createPageInputs';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesInlineDialog.js' */
GH.LinkedPagesInlineDialog=function(e){if(this.entityType=e.entityType,"sprint"==this.entityType)this.entityTypeParam="sprintId";else{if("epic"!=this.entityType)throw new Error("Did not understand entity type: "+this.entityType);this.entityTypeParam="issueKey"}this.entityId=e.entityId,this.agileMode=e.agileMode,this.$trigger=e.trigger,this.$content=null,this.dialog=null,this.dialogOptions=_.extend({},GH.LinkedPagesInlineDialog.DIALOG_OPTIONS)},GH.LinkedPagesInlineDialog.INITIAL_SHOWN_PAGES_COUNT=3,GH.LinkedPagesInlineDialog.DIALOG_OPTIONS={fadeTime:0,noBind:!0,width:300,cacheContent:!1,hideDelay:6e4},GH.LinkedPagesInlineDialog.prototype.isVisible=function(){return AJS.$("#inline-dialog-viewPagesDialog").is(":visible")},GH.LinkedPagesInlineDialog.prototype.show=function(){return this.showDeferred=AJS.$.Deferred(),this.dialog=GH.SideInlineDialog.create("viewPagesDialog",this.$trigger,_.bind(this._render,this),this.dialogOptions),this.dialog.show(),this.showDeferred.promise()},GH.LinkedPagesInlineDialog.prototype.hide=function(){this.dialog.hide()},GH.LinkedPagesInlineDialog.prototype.refresh=function(){this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._render=function(e,i,n){this.$content=e,this.showDeferred.notify("EmptyBegin"),e.html(GH.tpl.component.linkedpages.renderEmptyDialog({entityId:this.entityId})),this.showDeferred.notify("EmptyRender"),e.click(function(e){e.stopPropagation()}),e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.find(".ghx-progress-indicator.ghx-initial").spin("medium"),_.isFunction(n)&&n(),this.showDeferred.notify("EmptyDone"),this.showDeferred.notify("AjaxCall");var t=GH.LinkedPagesController.getLinkedPagesForEntity(this.entityType,this.entityId);return t.done(_.bind(function(i){this.showDeferred.notify("AjaxDone");var t=_.findWhere(i.applicationLinks,{primary:!0}),a=!!t&&t.url+GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION;e.find(".ghx-progress-indicator.ghx-initial").spin("medium");var s=i.pages;this.canModify=i.canModifyPages,this.applicationLinks=i.applicationLinks;var o=s.length>0&&i.applicationLinks.length<=1&&_.all(s,function(e){return e.serverUnavailable}),l=_.where(s,{authenticationRequired:!0}),r=_.groupBy(l,"applicationLinkId"),d=_.keys(r),h=_.map(d,function(e){var n=r[e][0].authenticationUrl,t=_.findWhere(i.applicationLinks,{id:e});return{applicationLink:t,authenticateUrl:n}}),c=s.length,g=GH.LinkedPagesInlineDialog.INITIAL_SHOWN_PAGES_COUNT;g+1==c&&g++,this.showDeferred.notify("ContentRender"),e.html(GH.tpl.component.linkedpages.renderDialog({entityId:this.entityId,entityType:this.entityType,linkedPages:s,initiallyShownCount:g,canEdit:this.canModify,appLink:t,serverUnavailable:o,needAuthenticationApplications:h})),this._updateViewLinkedPagesText(s.length),e.find("a.applink-authenticate").click(function(e){window.open(this.href,"com_atlassian_applinks_authentication"),e.preventDefault()}),e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),this._initCreateAndLink({createPageAction:a,entityId:this.entityId,entityType:this.entityType,entityTypeParam:this.entityTypeParam,agileMode:this.agileMode,jiraApplicationId:i.jiraApplicationId,jiraUrl:i.jiraBaseUrl}),e.find(".js-wiki-remove").click(_.bind(this._handleRemovePageClick,this)),e.find(".js-wiki-view-more-pages-link").click(_.bind(this._handleShowMoreClick,this));var p=e.find(".js-page-search");p.click(function(e){return e.preventDefault(),!1}),p.keydown(_.bind(this._handleSelectNextItem,this)),p.keydown(_.bind(this._handleSelectPreviousItem,this)),p.keydown(_.bind(this._handleAddSelectedItem,this)),p.keyup(_.bind(this._handlePageSearchQueryChanged,this)),e.find(".js-search-panel-hide").on("click",_.bind(this._handleCloseSearchPanelClick,this)),e.find(".js-search-page-icon").click(_.bind(this._handleClearSearchIconClick,this)),this._showLinkedPagesPanel(),_.isFunction(n)&&n(),this.showDeferred.notify("ContentDone"),this.dialog.refresh(),this.showDeferred.resolve()},this)),!1},GH.LinkedPagesInlineDialog.prototype._renderPageSearchResults=function(e){this._hideSearchingSpinner();var i=this.$content.find(".js-entity-view-pages-search-result");if(e.authenticationRequired){var n=_.findWhere(this.applicationLinks,{id:e.applicationLinkId})||{};i.html(GH.tpl.component.linkedpages.renderSearchAuthenticationRequest({authenticationUrl:e.authenticationUrl,authenticationLinkUrl:n.url,authenticationLinkName:n.name})),i.find("a.applink-authenticate").click(function(e){window.open(this.href,"com_atlassian_applinks_authentication"),e.preventDefault()})}else i.html(GH.tpl.component.linkedpages.renderPageResults({pages:e.pages,isComplete:e.isComplete})),e.pages.length&&this._reselectItem("first",_.identity),i.find(".ghx-doco-list-item").click(_.bind(this._handlePageSearchResultClick,this))},GH.LinkedPagesInlineDialog.prototype._renderPageSearchFailed=function(e){this._hideSearchingSpinner();var i=e.getGlobalErrors();AJS.messages.warning(AJS.$(".js-link-page-panel"),{title:AJS.format("Error while searching",""),body:i&&i[0].message})},GH.LinkedPagesInlineDialog.prototype._handleCloseSearchPanelClick=GH.Util.wrapPreventDefault(function(e){this._showLinkedPagesPanel()}),GH.LinkedPagesInlineDialog.prototype._handleClearSearchIconClick=function(e){return GH.PageSearchRequestService.cancel(),this._emptySearchResults(),this._hideSearchingSpinner(),this.$content.find(".js-search-existing-pages-input").val(""),e.preventDefault(),!1},GH.LinkedPagesInlineDialog.prototype._handleRemovePageClick=function(e){var i=AJS.$(e.target),n=i.attr("data-page-id");i.hide().closest("li").find(".js-wiki-spin").removeClass("ghx-hidden").find(".ghx-progress-indicator.ghx-small").spin("small");var t=GH.LinkedPagesController.removeLinkedPage(this.entityType,this.entityId,n);return t.done(_.bind(function(){i.closest("li").remove();var e=GH.PageIssueLinksModel.list(this.entityId);0===e.length&&this.$content.find(".js-no-linked-pages").removeClass("hidden"),this._updateViewLinkedPagesText(e.length)},this)),this._showMoreLinkedPages(),e.preventDefault(),!1},GH.LinkedPagesInlineDialog.prototype._handleShowMoreClick=function(e){return e.preventDefault(),e.stopPropagation(),this._showMoreLinkedPages(),!1},GH.LinkedPagesInlineDialog.prototype._handlePageSearchQueryChanged=function(e){if(13!=e.keyCode&&38!=e.keyCode&&40!=e.keyCode){var i=AJS.$(e.target).val();this._performSearch(i)}},GH.LinkedPagesInlineDialog.prototype._performSearch=function(e){this._emptySearchResults(),e.length>0?(GH.LinkedPagesController.searchPages(this.entityType,this.entityId,e).done(_.bind(this._renderPageSearchResults,this)).fail(_.bind(this._renderPageSearchFailed,this)),this._showSearchingSpinner(),this._showClearSearchIcon()):this._hideClearSearchIcon()},GH.LinkedPagesInlineDialog.prototype._handleSelectNextItem=function(e){if(40==e.keyCode)return e.preventDefault(),this._reselectItem("first",function(e){return e+1})},GH.LinkedPagesInlineDialog.prototype._handleSelectPreviousItem=function(e){if(38==e.keyCode)return e.preventDefault(),this._reselectItem("last",function(e){return e-1})},GH.LinkedPagesInlineDialog.prototype._reselectItem=function(e,i){var n=AJS.$(".ghx-doco-list-result");if(0!==n.length){var t=n.filter(".ghx-doco-list-selected"),a=null;if(0===t.length)a=n[e]();else{var s=n.index(t);t.removeClass("ghx-doco-list-selected");var o=i(s);a=o<0||o>n.length-1?n[e]():AJS.$(n[o])}if(a){a.addClass("ghx-doco-list-selected");var l=a.parent(),r=l.position().top,d=r+l.height(),h=a.position().top,c=a.height();(h<r||d<h+c)&&a.get(0).scrollIntoView()}}},GH.LinkedPagesInlineDialog.prototype._handleAddSelectedItem=function(e){if(13==e.keyCode){e.preventDefault();var i=AJS.$(".ghx-doco-list-result"),n=i.filter(".ghx-doco-list-selected");0!==n.length&&this._addSearchResult(n)}},GH.LinkedPagesInlineDialog.prototype._handlePageSearchResultClick=function(e){e.preventDefault();var i=AJS.$(e.target).closest("[data-page-id]");this._addSearchResult(i)},GH.LinkedPagesInlineDialog.prototype._addSearchResult=function(e){var i=e.attr("data-page-id"),n=GH.PagesSearchModel.get(this.entityId,i),t=this.$content.find(".js-linked-pages-list"),a=n.title;this._showMoreLinkedPages();var s=AJS.$(GH.tpl.component.linkedpages.renderStubLinkedPageListItem({pageTitle:a}));t.append(s);var o=GH.LinkedPagesController.addLink(this.entityType,this.entityId,i,a);o.done(_.bind(function(e){var i=AJS.$(GH.tpl.component.linkedpages.renderLinkedPageListItem({page:e,entityId:this.entityId,canEdit:this.canModify,hidden:!1}));s.replaceWith(i),i.find(".js-wiki-remove").click(_.bind(this._handleRemovePageClick,this)),i.hide().fadeIn(200),this._updateViewLinkedPagesText(GH.PageIssueLinksModel.list(this.entityId).length)},this)),e.parent().fadeOut(200,function(){e.parent().remove()}),this.$content.find(".js-no-linked-pages").addClass("hidden"),this._showLinkedPagesPanel()},GH.LinkedPagesInlineDialog.prototype._emptySearchResults=function(){this.$content.find(".js-entity-view-pages-search-result").empty(),this._hideClearSearchIcon(),this.$content.find(".js-link-page-panel").find(".aui-message").remove()},GH.LinkedPagesInlineDialog.prototype._showClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-search-small ghx-iconfont-inactive").addClass("aui-iconfont-remove")},GH.LinkedPagesInlineDialog.prototype._hideClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-remove").addClass("ghx-iconfont-inactive aui-iconfont-search-small")},GH.LinkedPagesInlineDialog.prototype._initCreateAndLink=function(e){this.$content.find(".js-create-page-link").click(_.bind(function(){var i=window.open("","_blank");return GH.LinkedPagesController.startRemoteLinkCreationConversation(this).done(function(n){GH.LinkedPagesController.analytics.action.trigger([e.entityType,"createPage"].join("."));var t={applinkId:e.jiraApplicationId,agileMode:e.agileMode,fallbackUrl:e.jiraUrl,creationToken:n};t[e.entityTypeParam]=e.entityId,i.location=e.createPageAction+"?"+AJS.$.param(t)}),!1},this)),this.$content.find(".js-link-pages-link").click(_.bind(function(){return this._showLinkPagePanel(),!1},this))},GH.LinkedPagesInlineDialog.prototype._updateViewLinkedPagesText=function(e){var i=e>0?AJS.format("{0}{0,choice,0# Linked|1# linked|1\u003c linked} {0,choice,0# pages|1# page|1\u003c pages}",e):AJS.format("{0}{0,choice,0# Linked|1# linked|1\u003c linked} {0,choice,0# pages|1# page|1\u003c pages}","");this.$trigger.text(i);var n=e>0?AJS.format("{0} linked {0,choice,0# pages|1# page|1\u003c pages}",e):"Linked pages";this.$content.find(".js-entity-pages-header").text(n)},GH.LinkedPagesInlineDialog.prototype._showLinkPagePanel=function(){this.$content.find(".js-link-page-panel").show(),this.$content.find(".js-search-panel-hide").show(),this.$content.find(".js-linked-pages-actions").hide(),this.$content.find(".js-linked-pages-panel").hide(),this.$content.find(".js-search-existing-pages-input").focus(),this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._showLinkedPagesPanel=function(){this.$content.find(".js-linked-pages-panel").show(),this.$content.find(".js-search-panel-hide").hide(),this.$content.find(".js-linked-pages-actions").show(),this.$content.find(".js-link-page-panel").hide(),this.$content.find(".js-entity-view-pages-search-result").empty(),this.$content.find(".js-search-existing-pages-input").val(""),this._hideClearSearchIcon(),this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._showMoreLinkedPages=function(){this.$content.find(".ghx-doco-list-item").show(),this.$content.find(".ghx-doco-list-view-more").hide()},GH.LinkedPagesInlineDialog.prototype._showSearchingSpinner=function(){var e=this.$content.find(".js-entity-view-pages-searching");e.hasClass("hidden")&&e.removeClass("hidden").spin("medium")},GH.LinkedPagesInlineDialog.prototype._hideSearchingSpinner=function(){this.$content.find(".js-entity-view-pages-searching").addClass("hidden")},GH.LinkedPagesInlineDialog.prototype._hideClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-remove").addClass("ghx-iconfont-inactive").addClass("aui-iconfont-search-small")},GH.LinkedPagesInlineDialog.prototype.isSearchMode=function(){return this.$content.find(".js-link-page-panel").is(":visible")},GH.LinkedPagesInlineDialog.prototype.getSearchQuery=function(){return this.$content.find(".js-search-existing-pages-input").val()},GH.LinkedPagesInlineDialog.prototype.showSearch=function(e){this._showLinkPagePanel(),this.$content.find(".js-search-existing-pages-input").val(e).focus(),this._performSearch(e)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/linkedpages/LinkedPagesInlineDialog.soy' */
// This file was automatically generated from LinkedPagesInlineDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.linkedpages.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.linkedpages == 'undefined') { GH.tpl.component.linkedpages = {}; }


GH.tpl.component.linkedpages.renderDialogHeader = function(opt_data, opt_ignored) {
  return '<h2>' + aui.buttons.button({extraClasses: ['js-search-panel-hide', 'ghx-search-return', 'aui-button-link'], text: 'Back'}) + '<span class="js-pages-header">' + soy.$$escapeHtml('Linked pages') + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderDialogHeader.soyTemplateName = 'GH.tpl.component.linkedpages.renderDialogHeader';
}


GH.tpl.component.linkedpages.renderEmptyDialog = function(opt_data, opt_ignored) {
  return '<div class="ghx-linked-pages-inline-dialog-panel ghx-inline-dialog-content js-entity-view-pages-content" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '">' + GH.tpl.component.linkedpages.renderDialogHeader(null) + '<div class="ghx-progress-indicator ghx-initial"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderEmptyDialog.soyTemplateName = 'GH.tpl.component.linkedpages.renderEmptyDialog';
}


GH.tpl.component.linkedpages.renderDialog = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-linked-pages-inline-dialog-panel ghx-inline-dialog-content js-entity-view-pages-content" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '">' + GH.tpl.component.linkedpages.renderDialogHeader(null) + '<div class="ghx-inline-dialog-container ghx-full-width js-linked-pages-panel">';
  if (opt_data.serverUnavailable) {
    output += '<p class="ghx-embedded">' + soy.$$escapeHtml('The Confluence server is currently unreachable.') + '</p>';
  } else if (! opt_data.appLink) {
    output += '<p class="ghx-embedded">' + soy.$$escapeHtml('No Confluence server is configured. Please check your Application Links configuration.') + '</p>';
  } else {
    output += ((opt_data.needAuthenticationApplications.length > 0) ? GH.tpl.component.linkedpages.renderAuthenticationRequest(opt_data) : '') + '<div class="ghx-embedded js-no-linked-pages ' + ((opt_data.linkedPages.length > 0) ? 'hidden' : '') + '">' + ((opt_data.canEdit) ? '<p>' + soy.$$escapeHtml('No linked pages yet.') + ' ' + ((opt_data.entityType == 'sprint') ? soy.$$filterNoAutoescape(AJS.format('Try linking meeting notes or {0}create a new page{1}.','<a class="js-create-page-link">','</a>')) : soy.$$filterNoAutoescape(AJS.format('Try linking requirements pages or {0}create a new page{1}.','<a class="js-create-page-link">','</a>'))) + '</p>' : '<p>' + soy.$$escapeHtml('No linked pages yet.') + ' ' + soy.$$escapeHtml('Edit Issue permissions are required to add pages.') + '</p>') + '</div><ul class="ghx-doco-list js-linked-pages-list">';
    var pageList61 = opt_data.linkedPages;
    var pageListLen61 = pageList61.length;
    for (var pageIndex61 = 0; pageIndex61 < pageListLen61; pageIndex61++) {
      var pageData61 = pageList61[pageIndex61];
      output += GH.tpl.component.linkedpages.renderLinkedPageListItem({page: pageData61, entityId: opt_data.entityId, canEdit: opt_data.canEdit, hidden: pageIndex61 > opt_data.initiallyShownCount - 1});
    }
    output += '</ul>';
    if (opt_data.linkedPages.length > opt_data.initiallyShownCount) {
      output += '<div class="ghx-doco-list-view-more">';
      var viewMoreText__soy72 = '' + soy.$$escapeHtml(AJS.format('{0} more\u2026',opt_data.linkedPages.length - opt_data.initiallyShownCount));
      output += aui.buttons.button({extraClasses: ['js-wiki-view-more-pages-link', 'aui-button-link'], text: viewMoreText__soy72}) + '</div>';
    }
  }
  output += '</div>' + ((opt_data.canEdit && ! opt_data.serverUnavailable && opt_data.appLink) ? GH.tpl.component.linkedpages.renderPagesActions(null) : '') + ((opt_data.canEdit && ! opt_data.serverUnavailable && opt_data.appLink) ? GH.tpl.component.linkedpages.renderSearchPagesPanel(null) : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderDialog.soyTemplateName = 'GH.tpl.component.linkedpages.renderDialog';
}


GH.tpl.component.linkedpages.renderAuthenticationRequest = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-embedded"><span class="applinks-auth-request"><span class="applinks-request-description">' + soy.$$escapeHtml('Please authenticate to view more:') + '<ul>';
  var appList90 = opt_data.needAuthenticationApplications;
  var appListLen90 = appList90.length;
  for (var appIndex90 = 0; appIndex90 < appListLen90; appIndex90++) {
    var appData90 = appList90[appIndex90];
    var authenticateLink__soy91 = '<a href="' + soy.$$escapeHtml(appData90.authenticateUrl) + '" class="applink-authenticate">';
    var serverLink__soy95 = '<a href="' + soy.$$escapeHtml(appData90.applicationLink.url) + '" target="_blank">' + soy.$$escapeHtml(appData90.applicationLink.name) + '</a>';
    output += '<li>' + soy.$$filterNoAutoescape(AJS.format('{0}Authenticate{1} with {2}',authenticateLink__soy91,'</a>',serverLink__soy95)) + '</li>';
  }
  output += '</ul></span></span></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderAuthenticationRequest.soyTemplateName = 'GH.tpl.component.linkedpages.renderAuthenticationRequest';
}


GH.tpl.component.linkedpages.renderPagesActions = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container ghx-divided js-linked-pages-actions" >' + aui.buttons.button({extraClasses: ['js-link-pages-link'], text: 'Link page'}) + aui.buttons.button({extraClasses: ['js-create-page-link'], text: 'Create page'}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderPagesActions.soyTemplateName = 'GH.tpl.component.linkedpages.renderPagesActions';
}


GH.tpl.component.linkedpages.renderSearchPagesPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container ghx-full-width ghx-final-container js-link-page-panel"><div class="js-page-search"><form class="aui ghx-page-search-form"><input class="ghx-search aui-field check-list-field text js-search-existing-pages-input" type="text" placeholder="' + soy.$$escapeHtml('Search') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-search-small js-search-page-icon js-search-trigger ghx-clickable"></span></form></div><div class="js-entity-view-pages-search-result"></div><div class="js-entity-view-pages-searching hidden"><div class="ghx-progress-indicator ghx-initial"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderSearchPagesPanel.soyTemplateName = 'GH.tpl.component.linkedpages.renderSearchPagesPanel';
}


GH.tpl.component.linkedpages.renderPageResults = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-search-pages-result-panel"><div class="ghx-list-suggestions js-entity-view-pages-search-no-matches ' + ((opt_data.pages.length > 0) ? 'hidden' : '') + '">' + soy.$$escapeHtml('No matches') + '</div><ul class="ghx-doco-list">';
  var pageList128 = opt_data.pages;
  var pageListLen128 = pageList128.length;
  for (var pageIndex128 = 0; pageIndex128 < pageListLen128; pageIndex128++) {
    var pageData128 = pageList128[pageIndex128];
    output += '<li class="ghx-doco-list-item ghx-doco-list-result" data-page-id="' + soy.$$escapeHtml(pageData128.id) + '"><div class="ghx-doco-list-item-text"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml('Wiki page') + '"></span><span class="ghx-name" title="' + soy.$$escapeHtml(pageData128.title) + '">' + soy.$$filterNoAutoescape(pageData128.title) + '</span><span class="ghx-sub">' + soy.$$escapeHtml(pageData128.space) + '</span></div></li>';
  }
  output += ((! opt_data.isComplete) ? '<li class="ghx-list-suggestions">' + soy.$$escapeHtml('Continue typing to refine further') + '</li>' : '') + '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderPageResults.soyTemplateName = 'GH.tpl.component.linkedpages.renderPageResults';
}


GH.tpl.component.linkedpages.renderLinkedPageListItem = function(opt_data, opt_ignored) {
  return '<li class="ghx-doco-list-item ' + ((opt_data.hidden) ? ' ghx-hidden' : '') + '">' + ((opt_data.canEdit) ? '<div class="js-wiki-remove ghx-remove"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml('Remove link to this wiki page') + '" data-page-id="' + soy.$$escapeHtml(opt_data.page.id) + '" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '"></span></div><div class="js-wiki-spin ghx-remove-spin ghx-hidden"><span class="ghx-spinner"></span></div>' : '') + '<div class="ghx-doco-list-item-text">' + ((opt_data.page.permissionDenied || opt_data.page.authenticationRequired) ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml('Restricted wiki page') + '"></span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml('Wiki page') + '"></span>') + ((! opt_data.page.appLinkExists || opt_data.page.pageDeleted || opt_data.page.serverUnavailable) ? '<span class="ghx-name">' + soy.$$escapeHtml('Wiki page failed to load') + '</span>' : '<span class="ghx-name" title="' + soy.$$escapeHtml(opt_data.page.title) + '"><a target="_blank" href="' + soy.$$escapeHtml(opt_data.page.url) + '">' + soy.$$escapeHtml(opt_data.page.title) + '</a></span>') + '</div></li>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderLinkedPageListItem.soyTemplateName = 'GH.tpl.component.linkedpages.renderLinkedPageListItem';
}


GH.tpl.component.linkedpages.renderStubLinkedPageListItem = function(opt_data, opt_ignored) {
  return '<li class="ghx-doco-list-item"><div class="js-wiki-spin ghx-remove-spin"><span class="ghx-spinner"></span></div><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml('Wiki page') + '"></span><span class="ghx-name"><a href="#">' + soy.$$escapeHtml(opt_data.pageTitle) + '</a></span></li>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderStubLinkedPageListItem.soyTemplateName = 'GH.tpl.component.linkedpages.renderStubLinkedPageListItem';
}


GH.tpl.component.linkedpages.renderTrigger = function(opt_data, opt_ignored) {
  var output = '';
  var buttonText__soy194 = AJS.format('{0}{0,choice,0# Linked|1# linked|1\x3c linked} {0,choice,0# pages|1# page|1\x3c pages}',opt_data.linkedPagesCount ? opt_data.linkedPagesCount : '');
  output += aui.buttons.button({extraAttributes: {title: opt_data.title}, extraClasses: ['aui-button-link', 'js-view-entity-pages', 'ghx-linked-pages-trigger'], text: buttonText__soy194});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderTrigger.soyTemplateName = 'GH.tpl.component.linkedpages.renderTrigger';
}


GH.tpl.component.linkedpages.renderSearchAuthenticationRequest = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-embedded"><span class="applinks-auth-request"><span class="applinks-request-description">';
  var authenticateLink__soy201 = '<a href="' + soy.$$escapeHtml(opt_data.authenticationUrl) + '" class="applink-authenticate">';
  var serverLink__soy205 = '<a href="' + soy.$$escapeHtml(opt_data.authenticationLinkUrl) + '" target="_blank">' + soy.$$escapeHtml(opt_data.authenticationLinkName) + '</a>';
  output += soy.$$filterNoAutoescape(AJS.format('Please {0}Authenticate{1} with {2} to perform search',authenticateLink__soy201,'</a>',serverLink__soy205)) + '</span></span></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderSearchAuthenticationRequest.soyTemplateName = 'GH.tpl.component.linkedpages.renderSearchAuthenticationRequest';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReportController.js' */
define("jira-agile/rapid/ui/chart/report-controller",["require"],function(t){var e=t("jquery"),r=t("underscore"),i=t("jira-agile/rapid/analytics-tracker"),n=t("jira-agile/rapid/ui/chart/burndown-chart-controller"),o=t("jira-agile/rapid/ui/chart/cfd-controller"),a=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller"),p=t("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller"),c=t("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller"),d=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller"),h=t("jira-agile/rapid/ui/chart/version-report-controller"),l=t("jira-agile/rapid/ui/plan/sprint-controller"),s=t("jira-agile/tooltip"),g=t("jira-agile/rapid/const/PageMode"),u=t("jira-agile/rapid/configuration/ConfigContextLoader"),w=t("jira/featureflags/simplified-ux-feature-manager"),S=t("jira/analytics/web-client"),A={};return A.charts=[],A.rapidViewData={},A.visible=!1,A.rapidViewConfig={},A.analytics=new i("gh.report"),A.ANALYTICS_TIME_SPENT_MILESTONES=[1e4,3e4,6e4,12e4,24e4,48e4],A.init=r.once(function(){A.initCharts(),r.each(A.getCharts(),function(t){t.controller.setRapidView(A.rapidViewData)}),GH.ChartTimeFrames.init(),GH.ChartFilters.init(),e(GH).bind("issueCreated",A.handleIssueCreated),e(GH).bind(GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED,A.handleSprintReopened)}),A.initCharts=function(){w.isAdg3ModeOn()?A.charts=[{id:n.id,name:"Burndown Chart",description:"Track the total work remaining and project the likelihood of achieving the sprint goal. This helps your team manage its progress and respond accordingly.",tooltip:"Track the total work remaining and project the likelihood of achieving the sprint goal",preview:"burndown",controller:n},{id:GH.SprintRetrospectiveController.id,name:"Sprint Report",description:"Understand the work completed or pushed back to the backlog in each sprint. This helps you determine if your team is overcommitting or if there is excessive scope creep.",tooltip:"Understand the work completed or pushed back to the backlog in each sprint",preview:"sprint-retrospective",controller:GH.SprintRetrospectiveController},{id:GH.VelocityChartController.id,name:"Velocity Chart",description:"Track the amount of work completed from sprint to sprint. This helps you determine your team\'s velocity and estimate the work your team can realistically achieve in future sprints.",tooltip:"Track the amount of work completed from sprint to sprint. This helps to predict future performance",preview:"velocity",controller:GH.VelocityChartController},{id:o.id,name:"Cumulative Flow Diagram",description:"Shows the statuses of issues over time. This helps you identify potential bottlenecks that need to be investigated.",tooltip:"Identify the number of issues in each status over time. An increase in the number of issues in a particular status means there could be a bottleneck to be investigated",preview:"cumulative-flow-diagram",controller:o},{id:h.id,name:"Version Report",description:"Track the projected release date for a version. This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the likelihood of releasing it on time",preview:"version-report",controller:h},{id:GH.EpicReportController.id,name:"Epic Report",description:"Understand the progress towards completing an epic over time. This helps you manage your team\'s progress by tracking the remaining incomplete/unestimated work.",tooltip:"Understand the progress towards completing an epic over time",preview:"epic-report",controller:GH.EpicReportController},{id:a.id,name:"Control Chart",description:"Shows the cycle time for your product, version or sprint. This helps you identify whether data from the current process can be used to determine future performance.",tooltip:"Identify whether data from the current process can be used to determine future performance. Analyze the cycle time of issues to determine patterns in your process",preview:"control-chart",howTos:[{title:"Visibility",description:"See outliers and investigate their cause to reduce them in the future."},{title:"Efficiency",description:"Decreasing rolling average indicates process improvements and increased throughput."},{title:"Predictability",description:"Narrow standard deviation through process improvements to improve predictability of cycle time."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Control+Chart","isLocal":false}.url,controller:a},{id:p.id,name:"Epic Burndown",description:"Track the projected number of sprints required to complete the epic (optimized for Scrum). This helps you monitor whether the epic will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing an epic and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for an epic."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict completion",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Epic+Burndown","isLocal":false}.url,controller:new p},{id:c.id,name:"Release Burndown",description:"Track the projected release date for a version (optimized for Scrum). This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for a version."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict release",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Release+Burndown","isLocal":false}.url,controller:new c}]:A.charts=[{id:n.id,name:"Burndown Chart",description:"Track the total work remaining and project the likelihood of achieving the sprint goal. This helps your team manage its progress and respond accordingly.",tooltip:"Track the total work remaining and project the likelihood of achieving the sprint goal",preview:"burndown",controller:n},{id:GH.SprintRetrospectiveController.id,name:"Sprint Report",description:"Understand the work completed or pushed back to the backlog in each sprint. This helps you determine if your team is overcommitting or if there is excessive scope creep.",tooltip:"Understand the work completed or pushed back to the backlog in each sprint",preview:"sprint-retrospective",controller:GH.SprintRetrospectiveController},{id:GH.EpicReportController.id,name:"Epic Report",description:"Understand the progress towards completing an epic over time. This helps you manage your team\'s progress by tracking the remaining incomplete/unestimated work.",tooltip:"Understand the progress towards completing an epic over time",preview:"epic-report",controller:GH.EpicReportController},{id:p.id,name:"Epic Burndown",description:"Track the projected number of sprints required to complete the epic (optimized for Scrum). This helps you monitor whether the epic will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing an epic and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for an epic."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict completion",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Epic+Burndown","isLocal":false}.url,controller:new p},{id:h.id,name:"Version Report",description:"Track the projected release date for a version. This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the likelihood of releasing it on time",preview:"version-report",controller:h},{id:c.id,name:"Release Burndown",description:"Track the projected release date for a version (optimized for Scrum). This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for a version."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict release",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Release+Burndown","isLocal":false}.url,controller:new c},{id:GH.VelocityChartController.id,name:"Velocity Chart",description:"Track the amount of work completed from sprint to sprint. This helps you determine your team\'s velocity and estimate the work your team can realistically achieve in future sprints.",tooltip:"Track the amount of work completed from sprint to sprint. This helps to predict future performance",preview:"velocity",controller:GH.VelocityChartController},{id:a.id,name:"Control Chart",description:"Shows the cycle time for your product, version or sprint. This helps you identify whether data from the current process can be used to determine future performance.",tooltip:"Identify whether data from the current process can be used to determine future performance. Analyze the cycle time of issues to determine patterns in your process",preview:"control-chart",howTos:[{title:"Visibility",description:"See outliers and investigate their cause to reduce them in the future."},{title:"Efficiency",description:"Decreasing rolling average indicates process improvements and increased throughput."},{title:"Predictability",description:"Narrow standard deviation through process improvements to improve predictability of cycle time."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Control+Chart","isLocal":false}.url,controller:a},{id:o.id,name:"Cumulative Flow Diagram",description:"Shows the statuses of issues over time. This helps you identify potential bottlenecks that need to be investigated.",tooltip:"Identify the number of issues in each status over time. An increase in the number of issues in a particular status means there could be a bottleneck to be investigated",preview:"cumulative-flow-diagram",controller:o}];var t=GH.RapidBoard.State.isAgilityBoard();A.getCharts().unshift({id:"burnupChart",name:t?"Burnup report":"Burnup Chart",description:t?"The Burnup report provides a visual representation of a sprint\'s completed work compared with its total scope. Track your team\'s progress towards sprint completion and identify problems related to scope creep.":"The Burnup Chart provides a visual representation of a sprint\'s completed work compared with its total scope. Track your team\'s progress towards sprint completion and identify problems related to scope creep.",tooltip:"The Burnup Chart provides a visual representation of a sprint\'s completed work compared with its total scope. Track your team\'s progress towards sprint completion and identify problems related to scope creep.",documentation:{"url":"https://confluence.atlassian.com/jirasoftwarecloud/burnup-chart-945124716.html","isLocal":false}.url,controller:new d}),r.each(A.getCharts(),function(t){t.controller.init&&t.controller.init()})},A.getCharts=function(){return A.charts},A.getApplicableCharts=function(t){return r.filter(A.getCharts(),function(e){return e.controller.isApplicable(t||A.rapidViewConfig)})},A.isApplicableChart=function(t,e){var i=!1;return r.each(A.getApplicableCharts(e),function(e){e.id===t&&(i=!0)}),i},A.getChart=function(t){return r.findWhere(A.charts,{id:t})},A.getSelectedChart=function(){return GH.RapidBoard.State.getChartType()},A.renderReportView=function(){var t=!GH.RapidBoard.ViewController.shouldShowSubnavigator();e("#ghx-report").html(GH.tpl.reportcontroller.renderReportView({shouldShowNavigation:t}))},A.renderSprintActions=function(t,e,r,i,n){var o=this.showSprintReopenButton(r,i.state),a=this.showSprintDeleteButton();t.empty(),t.append(GH.tpl.reportcontroller.renderSprintActions({showReopen:o,showDelete:a,sprintStatus:i.state,canManageSprints:GH.RapidViewConfig.canManageSprints,noParallelSprintsAndSprintActive:this.hasNoParallelSprintAndSprintActive(r),allJql:n})),o&&t.find("#ghx-reopen-sprint").on("click",function(t){t.preventDefault(),GH.Dialogs.ReopenSprintDialog.showDialog(e,i.id)}),a&&t.find("#ghx-delete-sprint").on("click",function(t){t.preventDefault(),l.deleteSprint(e,i,A.show)}),t.find("[title]").tooltip({gravity:"e"})},A.showSprintReopenButton=function(t,e){var r=this.hasNoParallelSprintAndSprintActive(t);return GH.RapidViewConfig.canManageSprints&&"CLOSED"===e&&!r},A.hasNoParallelSprintAndSprintActive=function(t){var e=GH.RapidBoard.parallelSprints,i=r.any(t,function(t){return"ACTIVE"===t.state});return!e&&i},A.showSprintDeleteButton=function(){return GH.RapidViewConfig.canManageSprints},A.setRapidView=function(t){A.rapidViewData=t||{},r.each(A.getCharts(),function(t){t.controller.setRapidView(A.rapidViewData)})},A.show=function(){A.rapidViewData.id&&(A.visible=!0,GH.ChartTimeFrameService.setRapidViewId(A.rapidViewData.id),A.renderReportView(),A.loadRapidViewConfig())},A.loadRapidViewConfig=function(){var t=function(t){A.visible&&(A.rapidViewConfig=t,A.configureContent())};e.when(GH.RapidViewConfig.fetchConfiguration(A.rapidViewData.id),JIRA.API.getSidebar()).done(t)},A.configureContent=function(){GH.ViewActions.setMode(g.REPORT);var t=GH.RapidBoard.State.getChartType();if(A.isApplicableChart(t)||(t=!1),!t){var e=A.getApplicableCharts();GH.RapidBoard.State.setChartType(r.first(e).id)}GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),GH.RapidBoard.ViewController.updateContentContainer(),A.showChart(),u.prefetch()},A.hide=function(){A.visible&&(A.hideCharts(),A.visible=!1,e("#ghx-report").empty(),A.analyticsTimer&&A.analyticsTimer.destroy())},A.hideCharts=function(t){r.each(A.getCharts(),function(e){e.id!==t&&e.controller.hide()})},A.selectChart=function(t){GH.SprintRetrospectiveView.clearDialog(),GH.RapidBoard.State.setChartType(t),A.showChart()},A.getCurrentChart=function(){var t=GH.RapidBoard.State.getChartType();if(w.isAdg3ModeOn()&&(t=GH.RapidBoard.UrlState.getCurrentUrlState().chart||t),t)return A.getChart(t)},A.showChart=function(){var t=A.getCurrentChart();t&&(A.updateChartMenu(t.id),A.updateChartHeader(t),A.hideCharts(),t.controller.show(),S.sendScreenEvent(t.id+"Screen",null,{boardType:GH.RapidBoard.State.getBoardTypeForAnalytics()}),A.handleIntroState(),A.analyticsTimer&&A.analyticsTimer.destroy(),A.analyticsTimer=new GH.DurationsTimer(A.ANALYTICS_TIME_SPENT_MILESTONES).on("tick",function(e){var r=t.id+(t.inLabs?".new":"")+".view."+(A.rapidViewConfig.sprintSupportEnabled?"scrum":"kanban");A.analytics.trigger(r,"duration",e/1e3)}))},A.updateChartMenu=function(t){var r=e("#ghx-chart-nav");r.html(e(GH.tpl.reportcontroller.renderChartMenu({activeChart:t,availableCharts:A.getApplicableCharts(),board:A.rapidViewConfig})));var i=r.find("li");i.bind("simpleClick",GH.Util.wrapPreventDefault(function(t){A.handleChartSelection(t,e(this))})),e(".tipsy").remove(),s.tipsify({selector:i,gravity:"w",className:"ghx-tipsy-left"})},A.updateChartHeader=function(t){var r=e("#ghx-chart-message");r.empty(),e("#ghx-chart-header .ghx-linked-pages-trigger").remove(),e("#ghx-chart-selector").empty(),e("#ghx-chart-snapshot").empty(),e(".ghx-chart-legend").hide(),e("#ghx-chart-sprint-actions").empty(),w.isAdg3ModeOn()||e("#ghx-chart-title").html(GH.tpl.reportcontroller.renderChartTitle({activeChart:t})),e("#ghx-chart-intro").html(GH.tpl.reportcontroller.renderChartIntro({activeChart:t})),e("#ghx-chart-help").html(GH.tpl.reportcontroller.renderChartDescriptionClosed()),e("#ghx-chart-panel-content").find(".js-chart-intro-toggle").on("click",function(t){A.toggleIntroState(t)})},A.handleChartSelection=function(t,e){var r=e.find("a").attr("data-chart");A.selectChart(r)},A.handleIssueCreated=function(t,e){A.visible&&GH.RapidBoard.QuickCreate.showCreatedIssuesMessage(e)},A.handleSprintReopened=function(t,r){GH.RapidBoard.ViewController.setMode(g.WORK),GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_RENDERED,"afterSprintReopened",function(){GH.WorkControls.sprintfilters.setActiveSprintFilters([r]),e(GH.WorkControls.sprintfilters).trigger("sprintFilterChange"),GH.RapidBoard.State.pushState()}),GH.RapidBoard.ViewController.sidebarController.updateSidebar()},A.handleIntroState=function(){GH.RapidBoard.State.getStoredChartIntroState()===!1&&A.closeIntro()},A.toggleIntroState=function(){var t=e(".ghx-intro-content"),r=e("#ghx-chart-help");t.hasClass("ghx-closed")?(t.removeClass("ghx-closed"),GH.RapidBoard.Animation.animateHeightToAuto(t),r.addClass("ghx-closed"),GH.RapidBoard.State.setChartIntroState(!0)):(GH.RapidBoard.Animation.animateHeightToZero(t).done(function(){t.addClass("ghx-closed"),r.removeClass("ghx-closed")}),GH.RapidBoard.State.setChartIntroState(!1))},A.closeIntro=function(){e(".ghx-intro-content").height(0).addClass("ghx-closed"),e("#ghx-chart-help").removeClass("ghx-closed")},A});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReportController.soy' */
// This file was automatically generated from ReportController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reportcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reportcontroller == 'undefined') { GH.tpl.reportcontroller = {}; }


GH.tpl.reportcontroller.renderReportView = function(opt_data, opt_ignored) {
  return '<div id="ghx-report-scrollarea"><div class="aui-page-panel"><div class="aui-page-panel-inner">' + ((opt_data.shouldShowNavigation) ? '<div class="aui-page-panel-nav js-reports-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml('Reports') + '</strong></div><ul id="ghx-chart-nav" class="aui-nav"></ul></div></nav></div>' : '') + '<section id="ghx-chart-panel-content" class="aui-page-panel-content"><div id="ghx-chart-message"></div><div id="ghx-chart-intro"></div><div id="ghx-chart-header" class="aui-group aui-group-split ghx-fluid"><div id="ghx-chart-header-primary" class="aui-item"><div id="ghx-chart-title"></div><div id="ghx-chart-selector"></div><div id="ghx-chart-controls"></div><div id="ghx-chart-help" class="ghx-closed"></div><div id="ghx-chart-snapshot"></div></div><div id="ghx-chart-header-secondary" class="aui-item"><div id="ghx-chart-sprint-actions"></div><div class="ghx-chart-legend"></div></div></div><div id="ghx-chart-content"></div></section></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderReportView.soyTemplateName = 'GH.tpl.reportcontroller.renderReportView';
}


GH.tpl.reportcontroller.renderSprintActions = function(opt_data, opt_ignored) {
  return '' + ((opt_data.allJql || opt_data.canManageSprints) ? aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-more', iconText: 'Sprint actions', id: 'ghx-sprint-actions-button', extraClasses: 'aui-dropdown2-trigger aui-dropdown2-trigger-arrowless', extraAttributes: {'aria-owns': 'ghx-sprint-actions-content', 'aria-haspopup': true}}) + '<div id="ghx-sprint-actions-content" class="aui-style-default aui-dropdown2"><ul class="aui-list-section aui-first">' + ((opt_data.canManageSprints) ? ((opt_data.sprintStatus == 'CLOSED') ? '<li class="aui-list-item"><a id="ghx-reopen-sprint" role="button" href="#" class="aui-list-item-link ' + ((! opt_data.showReopen) ? ' disabled' : '') + '" title="' + soy.$$escapeHtml(opt_data.noParallelSprintsAndSprintActive ? 'This sprint cant be reopened at the moment! Complete your currently active sprint, or enable Parallel Sprints to work on multiple sprints concurrently.' : '') + '" >' + soy.$$escapeHtml('Reopen sprint') + '</a></li>' : '') + '<li class="aui-list-item"><a id="ghx-delete-sprint" role="button" href="#" class="aui-list-item-link ' + ((! opt_data.showDelete) ? ' disabled' : '') + '">' + soy.$$escapeHtml('Delete sprint') + '</a></li>' : '') + ((opt_data.allJql) ? '<li class="aui-list-item"><a role="button" href="' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.allJql}) + '" class="aui-list-item-link">' + soy.$$escapeHtml('View sprint in Issue Navigator') + '</a></li>' : '') + '</ul></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderSprintActions.soyTemplateName = 'GH.tpl.reportcontroller.renderSprintActions';
}


GH.tpl.reportcontroller.renderChartMenu = function(opt_data, opt_ignored) {
  var output = '';
  var chartList52 = opt_data.availableCharts;
  var chartListLen52 = chartList52.length;
  for (var chartIndex52 = 0; chartIndex52 < chartListLen52; chartIndex52++) {
    var chartData52 = chartList52[chartIndex52];
    output += '<li ' + ((opt_data.activeChart == chartData52.id) ? 'class="aui-nav-selected"' : '') + ' data-tooltip="' + soy.$$escapeHtml(chartData52.tooltip) + '"><a data-chart="' + soy.$$escapeHtml(chartData52.id) + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.board.id) + '&amp;view=reporting&amp;chart=' + soy.$$escapeHtml(chartData52.id) + '">' + soy.$$escapeHtml(chartData52.name) + ((chartData52.inLabs) ? ' <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-success">' + soy.$$escapeHtml('New') + '</span>' : '') + '</a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartMenu.soyTemplateName = 'GH.tpl.reportcontroller.renderChartMenu';
}


GH.tpl.reportcontroller.renderChartTitle = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.activeChart.name) + '</h2>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartTitle.soyTemplateName = 'GH.tpl.reportcontroller.renderChartTitle';
}


GH.tpl.reportcontroller.renderChartIntro = function(opt_data, opt_ignored) {
  return '<div class="ghx-intro-content ghx-open"><div class="aui-group ghx-content-open">' + GH.tpl.reportcontroller.renderChartDescription(opt_data) + ((opt_data.activeChart.howTos) ? '<div class="aui-item ghx-item-how"><div class="aui-group ghx-group-how">' + GH.tpl.reportcontroller.renderChartHow(opt_data) + '</div></div>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartIntro.soyTemplateName = 'GH.tpl.reportcontroller.renderChartIntro';
}


GH.tpl.reportcontroller.renderChartDescription = function(opt_data, opt_ignored) {
  return '<div class="aui-item"><h4 class="ghx-margin-none"><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-help ghx-margin-right"></span>' + soy.$$escapeHtml('How to read this chart') + '</h4><p>' + soy.$$escapeHtml(opt_data.activeChart.description) + '</p><p>' + ((opt_data.activeChart.documentation) ? aui.buttons.button({extraAttributes: {href: opt_data.activeChart.documentation, target: '_blank'}, text: 'Learn more', tagName: 'a'}) : '') + aui.buttons.button({extraClasses: ['aui-button-link', 'js-chart-intro-toggle'], text: 'Hide this information'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartDescription.soyTemplateName = 'GH.tpl.reportcontroller.renderChartDescription';
}


GH.tpl.reportcontroller.renderChartDescriptionClosed = function(opt_data, opt_ignored) {
  return '<div class="ghx-howto-trigger ghx-closed"><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-help"></span> ' + aui.buttons.button({extraClasses: ['aui-button-link', 'js-chart-intro-toggle'], text: 'How to read this chart', tagName: 'a'}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartDescriptionClosed.soyTemplateName = 'GH.tpl.reportcontroller.renderChartDescriptionClosed';
}


GH.tpl.reportcontroller.renderChartHow = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.activeChart.howTos) {
    var howToList117 = opt_data.activeChart.howTos;
    var howToListLen117 = howToList117.length;
    for (var howToIndex117 = 0; howToIndex117 < howToListLen117; howToIndex117++) {
      var howToData117 = howToList117[howToIndex117];
      output += GH.tpl.reportcontroller.renderChartHowItem({howTitle: howToData117.title, howDescription: howToData117.description});
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartHow.soyTemplateName = 'GH.tpl.reportcontroller.renderChartHow';
}


GH.tpl.reportcontroller.renderChartHowItem = function(opt_data, opt_ignored) {
  return '<div class="aui-item"><svg class="ghx-svg-chart"></svg><strong class="ghx-how-title">' + soy.$$escapeHtml(opt_data.howTitle) + '</strong><div class="ghx-how-description">' + soy.$$escapeHtml(opt_data.howDescription) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartHowItem.soyTemplateName = 'GH.tpl.reportcontroller.renderChartHowItem';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReportUrlState.js' */
!function(){"use strict";var r=require("jira-agile/rapid/const/PageMode"),t=require("jira/featureflags/simplified-ux-feature-manager");GH.ReportUrlState={},GH.ReportUrlState.self="ReportUrlState",GH.ReportUrlState.isApplicable=function(t){return t.mode===r.REPORT},GH.ReportUrlState.getNormalizedFromUrl=function(r,t){GH.ReportController.init();var e=t.chart=GH.RapidBoard.UrlState.normalizeStringParam(r.chart,""),a=GH.ReportController.getChart(e);a&&_.defaults(t,a.controller.getNormalizedFromUrl(r))},GH.ReportUrlState.toUrl=function(r,t){var e=t.chart=r.chart,a=GH.ReportController.getChart(e);a&&_.defaults(t,a.controller.toUrl(r))},GH.ReportUrlState.getNormalizedFromInternal=function(r){GH.ReportController.init();var e=GH.ReportController.getCurrentChart();if(r.chart=GH.RapidBoard.State.getChartType(),t.isAdg3ModeOn()&&!GH.ReportController.isApplicableChart(r.chart,r)){var a=GH.ReportController.getApplicableCharts(r);a&&(e=a[0],r.chart=e.id)}e&&_.defaults(r,e.controller.getNormalizedFromInternal())},GH.ReportUrlState.updateInternalFromNormalized=function(r){GH.ReportController.init(),GH.RapidBoard.State.setChartType(r.chart);var t=GH.ReportController.getChart(r.chart);t&&t.controller.updateInternalFromNormalized(r)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/Chart.js' */
define("jira-agile/rapid/ui/chart/chart",["require"],function(r){"use strict";var e=r("jquery"),i=GH.Layout,n={};return n.EVENT_RESIZE_REDRAW="gh.chart.resize_redraw",n.defaultOptions={colors:["#9eb6d4","#afd8f8","#cb4b4b","#4da74d","#9440ed"],grid:{backgroundColor:"#fff",borderColor:"#bbb",borderWidth:1,internalLineWidth:0,labelMargin:2,minBorderMargin:1},legend:{container:"#ghx-chart-legend",noColumns:1},shadowSize:0,xaxis:{tickLength:4},yaxis:{tickLength:4}},n.draw=function(r,i,t,d){i=e(i);var a=e.extend(!0,{},n.defaultOptions);d&&e.extend(!0,a,d);var o=e.plot(i,t,a);return n.bindToWindowSize(r,o),o},n.bindToWindowSize=function(r,t){e(GH).bind(i.EVENT_DELAYED_RESIZE+"."+r,function(){e(GH).trigger(n.EVENT_RESIZE_REDRAW,{id:r,chart:t});try{t.resize(),t.setupGrid(),t.draw()}catch(i){}})},n.destroy=function(r){e(GH).unbind(i.EVENT_DELAYED_RESIZE+"."+r)},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartUtils.js' */
!function(){"use strict";var t=require("aui/inline-dialog");GH.ChartUtils={},GH.ChartUtils.oneMinuteInMillis=6e4,GH.ChartUtils.oneHourInMillis=60*GH.ChartUtils.oneMinuteInMillis,GH.ChartUtils.oneDayInMillis=24*GH.ChartUtils.oneHourInMillis,GH.ChartUtils.fixButtons=function(t){var r,a,e,i,n,o=AJS.$(t).find(".aui-buttons");o.each(function(){a=AJS.$(this).position(),e=a.left,r=AJS.$(this).find(".aui-button"),r.each(function(){i=AJS.$(this).position(),n=i.left,n===e&&(AJS.$(this).addClass("first"),AJS.$(this).prev(".aui-button").addClass("last"))})})},GH.ChartUtils.registerInlineDialogHacks=function(r){AJS.$(document).bind("showLayer",function(a,e,i){"inlineDialog"===e&&AJS&&t&&t.current&&t.current.id===r&&(i._validateClickToClose=function(r){return!(AJS.$(r.target).parents(".calendar").length>0)&&!(AJS.$(r.target).parents("#inline-dialog-"+t.current.id).length>0)},AJS.$("body").unbind("click."+t.current.id+".inline-dialog-check"),setTimeout(function(){t.current&&t.current.id&&GH.ChartUtils.fixButtons("#inline-dialog-"+t.current.id)},0))})},GH.ChartUtils.createIssueJql=function(t){var r=_.pluck(t,"key");return"issueKey in ("+r.join(",")+")"},GH.ChartUtils.createEpicJql=function(t){return'"'+GH.EpicConfig.getEpicLinkFieldName()+'" = "'+t.key+'"'},GH.ChartUtils.createVersionJql=function(t){return"fixVersion="+encodeURIComponent(t.jqlEncodedName)+" AND project="+t.projectKey},GH.ChartUtils.createStatusJql=function(t){var r=_.pluck(t,"name");return'Status IN ("'+r.join('","')+'")'},GH.ChartUtils.getStatisticConsumer=function(t){var r=require("jira-agile/rapid/ui/chart/burndown-timeline-producer");return t?r.TimeTrackingStatisticConsumer:r.EstimateStatisticConsumer},GH.ChartUtils.renderStatisticText=function(t,r,a){r=!_.isUndefined(r)&&r;var e=r?Math.abs(t):t;if("duration"===a){var i=!r&&t<0?"-":"";return e=Math.abs(e),i+GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e)}return GH.NumberFormat.format(e)},GH.ChartUtils.renderUTCMillisAsDate=function(t){return GH.ChartUtils.renderUTCMillisInFormat(t,GH.ChartTimeFrames.momentTimeFormat)},GH.ChartUtils.renderUTCMillisAsDateWithoutTime=function(t){return GH.ChartUtils.renderUTCMillisInFormat(t,GH.ChartTimeFrames.momentDateFormat)},GH.ChartUtils.renderUTCMillisInFormat=function(t,r){var a=moment.utc(t).format(r);return a},GH.ChartUtils.getTimeFrameReportUrlParams=function(t){var r={days:GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.days",7),swimlane:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.swimlanes",[]),column:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.columns."+t,[]),quickFilter:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.quickFilters",[])};return r.days===-1?(r.from=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.from"),r.to=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.to")):(r.from=0,r.to=0),r},GH.ChartUtils.timeFrameReportParamsToUrl=function(t){var r={};return t.swimlane&&t.swimlane.length>0&&(r.swimlane=t.swimlane),t.column&&t.column.length>0&&(r.column=t.column),t.quickFilter&&t.quickFilter.length>0&&(r.quickFilter=t.quickFilter),t.days===-1?(r.from=new Date(t.from).print(GH.RapidBoard.UrlState.dateFormat),r.to=new Date(t.to).print(GH.RapidBoard.UrlState.dateFormat)):t.days>0&&(r.days=t.days),r},GH.ChartUtils.getNormalizedFromUrlForTimeFrameReport=function(t){var r={swimlane:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.swimlane),column:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.column),quickFilter:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.quickFilter)},a=GH.RapidBoard.UrlState.normalizeNumberParam(t.days,0),e=GH.RapidBoard.UrlState.normalizeDateParam(t.from,null),i=GH.RapidBoard.UrlState.normalizeDateParam(t.to,null);return null!==e&&null!==i?(r.days=-1,r.from=e.getTime(),r.to=i.getTime()):(r.days=a,r.from=0,r.to=0),r},GH.ChartUtils.getChartOptions=function(t){var r=require("jira-agile/rapid/ui/chart/chart-controller");return{xaxis:{mode:"time",min:t.getXAxisStart(),max:t.getXAxisEnd()},yaxes:t.getYAxes(),legend:{container:AJS.$("#ghx-chart-legend"),backgroundOpacity:.5,position:"se"},grid:{markings:r.getNonWorkingBlocks,hoverable:!0,clickable:!1,autoHighlight:!1},mouseEnterExitEvents:!0}},GH.ChartUtils.updateFromNormalizedStateDateTimeParams=function(t){GH.RapidBoard.State.setBoardSetting("chart.timeframe.days",t.days),GH.RapidBoard.State.setBoardSetting("chart.timeframe.from",t.from),GH.RapidBoard.State.setBoardSetting("chart.timeframe.to",t.to),GH.RapidBoard.State.setBoardSetting("chart.filters.swimlanes",t.swimlane),GH.RapidBoard.State.setBoardSetting("chart.filters.columns."+t.chart,t.column),GH.RapidBoard.State.setBoardSetting("chart.filters.quickFilters",t.quickFilter)},GH.ChartUtils.calculateYProjection=function(t,r,a){function e(t){return _.isArray(t)?{x:t[0],y:t[1]}:t}t=e(t),r=e(r),a=e(a);var i=r.x-t.x,n=a.x-t.x,o=r.y-t.y,l=o*n/i;return l+t.y}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartColors.js' */
define("jira-agile/rapid/ui/chart/chart-colors",function(){"use strict";var e={estimate:"#89c495",trend:"#3b73af",scope:"#cccccc",completed:"#3b7fc4",issueCount:"#205081",unestimated:"#815b3a",unestimatedPercent:"#d04437",timeSpent:"#14892c",nonWorkingDays:"#f2f2f2",nonWorkingDaysWallboard:"#333",dashedMarking:"#000",releaseDate:"#999",wallboard:{backgroundColor:"#000",borderColor:"#999",textColor:"#999",tickColor:"#999"}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/FlotChartUtils.js' */
GH.FlotChartUtils={},GH.FlotChartUtils.handlePlotClick=function(t,r,i){},GH.FlotChartUtils.deferredRenderPoints=function(t,r){r.save(),r.translate(t.getPlotOffset().left,t.getPlotOffset().top),r.strokeStyle="rgb(100, 100, 100)",r.fillStyle="rgba(255, 255, 255, 0.5)",_.each(t.realPointsPerSeries,function(t){_.each(t,function(t){GH.FlotChartUtils.drawPoint(r,t)})}),r.restore()},GH.FlotChartUtils.drawPoint=function(t,r){t.beginPath(),t.arc(r.x,r.y,3,0,2*Math.PI,!1),t.fill(),t.closePath(),t.stroke()},GH.FlotChartUtils.handleMouseOverStateChange=function(t,r){r.realPointsPerSeries={},r.draw()},GH.FlotChartUtils.setAndAlignAxisLabels=function(t,r,i){AJS.$("#ghx-axis-x").text(t),AJS.$("#ghx-axis-y").find(".ghx-inner").text(r),i&&AJS.$("#ghx-axis-y-right").find(".ghx-inner").text(i)},GH.FlotChartUtils.calculateYAxis=function(t,r){return"duration"===r.renderer?GH.FlotChartUtils.createYAxisForDuration(t):"issueCount"===r.typeId?GH.FlotChartUtils.createYAxisForIssueCount(t):{tickFormatter:GH.FlotChartUtils.numberFormatter}},GH.FlotChartUtils.issueCountFormatter=function(t,r){return t.toFixed(0)},GH.FlotChartUtils.durationFormatter=function(t,r){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(t,{timeFormat:GH.TimeFormatDisplays.HOURS,durationUnit:GH.TimeFormatDurationUnits.SECONDS})},GH.FlotChartUtils.numberFormatter=function(t,r){return GH.NumberFormat.format(t)},GH.FlotChartUtils.createYAxisForIssueCount=function(t){var r={tickFormatter:GH.FlotChartUtils.issueCountFormatter};return t<15?r.minTickSize=1:(numTicks=8,minTickSize=Math.ceil(t/numTicks),r.tickSize=minTickSize),r},GH.FlotChartUtils.createYAxisForDuration=function(t){var r=8,i=parseInt(t/r,10);0===t&&(i=3600);var e=i%3600;return 0!==e&&(i+=3600-e),{tickSize:i,tickFormatter:GH.FlotChartUtils.durationFormatter}},GH.FlotChartUtils.gatherPoints=function(t,r){for(var i=t.datapoints,e=i.points,a=i.pointsize,o=t.xaxis,n=t.yaxis,s=[],l=0;l<e.length;l+=a){var u=Math.ceil(l/a),c=r[u];if(!_.isEmpty(c)){var h=e[l],F=e[l+1];if(!(null==h||h<o.min||h>o.max||F<n.min||F>n.max)){var m=o.p2c(h),f=n.p2c(F);s.push({x:m,y:f,time:h,statValue:F})}}}return s};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ChartPicker.js' */
define("jira-agile/rapid/ui/component/chart-picker",["require"],function(e){var t,i=e("jquery"),r=e("underscore"),s=e("jira-agile/rapid/global-events"),n=e("jira/ajs/select/single-select"),o=GH.tpl;s.on("pre-initialization",function(){t=GH.BoardState});var c=function(e,t){this.selectedItemStateKey=e,this.items=[],this.defaultItem=void 0,this.emptyItemsMsg=t||"There are no available sprints for this board."};return c.prototype.setItems=function(e){this.items=e||[]},c.prototype.getItems=function(){return this.items},c.prototype.hasItems=function(){return!r.isEmpty(this.items)},c.prototype.getDefaultItem=function(){return this.defaultItem},c.prototype.getDefaultItemId=function(){return!!this.defaultItem&&this.defaultItem.id},c.prototype.setDefaultItem=function(e){this.defaultItem=e||void 0},c.prototype.getItemById=function(e){var t=r.find(this.items,function(t){return t.id.toString()===e.toString()});return!r.isUndefined(t)&&t},c.prototype.getSelectedItem=function(){var e,t=this.getStoredSelectedItemId();if(t&&(e=this.getItemById(t)),e||(this.getDefaultItem()?e=this.getDefaultItem():this.hasItems()&&(e=r.last(this.getItems()))),e){var i=this.getDefaultItemId()===e.id?-1:e.id;this.storeSelectedItemId(i)}return e||!1},c.prototype.setSelectedItem=function(e,t){this.previousSelectedItem=this.getSelectedItem();var r=this.getItemById(e);if(r){var s=this.getDefaultItemId()===r.id?-1:r.id;this.storeSelectedItemId(s)}else this.storeSelectedItemId(!1);t||i(this).trigger("selectedItemChanged",{item:r})},c.prototype.removeSelectedItemAndRevert=function(e){if(this.previousSelectedItem){var t=this.getSelectedItem().id;this.items=r.reject(this.items,function(e){return e.id===t}),this.setSelectedItem(this.previousSelectedItem.id),this.render(e)}},c.prototype.getStoredSelectedItemId=function(){return t.getPerViewValue(this.selectedItemStateKey,!1)},c.prototype.storeSelectedItemId=function(e){t.setPerViewValue(this.selectedItemStateKey,e||!1)},c.prototype.render=function(e){var t=this.items.length>1,r=this.getSelectedItem(),s=this,n=function(e,t){s.setSelectedItem(t.value())},c=function(t){s.showDropdown(t,function(){s.render(e)},n)};t?(e.html(o.component.chartpicker.renderSingleSelect({items:this.items,selectedItem:r})),i("#ghx-items-trigger").click(c)):r?e.html(o.component.chartpicker.renderSingleItem({selectedItemId:r.id,selectedItemName:r.name||""})):i("#ghx-chart-content").html(o.component.chartpicker.renderEmpty({emptyItemsMsg:this.emptyItemsMsg})),i("#ghx-chart-picker-form").submit(function(){return!1})},c.prototype.showDropdown=function(e,t,r){i(e.target).hide();var s=i("#ghx-chart-picker"),o=(new n({element:s,width:250,errorMessage:"",setMaxHeightToWindow:!0}),i("#ghx-chart-picker-field"));s.bind("selected",function(e,t){t.value()&&r(e,t),o.blur()}),o.blur(t),o.focus().select(),setTimeout(function(){i("#ghx-chart-picker-field").trigger("click")},20)},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ChartPicker.soy' */
// This file was automatically generated from ChartPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.chartpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.chartpicker == 'undefined') { GH.tpl.component.chartpicker = {}; }


GH.tpl.component.chartpicker.renderSingleItem = function(opt_data, opt_ignored) {
  return '<div class="ghx-selector-single" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItemId) + '">' + soy.$$escapeHtml(opt_data.selectedItemName) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderSingleItem.soyTemplateName = 'GH.tpl.component.chartpicker.renderSingleItem';
}


GH.tpl.component.chartpicker.renderEmpty = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.emptyItemsMsg) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderEmpty.soyTemplateName = 'GH.tpl.component.chartpicker.renderEmpty';
}


GH.tpl.component.chartpicker.renderDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list" id="js-ghx-items-dropdown"><ul class="aui-list-section aui-first aui-last">';
  var itemList14 = opt_data.items;
  var itemListLen14 = itemList14.length;
  for (var itemIndex14 = 0; itemIndex14 < itemListLen14; itemIndex14++) {
    var itemData14 = itemList14[itemIndex14];
    output += (itemData14.id != opt_data.itemId) ? '<li class="aui-list-item" data-value="' + soy.$$escapeHtml(itemData14.id) + '"><a class="aui-list-item-link">' + soy.$$escapeHtml(itemData14.name) + '</a></li>' : '';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderDropdown.soyTemplateName = 'GH.tpl.component.chartpicker.renderDropdown';
}


GH.tpl.component.chartpicker.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<form id="ghx-chart-picker-form" class="aui ghx-chart-picker">' + aui.buttons.button({id: 'ghx-items-trigger', tagName: 'a', extraClasses: ['js-nav-items', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: opt_data.selectedItem.name, extraAttributes: {'data-item-id': opt_data.selectedItem.id}}) + '<select id="ghx-chart-picker" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList37 = opt_data.items;
  var itemListLen37 = itemList37.length;
  for (var itemIndex37 = 0; itemIndex37 < itemListLen37; itemIndex37++) {
    var itemData37 = itemList37[itemIndex37];
    output += (itemData37.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData37.id) + '">' + soy.$$escapeHtml(itemData37.name) + '</option>' : '';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderSingleSelect.soyTemplateName = 'GH.tpl.component.chartpicker.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/EstimatePicker.js' */
define("jira-agile/rapid/ui/component/estimate-picker",["require"],function(t){var e=t("jquery"),i=t("underscore"),r=t("jira-agile/rapid/ui/chart/chart-view"),s=t("jira/ajs/select/single-select"),n=t("jira-agile/rapid/ajax"),a=GH.BoardState,o=GH.RapidBoard.State,c=GH.tpl,d=function(t,e){this.selectedItemStateKey=t,this.items=[],this.defaultItem=void 0,this.supportTimeTracking=e};return d.prototype.setItems=function(t){this.items=t||[]},d.prototype.getItems=function(){return this.items},d.prototype.hasItems=function(){return!i.isEmpty(this.items)},d.prototype.getDefaultItem=function(){return this.defaultItem},d.prototype.getDefaultItemId=function(){return!!this.defaultItem&&this.defaultItem.id},d.prototype.setDefaultItem=function(t){this.defaultItem=t||void 0},d.prototype.getItemById=function(t){var e=i.find(this.items,function(e){return e.id===t});return e},d.prototype.getSelectedItem=function(){var t=this.getStoredSelectedItemId(),e=t?this.getItemById(t):null;return e||(this.getDefaultItem()?e=this.getDefaultItem():this.hasItems()&&(e=i.last(this.getItems())),this.storeSelectedItemId(),o.pushState()),e||!1},d.prototype.setSelectedItem=function(t,i){this.previousSelectedItem=this.getSelectedItem();var r=this.getItemById(t);r?this.storeSelectedItemId(t):this.storeSelectedItemId(),i||e(this).trigger("selectedItemChanged",{item:r})},d.prototype.getStoredSelectedItemId=function(){return a.getPerViewValue(this.selectedItemStateKey,null)},d.prototype.storeSelectedItemId=function(t){a.setPerViewValue(this.selectedItemStateKey,t)},d.prototype.render=function(t){var i=this.items.length>1,r=this.getSelectedItem(),s=this,n=function(t,e){s.setSelectedItem(e.value())},a=function(e){s.showDropdown(e,function(){s.render(t)},n)};i?(t.html(c.component.estimatePicker.renderSingleSelect({items:this.items,selectedItem:r})),e("#ghx-estimate-picker-trigger").click(a)):r&&t.html(c.component.estimatePicker.renderSingleItem({selectedItemId:r.id,selectedItemName:r.name||""})),e("#ghx-estimate-picker-form").submit(function(){return!1})},d.prototype.showDropdown=function(t,i,r){e(t.target).hide();var n=e("#ghx-estimate-picker"),a=(new s({element:n,width:250,errorMessage:"",setMaxHeightToWindow:!0}),e("#ghx-estimate-picker-field"));n.bind("selected",function(t,e){e.value()&&r(t,e),a.blur()}),a.blur(i),a.focus().select(),setTimeout(function(){e("#ghx-estimate-picker-field").trigger("click")},20)},d.prototype.load=function(t,i){var s=this;return n.get({url:"/rapidviewconfig/estimation.json",data:{rapidViewId:t}},"rapidBoardEstimateStatistics").done(function(t){if(t.availableEstimationStatistics){var n=t.availableEstimationStatistics,a=t.currentEstimationStatistic;s.supportTimeTracking&&t.currentTrackingStatistic.isEnabled&&(n.push(t.currentTrackingStatistic),a=t.currentTrackingStatistic),s.setItems(n),s.setDefaultItem(a);var o=function(){var t=s.getSelectedItem().id;i(t)};e(s).bind("selectedItemChanged",o),s.render(r.getChartControls(!0)),r.showChartControls()}})},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/EstimatePicker.soy' */
// This file was automatically generated from EstimatePicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.estimatePicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.estimatePicker == 'undefined') { GH.tpl.component.estimatePicker = {}; }


GH.tpl.component.estimatePicker.renderSingleItem = function(opt_data, opt_ignored) {
  return '<div class="ghx-selector-single" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItemId) + '">' + soy.$$escapeHtml(opt_data.selectedItemName) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderSingleItem.soyTemplateName = 'GH.tpl.component.estimatePicker.renderSingleItem';
}


GH.tpl.component.estimatePicker.renderEmpty = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.emptyItemsMsg) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderEmpty.soyTemplateName = 'GH.tpl.component.estimatePicker.renderEmpty';
}


GH.tpl.component.estimatePicker.renderDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list" id="js-ghx-estimate-items-dropdown"><ul class="aui-list-section aui-first aui-last">';
  var itemList14 = opt_data.items;
  var itemListLen14 = itemList14.length;
  for (var itemIndex14 = 0; itemIndex14 < itemListLen14; itemIndex14++) {
    var itemData14 = itemList14[itemIndex14];
    output += (itemData14.id != opt_data.itemId) ? '<li class="aui-list-item" data-value="' + soy.$$escapeHtml(itemData14.id) + '"><a class="aui-list-item-link">' + soy.$$escapeHtml(itemData14.name) + '</a></li>' : '';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderDropdown.soyTemplateName = 'GH.tpl.component.estimatePicker.renderDropdown';
}


GH.tpl.component.estimatePicker.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<form id="ghx-estimate-picker-form" class="aui ghx-estimate-picker">' + aui.buttons.button({id: 'ghx-estimate-picker-trigger', tagName: 'a', extraClasses: ['js-nav-items', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: opt_data.selectedItem.name, extraAttributes: {'data-item-id': opt_data.selectedItem.id}}) + '<select id="ghx-estimate-picker" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList37 = opt_data.items;
  var itemListLen37 = itemList37.length;
  for (var itemIndex37 = 0; itemIndex37 < itemListLen37; itemIndex37++) {
    var itemData37 = itemList37[itemIndex37];
    output += (itemData37.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData37.id) + '">' + soy.$$escapeHtml(itemData37.name) + '</option>' : '';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderSingleSelect.soyTemplateName = 'GH.tpl.component.estimatePicker.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintSelect.js' */
define("jira-agile/rapid/ui/component/sprint-select",["require"],function(e){var t=e("jquery"),i=e("jira/ajs/select/single-select"),n=e("jira-agile/rapid/events"),r=function(){n(this),this.singleSelect=void 0};return r.prototype.initDropdown=function(){var e=this,n=function(){e.trigger("change",this.value)},r=t("#ghx-sprint-select");this.singleSelect=new i({element:r,itemAttrDisplayed:"label"}),r.on("change",n),r.on("unselect",n),t("#ghx-sprint-select-form").submit(function(){return!1})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintSelect.soy' */
// This file was automatically generated from SprintSelect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintselect == 'undefined') { GH.tpl.component.sprintselect = {}; }


GH.tpl.component.sprintselect.renderSingleSelect = function(opt_data, opt_ignored) {
  return '<div><form id="ghx-sprint-select-form" class="aui ghx-sprint-select"><div class="field-group"><label>' + soy.$$escapeHtml('Move to') + '</label>' + GH.tpl.component.sprintselect.renderSelectElement({items: opt_data.items, selectedItem: opt_data.selectedItem, id: 'ghx-sprint-select', cssClass: 'hidden'}) + '</div></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintselect.renderSingleSelect.soyTemplateName = 'GH.tpl.component.sprintselect.renderSingleSelect';
}


GH.tpl.component.sprintselect.renderSelectElement = function(opt_data, opt_ignored) {
  var output = '<select ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' ' + ((opt_data.cssClass) ? 'class="' + soy.$$escapeHtml(opt_data.cssClass) + '"' : '') + '><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList30 = opt_data.items;
  var itemListLen30 = itemList30.length;
  for (var itemIndex30 = 0; itemIndex30 < itemListLen30; itemIndex30++) {
    var itemData30 = itemList30[itemIndex30];
    output += (itemData30.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData30.id) + '">' + soy.$$escapeHtml(itemData30.name) + '</option>' : '';
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintselect.renderSelectElement.soyTemplateName = 'GH.tpl.component.sprintselect.renderSelectElement';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTooltip.js' */
GH.ChartTooltip=function(t,e,a){this.item=t,this.data=e,this.type=a},GH.ChartTooltip.prototype.render=function(){var t,e=require("jira-agile/rapid/ui/chart/change-event");t=this.type===e.releaseDate?AJS.$(GH.tpl.charttooltip.renderReleaseDatePredictionTooltip({data:this.data})):this.type===e.startDate?AJS.$(GH.tpl.charttooltip.renderStartDateTooltip({data:this.data})):this.type===e.uncertainty?AJS.$(GH.tpl.charttooltip.renderUncertainty({tooltipData:this.data})):AJS.$(GH.tpl.charttooltip.renderTooltip({tooltipData:this.data}));var a=this.item.pageX,i=this.item.pageY,o=this.item.series;t.css({position:"absolute",display:"none",top:i+5,"border-left-color":o.color}),t.appendTo("body");var r=t.width(),s=AJS.$("#ghx-chart-view canvas.base");a+r>s.offset().left+s.width()?t.css({left:a-(30+r)}):t.css({left:a+15}),t.fadeIn(200)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTooltip.soy' */
// This file was automatically generated from ChartTooltip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.charttooltip.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.charttooltip == 'undefined') { GH.tpl.charttooltip = {}; }


GH.tpl.charttooltip.renderTooltip = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip">';
  if (opt_data.tooltipData.initial || opt_data.tooltipData.complete) {
    output += '<strong>' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.tooltipData.issueCount)) + '</strong><br/>' + soy.$$escapeHtml(opt_data.tooltipData.event.type) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.statisticName) + ': ' + soy.$$escapeHtml(opt_data.tooltipData.statisticValue) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.dateText);
  } else {
    var changeList17 = opt_data.tooltipData.changes;
    var changeListLen17 = changeList17.length;
    for (var changeIndex17 = 0; changeIndex17 < changeListLen17; changeIndex17++) {
      var changeData17 = changeList17[changeIndex17];
      output += '<strong>' + soy.$$escapeHtml(changeData17.key) + '</strong><br/>' + ((changeData17.event.typeAsHtml) ? soy.$$filterNoAutoescape(changeData17.event.type) : soy.$$escapeHtml(changeData17.event.type)) + '<br/>' + soy.$$escapeHtml(changeData17.event.detail) + '<br/>&#x394; ' + soy.$$escapeHtml(changeData17.statisticName) + ': ' + soy.$$escapeHtml(changeData17.statisticDelta) + '<br />';
    }
    output += soy.$$escapeHtml(opt_data.tooltipData.dateText);
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderTooltip';
}


GH.tpl.charttooltip.renderReleaseDatePredictionTooltip = function(opt_data, opt_ignored) {
  return '<div id="ghx-tooltip"><strong>' + soy.$$escapeHtml(opt_data.data.description) + '</strong><br />' + soy.$$escapeHtml(opt_data.data.predictedReleaseDate) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderReleaseDatePredictionTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderReleaseDatePredictionTooltip';
}


GH.tpl.charttooltip.renderStartDateTooltip = function(opt_data, opt_ignored) {
  return '<div id="ghx-tooltip"><strong>' + soy.$$escapeHtml(opt_data.data.description) + '</strong><br />' + soy.$$escapeHtml(opt_data.data.dateText) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderStartDateTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderStartDateTooltip';
}


GH.tpl.charttooltip.renderUncertainty = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip">';
  var changeList51 = opt_data.tooltipData.changes;
  var changeListLen51 = changeList51.length;
  for (var changeIndex51 = 0; changeIndex51 < changeListLen51; changeIndex51++) {
    var changeData51 = changeList51[changeIndex51];
    output += '<strong>' + soy.$$escapeHtml(changeData51.key) + '</strong><br/>' + soy.$$escapeHtml(changeData51.event.detail) + '<br/>';
  }
  output += soy.$$filterNoAutoescape(AJS.format('{0}% Unestimated Issues',opt_data.tooltipData.unestimated)) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.dateText) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderUncertainty.soyTemplateName = 'GH.tpl.charttooltip.renderUncertainty';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartController.js' */
define("jira-agile/rapid/ui/chart/chart-controller",["require"],function(i){"use strict";var r=i("underscore"),a=i("jira-agile/rapid/ui/chart/burndown-rate"),n=i("jira-agile/rapid/ui/chart/chart-colors"),o=GH.RapidViewConfig,e={};return e.loadRapidViewConfig=function(i,r){var a=function(a){i.displayed&&(i.rapidViewConfig=a,r(a))};o.fetchConfiguration(i.rapidViewData.id).done(a)},e.getNonWorkingBlocks=function(){var i=a.getNonWorkingDays(),o=r.map(i,function(i){return{xaxis:{from:i.start,to:i.end},color:n.nonWorkingDays}});return o},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartView.js' */
define("jira-agile/rapid/ui/chart/chart-view",["require"],function(t){"use strict";var r=t("jquery"),e={};return e.getChartContentElem=function(t){return e.chartContentElem&&!t||(e.chartContentElem=r("#ghx-chart-content")),e.chartContentElem},e.getChartGroup=function(t){return e.chartGroup&&!t||(e.chartGroup=r("#ghx-chart-group")),e.chartGroup},e.getChartStatus=function(t){return e.chartStatus&&!t||(e.chartStatus=r("#ghx-chart-status")),e.chartStatus},e.getChartView=function(t){return e.chartView&&!t||(e.chartView=r("#ghx-chart-view")),e.chartView},e.getChartControls=function(t){return e.chartControls&&!t||(e.chartControls=r("#ghx-chart-controls")),e.chartControls},e.getChartAllControlsElem=function(t){return e.chartAllControlsElem&&!t||(e.chartAllControlsElem=r("#ghx-chart-options")),e.chartAllControlsElem},e.getChartTimeControlsElem=function(t){return e.chartTimeControlsElem&&!t||(e.chartTimeControlsElem=r("#ghx-chart-options-time")),e.chartTimeControlsElem},e.getChartSelector=function(t){return e.chartSelector&&!t||(e.chartSelector=r("#ghx-chart-selector")),e.chartSelector},e.getChartLegend=function(t){return e.chartLegend&&!t||(e.chartLegend=r("#ghx-chart-legend")),e.chartLegend},e.getChartLegendD3=function(t){return e.chartLegendD3&&!t||(e.chartLegendD3=r(".ghx-chart-legend")),e.chartLegendD3},e.getChartSnapshot=function(t){return e.chartSnapshot&&!t||(e.chartSnapshot=r("#ghx-chart-snapshot")),e.chartSnapshot},e.getSprintActions=function(t){return e.sprintActions&&!t||(e.sprintActions=r("#ghx-chart-sprint-actions")),e.sprintActions},e.showChartGroup=function(){e.getChartGroup().show()},e.hideChartGroup=function(){e.getChartGroup().hide()},e.showChartStatus=function(){e.getChartStatus().show()},e.hideChartStatus=function(){e.getChartStatus().hide()},e.hideChartControls=function(){e.getChartControls().hide()},e.showChartControls=function(){e.getChartControls().show()},e.showSpinner=function(){var t=e.getChartGroup(!0).spin("medium");0===t.find(".ghx-chart-blanket.js-blanket-spinner").length&&r("<div></div>").addClass("ghx-chart-blanket js-blanket-spinner").appendTo(t)},e.hideSpinner=function(){e.getChartGroup(!0).spinStop().find(".ghx-chart-blanket.js-blanket-spinner").remove()},e.showBlankStateMessage=function(t){var n=e.getChartGroup(!0),a=n.find(".ghx-chart-blanket.ghx-blank-state").empty();0===a.length&&(a=r("<div></div>").addClass("ghx-chart-blanket ghx-blank-state").appendTo(n)),a.append(t)},e.hideBlankStateMessage=function(){e.getChartGroup(!0).find(".ghx-chart-blanket.ghx-blank-state").remove()},e.showIE8SupportMessage=function(t){var n=e.getChartContentElem(),a=n.find(".ghx-chart-blanket.ghx-no-ie8").empty();0===a.length&&(a=r("<div></div>").addClass("ghx-chart-blanket ghx-blank-state").appendTo(n)),a.append(t)},e.hideIE8SupportMessage=function(){e.getChartContentElem(!0).find(".ghx-chart-blanket.ghx-no-ie8").remove()},e.showToast=function(){function t(t){var e=r("#ghx-report-scrollarea"),n=e.offset().top-t.offset().top;return Math.max(n,0)+o}var n=1e3,a=500,h=1e3,o=20,c=null;return function(i){var s=e.getChartGroup(!0),l=s.find(".ghx-chart-toast");0===l.length&&(l=r("<div></div>").addClass("ghx-chart-toast").appendTo(s)),l.stop().text(i).css({opacity:0,top:t(s),right:o}).animate({opacity:.9},a),null!==c&&clearTimeout(c),c=setTimeout(function(){l.closest("html").length&&l.fadeOut(h,function(){l.remove()})},n)}}(),e.showChartUpdatedToast=function(){e.showToast("Chart updated")},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartView.soy' */
// This file was automatically generated from ChartView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.chartview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.chartview == 'undefined') { GH.tpl.chartview = {}; }


GH.tpl.chartview.renderChartControls = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-timeframe">' + GH.tpl.charttimeframes.renderChartTimeFrame(null) + '</div><div id="ghx-chart-filter">' + GH.tpl.chartfilters.renderChartFilter(null) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderChartControls.soyTemplateName = 'GH.tpl.chartview.renderChartControls';
}


GH.tpl.chartview.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-overview-group"><h4></h4><p class="ghx-description"></p><div id="ghx-chart-overview"></div></div><div id="ghx-chart-legend"></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderChartBody.soyTemplateName = 'GH.tpl.chartview.renderChartBody';
}


GH.tpl.chartview.renderDataExceeded = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning closeable"><p><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Maximum number of viewable issues exceeded for this chart.') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderDataExceeded.soyTemplateName = 'GH.tpl.chartview.renderDataExceeded';
}


GH.tpl.chartview.renderCfdTooltip = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip"' + ((opt_data.changes.length > 8) ? 'class="ghx-alt"' : '') + '>';
  if (opt_data.changes.length > 8) {
    var changeList22 = opt_data.changes;
    var changeListLen22 = changeList22.length;
    for (var changeIndex22 = 0; changeIndex22 < changeListLen22; changeIndex22++) {
      var changeData22 = changeList22[changeIndex22];
      output += ((! (changeIndex22 == 0)) ? ', ' : '') + '<strong>' + soy.$$escapeHtml(changeData22.key) + '</strong>: ' + ((changeData22.columnFrom) ? soy.$$escapeHtml(changeData22.columnFrom) + ' >> ' : '') + ((changeData22.columnTo) ? soy.$$escapeHtml(changeData22.columnTo) : '');
    }
  } else {
    var changeList38 = opt_data.changes;
    var changeListLen38 = changeList38.length;
    for (var changeIndex38 = 0; changeIndex38 < changeListLen38; changeIndex38++) {
      var changeData38 = changeList38[changeIndex38];
      output += ((! (changeIndex38 == 0)) ? '<br/>' : '') + '<strong>' + soy.$$escapeHtml(changeData38.key) + '</strong><br/>' + ((changeData38.columnFrom) ? soy.$$escapeHtml(changeData38.columnFrom) + ' >> ' : '') + ((changeData38.columnTo) ? soy.$$escapeHtml(changeData38.columnTo) : '');
    }
  }
  output += '<br/>' + soy.$$escapeHtml(opt_data.time) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderCfdTooltip.soyTemplateName = 'GH.tpl.chartview.renderCfdTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartFilters.js' */
!function(){"use strict";var t=require("aui/inline-dialog");GH.ChartFilters={},GH.ChartFilters.rapidViewConfig={},GH.ChartFilters.columns=[],GH.ChartFilters.quickFilters=[],GH.ChartFilters.swimlanes=[],GH.ChartFilters.chartType=null,GH.ChartFilters.defaultColumns=[],GH.ChartFilters.init=function(){GH.ChartUtils.registerInlineDialogHacks("chartFiltersInlineDialog")},GH.ChartFilters.update=function(t,i,e){GH.ChartFilters.chartType=t,GH.ChartFilters.rapidViewConfig=i,GH.ChartFilters.defaultColumns=e.defaultColumns,GH.ChartFilters.initializeColumns(t),GH.ChartFilters.initializeQuickFilters(t),GH.ChartFilters.initializeSwimlanes(t);var r=GH.ChartFilters.getDefaultColumnIds(),a=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.columns."+t,r);a.length<1&&(a=r),GH.ChartFilters.setActiveColumnIds(a);var l=GH.ChartFilters.getDefaultQuickFilterIds(),s=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.quickFilters",l);GH.ChartFilters.setActiveQuickFilterIds(s);var n=GH.ChartFilters.getDefaultSwimlaneIds(),u=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.swimlanes",n);u.length<1&&(u=n),GH.ChartFilters.setActiveSwimlaneIds(u),GH.ChartFilters.updateFilterInfo()},GH.ChartFilters.updateFilterInfo=function(){var t=GH.ChartFilters.isDefaultColumns()&&GH.ChartFilters.isDefaultQuickFilters()&&GH.ChartFilters.isDefaultSwimlanes(),i=AJS.$("#js-chart-filter"),e=AJS.$(i).find(".aui-icon"),r=AJS.$(e).text();t?(i.addClass("ghx-icon-hide"),e.removeAttr("title")):(i.removeClass("ghx-icon-hide"),e.attr("title",r))},GH.ChartFilters.addRequestParams=function(t){var i=[];_.each(GH.ChartFilters.swimlanes,function(t,e){t.active&&i.push(t.id)}),i.length>0&&(t.swimlaneId=i);var e=[];_.each(GH.ChartFilters.quickFilters,function(t,i){t.active&&e.push(t.id)}),e.length>0&&(t.quickFilterId=e);var r=[];_.each(GH.ChartFilters.columns,function(t){t.active&&r.push(t.id)}),r.length>0&&(t.columnId=r)},GH.ChartFilters.initializeColumns=function(t){for(var i=GH.ChartFilters.rapidViewConfig.columns,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.columns=e},GH.ChartFilters.getColumns=function(){return GH.ChartFilters.columns},GH.ChartFilters.isDefaultColumns=function(){for(var t=GH.ChartFilters.getDefaultColumns(),i=0;i<GH.ChartFilters.columns.length;i++)if(GH.ChartFilters.columns[i].active!=t[i])return!1;return!0},GH.ChartFilters.getDefaultColumnIds=function(){for(var t=GH.ChartFilters.getDefaultColumns(),i=[],e=0;e<GH.ChartFilters.columns.length;e++)t[e]&&i.push(GH.ChartFilters.columns[e].id);return i},GH.ChartFilters.getActiveColumns=function(){return _.filter(GH.ChartFilters.columns,function(t){return t.active})},GH.ChartFilters.getActiveColumnIds=function(){for(var t=[],i=0;i<GH.ChartFilters.columns.length;i++)GH.ChartFilters.columns[i].active&&t.push(GH.ChartFilters.columns[i].id);return t},GH.ChartFilters.setActiveColumnIds=function(t){_.each(GH.ChartFilters.columns,function(i){i.active=!1,_.each(t,function(t){t==i.id&&(i.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.columns."+GH.ChartFilters.chartType,t)},GH.ChartFilters.getDefaultColumns=function(){return GH.ChartFilters.defaultColumns},GH.ChartFilters.isColumnActive=function(t){var i=GH.ChartFilters.getColumn(t);return!!i&&i.active},GH.ChartFilters.getColumn=function(t){for(var i=0;i<GH.ChartFilters.columns.length;i++){var e=GH.ChartFilters.columns[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeQuickFilters=function(t){for(var i=GH.ChartFilters.rapidViewConfig.quickFilters,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.quickFilters=e},GH.ChartFilters.isDefaultQuickFilters=function(){return 0===GH.ChartFilters.getActiveQuickFilterIds().length},GH.ChartFilters.getDefaultQuickFilterIds=function(){return[]},GH.ChartFilters.getActiveQuickFilterIds=function(){var t=[];return _.each(GH.ChartFilters.quickFilters,function(i){i.active&&t.push(i.id)}),t},GH.ChartFilters.setActiveQuickFilterIds=function(t){_.each(GH.ChartFilters.quickFilters,function(i){i.active=!1,_.each(t,function(t){t==i.id&&(i.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.quickFilters",t)},GH.ChartFilters.getQuickFilters=function(){return GH.ChartFilters.quickFilters},GH.ChartFilters.isQuickFilterActive=function(t){var i=GH.ChartFilters.getQuickFilter(t);return!!i&&i.active},GH.ChartFilters.getQuickFilter=function(t){for(var i=0;i<GH.ChartFilters.quickFilters.length;i++){var e=GH.ChartFilters.quickFilters[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeSwimlanes=function(t){for(var i=GH.ChartFilters.rapidViewConfig.swimlanes,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.swimlanes=e},GH.ChartFilters.isDefaultSwimlanes=function(){return GH.ChartFilters.getDefaultSwimlaneIds().length==GH.ChartFilters.getActiveSwimlaneIds().length},GH.ChartFilters.getDefaultSwimlaneIds=function(){var t=[];return _.each(GH.ChartFilters.swimlanes,function(i){t.push(i.id)}),t},GH.ChartFilters.getActiveSwimlaneIds=function(){var t=[];return _.each(GH.ChartFilters.swimlanes,function(i){i.active&&t.push(i.id)}),t},GH.ChartFilters.setActiveSwimlaneIds=function(t){var i=_.filter(t,function(t){return _.find(GH.ChartFilters.swimlanes,function(i){return t==i.id})});0===i.length&&(i=_.pluck(GH.ChartFilters.swimlanes,"id")),_.each(GH.ChartFilters.swimlanes,function(t){t.active=!1,_.each(i,function(i){i==t.id&&(t.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.swimlanes",i)},GH.ChartFilters.getSwimlanes=function(){return GH.ChartFilters.swimlanes},GH.ChartFilters.isSwimlaneActive=function(t){var i=GH.ChartFilters.getSwimlane(t);return!!i&&i.active},GH.ChartFilters.getSwimlane=function(t){for(var i=0;i<GH.ChartFilters.swimlanes.length;i++){var e=GH.ChartFilters.swimlanes[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeDialog=function(){AJS.$("#inline-dialog-chartFiltersInlineDialog").remove(),t.current&&t.current.hide();var i={width:500,cacheContent:!1,hideDelay:6e4};t("#js-chart-filter","chartFiltersInlineDialog",GH.ChartFilters.renderChartFiltersDialog,i)},GH.ChartFilters.renderChartFiltersDialog=function(i,e,r){var a=GH.ChartFilters.getColumns(),l=GH.ChartFilters.getSwimlanes(),s=GH.ChartFilters.getQuickFilters();i.html(GH.tpl.chartfilters.renderChartFilters({columns:a,swimlanes:l,quickFilters:s})),i.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),i.find(".js-toggle").click(function(t){t.preventDefault();var e=AJS.$(this),r=e.hasClass("active"),a=!r;a?e.addClass("active"):e.removeClass("active"),GH.ChartFilters.checkFilterValidity(i)}),i.find(".js-save-button").click(function(t){t.preventDefault(),GH.ChartFilters.handleDialogSave(i)}),i.find(".js-cancel-button").click(function(i){t.current.hide()}),r()},GH.ChartFilters.checkFilterValidity=function(t){t.find(".ghx-error").remove();var i=!0;return t.find(".js-column-options .js-toggle.active").length<1&&(i=!1,t.find(".js-column-options").after('<div class="ghx-error">'+"At least one column must be selected"+"</div>")),t.find(".js-swimlane-options .js-toggle.active").length<1&&(i=!1,t.find(".js-swimlane-options").after('<div class="ghx-error">'+"At least one swimlane must be selected"+"</div>")),i},GH.ChartFilters.handleDialogSave=function(i){if(GH.ChartFilters.checkFilterValidity(i)){var e=[];i.find(".js-column-options .js-toggle").each(function(t,i){var r=AJS.$(i),a=r.attr("data-column-id"),l=r.hasClass("active");l&&e.push(parseInt(a,10))});var r=[];i.find(".js-swimlane-options .js-toggle").each(function(t,i){var e=AJS.$(i),a=e.attr("data-swimlane-id"),l=e.hasClass("active");l&&r.push(parseInt(a,10))});var a=[];i.find(".js-quickfilter-options .js-toggle").each(function(t,i){var e=AJS.$(i),r=e.attr("data-quickfilter-id"),l=e.hasClass("active");l&&a.push(parseInt(r,10))});var l=!_.isEqual(r,GH.ChartFilters.getActiveSwimlaneIds()),s=!_.isEqual(a,GH.ChartFilters.getActiveQuickFilterIds()),n=!_.isEqual(e,GH.ChartFilters.getActiveColumnIds());GH.ChartFilters.setActiveColumnIds(e),GH.ChartFilters.setActiveSwimlaneIds(r),GH.ChartFilters.setActiveQuickFilterIds(a),GH.RapidBoard.State.pushState(),AJS.$(GH).trigger("chartFiltersChanged",{swimlanesChanged:l,quickFiltersChanged:s,columnsChanged:n}),GH.ChartFilters.updateFilterInfo(),t.current.hide()}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartFilters.soy' */
// This file was automatically generated from ChartFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.chartfilters.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.chartfilters == 'undefined') { GH.tpl.chartfilters = {}; }


GH.tpl.chartfilters.renderChartFilter = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy3 = ' ' + soy.$$escapeHtml('Chart is using non-default settings');
  var buttonText__soy6 = ' ' + soy.$$escapeHtml('Refine report');
  output += aui.buttons.button({id: ['js-chart-filter'], extraClasses: ['aui-button-icon', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: buttonText__soy6, iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-info', iconText: tooltip__soy3, iconType: 'aui'});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartfilters.renderChartFilter.soyTemplateName = 'GH.tpl.chartfilters.renderChartFilter';
}


GH.tpl.chartfilters.renderChartFilters = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-chart-filters ghx-inline-dialog-content"><h2>' + soy.$$escapeHtml('Report Filters') + '</h2><form class="aui gh-aui"><fieldset><h3>' + soy.$$escapeHtml('Columns') + '</h3><div class="ghx-group aui-buttons js-column-options">';
  var columnList22 = opt_data.columns;
  var columnListLen22 = columnList22.length;
  for (var columnIndex22 = 0; columnIndex22 < columnListLen22; columnIndex22++) {
    var columnData22 = columnList22[columnIndex22];
    if (columnData22.active) {
      var buttonText__soy25 = '' + soy.$$escapeHtml(columnData22.name);
      var buttonClass__soy27 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-column-id': columnData22.id}, extraClasses: [buttonClass__soy27], text: buttonText__soy25});
    } else {
      var buttonText__soy34 = '' + soy.$$escapeHtml(columnData22.name);
      var buttonClass__soy36 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-column-id': columnData22.id}, extraClasses: [buttonClass__soy36], text: buttonText__soy34});
    }
  }
  output += '</div><h3>' + soy.$$escapeHtml('Swimlanes') + '</h3><div class="ghx-group aui-buttons js-swimlane-options">';
  var swimlaneList46 = opt_data.swimlanes;
  var swimlaneListLen46 = swimlaneList46.length;
  for (var swimlaneIndex46 = 0; swimlaneIndex46 < swimlaneListLen46; swimlaneIndex46++) {
    var swimlaneData46 = swimlaneList46[swimlaneIndex46];
    if (swimlaneData46.active) {
      var buttonText__soy49 = '' + soy.$$escapeHtml(swimlaneData46.name);
      var buttonClass__soy51 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-swimlane-id': swimlaneData46.id}, extraClasses: [buttonClass__soy51], text: buttonText__soy49});
    } else {
      var buttonText__soy58 = '' + soy.$$escapeHtml(swimlaneData46.name);
      var buttonClass__soy60 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-swimlane-id': swimlaneData46.id}, extraClasses: [buttonClass__soy60], text: buttonText__soy58});
    }
  }
  output += '</div><h3>' + soy.$$escapeHtml('Quick Filters') + '</h3><div class="ghx-group aui-buttons js-quickfilter-options">';
  var quickFilterList70 = opt_data.quickFilters;
  var quickFilterListLen70 = quickFilterList70.length;
  for (var quickFilterIndex70 = 0; quickFilterIndex70 < quickFilterListLen70; quickFilterIndex70++) {
    var quickFilterData70 = quickFilterList70[quickFilterIndex70];
    if (quickFilterData70.active) {
      var buttonText__soy73 = '' + soy.$$escapeHtml(quickFilterData70.name);
      var buttonClass__soy75 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-quickfilter-id': quickFilterData70.id}, extraClasses: [buttonClass__soy75], text: buttonText__soy73});
    } else {
      var buttonText__soy82 = '' + soy.$$escapeHtml(quickFilterData70.name);
      var buttonClass__soy84 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-quickfilter-id': quickFilterData70.id}, extraClasses: [buttonClass__soy84], text: buttonText__soy82});
    }
  }
  output += '</div></fieldset><div class="buttons-container"><div class="buttons"><button class="aui-button js-save-button">' + soy.$$escapeHtml('Apply') + '</button><a class="js-cancel-button"><span>' + soy.$$escapeHtml('Cancel') + '</span></a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartfilters.renderChartFilters.soyTemplateName = 'GH.tpl.chartfilters.renderChartFilters';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTimeFrames.js' */
!function(){"use strict";var e=require("aui/inline-dialog");GH.ChartTimeFrames={},GH.ChartTimeFrames.day=864e5,GH.ChartTimeFrames.momentDateFormat="LL",GH.ChartTimeFrames.momentTimeFormat="LLL",GH.ChartTimeFrames.from=null,GH.ChartTimeFrames.to=null,GH.ChartTimeFrames.days=7,GH.ChartTimeFrames.now=(new Date).getTime(),GH.ChartTimeFrames.isRelative=!0,GH.ChartTimeFrames.minXValue=null,GH.ChartTimeFrames.chartId=null,GH.ChartTimeFrames.init=function(){GH.ChartUtils.registerInlineDialogHacks("chartTimeFramesInlineDialog")},GH.ChartTimeFrames.isValidDate=function(e){var a=function(e){return 0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()};return a(Date.parseDate(e,GH.TimeFormat.dateFormat))&&a(Date.parseDate(e,GH.TimeFormat.dateFormat))},GH.ChartTimeFrames.getDateAsText=function(e){return new Date(e).print(GH.TimeFormat.dateFormat)},GH.ChartTimeFrames.roundMillisToNextDay=function(e){var a,t=GH.ChartTimeFrames.roundMillisToBeginOfDay(e);return a=t<e?t+GH.ChartTimeFrames.day:t},GH.ChartTimeFrames.roundMillisToBeginOfDay=function(e){var a=Math.floor(e/GH.ChartTimeFrames.day);return a*GH.ChartTimeFrames.day},GH.ChartTimeFrames.millisToDays=function(e){return e?e/GH.ChartTimeFrames.day:e},GH.ChartTimeFrames.daysToMillis=function(e){return e?e*GH.ChartTimeFrames.day:e},GH.ChartTimeFrames.timeFrames=[{relative:!0,days:7,name:"Past Week"},{relative:!0,days:14,name:"Past 2 Weeks"},{relative:!0,days:30,name:"Past Month"},{relative:!0,days:90,name:"Past 3 Months"},{relative:!0,days:180,name:"Past 6 Months"},{relative:!0,days:0,name:"All Time"},{relative:!1,days:-1,name:"Custom"}],GH.ChartTimeFrames.getSelectedTimeFrame=function(){for(var e=0;e<GH.ChartTimeFrames.timeFrames.length;e++){if(!GH.ChartTimeFrames.isRelative&&!GH.ChartTimeFrames.timeFrames[e].relative)return GH.ChartTimeFrames.timeFrames[e];if(GH.ChartTimeFrames.timeFrames[e].days==GH.ChartTimeFrames.days)return GH.ChartTimeFrames.timeFrames[e]}return!1},GH.ChartTimeFrames.getChartStartDate=function(){var e=GH.ChartTimeFrames.day;if(GH.ChartTimeFrames.isRelative){if(0==GH.ChartTimeFrames.days){var a=GH.ChartTimeFrames.minXValue,t=GH.ChartTimeFrames.now-1*e;return(!a||a>t)&&(a=t),a}return GH.ChartTimeFrames.now-GH.ChartTimeFrames.days*e}return GH.ChartTimeFrames.from},GH.ChartTimeFrames.getChartEndDate=function(){GH.ChartTimeFrames.day;return GH.ChartTimeFrames.isRelative?GH.ChartTimeFrames.now:GH.ChartTimeFrames.to},GH.ChartTimeFrames.update=function(){var e=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.days",7),a=(new Date).getTime();a=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.from",a);var t=(new Date).getTime()-7*GH.ChartTimeFrames.day;t=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.to",t),GH.ChartTimeFrames.setNewChartLimits(e,a,t,!0)},GH.ChartTimeFrames.setBoundaries=function(e,a){GH.ChartTimeFrames.now=a,GH.ChartTimeFrames.minXValue=e||a-7*GH.ChartTimeFrames.day,GH.ChartTimeFrames.updateDatesInfo()},GH.ChartTimeFrames.updateDialogFromAndToDates=function(e){var a=e.find(".js-timeframe-button.active"),t=a.attr("data-timeframe-id");if(t!=-1){var r,i=GH.ChartTimeFrames.now;r=t>0?i-t*GH.ChartTimeFrames.day:GH.ChartTimeFrames.minXValue;var m=new Date(r).print(GH.TimeFormat.dateFormat),s=new Date(i).print(GH.TimeFormat.dateFormat);e.find("#ghx-field-from").val(m),e.find("#ghx-field-to").val(s)}},GH.ChartTimeFrames.updateDatesInfo=function(){var e=GH.ChartTimeFrames.getSelectedTimeFrame();e.relative&&(GH.ChartTimeFrames.to=GH.ChartTimeFrames.now,e.days>0?GH.ChartTimeFrames.from=GH.ChartTimeFrames.to-e.days*GH.ChartTimeFrames.day:GH.ChartTimeFrames.from=GH.ChartTimeFrames.minXValue);var a=new Date(GH.ChartTimeFrames.from).print(GH.TimeFormat.dateFormat),t=new Date(GH.ChartTimeFrames.to).print(GH.TimeFormat.dateFormat),r=AJS.format("{0} to {1} ({2})",a,t,e.name);AJS.$(".js-timeframe-info").text(r)},GH.ChartTimeFrames.setNewChartLimits=function(e,a,t,r){e<0?(GH.ChartTimeFrames.from=a,GH.ChartTimeFrames.to=t,GH.ChartTimeFrames.isRelative=!1,GH.ChartTimeFrames.days=-1):(GH.ChartTimeFrames.isRelative=!0,GH.ChartTimeFrames.days=e),GH.RapidBoard.State.setBoardSetting("chart.timeframe.days",GH.ChartTimeFrames.days),GH.RapidBoard.State.setBoardSetting("chart.timeframe.from",a),GH.RapidBoard.State.setBoardSetting("chart.timeframe.to",t),GH.ChartTimeFrames.updateDatesInfo(),r||AJS.$(GH).trigger("chartTimeFramesChanged")},GH.ChartTimeFrames.initializeDialog=function(a){AJS.$("#inline-dialog-chartTimeFramesInlineDialog").remove(),GH.ChartTimeFrames.chartId=a;var t={width:710,cacheContent:!1,hideDelay:6e4};e("#js-chart-timeframe","chartTimeFramesInlineDialog",GH.ChartTimeFrames.renderChartTimeFramesDialog,t)},GH.ChartTimeFrames.renderChartTimeFramesDialog=function(a,t,r){var i=GH.ChartTimeFrames.from?new Date(GH.ChartTimeFrames.from).print(GH.TimeFormat.dateFormat):"",m=GH.ChartTimeFrames.to?new Date(GH.ChartTimeFrames.to).print(GH.TimeFormat.dateFormat):"",s=!1;GH.ChartTimeFrames.chartId==GH.CFDController.id?s="Alternatively, click and drag cursor across chart to select date range (double-click overview to reset).":GH.ChartTimeFrames.chartId==GH.Reports.ControlChartController.id&&(s="Alternatively, click and drag cursor across chart to select date range (double-click to reset)."),a.html(GH.tpl.charttimeframes.renderChartTimeFrames({timeFrames:GH.ChartTimeFrames.timeFrames,relative:GH.ChartTimeFrames.isRelative,days:GH.ChartTimeFrames.days,from:i,to:m,desc:s})),a.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),GH.ChartTimeFrames.updateDialogFromAndToDates(a);var n=function(e){e.hasClass("disabled")||(a.find(".js-timeframe-button").removeClass("active"),e.addClass("active"),GH.ChartTimeFrames.updateDialogFromAndToDates(a))};a.find(".js-timeframe-button").click(function(e){e.preventDefault(),n(AJS.$(this))}),Calendar.setup({firstDay:0,inputField:"ghx-field-from",button:"ghx-field-from-button",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers,showsTime:!1,onUpdate:function(){n(a.find('.js-timeframe-button[data-timeframe-id="-1"]'))}}),Calendar.setup({firstDay:0,inputField:"ghx-field-to",button:"ghx-field-to-button",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers,showsTime:!1,onUpdate:function(){n(a.find('.js-timeframe-button[data-timeframe-id="-1"]'))}}),a.find(".js-save-button").click(function(e){e.preventDefault(),GH.ChartTimeFrames.handleDialogSave(a)}),a.find(".js-cancel-button").click(function(a){e.current.hide()}),r()},GH.ChartTimeFrames.handleDialogSave=function(a){var t=a.find(".js-timeframe-button.active"),r=parseInt(t.attr("data-timeframe-id"),10),i=null,m=null;if(a.find(".ghx-error").remove(),r<0){var s=a.find("#ghx-field-from").val();if(!s||!GH.ChartTimeFrames.isValidDate(s))return void a.find("#ghx-field-from").closest(".field-group").append('<div class="ghx-error">'+"From-date required"+"</div>");s=Date.parseDate(s,GH.TimeFormat.dateFormat);var n=a.find("#ghx-field-to").val();if(!n||!GH.ChartTimeFrames.isValidDate(n))return void a.find("#ghx-field-to").closest(".field-group").append('<div class="ghx-error">'+"To-date required"+"</div>");if(n=Date.parseDate(n,GH.TimeFormat.dateFormat),s.getTime()>n.getTime())return void a.find("#ghx-field-to").closest(".field-group").append('<div class="ghx-error">'+"From-date must be before to-date"+"</div>");i=s.getTime(),m=n.getTime()}GH.ChartTimeFrames.setNewChartLimits(r,i,m),GH.RapidBoard.State.pushState(),e.current&&e.current.hide()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChartTimeFrames.soy' */
// This file was automatically generated from ChartTimeFrames.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.charttimeframes.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.charttimeframes == 'undefined') { GH.tpl.charttimeframes = {}; }


GH.tpl.charttimeframes.renderChartTimeFrame = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: ['js-chart-timeframe'], extraClasses: ['aui-button-subtle', 'ghx-dropdown-trigger', 'js-timeframe-info', 'ghx-pull-left'], text: ''});
};
if (goog.DEBUG) {
  GH.tpl.charttimeframes.renderChartTimeFrame.soyTemplateName = 'GH.tpl.charttimeframes.renderChartTimeFrame';
}


GH.tpl.charttimeframes.renderChartTimeFrames = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-chart-filters ghx-inline-dialog-content"><h2>' + soy.$$escapeHtml('Report Timeframe') + '</h2><form class="aui gh-aui"><fieldset><h3>' + soy.$$escapeHtml('Timeframe') + '</h3><div class="ghx-group aui-buttons js-timeframe-options">';
  var timeFrameList13 = opt_data.timeFrames;
  var timeFrameListLen13 = timeFrameList13.length;
  for (var timeFrameIndex13 = 0; timeFrameIndex13 < timeFrameListLen13; timeFrameIndex13++) {
    var timeFrameData13 = timeFrameList13[timeFrameIndex13];
    if (timeFrameData13.days == opt_data.days) {
      var buttonText__soy16 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy18 = 'js-timeframe-button active';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy18], text: buttonText__soy16});
    } else if (timeFrameData13.disabled) {
      var buttonText__soy25 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy27 = 'js-timeframe-button disabled';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy27], text: buttonText__soy25});
    } else {
      var buttonText__soy34 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy36 = 'js-timeframe-button';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy36], text: buttonText__soy34});
    }
  }
  output += '</div><div class="field-group"><label for="ghx-field-from">' + soy.$$escapeHtml('From') + '</label><input class="text medium-field" type="text" id="ghx-field-from" value="' + soy.$$escapeHtml(opt_data.from) + '"><span id="ghx-field-from-button" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span></div><div class="field-group"><label for="ghx-field-to">' + soy.$$escapeHtml('To') + '</label><input class="text medium-field" type="text" id="ghx-field-to" value="' + soy.$$escapeHtml(opt_data.to) + '"><span id="ghx-field-to-button" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span></div>' + ((opt_data.desc) ? '<div class="field-group"><div class="description">' + soy.$$escapeHtml(opt_data.desc) + '</div></div>' : '') + '</fieldset><div class="buttons-container"><div class="buttons"><button class="aui-button js-save-button">' + soy.$$escapeHtml('Apply') + '</button><a class="js-cancel-button"><span>' + soy.$$escapeHtml('Cancel') + '</span></a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttimeframes.renderChartTimeFrames.soyTemplateName = 'GH.tpl.charttimeframes.renderChartTimeFrames';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/CFDController.js' */
define("jira-agile/rapid/ui/chart/cfd-controller",["require"],function(a){"use strict";var i=a("jquery"),r=a("jira-agile/rapid/analytics-tracker"),e=a("jira-agile/rapid/ui/chart/cfd-data"),t=a("jira-agile/rapid/ui/chart/cfd-view"),n=a("jira-agile/rapid/ui/chart/chart-controller"),d=a("jira-agile/rapid/ui/chart/chart-view"),o=a("jira-agile/rapid/ajax"),l=GH.ChartFilters,h=GH.ChartTimeFrames,s=GH.ChartUtils,u=GH.RapidBoard.State,c=GH.tpl,p={};return p.id="cumulativeFlowDiagram",p.displayed=!1,p.rapidViewData={},p.rapidViewConfig={},p.analytics=new r("gh.report.cumulativeFlowDiagram"),p.setRapidView=function(a){p.rapidViewData=a||{}},p.isApplicable=function(){return!u.isAgilityBoard()},p.getNormalizedFromInternal=function(){return s.getTimeFrameReportUrlParams(p.id)},p.toUrl=function(a){return s.timeFrameReportParamsToUrl(a)},p.updateInternalFromNormalized=function(a){s.updateFromNormalizedStateDateTimeParams(a)},p.getNormalizedFromUrl=function(a){return s.getNormalizedFromUrlForTimeFrameReport(a)},p.show=function(){if(p.displayed=!0,p.rapidViewData){i(GH).unbind("."+p.id).bind("chartTimeFramesChanged."+p.id,p.handleChartTimeFramesChangedEvent).bind("chartFiltersChanged."+p.id,p.handleChartFiltersChangedEvent),t.show(),p.renderChartView();var a="show."+(p.rapidViewConfig.sprintSupportEnabled?"scrum":"kanban");p.analytics.trigger(a)}},p.hide=function(){p.displayed=!1,t.hide(),i("#ghx-chart-controls").hide(),i(GH).unbind("."+p.id)},p.renderChartView=function(){p.initializeControls(),d.getChartContentElem(!0).html(c.chartview.renderChartBody()),d.showSpinner(),n.loadRapidViewConfig(p,p.loadChartData)},p.initializeControls=function(){d.hideChartControls(),d.getChartControls(!0).html(c.chartview.renderChartControls()),l.initializeDialog(),h.initializeDialog(p.id)},p.loadChartData=function(){p.updateTools(),d.showChartControls();var a={rapidViewId:u.getRapidViewId()};l.addRequestParams(a),o.get({url:"/rapid/charts/cumulativeflowdiagram.json",data:a},"rapidChartData").done(p.processChartData).always(d.hideSpinner)},p.updateTools=function(){h.update();var a=p.rapidViewConfig,i=p.buildChartFilterConfig(a);l.update(p.id,a,i),u.pushState()},p.buildChartFilterConfig=function(a){var i={};i.defaultColumns=[];for(var r=0;r<a.columns.length;r++)i.defaultColumns.push(!0);return i},p.processChartData=function(a){p.displayed&&(e.setRawData(a),h.setBoundaries(a.firstChangeTime,a.now),t.renderChart(a))},p.handleChartFiltersChangedEvent=function(a,i){p.displayed&&p.loadChartData()},p.handleChartTimeFramesChangedEvent=function(a){if(p.displayed){var i=e.getRawData();t.renderChart(i)}},p});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/CFDData.js' */
define("jira-agile/rapid/ui/chart/cfd-data",["require"],function(n){"use strict";var u=n("jquery"),a=n("underscore"),e=AJS.escapeHtml,o={};return o.raw={},o.getRawData=function(){return o.raw},o.setRawData=function(n){o.raw=n},o.computeSeries=function(n,u){var o=[],t=n.columnChanges,r=n.columns;a.each(r,function(n){n.issueCount=0,n.data=[]}),a.each(t,function(n,u){u=parseInt(u,10),a.each(n,function(n){a.each(r,function(a,e){n.columnFrom==e&&a.issueCount--,n.columnTo==e&&a.issueCount++,a.data.push([u,a.issueCount])})})});for(var c=r.length-1;c>=0;c--){var i=r[c],s=i.data;s.length>0&&s[s.length-1][0]<u&&s.push([u,s[s.length-1][1]]),o.push({data:s,label:e(String(i.name)),columnIndex:c})}return o},o.getChangeDetails=function(n){var e=o.raw,t=[];return a.each(e.columnChanges[n],function(n){n=u.extend(!0,{},n),void 0!=n.columnFrom&&(n.columnFrom=e.columns[n.columnFrom].name),void 0!=n.columnTo&&(n.columnTo=e.columns[n.columnTo].name),t.push(n)}),t},o.isRealDatapoint=function(n,u){var e=o.raw,t=e.columnChanges[n];return a.any(t,function(n){return u==n.columnTo})},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/CFDView.js' */
define("jira-agile/rapid/ui/chart/cfd-view",["require"],function(e){"use strict";var t,i,n=e("jquery"),o=e("underscore"),a=e("jira-agile/rapid/ui/chart/chart"),r=e("jira-agile/rapid/ui/chart/chart-view"),s=e("jira-agile/rapid/global-events");s.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/cfd-controller"),i=e("jira-agile/rapid/ui/chart/cfd-data")});var l=GH.ChartFilters,d=GH.ChartTimeFrames,c=GH.TimeFormat,h=GH.FlotChartUtils,u=GH.tpl,v={};return v.COLUMN_COLORS=["#FF800D","#23819C","#9669FE","#59955C","#B9264F","#B05F3C","#2966B8","#9A03FE","#FF2626","#FF5353","#C8B400","#79FC4E","#8C8CFF","#C48484","#4FBDDD","#FFBE28","#99C7FF","#AE70ED","#FFA8A8","#DAAF85"],v.context={},v.previousPlotHoverPoint=null,v.init=function(){},v.show=function(){n(GH).unbind(a.EVENT_RESIZE_REDRAW+"."+t.id),n(GH).bind(a.EVENT_RESIZE_REDRAW+"."+t.id,function(e,i){i.id===t.id&&(v.resetRealPoints(),v._reverseLegendTable())})},v.hide=function(){n(GH).unbind(a.EVENT_RESIZE_REDRAW+"."+t.id),a.destroy(t.id+"Overview"),a.destroy(t.id)},v.renderChart=function(e){a.destroy(t.id+"Overview"),a.destroy(t.id);var o=d.getChartStartDate(),s=d.getChartEndDate(),c=i.computeSeries(e,e.now),u=v.getColors(l.getColumns(),l.getActiveColumns()),p={colors:u,xaxis:{mode:"time",min:o,max:s},yaxis:{tickDecimals:0,minTickSize:1,min:0,tickLength:"full"},series:{stack:!0,lines:{show:!0,fill:1,lineWidth:1}},grid:{hoverable:!0,clickable:!0,autoHighlight:!1},mouseEnterExitEvents:!0,selection:{mode:"x"},legend:{container:null,backgroundOpacity:.5,position:"nw"}},g={colors:u,xaxis:{mode:"time"},yaxis:{show:!1},series:{stack:!0,lines:{show:!0,fill:1,lineWidth:1}},selection:{mode:"x"},legend:{show:!1}};r.hideChartStatus(),r.showChartGroup(),h.setAndAlignAxisLabels("Time","Number of Issues");var f=r.getChartView(!0),x=n("#ghx-chart-overview-group"),C=n("#ghx-chart-overview"),m=n(x).find("h4"),w=n(x).find(".ghx-description");n(m).text("Overview"),n(w).text("Click and drag cursor across chart or chart overview to select date range (double-click overview to reset)."),m.show(),w.show(),f.show(),x.show();var P=v.context={chartContainer:f,series:c,options:p,realPoints:[],showPoints:!1};f.unbind("plothover plotselected"),f.bind("plotselected",v.handleSelection),f.bind("plothover",v.handlePlotHover),P.mainChart=a.draw(t.id,f,c,p),f.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter",v.handleMouseEnter).bind("flotMouseLeave",v.handleMouseLeave),P.mainChart.hooks.drawSeries.push(v.gatherPoints),P.mainChart.hooks.draw.push(v.deferredRenderPoints),v._reverseLegendTable(),C.unbind("plotselected dblclick"),C.bind("plotselected",v.handleSelection),C.bind("dblclick",v.resetSelection),P.overviewChart=a.draw(t.id+"Overview",C,c,g),P.overviewChart.setSelection({xaxis:{from:o,to:s}},!0)},v.getColors=function(e,t){var i=[];return o.each(e,function(e,n){var a=o.any(t,function(t){return t.id==e.id});a&&i.push(v.COLUMN_COLORS.slice(n))}),i.reverse()},v._reverseLegendTable=function(){var e=r.getChartView().find(".legend").find("tbody");e.children().each(function(){e.prepend(n(this))})},v.updateTimeFrameSelection=function(){var e=d.getChartStartDate(),i=d.getChartEndDate(),n=v.context;n.options.xaxis.min=e,n.options.xaxis.max=i;var o=d.getSelectedTimeFrame();0!=o.days&&n.overviewChart.setSelection({xaxis:{from:e,to:i}},!0),n.mainChart=a.draw(t.id,n.chartContainer,n.series,n.options),v._reverseLegendTable()},v.handleSelection=function(e,t){var i=t.xaxis.from,n=t.xaxis.to;d.setNewChartLimits(-1,i,n)},v.resetSelection=function(e){var t=v.context.overviewChart.getXAxes()[0];d.setNewChartLimits(-1,t.min,t.max)},v.handlePlotHover=function(e,t,i){i?i.dataIndex!=v.previousPlotHoverPoint&&v.isRealPoint(i)&&(n("#ghx-tooltip").remove(),v.previousPlotHoverPoint=i.dataIndex,v.renderTooltip(i.datapoint[0],i.pageX,i.pageY)):(n("#ghx-tooltip").remove(),v.previousPlotHoverPoint=null)},v.isRealPoint=function(e){var t=e.series.xaxis,i=e.series.yaxis,n=t.p2c(e.datapoint[0]),a=i.p2c(e.datapoint[1]);return o.any(v.context.realPoints,function(e){var o=t.p2c(e.time),r=i.p2c(e.issueCount);return Math.abs(n-o)<1&&Math.abs(a-r)<1})},v.handleMouseEnter=function(e){var t=v.context;t.showPoints||(t.showPoints=!0,t.realPoints=[],t.mainChart.draw())},v.handleMouseLeave=function(e){var t=v.context;t.showPoints&&(t.showPoints=!1,t.mainChart.draw())},v.renderTooltip=function(e,t,o){var a=new Date(e),r=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds()),s=i.getChangeDetails(e),l=n(u.chartview.renderCfdTooltip({changes:s,time:r.print(c.dateTimePickerFormat)})).css({position:"absolute",display:"none",top:o+5});l.appendTo("body");var d=l.width(),h=n("#ghx-chart-view canvas.base");t+d>h.offset().left+h.width()?l.css({left:t-(30+d)}):l.css({left:t+15}),l.fadeIn(200)},v.resetRealPoints=function(e,t){v.context.realPoints=[]},v.gatherPoints=function(e,n,o){if(t.displayed&&v.context.showPoints)for(var a=o.datapoints,r=a.points,s=a.pointsize,l=o.xaxis,d=o.yaxis,c=0;c<r.length;c+=s){var h=r[c],u=r[c+1];if(i.isRealDatapoint(h,o.columnIndex)&&!(null==h||h<l.min||h>l.max||u<d.min||u>d.max)){var p=l.p2c(h),g=d.p2c(u);v.context.realPoints.push({x:p,y:g,time:h,issueCount:u})}}},v.deferredRenderPoints=function(e,i){t.displayed&&v.context.showPoints&&(i.save(),i.translate(e.getPlotOffset().left,e.getPlotOffset().top),i.strokeStyle="rgb(100, 100, 100)",i.fillStyle="rgba(255, 255, 255, 0.5)",o.each(v.context.realPoints,function(e){h.drawPoint(i,e)}),i.restore())},n(v.init),v});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChartController.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-controller",["require"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),r=e("jira-agile/rapid/analytics-tracker"),n=e("jira-agile/rapid/ui/chart/burndown-chart-view"),a=e("jira-agile/rapid/ui/chart/burndown-report-chart-controller"),d=e("jira-agile/rapid/ui/chart/chart"),s=e("jira-agile/rapid/ui/component/chart-picker"),o=e("jira-agile/rapid/ui/chart/chart-view"),l=e("jira-agile/rapid/ui/component/estimate-picker"),c=e("jira-agile/rapid/ajax"),p=GH.RapidBoard.State,u=GH.RapidBoard.UrlState,m={};return m.id="burndownChart",m.displayed=!1,m.rapidViewId=void 0,m.analytics=new r("gh.report.burndownChart"),m.setRapidView=function(e){m.rapidViewId=e.id,a.setRapidView(e.id)},m.getNormalizedFromInternal=function(){return{sprint:m.getSprintIdForUrl()||null,estimate:m.getEstimateIdForUrl()||null}},m.getSprintIdForUrl=function(){var e=m.sprintPicker.getSelectedItem();if(e)return e.id;var t=m.sprintPicker.getStoredSelectedItemId();return t!==-1?t:null},m.getEstimateIdForUrl=function(){var e=m.estimatePicker.getStoredSelectedItemId();return e!==-1?e:null},m.toUrl=function(e){var t={};return null!==e.sprint&&(t.sprint=e.sprint),null!==e.estimate&&(t.estimate=e.estimate),t},m.updateInternalFromNormalized=function(e){m.setSelectedSprintFromUrlState(e.sprint),m.setSelectedEstimateFromUrlState(e.estimate)},m.setSelectedSprintFromUrlState=function(e){e&&m.sprintPicker.storeSelectedItemId(e)},m.setSelectedEstimateFromUrlState=function(e){e&&m.estimatePicker.storeSelectedItemId(e)},m.getNormalizedFromUrl=function(e){return{sprint:u.normalizeNumberParam(e.sprint,null),estimate:u.normalizeStringParam(e.estimate,null)}},m.isApplicable=function(e){return e.sprintSupportEnabled&&!p.isAgilityBoard()},m.init=function(){m.sprintPicker=new s("burndown.selectedSprintId"),m.estimatePicker=new l("burndown.selectedEstimate",(!0))},m.show=function(){if(m.displayed=!0,a.show(),m.rapidViewId){var e="."+m.id;t(GH).unbind(e),t(GH).bind(d.EVENT_RESIZE_REDRAW+e,m.handleResizeEvent),m.loadChart(),m.analytics.trigger("show")}},m.hide=function(){a.hide(),m.displayed=!1,t(GH).unbind("."+m.id),d.destroy(n.id),t(GH).unbind("."+m.id)},m.loadChart=function(){n.renderChartLoading(),t(m.sprintPicker).bind("selectedItemChanged",m.handleSprintChanged),a.setNonWorkingDaysShown(p.getNonWorkingDaysShown("burndown"));var e=m.rapidViewId;m.loadSprintOptions(e).done(function(e){m.processSprintsData(e),e.sprints&&e.sprints.length>0&&m.estimatePicker.load(m.rapidViewId,m.handleEstimateChanged).done(function(){var e=m.sprintPicker.getSelectedItem(),t=m.estimatePicker.getSelectedItem();e?(a.setSprint(e),a.setEstimationStatistic(t.id),a.loadChartData()):o.hideSpinner()})})},m.loadSprintOptions=function(e){return c.get({url:"/sprintquery/"+e,data:{includeFutureSprints:!1}},"sprintOptions")},m.processSprintsData=function(e){m.displayed&&(e.sprints.reverse(),m.sprintPicker.setItems(e.sprints),m.sprintPicker.setDefaultItem(m.getDefaultSprintForPicker(e.sprints)),n.renderAndShowSprintPicker(),e.sprints&&0!==e.sprints.length||(m.estimatePicker.shouldRender=!1),p.replaceState())},m.handleSprintChanged=function(){m.displayed&&(p.pushState(),a.setSprint(m.sprintPicker.getSelectedItem()),a.loadChartData())},m.getDefaultSprintForPicker=function(e){var t=i.filter(e,function(e){return!e.closed});return t.length>0?i.first(t):i.first(e)},m.handleEstimateChanged=function(e){m.displayed&&(p.pushState(),a.setEstimationStatistic(e),a.loadChartData())},m.handleResizeEvent=function(e,t){t.id===m.id&&(t.chart.realPointsPerSeries={},setTimeout(n.addNonWorkingDaysToLegend,0))},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownReportChartController.js' */
define("jira-agile/rapid/ui/chart/burndown-report-chart-controller",["require"],function(i){"use strict";var a=i("jira-agile/rapid/ui/chart/burndown-chart-model"),t=i("jira-agile/rapid/ui/chart/burndown-chart-view"),r=i("jira-agile/rapid/ui/chart/chart-view"),n=i("jira-agile/rapid/ajax"),o={};return o.displayed=!1,o.rapidViewId=void 0,o.sprint=void 0,o.estimationStatisticId=void 0,o.nonWorkingDaysShown=void 0,o.setRapidView=function(i){o.rapidViewId=i},o.setSprint=function(i){o.sprint=i},o.setEstimationStatistic=function(i){o.estimationStatisticId=i},o.show=function(){o.displayed=!0},o.hide=function(){o.displayed=!1},o.setNonWorkingDaysShown=function(i){o.nonWorkingDaysShown=i},o.loadChartData=function(){if(o.sprint){var i={rapidViewId:o.rapidViewId,sprintId:o.sprint.id,statisticFieldId:o.estimationStatisticId};return n.get({url:"/rapid/charts/scopechangeburndownchart.json",data:i},"rapidChartData").done(o.processChartData).fail(r.hideSpinner)}},o.processChartData=function(i){o.displayed&&(a.setRawData(i),t.setNonWorkingDaysShown(o.nonWorkingDaysShown),t.gadgetMode||t.wallboardMode||(r.getChartGroup().find(".ghx-sprint-goal").remove(),r.getChartGroup().prepend(GH.tpl.board.x.renderSprintGoal({goal:o.sprint.goal}))),t.showChart())},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChartModel.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-model",["require"],function(e){"use strict";var t,a,i=e("underscore"),n=e("jira-agile/rapid/ui/chart/burndown-chart-view"),r=e("jira-agile/rapid/ui/chart/burndown-rate"),s=e("jira-agile/rapid/ui/chart/chart-colors"),l=e("jira-agile/rapid/global-events"),u=GH.ChartUtils,c=GH.FlotChartUtils;l.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/burndown-table-producer"),a=e("jira-agile/rapid/ui/chart/burndown-timeline-producer")});var o={};return o.rawData={},o.tableHandler={},o.timelineData={},o.series=[],o.seriesData={},o.yAxisData={},o.dataTable={},o.setRawData=function(e){o.rawData=e,r.setRateData(e.workRateData),o.prepareData()},o.getStatistic=function(){return o.rawData.statisticField},o.isTimeTracking=function(){return"timeestimate"===o.getStatistic().fieldId},o.getParentIssueKey=function(e){return!i.isUndefined(o.rawData.issueToParentKeys)&&(o.rawData.issueToParentKeys[e]||!1)},o.prepareData=function(){var e=o.isTimeTracking();e?o.tableHandler=t.TimeTrackingTableHandler:o.tableHandler=t.EstimateStatisticTableHandler;var i=u.getStatisticConsumer(e);o.timelineData=a.calculateTimelineData(o.rawData,i),o.calculateSeries();var n=o.rawData.lastUserWhoClosedHtml,r=t.getDataTable(o.timelineData,o.tableHandler,i,n);o.renderDataTableValues(r),o.dataTable=r},o.getChartStartTime=function(){var e=o.timelineData;return e.startTime},o.calculateGuidelineSeries=function(e){var t=e.startValue,a=r.getRateDefinitions(),n=r.limitToTimeRange(a,e.startTime,e.endTime),s=o.calculateTimePerUnit(n,t),l=[[e.startTime,e.startValue]].concat(i.map(n,function(a){if(a.rate===r.WORKING_DAY){var n=a.start-a.end,l=n/s;t-=l}return[i.min([a.end,e.endTime]),i.max([t,0])]}));return l=i.reject(l,function(e){return 0===e.length}),{id:"guideline",data:l,color:"#999",label:"Guideline"}},o.calculateTimePerUnit=function(e,t){var a=r.limitToWorkingDays(e),n=i.reduce(a,function(e,t){return e+(t.start-t.end)},0);return n/t},o.calculateSeries=function(){var e=o.timelineData,t=e.timeline;if(!i.isEmpty(t)){var a=t[0],r=[];r.push(o.calculateGuidelineSeries({startTime:e.startTime,startValue:a.values.estimate,endTime:e.endTime}));var l=["estimate"];o.isTimeTracking()&&l.push("timeSpent");var u={},c={};if(i.each(l,function(e){u[e]=[],c[e]=[]}),i.each(t,function(e){e.openCloseEntries||i.each(l,function(t){e.deltas&&i.isNumber(e.deltas[t])&&0!==e.deltas[t]&&(u[t].push([e.time,e.values[t]-e.deltas[t]]),c[t].push({})),u[t].push([e.time,e.values[t]]),c[t].push(e)})}),!e.completeTime){var d=i.last(t);i.each(l,function(t){u[t].push([Math.max(e.startTime,e.now),d.values[t]])})}o.isTimeTracking()&&r.push({id:"timeSpent",data:u.timeSpent,color:"#14892c",label:"Time Spent"}),r.push({id:"estimate",data:u.estimate,color:"#d04437",label:"Remaining Values"});var g;g=n.wallboardMode?s.nonWorkingDaysWallboard:s.nonWorkingDays,r.push({id:"markings",color:g,data:[],label:"Non-Working Days"});var m=0;i.each(l,function(t){m=Math.max(m,e.maxValues[t]||0)}),o.calculateYAxis(m),o.series=r,o.seriesData=c}},o.calculateYAxis=function(e){o.yAxisData=c.calculateYAxis(e,o.getStatistic())},o.getDataTable=function(){return o.dataTable},o.getSeries=function(){return o.series},o.getYAxis=function(){return o.yAxisData},o.getDataBySeries=function(e){return o.seriesData[e]},o.getDataBySeriesAtIndex=function(e,t){if(o.seriesData[e])return o.seriesData[e][t]},o.getStatisticDefinitionForSeries=function(e){var t=o.getStatisticDefinitions(),a=i.find(t,function(t){return e===t.valueId});return a},o.getStatisticDefinitions=function(){return o.dataTable.statistics},o.getWarning=function(){return o.rawData.warningMessage},o.isEmpty=function(){return 0===Object.keys(o.rawData.changes).length},o.renderDataTableValues=function(e){var t="";i.each(e.rows,function(e){var a,n=u.renderUTCMillisAsDate(e.time);e.recordedTime&&(a=u.renderUTCMillisAsDate(e.recordedTime)),(n!==t||a)&&(e.dateString=n,e.recordedDateString=a,t=n),e.valuesText={},i.each(i.keys(e.values),function(t){e.valuesText[t]=o.renderStatisticText(e.values[t])}),e.initial||e.complete?(i.each(e.issues,function(e){e.valuesText={},i.each(i.keys(e.values),function(t){e.valuesText[t]=o.renderStatisticText(e.values[t])}),e.parentKey=o.getParentIssueKey(e.key)}),e.issues=i.sortBy(e.issues,function(e){return e.parentKey||e.key})):e.openClose||(e.deltasType={},e.deltasText={},i.each(i.keys(e.deltas),function(t){e.deltasText[t]=o.renderStatisticText(e.deltas[t],!0),e.deltasType[t]=e.deltas[t]<0?"dec":"inc"}),e.parentKey=o.getParentIssueKey(e.key))})},o.renderStatisticText=function(e,t){return u.renderStatisticText(e,t,o.getStatistic().renderer)},o.getTooltipData=function(e,a){var n=a,r={},s=o.getStatisticDefinitionForSeries(e);return r.statistic=s,n.initial||n.complete?(n.initial?(r.initial=!0,r.event=t.getSprintStartChangeEvent()):(r.complete=!0,r.event=t.getSprintCompleteChangeEvent()),r.issueCount=i.size(n.issues),r.statisticName=s.name,r.statisticValue=o.renderStatisticText(n.values[s.valueId])):(r.changes=[],i.each(n.issues,function(e){var t={};t.key=e.key,t.statisticName=s.name,t.statisticDelta=o.renderStatisticText(e.deltas[s.valueId]),t.event=o.tableHandler.getChangeEvent(e),r.changes.push(t)})),r.dateText=u.renderUTCMillisAsDate(n.time),r},o.hasAnyWorkingDays=function(){return r.getWorkingDays().length>0},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownRate.js' */
define("jira-agile/rapid/ui/chart/burndown-rate",["require"],function(t){"use strict";var n=t("underscore"),r={};return r.WORKING_DAY=1,r.NON_WORKING_DAY=0,r.setRateData=function(t){r.rateData=t},r.getRateDefinitions=function(){return r.rateData.rates},r.getNonWorkingDays=function(){var t=r.getRateDefinitions();return r.limitToNonWorkingDays(t)},r.getWorkingDays=function(){var t=r.getRateDefinitions();return r.limitToWorkingDays(t)},r.limitToWorkingDays=function(t){return n.filter(t,function(t){return t.rate===r.WORKING_DAY})},r.limitToNonWorkingDays=function(t){return n.filter(t,function(t){return t.rate===r.NON_WORKING_DAY})},r.limitToTimeRange=function(t,r,e){var i=n.reject(t,function(t){return e<t.start||t.end<r});return n.map(i,function(t){return{start:Math.max(r,t.start),rate:t.rate,end:Math.min(e,t.end)}})},r.isDateInNonWorkingBlock=function(t){for(var n=!1,e=r.getNonWorkingDays(),i=0;i<e.length;i++){var a=e[i];if(a.start<=t&&a.end>t){n=!0;break}}return n},r.getAdjustedNonWorkingDays=function(t){var e=r.getNonWorkingDays(),i=n.filter(e,function(n){return n.end>t});return n.map(i,function(n){return{moveTo:n.start===t?n.end:n.start,start:n.start,end:n.end}})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownTableProducer.js' */
define("jira-agile/rapid/ui/chart/burndown-table-producer",["require"],function(e){"use strict";var t=e("underscore"),n=e("jira-agile/rapid/ui/chart/burndown-chart-model"),a=e("jira-agile/rapid/ui/chart/burndown-timeline-producer"),i=GH.ChartUtils,r=GH.tpl,d={};return d.getDataTable=function(e,n,i,r){var s={rows:[],pastChangeRows:{},currentValues:[]};t.each(e.timeline,function(e){if(e.initial){var o={initial:!0,time:e.time,event:d.getSprintStartChangeEvent(),values:e.values,issues:e.issues};s.rows.push(o),s.currentValues=t.clone(e.values)}else if(e.complete){var g={complete:!0,time:e.time,event:d.getSprintCompleteChangeEvent(r),values:e.values,issues:e.issues};s.rows.push(g)}else e.openCloseInstances?t.each(e.openCloseInstances,function(t){s.rows.push({time:e.time,event:d.getSprintStateChangeEvent(t),openClose:!0,values:{}})}):t.each(e.issues,function(r){a.addStatisticValueDeltas(r.deltas,s.currentValues,1,i);var d={time:e.time,key:r.key,deltas:r.deltas,values:t.clone(s.currentValues)};d.event=n.getChangeEvent(r),n.addAdditionalRowInformation(s,e,r,d),s.rows.push(d)})});var o={statistics:n.getStatisticDefinitions(),rows:s.rows};return o},d.getSprintStartChangeEvent=function(){return{type:"Sprint start",detail:""}},d.getSprintCompleteChangeEvent=function(e){return{type:r.burndownchart.renderSprintCompleteEventType({closingUserHtml:e}),typeAsHtml:!0,detail:""}},d.getSprintReopenChangeEvent=function(e){return{type:GH.tpl.burndownchart.renderSprintReopenEventType({reopenUserHtml:e}),typeAsHtml:!0,detail:""}},d.getSprintStateChangeEvent=function(e){return"CLOSE"===e.operation?d.getSprintCompleteChangeEvent(e.user||e.userDisplayNameHtml):d.getSprintReopenChangeEvent(e.user||e.userDisplayNameHtml)},d.getSprintOrColumnChangeEvent=function(e,t){return e.scopeChange?e.inScope?{type:"Scope change",detail:"Issue added to sprint"}:{type:"Scope change",detail:"Issue removed from sprint"}:d.getColumnChangeEvent(e,t)},d.getColumnChangeEvent=function(e,t){return!!e.columnChange&&("notDone"===e.column?e.oldColumn?{type:t,detail:"Issue reopened"}:{type:"Scope change",detail:"Open issue moved into board (from an unmapped status)"}:"done"===e.column?e.oldColumn?{type:t,detail:"Issue completed"}:{type:"Scope change",detail:"Done issue moved into board (from an unmapped status)"}:"notDone"===e.oldColumn?{type:"Scope change",detail:"Open issue moved out of board (into an unmapped status)"}:{type:"Scope change",detail:"Done issue moved out of board (into an unmapped status)"})},d.TimeTrackingTableHandler={getStatisticDefinitions:function(){var e=[{id:"timeSpent",name:"Time Spent",isSum:!0},n.getStatistic()];return e[0].valueId="timeSpent",e[1].valueId="estimate",e},addAdditionalRowInformation:function(e,n,r,d){if(r.change&&r.change.timeC&&r.change.timeC.changeDate){var s=r.change.timeC.changeDate;n.time-n.time%6e4!==s-s%6e4&&(d.recordedTime=s),e.pastChangeRows[r.key+"-"+s]=d}var o=a.TimeTrackingStatisticConsumer.getAffectingEstimateChanges(r,r.change);t.each(o,function(t){var n=e.pastChangeRows[t.issueKey+"-"+t.date];if(n){if(n.event.loggedNoteAdded)return;n.event.loggedNoteAdded=!0,n.event.notes||(n.event.notes=[]),n.event.notes.push(AJS.format("Backdated event, recorded at {0}",i.renderUTCMillisAsDate(t.date)))}})},getChangeEvent:function(e){var r="Issue state change",s=d.getSprintOrColumnChangeEvent(e,r);if(s)return s;if(e.estimateChange||e.timeChange){var o=0,g=!1,c=0,u=!1,h=0,p=!1;e.timeChange&&(o=e.deltas.timeSpent,g=!0),e.estimateChange&&(h=e.values.estimate,c=e.values.estimate-e.deltas.estimate||0,u=!t.isUndefined(c),p=!t.isUndefined(h));var l={};if(g)l.type="Work logged";else{var v="Remaining Time Estimate",m="RTE",S='<acronym title="'+v+'">'+m+"</acronym>";l.type=AJS.format("{0} change",S),l.typeAsHtml=!0}var w="",T=[];if(g&&(w+=AJS.format("{0} logged",n.renderStatisticText(o))),u||p){var C=u?n.renderStatisticText(c):"no value",f=p?n.renderStatisticText(h):"no value";w+=w.length>0?", ":"",w+=AJS.format("{0} changed from {1} to {2}",n.getStatistic().name,C,f);var A=a.TimeTrackingStatisticConsumer.getAffectingEstimateChanges(e,e.change);t.each(A,function(e){T.push(AJS.format("Includes {0} backdated to {1}, recorded at {2}",i.renderStatisticText(e.delta),i.renderUTCMillisAsDate(e.worklogDate),i.renderUTCMillisAsDate(e.date)))})}return l.detail=w,l.notes=T,l}return{type:"unknown",detail:["unknown change"]}}},d.EstimateStatisticTableHandler={getStatisticDefinitions:function(){var e=[n.getStatistic()];return e[0].valueId="estimate",e},addAdditionalRowInformation:function(e,t,n,a){},getChangeEvent:function(e){var a="Burndown",i=d.getSprintOrColumnChangeEvent(e,a);if(i)return i;if(e.estimateChange){var r=e.values.oldEstimateFieldValue,s=e.values.estimateFieldValue,o=!t.isUndefined(r),g=!t.isUndefined(s);return o&&g?{type:"Scope change",detail:AJS.format("Estimate changed from {0} to {1}",n.renderStatisticText(r),n.renderStatisticText(s))}:o?{type:"Scope change",detail:AJS.format("Estimate of {0} has been removed",n.renderStatisticText(r))}:{type:"Scope change",detail:AJS.format("Estimate of {0} has been added",n.renderStatisticText(s))}}return{type:"unknown",detail:"unknown change"}}},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownTimelineProducer.js' */
define("jira-agile/rapid/ui/chart/burndown-timeline-producer",["require"],function(e){"use strict";var t=e("underscore"),a={};return a.calculateTimelineData=function(e,s){var i={timeline:[]};if(e.startTime===e.endTime)return i;var n=!t.isUndefined(e.completeTime)&&e.completeTime,u=a.calculateTimeline(e.startTime,n,e.changes,e.openCloseChanges,s,e.estimatableIssueKeys);return i.timeline=u.timeline,i.now=e.now,i.startTime=e.startTime,i.endTime=e.endTime,i.completeTime=n,i.maxValues=u.maxValues,i.statisticField=e.statisticField,i.finalIssueStates=u.issueState,i},a.calculateTimeline=function(e,s,i,n,u,r){var l={issueState:{},timeline:[],currentValues:{},maxValues:{},pastSprintStart:!1,statisticConsumer:u,estimatableIssueKeys:r};a.addStatisticValueDeltas({},l.currentValues,1,u);for(var o=t.keys(i),m=n?t.keys(n):[],c=0,d=0;d<o.length;d++){var C=o[d],S=parseInt(C,10);if(!l.pastSprintStart&&e<=S&&(a.addSprintStartTimelineEntry(l,e),l.pastSprintStart=!0),s&&s<S)break;var h=i[C],p=a.processTimeChanges(l,h,S);if(l.pastSprintStart&&p){if(m.length>0)for(var f=m[c];f<C;){var v=parseInt(f,10),g=n[f];a.addSprintStateChangeTimelineEntry(l,v,g),c++,f=m[c]}a.addChangeTimelineEntry(l,S,p.issues,p.deltas)}}return l.pastSprintStart||(a.addSprintStartTimelineEntry(l,e),l.pastSprintStart=!0),s&&a.addSprintCompleteTimelineEntry(l,s),l},a.processTimeChanges=function(e,s,i){var n={},u=[];return t.each(s,function(s){var r={},l=e.issueState[s.key];l||(l={key:s.key,isInChart:!1,burned:!1,values:{},estimatable:t.contains(e.estimatableIssueKeys,s.key)},e.issueState[s.key]=l),a.removeStatisticValues(l,r,e.statisticConsumer),a.removeStatisticValues(l,n,e.statisticConsumer),e.statisticConsumer.beforeProcessChange(l,i,s);var o=l.isInChart||!1;if(a.processInChartChanges(l,s),e.statisticConsumer.processChange(l,s),a.addStatisticValues(l,r,e.statisticConsumer),a.addStatisticValues(l,n,e.statisticConsumer),o||l.isInChart){var m=a.getCurrentState(e,l,r);m.change=s,u.push(m)}e.statisticConsumer.afterProcessChange(l,i,s)}),!t.isEmpty(u)&&(a.addStatisticValueDeltas(n,e.currentValues,1,e.statisticConsumer),{issues:u,deltas:n})},a.processInChartChanges=function(e,a){t.isUndefined(a.added)?e.scopeChange=!1:(e.inScope=a.added,e.scopeChange=!0),a.column?(a.column.done===!1&&(a.column.notDone=!0),a.column.notDone===!1&&(a.column.done=!0),a.column.notDone?(e.column="notDone",t.isBoolean(a.column.done)?e.oldColumn="done":e.oldColumn=void 0):a.column.done?(e.column="done",t.isBoolean(a.column.notDone)?e.oldColumn="notDone":e.oldColumn=void 0):(e.column=void 0,t.isBoolean(a.column.notDone)?e.oldColumn="notDone":e.oldColumn="done"),e.columnChange=!0):e.columnChange=!1,e.isInChart=!(!e.column||!e.inScope),e.burned="done"===e.column},a.addStatisticValues=function(e,t,s){e.isInChart&&a.addStatisticValueDeltas(e.values,t,1,s)},a.removeStatisticValues=function(e,t,s){e.isInChart&&a.addStatisticValueDeltas(e.values,t,-1,s)},a.addStatisticValueDeltas=function(e,a,s,i){s||(s=1),t.each(i.dataFields,function(t){a[t]=(a[t]||0)+(e[t]||0)*s})},a.getMaxStatisticValues=function(e,a,s){var i={};return t.each(s.dataFields,function(t){i[t]=e[t]>a[t]?e[t]:a[t]}),i},a.addChangeTimelineEntry=function(e,s,i,n){var u={time:s,issues:i,values:t.clone(e.currentValues),deltas:n};e.timeline.push(u),e.maxValues=a.getMaxStatisticValues(e.maxValues,e.currentValues,e.statisticConsumer)},a.addSprintStateChangeTimelineEntry=function(e,t,a){var s={time:t,issues:{},values:{},deltas:{},openCloseInstances:a};e.timeline.push(s)},a.addSprintStartTimelineEntry=function(e,s){e.statisticConsumer.beforeSprintStart(e);var i=a.getTimelineEntryForCurrentState(e,s);i.initial=!0,e.timeline.push(i),e.maxValues=t.clone(e.currentValues)},a.addSprintCompleteTimelineEntry=function(e,t){var s=a.getTimelineEntryForCurrentState(e,t);s.complete=!0,e.timeline.push(s)},a.getTimelineEntryForCurrentState=function(e,s){var i=[];t.each(e.issueState,function(t){t.isInChart&&i.push(a.getCurrentState(e,t))});var n={time:s,issues:i,values:t.clone(e.currentValues)};return n},a.getCurrentState=function(e,a,s){var i=t.clone(a);return i.values=t.clone(a.values),s&&(i.deltas=s,e.statisticConsumer.copyToCurrentState(i,a)),i},a.TimeTrackingStatisticConsumer={dataFields:["estimate","timeSpent"],processChange:function(e,a){a.timeC&&(t.isUndefined(a.timeC.timeSpent)?e.timeChange=!1:e.isInChart&&(e.values.timeSpent=(e.values.timeSpent||0)+(a.timeC.timeSpent||0),e.timeChange=!0),t.isUndefined(a.timeC.newEstimate)?e.estimateChange=!1:(e.values.estimate=(e.values.estimate||0)+((a.timeC.newEstimate||0)-(a.timeC.oldEstimate||0)),e.estimateChange=!0))},beforeProcessChange:function(e,t,s){a.TimeTrackingStatisticConsumer.removeExpiredEstimateChanges(e,t)},afterProcessChange:function(e,t,s){a.TimeTrackingStatisticConsumer.addEstimateChange(e,t,s)},beforeSprintStart:function(e){t.each(e.issueState,function(e){t.isUndefined(e.values.timeSpent)||(e.values.timeSpent=0)}),e.maxValues.timeSpent=0,e.currentValues.timeSpent=0},copyToCurrentState:function(e,a){e.estimateDeltas=t.clone(a.estimateDeltas)},removeExpiredEstimateChanges:function(e,a){e.estimateDeltas||(e.estimateDeltas=[]),e.estimateDeltas=t.reject(e.estimateDeltas,function(e){return e.date<=a})},addEstimateChange:function(e,t,a){if(e.estimateDeltas||(e.estimateDeltas=[]),a.timeC&&a.timeC.changeDate){var s=a.timeC.changeDate,i=(a.timeC.newEstimate||0)-(a.timeC.oldEstimate||0);e.estimateDeltas.push({worklogDate:t,date:s,issueKey:a.key,delta:i,change:a})}},getAffectingEstimateChanges:function(e,a){return a.timeC&&a.timeC.changeDate?t.filter(e.estimateDeltas,function(e){return a.timeC.changeDate<e.date}):[]}},a.EstimateStatisticConsumer={dataFields:["realValue","estimate"],processChange:function(e,t){t.statC?(e.values.oldEstimateFieldValue=t.statC.oldValue,e.values.estimateFieldValue=t.statC.newValue,e.estimateChange=!0):e.estimateChange=!1,e.isInChart&&!e.burned?e.values.estimate=e.values.estimateFieldValue:e.values.estimate=e.values.estimateFieldValue?0:e.values.estimateFieldValue},beforeProcessChange:function(e,t,a){},afterProcessChange:function(e,t,a){},beforeSprintStart:function(e){},copyToCurrentState:function(e,t){}},a.ProgressConsumer={dataFields:["issueCount","unestimatedIssueCount","totalEstimate","completedEstimate"],processChange:function(e,a){if(a.statC?(e.values.oldEstimateFieldValue=a.statC.oldValue,e.values.estimateFieldValue=a.statC.newValue,e.estimateChange=!0):e.estimateChange=!1,e.isInChart){e.values.issueCount=1,e.values.unestimatedIssueCount=e.estimatable&&t.isUndefined(e.values.estimateFieldValue)&&!e.burned?1:0;var s=e.values.estimateFieldValue||0;e.values.totalEstimate=s,e.values.completedEstimate=e.burned?s:0}else e.values.issueCount=0,e.values.unestimatedIssueCount=0,e.values.totalEstimate=0,e.values.completedEstimate=0;e.isInChart&&!e.burned?e.values.estimate=e.values.estimateFieldValue:e.values.estimate=e.values.estimateFieldValue?0:e.values.estimateFieldValue},beforeProcessChange:function(e,t,a){},afterProcessChange:function(e,t,a){},beforeSprintStart:function(e){},copyToCurrentState:function(e,t){}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChartView.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-view",["require"],function(r){"use strict";var n,e,t,o=r("jquery"),i=r("underscore"),a=r("jira-agile/rapid/ui/chart/chart"),d=r("jira-agile/rapid/ui/chart/chart-colors"),s=r("jira-agile/rapid/ui/chart/chart-controller"),l=r("jira-agile/rapid/ui/chart/chart-view"),h=r("jira-agile/rapid/global-events"),g=r("jira-agile/rapid/ui/chart/non-working-days-util"),c=r("jira-agile/rapid/ui/SPConfigController"),u=GH.ChartTimeFrames,p=GH.ChartTooltip,w=GH.FlotChartUtils,f=GH.RapidBoard,k=GH.tpl;h.on("pre-initialization",function(){n=r("jira-agile/rapid/ui/chart/burndown-chart-controller"),e=r("jira-agile/rapid/ui/chart/burndown-chart-model"),t=r("jira-agile/rapid/ui/chart/report-controller")});var C={};return C.gadgetMode=!1,C.wallboardMode=!1,C.nonWorkingDaysShown=void 0,C.renderStats=!0,C.renderNonWorkingDayControls=!0,C.renderDataPoints=!0,C.setNonWorkingDaysShown=function(r){C.nonWorkingDaysShown=r},C.setGadgetMode=function(r){C.gadgetMode=r,C.renderStats=!r,C.renderNonWorkingDayControls=!r,C.renderDataPoints=!r},C.setWallboardMode=function(r){C.wallboardMode=r},C.renderChartLoading=function(){l.hideChartControls(),l.getChartContentElem(!0).html(k.burndownchart.renderChartBody()),l.showSpinner()},C.showWarning=function(r){var n=AJS.$(k.burndownchart.renderWarningMessage({message:r}));n.prependTo("#ghx-chart-content"),l.hideSpinner()},C.showChart=function(){l.hideSpinner(),e.getWarning()&&C.showWarning(e.getWarning()),e.isEmpty()||(C.renderUI(),C.gadgetMode||C.sprintActions())},C.sprintActions=function(){t.renderSprintActions(l.getSprintActions(!0),f.State.getRapidViewId(),n.sprintPicker.getItems(),n.sprintPicker.getSelectedItem())},C.renderUI=function(){l.showChartGroup(),C.renderChart(),C.renderStats&&C.renderChartStats()},C.renderChartStats=function(){var r=e.getDataTable(),n=o(k.burndownchart.renderBurndownChartTable({statistics:r.statistics,rows:r.rows}));o("#ghx-chart-data").empty().append(n)},C.renderChart=function(){if(!e.hasAnyWorkingDays()){o("#ghx-chart-wrap").hide();var r=o("#ghx-chart-empty").html(k.burndownchart.renderNoWorkingDaysMessage({}));return r.find("a").click(function(r){r.preventDefault(),c.openConfig("time")}),void r.show()}o("#ghx-chart-empty").hide(),o("#ghx-chart-wrap").show(),C.nonWorkingDaysShown?C.renderChartWithNonWorkingDays():C.renderChartWithoutNonWorkingDays()},C.renderChartWithoutNonWorkingDays=function(){var r=e.getChartStartTime(),n=g.transformSeriesExcludingNonWorkingDays(e.getSeries(),r);C.showNotificationIfEmpty(n);var t=function(r,n){var t=g.transformDateIfInNonWorkingDays(r,e.getChartStartTime()),i="%b %d";return"hour"===n.tickSize[1]&&(i+=" %h:%M"),o.plot.formatDate(t,i)},i=C.getDefaultPlotOptions();i.xaxis.tickFormatter=t,C.renderBurndownChart(n,i)},C.renderChartWithNonWorkingDays=function(){var r=e.getSeries();C.showNotificationIfEmpty(r);var n=C.getDefaultPlotOptions();n.grid.markings||(n.grid.markings=s.getNonWorkingBlocks),C.renderBurndownChart(r,n),C.renderNonWorkingDayControls&&C.addNonWorkingDaysToLegend()},C.renderBurndownChart=function(r,e){w.setAndAlignAxisLabels("Time",C.getYAxisLabel());var t=l.getChartView(!0),o=a.draw(n.id,t,r,e);C.renderDataPoints&&(o.hooks.drawSeries.push(C.gatherPoints),o.hooks.draw.push(w.deferredRenderPoints),C.bindEvents(t)),C.renderNonWorkingDayControls&&C.addNonWorkingDaysToLegend()},C.addNonWorkingDaysToLegend=function(){var r=l.getChartView().find(".legend").find("tbody"),n=r.find("#ghx-chart-show-non-working-days");if(0===n.length){var e=o(k.burndownchart.renderShowNonWorkingDaysOption({checked:C.nonWorkingDaysShown}));r.append(e),r.find("#ghx-chart-show-non-working-days").click(C.toggleNonWorkingDays)}},C.toggleNonWorkingDays=function(){C.nonWorkingDaysShown=o("#ghx-chart-show-non-working-days").is(":checked"),f.State.setNonWorkingDaysShown("burndown",C.nonWorkingDaysShown),C.renderChart()},C.showNotificationIfEmpty=function(r){if(i.isEmpty(r)){var n=o(k.burndownchart.renderBurndownNoSprint()).css({"margin-top":"0px"});n.prependTo("#ghx-chart-content")}},C.renderAndShowSprintPicker=function(){n.sprintPicker.render(l.getChartSelector(!0)),l.showChartGroup()},C.getDefaultPlotOptions=function(){var r={xaxis:{mode:"time"},yaxis:e.getYAxis(),series:{points:{show:!1,radius:3,symbol:"circle"},lines:{show:!0}},grid:{hoverable:!0,clickable:!1,autoHighlight:!1},mouseEnterExitEvents:!0,legend:{container:null,backgroundOpacity:.5,position:"ne"}};return(C.gadgetMode||C.wallboardMode)&&(r.series={lines:{show:!0,lineWidth:C.wallboardMode?4:2},points:{show:!1},shadowSize:0},C.wallboardMode?r.grid={backgroundColor:d.wallboard.backgroundColor,borderWidth:1,borderColor:d.wallboard.borderColor,color:d.wallboard.textColor,noGridBottomOffsetDelta:0,tickColor:d.wallboard.tickColor,markings:C.getMarkingsForGadget}:r.grid={color:"#333",borderWidth:1,borderColor:"#999",tickColor:"#eee"}),r},C.getMarkingsForGadget=function(){var r=d.nonWorkingDaysWallboard,n=s.getNonWorkingBlocks();return i.map(n,function(n){return n.color=r,n})},C.bindEvents=function(r){r.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",w.handleMouseOverStateChange),r.unbind("plothover plotclick plotselected dblclick"),r.bind("plothover",C.handlePlotHover),r.bind("plotclick",w.handlePlotClick),r.bind("plotselected",C.handleRangeSelection),r.bind("dblclick",C.resetRangeSelection)},C.handlePlotHover=function(r,n,t){var a=o("#ghx-tooltip");if(t){var d=t.series.id,s=t.dataIndex,h=e.getDataBySeriesAtIndex(d,s);if(!i.isEmpty(h))return void(C.previousPlotHoverPoint!==t.dataIndex&&(C.previousPlotHoverPoint=t.dataIndex,a.remove(),C.showChartTooltip(t,d,h,t.datapoint[0]),a.hasClass("ghx-has-warnings")||l.getChartView().addClass("ghx-clickable")))}a.remove(),C.previousPlotHoverPoint=null,l.getChartView().removeClass("ghx-clickable")},C.previousPlotHoverPoint=void 0,C.roundDuration=function(r){return 0!==r?Math.round(10*r)/10:0},C.showChartTooltip=function(r,n,t){if(t){var o=e.getTooltipData(n,t),i=new p(r,o);i.render()}},C.gatherPoints=function(r,n,t){if(r.mouseEntered){var o=t.id,i=e.getDataBySeries(o);if(i){var a=w.gatherPoints(t,i);r.realPointsPerSeries[o]=a}}},C.getYAxisLabel=function(){return e.getStatistic().name},C.handleRangeSelection=function(r,n){var e=n.xaxis.from,t=n.xaxis.to;u.setNewChartLimits(-1,e,t)},C.resetRangeSelection=function(r){u.setNewChartLimits(0,0,0)},C});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/BurndownChart.soy' */
// This file was automatically generated from BurndownChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.burndownchart.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.burndownchart == 'undefined') { GH.tpl.burndownchart = {}; }


GH.tpl.burndownchart.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-empty"></div><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-overview-group"><h4></h4><p class="ghx-description"></p><div id="ghx-chart-overview"></div></div><div id="ghx-chart-legend"></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderChartBody.soyTemplateName = 'GH.tpl.burndownchart.renderChartBody';
}


GH.tpl.burndownchart.renderBurndownNoSprint = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml('There are no sprints currently in progress.') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderBurndownNoSprint.soyTemplateName = 'GH.tpl.burndownchart.renderBurndownNoSprint';
}


GH.tpl.burndownchart.renderBurndownChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-hover-highlight ghx-vertical-lines"><thead><tr><th></th><th></th><th></th><th></th>';
  var statisticList10 = opt_data.statistics;
  var statisticListLen10 = statisticList10.length;
  for (var statisticIndex10 = 0; statisticIndex10 < statisticListLen10; statisticIndex10++) {
    var statisticData10 = statisticList10[statisticIndex10];
    output += '<th colspan="3" id="series-' + soy.$$escapeHtml(statisticData10.id) + '" class="ghx-center">' + soy.$$escapeHtml(statisticData10.name) + '</th>';
  }
  output += '</tr><tr><th id="series-date">' + soy.$$escapeHtml('Date') + '</th><th id="series-issue">' + soy.$$escapeHtml('Issue') + '</th><th id="series-event-type">' + soy.$$escapeHtml('Event Type') + '</th><th id="series-event-detail">' + soy.$$escapeHtml('Event Detail') + '</th>';
  var statisticList26 = opt_data.statistics;
  var statisticListLen26 = statisticList26.length;
  for (var statisticIndex26 = 0; statisticIndex26 < statisticListLen26; statisticIndex26++) {
    var statisticData26 = statisticList26[statisticIndex26];
    output += '<th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-inc" class="ghx-center ghx-minimal"><abbr title="' + soy.$$escapeHtml('Increase') + '">' + soy.$$escapeHtml('Inc.') + '</abbr></th><th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-dec" class="ghx-center ghx-minimal"><abbr title="' + soy.$$escapeHtml('Decrease') + '">' + soy.$$escapeHtml('Dec.') + '</abbr></th><th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-value" class="ghx-right ghx-minimal">' + ((statisticData26.isSum) ? 'Sum' : soy.$$escapeHtml('Remaining')) + '</th>';
  }
  output += '</tr></thead><tbody>';
  var rowList50 = opt_data.rows;
  var rowListLen50 = rowList50.length;
  for (var rowIndex50 = 0; rowIndex50 < rowListLen50; rowIndex50++) {
    var rowData50 = rowList50[rowIndex50];
    output += '<tr><td headers="series-date">' + ((rowData50.dateString) ? (rowData50.recordedDateString) ? '<span class="ghx-backdated-event" title="' + soy.$$escapeHtml(AJS.format('Recorded at {0}',rowData50.recordedDateString)) + '">' + soy.$$escapeHtml(rowData50.dateString) + '</span>' : soy.$$escapeHtml(rowData50.dateString) : '') + '</td><td headers="series-issue">';
    if (rowData50.initial || rowData50.complete) {
      var issueList66 = rowData50.issues;
      var issueListLen66 = issueList66.length;
      for (var issueIndex66 = 0; issueIndex66 < issueListLen66; issueIndex66++) {
        var issueData66 = issueList66[issueIndex66];
        output += ((issueData66.parentKey) ? GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.parentKey}) + ' / ' : '') + GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.key}) + '<br />';
      }
    } else if (! rowData50.openClose) {
      output += ((rowData50.parentKey) ? GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.parentKey}) + ' / ' : '') + GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.key});
    }
    output += '</td><td headers="series-event-type">' + ((rowData50.event.typeAsHtml) ? soy.$$filterNoAutoescape(rowData50.event.type) : soy.$$escapeHtml(rowData50.event.type)) + '</td><td headers="series-event-detail">' + soy.$$escapeHtml(rowData50.event.detail);
    if (rowData50.event.notes) {
      output += '<div class="description">';
      var noteList96 = rowData50.event.notes;
      var noteListLen96 = noteList96.length;
      for (var noteIndex96 = 0; noteIndex96 < noteListLen96; noteIndex96++) {
        var noteData96 = noteList96[noteIndex96];
        output += ((! (noteIndex96 == 0)) ? '<br />' : '') + soy.$$escapeHtml(noteData96);
      }
      output += '</div>';
    }
    output += '</td>';
    var statisticList104 = opt_data.statistics;
    var statisticListLen104 = statisticList104.length;
    for (var statisticIndex104 = 0; statisticIndex104 < statisticListLen104; statisticIndex104++) {
      var statisticData104 = statisticList104[statisticIndex104];
      if (rowData50.initial) {
        output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc" class="ghx-right">';
        var issueList110 = rowData50.issues;
        var issueListLen110 = issueList110.length;
        for (var issueIndex110 = 0; issueIndex110 < issueListLen110; issueIndex110++) {
          var issueData110 = issueList110[issueIndex110];
          output += '<div class="ghx-nowrap">' + ((issueData110.valuesText[statisticData104.valueId]) ? soy.$$escapeHtml(issueData110.valuesText[statisticData104.valueId]) : '-') + '</div>';
        }
        output += '</td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>';
      } else if (rowData50.complete || rowData50.openClose) {
        output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc"></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>';
      } else {
        output += (rowData50.deltasType[statisticData104.valueId] == 'inc') ? '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc" class="ghx-right"><div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.deltasText[statisticData104.valueId]) + '</div></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>' : '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc"></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec" class="ghx-right"><div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.deltasText[statisticData104.valueId]) + '</div></td>';
      }
      output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-value" class="ghx-right">';
      if (rowData50.initial) {
        var issueList151 = rowData50.issues;
        var issueListLen151 = issueList151.length;
        for (var issueIndex151 = 0; issueIndex151 < issueListLen151; issueIndex151++) {
          var issueData151 = issueList151[issueIndex151];
          output += '<br />';
        }
      } else if (rowData50.complete) {
        var issueList155 = rowData50.issues;
        var issueListLen155 = issueList155.length;
        for (var issueIndex155 = 0; issueIndex155 < issueListLen155; issueIndex155++) {
          var issueData155 = issueList155[issueIndex155];
          output += '<div class="ghx-nowrap">' + ((issueData155.valuesText[statisticData104.valueId]) ? soy.$$escapeHtml(issueData155.valuesText[statisticData104.valueId]) : '-') + '</div>';
        }
      }
      output += ((! rowData50.openClose) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.valuesText[statisticData104.valueId]) + '</div>' : '') + '</td>';
    }
    output += '</tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderBurndownChartTable.soyTemplateName = 'GH.tpl.burndownchart.renderBurndownChartTable';
}


GH.tpl.burndownchart.renderIssueKeyLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderIssueKeyLink.soyTemplateName = 'GH.tpl.burndownchart.renderIssueKeyLink';
}


GH.tpl.burndownchart.renderShowNonWorkingDaysOption = function(opt_data, opt_ignored) {
  return '<tr><td></td><td><input type="checkbox" id="ghx-chart-show-non-working-days" ' + ((opt_data.checked) ? ' checked="checked"' : '') + '/> <label for="ghx-chart-show-non-working-days"><span class="ghx-description">' + soy.$$escapeHtml('Show Non-Working Days') + '</span></label></td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderShowNonWorkingDaysOption.soyTemplateName = 'GH.tpl.burndownchart.renderShowNonWorkingDaysOption';
}


GH.tpl.burndownchart.renderNoWorkingDaysMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span><strong>' + soy.$$escapeHtml('Chart cannot be displayed') + '</strong></p><p>' + soy.$$filterNoAutoescape(AJS.format('All of the days within this sprint are {0}configured as non-working days{1}. To display a Burndown Chart some days need to be working days.','<a href="' + GH.Ajax.CONTEXT_PATH + '/secure/RapidView.jspa?tab=time&rapidView=' + GH.RapidViewConfig.currentData.data.id + '">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderNoWorkingDaysMessage.soyTemplateName = 'GH.tpl.burndownchart.renderNoWorkingDaysMessage';
}


GH.tpl.burndownchart.renderSprintCompleteEventType = function(opt_data, opt_ignored) {
  return '' + ((opt_data.closingUserHtml) ? soy.$$filterNoAutoescape(AJS.format('Sprint ended by {0}',opt_data.closingUserHtml)) : soy.$$escapeHtml('Sprint ended'));
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderSprintCompleteEventType.soyTemplateName = 'GH.tpl.burndownchart.renderSprintCompleteEventType';
}


GH.tpl.burndownchart.renderSprintReopenEventType = function(opt_data, opt_ignored) {
  return '' + ((opt_data.reopenUserHtml) ? soy.$$filterNoAutoescape(AJS.format('Sprint reopened by {0}',opt_data.reopenUserHtml)) : soy.$$escapeHtml('Sprint reopened'));
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderSprintReopenEventType.soyTemplateName = 'GH.tpl.burndownchart.renderSprintReopenEventType';
}


GH.tpl.burndownchart.renderWarningMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({closeable: 'false', content: '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>'});
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderWarningMessage.soyTemplateName = 'GH.tpl.burndownchart.renderWarningMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/SprintReportController.js' */
GH.SprintRetrospectiveController=new GH.Events,GH.SprintRetrospectiveController.id="sprintRetrospective",GH.SprintRetrospectiveController.displayed=!1,GH.SprintRetrospectiveController.supportsPages=!1,GH.SprintRetrospectiveController.rapidViewData={},GH.SprintRetrospectiveController.rapidViewConfig={},GH.SprintRetrospectiveController.referredBySprintCompleteDialog=!1,function(){var t=require("jira-agile/rapid/analytics-tracker");GH.SprintRetrospectiveController.analytics=new t("gh.report.sprintRetrospective"),GH.SprintRetrospectiveController.linkPagesAnalytics={action:new t("gh.linkedPages.discovery.action"),show:new t("gh.linkedPages.discovery.show")}}(),GH.SprintRetrospectiveController.setRapidView=function(t){GH.SprintRetrospectiveController.rapidViewData=t||{}},GH.SprintRetrospectiveController.isApplicable=function(t){return t.sprintSupportEnabled&&!GH.RapidBoard.State.isAgilityBoard()},GH.SprintRetrospectiveController.getNormalizedFromInternal=function(){return{sprint:GH.SprintRetrospectiveController.getSelectedSprintId()||null}},GH.SprintRetrospectiveController.toUrl=function(t){return _.isNull(t.sprint)?{}:{sprint:t.sprint}},GH.SprintRetrospectiveController.updateInternalFromNormalized=function(t){GH.SprintRetrospectiveController.setSelectedSprintFromUrlState(t.sprint)},GH.SprintRetrospectiveController.getNormalizedFromUrl=function(t){return{sprint:GH.RapidBoard.UrlState.normalizeNumberParam(t.sprint,null)}},GH.SprintRetrospectiveController.init=function(){GH.SprintRetrospectiveController.trigger("before:renderChart");var t=require("jira-agile/rapid/ui/component/chart-picker");GH.SprintRetrospectiveController.sprintPicker=new t("sprintRetrospective.selectedSprintId")},GH.SprintRetrospectiveController.show=function(){GH.SprintRetrospectiveController.displayed=!0,GH.SprintRetrospectiveController.rapidViewData&&(GH.SprintRetrospectiveController.renderChartView(),GH.SprintRetrospectiveController.analytics.trigger("show"))},GH.SprintRetrospectiveController.hide=function(){GH.SprintRetrospectiveController.displayed=!1,GH.SprintRetrospectiveView.hide(),AJS.$(GH).unbind("."+GH.SprintRetrospectiveController.id)},GH.SprintRetrospectiveController.renderChartView=function(){GH.SprintRetrospectiveController.initializeControls(),GH.ChartView.getChartContentElem(!0).html(GH.tpl.sprintretrospective.renderReportBody()),GH.ChartView.showSpinner(),GH.SprintRetrospectiveController.loadRapidViewConfig()},GH.SprintRetrospectiveController.initializeControls=function(){AJS.$("#ghx-chart-controls").hide(),AJS.$(GH.SprintRetrospectiveController.sprintPicker).bind("selectedItemChanged",GH.SprintRetrospectiveController.handleSprintChanged)},GH.SprintRetrospectiveController.loadRapidViewConfig=function(){var t=function(t){GH.SprintRetrospectiveController.displayed&&(GH.SprintRetrospectiveController.rapidViewConfig=t,GH.SprintRetrospectiveController.loadSprintOptions())};GH.RapidViewConfig.fetchConfiguration(GH.SprintRetrospectiveController.rapidViewData.id).done(t)},GH.SprintRetrospectiveController.loadSprintOptions=function(){var t=GH.RapidBoard.State.getRapidViewId();GH.Ajax.get({url:"/sprintquery/"+t,data:{includeFutureSprints:!1}},"rapidChartData").done(GH.SprintRetrospectiveController.processSprintsData)},GH.SprintRetrospectiveController.processSprintsData=function(t){if(GH.SprintRetrospectiveController.displayed){t.sprints.reverse(),GH.SprintRetrospectiveController.sprintPicker.setItems(t.sprints),GH.SprintRetrospectiveController.sprintPicker.setDefaultItem(GH.SprintRetrospectiveController.getDefaultSprintForPicker(t.sprints));var e=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();GH.SprintRetrospectiveController.sprintPicker.render(AJS.$("#ghx-chart-selector")),GH.ChartView.showChartGroup(),GH.RapidBoard.State.pushState(),e?GH.SprintRetrospectiveController.loadReportData():GH.ChartView.hideSpinner()}},GH.SprintRetrospectiveController.loadReportData=function(){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();GH.Ajax.get({url:"rapid/charts/sprintreport",data:{rapidViewId:GH.SprintRetrospectiveController.rapidViewConfig.id,sprintId:t.id}},"rapidChartData").done(function(e){GH.SprintRetrospectiveController.displayed&&GH.SprintRetrospectiveController.processReportData(t,e)}).fail(GH.ChartView.hideSpinner),GH.Ajax.get({url:"/rapid/charts/scopechangeburndownchart.json",data:{rapidViewId:GH.SprintRetrospectiveController.rapidViewConfig.id,sprintId:t.id}},"rapidChartData.burndown").done(function(t){GH.SprintRetrospectiveController.displayed&&GH.SprintRetrospectiveView.showMiniBurndown(t)}).fail(GH.ChartView.hideSpinner)},GH.SprintRetrospectiveController.processReportData=function(t,e){GH.SprintRetrospectiveController.supportsPages=e.supportsPages,GH.SprintRetrospectiveView.show();var r;r="duration"==GH.SprintRetrospectiveController.rapidViewConfig.estimationStatistic.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration:GH.NumberFormat.format;var i=function(t){return null==t?"-":r(t)};e.contents.completedIssuesEstimateSum.text=i(e.contents.completedIssuesEstimateSum.value),e.contents.completedIssuesInitialEstimateSum.text=i(e.contents.completedIssuesInitialEstimateSum.value),e.contents.issuesNotCompletedEstimateSum.text=i(e.contents.issuesNotCompletedEstimateSum.value),e.contents.issuesNotCompletedInitialEstimateSum.text=i(e.contents.issuesNotCompletedInitialEstimateSum.value),e.contents.issuesCompletedInAnotherSprintEstimateSum.text=i(e.contents.issuesCompletedInAnotherSprintEstimateSum.value),e.contents.issuesCompletedInAnotherSprintInitialEstimateSum.text=i(e.contents.issuesCompletedInAnotherSprintInitialEstimateSum.value),e.contents.puntedIssuesEstimateSum.text=i(e.contents.puntedIssuesEstimateSum.value),e.contents.puntedIssuesInitialEstimateSum.text=i(e.contents.puntedIssuesInitialEstimateSum.value),e.contents.allIssuesEstimateSum.text=i(e.contents.allIssuesEstimateSum.value);var n=function(t){GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash(t,"estimateStatistic",r),GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash(t,"currentEstimateStatistic",r)};_.each(e.contents.completedIssues,n),_.each(e.contents.issuesNotCompletedInCurrentSprint,n),_.each(e.contents.issuesCompletedInAnotherSprint,n),_.each(e.contents.puntedIssues,n);var o=GH.ChartUtils.createIssueJql(e.contents.completedIssues.concat(e.contents.issuesNotCompletedInCurrentSprint).concat(e.contents.puntedIssues)),s=GH.ChartUtils.createIssueJql(e.contents.completedIssues),p=GH.ChartUtils.createIssueJql(e.contents.issuesNotCompletedInCurrentSprint),l=GH.ChartUtils.createIssueJql(e.contents.issuesCompletedInAnotherSprint),a=GH.ChartUtils.createIssueJql(e.contents.puntedIssues),c=!0;GH.SprintRetrospectiveView.showSprintReport(t,e,GH.SprintRetrospectiveController.rapidViewConfig.estimationStatistic,encodeURIComponent(o),encodeURIComponent(s),encodeURIComponent(p),encodeURIComponent(l),encodeURIComponent(a),c),GH.SprintRetrospectiveController.postProcessReportData(t)},GH.SprintRetrospectiveController.handleSprintChanged=function(t){GH.SprintRetrospectiveView.clearDialog(),GH.SprintRetrospectiveController.displayed&&(GH.RapidBoard.State.pushState(),GH.SprintRetrospectiveController.loadReportData())},GH.SprintRetrospectiveController.getDefaultSprintForPicker=function(t){var e=_.filter(t,function(t){return"CLOSED"===t.state});return e.length>0?_.first(e):_.first(t)},GH.SprintRetrospectiveController.getSelectedSprintId=function(){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();if(t)return t.id;var e=GH.SprintRetrospectiveController.sprintPicker.getStoredSelectedItemId();return e!=-1?e:null},GH.SprintRetrospectiveController.setSelectedSprintFromUrlState=function(t){GH.SprintRetrospectiveController.sprintPicker.storeSelectedItemId(t)},GH.SprintRetrospectiveController.postProcessReportData=function(t){GH.SprintRetrospectiveController.trigger("after:renderChart"),GH.SprintRetrospectiveController.supportsPages&&GH.SprintRetrospectiveController.shouldShowCreateRetroDialog(t.id)&&GH.SprintRetrospectiveView.showCreateRetrospectiveDialog(t)},GH.SprintRetrospectiveController.shouldShowCreateRetroDialog=function(t){return!!_.find(GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog(),function(e){return e.sprintId===t&&!e.dismissed})},GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog=function(){return GH.storage.get("gh.markedSprintsForRetroDialog")||[]},GH.SprintRetrospectiveController.markSprintAsDismissed=function(t){var e=GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog();_.each(e,function(e){e.sprintId===t&&(e.dismissed=!0)}),GH.storage.put("gh.markedSprintsForRetroDialog",e)},GH.SprintRetrospectiveController.tryMarkSprintForRetroDialog=function(t){function e(e){return e.sprintId===t}var r=GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog();!_.find(r,e)&&r.length<5&&r.push({dismissed:!1,sprintId:t}),GH.storage.put("gh.markedSprintsForRetroDialog",r)},GH.SprintRetrospectiveController.getAppLinkData=function(){function t(t){var e=_.findWhere(t,{primary:!0});return e?e.url+GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION:null}var e=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();return GH.LinkedPagesController.getLinkedPagesForEntity(GH.LinkedPagesController.SPRINT,e.id).andThen(function(r){var i={jiraApplicationId:r.jiraApplicationId,appLinkUrl:t(r.applicationLinks),entityId:e.id,jiraUrl:r.jiraBaseUrl};return i})},GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash=function(t,e,r){_.isUndefined(t[e])||_.isUndefined(t[e].statFieldValue.value)?t[e]={statFieldValue:{text:"-"}}:t[e].statFieldValue.text=r(t[e].statFieldValue.value)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/SprintReportView.js' */
!function(){"use strict";var e=require("jira-agile/rapid/const/PageMode");GH.SprintRetrospectiveView={},GH.SprintRetrospectiveView.createRetroDialog=null,GH.SprintRetrospectiveView.retroApplinkData=null,GH.SprintRetrospectiveView.showSprintReport=function(t,r,i,n,o,s,a,p){var l=!0;AJS.$("#ghx-report-content .ghx-sprint-report").empty().append(GH.tpl.sprintretrospective.renderSprintReport({sprint:r,estimationStatistic:i,completedIssuesJql:o,incompletedIssuesJql:s,puntedIssuesJql:p,issuescompletedInAnotherSprintJql:a,hasIssuesAddedAfterSprintStart:_.keys(r.contents.issueKeysAddedDuringSprint).length})).show(),AJS.$("#ghx-sprint-report-meta").empty().append(GH.tpl.sprintretrospective.renderSprintReportHeader({sprint:r.sprint,showPages:l,linkedPagesCount:r.sprint.remoteLinks.length,endedByHtml:r.lastUserToClose})).append(GH.tpl.board.x.renderSprintGoal({goal:t.goal})).show(),GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.SPRINT,e.REPORT,r.sprint.id,AJS.$("#ghx-sprint-report-meta .js-view-entity-pages")),GH.ReportController.renderSprintActions(AJS.$("#ghx-chart-sprint-actions"),GH.RapidBoard.State.getRapidViewId(),GH.SprintRetrospectiveController.sprintPicker.getItems(),t,n)},GH.SprintRetrospectiveView.doesEndDateNeedExtraRoom=function(e,t){var r;return 3===e.length?(r=.1*(e[2]-e[0]),e[1]-e[0]<r||e[2]-e[1]<r):e[1]<t&&(r=.1*(t-e[0]),e[1]-e[0]<r)},GH.SprintRetrospectiveView.clearDialog=function(){GH.SprintRetrospectiveView.createRetroDialog&&GH.SprintRetrospectiveView.createRetroDialog._hide()},GH.SprintRetrospectiveView.showMiniBurndown=function(e){var t=require("jira-agile/rapid/ui/chart/burndown-chart-controller"),r=require("jira-agile/rapid/ui/chart/burndown-chart-model"),i=require("jira-agile/rapid/ui/chart/chart"),n=require("jira-agile/rapid/ui/chart/chart-controller");if(r.setRawData(e),e.warningMessage)return void AJS.$("#ghx-report-content").prepend(GH.tpl.sprintretrospective.renderWarningMessage({message:e.warningMessage}));var o=[e.startTime,e.endTime];_.isNumber(e.completeTime)&&o.push(e.completeTime),o=o.sort(),GH.SprintRetrospectiveView.doesEndDateNeedExtraRoom(o,e.now)&&AJS.$(".ghx-sprint-report-burndown").addClass("ghx-close-ticklabels");var s={xaxis:{mode:"time",ticks:o,reserveSpace:!0},yaxis:r.getYAxis(),series:{points:{show:!1,radius:3,symbol:"circle"},lines:{show:!0}},grid:{markings:n.getNonWorkingBlocks}},a=AJS.$("#ghx-report-content .ghx-sprint-report-burndown");i.draw(t.id,a,r.getSeries(),s)},GH.SprintRetrospectiveView.show=function(){GH.ChartView.hideSpinner()},GH.SprintRetrospectiveView.hide=function(){},GH.SprintRetrospectiveView.showCreateRetrospectiveDialog=function(t){var r={noBind:!0,width:320,addActiveClass:!1,persistent:!0,container:"#ghx-report-controls-group",calculatePositions:function(e,t){var r=t.target.offset(),i=AJS.$("#ghx-report-controls-group").offset();return{popupCss:{top:r.top-i.top+40,left:r.left-i.left},arrowCss:{left:40},displayAbove:!1}}};GH.SprintRetrospectiveView.createRetroDialog=GH.InlineDialog.create("retroDialog",AJS.$("#ghx-sprint-report-meta .js-view-entity-pages"),GH.SprintRetrospectiveView.renderCreateRetroDialog,r),GH.SprintRetrospectiveView.createRetroDialog.show(),GH.SprintRetrospectiveView.disableRetroDialogDismissalOnBlur(),GH.SprintRetrospectiveController.linkPagesAnalytics.show.trigger("sprint.retroDialog"),AJS.$(".js-retro-dialog-dismiss, #ghx-sprint-report-meta .js-view-entity-pages").live("click",function(e){GH.SprintRetrospectiveView.createRetroDialog._hide(),GH.SprintRetrospectiveController.markSprintAsDismissed(t.id),GH.SprintRetrospectiveController.linkPagesAnalytics.action.trigger("sprint.retroDialog.createPage")}),AJS.$(document).on("submit","#js-create-page-form",function(t){var r=window.open("","_blank");GH.LinkedPagesService.initiateRemoteLinkConversation().done(function(t){var i={applinkId:GH.SprintRetrospectiveView.retroApplinkData.jiraApplicationId,agileMode:e.REPORT,fallbackUrl:GH.SprintRetrospectiveView.retroApplinkData.jiraUrl,creationToken:t};i.sprintId=GH.SprintRetrospectiveView.retroApplinkData.entityId,r.location=GH.SprintRetrospectiveView.retroApplinkData.appLinkUrl+"?"+AJS.$.param(i)}),t.preventDefault()})},GH.SprintRetrospectiveView.renderCreateRetroDialog=function(e,t,r){GH.SprintRetrospectiveController.getAppLinkData().done(function(t){t.appLinkUrl&&(GH.SprintRetrospectiveView.retroApplinkData=t,e.html(GH.tpl.sprintretrospective.renderCreateRetroDialog(t)).addClass("ghx-inline-dialog"),r())})},GH.SprintRetrospectiveView.disableRetroDialogDismissalOnBlur=function(){GH.SprintRetrospectiveView.createRetroDialog._hide=GH.SprintRetrospectiveView.createRetroDialog.hide,AJS.$(document).bind("showLayer",function(e,t,r){"inlineDialog"===t&&"retroDialog"===r.id&&(AJS.$(document.body).unbind("click.retroDialog.inline-dialog-check"),r.hide=function(){return!1})})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/SprintReport.soy' */
// This file was automatically generated from SprintReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintretrospective.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintretrospective == 'undefined') { GH.tpl.sprintretrospective = {}; }


GH.tpl.sprintretrospective.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-report-controls-group"><div id="ghx-report-controls"></div><div id="ghx-sprint-report-meta"></div></div><div id="ghx-report-content"><div class="ghx-sprint-report-burndown"></div><div class="ghx-sprint-report"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderReportBody.soyTemplateName = 'GH.tpl.sprintretrospective.renderReportBody';
}


GH.tpl.sprintretrospective.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.issueNavLink.soyTemplateName = 'GH.tpl.sprintretrospective.issueNavLink';
}


GH.tpl.sprintretrospective.renderSprintReportHeader = function(opt_data, opt_ignored) {
  return '<span class="ghx-sprint-status">' + ((opt_data.sprint.state == 'CLOSED') ? (opt_data.endedByHtml) ? soy.$$filterNoAutoescape(AJS.format('Closed sprint, ended by {0}',opt_data.endedByHtml)) : soy.$$escapeHtml('Closed sprint') : '<em>' + soy.$$escapeHtml('Active sprint') + '</em>') + '</span><span title="' + soy.$$escapeHtml('Start Date') + '">' + soy.$$escapeHtml(opt_data.sprint.startDate) + '</span> - ' + ((opt_data.sprint.state == 'CLOSED') ? '<span title="' + soy.$$escapeHtml('Completion Date') + '">' + soy.$$escapeHtml(opt_data.sprint.completeDate) + '</span>' : '<span class="ghx-projected" title="' + soy.$$escapeHtml('Projected End Date') + '">' + soy.$$escapeHtml(opt_data.sprint.endDate) + '</span>') + ((opt_data.showPages) ? GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.linkedPagesCount, title: 'Create and view pages linked to this sprint'}) : '');
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReportHeader.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReportHeader';
}


GH.tpl.sprintretrospective.renderSprintReport = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item"><h3>' + soy.$$escapeHtml('Status Report') + '</h3></div>' + ((opt_data.hasIssuesAddedAfterSprintStart) ? '<div class="ghx-added-legend aui-item">* ' + soy.$$escapeHtml('Issue added to sprint after start time') + '</div>' : '') + '</div><div class="ghx-sprint-report-table ghx-report-issue-list" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.sprint ? opt_data.sprint.sprint.id : '') + '">' + ((opt_data.sprint.contents.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Completed Issues'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.completedIssuesJql}), issues: opt_data.sprint.contents.completedIssues, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.completedIssuesInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.completedIssuesEstimateSum.text}) : '') + ((opt_data.sprint.contents.issuesNotCompletedInCurrentSprint.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Issues Not Completed'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.incompletedIssuesJql}), issues: opt_data.sprint.contents.issuesNotCompletedInCurrentSprint, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.issuesNotCompletedInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.issuesNotCompletedEstimateSum.text}) : '') + ((opt_data.sprint.contents.issuesCompletedInAnotherSprint.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Issues completed outside of this sprint'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.issuescompletedInAnotherSprintJql}), issues: opt_data.sprint.contents.issuesCompletedInAnotherSprint, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.issuesCompletedInAnotherSprintInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.issuesCompletedInAnotherSprintEstimateSum.text}) : '') + ((opt_data.sprint.contents.puntedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Issues Removed From Sprint'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.puntedIssuesJql}), issues: opt_data.sprint.contents.puntedIssues, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.puntedIssuesInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.puntedIssuesEstimateSum.text}) : '') + '</table>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReport.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReport';
}


GH.tpl.sprintretrospective.renderCreateRetroDialog = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><h2>' + soy.$$escapeHtml('Retrospective time!') + '</h2><p>' + soy.$$escapeHtml('Create a retrospective page to review \x26 improve your iterations!') + '</p><form id="js-create-page-form" class="aui" target="_blank" action="' + soy.$$escapeHtml(opt_data.appLinkUrl) + '" method="post"><div class="buttons-container">' + aui.buttons.button({extraClasses: ['js-retro-dialog-dismiss'], text: 'Create'}) + aui.buttons.button({extraClasses: ['js-retro-dialog-dismiss'], tagName: 'a', text: 'Close', type: 'link'}) + '</div>' + GH.tpl.component.linkedpages.createPageInputs({entityTypeParam: 'sprintId', entityId: opt_data.entityId, applinkId: opt_data.jiraApplicationId, agileMode: 'report', fallbackUrl: opt_data.jiraUrl}) + '</form></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderCreateRetroDialog.soyTemplateName = 'GH.tpl.sprintretrospective.renderCreateRetroDialog';
}


GH.tpl.sprintretrospective.renderWarningMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({closeable: 'false', content: '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>'});
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderWarningMessage.soyTemplateName = 'GH.tpl.sprintretrospective.renderWarningMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VelocityChartController.js' */
GH.VelocityChartController={},GH.VelocityChartController.id="velocityChart",GH.VelocityChartController.displayed=!1,GH.VelocityChartController.rapidViewData={},GH.VelocityChartController.rapidViewConfig={},function(){var t=require("jira-agile/rapid/analytics-tracker");GH.VelocityChartController.analytics=new t("gh.report.velocityChart")}(),GH.VelocityChartController.setRapidView=function(t){GH.VelocityChartController.rapidViewData=t||{}},GH.VelocityChartController.isApplicable=function(t){return t.sprintSupportEnabled&&!GH.RapidBoard.State.isAgilityBoard()},GH.VelocityChartController.getNormalizedFromInternal=function(){return{}},GH.VelocityChartController.toUrl=function(){return{}},GH.VelocityChartController.updateInternalFromNormalized=function(t){},GH.VelocityChartController.getNormalizedFromUrl=function(t){return{}},GH.VelocityChartController.init=function(){},GH.VelocityChartController.show=function(){GH.VelocityChartController.displayed=!0,GH.VelocityChartController.rapidViewData&&(GH.RapidBoard.State.pushState(),GH.VelocityChartController.renderChartView(),GH.VelocityChartController.analytics.trigger("show"))},GH.VelocityChartController.hide=function(){GH.VelocityChartController.displayed=!1,GH.SprintRetrospectiveView.hide(),AJS.$(GH).unbind("."+GH.VelocityChartController.id)},GH.VelocityChartController.renderChartView=function(){GH.VelocityChartController.initializeControls(),GH.ChartView.getChartContentElem(!0).html(GH.tpl.velocity.renderReportBody()),GH.ChartView.showSpinner(),GH.VelocityChartController.loadRapidViewConfig()},GH.VelocityChartController.initializeControls=function(){AJS.$("#ghx-chart-controls").hide()},GH.VelocityChartController.loadRapidViewConfig=function(){var t=function(t){GH.VelocityChartController.displayed&&(GH.VelocityChartController.rapidViewConfig=t,GH.VelocityChartController.loadReportData())};GH.RapidViewConfig.fetchConfiguration(GH.VelocityChartController.rapidViewData.id).done(t)},GH.VelocityChartController.loadReportData=function(){GH.Ajax.get({url:"/rapid/charts/velocity.json",data:{rapidViewId:GH.VelocityChartController.rapidViewConfig.id}},"rapidChartData.velocity").done(GH.VelocityChartController.processChartData).fail(GH.ChartView.hideSpinner)},GH.VelocityChartController.processChartData=function(t){if(GH.VelocityChartController.displayed){var r;r="duration"==GH.VelocityChartController.rapidViewConfig.estimationStatistic.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration:GH.NumberFormat.format,_.each(t.velocityStatEntries,function(t){t.estimated.text=r(t.estimated.value),t.completed.text=r(t.completed.value)}),GH.VelocityChartView.showVelocityChart(t)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VelocityChartView.js' */
GH.VelocityChartView={},GH.VelocityChartView.showVelocityChart=function(t){var e=require("jira-agile/rapid/ui/chart/burndown-chart-controller"),i=require("jira-agile/rapid/ui/chart/chart");if(0===t.sprints.length)return AJS.$("#ghx-chart-content").html(GH.tpl.velocity.renderNoSprintsMessage({})),void GH.ChartView.hideSpinner();var a=[],r=[],l=[],n=[],o=t.sprints.reverse(),d=0;_.each(o,function(e,i){var o=t.velocityStatEntries[e.id],c=o.estimated.value,s=o.completed.value;d=Math.max(d,c,s),a[i]=[i,c],r[i]=[i,s];var h=GH.tpl.velocity.formatSprintName({sprintName:e.name});l[i]=[i,h],n[i]={sprint:{name:h,id:e.id},estimated:o.estimated.text,completed:o.completed.text}});var c=[{label:"Commitment",data:a},{label:"Completed",data:r}];GH.ChartView.hideSpinner();var s=GH.VelocityChartController.rapidViewConfig.estimationStatistic,h=(i.draw(e.id,GH.ChartView.getChartView(!0),c,{series:{bars:{show:!0,barWidth:.2,align:"center",lineWidth:0,fillColor:{colors:[{opacity:1},{opacity:1}]}}},colors:["#ccc","#14892c"],xaxis:{ticks:l,min:-.5,max:6.5},yaxis:GH.FlotChartUtils.calculateYAxis(d,s),legend:{container:null,position:"ne"},multiplebars:!0}),AJS.$(GH.tpl.velocity.renderVelocityChartTable({rows:n,rapidBoardId:GH.RapidViewConfig.currentData.id})));GH.FlotChartUtils.setAndAlignAxisLabels(void 0,s.name);var p=h.find("tbody").find("tr").find(":first").find("a");p.mousedown(function(t){if(1===t.which){var e=parseInt(AJS.$(this).attr("data-value"),10);GH.BoardState.setPerViewValue("sprintRetrospective.selectedSprintId",e),GH.ReportController.selectChart(GH.SprintRetrospectiveController.id)}}),AJS.$("#ghx-chart-data").empty().append(h),GH.ChartView.hideSpinner()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VelocityChart.soy' */
// This file was automatically generated from VelocityChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.velocity.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.velocity == 'undefined') { GH.tpl.velocity = {}; }


GH.tpl.velocity.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-report-controls-group"><div id="ghx-report-controls"></div></div><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderReportBody.soyTemplateName = 'GH.tpl.velocity.renderReportBody';
}


GH.tpl.velocity.renderNoSprintsMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('There are no available sprints for this board.') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderNoSprintsMessage.soyTemplateName = 'GH.tpl.velocity.renderNoSprintsMessage';
}


GH.tpl.velocity.renderVelocityChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-auto"><thead><tr><th>' + soy.$$escapeHtml('Sprint') + '</th><th class="ghx-right">' + soy.$$escapeHtml('Commitment') + '</th><th class="ghx-right">' + soy.$$escapeHtml('Completed') + '</th></tr></thead><tbody>';
  var rowList16 = opt_data.rows;
  var rowListLen16 = rowList16.length;
  for (var rowIndex16 = 0; rowIndex16 < rowListLen16; rowIndex16++) {
    var rowData16 = rowList16[rowIndex16];
    output += '<tr><td><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidBoardId) + '&view=reporting&chart=sprintRetrospective&sprint=' + soy.$$escapeHtml(rowData16.sprint.id) + '" data-value=' + soy.$$escapeHtml(rowData16.sprint.id) + '>' + soy.$$escapeHtml(rowData16.sprint.name) + '</a></td><td class="ghx-right">' + soy.$$escapeHtml(rowData16.estimated) + '</td><td class="ghx-right">' + soy.$$escapeHtml(rowData16.completed) + '</td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderVelocityChartTable.soyTemplateName = 'GH.tpl.velocity.renderVelocityChartTable';
}


GH.tpl.velocity.formatSprintName = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.sprintName);
};
if (goog.DEBUG) {
  GH.tpl.velocity.formatSprintName.soyTemplateName = 'GH.tpl.velocity.formatSprintName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChangesReportModel.js' */
define("jira-agile/rapid/ui/chart/changes-report-model",["require"],function(t){"use strict";var e=t("underscore"),i=t("jira-agile/rapid/ui/chart/burndown-rate"),s=t("jira-agile/rapid/ui/chart/burndown-table-producer"),a=t("jira-agile/rapid/ui/chart/burndown-timeline-producer"),r=t("jira-agile/rapid/ui/chart/chart-colors"),n=GH.FlotChartUtils,o=GH.ChartUtils,u=GH.TimeFormat,c=GH.NumberFormat,d=function(){};return d.prototype.setParams=function(t){this.statistic=t.statistic,this.issueAddedText=t.issueAddedText,this.issueRemovedText=t.issueRemovedText,this.startText=t.startText},d.prototype.setRawData=function(t){this.data=t,this.processData()},d.prototype.processData=function(){this.ensureIssuesHaveEstimateText(),this.makeStatisticsValuesRenderable()},d.prototype.setRawChartData=function(t){this.chartData=t,this.processChartData()},d.prototype.getStartTime=function(){return this.chartData.startTime},d.prototype.processChartData=function(){this.chartData.endTime||(this.chartData.endTime=this.chartData.now),i.setRateData(this.chartData.workRateData);var t=a.ProgressConsumer;this.timelineData=a.calculateTimelineData(this.chartData,t),this.calculateSeries()},d.prototype.hasIssues=function(){var t=this.getReportContent();return t?t.completedIssues.length>0||t.incompleteEstimatedIssues.length>0||t.incompleteUnestimatedIssues.length>0:!!this.chartData&&!e.isEmpty(this.chartData.changes)},d.prototype.getReportContent=function(){if(this.data)return this.data.contents},d.prototype.getRenderer=function(){return this.statistic.renderer},d.prototype.isIssueCountStatistic=function(){return"issueCount"===this.statistic.typeId},d.prototype.isTimeTracking=function(){return"timeSpent"===this.statistic.fieldId},d.prototype.shouldAddToSeries=function(t,i){var s=!1;return e.each(i,function(e){s=s||e.deltas&&0!==e.deltas[t.id]}),s},d.prototype.getAllSeriesDefinitions=function(){var t=this.statistic.name;return{totalEstimate:{id:"totalEstimate",label:AJS.format("Total {0}",t),renderer:this.getRenderer(),statisticName:t},completedEstimate:{id:"completedEstimate",label:AJS.format("Completed {0}",t),renderer:this.getRenderer(),statisticName:t},issueCount:{id:"issueCount",label:"Number of issues",renderer:"number",statisticName:"Issue Count"},unestimatedIssueCount:{id:"unestimatedIssueCount",label:"Number of unestimated issues",renderer:"number",statisticName:"Issue Count"}}},d.prototype.calculateSeries=function(){var t=[],i=this.getAllSeriesDefinitions();this.isIssueCountStatistic()?(t.push(e.defaults({color:r.scope,yaxis:1,fill:.3,lineWidth:1},i.totalEstimate)),t.push(e.defaults({color:r.completed,yaxis:1,fill:.2,lineWidth:1},i.completedEstimate))):(t.push(e.defaults({color:r.scope,yaxis:1,fill:.3,lineWidth:1},i.totalEstimate)),t.push(e.defaults({color:r.completed,yaxis:1,fill:.2,lineWidth:1},i.completedEstimate)),t.push(e.defaults({color:r.issueCount,yaxis:2,lineWidth:1},i.issueCount)),t.push(e.defaults({color:r.unestimated,yaxis:2,lineWidth:1},i.unestimatedIssueCount))),this.calculateSeriesFromIds(t)},d.prototype.calculateSeriesFromIds=function(t){var i=this.timelineData,s=i?i.timeline:void 0,a=this.series=[];if(!e.isEmpty(s)){var o={},u={};e.each(t,function(t){o[t.id]=[],u[t.id]=[]}),e.each(s,function(i){e.each(t,function(t){this.shouldAddToSeries(t,i.issues)&&(i.deltas&&e.isNumber(i.deltas[t.id])&&0!=i.deltas[t.id]&&(o[t.id].push([i.time,i.values[t.id]-i.deltas[t.id]]),u[t.id].push({})),o[t.id].push([i.time,i.values[t.id]]),u[t.id].push(i))},this)},this);var c=e.last(s);!i.completeTime||i.completeTime>i.now?e.each(t,function(t){o[t.id].push([Math.max(i.startTime,i.now),c.values[t.id]])}):e.each(t,function(t){o[t.id].push([i.completeTime,c.values[t.id]])}),this.isTimeTracking()&&a.push({id:"timeSpent",data:o.timeSpent,color:r.timeSpent,label:"Time Spent"}),e.each(t,function(t){a.push({id:t.id,data:o[t.id],color:t.color,label:t.label,yaxis:t.yaxis,lines:{fill:t.fill,lineWidth:t.lineWidth,show:!0}})}),a.push({id:"markings",color:r.nonWorkingDays,data:[],label:"Non-Working Days"});var d=i.maxValues.totalEstimate;this.yAxisData=n.calculateYAxis(d,this.statistic),this.yAxisData.min=0,this.yAxisData.max=d,this.series=a,this.seriesData=u}},d.prototype.getXAxisStart=function(){var t=.02;return this.chartData.startTime-(this.chartData.endTime-this.chartData.startTime)*t},d.prototype.getYAxes=function(){var t=[];if(t.push(this.yAxisData),!this.isIssueCountStatistic()){var e=this.timelineData.maxValues.issueCount,i=1;e>15&&(i=Math.ceil(e/8)),t.push({position:"right",min:0,tickFormatter:function(t,e){return t.toFixed(0)},tickSize:i})}return t},d.prototype.getDataBySeries=function(t){return this.seriesData&&this.seriesData[t]},d.prototype.getTooltipData=function(t,i){var s={};return i.initial?(i.initial&&(s.initial=!0,s.event=this.getEpicStartChangeEvent()),s.issueCount=e.size(i.issues),s.statisticName=this.getSeriesStatisticName(t),s.statisticValue=o.renderStatisticText(i.values[t],!1,this.getSeriesRenderer(t))):(s.changes=[],e.each(i.issues,function(e){var i={};i.key=e.key,i.statisticName=this.getSeriesStatisticName(t),i.statisticDelta=o.renderStatisticText(e.deltas[t],!1,this.getSeriesRenderer(t)),i.event=this.getChangeEvent(e),s.changes.push(i)},this)),s.dateText=o.renderUTCMillisAsDate(i.time),s},d.prototype.getSeriesRenderer=function(t){var e=this.getAllSeriesDefinitions();return e[t].renderer},d.prototype.getSeriesStatisticName=function(t){var e=this.getAllSeriesDefinitions();return e[t].statisticName},d.prototype.getDataBySeriesAtIndex=function(t,e){var i=this.getDataBySeries(t);if(i)return i[e]},d.prototype.getChangeEvent=function(t){var i="Burnup",s=this.getScopeOrColumnChangeEvent(t,i);if(s)return s;if(t.estimateChange){var a=t.values.oldEstimateFieldValue,r=t.values.estimateFieldValue,n=!e.isUndefined(a),o=!e.isUndefined(r);return n&&o?{type:"Scope change",detail:AJS.format("Estimate changed from {0} to {1}",this.renderStatisticText(a),this.renderStatisticText(r))}:n?{type:"Scope change",detail:AJS.format("Estimate of {0} has been removed",this.renderStatisticText(a))}:{type:"Scope change",detail:AJS.format("Estimate of {0} has been added",this.renderStatisticText(r))}}return{type:"unknown",detail:"unknown change"}},d.prototype.getScopeOrColumnChangeEvent=function(t,e){return t.scopeChange?t.inScope?{type:"Scope change",detail:this.issueAddedText}:{type:"Scope change",detail:this.issueRemovedText}:s.getColumnChangeEvent(t,e)},d.prototype.getStartChangeEvent=function(){return{type:this.startText,detail:""}},d.prototype.getSeries=function(){return this.series},d.prototype.getXAxisEnd=function(){},d.prototype.ensureIssuesHaveEstimateText=function(){function t(t){return e.isUndefined(t.estimateStatistic)||e.isUndefined(t.estimateStatistic.statFieldValue.value)?t.estimateStatistic={statFieldValue:{text:"-"}}:t.estimateStatistic.statFieldValue.text=s(t.estimateStatistic.statFieldValue.value),t}var i=this.getReportContent(),s=this._getValueRenderer();i.completedIssues=e.map(this.data.contents.completedIssues,t),i.incompleteUnestimatedIssues=e.map(this.data.contents.incompleteUnestimatedIssues,t),i.incompleteEstimatedIssues=e.map(this.data.contents.incompleteEstimatedIssues,t)},d.prototype._getValueRenderer=function(){var t;return t="duration"===this.getStatistic().renderer?u.formatShortDurationForTimeTrackingConfiguration:c.format},d.prototype.makeStatisticsValuesRenderable=function(){var t=this.getReportContent(),e=this._getValueRenderer();t.completedIssuesEstimateSum.text=e(t.completedIssuesEstimateSum.value),t.incompletedIssuesEstimateSum.text=e(t.incompletedIssuesEstimateSum.value)},d.prototype.getJql=function(){return this.jql},d.prototype.getDoneStatuses=function(){return this.data.doneStatuses},d.prototype.getNotDoneStatuses=function(){return this.data.notDoneStatuses},d.prototype.renderStatisticText=function(t,e){return o.renderStatisticText(t,e,this.getStatistic().renderer)},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/NonWorkingDaysUtils.js' */
define("jira-agile/rapid/ui/chart/non-working-days-util",["require"],function(n){"use strict";var r=n("underscore"),e=n("jira-agile/rapid/ui/chart/burndown-rate"),t={};return t.transformSeriesExcludingNonWorkingDays=function(n,t,a){r.isUndefined(a)&&(a=r.pluck(n,"id"));var u=function(n,r){if(n.xValue>=r.start){if(!(r.start<=t&&r.end>=t))return n.xValue<r.end?n.xValue-r.moveTo:r.end-r.moveTo;if(n.xValue>=r.end)return r.end-t}return 0},i=r.map(n,function(n){var e=r.clone(n);return e.data=r.map(n.data,function(n){return{xValue:n[0],yValue:n[1],xTransform:0}}),e}),o=e.getAdjustedNonWorkingDays(t);return r.each(o,function(n){r.each(i,function(e){e.data=r.map(e.data,function(r){return{xValue:r.xValue,yValue:r.yValue,xTransform:r.xTransform+u(r,n)}})})}),r.map(i,function(n){var e=r.clone(n);return r.indexOf(a,n.id)>-1?e.data=r.map(n.data,function(n){return[n.xValue-n.xTransform,n.yValue]}):e.data=r.map(n.data,function(n){return[n.xValue,n.yValue]}),e})},t.transformDateIfInNonWorkingDays=function(n,t){if(n<t)return new Date(n);var a=e.getAdjustedNonWorkingDays(t),u=n;return r.each(a,function(n){u>=n.start&&(u+=n.end-n.moveTo)}),new Date(u)},t.deductNonWorkingDays=function(n,t){var a=e.getAdjustedNonWorkingDays(t),u=r.filter(a,function(n){return t>=n.start&&t<n.end}),i=r.filter(a,function(r){return n>=r.start&&n<r.end}),o=n;i.length>0&&(o=i[0].start);var d=t;u.length>0&&(d=u[0].end,o-=d-t);var f=r.filter(a,function(n){return n.end>d&&n.start<o});return r.each(f,function(n){o-=n.end-n.start}),o},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReportController.js' */
GH.EpicReportController={},GH.EpicReportController.id="epicReport",function(){var e=require("jira-agile/rapid/analytics-tracker");GH.EpicReportController.analytics=new e("gh.report.epicReport")}(),GH.EpicReportController.init=function(){var e=require("jira-agile/rapid/ui/component/chart-picker");GH.EpicReportController.epicPicker=new e("epicReport.selectedEpicId","There are currently no epics on this board"),AJS.$(GH.EpicReportController.epicPicker).bind("selectedItemChanged",GH.EpicReportController.handleEpicChanged)},GH.EpicReportController.setRapidView=function(e){GH.EpicReportController.rapidViewData=e||{}},GH.EpicReportController.isApplicable=function(e){return e.sprintSupportEnabled&&!GH.RapidBoard.State.isAgilityBoard()},GH.EpicReportController.getNormalizedFromInternal=function(){return{epic:GH.EpicReportController.getSelectedEpicKey()||null}},GH.EpicReportController.toUrl=function(e){return _.isNull(e.epic)?{}:{epic:e.epic}},GH.EpicReportController.updateInternalFromNormalized=function(e){GH.EpicReportController.setSelectedEpicFromUrlState(e.epic)},GH.EpicReportController.getNormalizedFromUrl=function(e){return{epic:GH.RapidBoard.UrlState.normalizeStringParam(e.epic,null)}},GH.EpicReportController.hide=function(){GH.EpicReportController.displayed=!1},GH.EpicReportController.show=function(){var e=require("jira-agile/rapid/ui/chart/chart-controller");GH.EpicReportController.displayed=!0,GH.EpicReportController.rapidViewData&&(GH.EpicReportView.renderChartLoading(),e.loadRapidViewConfig(GH.EpicReportController,GH.EpicReportController.loadEpicsList),GH.EpicReportController.analytics.trigger("show"))},GH.EpicReportController.loadEpicsList=function(){var e={rapidViewId:GH.EpicReportController.rapidViewData.id};GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:e},"epicListForEpicReport").done(GH.EpicReportController.processEpicData).fail(GH.ChartView.hideSpinner)},GH.EpicReportController.processEpicData=function(e){if(GH.EpicReportController.displayed){GH.EpicReportController.epicsData=e;var r=_.map(e.epics,function(e){return{id:e.key,name:GH.EpicConfig.getEpicNameString(e.epicLabel,e.key)}});GH.EpicReportController.epicPicker.setItems(r),GH.EpicReportController.epicPicker.setDefaultItem(_.first(r)),GH.EpicReportView.renderEpicPicker(),GH.EpicReportView.setUserTimeZoneLabel(GH.TimeFormat.userTimeZoneLabel),GH.EpicReportController.epicPicker.getSelectedItem()?GH.EpicReportController.loadReportData():GH.ChartView.hideSpinner(),GH.RapidBoard.State.replaceState()}},GH.EpicReportController.loadReportData=function(){GH.EpicReport.createModel();var e=GH.EpicReportController.epicPicker.getSelectedItem().id,r={rapidViewId:GH.EpicReportController.rapidViewData.id,epicKey:e},t=GH.Ajax.get({url:"/rapid/charts/epicreport",data:r},"epicReportData"+e).done(GH.EpicReportController.processReportData),o=GH.Ajax.get({url:"/rapid/charts/epicprogresschart",data:r},"epicprogresschart"+e).done(GH.EpicReportController.processChartData);AJS.$.when(t,o).then(GH.EpicReportController.performDataConsistencyCheck,GH.EpicReportController.failedToLoad)},GH.EpicReportController.failedToLoad=function(){GH.ChartView.hideSpinner(),GH.EpicReportController.epicPicker.removeSelectedItemAndRevert(GH.ChartView.getChartSelector(!0))},GH.EpicReportController.processReportData=function(e){if(GH.EpicReportController.displayed){var r=_.findWhere(GH.EpicReportController.epicsData.epics,{id:e.epic.id});r&&(e.epic.linkedPagesCount=r.linkedPagesCount,_.extend(e,_.pick(GH.EpicReportController.epicsData,"canEditEpics","supportsPages"))),GH.EpicReport.model.setRawData(e),GH.EpicReportView.renderReport()}},GH.EpicReportController.processChartData=function(e){GH.EpicReportController.displayed&&(GH.EpicReport.model.setRawEpicChartData(e),GH.EpicReportView.renderChart())},GH.EpicReportController.performDataConsistencyCheck=function(){if(GH.EpicReportController.displayed){var e=GH.EpicReport.model.getIssuesWithStatisticFieldMismatch();_.isEmpty(e)||GH.EpicReportView.renderStatisticMismatchWarning(e)}},GH.EpicReportController.handleEpicChanged=function(){GH.EpicReportController.displayed&&(GH.RapidBoard.State.pushState(),GH.EpicReportController.loadReportData())},GH.EpicReportController.getSelectedEpicKey=function(){var e=GH.EpicReportController.epicPicker.getSelectedItem();if(e)return e.id},GH.EpicReportController.setSelectedEpicFromUrlState=function(e){GH.EpicReportController.epicPicker.storeSelectedItemId(e)},GH.EpicReportController.setPointsForChart=function(e,r){var t=r.id,o=GH.EpicReport.model.getDataBySeries(t);if(o){var i=GH.FlotChartUtils.gatherPoints(r,o);e.realPointsPerSeries[t]=i}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReportView.js' */
!function(){"use strict";var e=require("jira-agile/rapid/const/PageMode");GH.EpicReportView={},GH.EpicReportView.setUserTimeZoneLabel=function(e){GH.EpicReportView.userTimeZoneLabel=e},GH.EpicReportView.renderChartLoading=function(){GH.ChartView.getChartContentElem(!0).html(GH.tpl.epicreport.renderReportBody()),GH.ChartView.showSpinner()},GH.EpicReportView.toggleChartVisibility=function(){GH.ChartView.hideSpinner(),AJS.$("#ghx-chart-mismatch").empty(),GH.EpicReport.model.hasIssues()?(AJS.$("#ghx-epic-report-no-issues").hide(),AJS.$("#ghx-report-content").show()):(AJS.$("#ghx-report-content").hide(),AJS.$("#ghx-epic-report-no-issues").show())},GH.EpicReportView.renderReport=function(){GH.EpicReportView.toggleChartVisibility(),GH.EpicReportView.renderMeta(),GH.EpicReport.model.hasIssues()&&(GH.EpicReportView.renderIssuesReport(),GH.EpicReportView.renderSummary())},GH.EpicReportView.renderEpicPicker=function(){GH.EpicReportController.epicPicker.render(GH.ChartView.getChartSelector(!0))},GH.EpicReportView.renderIssuesReport=function(){var e=GH.EpicReport.model.getReportContent(),t=GH.EpicReport.model.hasIssues(),i=AJS.$("#ghx-report-content .ghx-epic-report");i.empty().html(GH.tpl.epicreport.renderEpicReport({content:e,jql:GH.EpicReport.model.getJql(),estimationStatistic:GH.EpicReportController.rapidViewConfig.estimationStatistic,hasIssues:t})),i.find(".issue-table-title-tooltip").tooltip()},GH.EpicReportView.renderSummary=function(){AJS.$("#ghx-report-content .ghx-epic-summary").empty().html(GH.tpl.epicreport.renderEpicSummary({epic:GH.EpicReport.model.getEpicSummary(),issuesJql:GH.EpicReport.model.getJql().allIssues}))},GH.EpicReportView.renderMeta=function(){var t=GH.EpicReport.model.getEpic();AJS.$("#ghx-epic-meta").empty().append(GH.tpl.epicreport.renderEpicReportHeader({epic:t,showPages:GH.EpicReport.model.supportsPages()})).show(),GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.EPIC,e.REPORT,t.id,AJS.$("#ghx-epic-meta .js-view-entity-pages"))},GH.EpicReportView.renderStatisticMismatchWarning=function(e){var t=_.pluck(e,"key"),i=GH.tpl.epicreport.renderStatisticValueMismatchMessage({statisticName:GH.EpicReport.model.getStatistic().name,keys:t.join(", ")});AJS.messages.warning("#ghx-chart-mismatch",{body:i,closeable:!0,shadowed:!1})},GH.EpicReportView.renderChart=function(){var e=require("jira-agile/rapid/ui/chart/chart");if(GH.EpicReportView.toggleChartVisibility(),GH.EpicReport.model.hasIssues()){var t=GH.ChartView.getChartView(!0),i=GH.EpicReport.model.getSeries(),r=e.draw(GH.EpicReportController.id,t,i,GH.ChartUtils.getChartOptions(GH.EpicReport.model)),o=!1;GH.EpicReport.model.getYAxes().length>1&&(o="Issue Count"),GH.FlotChartUtils.setAndAlignAxisLabels(AJS.format("Time ({0})",GH.EpicReportView.userTimeZoneLabel),GH.EpicReport.model.getStatistic().name,o),r.hooks.drawSeries.push(GH.EpicReportView.gatherPoints),r.hooks.draw.push(GH.FlotChartUtils.deferredRenderPoints),GH.EpicReportView.bindEvents(t)}},GH.EpicReportView.handlePlotHover=function(e,t,i){if(i){var r=i.series.id,o=i.dataIndex,p=GH.EpicReport.model.getDataBySeriesAtIndex(r,o);if(!_.isEmpty(p))return void(GH.EpicReportView.previousPlotHoverPoint!=i.dataIndex&&(GH.EpicReportView.previousPlotHoverPoint=i.dataIndex,AJS.$("#ghx-tooltip").remove(),GH.EpicReportView.showChartTooltip(i,r,p,i.datapoint[0]),AJS.$("#ghx-tooltip").hasClass("ghx-has-warnings")||GH.ChartView.getChartView().addClass("ghx-clickable")))}AJS.$("#ghx-tooltip").remove(),GH.EpicReportView.previousPlotHoverPoint=null,GH.ChartView.getChartView().removeClass("ghx-clickable")},GH.EpicReportView.showChartTooltip=function(e,t,i){if(i){var r=GH.EpicReport.model.getTooltipData(t,i),o=new GH.ChartTooltip(e,r);o.render()}},GH.EpicReportView.previousPlotHoverPoint=void 0,GH.EpicReportView.gatherPoints=function(e,t,i){e.mouseEntered&&GH.EpicReportController.setPointsForChart(e,i)},GH.EpicReportView.bindEvents=function(e){e.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",GH.FlotChartUtils.handleMouseOverStateChange),e.unbind("plothover plotclick"),e.bind("plothover",GH.EpicReportView.handlePlotHover),e.bind("plotclick",GH.FlotChartUtils.handlePlotClick)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReportModel.js' */
GH.EpicReport={},GH.EpicReport.createModel=function(){GH.EpicReport.model=new GH.EpicReportModel,GH.EpicReport.model.setParams({statistic:GH.EpicReportController.rapidViewConfig.estimationStatistic,issueAddedText:"Issue added to epic",issueRemovedText:"Issue removed from epic",startText:"Epic Created"})},GH.EpicReportModel=function(){},function(){var t=require("jira-agile/rapid/ui/chart/changes-report-model");GH.EpicReportModel.prototype=new t}(),GH.EpicReportModel.prototype.setRawEpicChartData=function(t){t.startTime=t.epicCreationTime,this.setRawChartData(t)},GH.EpicReportModel.prototype.setRawData=function(t){this.data=t,this.processData(),this.generateJql(),this.generateSummary()},GH.EpicReportModel.prototype.generateSummary=function(){function t(t){return _.reduce(t,function(t,e){var i=e.estimateStatistic.statFieldValue.value;return _.isUndefined(i)&&(i=0),t+i},0)}var e={},i={},s=this.getReportContent();i.done=s.completedIssues.length,i.notEstimated=s.incompleteUnestimatedIssues.length,i.totalIssueCount=i.done+i.notEstimated+s.incompleteEstimatedIssues.length,e.epicStats=i,e.estimateDone=t(s.completedIssues),e.estimateTotal=e.estimateDone+t(s.incompleteEstimatedIssues),e.estimateStatisticName=this.getStatistic().name,e.isIssueCountStatistic=this.isIssueCountStatistic(),e.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.EpicReportController.rapidViewConfig.estimationStatistic,e.estimateDone),e.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.EpicReportController.rapidViewConfig.estimationStatistic,e.estimateTotal);var a=this.getEpic();e.epicName=GH.EpicConfig.getEpicNameString(a.label,a.key),this.data.epicSummary=e},GH.EpicReportModel.prototype.generateJql=function(){var t=this.getStatistic();this.jql={};var e=GH.ChartUtils.createEpicJql(this.data.epic),i=e+" AND "+GH.ChartUtils.createStatusJql(this.getNotDoneStatuses());if(this.isIssueCountStatistic())this.jql.incompleteEstimatedIssues=i;else{var s=t.fieldId,a=/^customfield_(\d+)/.exec(s),o=a&&a.length>0;o&&(s="cf["+a[1]+"]"),this.jql.incompleteUnestimatedIssues=i+" AND "+s+" IS EMPTY",o?this.data.contents.incompleteEstimatedIssues.length>0&&(this.jql.incompleteEstimatedIssues=GH.ChartUtils.createIssueJql(this.data.contents.incompleteEstimatedIssues)):this.jql.incompleteEstimatedIssues=i+" AND "+s+" IS NOT EMPTY"}this.jql.completedIssues=e+" AND "+GH.ChartUtils.createStatusJql(this.getDoneStatuses()),this.jql.allIssues=e},GH.EpicReportModel.prototype.getEpic=function(){return this.data.epic},GH.EpicReportModel.prototype.getEpicSummary=function(){return this.data.epicSummary},GH.EpicReportModel.prototype.getStatistic=function(){return GH.EpicReportController.rapidViewConfig.estimationStatistic},GH.EpicReportModel.prototype.canUserEditEpics=function(){return!!this.data.canEditEpics},GH.EpicReportModel.prototype.supportsPages=function(){return!!this.data.supportsPages},GH.EpicReportModel.prototype.getIssuesWithStatisticFieldMismatch=function(){if(this.isIssueCountStatistic())return[];var t=this.timelineData.finalIssueStates,e=this.data.contents,i=_.flatten([e.completedIssues,e.incompleteEstimatedIssues,e.incompleteUnestimatedIssues]),s=[];return _.each(i,function(e){var i=t[e.key];i&&e.estimateStatistic&&e.estimateStatistic.statFieldValue&&e.estimateStatistic.statFieldValue.value!=i.values.estimateFieldValue&&s.push({key:i.key,reportValue:e.estimateStatistic.statFieldValue.value,chartValue:i.values.estimateFieldValue,reportIssue:e,chartIssue:i})}),s};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/EpicReport.soy' */
// This file was automatically generated from EpicReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.epicreport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.epicreport == 'undefined') { GH.tpl.epicreport = {}; }


GH.tpl.epicreport.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-controls-group"><div id="ghx-chart-controls"></div><div id="ghx-epic-meta" class="ghx-epic-meta"></div><div id="ghx-epic-report-no-issues" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('This epic does not contain any issues.') + '</p></div></div></div><div id="ghx-report-content"><div id="ghx-chart-mismatch"></div><div class="ghx-epic-summary-wrap"><div id="ghx-chart-legend" class="ghx-epic-chart-legend"></div><div class="ghx-epic-summary"></div></div><div id="ghx-chart-wrap" class="ghx-epic-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div><div id="ghx-axis-y-right" class="ghx-axis ghx-axis-y-right"><span class="ghx-inner"></span></div></div><div class="ghx-epic-report ghx-margin-top"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderReportBody.soyTemplateName = 'GH.tpl.epicreport.renderReportBody';
}


GH.tpl.epicreport.renderStatisticValueMismatchMessage = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(AJS.format('Some issues have {0} even though their current configuration does not allow a value to be set.',opt_data.statisticName)) + ' ' + soy.$$escapeHtml('As a result the numbers in the chart will be different to the summary and status report.') + '<br>' + soy.$$escapeHtml(AJS.format('Affected issues are: {0}',opt_data.keys));
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderStatisticValueMismatchMessage.soyTemplateName = 'GH.tpl.epicreport.renderStatisticValueMismatchMessage';
}


GH.tpl.epicreport.renderEpicReport = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml('Status Report') + '</h3><div class="ghx-epic-report-table ghx-report-issue-list">' + ((opt_data.content.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Completed Issues'), issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.completedIssues}), issues: opt_data.content.completedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.completedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteEstimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Incomplete Issues'), issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.incompleteEstimatedIssues}), issues: opt_data.content.incompleteEstimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.incompletedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteUnestimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: 'Incomplete Unestimated Issues', titleTooltip: '\x22Unestimated issues\x22 also includes issues that cannot be estimated due to their configuration, e.g. no Story Points field.', issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.incompleteUnestimatedIssues}), issues: opt_data.content.incompleteUnestimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: 0}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicReport.soyTemplateName = 'GH.tpl.epicreport.renderEpicReport';
}


GH.tpl.epicreport.renderEpicSummary = function(opt_data, opt_ignored) {
  var output = '<h4>' + soy.$$escapeHtml('Summary') + '</h4><h5>' + soy.$$escapeHtml('Issues') + '</h5><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Total') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.totalIssueCount) + '</div></div><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Completed') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.done) + '</div></div>' + ((! opt_data.epic.isIssueCountStatistic) ? '<div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Unestimated') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.notEstimated) + '</div></div><h5 id="ghx-stat-name">' + soy.$$escapeHtml(opt_data.epic.estimateStatisticName) + '</h5><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Total') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.estimateTotal) + '</div></div><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Done') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.estimateDone) + '</div></div>' : '') + '<div class="ghx-margin-top">';
  var issueNavLink__soy82 = '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.issuesJql});
  output += '<a href="' + soy.$$escapeHtml(issueNavLink__soy82) + '">' + soy.$$escapeHtml(AJS.format('View {0} in Issue Navigator',opt_data.epic.epicName)) + '</a></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicSummary.soyTemplateName = 'GH.tpl.epicreport.renderEpicSummary';
}


GH.tpl.epicreport.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.epicreport.issueNavLink.soyTemplateName = 'GH.tpl.epicreport.issueNavLink';
}


GH.tpl.epicreport.renderEpicReportHeader = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-inline-blocks"><div class="aui-item"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.epic.key) + '">' + soy.$$escapeHtml(opt_data.epic.key) + '</a> ' + soy.$$escapeHtml(opt_data.epic.summary) + '</div>' + ((opt_data.showPages) ? '<div class="aui-item">' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.epic.linkedPagesCount, title: 'Create and view pages linked to this epic'}) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicReportHeader.soyTemplateName = 'GH.tpl.epicreport.renderEpicReportHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReportController.js' */
define("jira-agile/rapid/ui/chart/version-report-controller",["require"],function(e){"use strict";var r=e("jquery"),i=e("underscore"),a=e("jira-agile/rapid/analytics-tracker"),t=e("jira-agile/rapid/ui/chart/burndown-rate"),n=e("jira-agile/rapid/ui/chart/chart-controller"),o=e("jira-agile/rapid/ui/component/chart-picker"),s=e("jira-agile/rapid/ui/chart/chart-view"),d=e("jira-agile/rapid/ui/chart/version-report"),l=e("jira-agile/rapid/ui/chart/version-report-view"),c=e("jira-agile/rapid/ajax"),p=GH.ChartUtils,u=GH.FlotChartUtils,g=GH.RapidBoard.State,v=GH.RapidBoard.UrlState,h=GH.TimeFormat,f=GH.VersionsModel,m={};return m.nonWorkingDaysShown=!0,m.id="versionReport",m.analytics=new a("gh.report.versionReport"),m.init=function(){m.versionPicker=new o("versionReport.selectedVersionId","There are currently no versions on this board.")},m.isApplicable=function(e){return e.sprintSupportEnabled},m.setRapidView=function(e){m.rapidViewData=e||{}},m.getRapidView=function(){return m.rapidViewData},m.getNormalizedFromInternal=function(){return{version:m.getSelectedVersionId()||null}},m.toUrl=function(e){return i.isNull(e.version)?{}:{version:e.version}},m.updateInternalFromNormalized=function(e){m.setSelectedVersionFromState(e.version)},m.getNormalizedFromUrl=function(e){return{version:v.normalizeNumberParam(e.version,null)}},m.getSelectedVersionId=function(){var e=m.versionPicker.getSelectedItem();if(e)return e.id;var r=m.versionPicker.getStoredSelectedItemId();return r!=-1?r:null},m.show=function(){m.displayed=!0,m.rapidViewData&&(l.renderChartLoading(),r(m.versionPicker).on("selectedItemChanged",m.handleVersionChanged),n.loadRapidViewConfig(m,m.loadVersionsList),m.analytics.trigger("show"))},m.hide=function(){r(m.versionPicker).off("selectedItemChanged",m.handleVersionChanged),m.displayed=!1},m.loadVersionsList=function(){var e={rapidViewId:m.rapidViewData.id};c.get({url:"/xboard/plan/backlog/versions.json",data:e},"versionsListForReport").done(m.processVersionData).fail(s.hideSpinner)},m.processVersionData=function(e){if(m.displayed){var r=m.versionModel=new f(e.projects);r.updateRawData(e.versionData);var a=i.map(r.getAllVersions(),function(e){return{id:e.id,name:e.project?e.project.key+": "+e.name:e.name}});a.reverse(),m.versionPicker.setItems(a),m.versionPicker.setDefaultItem(i.first(a)),l.setUserTimeZoneLabel(h.userTimeZoneLabel),l.renderVersionPicker(),m.versionPicker.getSelectedItem()?m.loadReportData():s.hideSpinner(),m.nonWorkingDaysShown=g.getNonWorkingDaysShown("version"),g.replaceState()}},m.loadReportData=function(){d.createModel(m.rapidViewConfig.estimationStatistic);var e={rapidViewId:m.getRapidView().id,versionId:m.getSelectedVersionId()},i=c.get({url:"/rapid/charts/versionprogresschart",data:e},"versionChartData").done(m.processChartData),a=c.get({url:"/rapid/charts/versionreport",data:e},"versionReportData").done(m.processReportData);r.when(i,a).then(m.calculatePredictions,m.failedToLoad)},m.failedToLoad=function(){s.hideSpinner(),m.versionPicker.removeSelectedItemAndRevert(s.getChartSelector(!0))},m.processChartData=function(e){m.displayed&&d.model.setRawVersionChartData(e)},m.calculatePredictions=function(){var e=d.model.getFurthestDateForNonWorkingDaysData();if(e<1/0&&e>d.model.getVersionStartDate()){var r=e,i=(new Date).valueOf()+90*p.oneDayInMillis;e<=i&&(r=i),c.get({url:"/rapidviewconfig/workingdays/rates",data:{rapidViewId:m.rapidViewData.id,startDate:d.model.getVersionStartDate()-3*p.oneDayInMillis,endDate:r}},"workingdaysrates").done(function(e){t.setRateData(e),m.renderChart()})}else m.renderChart()},m.renderChart=function(){m.displayed&&(l.renderChart(),l.renderIssuesLink(),l.renderMeta())},m.setSelectedVersionFromState=function(e){m.versionPicker.storeSelectedItemId(e)},m.setPointsForChart=function(e,r){var i=r.id,a=d.model.getDataBySeries(i);if(a){var t=u.gatherPoints(r,a);e.realPointsPerSeries[i]=t}},m.handleVersionChanged=function(e){m.displayed&&(g.pushState(),m.loadReportData())},m.processReportData=function(e){m.displayed&&(d.model.setRawData(e),l.renderReport())},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReportView.js' */
define("jira-agile/rapid/ui/chart/version-report-view",["require"],function(e){"use strict";var t,r=e("jquery"),i=e("underscore"),o=e("jira-agile/rapid/ui/chart/change-event"),a=e("jira-agile/rapid/ui/chart/chart"),n=e("jira-agile/rapid/ui/chart/chart-colors"),s=e("jira-agile/rapid/ui/chart/chart-controller"),d=e("jira-agile/rapid/ui/chart/chart-view"),l=e("jira-agile/rapid/global-events"),h=e("jira-agile/rapid/ui/chart/non-working-days-util"),g=e("jira-agile/rapid/ui/chart/version-report"),p=GH.ChartTooltip,c=GH.ChartUtils,m=GH.FlotChartUtils,u=GH.tpl;l.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/version-report-controller")});var f={};return f.unmodifiedSeries=void 0,f.series=void 0,f.setUserTimeZoneLabel=function(e){f.userTimeZoneLabel=e},f.renderChartLoading=function(){d.getChartContentElem(!0).html(u.versionreport.renderReportBody()),d.showSpinner()},f.renderVersionPicker=function(){t.versionPicker.render(d.getChartSelector(!0))},f.renderChart=function(){if(f.toggleChartVisibility(!0),g.model.hasIssues()&&!g.model.notStarted()){var e=d.getChartView(!0),o=g.model.getVersionSeries();if(f.wallboardMode){var s=i.findWhere(o,{id:"markings"});s.color=n.nonWorkingDaysWallboard}var l=f.getChartOptions();if(f.unmodifiedSeries=o,f.series=o,!t.nonWorkingDaysShown){var p=g.model.getXAxisStart();if(o=h.transformSeriesExcludingNonWorkingDays(o,p),f.series=o,i.findWhere(o,{id:"prediction"})){var u=i.findWhere(o,{id:"pessimistic"}),v=i.findWhere(o,{id:"prediction"}),x=i.first(u.data),S=i.last(u.data),k=i.last(v.data),D=c.calculateYProjection(x,S,k);i.findWhere(o,{id:"pessimisticFillerBottom"}).data[0][1]=D}if(i.findWhere(o,{id:"scope"})){var w=i.last(i.findWhere(o,{id:"scope"}).data);w[0]=l.xaxis.max}l.xaxis.tickFormatter=function(e,t){var i=h.transformDateIfInNonWorkingDays(e,p),o="%b %d";return"hour"===t.tickSize[1]?o+=" %h:%M":"minute"===t.tickSize[1]?o=" %h:%M":"second"===t.tickSize[1]&&(o=" %h:%M:%S"),r.plot.formatDate(i,o)}}var y=a.draw(t.id,e,o,l),C=!1;g.model.getYAxes().length>1&&(C="Percent"),f.renderLabelsForNowAndRelease(y),f.setLegendOpacity(),m.setAndAlignAxisLabels(AJS.format("Time ({0})",f.userTimeZoneLabel),g.model.getStatistic().name,C),y.hooks.drawSeries.push(f.gatherPoints),y.hooks.draw.push(m.deferredRenderPoints),y.hooks.draw.push(f.renderLabelsForNowAndRelease),y.hooks.draw.push(f.setLegendOpacity),f.bindEvents(e)}},f.getChartOptions=function(){var e=g.model,o=c.getChartOptions(e);return t.nonWorkingDaysShown||(o.xaxis.max=h.deductNonWorkingDays(o.xaxis.max,o.xaxis.min)),f.gadgetMode&&(o.legend.position="nw",o.legend.container=null,o.legend.backgroundOpacity=.5,o.legend.margin=[6,12],r("#ghx-chart-legend").hide()),f.wallboardMode?o.grid={backgroundColor:n.wallboard.backgroundColor,borderWidth:1,borderColor:n.wallboard.borderColor,color:n.wallboard.textColor,noGridBottomOffsetDelta:0,tickColor:n.wallboard.tickColor,markings:f.getMarkingsForGadget}:o.grid.markings=function(r){var a=s.getNonWorkingBlocks(),d=e.getNow(),l=[],g=[];if(!e.getVersion().released&&r.xmax>d){t.nonWorkingDaysShown||(d=h.deductNonWorkingDays(d,o.xaxis.min));var p=r.ymax/198,c=4*p;l=f.drawDashedMarkings(d,c,p,70);var m=e.getVersion().releaseDate;t.nonWorkingDaysShown||(m=h.deductNonWorkingDays(m,o.xaxis.min)),i.isUndefined(m)||(c=2*c,p=2*p,g=f.drawDashedMarkings(m,c,p,20,n.releaseDate))}return t.nonWorkingDaysShown?a.concat(l,g):l.concat(g)},o},f.getMarkingsForGadget=function(){var e=n.nonWorkingDaysWallboard,t=s.getNonWorkingBlocks();return i.map(t,function(t){return t.color=e,t})},f.drawDashedMarkings=function(e,t,r,i,o){for(var a=[],s=0;s<i;s++){var d=s*(t+r);a.push({color:o||n.dashedMarking,lineWidth:1,xaxis:{from:e,to:e},yaxis:{from:d,to:d+t}})}return a},f.setLegendOpacity=function(){var e=r("#ghx-chart-legend").find(".legendColorBox");r(e[0]).find("div").find("div").css("opacity",.3),r(e[1]).find("div").find("div").css("opacity",.8)},f.renderIssuesLink=function(){var e=g.model.getVersion(),t=e.name,i=!0;t.length>60&&(i=!1),r("#ghx-report-controls").empty().append(u.versionreport.renderViewIssuesLink({projectKey:g.model.getProjectKey(),version:e,nameUse:i})).show()},f.renderLabelsForNowAndRelease=function(e){var o=e.getXAxes()[0],a=e.getYAxes()[0];if(g.model.chartData){var n=g.model.getNow();t.nonWorkingDaysShown||(n=h.deductNonWorkingDays(n,g.model.getXAxisStart()));var s=g.model.getVersion(),d=s.releaseDate;t.nonWorkingDaysShown||(d=h.deductNonWorkingDays(d,g.model.getXAxisStart()));var l,p=r("#ghx-axis-x-top");if(p.empty(),n<o.max&&(l=r(u.versionreport.renderXaxisTopLabel({text:"Today",left:e.pointOffset({x:n,y:a.max}).left})),p.append(l)),!i.isUndefined(d)&&!s.released&&d>o.min&&d<o.max){var m=e.pointOffset({x:d,y:a.max}).left,v=r(u.versionreport.renderXaxisTopLabel({text:"Release Date",date:c.renderUTCMillisAsDateWithoutTime(g.model.getVersion().releaseDate),left:m}));p.append(v),i.isUndefined(l)||f.labelsAreOverlapping(l,v)&&v.addClass("ghx-raised")}}},f.labelsAreOverlapping=function(e,t){var r=e.position().left,i=r+e.width(),o=t.position().left,a=o+t.width();return o>r&&o<i||a>r&&a<i||o<r&&a>i},f.toggleChartVisibility=function(e){r("#ghx-chart-mismatch").empty(),e&&g.model.notStarted()?(r("#ghx-version-report-no-issues").hide(),r("#ghx-report-content").hide(),r("#ghx-version-report-not-started").show(),d.hideSpinner()):g.model.hasIssues()?(r("#ghx-version-report-no-issues").hide(),r("#ghx-version-report-not-started").hide(),r("#ghx-report-content").show()):(r("#ghx-report-content").hide(),r("#ghx-version-report-not-started").hide(),r("#ghx-version-report-no-issues").show(),d.hideSpinner())},f.gatherPoints=function(e,r,i){e.mouseEntered&&t.setPointsForChart(e,i)},f.bindEvents=function(e){e.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",m.handleMouseOverStateChange),e.unbind("plothover plotclick"),e.bind("plothover",f.handlePlotHover),e.bind("plotclick",m.handlePlotClick)},f.handlePlotHover=function(e,t,o){if(o){var a=o.series.id,n=o.dataIndex,s=g.model.getDataBySeriesAtIndex(a,n);if(!i.isEmpty(s))return void(f.isDataPointSameAsPrevious(o)||(f.previousPlotHoverPoint={dataIndex:o.dataIndex,seriesIndex:o.seriesIndex},r("#ghx-tooltip").remove(),f.showChartTooltip(o,a,s,o.datapoint[0]),r("#ghx-tooltip").hasClass("ghx-has-warnings")||d.getChartView().addClass("ghx-clickable")))}r("#ghx-tooltip").remove(),f.previousPlotHoverPoint=null,d.getChartView().removeClass("ghx-clickable")},f.isDataPointSameAsPrevious=function(e){return!i.isUndefined(f.previousPlotHoverPoint)&&!i.isNull(f.previousPlotHoverPoint)&&(e.dataIndex==f.previousPlotHoverPoint.dataIndex&&e.seriesIndex==f.previousPlotHoverPoint.seriesIndex)},f.showChartTooltip=function(e,t,r){if(r){var a,n;if(g.model.isReleaseDatePredictionSeriesId(t)){var s="Predicted Completion Date",d=i.findWhere(f.unmodifiedSeries,{id:"prediction"}).data[1][0];"optimistic"===t?(s="Predicted Completion Date"+" ("+"Optimistic"+")",d=i.findWhere(f.unmodifiedSeries,{id:"optimistic"}).data[1][0]):"pessimisticFillerBottom"===t&&(s="Predicted Completion Date"+" ("+"Pessimistic"+")",d=i.findWhere(f.unmodifiedSeries,{id:"pessimisticFillerBottom"}).data[1][0]),n={predictedReleaseDate:c.renderUTCMillisAsDateWithoutTime(d),description:s},a=new p(e,n,o.releaseDate)}else"trendline"===t?(n={description:"Start Date",dateText:c.renderUTCMillisAsDateWithoutTime(e.datapoint[0])},a=new p(e,n,o.startDate)):"unestimatedPercent"===t?(n={unestimated:(r.values.unestimatedIssueCount/r.values.issueCount*100).toFixed(2),dateText:c.renderUTCMillisAsDate(r.time)},n.changes=i.map(r.issues,function(e){return{key:e.key,event:this.getChangeEvent(e)}},g.model),a=new p(e,n,o.uncertainty)):(n=g.model.getTooltipData(t,r),a=new p(e,n));a.render()}},f.renderMeta=function(){if(g.model.hasIssues()&&!g.model.notStarted()){var e=g.model.getVersion(),t=i.findWhere(f.unmodifiedSeries,{id:"prediction"}),r=i.findWhere(f.unmodifiedSeries,{id:"optimistic"}),o=i.findWhere(f.unmodifiedSeries,{id:"pessimisticFillerBottom"}),a=e.released?"Released":"Unreleased",n={prediction:t?c.renderUTCMillisAsDateWithoutTime(t.data[1][0]):null,optimistic:r?c.renderUTCMillisAsDateWithoutTime(r.data[1][0]):null,pessimisticFillerBottom:o?c.renderUTCMillisAsDateWithoutTime(o.data[1][0]):null};f.gadgetMode?(AJS.$("#ghx-gadget-version-meta").empty().append(u.versionreport.renderVersionReportGadgetHeader({version:e,formattedReleaseDate:e.formattedReleaseDate,formattedStartDate:e.formattedStartDate,startTimezone:e.startTimeOffset,releaseTimezone:e.releaseTimeOffset,completionDate:n})).show(),AJS.$("#ghx-chart-header .ghx-version-report-version-status").text(" ("+a+")")):(AJS.$("#ghx-version-meta").empty().append(GH.tpl.versionreport.renderVersionReportHeader({version:e,formattedReleaseDate:e.formattedReleaseDate,formattedStartDate:e.formattedStartDate,startTimezone:e.startTimeOffset,releaseTimezone:e.releaseTimeOffset})).show(),e.released||AJS.$("#ghx-report-content .ghx-version-report-completion-date-estimates").empty().append(GH.tpl.versionreport.renderNonGadgetCompletionDates({completionDate:n})).show())}},f.renderReport=function(){f.toggleChartVisibility(),g.model.hasIssues()&&f.renderIssuesReport()},f.renderIssuesReport=function(){var e=g.model.getReportContent(),t=g.model.hasIssues();r("#ghx-report-content .ghx-version-report").empty().html(u.versionreport.renderVersionReport({content:e,jql:g.model.getJql(),estimationStatistic:g.model.getStatistic(),hasIssues:t})),d.hideSpinner()},f.setGadgetMode=function(e){f.gadgetMode=e},f.setWallboardMode=function(e){f.wallboardMode=e},f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReportModel.js' */
define("jira-agile/rapid/ui/chart/version-report-model",["require"],function(t){"use strict";var e=t("underscore"),i=t("jira-agile/rapid/ui/chart/changes-report-model"),s=t("jira-agile/rapid/ui/chart/chart-colors"),r=t("jira-agile/rapid/ui/chart/chart-controller"),a=t("jira-agile/rapid/ui/chart/release-date-predictor"),n=GH.ChartUtils,o=function(t){this.estimationStatistic=t};return o.prototype=new i,o.prototype.getStatistic=function(){return this.estimationStatistic},o.prototype.getProjectKey=function(){return this.chartData.projectKey},o.prototype.getVersionName=function(){return this.chartData.version.name},o.prototype.getNow=function(){return this.chartData.now},o.prototype.getVersion=function(){return this.data&&this.data.version?this.data.version:this.chartData&&this.chartData.version?this.chartData.version:{}},o.prototype.setRawVersionChartData=function(t){t.version.released&&(t.endTime=t.version.releaseDate,t.completeTime=t.endTime),this.setRawChartData(t)},o.prototype.getXAxisEnd=function(){return e.isUndefined(this.xAxisEndDate)?this.chartData.endTime:this.xAxisEndDate},o.prototype.getYAxes=function(){var t=[];return t.push(this.yAxisData),this.isIssueCountStatistic()||t.push({position:"right",min:0,max:100,tickFormatter:function(t,e){return t.toFixed(0)},tickSize:10}),t},o.prototype.setRawData=function(t){this.data=t,this.processData(),this.generateJql()},o.prototype.generateJql=function(){var t=this.getStatistic();this.jql={};var e=n.createVersionJql(this.getVersion()),i=e+" AND "+n.createStatusJql(this.getNotDoneStatuses());if(this.isIssueCountStatistic())this.jql.incompleteEstimatedIssues=i;else{var s=t.fieldId,r=/^customfield_(\d+)/.exec(s),a=r&&r.length>0;a&&(s="cf["+r[1]+"]"),this.jql.incompleteUnestimatedIssues=i+" AND "+s+" IS EMPTY",a?this.data.contents.incompleteEstimatedIssues.length>0&&(this.jql.incompleteEstimatedIssues=n.createIssueJql(this.data.contents.incompleteEstimatedIssues)):this.jql.incompleteEstimatedIssues=i+" AND "+s+" IS NOT EMPTY"}this.jql.completedIssues=e+" AND "+n.createStatusJql(this.getDoneStatuses()),this.jql.allIssues=e},o.prototype.getDataBySeries=function(t){var s=i.prototype.getDataBySeries.call(this,t);if(s)return s;if(this.isReleaseDatePredictionSeriesId(t)&&(s=e.findWhere(this.series,{id:t}),s&&s.data.length>0)){var r=new Array(s.data.length-1);return r.push(e.last(s.data)),r}return"trendline"===t&&(s=e.findWhere(this.series,{id:t}))?[e.first(s.data)]:"unestimatedPercent"===t&&(s=e.findWhere(this.series,{id:t}),s&&s.data.length>0)?e.map(s.data,function(t,i,s){var r=s[i+1];if(e.isUndefined(r)||t[0]!==r[0])return t}):void 0},o.prototype.getDataBySeriesAtIndex=function(t,s){var r=this.getDataBySeries(t);if(r){if("unestimatedPercent"!==t)return r[s];var a=r[s];if(a){var n=i.prototype.getDataBySeries.call(this,"issueCount"),o=e.findWhere(n,{time:a[0]});if(!e.isUndefined(o))return o;var d=i.prototype.getDataBySeries.call(this,"unestimatedIssueCount"),c=e.findWhere(d,{time:a[0]});return c}}},o.prototype.getVersionSeries=function(t){var i=this.getVersion();if(!this.attemptedTrendlinePrediction&&e.isUndefined(e.findWhere(this.series,{id:"trendline"}))&&(this.series=this.series.concat(this.getTrendlineSeries()),this.attemptedTrendlinePrediction=!0),!this.isIssueCountStatistic()&&e.isUndefined(e.findWhere(this.series,{id:"unestimatedPercent"}))&&(this.series=this.series.concat(this.getUnestimatedSeries()),this.series=e.reject(this.series,function(t){return"issueCount"===t.id||"unestimatedIssueCount"===t.id})),i.released)return this.series;if(e.isUndefined(e.findWhere(this.series,{id:"prediction"}))){this.series=this.series.concat(this.getPredictedSeries());var s=e.findWhere(this.series,{id:"trendline"});e.isUndefined(s)||(s.label="Predicted Completion Date")}return this.series},o.prototype.getPredictedSeries=function(){var t=this.getPredictionData();t.xAxisEndDate&&(this.xAxisEndDate=t.xAxisEndDate);var i=e.last(t.optimistic),r=e.last(t.standard),a=e.last(t.pessimistic);if(e.isUndefined(r))return[];var o={lineWidth:0},d={lineWidth:0,fill:.3},c={lineWidth:3},h={color:s.trend,data:t.standard,id:"prediction",lines:c},l={color:s.trend,data:t.optimistic,id:"optimistic",lines:d,fillBetween:"prediction"},u={color:s.trend,data:[i,r],id:"optimisticFiller",lines:d,fillBetween:"prediction",hoverable:!1},p={color:s.trend,data:t.pessimistic,id:"pessimistic",lines:d,fillBetween:"prediction",hoverable:!1},f={color:s.trend,data:[r,a],id:"pessimisticFillerTop",lines:o,hoverable:!1},m=e.first(t.pessimistic),g=n.calculateYProjection(m,a,r),D={color:s.trend,data:[[r[0],g],a],id:"pessimisticFillerBottom",lines:d,fillBetween:"pessimisticFillerTop"},v={color:s.scope,data:t.scope,id:"scope",lines:{lineWidth:1,fill:.3}};return[v,h,l,u,p,D,f]},o.prototype.getPredictionData=function(){var t=e.last(e.findWhere(this.series,{id:"totalEstimate"}).data),i=e.last(e.findWhere(this.series,{id:"completedEstimate"}).data),s=this.getPredictedCompletedEstimatePerDay();return a.calculateSeries({startDate:this.getNow(),totalScope:t[1],totalCompleted:i[1],estimatePerDay:s})},o.prototype.getPredictedCompletedEstimatePerDay=function(){var t=this.getVersionStartDate(),i=this.chartData.now+n.oneDayInMillis,s=e.findWhere(this.series,{id:"completedEstimate"}).data;return a.getPredictedCompletedEstimatePerDay(s,t,i,this.seriesData.completedEstimate)},o.prototype.getFurthestDateForNonWorkingDaysData=function(){if(e.isUndefined(this.series)||0==this.series.length)return 1/0;var t=e.last(e.findWhere(this.series,{id:"totalEstimate"}).data),i=e.last(e.findWhere(this.series,{id:"completedEstimate"}).data),s=t[1]-i[1];if(0===s)return this.getXAxisEnd();var r=this.getPredictedCompletedEstimatePerDay();return r.pessimistic>0?a.calculatePredictionDate(this.getVersionStartDate(),r.pessimistic/5,s):r.standard>0?a.calculatePredictionDate(this.getVersionStartDate(),r.standard/5,s):a.calculatePredictionDate(this.getVersionStartDate(),r.optimistic/5,s)},o.prototype.getTrendlineSeries=function(){var t;t=this.isIssueCountStatistic()?e.findWhere(this.series,{id:"totalEstimate"}).data:e.findWhere(this.series,{id:"issueCount"}).data;var i=e.first(t),r=e.findWhere(this.series,{id:"completedEstimate"}).data,a=e.last(r),n=this.getVersionStartDate(),o=[n,0],d=a;if(n>i[0]){var c=e.chain(r).filter(function(t){return t[0]<n}).last().value();e.isUndefined(c)&&(c=e.first(r)),o=[n,c[1]]}return 0===d[1]||d[1]<=o[1]?[]:[{id:"trendline",color:s.trend,data:[o,d],lines:{lineWidth:3},label:"Trend"}]},o.prototype.getUnestimatedSeries=function(){function t(t,i){return e.reduce(t,function(t,s){var r={time:s[0]};r[i]=s[1];var a=e.last(t);return e.isUndefined(a)||a.time!==r.time?t.push(r):a[i]=r[i],t},[])}var i=e.findWhere(this.series,{id:"issueCount"}).data,r=e.findWhere(this.series,{id:"unestimatedIssueCount"}).data,a=e.first(i)[1],n=e.first(r)[1],o=t(i,"total"),d=t(r,"unestimated"),c=e.sortBy(e.flatten([o,d],!0),"time"),h=e.reduce(c,function(t,i){var s=e.last(t);return e.isUndefined(s)||s.time!=i.time?t.push(i):e.defaults(s,i),t},[]),l=e.flatten(e.map(h,function(t,i,s){if(i<s.length-1){var r=s[i+1];return[t,e.defaults({time:r.time},t)]}return[t]}),!0);l.unshift({time:l[0].time,total:a,unestimated:n}),e.each(l,function(t,i,s){if(!(i<1)){var r=s[i-1];e.isUndefined(t.total)&&(t.total=r.total),e.isUndefined(t.unestimated)&&(t.unestimated=r.unestimated)}});var u=e.map(l,function(t){return[t.time,0===t.total?0:t.unestimated/t.total*100]});return{id:"unestimatedPercent",label:"Percent Unestimated Issues",color:s.unestimatedPercent,data:u,yaxis:2,lines:{lineWidth:1}}},o.prototype.getChartOptions=function(){var t=n.getChartOptions(this);return t.grid.markings=this.getMarkings(),t},o.prototype.getMarkings=function(){var t=this;return function(i){var a=r.getNonWorkingBlocks(),n=t.getNow();if(i.xmax>n&&(!t.getVersion().released||t.getVersion().releaseDate<=i.xmax)){var o=i.ymax/198,d=4*o;t.drawDashedMarkings(a,n,d,o,70);var c=t.getVersion().releaseDate;e.isUndefined(c)||(d=2*d,o=2*o,t.drawDashedMarkings(a,c,d,o,20,s.releaseDate))}return a}},o.prototype.drawDashedMarkings=function(t,e,i,r,a,n){for(var o=0;o<a;o++){var d=o*(i+r);t.push({color:n||s.dashedMarking,lineWidth:1,xaxis:{from:e,to:e},yaxis:{from:d,to:d+i}})}},o.prototype.isReleaseDatePredictionSeriesId=function(t){switch(t){case"prediction":case"optimistic":case"pessimisticFillerBottom":return!0}return!1},o.prototype.getStartTime=function(){return this.chartData.startTime?this.chartData.startTime:this.getNow()},o.prototype.getVersionStartDate=function(){return this.getVersion().startDate?this.getVersion().startDate:this.getStartTime()},o.prototype.notStarted=function(){return this.getVersionStartDate()>this.getNow()},o.prototype.getXAxisStart=function(){var t=.02,e=this.chartData.startTime;return this.getVersion().startDate&&(e=this.getVersion().startDate),e-(this.chartData.endTime-e)*t},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReport.js' */
define("jira-agile/rapid/ui/chart/version-report",["require"],function(e){"use strict";var t=e("jira-agile/rapid/ui/chart/version-report-model"),r={};return r.createModel=function(e){r.model=new t(e),r.model.setParams({statistic:e,issueAddedText:"Issue added to version",issueRemovedText:"Issue removed from version",startText:"Version start date"})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/VersionReport.soy' */
// This file was automatically generated from VersionReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.versionreport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.versionreport == 'undefined') { GH.tpl.versionreport = {}; }


GH.tpl.versionreport.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-controls-group"><div id="ghx-report-controls"></div><div id="ghx-version-meta" class="ghx-version-meta"></div><div id="ghx-version-report-no-issues" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('This version does not contain any issues.') + '</p></div></div><div id="ghx-version-report-not-started" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('The chart cannot be generated because the version has a start date in the future.') + '</p></div></div></div><div id="ghx-report-content"><div id="ghx-chart-mismatch"></div><div class="ghx-version-summary-wrap"><div id="ghx-chart-legend" class="ghx-release-chart-legend"></div><div class="ghx-release-summary"></div></div><div id="ghx-chart-wrap" class="ghx-version-chart-wrap"><div id="ghx-axis-x-top"></div><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div><div id="ghx-axis-y-right" class="ghx-axis ghx-axis-y-right"><span class="ghx-inner"></span></div></div><div class="ghx-version-report-completion-date-estimates ghx-margin-top"></div><div class="ghx-version-report ghx-margin-top"></div></div><div id="ghx-gadget-version-meta" class="ghx-version-meta"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderReportBody.soyTemplateName = 'GH.tpl.versionreport.renderReportBody';
}


GH.tpl.versionreport.renderViewIssuesLink = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls"><a href="' + GH.tpl.versionreport.issueNavLink({jql: 'fixVersion=' + soy.$$escapeUri(opt_data.version.jqlEncodedName) + ' AND project=' + soy.$$escapeHtml(opt_data.projectKey)}) + '">' + ((opt_data.nameUse == true) ? soy.$$escapeHtml(AJS.format('View {0} in Issue Navigator',opt_data.version.name)) : soy.$$escapeHtml('View in Issue Navigator')) + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderViewIssuesLink.soyTemplateName = 'GH.tpl.versionreport.renderViewIssuesLink';
}


GH.tpl.versionreport.renderVersionReportHeader = function(opt_data, opt_ignored) {
  return '<p>' + ((opt_data.version.startDate) ? soy.$$escapeHtml('Start Date:') + ' ' + soy.$$escapeHtml(opt_data.formattedStartDate) + '<br />' : '') + ((opt_data.version.released && opt_data.version.releaseDate) ? soy.$$escapeHtml(AJS.format('Released on {0}',opt_data.formattedReleaseDate)) : (opt_data.version.released) ? soy.$$escapeHtml('Released') : (opt_data.version.releaseDate) ? soy.$$escapeHtml(AJS.format('Scheduled Release Date: {0}',opt_data.formattedReleaseDate)) : soy.$$escapeHtml('Unreleased')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReportHeader.soyTemplateName = 'GH.tpl.versionreport.renderVersionReportHeader';
}


GH.tpl.versionreport.renderVersionReportGadgetHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-version-report-completion-date-body">' + ((opt_data.version.startDate) ? '<p><span class="ghx-date-title">' + soy.$$escapeHtml('Start date') + ':</span><span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.formattedStartDate) + '</span></p>' : '') + ((opt_data.version.released && opt_data.version.releaseDate) ? '<p><span class="ghx-date-title">' + soy.$$escapeHtml('Released') + ':</span><span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.formattedReleaseDate) + '</span></p>' : '') + ((! opt_data.version.released) ? GH.tpl.versionreport.renderCompletionDates(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReportGadgetHeader.soyTemplateName = 'GH.tpl.versionreport.renderVersionReportGadgetHeader';
}


GH.tpl.versionreport.renderNonGadgetCompletionDates = function(opt_data, opt_ignored) {
  return '<div class="ghx-version-report-completion-date-body">' + GH.tpl.versionreport.renderCompletionDates(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderNonGadgetCompletionDates.soyTemplateName = 'GH.tpl.versionreport.renderNonGadgetCompletionDates';
}


GH.tpl.versionreport.renderCompletionDates = function(opt_data, opt_ignored) {
  return '' + ((opt_data.completionDate.prediction) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml('Predicted'), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.prediction), showTitle: 'true'}) + '<br>' : '') + ((opt_data.completionDate.optimistic) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml('Optimistic'), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.optimistic), showTitle: 'false'}) + '<br>' : '') + ((opt_data.completionDate.pessimisticFillerBottom) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml('Pessimistic'), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.pessimisticFillerBottom), showTitle: 'false'}) + '<br>' : '');
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderCompletionDates.soyTemplateName = 'GH.tpl.versionreport.renderCompletionDates';
}


GH.tpl.versionreport.renderCompletionDate = function(opt_data, opt_ignored) {
  return ((opt_data.showTitle) ? '<span class="ghx-date-title">' + soy.$$escapeHtml(opt_data.dateTitle) + ' ' + soy.$$escapeHtml('completion date') + ':</span>' : '') + '<span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.dateValue) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderCompletionDate.soyTemplateName = 'GH.tpl.versionreport.renderCompletionDate';
}


GH.tpl.versionreport.renderVersionReport = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml('Status Report') + '</h3><div class="ghx-version-report-table ghx-report-issue-list">' + ((opt_data.content.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Completed Issues'), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.completedIssues}), issues: opt_data.content.completedIssues, showEpicColumn: true, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.completedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteEstimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Incomplete Issues'), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.incompleteEstimatedIssues}), issues: opt_data.content.incompleteEstimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.incompletedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteUnestimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Incomplete Unestimated Issues'), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.incompleteUnestimatedIssues}), issues: opt_data.content.incompleteUnestimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: 0}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReport.soyTemplateName = 'GH.tpl.versionreport.renderVersionReport';
}


GH.tpl.versionreport.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.versionreport.issueNavLink.soyTemplateName = 'GH.tpl.versionreport.issueNavLink';
}


GH.tpl.versionreport.renderXaxisTopLabel = function(opt_data, opt_ignored) {
  return '<div style="left:' + soy.$$escapeHtml(opt_data.left) + 'px" class="ghx-axis-x-top-label">' + soy.$$escapeHtml(opt_data.text) + ((opt_data.date) ? ': ' + soy.$$escapeHtml(opt_data.date) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderXaxisTopLabel.soyTemplateName = 'GH.tpl.versionreport.renderXaxisTopLabel';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ReleaseDatePredictor.js' */
define("jira-agile/rapid/ui/chart/release-date-predictor",["require"],function(e){"use strict";var t=e("underscore"),a=e("jira-agile/rapid/ui/chart/burndown-rate"),r=e("jira-agile/rapid/ui/chart/change-event"),i=GH.ChartUtils,n={};return n.calculateSeries=function(e){var a={standard:[],optimistic:[],pessimistic:[],scope:[]};if(e.totalCompleted/e.totalScope<.1||e.totalCompleted===e.totalScope)return a;var r=n.createDataSeries(t.defaults({estimatePerDay:e.estimatePerDay.standard},e)),i=1/0;if(r.length>0&&(i=t.last(r)[0]),i==1/0)return a;var s=n.createDataSeries(t.defaults({estimatePerDay:e.estimatePerDay.optimistic},e)),o=n.createDataSeries(t.defaults({estimatePerDay:e.estimatePerDay.pessimistic},e)),l=n.calculateXAxisEndDate(o,i),c=[];return c.push([e.startDate,e.totalScope]),c.push([l,e.totalScope]),{standard:r,optimistic:s,pessimistic:o,scope:c,xAxisEndDate:l}},n.calculateXAxisEndDate=function(e,a){var r=1/0;return e.length>0&&(r=t.last(e)[0]+i.oneDayInMillis),r===1/0&&(r=a+i.oneDayInMillis),r},n.createDataSeries=function(e){var r=[],n=e.estimatePerDay;if(r.push([e.startDate,e.totalCompleted]),n<=0)return r.push([1/0,e.totalCompleted]),r;var s=a.getWorkingDays();if(0===s.length)return[];for(var o=e.totalScope-e.totalCompleted,l=e.totalCompleted,c=0;c<s.length;c++){var u=s[c];if(u.end>e.startDate){var d=u.start;u.start>e.startDate?r.push([u.start,l]):d=e.startDate;var p=(u.end-d)/i.oneDayInMillis,m=o/n;if(m<=p){var D=new Date(d+m*i.oneDayInMillis);r.push([D.valueOf(),e.totalScope]);break}var f=p*n;l+=f,o-=f,r.push([u.end,l])}}return[t.first(r),t.last(r)]},n.getCompletedEstimatePerDay=function(e,n,s,o){function l(e){var t=r.getChangeEvent(e);t!=r.burndown&&t!=r.completeScopeAdded||m.push(e.key)}function c(e,a){if(t.contains(m,a.key)){var i=r.getChangeEvent(a);if(i===r.completeScopeAdded||i===r.scopeAdded)return e-a.completedEstimate}return e}for(var u=[],d=0,p=0,m=[],D=0,f=n;f<=s;f+=i.oneDayInMillis){a.isDateInNonWorkingBlock(f)||D++;for(var v,h=0,g=p;g<e.length;g++){var y=e[g][0];if(!(y<=f)){d=e[g][1],p=g;break}if(y>n){var C=e[g][1];v=o[g]?o[g].issues:[],v&&(C=t.reduce(v,c,C),t.each(v,l)),C>d&&(h+=C-d),d=e[g][1]}else v=o[g]?o[g].issues:[],v&&t.each(v,l),d=e[g][1]}u.push({time:f,estimate:h})}return{completedData:u,workingDays:D}},n.calculateAverageEstimateCompletedPerDay=function(e){var a=e.workingDays;if(0===a)return 0;var r=t.reduce(e.completedData,function(e,t){return e+t.estimate},0);return r/a},n.calculateDeviation=function(e){return.1*e},n.getPredictedCompletedEstimatePerDay=function(e,t,a,r){var i=n.getCompletedEstimatePerDay(e,t,a,r),s=n.calculateAverageEstimateCompletedPerDay(i),o=n.calculateDeviation(s),l=s+o,c=Math.max(s-o,0);return{standard:s,optimistic:l,pessimistic:c}},n.calculatePredictionDate=function(e,t,a){if(t<=0)return 1/0;var r=a/t;return new Date(e+i.oneDayInMillis*r).valueOf()},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/ChangeEvent.js' */
define("jira-agile/rapid/ui/chart/change-event",["require"],function(e){"use strict";var n=e("underscore"),t={scopeAdded:"scopeAdded",scopeRemoved:"scopeRemoved",reopened:"reopened",burndown:"burndown",completeScopeAdded:"completeScopeAdded",estimateChanged:"estimateChanged",estimateAdded:"estimateAdded",estimateRemoved:"estimateRemoved",releaseDate:"releaseDate",uncertainty:"uncertainty",unknown:"unknown",startDate:"startDate"};return t.getScopeOrColumnChangeEvent=function(e,n){return e.scopeChange?e.inScope?t.scopeAdded:t.scopeRemoved:!!e.columnChange&&("notDone"===e.column?e.oldColumn?t.reopened:t.scopeAdded:"done"===e.column?e.oldColumn?t.burndown:t.completeScopeAdded:"notDone"===e.oldColumn?t.scopeRemoved:t.scopeRemoved)},t.getChangeEvent=function(e){var d="Burnup",o=t.getScopeOrColumnChangeEvent(e,d);if(o)return o;if(e.estimateChange){var a=e.values.oldEstimateFieldValue,r=e.values.estimateFieldValue,s=!n.isUndefined(a),i=!n.isUndefined(r);return s&&i?t.estimateChanged:s?t.estimateRemoved:t.estimateAdded}return t.unknown},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/MultipleCharts.js' */
GH.Reports=GH.Reports||{},GH.Reports.multipleCharts=function(){return c3.component("multipleCharts").extend({charts:c3.prop([]),chartSelector:c3.prop(".ghx-svg-chart")}).extend(function(){this.selection().selectAll(this.chartSelector()).data(this.charts()).each(function(t){t&&t(d3.select(this))})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ChartConfigService.js' */
!function(){function t(t,a){var o=GH.RapidBoard.State.getBoardSetting(t,"chart.config."+a,{});return o}function a(){}a.prototype={mapOldConfigToNewConfig:function(a,o){var n=t(a,o),i=GH.RapidBoard.State.getCycleTimeCalculationType();n.includeNonWorkingDays="total"===i,GH.RapidBoard.State.setBoardSetting("chart.config."+o,n)},mapNewConfigToOldConfig:function(a,o){var n=t(a,o),i=n.includeNonWorkingDays?"total":"workingDays";GH.RapidBoard.State.setCycleTimeCalculationType(i)}},GH.ChartNWDConfigService=a,GH.chartNWDConfigService=new a}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ChartTimeFrameModel.js' */
!function(t,e,i){function r(e,i){if(!t.isDate(e))throw i+" must be a Date object";return e}function a(t){return h.floor(h.offset(t,1))}function s(t){return new Date(a(t)-1)}function m(){}var n="%Y-%m-%d",o=90,u="custom",h=e.time.day;m.prototype={timeFrame:null,fromDate:null,toDate:null,setSimpleDates:function(t,e){return this.timeFrame=u,this.fromDate=h.floor(r(t,"fromDate")),this.toDate=s(r(e,"toDate")),this},setExactDates:function(t,e){return this.timeFrame=u,this.fromDate=r(t),this.toDate=r(e),this},setDays:function(t){return this.timeFrame=t,this},setAllTime:function(){return this.timeFrame=0,this},resetToDefault:function(){return this.timeFrame=o,this},isDefault:function(){return this.timeFrame===o},setBounds:function(t,e){return this.earliestDate=r(t,"earliestDate"),this.currentDate=r(e,"currentDate"),this},getTimeFrame:function(){return t.findWhere(i,{days:this.timeFrame})?this.timeFrame:u},getTimeFrameDates:function(){if(!this.earliestDate||!this.currentDate)throw"Cannot calculate time frame dates without earliestDate and currentDate";var t,e;return this.timeFrame>0?(t=h.offset(a(this.currentDate),-1*this.timeFrame),e=s(this.currentDate)):this.timeFrame<=0?(t=h.floor(this.earliestDate),e=s(this.currentDate)):this.timeFrame===u&&(t=this.fromDate,e=this.toDate),{fromDate:t,toDate:e}},getTimeFrameDuration:function(){var t=this.getTimeFrameDates();return t.toDate-t.fromDate+1},fromNormalized:function(t){if(null==t.days)this.resetToDefault();else if(t.days>0)this.setDays(Number(t.days));else if(t.days===u)try{this.setSimpleDates(Date.parseDate(t.from,n),Date.parseDate(t.to,n))}catch(e){this.resetToDefault()}else this.setAllTime();return this},toNormalized:function(){var e={};return t.isNumber(this.timeFrame)&&this.timeFrame!==o?e.days=this.timeFrame:this.timeFrame===u&&(e.days=this.timeFrame,e.from=this.fromDate.print(n),e.to=this.toDate.print(n)),e},clone:function(){return(new m).fromNormalized(this.toNormalized())}},GH.Reports.ChartTimeFrameModel=m}(_,d3,GH.ChartTimeFrames.timeFrames);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ChartTimeFrameService.js' */
GH.ChartTimeFrameService={},GH.ChartTimeFrameService.rapidViewId=null,GH.ChartTimeFrameService.normalizedDateFormat="%Y-%m-%d",GH.ChartTimeFrameService.setRapidViewId=function(e){GH.ChartTimeFrameService.rapidViewId=e},GH.ChartTimeFrameService.getTimeFramesConfigForChart=function(e){var r=GH.RapidBoard.State.getBoardSetting(GH.ChartTimeFrameService.rapidViewId,"chart.config."+e,{});return r},GH.ChartTimeFrameService.saveTimeFrameConfigForChart=function(e,r){var t={view:"reporting"};GH.RapidBoard.State.setBoardSetting("chart.config."+e,_.defaults(r,t))},GH.ChartTimeFrameService._getFormattedDate=function(e){return e=_.isNumber(e)?new Date(e):e,_.isDate(e)?e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate():e},GH.ChartTimeFrameService._convertDateFormattedStringToDate=function(e){return _.isString(e)&&e.length>0?new Date(Date.parse(e)):null},GH.ChartTimeFrameService.mapOldConfigToNewConfig=function(e){var r=GH.ChartTimeFrameService.rapidViewId,t=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.days",GH.ChartTimeFrames.days),a=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.from",""),i=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.to","");a=GH.ChartTimeFrameService._getFormattedDate(a),i=GH.ChartTimeFrameService._getFormattedDate(i);var m=GH.ChartTimeFrameService.getTimeFramesConfigForChart(e);m.days=t>=0?t:"custom",m.from=a,m.to=i,GH.ChartTimeFrameService.saveTimeFrameConfigForChart(e,m)},GH.ChartTimeFrameService.mapNewConfigToOldConfig=function(e){var r=GH.ChartTimeFrameService.getTimeFramesConfigForChart(e),t=r.days,a=null,i=null;if(t<0||"custom"===t){t=-1;try{a=GH.ChartTimeFrameService._convertDateFormattedStringToDate(r.from).getTime(),i=GH.ChartTimeFrameService._convertDateFormattedStringToDate(r.to).getTime()}catch(m){t=0}}else _.isUndefined(t)&&(t=0);GH.ChartTimeFrames.setNewChartLimits(t,a,i,!1)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintTransformer.js' */
!function(e,t,n,r,i,s,a,o,d,u){"use strict";function m(t){function n(e,t){var n={time:+r,key:i.key};n[e]=t,a.push(n)}var r,i,s=t.changes,a=[];for(r in s)for(var o=0;o<s[r].length;o++)i=s[r][o],i.column&&n("done",!i.column.notDone),i.statC&&n("estimate",i.statC.newValue),"added"in i&&n("added",i.added);return e.sortBy(a,"time")}function c(t){function n(t){i=e.reject(i,function(e){return e.key===t&&(e.wasDone&&(e.wasDone=!1),"done"in e)}),s[t].done=!1}function r(n){var r=e.where(t,{key:n,done:!0});return e.last(r).time}var i=[],s={};return e.each(t,function(t){if(!("estimate"in t)){var a=t.key;s[a]||(s[a]={});var o=s[a];"added"in t?o.added!==t.added&&(o.done&&(t=e.extend({wasDone:!0},t),t.added&&(t.time=r(t.key),i=e.reject(i,function(e){return e.key===a&&"done"in e}),i.push({key:t.key,done:!0,time:t.time}))),i.push(t),o.added=t.added):"done"in t&&(t.done?o.done||o.added===!1||i.push(t):n(a),o.done=t.done)}}),i=e.sortBy(i,"time"),{changes:i,issueStates:s}}function p(t){var n={};return e.each(t,function(e){"added"in e&&(e.added?n[e.key]=!0:delete n[e.key])}),e.keys(n)}function l(t,n){var r={},i=e.groupBy(n);return e.each(t,function(t){"estimate"in t&&e.has(i,t.key)&&(e.isNumber(t.estimate)?r[t.key]=t.estimate:delete r[t.key])}),r}function f(t,n){var r=e.find(t,function(e){return!(null!=n&&e.time<n)&&"done"in e});return r?r.time:-1}function k(t,n){if(!t.length||t[0].startTime>n)return"original";var r=e.find(t,function(e,r){return r===t.length-1||e.startTime<=n&&t[r+1].startTime>n});return r.id}function v(t,n){var r={},i=f(t);if(i===-1)r.original=t;else{var s=k(n,i);e.each(t,function(e){var t=k(n,e.time);e.time<i&&t!==s&&(t="original"),r[t]||(r[t]=[]),r[t].push(e)})}return g(r)}function g(t){var n={};return e.each(t,function(t,r){function i(t,n){return e.find(e.clone(t).reverse(),function(e){return e.added===n})}function s(t){return e.reject(t,function(e){return"added"in e})}n[r]=n[r]||[],e.each(t,function(e){"added"in e||n[r].push(e)});var a={};e.each(t,function(e){"added"in e&&(a[e.key]=a[e.key]||[],a[e.key].push(e))}),e.each(a,function(t,o){var d=e.reduce(t,function(e,t){return e+(t.added?1:-1)},0);if(d>0){var u=i(t,!0);u&&(a[o]=s(),a[o].push(u))}else if(d<0){var m=i(t,!1);m&&(a[o]=s(),a[o].push(m))}else a[o]=s(),e.last(t).added===!1&&(n[r]=e.reject(n[r],function(e){return e.key===o}))}),e.each(e.flatten(a),function(e){n[r].push(e)})}),n}function w(t,n){var r={added:0,removed:0,net:0};return e.each(n||[],function(e){if("added"in e){var n=t[e.key]||0;e.added?r.added+=n:e.wasDone||(r.removed+=n)}}),r.net=r.added-r.removed,r}function h(t,n){return e.reduce(n,function(e,n){if(n.done){var r=t[n.key]||0;return e+r}return e},0)}function y(e){var t;switch(e){case"duration":t={formatFull:function(e){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e,{durationUnit:GH.TimeFormatDurationUnits.SECONDS,dropMinutesIfLongerThanADay:!0})},formatCompact:function(e){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e,{durationUnit:GH.TimeFormatDurationUnits.SECONDS,timeFormat:GH.TimeFormatDisplays.MOST_SIGNIFICANT})}};break;default:t={formatFull:GH.NumberFormat.format,formatCompact:GH.NumberFormat.format}}return t}function I(t){function n(e){return Math.round(r.mean(e,function(e){return e.workCompleted}))}var i=e.last(t),s=i&&i.isActive,a=s?t.slice(0,-1):t,o={baseline:i?i.baseline:0};if(a.length<F)return e.extend(o,{forecastError:AJS.format("A forecast cannot be shown until at least {0,choice,1#1 sprint has|1\u003c{0,number} sprints have} been completed.",F)});if(0===i.workRemaining)return e.extend(o,{sprintsRemaining:0});var d=n(e.last(a,F)),u=i.workRemaining,m=!1;if(s)if(i.workCompleted>d)d=n(e.last(t,F));else{var c=i.workAtStart+i.workAdded-i.workRemoved;u=c-Math.min(c,d),m=!0}return 0===d?e.extend(o,{forecastError:AJS.format("A forecast cannot be shown until at least one of {0,number} most recent {0,choice,1#sprint|1\u003csprints} contains completed work.",F)}):e.extend(o,{sprintsRemaining:Math.ceil(u/d),velocity:d,workRemaining:u,isLastSprintForecast:m})}function S(t,n){if(t.forecastError||0===t.sprintsRemaining)return e.map(e.range(n),function(e){return{sprintId:"forecast"+e,sprintName:"",baseline:t.baseline,workAtStart:0,workAdded:0,workRemoved:0,workCompleted:0,workRemaining:0,isForecast:!0,isActive:!1}});var r=t.workRemaining;return e.map(e.range(n),function(e){var n=r,i=Math.min(r,t.velocity);return r-=i,{sprintId:"forecast"+e,sprintName:"",baseline:t.baseline,workAtStart:n,workAdded:0,workRemoved:0,workCompleted:i,workRemaining:r,isForecast:!0,isActive:!1}})}function T(t,n){function r(e){return function(t){return e[t].added}}var i={sprints:[],series:{baseline:[],workAdded:[],workRemaining:[],workCompleted:[]},estimationStatistic:t.estimationStatistic,labels:t.labels||{},rapidViewId:t.rapidViewId};t.epic&&(i.epic=t.epic),t.version&&(i.version=t.version);var s=m(t),a=c(s),o=a.changes,u=l(s,t.estimatableIssueKeys),g=e.sortBy(t.sprints,"startTime"),y=v(o,g),T=w(u,y.original).net,R=h(u,y.original),b={sprintId:"original",sprintName:i.labels.originalEstimate,baseline:0,workAtStart:T,workAdded:0,workRemoved:0,workCompleted:R,workRemaining:T-R,isForecast:!1,isActive:!1,issues:e.pluck(e.where(y.original,{done:!0}),"key")},C=b;if(i.sprints=e.map(g,function(t){var r=y[t.id],i=w(u,r),s=h(u,r),a={sprintId:t.id,sprintName:t.name,baseline:n?0:C.baseline-i.net,workAtStart:C.workRemaining,workAdded:i.added,workRemoved:i.removed,workCompleted:s,workRemaining:C.workRemaining-s+i.net,startTime:t.startTime,endTime:t.endTime,isForecast:!1,isActive:"ACTIVE"===t.state,issues:e.pluck(e.where(r,{done:!0}),"key")};return C=a,a}),i.sprints.length){var F=f(o,i.sprints[0].startTime),A=k(g,F),G=d.indexOf(i.sprints,function(e){return e.sprintId===A}),H=d.indexOf(i.sprints,function(e){return e.workAdded||e.workRemoved||e.workCompleted||e.workRemaining},!0);i.sprints=G>=0&&H>=0?i.sprints.slice(G,H+1):[]}var N=e.last(i.sprints),D=i.sprints.length?N.workRemaining:b.workRemaining,E=b.workCompleted+e.reduce(i.sprints,function(e,t){return e+t.workCompleted},0),U=i.forecast=I(i.sprints);i.sprints.unshift(b),i.getForecast=e.partial(S,U);var x=p(o),B=e.intersection(x,e.keys(u));if(0===D){var j=e.pluck(e.where(o,{done:!0}),"key"),V=e.filter(j,r(a.issueStates)),M=e.filter(t.estimatableIssueKeys,r(a.issueStates)),O=e.difference(M,V),J=O.length;i.forecast.remainingEstimatableIssueCount=J}return i.snapshot={workRemaining:D,workCompleted:E,estimatedIssueCount:B.length,estimatableIssueCount:e.intersection(x,t.estimatableIssueKeys).length,issueCount:x.length},i}function R(n,r){var i=n.contents,s=e.object(e.pluck(i.completedIssues,"key"),i.completedIssues);return n.estimationStatistic=r.estimationStatistic,i.incompleteIssues=e.union(i.incompleteEstimatedIssues,i.incompleteUnestimatedIssues),i.incompleteIssuesSum={text:n.estimationStatistic.formatter.formatFull(i.incompletedIssuesEstimateSum.value),value:i.incompletedIssuesEstimateSum.value},i.incompleteIssuesUrl=u.getUrlForIssues(i.incompleteIssues),n.sprints=e.filter(r.sprints,function(e){return"original"!==e.sprintId||e.issues.length}).reverse(),n.sprints=e.map(n.sprints,function(r){var i={sprintId:r.sprintId};return i.issues=e.map(r.issues,function(e){return s[e]}),i.issues=e.compact(i.issues),i.issueNavUrl=u.getUrlForIssues(i.issues),"original"===r.sprintId?i.sprintName="Before initial sprint":(i.sprintName=r.sprintName,i.sprintReportUrl=u.prependBaseUrl("/secure/RapidBoard.jspa?rapidView="+n.rapidViewId+"&view=reporting&chart=sprintRetrospective&sprint="+r.sprintId)),r.startTime&&(i.formattedStartTime=t(r.startTime).format(C)),r.endTime&&(i.formattedEndTime=t(r.endTime).format(C)),i.formatedWorkCompleted=n.estimationStatistic.formatter.formatFull(r.workCompleted),i}),n}function b(t){var n=m(t),r={};return e.each(n,function(e){var t=r[e.key]=r[e.key]||[];t.push(e)}),r}var C="LL",F=3,A={getScopeBySprintData:T,getIssuesBySprintData:R,getEstimationStatisticFormatter:y,_getIssueHistory:b};GH.Reports=GH.Reports||{},GH.Reports.ScopeBurndownBySprintTransformer=A}(_,moment,AJS.$,d3,GH.Ajax,GH.RapidViewConfig,GH.NumberFormat,GH.TimeFormat,GH.Util,GH.UrlFormat);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ReportIssueTable.soy' */
// This file was automatically generated from ReportIssueTable.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.issueTable.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.issueTable == 'undefined') { GH.tpl.reports.issueTable = {}; }


GH.tpl.reports.issueTable.renderIssueTable = function(opt_data, opt_ignored) {
  var output = '<div class="aui-group ghx-issue-table-title"><div class="aui-item">';
  if (opt_data.sprint || opt_data.listName) {
    output += '<h4>';
    if (opt_data.sprint) {
      var sprintName__soy9 = '' + ((opt_data.sprint.isActive) ? soy.$$escapeHtml(AJS.format('{0} (active)',opt_data.sprint.sprintName)) : soy.$$escapeHtml(opt_data.sprint.sprintName));
      output += (opt_data.sprint.sprintReportUrl) ? '<a href="' + soy.$$escapeHtml(opt_data.sprint.sprintReportUrl) + '">' + soy.$$escapeHtml(sprintName__soy9) + '</a>' : soy.$$escapeHtml(sprintName__soy9);
    } else {
      output += soy.$$escapeHtml(opt_data.listName);
    }
    output += '</h4>' + ((opt_data.titleTooltip) ? '<span class="aui-icon aui-icon-small aui-iconfont-help issue-table-title-tooltip" title="' + soy.$$escapeHtml(opt_data.titleTooltip) + '"></span>' : '');
  }
  output += ((opt_data.sprint && opt_data.sprint.formattedStartTime && opt_data.sprint.formattedEndTime) ? ' <span>' + soy.$$escapeHtml(opt_data.sprint.formattedStartTime) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndTime) + '</span>' : '') + '</div><div class="aui-item">' + ((opt_data.issues.length > 0) ? '<a class="ghx-controls" href="' + soy.$$escapeHtml(opt_data.issueNavLink) + '">' + soy.$$escapeHtml('View in Issue Navigator') + '</a>' : '') + '</div></div>' + ((opt_data.issues.length > 0) ? '<table class="aui">' + GH.tpl.reports.issueTable.renderIssueTableHeader({estimateStatisticName: opt_data.estimationStatistic.name, estimateStatisticValue: opt_data.estimationValue, currentEstimateStatisticValue: opt_data.currentEstimationValue, showEpicColumn: opt_data.showEpicColumn}) + GH.tpl.reports.issueTable.renderIssueTableRows(opt_data) + '</table>' : (opt_data.emptyMessage) ? '<p>' + soy.$$escapeHtml(opt_data.emptyMessage) + '</p>' : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTable.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTable';
}


GH.tpl.reports.issueTable.renderIssueTableHeader = function(opt_data, opt_ignored) {
  var output = '<tr><th>' + soy.$$escapeHtml('Key') + '</th><th>' + soy.$$escapeHtml('Summary') + '</th><th>' + soy.$$escapeHtml('Issue Type') + '</th><th>' + soy.$$escapeHtml('Priority') + '</th><th>' + soy.$$escapeHtml('Status') + '</th>' + ((opt_data.showEpicColumn) ? '<th>' + soy.$$escapeHtml('Epic') + '</th>' : '');
  var headerTooltip__soy82 = opt_data.currentEstimateStatisticValue && opt_data.estimateStatisticValue != opt_data.currentEstimateStatisticValue ? AJS.format('Estimate modified from {0} to {1}',opt_data.estimateStatisticValue,opt_data.currentEstimateStatisticValue) : '';
  output += '<th class="ghx-right ghx-minimal ghx-nowrap" title="' + soy.$$escapeHtml(headerTooltip__soy82) + '">' + soy.$$escapeHtml(opt_data.estimateStatisticName) + ' <span>(';
  if (opt_data.currentEstimateStatisticValue && opt_data.estimateStatisticValue != opt_data.currentEstimateStatisticValue) {
    output += GH.tpl.reports.issueTable.renderChangedEstimateIndicator({initialEstimate: opt_data.estimateStatisticValue, currentEstimate: opt_data.currentEstimateStatisticValue});
  } else {
    var className__soy94 = '' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.estimateStatisticValue});
    output += '<span class="' + soy.$$escapeHtml(className__soy94) + '">' + soy.$$escapeHtml(opt_data.estimateStatisticValue) + '</span>';
  }
  output += ')</span></th></tr>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTableHeader.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTableHeader';
}


GH.tpl.reports.issueTable.renderIssueTableRows = function(opt_data, opt_ignored) {
  var output = '';
  var issueList104 = opt_data.issues;
  var issueListLen104 = issueList104.length;
  for (var issueIndex104 = 0; issueIndex104 < issueListLen104; issueIndex104++) {
    var issueData104 = issueList104[issueIndex104];
    var issueAdded__soy105 = opt_data.addedIssues && opt_data.addedIssues[issueData104.key];
    output += '<tr' + ((issueAdded__soy105) ? ' class="ghx-added" title="' + soy.$$escapeHtml('Issue added to sprint after start time') + '"' : '') + '><td class="ghx-nowrap"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData104.key) + '">' + soy.$$escapeHtml(issueData104.key) + '</a>' + ((issueAdded__soy105) ? ' *' : '') + '</td><td>' + soy.$$escapeHtml(issueData104.summary) + '</td><td class="ghx-nowrap">' + ((issueData104.typeName) ? '<img src="' + soy.$$escapeHtml(issueData104.typeUrl) + '" />' + soy.$$escapeHtml(issueData104.typeName) : soy.$$escapeHtml('None')) + '</td><td class="ghx-nowrap">' + ((issueData104.priorityName) ? '<img src="' + soy.$$escapeHtml(issueData104.priorityUrl) + '" />' + soy.$$escapeHtml(issueData104.priorityName) : soy.$$escapeHtml('None')) + '</td><td class="ghx-nowrap">' + GH.tpl.status.renderFull({status: issueData104.status}) + '</td>' + ((opt_data.showEpicColumn) ? '<td class="ghx-nowrap">' + ((issueData104.epic) ? aui.labels.label({extraClasses: [issueData104.epicColor], text: '' + GH.tpl.epic.getEpicNameString({epicLabel: issueData104.epicLabel, epicKey: issueData104.epic}), url: GH.Ajax.CONTEXT_PATH + '/browse/' + issueData104.epic, extraAttributes: {title: issueData104.epic}}) : '') + '</td>' : '');
    var tooltip__soy160 = issueData104.estimateStatistic && issueData104.currentEstimateStatistic && issueData104.estimateStatistic.statFieldValue.text != issueData104.currentEstimateStatistic.statFieldValue.text ? AJS.format('Estimate modified from {0} to {1}',issueData104.estimateStatistic.statFieldValue.text,issueData104.currentEstimateStatistic.statFieldValue.text) : '';
    output += '<td class="ghx-right ghx-minimal ghx-nowrap" title="' + soy.$$escapeHtml(tooltip__soy160) + '">' + ((issueData104.estimateStatistic && issueData104.estimateStatistic.statFieldValue && issueData104.estimateStatistic.statFieldValue.text) ? (issueData104.currentEstimateStatistic && issueData104.estimateStatistic.statFieldValue.text != issueData104.currentEstimateStatistic.statFieldValue.text) ? GH.tpl.reports.issueTable.renderChangedEstimateIndicator({initialEstimate: issueData104.estimateStatistic.statFieldValue.text, currentEstimate: issueData104.currentEstimateStatistic.statFieldValue.text}) : soy.$$escapeHtml(issueData104.estimateStatistic.statFieldValue.text) : '-') + '</td></tr>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTableRows.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTableRows';
}


GH.tpl.reports.issueTable.renderChangedEstimateIndicator = function(opt_data, opt_ignored) {
  return '<span class="ghx-previous-value  ' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.initialEstimate}) + '">' + soy.$$escapeHtml(opt_data.initialEstimate) + ((opt_data.initialEstimate == '-') ? ' ' : '') + ' &#8594; </span><span class="ghx-current-value ' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.currentEstimate}) + '">' + soy.$$escapeHtml(opt_data.currentEstimate) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderChangedEstimateIndicator.soyTemplateName = 'GH.tpl.reports.issueTable.renderChangedEstimateIndicator';
}


GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.value == '-' ? 'empty-mode' : '');
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar.soyTemplateName = 'GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprint.soy' */
// This file was automatically generated from ScopeBurndownBySprint.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.scopeBurndownBySprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.scopeBurndownBySprint == 'undefined') { GH.tpl.reports.scopeBurndownBySprint = {}; }


GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent = function(opt_data, opt_ignored) {
  var output = '';
  var statistic__soy3 = opt_data.estimationStatistic.name;
  output += '<div class="ghx-inline-dialog-container">' + ((opt_data.url != '') ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<strong>' + soy.$$escapeHtml(opt_data.sprint.sprintName) + '</strong>' + ((opt_data.url != '') ? '</a>' : '') + ((opt_data.sprint.formattedStartDate) ? '<p class="ghx-sprint-dialog-dates">' + soy.$$escapeHtml(opt_data.sprint.formattedStartDate) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndDate) + '</p>' : '') + '<table class="ghx-stat-table">' + GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: 'at start of sprint', estimateValue: opt_data.sprint.formattedWorkAtStart, estimationStatistic: statistic__soy3}) + ((opt_data.sprint.workAdded) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: opt_data.labels.workAdded, estimateValue: opt_data.sprint.formattedWorkAdded, estimationStatistic: statistic__soy3}) : '') + ((opt_data.sprint.workRemoved) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: opt_data.labels.workRemoved, estimateValue: opt_data.sprint.formattedWorkRemoved, estimationStatistic: statistic__soy3}) : '') + ((opt_data.sprint.workCompleted) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('completed') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkCompleted, estimationStatistic: statistic__soy3}) : '') + GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('remaining') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkRemaining, estimationStatistic: statistic__soy3}) + '</table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent';
}


GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate = function(opt_data, opt_ignored) {
  return '<tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.estimateValue) + '</span></td><th class="ghx-stat-table-label">' + soy.$$escapeHtml(opt_data.estimateLabel) + '</th></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate';
}


GH.tpl.reports.scopeBurndownBySprint.renderIssueList = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.sprints.length > 0) ? '<h3>' + soy.$$escapeHtml('Completed Issues') + '</h3>' : '');
  var sprintList77 = opt_data.sprints;
  var sprintListLen77 = sprintList77.length;
  for (var sprintIndex77 = 0; sprintIndex77 < sprintListLen77; sprintIndex77++) {
    var sprintData77 = sprintList77[sprintIndex77];
    output += GH.tpl.reports.scopeBurndownBySprint.renderIssueTable({listName: sprintData77.sprintName, sprint: sprintData77, issues: sprintData77.issues, issueNavLink: sprintData77.issueNavUrl, estimationStatistic: opt_data.estimationStatistic, estimationValue: sprintData77.formatedWorkCompleted, showEpicColumn: opt_data.showEpicColumn, emptyMessage: opt_data.emptySprintMessage});
  }
  output += (opt_data.contents.incompleteIssues.length > 0) ? '<h3>' + soy.$$escapeHtml('Incomplete Issues') + '</h3>' + GH.tpl.reports.scopeBurndownBySprint.renderIssueTable({issues: opt_data.contents.incompleteIssues, issueNavLink: opt_data.contents.incompleteIssuesUrl, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.contents.incompleteIssuesSum.text, showEpicColumn: opt_data.showEpicColumn}) : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderIssueList.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderIssueList';
}


GH.tpl.reports.scopeBurndownBySprint.renderIssueTable = function(opt_data, opt_ignored) {
  return '<div class="ghx-scope-burndown-table-section">' + GH.tpl.reports.issueTable.renderIssueTable(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderIssueTable.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderIssueTable';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints = function(opt_data, opt_ignored) {
  return '<img class="ghx-infographic-trophy" src="' + soy.$$escapeHtml(opt_data.imageURL) + '"><p class="ghx-work-done-message">' + soy.$$escapeHtml(AJS.format('{0,choice,0#All issues are done!|1\x3c All estimated issues are done!}',opt_data.unestimatedIssuesCount)) + ((opt_data.unestimatedIssuesCount) ? ' ' + soy.$$escapeHtml(AJS.format('{0,choice,1#There is 1 unestimated issue.|1\x3cThere are {0} unestimated issues.}',opt_data.unestimatedIssuesCount)) : '') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent = function(opt_data, opt_ignored) {
  return '<h2><span class="aui-icon aui-icon-small aui-iconfont-success"></span> ' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 sprints|1#1 sprint|1\x3c{0,number} sprints} remaining',opt_data.sprintsRemaining)) + '</h2><p>' + soy.$$escapeHtml(opt_data.description) + '</p><table class="ghx-stat-table"><tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.velocity) + '</span></td><td class="ghx-stat-table-label">' + soy.$$escapeHtml('Velocity per sprint') + '</td></tr><tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.workRemaining) + '</span></td><td class="ghx-stat-table-label">' + soy.$$escapeHtml('remaining') + '</td></tr></table><p>' + GH.tpl.reports.scopeBurndownBySprint.renderHelpLink(opt_data) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2><p>' + soy.$$escapeHtml(opt_data.description) + '</p><p>' + GH.tpl.reports.scopeBurndownBySprint.renderHelpLink(opt_data) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage';
}


GH.tpl.reports.scopeBurndownBySprint.renderHelpLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.helpUrl) + '" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderHelpLink.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderHelpLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartDialog.js' */
!function(e,t,i,r){function n(e,t){var i=t.formatter.formatFull;return e.startTime&&e.endTime&&(e.formattedStartDate=moment(e.startTime).format(c),e.formattedEndDate=moment(e.endTime).format(c)),e.formattedWorkAtStart=i(e.workAtStart),e.formattedWorkAdded=i(e.workAdded),e.formattedWorkRemoved=i(e.workRemoved),e.formattedWorkCompleted=i(e.workCompleted),e.formattedWorkRemaining=i(e.workRemaining),e}function a(e,t,i){var r="";return e.isForecast&&!e.isActive||"original"===e.sprintId||(r=f.buildBareRestUrl("secure/RapidBoard.jspa?rapidView="+e.rapidViewId+"&view=reporting&chart=sprintRetrospective&sprint="+e.sprintId)),GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent({sprint:n(e,t),estimationStatistic:t,url:r,labels:i})}function o(t,i,n,o){if(d()&&i.sprintId===m)s.hide();else{var c=e.select(t);c.classed("active",!0),s=r.create(l,t,function(e,t,r){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.html(a(i,n,o)),r()},{addActiveClass:!1,container:p,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,offsetX:8,hideCallback:function(){c.classed("active",!1)}}),m=i.sprintId,s.show()}return s}function d(){return!!s&&s.is(":visible")}var s,l="scope-by-sprint-dlg",p="#ghx-report-scrollarea > .aui-page-panel",c="LL",m=null,f=require("jira-agile/rapid/ajax");i.preventCloseOnClick(l),GH.Reports.ScopeBurndownBySprintChartDialog={show:o,hide:function(){s&&(s.hide(),m=null)},isVisible:d}}(d3,GH.Reports,GH.InlineDialog,GH.SideInlineDialog);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChart.js' */
!function(t,e,i,n,r,s){"use strict";function a(t){return t.workRemaining-o(t)}function o(t){var e=Math.max(0,t.workAdded-t.workRemoved);return Math.min(t.workRemaining,e)}function l(t){return t.isForecast&&!t.isActive}function c(){var r=function(){return i.floatingBarChart().baselineAccessor(function(t){return t.baseline}).xAccessor(function(t){return t.sprintId}).yAccessor(function(t){return t.baseline+t.workCompleted+a(t)+o(t)}).maxBarWidth(h).extend({emptyBarHeight:i.prop(u),labelAccessor:function(){return function(t){return t.isActive?AJS.format("{0} (active)",t.sprintName):t.sprintName}},isCollapsedBar:function(){return function(t){return!!t.collapsed}},isEmptyBar:function(){var t=this.baselineAccessor(),e=this.yAccessor(),i=this.isCollapsedBar();return function(n){return!i(n)&&e(n)===t(n)}},barHeight:function(){var t=this.baselineAccessor(),e=this.yAccessor(),i=this.yScale(),n=this.isEmptyBar(),r=this.emptyBarHeight();return function(s){return n(s)?r:i(t(s))-i(e(s))}},data:function(){return C.sprints()}}).update(function(t){var e=this.x(),i=this.y(),n=this.isEmptyBar(),r=this.emptyBarHeight();t.selection.attr("transform",function(t,s){var a=i(t,s);return n(t)&&(a-=r),"translate("+e(t,s)+","+a+")"})})},c=function(){var t=i.stack().classPrefix("ghx").showLabels(!0).extend({barWidth:i.prop(),labelAccessor:function(){return function(t){return t[2]||""}},labelFormatter:i.prop()});return t.data.get(function(t){if(!t)return[];var e=o(t),i=a(t),n=this.labelFormatter(),r=[];return r.push([e+i,t.workCompleted,t.workCompleted?"-"+n(t.workCompleted):""]),r.push([e,i,n(i)]),r.push([0,e,e?"+"+n(e):""]),r}),t},f=function(){return i.drawable().extend(i.withDimensions()).enter(function(t){var e=t.selection;e.append("rect").classed("ghx-series-0",!0),e.append("text").classed("ghx-series-label-0 bar-label",!0),e.append("polyline").classed("ghx-bar-underlined",!0)}).update(function(t){var e=this.height(),i=this.width(),n=t.selection;n.selectAll("rect").attr("height",e).attr("width",i),n.selectAll("text").attr("x",i/2).attr("y",e/2).attr("dy","0.45em").text(0),n.selectAll("polyline").attr("points","0,"+e+" "+i+","+e)})},g=function(){var t=e.scale.linear().domain([d,h]).range([3,5]);return i.circlePlot().extend({yRange:function(){var t=this.height();return[0,t]},radiusAccessor:function(){var e=this.width();return function(){return t(e)}}}).elementClass("ghx-ellipsis").data([[0,0],[1,0],[2,0]]).xDomain([-1,3]).yDomain([-1,1])},x=function(){return i.drawable().extend(i.withDimensions()).elementClass("ghx-collapsed-sprint").extend({ellipsisHeight:function(){return.5*this.width()}}).enter(function(t){t.selection.append("text").attr({"text-anchor":"middle",y:-this.ellipsisHeight(),dy:"-.4em"})}).update(function(t){var n=this.width();t.selection.select("text").each(function(t){var r=e.select(this).text(AJS.format("{0,choice,0#0 sprints|1#1 sprint|1\u003c{0,number} sprints} not shown",t));i.utils.wrapText(r,n,!0)}),g().height(-this.ellipsisHeight()).width(n)(t.selection)})},w=function(){return r().elementTag("g").showLabels(!0).update(function(t){var i=this.barWidth(),n=this.barHeight(),r=this.isEmptyBar(),s=this.isCollapsedBar(),a=C.data().estimationStatistic.formatter.formatCompact,o=this.showLabels();t.selection.each(function(t){var l=n(t),h=s(t),d=r(t),u=e.select(this).classed("ghx-prediction",t.isForecast);c().elementClass("ghx-stack").height(l).barWidth(i).showLabels(o).labelFormatter(a).data(h||d?null:t)(u),f().elementClass("ghx-zero-value-sprint").height(l).width(i).data(d?[0]:[])(u),x().width(i).data(h?[t.collapsed]:[])(u)})})},b=i.labelledAxis().height(60).text("Sprints").orient("bottom").axisConstructor(function(){return e.svg.axis().outerTickSize(0)}),v=i.labelledAxis().width(50).orient("left").extend({text:function(){return C.data().estimationStatistic.name}}).axisConstructor(function(){var t=C.data().estimationStatistic.formatter.formatCompact;return e.svg.axis().outerTickSize(0).tickFormat(function(e){return t(Math.abs(e))}).tickValues([0])}),y=i.layerable().addLayer("grid",i.gridLines().orient("left").extend({width:function(){return C.restrictedWidth()}})).addLayer("divider",i.singular().extend(i.withDimensions()).elementTag("line").elementClass("chart-divider").update(function(t){t.selection.attr({x1:C.restrictedWidth(),x2:C.restrictedWidth(),y1:-m,y2:this.height()+m})})).addLayer("border",i.drawable().extend(i.withDimensions()).data([{from:[0,0],to:[1,0]},{from:[1,0],to:[1,1]}]).elementTag("line").update(function(t){var i=e.scale.linear().domain([0,1]).range([0,this.width()]),n=e.scale.linear().domain([0,1]).range([0,this.height()]);t.selection.each(function(t){return e.select(this).attr({x1:i(t.from[0]),y1:n(t.from[1]),x2:i(t.to[0]),y2:n(t.to[1])})})})).addLayer("sprints",w().elementClass("ghx-bar-sprint").dataFilter(function(t){return n.reject(t,l)})).addLayer("forecastSprints",w().elementClass("ghx-bar-sprint").showLabels(!1).dataFilter(function(t){return n.filter(t,function(t){return l(t)&&t.workAtStart>0})})).addLayer("dialogTargets",r().enter(function(t){s.hide(),t.selection.on("click.dialog",function(t){var e=C.data();t.rapidViewId=e.rapidViewId,s.show(this,t,e.estimationStatistic,e.labels)})}).elementClass("ghx-clickable-bar-sprint").dataFilter(function(t){return n.reject(t,l)})),C=i.component().extend(function(){var t=this.data().sprints,e=this.positions().center.width,i=e-p,n=r(),s=n.padding(),a=n.outerPadding(),o=d/(1-s),l=h/(1-s),c=Math.max(Math.min(i/t.length,l),o),u=Math.max(Math.ceil(p/c),Math.ceil((e-l*t.length)/c)),m=Math.floor((e-o*(2*a-s))/o),f=t.length+u-m+1;if(f>1){var g=t[1+f];t=t.slice(),t.splice(1,f,{sprintId:"sprints collapsed",sprintName:"",baseline:Math.min(0,g.baseline),workAtStart:0,workAdded:0,workRemoved:0,workCompleted:0,workRemaining:0,isForecast:!1,isActive:!1,collapsed:f})}var x=this.data(),w=x.getForecast(u),b=t.concat(w);c=e/(b.length+a),x.forecast.forecastError?this.restrictedWidth(c*(t.length+2*a-s)):this.restrictedWidth(c*(t.length+a-s/2)),this.sprints(b)}).extend(i.borderLayout()).extend(i.utils.defaultViewBox).center(y).north(i.withDimensions().height(25)).south(b).west(v).east(i.withDimensions().width(1)).extend({sprints:i.prop([]),restrictedWidth:i.prop(null),xDomain:function(){return n.pluck(this.sprints(),"sprintId")},yDomain:function(){var t=this.sprints(),i=n.min(n.pluck(t,"baseline")),r=e.max(t,function(t){return t.baseline+t.workCompleted+o(t)+a(t)});return[i,r]}}),k=i.singular().extend(i.withDimensions()).elementTag("div").elementClass("ghx-infographic-overlay").update(function(e){var i=C.data();i.forecast.forecastError?e.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage({title:"No forecast available yet",description:i.forecast.forecastError,helpUrl:i.labels.helpUrl})):0===i.forecast.sprintsRemaining?e.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints({unestimatedIssuesCount:i.forecast.remainingEstimatableIssueCount,imageURL:AJS.contextPath()+"/download/resources/"+t.getPluginKey()+"/images/trophy.svg"})):e.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent({sprintsRemaining:i.forecast.sprintsRemaining,velocity:i.estimationStatistic.formatter.formatFull(i.forecast.velocity),workRemaining:i.estimationStatistic.formatter.formatFull(i.forecast.workRemaining),description:i.labels.forecastDescription(i.forecast.sprintsRemaining),estimationStatistic:i.estimationStatistic.name,helpUrl:i.labels.helpUrl}));var n=C.height(),r=C.width(),s=C.positions(),a=s.west.width+C.restrictedWidth(),o=r-a,l=s.center.height,c=e.selection.node().offsetHeight,h=e.selection.node().offsetWidth,d=a+o/2,u=s.north.height+l/2;e.selection.style({left:d/r*100+"%",top:u/n*100+"%","margin-left":-h/2+"px","margin-top":-c/2+"px"})}),A=i.component().extend(i.withData()).extend(function(){var t=this.selection(),e=i.singular().elementTag("svg").elementClass("ghx-svg-chart");e(t),C.parent(this)(e.elements()),k.parent(this)(t)});return A}var h=80,d=40,u=25,p=320,m=20;GH.Reports.ScopeBurndownBySprintChart=c}(GH.Util,d3,c3,_,GH.NumberFormat,GH.Reports.ScopeBurndownBySprintChartDialog);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartHowTo.js' */
!function(t,n,e,r){function c(){var c=function(){return n.floatingBarChart().elementClass("ghx-bar-sprint").elementTag("g").yAccessor(function(t){return t[0]+e.reduce(t[1],function(t,n){return t+n},0)}).yDomain([-1,9]).update(function(e){var r=this.barWidth(),c=this.barHeight();e.selection.each(function(e){n.stack().classPrefix("ghx").height(c(e)).extend({barWidth:function(){return r},data:function(){var t=e[1];return[[t[0]+t[1],t[2]],[t[0],t[1]],[0,t[0]]]}})(t.select(this))})})},a=c().data([[0,[0,8,0]],[0,[0,6,2]],[0,[0,4,2]],[0,[0,2,2]],[0,[0,0,2]]]),i=c().data([[2,[0,6,0]],[0,[2,4.5,1.5]],[0,[0,5,1.5]],[2,[0,1.5,1.5]],[2,[0,0,1.5]]]),o=c().data([[0,[0,6,1.5]],[0,[0,4.5,1.5]],[0,[0,3,1.5]],[0,[0,1.5,1.5]],[0,[0,0,1.5]]]).update(function(t){t.selection.classed("ghx-prediction",function(t,n){return n>=2})});return n.component("scopeBurndownBySprintChartHowTo").extend(r.multipleCharts()).extend(function(){this.selection().selectAll(this.chartSelector()).classed("ghx-scope-burndown-chart-svg",!0)}).charts([a,i,o])}r.ScopeBurndownBySprintChartHowTo=c}(d3,c3,_,GH.Reports);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartLegend.js' */
!function(t,e){"use strict";function n(){function n(t,e,n){return t.append("g").classed(e,!0).append("rect").attr("width","100%").attr("height","100%").classed(n,!0)}function r(t,e,n,r){var s=t.append("g").classed(e,!0);return s.append("rect").classed(n,!0).attr({y:0,width:"100%",height:"50%"}),s.append("rect").classed(r,!0).attr({y:"50%",width:"100%",height:"50%"}),s}var s=function(t){n(t,"ghx-bar-sprint","ghx-series-0")},i=function(t){n(t,"ghx-bar-sprint","ghx-series-1")},a=function(t){n(t,"ghx-bar-sprint","ghx-series-2")},c=function(t){r(t,"ghx-prediction","ghx-series-0","ghx-series-1")};return e.component("scopeBurndownBySprintChartLegend").extend(t()).charts([s,c,i,a])}GH.Reports.ScopeBurndownBySprintChartLegend=n}(GH.Reports.multipleCharts,c3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChart.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart",["require"],function(t){"use strict";function e(){}var n,r,a=t("underscore"),i=t("jira-agile/d3"),o=t("jira-agile/rapid/global-events");return o.on("pre-initialization",function(){n=c3,r=GH.FlotChartUtils}),e.prototype={hide:function(t){GH.Reports.BurnupChartDialog.hide(),t.html("")},show:function(t,e){e.html("");var r=GH.Reports.BurnupChartScrubber();e=e.append("svg").attr("height",parseInt(e.style("height"))).attr("width",parseInt(e.style("width")));var o=[t.start,t.end],c=[i.min(t.scope.concat(t.work),function(t){return t.value}),i.max([{value:8}].concat(t.scope.concat(t.work)),function(t){return t.value})],s=n.component().extend(function(){r.enableScrubber(),GH.Reports.BurnupChartDialog.hide()}).extend(n.borderLayout()).extend(n.utils.defaultViewBox).extend({xDomain:function(){var t=o;return a.each(t,function(t){n.checkIsNumber(t)}),t},yDomain:function(){var t=c;return a.each(t,function(t){n.checkIsNumber(t)}),t},clusters:n.prop()}).xScaleConstructor(i.time.scale).yScaleConstructor(i.scale.linear),u=n.labelledAxis().axisConstructor(function(){return i.svg.axis().tickFormat(function(e){return t.formatShortDate(e)})}).extend(function(){this.selection().selectAll("g.tick").filter(function(){return this.getAttribute("transform").indexOf("translate(-")!==-1}).remove()}).height(50).text("Time").orient("bottom"),l=this.calculateYTicks(c[1],t.statisticField),d=n.labelledAxis().axisConstructor(function(){return i.svg.axis().tickValues(l.tickValues).tickFormat(t.formatStatistic).ticks(8)}).width(60).text(t.statisticField.name).orient("left"),h=n.fillWithRect().elementClass("ghx-dragging"),p=this.buildGuideline(t),f=n.component().extend(n.interactive().domContext(AJS.$("#ghx-chart-group")).region(h)).extend(n.layerable());t.sprintCompleted||f.addLayer("today-line",n.linePlot().extend({data:function(){return[[t.now,c[0]],[t.now,c[1]]]}}).elementClass("today-line")).addLayer("today-line-label",n.label().extend({width:function(){return 2*s.xScale()(t.now)},height:function(){return s.yScale()(c[1])},orient:function(){return"bottom"},text:function(){return "Today"}})),f.extend(r).addLayer("grid",n.gridLines().orient("left")).addLayer("non-work-days",n.areaPlot().extend({data:function(){return s.data().nonWorkPeriods.map(function(t){return[[t.start,c[0]],[t.start,c[1]],[t.end,c[1]],[t.end,c[0]]]}).reduce(function(t,e){return t.concat(e)},[])}}).elementClass("non-working-days")).addLayer("guideline",n.linePlot().extend({data:function(){return p}}).elementClass("guide-line")).addLayer("scope-projection",n.linePlot().extend({data:function(){var e=s.data().scope[t.scope.length-1];return[[e.timestamp,e.value],[t.end,e.value]]}}).elementClass("scope-projection-line")).addLayer("scope",this.steppedLinePlot().extend({data:function(){return s.data().scope.map(function(t){return[t.timestamp,t.value]})}}).elementClass("scope-line")).addLayer("work",this.steppedLinePlot().extend({data:function(){return s.data().work.map(function(t){return[t.timestamp,t.value]})}}).elementClass("work-line")).addLayer("filler",h).addLayer("scope-marker",n.circlePlot().xAccessor(function(t){return t.timestamp}).yAccessor(function(t){return t.value}).extend({data:function(){return s.data().scope.slice(1,-1)}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.BurnupChartDialog.show(this,t,e),r.hideScrubber()})}).elementClass("scope-line-marker")).addLayer("work-marker",n.circlePlot().xAccessor(function(t){return t.timestamp}).yAccessor(function(t){return t.value}).extend({data:function(){return s.data().work.slice(1,-1)}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.BurnupChartDialog.show(this,t,e),r.hideScrubber()})}).elementClass("work-line-marker")),s=s.center(f).north(n.withDimensions().height(20)).south(u).east(n.withDimensions().width(40)).west(d),s.data(t),s(e)},buildGuideline:function(t){var e=[[t.start,0]],n=t.scope[t.scope.length-1].value,r=t.end-t.start;t.nonWorkPeriods.forEach(function(t){r-=t.end-t.start});var a=0;return t.nonWorkPeriods.forEach(function(i){var o=i.start-t.start;o-=a;var c=Math.min(o/r,1);e.push([i.start,c*n]),e.push([i.end,c*n]),a+=i.end-i.start}),e.push([t.end,n]),e},steppedLinePlot:function(){return n.component("steppedlinePlot").extend(n.linePlot()).update(function(t){var e=this.lineConstructor()().x(this.x()).y(this.y());e.interpolate("step-after"),t.selection.attr("d",e(this.data())).attr("stroke","black").attr("fill","none")})},calculateYTicks:function(t,e){var n,a=r.calculateYAxis(t,e),i=a.tickSize||a.minTickSize;if(i){n=[];for(var o=0;o<=t;o+=i)n.push(o)}return{tickValues:n}}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChartLegend.js' */
!function(n,e){"use strict";function t(){function t(n,e,t){return n.append("g").classed(e,!0).append("line").attr("stroke-linecap","round").attr("x1","0").attr("y1","20").attr("x2","20").attr("y2","20").attr("transform","translate(-10,3), rotate(-45)").classed(t,!0)}var r=function(n){t(n,"ghx-burnup-line-legend","completed-work")},u=function(n){t(n,"ghx-burnup-line-legend","guideline")},o=function(n){t(n,"ghx-burnup-line-legend","scope")},a=function(n){t(n,"ghx-burnup-line-legend","scope-projection")};return e.component("sprintBurnupChartLegend").extend(n()).charts([o,a,r,u])}GH.Reports.BurnupChartLegend=t}(GH.Reports.multipleCharts,c3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupTransformer.js' */
!function(e,t,n,r,a,s,i,u,o,d,p){"use strict";function c(e){var n=m(e),r=S(e,n);return e.chartData={now:e.now,start:e.startTime,startKeys:r.startKeys,end:n,sprintCompleted:!!e.completeTime,endKeys:r.endKeys,nonWorkPeriods:x(e.workRateData,e.startTime,n),scope:r.scope,work:r.done,statisticField:e.statisticField,rapidViewId:e.rapidViewId,estimatedIssueEvents:r.scope.filter(function(e){return e.value>0}).length,issueToSummary:e.issueToSummary},e.chartData.formatDate=function(e){return t.utc(e).format("lll")},e.chartData.formatShortDate=function(n){return t.duration(t.utc(e.chartData.end).diff(e.chartData.start)).years()>0?t.utc(n).format("MMM YYYY"):t.utc(n).format("MMM D")},e.chartData.formatStatistic=function(t){return p.renderStatisticText(t,!1,e.chartData.statisticField.renderer)},e.chartData.formatEventType=function(e){switch(e){case"estimate update":return "Estimate updated";case"issue done":return "Issue completed";case"issue not done":return "Issue re-opened";case"issue removed":return "Removed from sprint";case"issue added":return "Added to sprint";case"start event":return "Sprint started";case"end event":return "Sprint finished";default:return e}},e}function m(e){return e.completeTime?e.completeTime:e.now>e.endTime?e.now:e.endTime}function f(e,t){var n=[],r=[];return e.forEach(function(e){var a=t[e.key];a||(a={key:e.key,prevEstimate:0,estimate:0,inSprint:!1,done:!1},t[e.key]=a);var s=!1,i=!1;switch(e.type){case"estimate update":a.estimate!==e.newEstimate&&(a.prevEstimate=a.estimate,a.estimate=e.newEstimate,s=a.inSprint&&!a.isExcluded,i=a.inSprint&&!a.isExcluded&&a.done);break;case"issue done":a.done||(a.done=!0,i=a.inSprint&&!a.isExcluded);break;case"issue not done":a.done&&(a.done=!1,a.isExcluded?(e.isInclusion=!0,a.isExcluded=!1,s=a.inSprint):i=a.inSprint);break;case"issue removed":a.inSprint&&(a.inSprint=!1,s=!a.isExcluded,i=!a.isExcluded&&a.done);break;case"issue added":a.inSprint||(a.inSprint=!0,s=!0,i=a.done)}s&&n.push(v("scope",e.timestamp,y(t,!1),e,a)),i&&r.push(v("done",e.timestamp,y(t,!0),e,a))}),{scope:n,done:r}}function h(e,t,n){return v(e,t,n,{type:"start event"},{})}function l(e,t,n){return v(e,t,n,{type:"end event"},{})}function v(e,t,n,r,a){r=r||{},a=a||{};var s=0,i=0;return"issue removed"===r.type?(s=0,i=a.estimate):"issue added"===r.type?(s=a.estimate,i=0):"issue not done"===r.type?r.isInclusion?(s=a.estimate,i=0):(s=0,i=a.estimate):(s=a.estimate,i=a.prevEstimate),{timestamp:t,value:n,change:{type:r.type,line:e,key:a.key,fromValue:i,toValue:s}}}function y(e,t){var n=0;for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];a.inSprint&&!a.isExcluded&&(t&&a.done||!t)&&(n+=a.estimate)}return n}function S(e,t){var n=g(e.changes).sort(function(e,t){return e.timestamp>t.timestamp?1:e.timestamp===t.timestamp?0:-1}),r=parseInt(e.startTime),a=e.now>t?t:e.now,s={};f(n.filter(function(e){return e.timestamp<=r}),s);for(var i in s)if(s.hasOwnProperty(i)){var u=s[i];u.done&&(u.isExcluded=!0)}var o=k(s),d=[h("scope",r,y(s,!1))],p=[h("done",r,0,"start event")],c=f(n.filter(function(e){return e.timestamp>r&&e.timestamp<=a}),s),m=k(s);return d=d.concat(c.scope),p=p.concat(c.done),d.push(l("scope",a,d[d.length-1].value)),p.push(l("done",a,p[p.length-1].value)),{scope:d,done:p,startKeys:o,endKeys:m}}function k(e){return Object.keys(e).filter(function(t){var n=e[t];return n.inSprint&&!n.isExcluded}).sort(w)}function w(e,t){if(e===t)return 0;var n=/(\w+)-(\d+)/,r=n.exec(e);if(!r)return-1;var a=n.exec(t);if(!a)return 1;var s=r[1],i=a[1];if(s!==i)return s>i?1:-1;var u=parseInt(r[2],10),o=parseInt(a[2],10);return u===o?0:u>o?1:-1}function g(e){var t=[],n=function(e){e.column&&(e.column.notDone?t.push({type:"issue not done",key:e.key,timestamp:parseInt(r)}):e.column.notDone||t.push({type:"issue done",key:e.key,timestamp:parseInt(r)})),e.statC&&e.statC.newValue&&t.push({type:"estimate update",key:e.key,timestamp:parseInt(r),newEstimate:e.statC.newValue>0?e.statC.newValue:0}),e.added===!1&&t.push({type:"issue removed",key:e.key,timestamp:parseInt(r)}),e.added===!0&&t.push({type:"issue added",key:e.key,timestamp:parseInt(r)})};for(var r in e)e.hasOwnProperty(r)&&e[r].forEach(n);return t}function x(e,t,n){var r=[];return e.rates.forEach(function(e){e.rate<1&&e.start<=n&&e.end>=t&&r.push({start:e.start<t?t:e.start,end:e.end>n?n:e.end})}),r}var E={getBurnupModelFromScopeBurndownModel:c};GH.Reports=GH.Reports||{},GH.Reports.SprintBurnupTransformer=E}(_,moment,AJS.$,d3,GH.Ajax,GH.RapidViewConfig,GH.NumberFormat,GH.TimeFormat,GH.Util,GH.UrlFormat,GH.ChartUtils);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChart.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChart=function(){"use strict";var e=c3.component().extend(function(){this.clusters(e.data().getClusteredIssueSeries(20,this.xScale(),this.yScale())),e.data().issues.length>0?o.enableScrubber():o.disableScrubber(),GH.Reports.ControlChartDialog.hide()}).extend(c3.borderLayout()).extend(c3.utils.defaultViewBox).extend({xDomain:function(){var t=e.data().bounds.x;return _.each(t,function(e){c3.checkIsNumber(e)}),t},yDomain:function(){var t=e.data().bounds.y;return _.each(t,function(e){c3.checkIsNumber(e)}),t},clusters:c3.prop()}).xScaleConstructor(d3.time.scale).yScaleConstructor(function(){return e.data().bounds.y[1]<30?d3.scale.linear():d3.scale.pow().exponent(1/3)}),t=c3.labelledAxis().axisConstructor(function(){return d3.svg.axis().tickFormat(function(t){var n=moment(e.data().bounds.x[1]).diff(e.data().bounds.x[0],"days");return moment(t).format(n<2?"LLL":"LL")})}).extend(function(){this.selection().selectAll("g.tick").filter(function(){return this.getAttribute("transform").indexOf("translate(-")!==-1}).remove()}).height(50).text("Issue Transition Date").orient("bottom"),n=c3.labelledAxis().axisConstructor(function(){return d3.svg.axis().tickFormat(function(e){return GH.NumberFormat.format(e)})}).width(60).text("Elapsed time (days)").orient("left"),r=function(){return c3.circlePlot().xAccessor(function(e){return e.point[0]}).yAccessor(function(e){return e.point[1]})},a=d3.scale.log().domain([2,100]).range([6,15]).clamp(!0),i=c3.fillWithRect().elementClass("ghx-dragging"),o=GH.Reports.ControlChartScrubber(),s=c3.component().extend(c3.interactive().domContext(AJS.$("#ghx-chart-group")).region(i)).extend(c3.layerable()).extend(o).clipped(!0).addLayer("standard-deviation",c3.deviationPlot().extend({data:function(){return e.data().series.standardDeviationArea}}).elementClass("standard-deviation")).addLayer("grid",c3.gridLines().orient("left")).addLayer("mean",c3.linePlot().extend({data:function(){return e.data().series.meanLine}}).elementClass("control-chart-mean")).addLayer("aggregate-mean",c3.linePlot().extend({data:function(){return e.data().series.rollingAverageLine}}).elementClass("control-chart-aggregate-mean")).addLayer("filler",i).addLayer("issues",r().extend({data:function(){return e.clusters().unclustered}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.ControlChartDialog.show(this,e.issue),o.hideScrubber()})}).dataKey(function(e){return e.issue.key}).elementClass("issue")).addLayer("issue-clusters",r().extend({data:function(){return e.clusters().clustered}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.ControlChartDialog.show(this,e.issues),o.hideScrubber()})}).dataKey(function(e){return e.point[0]}).elementClass("cluster").radiusAccessor(function(e){return a(e.size)}));return e.center(s).north(c3.withDimensions().height(10)).south(t).west(n)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartHowTo.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChartHowTo=function(){var e=_.range(8),t=c3.circlePlot().data(_.zip(e,[0,2,1,1.5,2,0,11,1.2])).xDomain([-1,8]).yDomain([-2,14]).elementClass("issue").update(function(e){e.selection.each(function(e){11===e[1]&&d3.select(this).classed("active",!0)})}),a=c3.linePlot().data(_.zip(e,[7,5,5.5,3.5,4,3,3,2])).yDomain([0,10]).elementClass("control-chart-aggregate-mean"),n=[4,6,3,4,5,4,4.5,4],o=[4,4,3.5,2,2,1.5,1,1],l=c3.layerable().xDomain([0,e.length-1]).yDomain([0,10]).addLayer("standard-deviation",c3.deviationPlot().data(_.zip(e,n,o)).elementClass("standard-deviation")).addLayer("rolling-average",c3.linePlot().data(_.zip(e,n)).elementClass("control-chart-aggregate-mean"));return c3.component("controlChartHowTo").extend(GH.Reports.multipleCharts()).extend(function(){this.selection().selectAll(this.chartSelector()).classed("ghx-control-chart-svg",!0)}).charts([t,a,l])};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartLegend.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChartLegend=function(){var t=[[0,0],[1,1]],e=function(t){t.append("circle").attr("cx","50%").attr("cy","50%").attr("r",4).classed("issue",!0)},a=function(t){t.append("circle").attr("cx","50%").attr("cy","50%").attr("r",9).classed("cluster",!0)},r=c3.linePlot().data(t).elementClass("control-chart-mean"),n=c3.linePlot().data(t).elementClass("control-chart-aggregate-mean"),c=function(t){t.append("rect").attr("width","100%").attr("height","100%").classed("standard-deviation",!0)};return c3.component("controlChartLegend").extend(GH.Reports.multipleCharts()).charts([e,a,r,n,c])};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsModel.js' */
!function(){function n(){}var i=!1;n.prototype={includeNonWorkingDays:i,resetToDefaults:function(){return this.includeNonWorkingDays=i,this},fromNormalized:function(n){return"includeNonWorkingDays"in n?this.includeNonWorkingDays=n.includeNonWorkingDays:this.resetToDefaults(),this},toNormalized:function(){var n={};return this.includeNonWorkingDays&&(n.includeNonWorkingDays=this.includeNonWorkingDays),n},isDefault:function(){return this.includeNonWorkingDays===i}},GH.Reports.ControlChartViewingOptionsModel=n}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsModel.js' */
!function(e){function t(){}t.prototype={available:null,selected:null,setAvailable:function(e){return this.available=e,this.fromNormalized(this.selected),this},getDefaults:function(){if(!this.available)return null;var t=e.pluck(this.available.columns,"id"),i=t.length<3?[e.last(t)]:t.slice(1,-1);return{columnIds:i,swimlaneIds:e.pluck(this.available.swimlanes,"id"),quickFilterIds:[]}},resetToDefaults:function(){return this.selected=this.getDefaults(),this},fromNormalized:function(t){t=t?e.pick(t,"columnIds","swimlaneIds","quickFilterIds"):{};var i={columnIds:"columns",swimlaneIds:"swimlanes",quickFilterIds:"quickFilters"},l=this.available;return l&&e.each(t,function(s,n){var a=e.pluck(l[i[n]],"id"),u=e.intersection(t[n],a);u.length?t[n]=u:delete t[n]}),this.selected=e.defaults(t,this.getDefaults()),this},toNormalized:function(){function t(t){e.isEqual(l[t].sort(),i[t].sort())||(s[t]=l[t])}var i=this.getDefaults(),l=this.selected,s={};return i?(t("columnIds"),t("swimlaneIds"),t("quickFilterIds"),s):e.extend(s,l)},isDefault:function(){return e.isEmpty(this.toNormalized())}},GH.Reports.ControlChartRefinementsModel=t}(_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service",["require"],function(e){"use strict";function t(e){var t={url:"/rapid/charts/controlchart.json",data:e};return T.get(t,"rapidChartData")}function a(e,t,a,n){var r=-1,i=0,m=[];return g.each(a,function(a){var o=e.leaveTimes[a];if(o!==t.currentTime){var s=n?e.totalTime[a]:e.workingTime[a];i+=s,m.push({name:t.columns[a].name,duration:s}),o>r&&(r=o)}}),r===-1?null:{key:e.key,summary:e.summary,endTime:r,duration:i,columns:m}}function n(e,t){var n=[];t=t||{},g.each(e.columns,function(e,a){g.contains(t.refinements.selected.columnIds,e.id)&&n.push(a)});var r=g.compact(g.map(e.issues,function(r){return a(r,e,n,t.viewingOptions.includeNonWorkingDays)}));return g.sortBy(r,"endTime")}function r(e,t,a){var n=0,r=0;g.each(t,function(t){a&&(t=a(t)),r=t-e,n+=r*r});var i=n/(t.length>0?t.length:1);return Math.sqrt(i)}function i(e,t,a,n,r){var i=new h(e,t,a,n,r);return{clustered:g.filter(i,function(e){return e.cluster}),unclustered:g.reject(i,function(e){return e.cluster})}}function m(e,t,a){var n=5,i=.2,m={rollingAverageLine:[],standardDeviationArea:[],rollingAverageWindow:0,maxStandardDeviation:0};if(!t.length)return m;var o=Math.max(n,t.length*i),s=Math.floor((o-1)/2);m.rollingAverageWindow=2*s+1;var u=g.indexOf(e,t[0]),l=t[0].endTime>a.timeFrameTimes.from?Math.max(0,u-1):u,d=g.last(t).endTime<a.timeFrameTimes.to?Math.min(e.length,u+t.length+1):u+t.length,c=e.slice(l,d);g.each(c,function(t,a){var n=Math.max(0,l+a-s),i=Math.min(e.length,l+a+s+1),o=e.slice(n,i),u=v.mean(o,D),d=u/p,c=r(u,o,D)/p;m.rollingAverageLine.push([t.endTime,d]),m.standardDeviationArea.push([t.endTime,d,c]),m.maxStandardDeviation=Math.max(m.maxStandardDeviation,d+c)});var h=g.last(m.rollingAverageLine),f=g.last(m.standardDeviationArea);return h[0]<a.timeFrameTimes.to&&(m.rollingAverageLine.push([a.timeFrameTimes.to,h[1]]),m.standardDeviationArea.push([a.timeFrameTimes.to,f[1],f[2]])),m}function o(e,t){return e/=p,[[t.timeFrameTimes.from,e],[t.timeFrameTimes.to,e]]}function s(e,t){return g.filter(e,function(e){return t.timeFrameTimes.from<=e.endTime&&e.endTime<=t.timeFrameTimes.to})}function u(e,t){return{mean:v.mean(e,D),median:v.median(e,D),min:v.min(e,D),max:v.max(e,D),rollingAverageWindow:t}}function l(e){return g.map(e,function(e){return[e.endTime,e.duration/p]})}function d(e,t,a){var n=Math.ceil(v.max(e,D)/p),r=Math.max(n,t),i=1.1*r;return{x:[a.timeFrameTimes.from,a.timeFrameTimes.to],y:[0,i]}}function c(){}var h,g=e("underscore"),v=e("jira-agile/d3"),f=e("jira-agile/rapid/global-events"),T=e("jira-agile/rapid/ajax");f.on("pre-initialization",function(){h=clusterVectors});var p=864e5,D=function(e){return e.duration};return c._calculateRollingSeries=m,c.prototype={get:function(e,t){return t=t||{},this._getData(e,t).andThen(function(e){var a=n(e,t),r=a.length?a[0].endTime:e.currentTime;t.timeFrame=t.timeFrame.clone(),t.timeFrame.setBounds(new Date(r),new Date(e.currentTime));var c=t.timeFrame.getTimeFrameDates();t.timeFrameTimes={from:c.fromDate.getTime(),to:c.toDate.getTime()};var h=s(a,t),g=m(a,h,t),v=u(h,g.rollingAverageWindow),f=l(h);return{issues:h,series:{meanLine:o(v.mean||0,t),rollingAverageLine:g.rollingAverageLine,standardDeviationArea:g.standardDeviationArea},stats:v,bounds:d(h,g.maxStandardDeviation,t),earliestTime:r,currentTime:e.currentTime,getClusteredIssueSeries:function(e,t,a){return i(f,h,e,t,a)}}})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_getData:function(e,a){var n={rapidViewId:e,swimlaneId:a.refinements.selected.swimlaneIds,quickFilterId:a.refinements.selected.quickFilterIds};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&g.isEqual(this._dataRequestParams,n)||(this._dataRequestParams=n,this._dataPromise=t(n)),this._dataPromise}},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller",["require"],function(e){var i,t,r,a,n,o,s,l={},d=e("underscore"),c=e("jira-agile/rapid/global-events"),m=e("jira-agile/rapid/analytics-tracker"),u=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view"),p=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service"),f=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller"),g=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-viewing-options-controller"),h=new p;return c.on("pre-initialization",function(){i=GH.Reports.ChartTimeFrameModel,t=GH.Reports.ControlChartRefinementsModel,r=GH.Reports.ControlChartViewingOptionsModel,a=GH.ChartTimeFrames,n=GH.PromiseKeeper,o=GH.RapidBoard.State,s=GH.RapidViewConfig}),l.id="controlChart",l.SETTINGS_KEY="chart.config.controlChart",l.displayed=!1,l.rapidViewData=null,l.initPhasePromise=null,l.filterOptions=null,l.firstTimeLoadingData=!0,l.analytics=new m("gh.report.controlChart"),l.setRapidView=function(e){l.rapidViewData=e||{}},l.update=function(){l.saveFilterOptions(),o.pushState(),l.loadAndProcess()},l.show=function(){var e=l,i=e.getFilterOptions();e.initPhasePromise||(e.initPhasePromise=s.fetchConfiguration(e.rapidViewData.id).done(function(e){i.refinements.setAvailable(d.pick(e,"columns","swimlanes","quickFilters"))})),e._dataPromiseKeeper=new n,e.initPhasePromise.done(function(){e.displayed=!0;var t=(l.getFilterOptions(),"custom"===s.currentData.data.swimlaneStrategy);t||(i.refinements.selected.swimlaneIds=d.pluck(i.refinements.available.swimlanes,"id")),o.pushState(),u.init(),f.start(i.refinements),g.start(i.viewingOptions),l.loadAndProcess();var r="show."+(l.rapidViewData.sprintSupportEnabled?"scrum":"kanban");l.analytics.trigger(r)})},l.hide=function(){l.displayed=!1,l._dataPromiseKeeper&&l._dataPromiseKeeper.reset(),u.destroy(),h.clearCache()},l.loadAndProcess=function(){u.showSpinner();var e=l.getFilterOptions(),i=h.get(l.rapidViewData.id,e);return l._dataPromiseKeeper.add(i).done(function(i){l.displayed&&(i.issues.length>0?u.hideBlankState():(u.showBlankState(e),l.analytics.trigger("blank")),l.processChartData(i))}).always(function(e){"abort"!==e&&u.hideSpinner()})},l.getFilterOptions=function(){if(!l.filterOptions){var e=o.getBoardSetting(o.getRapidViewId(),l.SETTINGS_KEY,{});l.filterOptions={timeFrame:(new i).fromNormalized(e),refinements:(new t).fromNormalized(e),viewingOptions:(new r).fromNormalized(e)}}return l.filterOptions},l.saveFilterOptions=function(){o.setBoardSetting(l.SETTINGS_KEY,l.getNormalizedFromInternal())},l.processChartData=function(e){var i=new Date(e.earliestTime),t=new Date(e.currentTime),r=l.getFilterOptions();if(r.timeFrame.setBounds(i,t),l.firstTimeLoadingData){var n=(t-i)/a.day;l.firstTimeLoadingData=!1,r.timeFrame.isDefault()&&n<90&&(r.timeFrame.setAllTime(),o.pushState())}u.render(e,r.timeFrame)},l.isApplicable=function(e){return!o.isAgilityBoard()},l.getNormalizedFromInternal=function(){var e=l.getFilterOptions();return d.extend({chart:l.id},e.timeFrame.toNormalized(),e.refinements.toNormalized(),e.viewingOptions.toNormalized())},l.updateInternalFromNormalized=function(e){var i=l.getFilterOptions();i.timeFrame.fromNormalized(e),i.refinements.fromNormalized(e),i.viewingOptions.fromNormalized(e),l.saveFilterOptions()},l.toUrl=function(e){return{days:e.days,from:e.from,to:e.to,column:e.columnIds,swimlane:e.swimlaneIds,quickfilter:e.quickFilterIds,nwd:e.includeNonWorkingDays}},l.getNormalizedFromUrl=function(e){function i(e){return d.isArray(e)?d.map(e,Number):[Number(e)]}function t(e){return e===(!0).toString()}var r={};return"days"in e&&(r.days=isNaN(e.days)?e.days:Number(e.days)),"to"in e&&(r.to=e.to),"from"in e&&(r.from=e.from),"column"in e&&(r.columnIds=i(e.column)),"swimlane"in e&&(r.swimlaneIds=i(e.swimlane)),"quickfilter"in e&&(r.quickFilterIds=i(e.quickfilter)),"nwd"in e&&(r.includeNonWorkingDays=t(e.nwd)),r},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartView.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view",["require"],function(e){var t,r,a,o,n,i,s,l,m,d,u,c={},h=e("jquery"),f=e("jira-agile/d3"),g=e("jira/moment"),p=e("jira-agile/rapid/global-events");return p.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller"),i=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller"),r=GH.ChartView,a=GH.Reports.controlChart,o=GH.Reports.controlChartHowTo,n=GH.Reports.controlChartLegend,s=GH.Layout,l=GH.RapidViewConfig,m=GH.TimeFormat,d=GH.NumberFormat,u=GH.ChartTimeFrames}),c.$timeWindowSelect=null,c.$fromDateInput=null,c.$toDateInput=null,c.$timeFrameResetLink=null,c.ControlChart=null,c.bindingToModel=!1,c._firstRender=null,c.init=function(){c._firstRender=!0;var e=l.currentData.data.swimlaneStrategy;r.getChartContentElem(!0).html(GH.tpl.reports.controlChart.renderChartBody({shouldShowSwimlaneRefine:"custom"===e})),r.getChartLegendD3(!0).html(GH.tpl.reports.controlChart.renderLegend()),h("#ghx-chart-header-secondary .ghx-chart-legend").show();var t=new o;t(f.select(".ghx-group-how"));var i=new n;i(f.select(".ghx-chart-legend")),c.renderControls(),c.renderChartSelector(),c.ControlChart=new a,c.bindToWindowResize()},c.destroy=function(){c.unbindToWindowResize()},c.render=function(e,t){c.bindModelToView(e,t),c._firstRender||r.showChartUpdatedToast(),c._firstRender=!1},c.renderChart=function(){c.ControlChart(f.select("#control-chart .ghx-svg-chart"))},c.renderChartSelector=function(){r.getChartSelector(!0).html(GH.tpl.reports.controlChart.renderChartSelector())},c.bindModelToChartHeader=function(e,t){var a=t.getTimeFrameDates(),o="LL",n=GH.tpl.reports.controlChart.renderChartTimeWindow({fromDate:g(a.fromDate).format(o),toDate:g(a.toDate).format(o),timeFrame:t.timeFrame});h(".js-chart-time-window").text(n);var i=0===e.issues.length?"":GH.tpl.reports.controlChart.renderChartSnapshots({mean:m.formatSensibleShortDuration(e.stats.mean),median:m.formatSensibleShortDuration(e.stats.median),min:m.formatSensibleShortDuration(e.stats.min),max:m.formatSensibleShortDuration(e.stats.max),issueCount:d.format(e.issues.length)});r.getChartSnapshot(!0).html(i);var s=h(".js-chart-legend-rollingaveragewindow");e.stats.rollingAverageWindow?s.text(AJS.format("{0,number} issue window",e.stats.rollingAverageWindow)):s.text("Not available")},c.bindModelToControls=function(e){c.bindingToModel=!0;var t=e.getTimeFrameDates(),r=c.$timeFrameResetLink;c.$timeWindowSelect.val(e.getTimeFrame()).trigger("change"),c.updateCustomDatesFields(t.fromDate,t.toDate),c.validateCustomDates(),e.isDefault()?r.attr("aria-disabled","true").attr("title","Time scale is currently using default settings"):r.removeAttr("aria-disabled title"),c.bindingToModel=!1},c.bindModelToChart=function(e){c.ControlChart.data(e),c.renderChart()},c.bindModelToView=function(e,t){c.bindModelToChart(e),c.bindModelToChartHeader(e,t),c.bindModelToControls(t)},c.bindToWindowResize=function(){s.bindDelayedWindowResize(),h(GH).bind(s.EVENT_DELAYED_RESIZE+"."+t.id,function(){c.renderChart()})},c.unbindToWindowResize=function(){h(GH).unbind(s.EVENT_DELAYED_RESIZE+"."+t.id)},c.showBlankState=function(e){var t=h(GH.tpl.reports.controlChart.renderBlankStateMessage({canResetRefinements:!e.timeFrame.isDefault()||!e.refinements.isDefault()}));t.find(".js-options-reset").on("click",function(e){c.resetDefaultTimeWindow(e),i.resetToDefaults()}),r.showBlankStateMessage(t)},c.hideBlankState=function(){r.hideBlankStateMessage()},c.showSpinner=function(){r.showSpinner()},c.hideSpinner=function(){r.hideSpinner()},c.handleTimeWindowChanged=function(e){if(!c.bindingToModel){var r=c.$timeWindowSelect.val();if("custom"===r){var a=c.getCustomDates();t.getFilterOptions().timeFrame.setSimpleDates(a.fromDate,a.toDate)}else t.getFilterOptions().timeFrame.setDays(+r);t.update()}},c.renderControls=function(){Calendar.setup({firstDay:0,inputField:"js-option-timeframe-custom-from",button:"js-option-timeframe-custom-from_trigger_c",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:m.dateFormat,useISO8601WeekNumbers:m.useISO8601WeekNumbers,showsTime:!1}),Calendar.setup({firstDay:0,inputField:"js-option-timeframe-custom-to",button:"js-option-timeframe-custom-to_trigger_c",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:m.dateFormat,useISO8601WeekNumbers:m.useISO8601WeekNumbers,showsTime:!1}),c.$timeWindowSelect=h("#js-option-timeframe"),c.$fromDateInput=h("#js-option-timeframe-custom-from"),c.$toDateInput=h("#js-option-timeframe-custom-to"),c.$timeFrameResetLink=h("#js-option-timeframe-reset"),c.$timeWindowSelect.change(c.handleTimeWindowChanged),c.$fromDateInput.change(c.handleCustomDateSelected),c.$toDateInput.change(c.handleCustomDateSelected),c.$timeFrameResetLink.click(c.resetDefaultTimeWindow)},c.handleCustomDateSelected=function(){if(!c.bindingToModel&&c.validateCustomDates()){c.$timeWindowSelect.val("custom");var e=c.getCustomDates();t.getFilterOptions().timeFrame.setSimpleDates(e.fromDate,e.toDate),t.update()}},c.getCustomDates=function(){var e=c.$fromDateInput.val(),t=c.$toDateInput.val();return{fromDate:Date.parseDate(e,m.dateFormat),toDate:Date.parseDate(t,m.dateFormat),fromText:e,toText:t}},c.updateCustomDatesFields=function(e,t){c.$fromDateInput.val(e.print(m.dateFormat)),c.$toDateInput.val(t.print(m.dateFormat))},c.resetDefaultTimeWindow=function(e){c.bindingToModel||(t.getFilterOptions().timeFrame.resetToDefault(),t.update(),e.preventDefault())},c.validateCustomDates=function(){var e=c.getCustomDates(),t=!0,r="";return e.fromDate&&e.toDate&&u.isValidDate(e.fromText)&&u.isValidDate(e.toText)?e.fromDate>e.toDate&&(r="From-date must be before to-date",t=!1):(r=AJS.format("Date format should be as follows: {0}",u.getDateAsText(new Date)),t=!1),c.setTimeFrameError(r),t},c.setTimeFrameError=function(e){h(".js-timeframes-error").html(e)},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsView.js' */
GH.Reports.ControlChartRefinementsView=function(e,t,n,l){function i(e,t,i,o){var c=e.find("select"),u=e.find(".ghx-refinement-selector"),d=_.map(p.available[t],function(e){return{value:e.id,label:e.name,selected:!1}});c.empty().append(GH.tpl.reports.controlChart.renderSelectOptions({options:d}));var f=new l({element:c,itemAttrDisplayed:"label"});f.$container.addClass("hidden").append(GH.tpl.reports.controlChart.renderRefineInfoMessage({message:o}));var m=n.create({content:f.$container,offsetTarget:u,width:"auto"});return u.on("click",function(e){e.preventDefault(),m.toggle(),f.$field.focus()}),f.model.$element.on("unselect selected",function(){h&&(r()?(p.selected[i]=_.map(f.model.getSelectedValues(),function(e){return+e}),a()):setTimeout(function(){s()},0))}),{multiSelect:f,$button:u}}function r(){var e=u.multiSelect.model.getSelectedValues().length>0,t=!d||d.multiSelect.model.getSelectedValues().length>0;return e&&t}function o(e){g=null;var t=GH.RapidViewConfig.currentData.data.swimlaneStrategy,n="custom"===t;u=i(e.find("#js-options-refine-columns"),"columns","columnIds","At least one column must be selected"),n&&(d=i(e.find("#js-options-refine-swimlanes"),"swimlanes","swimlaneIds","At least one swimlane must be selected")),f=i(e.find("#js-options-refine-quickfilters"),"quickFilters","quickFilterIds",""),m=e.find(".js-reset-btn").on("click",function(e){e.preventDefault(),c()})}function a(){_.isEqual(p.toNormalized(),g)||(null!==g&&S("modelChanged"),s(),g=p.toNormalized())}function s(){function e(e,n){if(e){e.multiSelect.clear(),_.each(n,function(t){var n=e.multiSelect.model.getDescriptor(t.toString());e.multiSelect.selectItem(n,!0)});var l=t(e.multiSelect.model.$element);e.$button.find(".ghx-refinement-wrap").text(l||"None")}}function t(e){var t=e.find("option:selected").map(function(){return this.text}).get().join(", ");return t}h=!1,e(u,p.selected.columnIds),e(d,p.selected.swimlaneIds),e(f,p.selected.quickFilterIds),p.isDefault()?m.attr("aria-disabled","true"):m.removeAttr("aria-disabled"),h=!0}function c(){S("resetToDefaults")}var u,d,f,m,p=null,g=null,S=e.noop,h=!0;return{start:function(t){p=t,o(e("#ghx-controlchart-refine-options"))},digest:function(){a()},setHandler:function(e){S=e},getModel:function(){return p}}}(AJS.$,AJS.I18n,AJS.InlineLayer,AJS.CheckboxMultiSelect);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller",["require"],function(t){"use strict";function e(){n.setHandler(function(t){o[t]()})}var r,n=GH.Reports.ControlChartRefinementsView,i=t("jira-agile/rapid/global-events");i.on("pre-initialization",function(){r=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")});var o={modelChanged:function(){r.update()},resetToDefaults:function(){n.getModel().resetToDefaults(),n.digest()}};return{start:function(t){e(),n.start(t),n.digest()},resetToDefaults:o.resetToDefaults}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsView.js' */
GH.Reports.ControlChartViewingOptionsView=function(n){function t(n){a=null,r=n.find("#js-option-nwd").on("change",function(){d&&(u.includeNonWorkingDays=this.checked,o())}),l=n.find(".js-reset-btn").on("click",function(n){n.preventDefault(),i()})}function o(){_.isEqual(u.toNormalized(),a)||(null!==a&&c("modelChanged"),e(),a=u.toNormalized())}function e(){d=!1,r.prop("checked",u.includeNonWorkingDays),u.isDefault()?l.attr("aria-disabled","true"):l.removeAttr("aria-disabled"),d=!0}function i(){c("resetToDefaults")}var r,l,u=null,a=null,c=n.noop,d=!0;return{start:function(o){u=o,t(n("#ghx-controlchart-viewing-options"))},digest:function(){o()},setHandler:function(n){c=n},getModel:function(){return u}}}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-viewing-options-controller",["require"],function(t){"use strict";function r(){e.setHandler(function(t){o[t]()})}var i,e=GH.Reports.ControlChartViewingOptionsView,n=t("jira-agile/rapid/global-events");n.on("pre-initialization",function(){i=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")});var o={modelChanged:function(){i.update()},resetToDefaults:function(){e.getModel().resetToDefaults(),e.digest()}};return{start:function(t){r(),e.start(t),e.digest()}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartDialog.js' */
GH.Reports=GH.Reports||{},GH.Reports.ControlChartDialog=function(){function e(e){return _.each(e.columns,function(e){e.formattedDuration=s(e.duration)}),e.formattedDuration=s(e.duration),e}function t(e){var t=function(e){return e.duration};return[{label:"Max time",value:s(d3.max(e,t))},{label:"Average time",value:s(d3.mean(e,t))},{label:"Min time",value:s(d3.min(e,t))}]}function n(t){return GH.tpl.reports.controlChart.renderDialogIssueContent({issue:e(t),url:GH.Ajax.CONTEXT_PATH+"/browse/"+encodeURIComponent(t.key)})}function r(e){var n=_.pluck(e,"key");return GH.tpl.reports.controlChart.renderDialogClusterContent({issueCount:e.length,stats:t(e),url:GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(n.join(","))})}function a(e,t){var a=d3.select(e);a.classed("active",!0);var o=_.isArray(t);return i=GH.SideInlineDialog.create(l,e,function(e,a,i){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.html(o?r(t):n(t)),i()},{addActiveClass:!1,container:c,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,hideCallback:function(){a.classed("active",!1)}}),i.show(),i}function o(){return!!i&&i.is(":visible")}var i,l="control-chart-issues",c="#ghx-report-scrollarea > .aui-page-panel",s=GH.TimeFormat.formatShortDuration;return GH.InlineDialog.preventCloseOnClick(l),{show:a,hide:function(){i&&i.hide()},isVisible:o}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartScrubberDialog.js' */
GH.Reports.ControlChartScrubberDialog=function(){function e(e){return moment(e).format("LLL")}function n(e){return moment(e).format("LL")}function i(e){m=e,f=GH.SideInlineDialog.create(C,e,function(e,n,i){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog ghx-scrubber-dialog"),e.addClass("ghx-scrubber-contents"),e.next("#arrow-"+C).addClass("ghx-arrow-scrubber-dialog"),i()},H),a()}function r(){b=!1}function t(){b=!0}function o(){!GH.Reports.ControlChartDialog.isVisible()&&b&&f.show()}function a(){GH.InlineDialog.registerInlineDialogHacks(C,{validateClickToCloseFn:function(){return!1}})}function l(){f&&f.hide()}function s(e){g(),c(e),f.refresh()}function c(e){var n;n=e.time?GH.tpl.reports.controlChart.renderScrubberDialogContent({indicatedTime:u(e.time),rollingAverage:GH.Util.roundToDecimalPlaces(e.rollingAverage,1),standardDeviation:GH.Util.roundToDecimalPlaces(e.standardDeviation,1)}):GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent({startTime:u(e.startTime),endTime:u(e.endTime)}),d().find(".ghx-scrubber-contents").html(n)}function u(i){var r=GH.Reports.ControlChartController.getFilterOptions().timeFrame,t=r.getTimeFrameDuration()/GH.ChartTimeFrames.day;return i=t>30?n(i):e(i)}function d(){return AJS.$("#inline-dialog-"+C)}function g(){h()||o()}function h(){return!!f&&f.is(":visible")}var f,m,b=!0,C="scrubber-dialog",D="#ghx-chart-group",H={container:D,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,width:230,closeOthers:!1,persistent:!0,addActiveClass:!1};return{init:i,show:o,hide:l,isVisible:h,refresh:s,disable:r,enable:t}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChartScrubber.js' */
GH.Reports.ControlChartScrubber=function(){function r(){GH.Reports.ControlChartScrubberDialog.disable()}function e(){GH.Reports.ControlChartScrubberDialog.enable()}function t(){GH.Reports.ControlChartScrubberDialog.show()}function n(){GH.Reports.ControlChartScrubberDialog.hide()}function i(){c.hideScrubber()}function o(){u.cancelDrag()}function a(r,e){var t={};if(r.rollingAverageLine.length&&r.rollingAverageLine[0][0]<=e){var n=GH.Util.indexOf(r.rollingAverageLine,function(r){return r[0]<=e},!0);t.rollingAverage=r.rollingAverageLine[n][1],t.standardDeviation=r.standardDeviationArea[n][2]}return t}function l(){var r=this.mouseCoordinates(),e=this.xScale().invert;if(r)if(u.isDragging()){var t=u.currentRange();GH.Reports.ControlChartScrubberDialog.refresh({startTime:e(t[0]),endTime:e(t[1])})}else{var n=e(r[0]),i=a(this.data().series,n);GH.Reports.ControlChartScrubberDialog.refresh({time:n,rollingAverage:i.rollingAverage,standardDeviation:i.standardDeviation})}}function s(){var r=this.selection();c.parent(this),c.interactiveLayer(this),c(r),u.parent(this),u.interactiveLayer(this),u(r),GH.Reports.ControlChartScrubberDialog.init(c.elements()[0]);var e=this;u.onEndDrag(_.bind(l,e)),this.mouseover(function(){t.call(e)}),this.mousemove("ccscrubber",function(){l.call(e)}),this.mouseout(function(){n.call(e)})}var c=c3.scrubber().elementClass("ghx-scrubber").shouldHideScrubber(function(){return GH.Reports.ControlChartDialog.isVisible()}),u=GH.Reports.ControlChartBrush();return c3.component().extend(_.once(s)).extend(o).extend({hideScrubber:i,disableScrubber:r,enableScrubber:e})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/ControlChartBrush.js' */
GH.Reports.ControlChartBrush=function(){return c3.brush().elementClass("ghx-chart-brush").enter(function(){var t=this;AJS.$(document).on("click mouseup",function(e){0===AJS.$(e.target).closest(t.parent().selection().node()).size()&&t.cancelDrag()}),AJS.$(document).on("keydown",function(e){27===e.keyCode&&t.cancelDrag()})}).onDrag(function(){AJS.$(d3.event.target).closest(this.parent().selection().node()).size()>0?GH.Reports.ControlChartDialog.hide():this.cancelDrag()}).onEndDrag(function(t){var e=this;t[1]-t[0]<5||(t=_.map(t,function(t){return e.parent().xScale().invert(t)}),GH.Reports.ControlChartController.getFilterOptions().timeFrame.setSimpleDates(t[0],t[1]),GH.Reports.ControlChartController.update())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/controlchart/ControlChart.soy' */
// This file was automatically generated from ControlChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.controlChart.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.controlChart == 'undefined') { GH.tpl.reports.controlChart = {}; }


GH.tpl.reports.controlChart.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="control-chart" class="ghx-control-chart-svg"><svg class="ghx-svg-chart"></svg></div></div><div id="ghx-chart-options" class="aui-group"><div id="ghx-chart-options-time" class="aui-item">' + GH.tpl.reports.controlChart.renderChartTimeOptions(null) + '</div><div id="ghx-chart-options-refine" class="aui-item">' + GH.tpl.reports.controlChart.renderChartRefineOptions(opt_data) + '</div><div id="ghx-chart-options-view" class="aui-item">' + GH.tpl.reports.controlChart.renderChartViewingOptions(null) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartBody.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartBody';
}


GH.tpl.reports.controlChart.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2><p>' + soy.$$escapeHtml('There are either no issues on this board, or all the issues have been filtered out by the chart refinements.') + '</p>' + ((opt_data.canResetRefinements) ? '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-options-reset'], text: 'Reset the report filters'}) + '</p>' : '<p>' + soy.$$escapeHtml('Change the filter values for this report below') + '</p>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.controlChart.renderBlankStateMessage';
}


GH.tpl.reports.controlChart.renderChartSnapshots = function(opt_data, opt_ignored) {
  return '<div class="ghx-chart-snapshot"><dl><dt class="js-chart-snapshot-mean">' + soy.$$escapeHtml(opt_data.mean) + '</dt><dd>' + soy.$$escapeHtml('Average') + '</dd></dl><dl><dt class="js-chart-snapshot-median">' + soy.$$escapeHtml(opt_data.median) + '</dt><dd>' + soy.$$escapeHtml('Median') + '</dd></dl><dl><dt class="js-chart-snapshot-min-time">' + soy.$$escapeHtml(opt_data.min) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('Min {0}','Time')) + '</dd></dl><dl><dt class="js-chart-snapshot-max-time">' + soy.$$escapeHtml(opt_data.max) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('Max {0}','Time')) + '</dd></dl><dl><dt class="js-chart-snapshot-issue-count">' + soy.$$escapeHtml(opt_data.issueCount) + '</dt><dd>' + soy.$$escapeHtml('Issues') + '</dd></dl></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartSnapshots.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartSnapshots';
}


GH.tpl.reports.controlChart.renderChartSelector = function(opt_data, opt_ignored) {
  return '<div class="ghx-time-window js-chart-time-window"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartSelector.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartSelector';
}


GH.tpl.reports.controlChart.renderChartTimeWindow = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.timeFrame) {
    case 0:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'All Time'));
      break;
    case 7:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past Week'));
      break;
    case 14:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past 2 Weeks'));
      break;
    case 30:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past Month'));
      break;
    case 90:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past 3 Months'));
      break;
    case 180:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past 6 Months'));
      break;
    default:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Custom'));
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartTimeWindow.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartTimeWindow';
}


GH.tpl.reports.controlChart.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Issue') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Cluster of issues') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Average') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Rolling average') + '<div class="ghx-description js-chart-legend-rollingaveragewindow"></div></li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Standard deviation') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderLegend.soyTemplateName = 'GH.tpl.reports.controlChart.renderLegend';
}


GH.tpl.reports.controlChart.renderChartTimeOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Time scale') + '</h4><form class="aui"><fieldset><div class="field-group"><label for="js-option-timeframe">' + soy.$$escapeHtml('Timeframe') + '</label><select class="select" id="js-option-timeframe" title="' + soy.$$escapeHtml('Timeframe') + '"><option value="7">' + soy.$$escapeHtml('Past Week') + '</option><option value="14">' + soy.$$escapeHtml('Past 2 Weeks') + '</option><option value="30">' + soy.$$escapeHtml('Past Month') + '</option><option value="90">' + soy.$$escapeHtml('Past 3 Months') + '</option><option value="180">' + soy.$$escapeHtml('Past 6 Months') + '</option><option value="0">' + soy.$$escapeHtml('All Time') + '</option><option value="custom">' + soy.$$escapeHtml('Custom') + '</option></select></div></fieldset><fieldset><div class="field-group"><label>' + soy.$$escapeHtml('Custom dates') + '</label><div class="ghx-calendar-wrap"><span id="js-option-timeframe-custom-from_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit date') + '">' + soy.$$escapeHtml('Edit') + '</span><input class="text" type="text" id="js-option-timeframe-custom-from"></div><span class="ghx-conjunction">' + soy.$$escapeHtml('to') + '</span><div class="ghx-calendar-wrap"><span id="js-option-timeframe-custom-to_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit date') + '">' + soy.$$escapeHtml('Edit') + '</span><input class="text" type="text" id="js-option-timeframe-custom-to"></div><div class="ghx-error js-timeframes-error"></div></div></fieldset><fieldset>' + aui.buttons.button({id: ['js-option-timeframe-reset'], extraClasses: ['js-reset-btn', 'js-options-timeframe-reset', 'aui-button-link', 'ghx-margin-top'], text: 'Reset to default', type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartTimeOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartTimeOptions';
}


GH.tpl.reports.controlChart.renderChartRefineOptions = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<h4>' + soy.$$escapeHtml('Refine report') + '</h4><form id="ghx-controlchart-refine-options" class="aui">' + GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-columns', label: 'Columns'}) + ((opt_data.shouldShowSwimlaneRefine) ? GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-swimlanes', label: 'Swimlanes'}) : '') + GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-quickfilters', label: 'Quick Filters'}) + '<fieldset>' + aui.buttons.button({extraClasses: ['js-reset-btn', 'js-options-refine-reset', 'aui-button-link', 'ghx-margin-top'], text: 'Reset to default', type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartRefineOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartRefineOptions';
}


GH.tpl.reports.controlChart.renderRefineOption = function(opt_data, opt_ignored) {
  return '<fieldset><div id="' + soy.$$escapeHtml(opt_data.id) + '" class="field-group"><label>' + soy.$$escapeHtml(opt_data.label) + '</label><button id="' + soy.$$escapeHtml(opt_data.id) + '-selector" type="button" class="ghx-refinement-selector aui-button aui-button-subtle ghx-drop-arrow"><div class="ghx-refinement-wrap"></div></button><select id="' + soy.$$escapeHtml(opt_data.id) + '-select" multiple="multiple" class="hidden"></select></div></fieldset>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderRefineOption.soyTemplateName = 'GH.tpl.reports.controlChart.renderRefineOption';
}


GH.tpl.reports.controlChart.renderRefineInfoMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-description ghx-sparkler-description js-options-refine-error">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderRefineInfoMessage.soyTemplateName = 'GH.tpl.reports.controlChart.renderRefineInfoMessage';
}


GH.tpl.reports.controlChart.renderSelectOptions = function(opt_data, opt_ignored) {
  var output = '';
  var optionList158 = opt_data.options;
  var optionListLen158 = optionList158.length;
  for (var optionIndex158 = 0; optionIndex158 < optionListLen158; optionIndex158++) {
    var optionData158 = optionList158[optionIndex158];
    output += '<option' + ((optionData158.value) ? ' value="' + soy.$$escapeHtml(optionData158.value) + '"' : '') + ((optionData158.selected) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData158.label) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderSelectOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderSelectOptions';
}


GH.tpl.reports.controlChart.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Viewing options') + '</h4><form  id="ghx-controlchart-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-nwd" /><label for="js-option-nwd">' + soy.$$escapeHtml('Include non-working days in calculations') + '</label></div></fieldset><fieldset>' + aui.buttons.button({extraClasses: ['js-reset-btn', 'aui-button-link', 'ghx-margin-top'], text: 'Reset to default', type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartViewingOptions';
}


GH.tpl.reports.controlChart.renderDialogIssueContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-inline-dialog-container"><a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a> <span>' + soy.$$escapeHtml(opt_data.issue.summary) + '</span>';
  var columnList192 = opt_data.issue.columns;
  var columnListLen192 = columnList192.length;
  for (var columnIndex192 = 0; columnIndex192 < columnListLen192; columnIndex192++) {
    var columnData192 = columnList192[columnIndex192];
    output += GH.tpl.reports.controlChart.renderDialogItem({label: columnData192.name, value: columnData192.formattedDuration});
  }
  output += GH.tpl.reports.controlChart.renderDialogItem({label: 'Cycle time', value: opt_data.issue.formattedDuration}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogIssueContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogIssueContent';
}


GH.tpl.reports.controlChart.renderDialogClusterContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-inline-dialog-container"><strong>' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.issueCount)) + '</strong> <a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml('View in Issue Navigator') + '</a>';
  var statList209 = opt_data.stats;
  var statListLen209 = statList209.length;
  for (var statIndex209 = 0; statIndex209 < statListLen209; statIndex209++) {
    var statData209 = statList209[statIndex209];
    output += GH.tpl.reports.controlChart.renderDialogItem(statData209);
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogClusterContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogClusterContent';
}


GH.tpl.reports.controlChart.renderDialogItem = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml(opt_data.label) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.value) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogItem.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogItem';
}


GH.tpl.reports.controlChart.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><p><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span>' + soy.$$escapeHtml(opt_data.indicatedTime) + '</p>' + ((opt_data.rollingAverage != null || opt_data.standardDeviation != null) ? '<table class="aui-table">' + ((opt_data.rollingAverage != null) ? GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'Rolling average', value: AJS.format('{0,choice,0#{0,number} days|1#{0,number} day|1\x3c{0,number} days}',opt_data.rollingAverage)}) : '') + ((opt_data.standardDeviation != null) ? GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'Standard deviation', value: AJS.format('{0,choice,0#{0,number} days|1#{0,number} day|1\x3c{0,number} days}',opt_data.standardDeviation)}) : '') + '</table>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberDialogContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberDialogContent';
}


GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><table class="aui-table">' + GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'From', value: opt_data.startTime}) + GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'To', value: opt_data.endTime}) + '</table></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent';
}


GH.tpl.reports.controlChart.renderScrubberDialogItem = function(opt_data, opt_ignored) {
  return '<tr><th>' + soy.$$escapeHtml(opt_data.label) + '</th><td>' + soy.$$escapeHtml(opt_data.value) + '</td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberDialogItem.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberDialogItem';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service",["require"],function(t){"use strict";function e(t){var e={url:"/rapid/charts/releaseburndownchart",data:t};return d.get(e,"rapidChartData")}function a(t,e){return n.getScopeBySprintData(t,e)}function r(){}var i,n,s=t("underscore"),o=t("jira-agile/rapid/global-events"),d=t("jira-agile/rapid/ajax");return o.on("pre-initialization",function(){i=GH.RapidViewConfig,n=GH.Reports.ScopeBurndownBySprintTransformer}),r.prototype={get:function(t,e,r){return this._getData(t,e,r).andThen(function(t){return t.rapidViewId=i.currentData.id,t.estimationStatistic=i.currentData.data.estimationStatistic,t.estimationStatistic.formatter=n.getEstimationStatisticFormatter(t.estimationStatistic.renderer),t.labels={originalEstimate:"Original estimate at start of version",workAdded:"added to version",workRemoved:"removed from version",forecastDescription:function(t){return AJS.format("Based on your velocity for the last 3 sprints, it will take {0,choice,0#0 more sprints|1#1 more sprint|1\u003c{0,number} more sprints} to complete this version.",t)},helpUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Release+Burndown","isLocal":false}.url},a(t,r.zeroBaseline)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:a,_getData:function(t,a,r){var i={rapidViewId:t,versionId:a};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&s.isEqual(this._dataRequestParams,i)||(this._dataRequestParams=i,this._dataPromise=e(i)),this._dataPromise}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownChartTableDataService.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service",["require"],function(a){"use strict";function t(a){var t={url:"/rapid/charts/versionreport",data:a};return o.get(t,"versionReportData")}function r(a,t){return a.showIssueEpic=!0,i.getIssuesBySprintData(a,t)}function e(){}var i,n=a("underscore"),s=a("jira-agile/rapid/global-events"),o=a("jira-agile/rapid/ajax");return s.on("pre-initialization",function(){i=GH.Reports.ScopeBurndownBySprintTransformer}),e.prototype={get:function(a,t,e){return this._getData(a,t).andThen(function(t){return t.rapidViewId=a,r(t,e)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:r,_getData:function(a,r){var e={rapidViewId:a,versionId:r};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&n.isEqual(this._dataRequestParams,e)||(this._dataRequestParams=e,this._dataPromise=t(e)),this._dataPromise}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReport.soy' */
// This file was automatically generated from ReleaseBurndownReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.releaseBurndownReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.releaseBurndownReport == 'undefined') { GH.tpl.reports.releaseBurndownReport = {}; }


GH.tpl.reports.releaseBurndownReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-release-burndown-report" class="ghx-scope-burndown-chart-svg ghx-release-burndown-chart-svg"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="ghx-version-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderChartBody';
}


GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2>' + ((opt_data.hasNoVersion) ? '<p>' + soy.$$escapeHtml('There are no versions on this board.') + '</p>' : (opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml('There are no estimated issues in this version.') + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: opt_data.hasNoVersion ? 'Add versions in the Versions panel of the Backlog' : 'Estimate issues in the Backlog', tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage';
}


GH.tpl.reports.releaseBurndownReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work completed') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work forecast') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work remaining') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work added') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderLegend.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderLegend';
}


GH.tpl.reports.releaseBurndownReport.renderSnapshot = function(opt_data, opt_ignored) {
  var output = '';
  var unestimatedIssuesTooltipText__soy35 = soy.$$escapeHtml(AJS.format('{0}% of issues do not have an estimate ({1} of {2})',opt_data.unestimatedIssuesPercentage,opt_data.unestimatedIssuesCount,opt_data.estimatableIssuesCount)) + '<b>' + soy.$$escapeHtml('Issue types that do not include the estimation statistic are not counted.') + '</b>';
  output += '<div class="ghx-chart-snapshot">' + ((opt_data.shouldShowUnestimatedIssues) ? '<dl class="ghx-unestimated-issues ' + soy.$$escapeHtml(opt_data.unestimatedIssuesThresholdExceeded ? ' ghx-threshold-exceeded' : '') + '" data-tooltip="' + soy.$$escapeHtml(unestimatedIssuesTooltipText__soy35) + '"><dt>' + soy.$$escapeHtml(opt_data.unestimatedIssuesPercentage) + '%</dt><dd>' + soy.$$escapeHtml('unestimated issues') + '</dd></dl>' : '') + '<dl class=\'ghx-completed-overview\'><dt>' + soy.$$escapeHtml(AJS.format('{0} of {1}',opt_data.workCompleted,opt_data.workTotal)) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('completed ({0})',opt_data.estimationStatistic)) + '</dd></dl></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderSnapshot.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderSnapshot';
}


GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Viewing options') + '</h4><form  id="ghx-versionreport-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-zero-baseline" ' + ((opt_data.zeroBaseline) ? 'checked' : '') + '/><label for="js-option-zero-baseline">' + soy.$$escapeHtml('Align sprints at the base of the chart') + '</label><p class="ghx-description">' + soy.$$escapeHtml('Use this view to see trends in the scope for the version.') + '</p></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions';
}


GH.tpl.reports.releaseBurndownReport.renderVersionMetadata = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml(opt_data.name) + '</h3>' + ((opt_data.description) ? '<p>' + soy.$$escapeHtml(opt_data.description) + '</p>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Planned start date') + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.formattedStartDate ? opt_data.formattedStartDate : 'None') + '</div></div><div class="aui-group"><div class="aui-item">' + ((opt_data.released) ? soy.$$escapeHtml('Release date') : soy.$$escapeHtml('Planned release date')) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.formattedReleaseDate ? opt_data.formattedReleaseDate : 'None') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderVersionMetadata.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderVersionMetadata';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReportView.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view",["jquery","underscore","jira-agile/d3","jira-agile/rapid/events","jira-agile/rapid/global-events","jira-agile/rapid/ui/chart/chart-view","jira-agile/rapid/ui/component/chart-picker","jira-agile/tooltip","jira-agile/rapid/const/PageMode"],function(e,t,n,r,s,i,o,a,d){function h(){new r(this)}var l,p,u,c,g,m,w;return s.on("pre-initialization",function(){l=GH.Reports.ScopeBurndownBySprintChart,p=GH.Reports.ScopeBurndownBySprintChartLegend,u=GH.Reports.ScopeBurndownBySprintChartHowTo,c=GH.Layout,g=GH.Ajax,m=GH.RapidViewConfig,w=GH.RapidBoard.ViewController}),h.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(n){this._model=n,i.getChartContentElem(!0).html(GH.tpl.reports.releaseBurndownReport.renderChartBody()),i.getChartLegendD3(!0).html(GH.tpl.reports.releaseBurndownReport.renderLegend()).show(),this._renderOptions(),this._versionPicker=new o("releaseBurndown.selectedVersionId","There are currently no versions on this board."),e(this._versionPicker).on("selectedItemChanged",t.bind(this._handleVersionSelected,this)),this._chart=new l,this._legend=new p,this._howTo=new u,this._renderLegend(),this._renderHowTo()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,i.getChartContentElem(!0).empty(),i.getChartLegendD3(!0).empty(),e(GH).unbind(c.EVENT_DELAYED_RESIZE+".releaseBurndownReport")},setVersions:function(e){this._versionPicker.setItems(e),this._versionPicker.setDefaultItem(e[0])},update:function(n){this._versionPicker.setSelectedItem(n.version.id,!0),this._versionPicker.render(i.getChartSelector(!0)),this._chart.data(n),this._renderChart(),this._renderSnapshot(n),this._renderVersionMetadata(n),this._firstRender?(c.bindDelayedWindowResize(),e(GH).bind(c.EVENT_DELAYED_RESIZE+".releaseBurndownReport",t.bind(this._handleWindowResized,this))):i.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){this._renderTable(e)},showBlankState:function(t,n){var r=e(GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage({planModeUrl:g.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+m.currentData.data.id+"&view=planning&versions=visible",hasNoVersion:t,hasNoEstimatedStories:n}));r.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),w.setMode(d.PLAN)}),i.showBlankStateMessage(r)},hideBlankState:function(){i.hideBlankStateMessage()},showSpinner:function(){i.showSpinner()},hideSpinner:function(){i.hideSpinner()},_renderSnapshot:function(t){var n=30,r=t.snapshot.estimatableIssueCount-t.snapshot.estimatedIssueCount,s=t.snapshot.estimatableIssueCount>0?Math.round(r/t.snapshot.estimatableIssueCount*100):0,i=0===t.snapshot.issueCount?"":GH.tpl.reports.releaseBurndownReport.renderSnapshot({estimatableIssuesCount:t.snapshot.estimatableIssueCount,unestimatedIssuesCount:r,unestimatedIssuesPercentage:s,unestimatedIssuesThresholdExceeded:s>n,workCompleted:t.estimationStatistic.formatter.formatFull(t.snapshot.workCompleted),workTotal:t.estimationStatistic.formatter.formatFull(t.snapshot.workCompleted+t.snapshot.workRemaining),estimationStatistic:t.estimationStatistic.name,shouldShowUnestimatedIssues:"issueCount"!==t.estimationStatistic.typeId});e("#ghx-chart-snapshot").html(i),a.tipsify({selector:"#ghx-chart-snapshot .ghx-unestimated-issues",html:!0,className:"ghx-tipsy-left"})},_renderTable:function(e){i.getChartContentElem(!0).find(".ghx-report-issue-list").html(GH.tpl.reports.scopeBurndownBySprint.renderIssueList(t.extend({emptySprintMessage:"No issues completed this sprint for current version."},e)))},_renderLegend:function(){this._legend(n.select(".ghx-chart-legend"))},_renderHowTo:function(){this._howTo(n.select(".ghx-group-how"))},_renderChart:function(){this._chart(n.select("#ghx-release-burndown-report"))},_renderVersionMetadata:function(e){i.getChartContentElem(!0).find(".ghx-version-metadata").html(GH.tpl.reports.releaseBurndownReport.renderVersionMetadata(e.version))},_renderOptions:function(){var t=this;e("#ghx-chart-options").html(GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions(this._model)),e("#js-option-zero-baseline").on("change",function(){t.trigger("optionChanged",{zeroBaseline:this.checked})})},_handleVersionSelected:function(e,t){this.trigger("versionSelected",t.item.id)},_handleWindowResized:function(){this._renderChart()}},h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReportController.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller",["require"],function(e){function i(){}var r,t,n,a=e("underscore"),o=e("jira-agile/rapid/global-events"),s=e("jira-agile/rapid/analytics-tracker"),d=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view"),l=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service"),u=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service"),h=new l,p=new u;return o.on("pre-initialization",function(){r=GH.PromiseKeeper,t=GH.RapidBoard.State,n=new GH.VersionsDataService}),i.id="releaseBurndown",i.prototype={SETTINGS_KEY:"chart.config.releaseBurndown",displayed:!1,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(e){this._rapidViewData=e||{}},show:function(){this.displayed=!0,this._tracker=new s("gh.report.releaseburndown"),t.pushState();var e=this._view=new d;e.on("versionSelected",a.bind(function(e){this._model.versionId=e,this.update()},this)).on("optionChanged",a.bind(function(e){this._model.zeroBaseline=e.zeroBaseline,this._tracker.trigger("zeroBaseline."+(e.zeroBaseline?"on":"off")),this.update()},this)),e.init(this._model),e.showSpinner(),this._tracker.trigger("show"),this._dataPromiseKeeper=new r;var i=n.getSimpleVersions(this._rapidViewData.id);this._dataPromiseKeeper.add(i).done(a.bind(function(i){i.length?(i.reverse(),null!=this._model.versionId&&n.versionExists(i,this._model.versionId)||(this._model.versionId=i[0].id),e.setVersions(i),this.update(!0)):(this._model.versionId=null,e.showBlankState(!0,!0),this._tracker.trigger("blank"),e.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),h.clearCache(),p.clearCache()},update:function(e){if(e?t.replaceState():t.pushState(),this.saveState(),null!=this._model.versionId){var i=this;i._view.showSpinner();var r=h.get(i._rapidViewData.id,i._model.versionId,{zeroBaseline:i._model.zeroBaseline});return i._dataPromiseKeeper.add(r).done(function(e){0===e.snapshot.estimatedIssueCount?(i._view.showBlankState(!1,!0),i._tracker.trigger("blank")):i._view.hideBlankState(),i._view.update(e);var r=p.get(i._rapidViewData.id,i._model.versionId,e);i._dataPromiseKeeper.add(r).done(function(e){i._view.updateTable(e)})}).always(function(e){"abort"!==e&&i._view.hideSpinner()})}},saveState:function(){t.setBoardSetting(this.SETTINGS_KEY,this.getNormalizedFromInternal())},loadState:function(){this._model=t.getBoardSetting(t.getRapidViewId(),this.SETTINGS_KEY,{versionId:null,zeroBaseline:!1})},isApplicable:function(e){return e.sprintSupportEnabled&&!t.isAgilityBoard()},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),a.defaults(a.clone(this._model),{zeroBaseline:!1})},updateInternalFromNormalized:function(e){this._model=e},toUrl:function(e){return{version:null!==e.versionId?e.versionId:void 0,zeroBaseline:!!e.zeroBaseline||void 0}},getNormalizedFromUrl:function(e){return{versionId:isNaN(e.version)?null:+e.version,zeroBaseline:"true"===e.zeroBaseline}}},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service",["require"],function(t){"use strict";function e(t){var e={url:"/rapid/charts/epicburndownchart",data:t};return c.get(e,"epicBurndownChartData")}function i(t,e){return n.getScopeBySprintData(t,e)}function a(){}var r,n,o=t("underscore"),s=t("jira-agile/rapid/global-events"),c=t("jira-agile/rapid/ajax");return s.on("pre-initialization",function(){r=GH.RapidViewConfig,n=GH.Reports.ScopeBurndownBySprintTransformer}),a.prototype={get:function(t,e,a){return this._getData(t,e,a).andThen(function(t){return t.rapidViewId=r.currentData.id,t.estimationStatistic=r.currentData.data.estimationStatistic,t.estimationStatistic.formatter=n.getEstimationStatisticFormatter(t.estimationStatistic.renderer),t.labels={originalEstimate:"Original estimate at start of epic",workAdded:"added to epic",workRemoved:"removed from epic",forecastDescription:function(t){return AJS.format("Based on your velocity for the last 3 sprints, it will take {0,choice,0#0 more sprints|1#1 more sprint|1\u003c{0,number} more sprints} to complete this epic.",t)},helpUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Epic+Burndown","isLocal":false}.url},t.epic={key:t.epicKey,summary:t.epicSummary,creationTime:t.epicCreationTime},i(t,a.zeroBaseline)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:i,_getData:function(t,i,a){var r={rapidViewId:t,epicKey:i};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&o.isEqual(this._dataRequestParams,r)||(this._dataRequestParams=r,this._dataPromise=e(r)),this._dataPromise}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownChartTableDataService.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service",["require"],function(a){"use strict";function t(a){var t={url:"/rapid/charts/epicreport",data:a};return u.get(t,"epicBurndownData")}function e(a,t){return a.showIssueEpic=!1,i.getIssuesBySprintData(a,t)}function r(){}var i,n=a("underscore"),s=a("jira-agile/rapid/global-events"),u=a("jira-agile/rapid/ajax");return s.on("pre-initialization",function(){i=GH.Reports.ScopeBurndownBySprintTransformer}),r.prototype={get:function(a,t,r){return this._getData(a,t).andThen(function(t){return t.rapidViewId=a,e(t,r)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:e,_getData:function(a,e){var r={rapidViewId:a,epicKey:e};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&n.isEqual(this._dataRequestParams,r)||(this._dataRequestParams=r,this._dataPromise=t(r)),this._dataPromise}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReport.soy' */
// This file was automatically generated from EpicBurndownReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.epicBurndownReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.epicBurndownReport == 'undefined') { GH.tpl.reports.epicBurndownReport = {}; }


GH.tpl.reports.epicBurndownReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-epic-burndown-report" class="ghx-scope-burndown-chart-svg ghx-epic-burndown-chart-svg"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="js-epic-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderChartBody';
}


GH.tpl.reports.epicBurndownReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2>' + ((opt_data.hasNoEpic) ? '<p>' + soy.$$escapeHtml('There are currently no epics on this board') + '</p>' : (opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml('There are no estimated issues in this epic.') + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: opt_data.hasNoEpic ? 'Add epics in the Epics panel of the Backlog' : 'Estimate issues in the Backlog', tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderBlankStateMessage';
}


GH.tpl.reports.epicBurndownReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work completed') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work forecast') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work remaining') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work added') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderLegend.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderLegend';
}


GH.tpl.reports.epicBurndownReport.renderDialogSprintContent = function(opt_data, opt_ignored) {
  var output = '';
  var statistic__soy35 = opt_data.estimationStatistic.name;
  output += '<div class="ghx-inline-dialog-container">' + ((opt_data.url != '') ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<strong>' + soy.$$escapeHtml(opt_data.sprint.sprintName) + '</strong>' + ((opt_data.url != '') ? '</a>' : '') + ((opt_data.sprint.formattedStartDate) ? '<p class="ghx-sprint-dialog-dates">' + soy.$$escapeHtml(opt_data.sprint.formattedStartDate) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndDate) + '</p>' : '') + '<table class="ghx-stat-table">' + GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: 'at start of sprint', estimateValue: opt_data.sprint.formattedWorkAtStart, estimationStatistic: statistic__soy35}) + ((opt_data.sprint.workAdded) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: 'added', estimateValue: opt_data.sprint.formattedWorkAdded, estimationStatistic: statistic__soy35}) : '') + ((opt_data.sprint.workRemoved) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: 'removed', estimateValue: opt_data.sprint.formattedWorkRemoved, estimationStatistic: statistic__soy35}) : '') + ((opt_data.sprint.workCompleted) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('completed') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkCompleted, estimationStatistic: statistic__soy35}) : '') + GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('remaining') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkRemaining, estimationStatistic: statistic__soy35}) + '</table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderDialogSprintContent.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderDialogSprintContent';
}


GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate = function(opt_data, opt_ignored) {
  return '<tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.estimateValue) + '</span></td><th class="ghx-stat-table-label">' + soy.$$escapeHtml(opt_data.estimateLabel) + '</th></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate';
}


GH.tpl.reports.epicBurndownReport.renderSnapshot = function(opt_data, opt_ignored) {
  var output = '';
  var unestimatedIssuesTooltipText__soy104 = soy.$$escapeHtml(AJS.format('{0}% of issues do not have an estimate ({1} of {2})',opt_data.unestimatedIssuesPercentage,opt_data.unestimatedIssuesCount,opt_data.estimatableIssuesCount)) + '<b>' + soy.$$escapeHtml('Issue types that do not include the estimation statistic are not counted.') + '</b>';
  output += '<div class="ghx-chart-snapshot">' + ((opt_data.shouldShowUnestimatedIssues) ? '<dl class="ghx-unestimated-issues ' + soy.$$escapeHtml(opt_data.unestimatedIssuesThresholdExceeded ? ' ghx-threshold-exceeded' : '') + '" data-tooltip="' + soy.$$escapeHtml(unestimatedIssuesTooltipText__soy104) + '"><dt>' + soy.$$escapeHtml(opt_data.unestimatedIssuesPercentage) + '%</dt><dd>' + soy.$$escapeHtml('unestimated issues') + '</dd></dl>' : '') + '<dl><dt>' + soy.$$escapeHtml(AJS.format('{0} of {1}',opt_data.workCompleted,opt_data.workTotal)) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('completed ({0})',opt_data.estimationStatistic)) + '</dd></dl></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderSnapshot.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderSnapshot';
}


GH.tpl.reports.epicBurndownReport.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Viewing options') + '</h4><form  id="ghx-versionreport-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-zero-baseline" ' + ((opt_data.zeroBaseline) ? 'checked' : '') + '/><label for="js-option-zero-baseline">' + soy.$$escapeHtml('Align sprints at the base of the chart') + '</label><p class="ghx-description">' + soy.$$escapeHtml('Use this view to see trends in the scope for the epic.') + '</p></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderChartViewingOptions';
}


GH.tpl.reports.epicBurndownReport.renderEpicMetadata = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml('Epic') + '</h3><p><span class="ghx-issue-list-epic-information"><a role="button" class="ghx-epic-key-link" title="' + soy.$$escapeHtml('View epic details') + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a><span class="ghx-issue-list-epic-summary"> ' + soy.$$escapeHtml(opt_data.summary) + ' </span></span></p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderEpicMetadata.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderEpicMetadata';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReportView.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-view",["jquery","underscore","jira-agile/rapid/ui/component/chart-picker","jira-agile/rapid/ui/chart/chart-view","jira-agile/d3","jira-agile/rapid/events","jira-agile/rapid/global-events","jira-agile/tooltip","jira-agile/rapid/const/PageMode"],function(e,t,i,n,r,s,o,a,d){"use strict";function p(){new s(this)}var h,c,l,u,g,m,w,_;return o.on("pre-initialization",function(){h=GH.Layout,c=GH.Ajax,l=GH.LinkedPagesController,u=GH.RapidBoard.ViewController,g=GH.RapidViewConfig,m=GH.Reports.ScopeBurndownBySprintChart,w=GH.Reports.ScopeBurndownBySprintChartLegend,_=GH.Reports.ScopeBurndownBySprintChartHowTo}),p.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(r){this._model=r,n.getChartContentElem(!0).html(GH.tpl.reports.epicBurndownReport.renderChartBody()),n.getChartLegendD3(!0).html(GH.tpl.reports.epicBurndownReport.renderLegend()).show(),this._renderOptions(),this._epicPicker=new i("epicBurndown.selectedEpicId","There are currently no epics on this board"),e(this._epicPicker).on("selectedItemChanged",t.bind(this._handleEpicSelected,this)),this._chart=new m,this._legend=new w,this._howTo=new _,this._renderLegend(),this._renderHowTo()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,n.getChartContentElem(!0).empty(),n.getChartLegendD3(!0).empty(),e(GH).unbind(h.EVENT_DELAYED_RESIZE+".epicBurndownReport")},setEpics:function(e){this._epics=e,this._epicPicker.setItems(e),this._epicPicker.setDefaultItem(e[0])},update:function(i,r){if(r){var s=t.findWhere(this._epics,{id:i.epic.key}).linkedPagesCount;this._renderLinkedPagesTrigger(i.epic.key,s)}this._epicPicker.setSelectedItem(i.epic.key,!0),this._epicPicker.render(n.getChartSelector(!0)),this._chart.data(i),this._renderChart(),this._renderSnapshot(i),this._renderEpicMetadata(i.epic),this._firstRender?(h.bindDelayedWindowResize(),e(GH).bind(h.EVENT_DELAYED_RESIZE+".epicBurndownReport",t.bind(this._handleWindowResized,this))):n.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){this._renderTable(e)},showBlankState:function(t,i){var r=e(GH.tpl.reports.epicBurndownReport.renderBlankStateMessage({planModeUrl:c.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+g.currentData.data.id+"&view=planning"+(t?"&epics=visible":""),hasNoEpic:t,hasNoEstimatedStories:i}));r.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),t&&GH.PlanController.setEpicsColumnVisible(!0),u.setMode(d.PLAN)}),n.showBlankStateMessage(r)},hideBlankState:function(){n.hideBlankStateMessage()},showSpinner:function(){n.showSpinner()},hideSpinner:function(){n.hideSpinner()},_renderSnapshot:function(t){var i=30,n=t.snapshot.estimatableIssueCount-t.snapshot.estimatedIssueCount,r=t.snapshot.estimatableIssueCount>0?Math.round(n/t.snapshot.estimatableIssueCount*100):0,s=0===t.snapshot.issueCount?"":GH.tpl.reports.epicBurndownReport.renderSnapshot({estimatableIssuesCount:t.snapshot.estimatableIssueCount,unestimatedIssuesCount:n,unestimatedIssuesPercentage:r,unestimatedIssuesThresholdExceeded:r>i,workCompleted:t.estimationStatistic.formatter.formatFull(t.snapshot.workCompleted),workTotal:t.estimationStatistic.formatter.formatFull(t.snapshot.workCompleted+t.snapshot.workRemaining),estimationStatistic:t.estimationStatistic.name,shouldShowUnestimatedIssues:"issueCount"!==t.estimationStatistic.typeId});e("#ghx-chart-snapshot").html(s),a.tipsify({selector:"#ghx-chart-snapshot .ghx-unestimated-issues",html:!0,className:"ghx-tipsy-left"})},_renderEpicMetadata:function(t){e(".js-epic-metadata").html(GH.tpl.reports.epicBurndownReport.renderEpicMetadata(t))},_renderLinkedPagesTrigger:function(t,i){var n=GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount:i,title:"Create and view pages linked to this epic"}),r=e("#ghx-chart-header-primary .ghx-linked-pages-trigger");r.remove(),r=e(n),e("#ghx-chart-selector").after(r),l.initDialogTrigger(l.EPIC,d.REPORT,t,r)},_renderTable:function(e){n.getChartContentElem(!0).find(".ghx-report-issue-list").html(GH.tpl.reports.scopeBurndownBySprint.renderIssueList(t.extend({emptySprintMessage:"No issues completed this sprint for current epic."},e)))},_renderLegend:function(){this._legend(r.select(".ghx-chart-legend"))},_renderHowTo:function(){this._howTo(r.select(".ghx-group-how"))},_renderChart:function(){this._chart(r.select("#ghx-epic-burndown-report"))},_renderOptions:function(){var t=this;e("#ghx-chart-options").html(GH.tpl.reports.epicBurndownReport.renderChartViewingOptions(this._model)),e("#js-option-zero-baseline").on("change",function(){t.trigger("optionChanged",{zeroBaseline:this.checked})})},_handleEpicSelected:function(e,t){this.trigger("epicSelected",t.item)},_handleWindowResized:function(){this._renderChart()}},p});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReportController.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller",["require"],function(e){"use strict";function i(){}var t,a,r,n,o,s=e("underscore"),d=e("jira-agile/rapid/analytics-tracker"),l=e("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service"),p=e("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service"),c=e("jira-agile/rapid/global-events"),u=new l,h=new p;return c.on("pre-initialization",function(){t=GH.PromiseKeeper,a=GH.RapidBoard.State,r=GH.Reports.EpicBurndownReportView,n=GH.EpicsDataService,o=new n}),i.id="epicBurndown",i.prototype={SETTINGS_KEY:"chart.config.epicBurndown",displayed:!1,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(e){this._rapidViewData=e||{}},show:function(){this.displayed=!0,this._tracker=new d("gh.report.epicburndown"),a.pushState();var e=this._view=new r;e.on("epicSelected",s.bind(function(e){this._model.epicKey=e.id,this.update()},this)).on("optionChanged",s.bind(function(e){this._model.zeroBaseline=e.zeroBaseline,this._tracker.trigger("zeroBaseline."+(e.zeroBaseline?"on":"off")),this.update()},this)),e.init(this._model),e.showSpinner(),this._tracker.trigger("show"),this._dataPromiseKeeper=new t;var i=o.getSimpleEpics(this._rapidViewData.id);this._dataPromiseKeeper.add(i).done(s.bind(function(i){i.length?(i.reverse(),null!=this._model.epicKey&&o.epicExists(i,this._model.epicKey)||(this._model.epicKey=i[0].id),e.setEpics(i),this.update(!0)):(this._model.epicKey=null,e.showBlankState(!0,!0),this._tracker.trigger("blank"),e.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),u.clearCache(),h.clearCache()},update:function(e){if(e?a.replaceState():a.pushState(),this.saveState(),null!=this._model.epicKey){var i=this;i._view.showSpinner();var t=u.get(i._rapidViewData.id,i._model.epicKey,{zeroBaseline:i._model.zeroBaseline});return i._dataPromiseKeeper.add(t).done(function(e){0===e.snapshot.estimatedIssueCount?(i._view.showBlankState(!1,!0),i._tracker.trigger("blank")):i._view.hideBlankState(),i._view.update(e,o.supportsPages());var t=h.get(i._rapidViewData.id,i._model.epicKey,e);i._dataPromiseKeeper.add(t).done(function(e){i._view.updateTable(e)})}).always(function(e){"abort"!==e&&i._view.hideSpinner()})}},saveState:function(){a.setBoardSetting(this.SETTINGS_KEY,this.getNormalizedFromInternal())},loadState:function(){this._model=a.getBoardSetting(a.getRapidViewId(),this.SETTINGS_KEY,{epicKey:null,zeroBaseline:!1})},isApplicable:function(e){return e.sprintSupportEnabled&&!a.isAgilityBoard()},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),s.defaults(s.clone(this._model),{zeroBaseline:!1})},updateInternalFromNormalized:function(e){this._model=e},toUrl:function(e){return{epic:null!==e.epicKey?e.epicKey:void 0,zeroBaseline:!!e.zeroBaseline||void 0}},getNormalizedFromUrl:function(e){return{epicKey:e.epic||null,zeroBaseline:"true"===e.zeroBaseline}}},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service",["require"],function(t){"use strict";function a(t){var a={url:"/rapid/charts/scopechangeburndownchart",data:t};return i.get(a,"sprintburnupchart")}function r(t){return u.getBurnupModelFromScopeBurndownModel(t)}function e(){}var i,n,u,s=t("underscore"),o=t("jira-agile/rapid/global-events");return o.on("pre-initialization",function(){i=GH.Ajax,n=GH.RapidViewConfig,u=GH.Reports.SprintBurnupTransformer}),e.prototype={get:function(t,a,e){return this._getData(t,a,e).andThen(function(t){return t.rapidViewId=n.currentData.id,r(t)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:r,_getData:function(t,r,e){var i={rapidViewId:t,sprintId:r,statisticFieldId:e};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&s.isEqual(this._dataRequestParams,i)||(this._dataRequestParams=i,this._dataPromise=a(i)),this._dataPromise}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupReport.soy' */
// This file was automatically generated from BurnupReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.burnupReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.burnupReport == 'undefined') { GH.tpl.reports.burnupReport = {}; }


GH.tpl.reports.burnupReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-sprint-burnup-report" class="ghx-burnup-chart ghx-svg-chart" /></div><div id="ghx-chart-options" class="aui-group"></div><div class="ghx-version-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.burnupReport.renderChartBody';
}


GH.tpl.reports.burnupReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2>' + ((opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml('There are no estimated issues in this sprint.') + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: 'Estimate issues in the Backlog', tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.burnupReport.renderBlankStateMessage';
}


GH.tpl.reports.burnupReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Work scope') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Scope projection') + '</li></ul></div><div><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Completed Work') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Guideline') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderLegend.soyTemplateName = 'GH.tpl.reports.burnupReport.renderLegend';
}


GH.tpl.reports.burnupReport.renderDialogIssueContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><b>' + GH.tpl.reports.burnupReport.renderIssueKeyLink({key: opt_data.issueKey}) + '</b> ' + soy.$$escapeHtml(opt_data.issueSummary) + '<h5>' + soy.$$escapeHtml(opt_data.eventDescription) + '</h5><div class="aui-group"><div class="aui-item ghx-burnup-card-label">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.fromValue) + ' \u2192 ' + soy.$$escapeHtml(opt_data.toValue) + '</div></div><h5>' + soy.$$escapeHtml('Effect on sprint') + '</h5><div class="aui-group"><div class="aui-item ghx-burnup-card-label">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.totalFromValue) + ' \u2192 ' + soy.$$escapeHtml(opt_data.totalToValue) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderDialogIssueContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderDialogIssueContent';
}


GH.tpl.reports.burnupReport.renderDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><div class="aui-group"><div class="aui-item">\u2211 ' + soy.$$escapeHtml(opt_data.statistic) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.totalValue) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderDialogContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderDialogContent';
}


GH.tpl.reports.burnupReport.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><p><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span>' + soy.$$escapeHtml(opt_data.indicatedTime) + '</p>' + ((opt_data.scope != null || opt_data.completedWork != null) ? '<table class="aui-table">' + ((opt_data.scope != null) ? GH.tpl.reports.burnupReport.renderScrubberDialogItem({label: 'Work scope', value: opt_data.scope}) : '') + ((opt_data.completedWork != null) ? GH.tpl.reports.burnupReport.renderScrubberDialogItem({label: 'Completed Work', value: opt_data.completedWork}) : '') + '</table>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderScrubberDialogContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderScrubberDialogContent';
}


GH.tpl.reports.burnupReport.renderScrubberDialogItem = function(opt_data, opt_ignored) {
  return '<tr><th>' + soy.$$escapeHtml(opt_data.label) + '</th><td>' + soy.$$escapeHtml(opt_data.value) + '</td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderScrubberDialogItem.soyTemplateName = 'GH.tpl.reports.burnupReport.renderScrubberDialogItem';
}


GH.tpl.reports.burnupReport.renderChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-hover-highlight"><thead><tr><th id="series-date">' + soy.$$escapeHtml('Date') + '</th><th id="series-event-type">' + soy.$$escapeHtml('Event Type') + '</th><th id="series-issue">' + soy.$$escapeHtml('Issue') + '</th><th id="series-completed-work" class="ghx-minimal">' + soy.$$escapeHtml('Completed Work') + '</th><th id="series-scope" class="ghx-minimal">' + soy.$$escapeHtml('Work scope') + '</th></tr></thead><tbody>';
  var rowList96 = opt_data.rows;
  var rowListLen96 = rowList96.length;
  for (var rowIndex96 = 0; rowIndex96 < rowListLen96; rowIndex96++) {
    var rowData96 = rowList96[rowIndex96];
    output += '<tr><td headers="series-date">' + ((rowData96.dateString) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData96.dateString) + '</div>' : '') + '</td><td headers="series-event-type">' + ((rowData96.eventString) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData96.eventString) + '</div>' : '') + '</td><td headers="series-issue">';
    if (rowData96.issues) {
      var issueList112 = rowData96.issues;
      var issueListLen112 = issueList112.length;
      for (var issueIndex112 = 0; issueIndex112 < issueListLen112; issueIndex112++) {
        var issueData112 = issueList112[issueIndex112];
        output += GH.tpl.reports.burnupReport.renderIssueKeyLink({key: issueData112.key}) + ' ' + soy.$$escapeHtml(issueData112.summary) + ' <br />';
      }
    }
    output += '</td><td headers="series-completed-work"><div class="ghx-nowrap">' + ((rowData96.doneChange) ? '<span class=\'ghx-previous-value\'>' + soy.$$escapeHtml(rowData96.doneChange.from) + ' \u2192 </span>' + soy.$$escapeHtml(rowData96.doneChange.to) : soy.$$escapeHtml(rowData96.doneValue)) + '</div></td><td headers="series-scope"><div class="ghx-nowrap">' + ((rowData96.scopeChange) ? '<span class=\'ghx-previous-value\'>' + soy.$$escapeHtml(rowData96.scopeChange.from) + ' \u2192 </span>' + soy.$$escapeHtml(rowData96.scopeChange.to) : soy.$$escapeHtml(rowData96.scopeValue)) + '</div></td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderChartTable.soyTemplateName = 'GH.tpl.reports.burnupReport.renderChartTable';
}


GH.tpl.reports.burnupReport.renderIssueKeyLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderIssueKeyLink.soyTemplateName = 'GH.tpl.reports.burnupReport.renderIssueKeyLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupReportView.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view",["require"],function(e){function t(){new p(this)}var i,n,r,a,s,o=e("jquery"),h=e("underscore"),d=e("jira-agile/d3"),p=e("jira-agile/rapid/events"),l=e("jira-agile/rapid/global-events"),u=e("jira-agile/rapid/ui/chart/chart-view"),c=e("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart"),g=e("jira-agile/rapid/const/PageMode"),m=GH.RapidBoard;return l.on("pre-initialization",function(){a=GH.Reports.BurnupChartLegend,s=GH.Reports.ScopeBurndownBySprintChartHowTo,i=GH.Layout,n=GH.Ajax,r=GH.RapidViewConfig}),t.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(e){this._model=e,u.getChartContentElem(!0).html(GH.tpl.reports.burnupReport.renderChartBody()),u.getChartLegendD3(!0).html(GH.tpl.reports.burnupReport.renderLegend()).show();var t=r.currentData.data.id;this._sprintPicker=new GH.ChartPicker("sprintBurnup.selectedSprintId"),o(this._sprintPicker).on("selectedItemChanged",h.bind(this._handleSprintSelected,this)),this._shouldShowEstimatePicker()&&(this._estimatePicker=new GH.EstimatePicker("sprintBurnup.selectedEstimate"),this._estimatePicker.load(t,this._handleEstimateSelected.bind(this))),this._chart=new c,this._legend=a(),this._howTo=s()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,this._model=null,u.getChartContentElem(!0).empty(),u.getChartLegendD3(!0).empty(),o(GH).unbind(i.EVENT_DELAYED_RESIZE+".sprintBurnupReport")},setSprints:function(e){this._sprintPicker.setItems(e),this._sprintPicker.setDefaultItem(e[0])},update:function(e){this._sprintPicker.setSelectedItem(e.sprintId,!0),this._sprintPicker.render(u.getChartSelector(!0)),this._shouldShowEstimatePicker()&&(this._estimatePicker.setSelectedItem(e.statisticField.id,!0),this._estimatePicker.render(u.getChartControls(!0))),this._renderLegend(),this._renderHowTo(),this._renderChart(e),this.data=e,this._firstRender?(i.bindDelayedWindowResize(),o(GH).bind(i.EVENT_DELAYED_RESIZE+".sprintBurnupReport",h.bind(this._handleWindowResized,this))):u.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){if(!this._blankState){var t=this.getTableRows(e.chartData),i=AJS.$(GH.tpl.reports.burnupReport.renderChartTable({rows:t}));u.getChartContentElem(!0).find(".ghx-report-issue-list").empty().append(i)}},showBlankState:function(e){this._blankState=!0;var t=o(GH.tpl.reports.burnupReport.renderBlankStateMessage({planModeUrl:n.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+r.currentData.data.id+"&view=planning&versions=visible",hasNoEstimatedStories:e}));t.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),m.ViewController.setMode(g.PLAN)}),this._chart.hide(d.select("#ghx-sprint-burnup-report")),u.getChartLegendD3(!0).hide(),u.getChartContentElem(!0).find(".ghx-report-issue-list").hide(),u.showBlankStateMessage(t)},hideBlankState:function(){this._blankState=!1,u.hideBlankStateMessage(),u.getChartLegendD3(!0).show(),u.getChartContentElem(!0).find(".ghx-report-issue-list").show()},showSpinner:function(){u.showSpinner()},hideSpinner:function(){u.hideSpinner()},getTableRows:function(e){function t(e,t){return e.map(function(e){return{key:e,summary:t[e]}})}var i=e.scope[0].value,n=0,r=e.scope.concat(e.work).sort(function(e,t){return e.timestamp>t.timestamp?1:e.timestamp===t.timestamp?0:-1}).map(function(r){var a={timestamp:r.timestamp,dateString:e.formatDate(r.timestamp),issues:t([r.change.key],e.issueToSummary),event:r.change.type,eventString:e.formatEventType(r.change.type)},s=parseFloat(r.change.toValue)-parseFloat(r.change.fromValue)||0;return"done"===r.change.line&&(n+=s,0===s?a.doneValue=e.formatStatistic(n):a.doneChange={from:e.formatStatistic(n-s),to:e.formatStatistic(n)},a.scopeValue=e.formatStatistic(i)),"scope"===r.change.line&&(i+=s,0===s?a.scopeValue=e.formatStatistic(i):a.scopeChange={from:e.formatStatistic(i-s),to:e.formatStatistic(i)},a.doneValue=e.formatStatistic(n)),a});return r=r.reduce(function(e,t){var i=e.pop();return i?i.timestamp!==t.timestamp||i.event!==t.event||i.issueKey!==t.issueKey||i.doneChange&&t.doneChange||i.scopeChange&&t.scopeChange?(e.push(i),e.push(t),e):(i.doneChange||(i.doneChange=t.doneChange),i.scopeChange||(i.scopeChange=t.scopeChange),e.push(i),e):(e.push(t),e)},[]),r[0].issues=t(e.startKeys,e.issueToSummary),e.sprintCompleted?r[r.length-1].issues=t(e.endKeys,e.issueToSummary):r.pop(),r},_shouldShowEstimatePicker:function(){return!m.State.isAgilityBoard()},_renderLegend:function(){this._blankState||this._legend(d.select(".ghx-chart-legend"))},_renderHowTo:function(){this._blankState||this._howTo(d.select(".ghx-group-how"))},_renderChart:function(e){if(!this._blankState){var t=d.select("#ghx-sprint-burnup-report");t.empty()||(u.getChartGroup().find(".ghx-sprint-goal").remove(),u.getChartGroup().prepend(GH.tpl.board.x.renderSprintGoal({goal:this._sprintPicker.getSelectedItem().goal})),this._chart.show(e,t))}},_handleSprintSelected:function(e,t){this.trigger("sprintSelected",t.item.id)},_handleEstimateSelected:function(e){this.trigger("estimateSelected",e)},_handleWindowResized:function(){this._renderChart(this.data)}},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupReportController.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller",["require"],function(t){function e(){}var i,r,n,a,s=t("underscore"),d=t("jira-agile/rapid/global-events"),o=t("jira-agile/rapid/analytics-tracker"),l=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view"),p=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service"),h=new p,u=GH.RapidBoard;return d.on("pre-initialization",function(){i=GH.PromiseKeeper,r=GH.RapidBoard.State,n=new GH.VersionsDataService,a=new GH.SprintsDataService}),e.prototype={SETTINGS_KEY:"chart.config.sprintBurnup",displayed:!1,_sprints:null,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(t){this._rapidViewData=t||{}},show:function(){this.displayed=!0,this._tracker=new o("gh.report.burnup"),u.State.pushState();var t=this._view=new l;t.on("sprintSelected",s.bind(function(t){this._model.sprint=t,this._tracker.trigger("sprintChanged"),this.update()},this)).on("estimateSelected",s.bind(function(t){this._model.estimate=t,this._tracker.trigger("estimateChanged"),this.update()},this)).on("optionChanged",s.bind(function(t){this._model.zeroBaseline=t.zeroBaseline,this.update()},this)),t.init(this._model),t.showSpinner(),this._tracker.trigger("show"),this._dataPromiseKeeper=new i;var e=a.getSimpleSprints(this._rapidViewData.id);this._dataPromiseKeeper.add(e).done(s.bind(function(e){this._model||(this._model={}),e.length?(e.reverse(),null==this._model.sprint&&(this._model.sprint=e[0].id),this._sprints=e,t.setSprints(e),this.update(!0)):(this._model.sprint=null,t.showBlankState(!0,!0),this._tracker.trigger("blank"),t.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),h.clearCache()},update:function(t){var e=this;if(this.isSprintSelectable(e._model.sprint)||(e._model.sprint=e._sprints[0].id),t?u.State.replaceState():u.State.pushState(),null!=this._model.sprint){this.saveState(),e._view.showSpinner();var i=h.get(e._rapidViewData.id,e._model.sprint,e._model.estimate);return e._dataPromiseKeeper.add(i).done(function(t){0===t.chartData.estimatedIssueEvents?(e._view.showBlankState(!0),e._tracker.trigger("blank")):e._view.hideBlankState(),t.chartData.sprintId=e._model.sprint,e._view.setSprints(e._sprints),e._view.update(t.chartData),e._view.updateTable(t)}).always(function(t){"abort"!==t&&e._view.hideSpinner()})}},saveState:function(){u.State.setBoardSetting(this.SETTINGS_KEY,this._model)},loadState:function(){this._model=u.State.getBoardSetting(u.State.getRapidViewId(),this.SETTINGS_KEY)},isApplicable:function(t){return t.sprintSupportEnabled||r.isAgilityBoard()},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),s.defaults(s.clone(this._model),{})},updateInternalFromNormalized:function(t){this._model||this.loadState(),this._model=s.defaults(s.clone(t),this._model)},toUrl:function(t){return{sprint:null!==t.sprint?t.sprint:void 0,estimate:null!==t.estimate?t.estimate:void 0}},isSprintSelectable:function(t){return this._sprints.filter(function(e){return e.id===t}).length>0},getNormalizedFromUrl:function(t){return{sprint:isNaN(t.sprint)?null:+t.sprint,estimate:t.estimate}}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChartDialog.js' */
GH.Reports=GH.Reports||{},GH.Reports.BurnupChartDialog=function(){function e(e,t){var a=e.formatStatistic;if(t.change.key){var n=t.change.toValue-t.change.fromValue;return GH.tpl.reports.burnupReport.renderDialogIssueContent({issueKey:t.change.key,issueSummary:e.issueToSummary[t.change.key],fromValue:a(t.change.fromValue),toValue:a(t.change.toValue),totalFromValue:a(t.value-n),totalToValue:a(t.value),eventDescription:e.formatEventType(t.change.type)})}return GH.tpl.reports.burnupReport.renderDialogContent({totalValue:t.value,statistic:e.statisticField.name})}function t(t,a,o){var l=d3.select(t);return l.classed("active",!0),n=GH.SideInlineDialog.create(i,t,function(t,n,i){t.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),t.html(e(a,o)),i()},{addActiveClass:!1,container:r,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,hideCallback:function(){l.classed("active",!1)}}),n.show(),n}function a(){return!!n&&n.is(":visible")}var n,i="sprint-burnup-issue",r="#ghx-report-scrollarea > .aui-page-panel";return GH.InlineDialog.preventCloseOnClick(i),{show:t,hide:function(){n&&n.hide()},isVisible:a}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChartScrubberDialog.js' */
GH.Reports.BurnupChartScrubberDialog=function(){function e(e){b=e,d=GH.SideInlineDialog.create(h,e,function(e,i,n){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog ghx-scrubber-dialog"),e.addClass("ghx-scrubber-contents"),e.next("#arrow-"+h).addClass("ghx-arrow-scrubber-dialog"),n()},p),t()}function i(){g=!1}function n(){g=!0}function r(){!GH.Reports.BurnupChartDialog.isVisible()&&g&&d.show()}function t(){GH.InlineDialog.registerInlineDialogHacks(h,{validateClickToCloseFn:function(){return!1}})}function o(){d&&d.hide()}function s(e){l(),a(e),d.refresh()}function a(e){var i;e.time&&(i=GH.tpl.reports.burnupReport.renderScrubberDialogContent({indicatedTime:e.time,scope:e.scope,completedWork:e.completedWork})),c().find(".ghx-scrubber-contents").html(i)}function c(){return AJS.$("#inline-dialog-"+h)}function l(){u()||r()}function u(){return!!d&&d.is(":visible")}var d,b,g=!0,h="scrubber-dialog",f="#ghx-chart-group",p={container:f,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,width:230,closeOthers:!1,persistent:!0,addActiveClass:!1};return{init:e,show:r,hide:o,isVisible:u,refresh:s,disable:i,enable:n}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/chart/v2/burnup/BurnupChartScrubber.js' */
GH.Reports.BurnupChartScrubber=function(){function r(){GH.Reports.BurnupChartScrubberDialog.disable()}function e(){GH.Reports.BurnupChartScrubberDialog.enable()}function t(){GH.Reports.BurnupChartScrubberDialog.show()}function n(){GH.Reports.BurnupChartScrubberDialog.hide()}function i(){s.hideScrubber()}function u(){b.cancelDrag()}function a(r,e){for(var t=r.length-1;t>=0;t--)if(r[t].timestamp<=e)return r[t].value;return r[0].value}function o(){var r=this.mouseCoordinates(),e=this.xScale().invert,t=this.data();if(r){var n=e(r[0]);GH.Reports.BurnupChartScrubberDialog.refresh({time:t.formatDate(n),scope:t.formatStatistic(a(this.data().scope,n)),completedWork:t.formatStatistic(a(this.data().work,n))})}}function c(){var r=this.selection();s.parent(this),s.interactiveLayer(this),s(r),b.parent(this),b.interactiveLayer(this),b(r),GH.Reports.BurnupChartScrubberDialog.init(s.elements()[0]);var e=this;this.mouseover(function(){t.call(e)}),this.mousemove("ccscrubber",function(){o.call(e)}),this.mouseout(function(){n.call(e)})}var s=c3.scrubber().elementClass("ghx-scrubber").shouldHideScrubber(function(){return GH.Reports.BurnupChartDialog.isVisible()}),b=c3.brush().elementClass("ghx-chart-brush").onDrag(function(){GH.Reports.BurnupChartDialog.hide()});return c3.component().extend(_.once(c)).extend(u).extend({hideScrubber:i,disableScrubber:r,enableScrubber:e})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.js' */
!function(t){t.color={},t.color.make=function(e,i,n,o){var a={};return a.r=e||0,a.g=i||0,a.b=n||0,a.a=null!=o?o:1,a.add=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]+=e;return a.normalize()},a.scale=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]*=e;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function t(t,e,i){return e<t?t:e>i?i:e}return a.r=t(0,parseInt(a.r),255),a.g=t(0,parseInt(a.g),255),a.b=t(0,parseInt(a.b),255),a.a=t(0,a.a,1),a},a.clone=function(){return t.color.make(a.r,a.b,a.g,a.a)},a.normalize()},t.color.extract=function(e,i){var n;do{if(n=e.css(i).toLowerCase(),""!=n&&"transparent"!=n)break;e=e.parent()}while(!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),t.color.parse(n)},t.color.parse=function(i){var n,o=t.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return o(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return o(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return o(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return o(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return o(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return o(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var a=t.trim(i).toLowerCase();return"transparent"==a?o(255,255,255,0):(n=e[a]||[0,0,0],o(n[0],n[1],n[2]))};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function e(e,o,a,r){function l(t,e){e=[kt].concat(e);for(var i=0;i<t.length;++i)t[i].apply(this,e)}function s(){for(var e=0;e<r.length;++e){var i=r[e];i.init(kt),i.options&&t.extend(!0,rt,i.options)}}function c(e){var i;for(t.extend(!0,rt,e),null==rt.xaxis.color&&(rt.xaxis.color=rt.grid.color),null==rt.yaxis.color&&(rt.yaxis.color=rt.grid.color),null==rt.xaxis.tickColor&&(rt.xaxis.tickColor=rt.grid.tickColor),null==rt.yaxis.tickColor&&(rt.yaxis.tickColor=rt.grid.tickColor),null==rt.grid.borderColor&&(rt.grid.borderColor=rt.grid.color),null==rt.grid.tickColor&&(rt.grid.tickColor=t.color.parse(rt.grid.color).scale("a",.22).toString()),i=0;i<Math.max(1,rt.xaxes.length);++i)rt.xaxes[i]=t.extend(!0,{},rt.xaxis,rt.xaxes[i]);for(i=0;i<Math.max(1,rt.yaxes.length);++i)rt.yaxes[i]=t.extend(!0,{},rt.yaxis,rt.yaxes[i]);for(rt.xaxis.noTicks&&null==rt.xaxis.ticks&&(rt.xaxis.ticks=rt.xaxis.noTicks),rt.yaxis.noTicks&&null==rt.yaxis.ticks&&(rt.yaxis.ticks=rt.yaxis.noTicks),rt.x2axis&&(rt.xaxes[1]=t.extend(!0,{},rt.xaxis,rt.x2axis),rt.xaxes[1].position="top"),rt.y2axis&&(rt.yaxes[1]=t.extend(!0,{},rt.yaxis,rt.y2axis),rt.yaxes[1].position="right"),rt.grid.coloredAreas&&(rt.grid.markings=rt.grid.coloredAreas),rt.grid.coloredAreasColor&&(rt.grid.markingsColor=rt.grid.coloredAreasColor),rt.lines&&t.extend(!0,rt.series.lines,rt.lines),rt.points&&t.extend(!0,rt.series.points,rt.points),rt.bars&&t.extend(!0,rt.series.bars,rt.bars),null!=rt.shadowSize&&(rt.series.shadowSize=rt.shadowSize),i=0;i<rt.xaxes.length;++i)x(ht,i+1).options=rt.xaxes[i];for(i=0;i<rt.yaxes.length;++i)x(mt,i+1).options=rt.yaxes[i];for(var n in bt)rt.hooks[n]&&rt.hooks[n].length&&(bt[n]=bt[n].concat(rt.hooks[n]));l(bt.processOptions,[rt])}function u(t){at=f(t),g(),v()}function f(e){for(var i=[],n=0;n<e.length;++n){var o=t.extend(!0,{},rt.series);null!=e[n].data?(o.data=e[n].data,delete e[n].data,t.extend(!0,o,e[n]),e[n].data=o.data):o.data=e[n],i.push(o)}return i}function h(t,e){var i=t[e+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function m(){return t.grep(ht.concat(mt),function(t){return t})}function d(t){var e,i,n={};for(e=0;e<ht.length;++e)i=ht[e],i&&i.used&&(n["x"+i.n]=i.c2p(t.left));for(e=0;e<mt.length;++e)i=mt[e],i&&i.used&&(n["y"+i.n]=i.c2p(t.top));return void 0!==n.x1&&(n.x=n.x1),void 0!==n.y1&&(n.y=n.y1),n}function p(t){var e,i,n,o={};for(e=0;e<ht.length;++e)if(i=ht[e],i&&i.used&&(n="x"+i.n,null==t[n]&&1==i.n&&(n="x"),null!=t[n])){o.left=i.p2c(t[n]);break}for(e=0;e<mt.length;++e)if(i=mt[e],i&&i.used&&(n="y"+i.n,null==t[n]&&1==i.n&&(n="y"),null!=t[n])){o.top=i.p2c(t[n]);break}return o}function x(e,i){return e[i-1]||(e[i-1]={n:i,direction:e==ht?"x":"y",options:t.extend(!0,{},e==ht?rt.xaxis:rt.yaxis)}),e[i-1]}function g(){var e,i=at.length,n=[],o=[];for(e=0;e<at.length;++e){var a=at[e].color;null!=a&&(--i,"number"==typeof a?o.push(a):n.push(t.color.parse(at[e].color)))}for(e=0;e<o.length;++e)i=Math.max(i,o[e]+1);var r=[],l=0;for(e=0;r.length<i;){var s;s=rt.colors.length==e?t.color.make(100,100,100):t.color.parse(rt.colors[e]);var c=l%2==1?-1:1;s.scale("rgb",1+c*Math.ceil(l/2)*.2),r.push(s),++e,e>=rt.colors.length&&(e=0,++l)}var u,f=0;for(e=0;e<at.length;++e){if(u=at[e],null==u.color?(u.color=r[f].toString(),++f):"number"==typeof u.color&&(u.color=r[u.color].toString()),null==u.lines.show){var m,d=!0;for(m in u)if(u[m]&&u[m].show){d=!1;break}d&&(u.lines.show=!0)}u.xaxis=x(ht,h(u,"x")),u.yaxis=x(mt,h(u,"y"))}}function v(){function e(t,e,i){e<t.datamin&&e!=-x&&(t.datamin=e),i>t.datamax&&i!=x&&(t.datamax=i)}var i,n,o,a,r,s,c,u,f,h,d=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,x=Number.MAX_VALUE;for(t.each(m(),function(t,e){e.datamin=d,e.datamax=p,e.used=!1}),i=0;i<at.length;++i)r=at[i],r.datapoints={points:[]},l(bt.processRawData,[r,r.data,r.datapoints]);for(i=0;i<at.length;++i){r=at[i];var g=r.data,v=r.datapoints.format;if(v||(v=[],v.push({x:!0,number:!0,required:!0}),v.push({y:!0,number:!0,required:!0}),(r.bars.show||r.lines.show&&r.lines.fill)&&(v.push({y:!0,number:!0,required:!1,defaultValue:0}),r.bars.horizontal&&(delete v[v.length-1].y,v[v.length-1].x=!0)),r.datapoints.format=v),null==r.datapoints.pointsize)for(r.datapoints.pointsize=v.length,c=r.datapoints.pointsize,s=r.datapoints.points,insertSteps=r.lines.show&&r.lines.steps,r.xaxis.used=r.yaxis.used=!0,n=o=0;n<g.length;++n,o+=c){h=g[n];var b=null==h;if(!b)for(a=0;a<c;++a)u=h[a],f=v[a],f&&(f.number&&null!=u&&(u=+u,isNaN(u)?u=null:u==1/0?u=x:u==-(1/0)&&(u=-x)),null==u&&(f.required&&(b=!0),null!=f.defaultValue&&(u=f.defaultValue))),s[o+a]=u;if(b)for(a=0;a<c;++a)u=s[o+a],null!=u&&(f=v[a],f.x&&e(r.xaxis,u,u),f.y&&e(r.yaxis,u,u)),s[o+a]=null;else if(insertSteps&&o>0&&null!=s[o-c]&&s[o-c]!=s[o]&&s[o-c+1]!=s[o+1]){for(a=0;a<c;++a)s[o+c+a]=s[o+a];s[o+1]=s[o-c+1],o+=c}}}for(i=0;i<at.length;++i)r=at[i],l(bt.processDatapoints,[r,r.datapoints]);for(i=0;i<at.length;++i){r=at[i],s=r.datapoints.points,c=r.datapoints.pointsize;var k=d,y=d,T=p,M=p;for(n=0;n<s.length;n+=c)if(null!=s[n])for(a=0;a<c;++a)u=s[n+a],f=v[a],f&&u!=x&&u!=-x&&(f.x&&(u<k&&(k=u),u>T&&(T=u)),f.y&&(u<y&&(y=u),u>M&&(M=u)));if(r.bars.show){void 0==r.bars.barLeft&&(r.bars.barLeft="left"==r.bars.align?0:-r.bars.barWidth/2);var w=r.bars.barLeft;r.bars.horizontal?(y+=w,M+=w+r.bars.barWidth):(k+=w,T+=w+r.bars.barWidth)}e(r.xaxis,k,T),e(r.yaxis,y,M)}t.each(m(),function(t,e){e.datamin==d&&(e.datamin=null),e.datamax==p&&(e.datamax=null)})}function b(i,n){var o=document.createElement("canvas");return o.className=n,o.width=pt,o.height=xt,i||t(o).css({position:"absolute",left:0,top:0}),t(o).appendTo(e),o.getContext||(o=window.G_vmlCanvasManager.initElement(o)),o.getContext("2d").save(),o}function k(){if(pt=e.width(),xt=e.height(),pt<=0||xt<=0)throw"Invalid dimensions for plot, width = "+pt+", height = "+xt}function y(t){t.width!=pt&&(t.width=pt),t.height!=xt&&(t.height=xt);var e=t.getContext("2d");e.restore(),e.save()}function T(){var i,n=e.children("canvas.base"),o=e.children("canvas.overlay");0==n.length||0==o?(e.html(""),e.css({padding:0}),"static"==e.css("position")&&e.css("position","relative"),k(),lt=b(!0,"base"),st=b(!1,"overlay"),i=!1):(lt=n.get(0),st=o.get(0),i=!0),ut=lt.getContext("2d"),ft=st.getContext("2d"),ct=t([st,lt]),i&&(e.data("plot").shutdown(),kt.resize(),ft.clearRect(0,0,pt,xt),ct.unbind(),e.children().not([lt,st]).remove()),e.data("plot",kt)}function M(){rt.grid.hoverable&&(ct.mousemove(G),ct.mouseleave(_)),rt.grid.clickable&&ct.click(J),l(bt.bindEvents,[ct])}function w(){Tt&&clearTimeout(Tt),ct.unbind("mousemove",G),ct.unbind("mouseleave",_),ct.unbind("click",J),l(bt.shutdown,[ct])}function C(t){function e(t){return t}var i,n,o=t.options.transform||e,a=t.options.inverseTransform;"x"==t.direction?(i=t.scale=gt/Math.abs(o(t.max)-o(t.min)),n=Math.min(o(t.max),o(t.min))):(i=t.scale=vt/Math.abs(o(t.max)-o(t.min)),i=-i,n=Math.max(o(t.max),o(t.min))),o==e?t.p2c=function(t){return(t-n)*i}:t.p2c=function(t){return(o(t)-n)*i},a?t.c2p=function(t){return a(n+t/i)}:t.c2p=function(t){return n+t/i}}function S(i){function n(n,o){return t('<div style="position:absolute;top:-10000px;'+o+'font-size:smaller"><div class="'+i.direction+"Axis "+i.direction+i.n+'Axis">'+n.join("")+"</div></div>").appendTo(e)}var o,a,r,l=i.options,s=i.ticks||[],c=[],u=l.labelWidth,f=l.labelHeight;if("x"==i.direction){if(null==u&&(u=Math.floor(pt/(s.length>0?s.length:1))),null==f){for(c=[],o=0;o<s.length;++o)a=s[o].label,a&&c.push('<div class="tickLabel" style="float:left;width:'+u+'px">'+a+"</div>");c.length>0&&(c.push('<div style="clear:left"></div>'),r=n(c,"width:10000px;"),f=r.height(),r.remove())}}else if(null==u||null==f){for(o=0;o<s.length;++o)a=s[o].label,a&&c.push('<div class="tickLabel">'+a+"</div>");c.length>0&&(r=n(c,""),null==u&&(u=r.children().width()),null==f&&(f=r.find("div.tickLabel").height()),r.remove())}null==u&&(u=0),null==f&&(f=0),i.labelWidth=u,i.labelHeight=f}function z(e){var i=e.labelWidth,n=e.labelHeight,o=e.options.position,a=e.options.tickLength,r=rt.grid.axisMargin,l=rt.grid.labelMargin,s="x"==e.direction?ht:mt,c=t.grep(s,function(t){return t&&t.options.position==o&&t.reserveSpace});t.inArray(e,c)==c.length-1&&(r=0),null==a&&(a="full");var u=t.grep(s,function(t){return t&&t.reserveSpace}),f=0==t.inArray(e,u);f||"full"!=a||(a=5),isNaN(+a)||(l+=+a),"x"==e.direction?(n+=l,"bottom"==o?(dt.bottom+=n+r,e.box={top:xt-dt.bottom,height:n}):(e.box={top:dt.top+r,height:n},dt.top+=n+r)):(i+=l,"left"==o?(e.box={left:dt.left+r,width:i},dt.left+=i+r):(dt.right+=i+r,e.box={left:pt-dt.right,width:i})),e.position=o,e.tickLength=a,e.box.padding=l,e.innermost=f}function A(t){"x"==t.direction?(t.box.left=dt.left,t.box.width=gt):(t.box.top=dt.top,t.box.height=vt)}function W(){var e,i=m();if(t.each(i,function(t,e){e.show=e.options.show,null==e.show&&(e.show=e.used),e.reserveSpace=e.show||e.options.reserveSpace,F(e)}),allocatedAxes=t.grep(i,function(t){return t.reserveSpace}),dt.left=dt.right=dt.top=dt.bottom=0,rt.grid.show){for(t.each(allocatedAxes,function(t,e){I(e),U(e),N(e,e.ticks),S(e)}),e=allocatedAxes.length-1;e>=0;--e)z(allocatedAxes[e]);var n=rt.grid.minBorderMargin;if(null==n)for(n=0,e=0;e<at.length;++e)n=Math.max(n,at[e].points.radius+at[e].points.lineWidth/2);for(var o in dt)dt[o]+=rt.grid.borderWidth,dt[o]=Math.max(n,dt[o])}gt=pt-dt.left-dt.right,vt=xt-dt.bottom-dt.top,t.each(i,function(t,e){C(e)}),rt.grid.show&&(t.each(allocatedAxes,function(t,e){A(e)}),O()),B()}function F(t){var e=t.options,i=+(null!=e.min?e.min:t.datamin),n=+(null!=e.max?e.max:t.datamax),o=n-i;if(0==o){var a=0==n?1:.01;null==e.min&&(i-=a),null!=e.max&&null==e.min||(n+=a)}else{var r=e.autoscaleMargin;null!=r&&(null==e.min&&(i-=o*r,i<0&&null!=t.datamin&&t.datamin>=0&&(i=0)),null==e.max&&(n+=o*r,n>0&&null!=t.datamax&&t.datamax<=0&&(n=0)))}t.min=i,t.max=n}function I(e){var i,o=e.options;i="number"==typeof o.ticks&&o.ticks>0?o.ticks:.3*Math.sqrt("x"==e.direction?pt:xt);var a,r,l,s,c,u,f,h=(e.max-e.min)/i;if("time"==o.mode){var m={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3},d=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],p=0;null!=o.minTickSize&&(p="number"==typeof o.tickSize?o.tickSize:o.minTickSize[0]*m[o.minTickSize[1]]);for(var c=0;c<d.length-1&&!(h<(d[c][0]*m[d[c][1]]+d[c+1][0]*m[d[c+1][1]])/2&&d[c][0]*m[d[c][1]]>=p);++c);a=d[c][0],l=d[c][1],"year"==l&&(u=Math.pow(10,Math.floor(Math.log(h/m.year)/Math.LN10)),f=h/m.year/u,a=f<1.5?1:f<3?2:f<7.5?5:10,a*=u),e.tickSize=o.tickSize||[a,l],r=function(t){var e=[],i=t.tickSize[0],o=t.tickSize[1],a=new Date(t.min),r=i*m[o];"second"==o&&a.setUTCSeconds(n(a.getUTCSeconds(),i)),"minute"==o&&a.setUTCMinutes(n(a.getUTCMinutes(),i)),"hour"==o&&a.setUTCHours(n(a.getUTCHours(),i)),"month"==o&&a.setUTCMonth(n(a.getUTCMonth(),i)),"year"==o&&a.setUTCFullYear(n(a.getUTCFullYear(),i)),a.setUTCMilliseconds(0),r>=m.minute&&a.setUTCSeconds(0),r>=m.hour&&a.setUTCMinutes(0),r>=m.day&&a.setUTCHours(0),r>=4*m.day&&a.setUTCDate(1),r>=m.year&&a.setUTCMonth(0);var l,s=0,c=Number.NaN;do if(l=c,c=a.getTime(),e.push(c),"month"==o)if(i<1){a.setUTCDate(1);var u=a.getTime();a.setUTCMonth(a.getUTCMonth()+1);var f=a.getTime();a.setTime(c+s*m.hour+(f-u)*i),s=a.getUTCHours(),a.setUTCHours(0)}else a.setUTCMonth(a.getUTCMonth()+i);else"year"==o?a.setUTCFullYear(a.getUTCFullYear()+i):a.setTime(c+r);while(c<t.max&&c!=l);return e},s=function(e,i){var n=new Date(e);if(null!=o.timeformat)return t.plot.formatDate(n,o.timeformat,o.monthNames);var a=i.tickSize[0]*m[i.tickSize[1]],r=i.max-i.min,l=o.twelveHourClock?" %p":"";return a<m.minute?fmt="%h:%M:%S"+l:a<m.day?r<2*m.day?fmt="%h:%M"+l:fmt="%b %d %h:%M"+l:a<m.month?fmt="%b %d":a<m.year?r<m.year?fmt="%b":fmt="%b %y":fmt="%y",t.plot.formatDate(n,fmt,o.monthNames)}}else{var x=o.tickDecimals,g=-Math.floor(Math.log(h)/Math.LN10);null!=x&&g>x&&(g=x),u=Math.pow(10,-g),f=h/u,f<1.5?a=1:f<3?(a=2,f>2.25&&(null==x||g+1<=x)&&(a=2.5,++g)):a=f<7.5?5:10,a*=u,null!=o.minTickSize&&a<o.minTickSize&&(a=o.minTickSize),e.tickDecimals=Math.max(0,null!=x?x:g),e.tickSize=o.tickSize||a,r=function(t){var e,i=[],o=n(t.min,t.tickSize),a=0,r=Number.NaN;do e=r,r=o+a*t.tickSize,i.push(r),++a;while(r<t.max&&r!=e);return i},s=function(t,e){return t.toFixed(e.tickDecimals)}}if(null!=o.alignTicksWithAxis){var v=("x"==e.direction?ht:mt)[o.alignTicksWithAxis-1];if(v&&v.used&&v!=e){var b=r(e);if(b.length>0&&(null==o.min&&(e.min=Math.min(e.min,b[0])),null==o.max&&b.length>1&&(e.max=Math.max(e.max,b[b.length-1]))),r=function(t){var e,i,n=[];for(i=0;i<v.ticks.length;++i)e=(v.ticks[i].v-v.min)/(v.max-v.min),e=t.min+e*(t.max-t.min),n.push(e);return n},"time"!=e.mode&&null==o.tickDecimals){var k=Math.max(0,-Math.floor(Math.log(h)/Math.LN10)+1),y=r(e);y.length>1&&/\..*0$/.test((y[1]-y[0]).toFixed(k))||(e.tickDecimals=k)}}}e.tickGenerator=r,t.isFunction(o.tickFormatter)?e.tickFormatter=function(t,e){return""+o.tickFormatter(t,e)}:e.tickFormatter=s}function U(e){var i=e.options.ticks,n=[];null==i||"number"==typeof i&&i>0?n=e.tickGenerator(e):i&&(n=t.isFunction(i)?i({min:e.min,max:e.max}):i);var o,a;for(e.ticks=[],o=0;o<n.length;++o){var r=null,l=n[o];"object"==typeof l?(a=+l[0],l.length>1&&(r=l[1])):a=+l,null==r&&(r=e.tickFormatter(a,e)),isNaN(a)||e.ticks.push({v:a,label:r})}}function N(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}function L(){ut.clearRect(0,0,pt,xt);var t=rt.grid;t.show&&t.backgroundColor&&P(),t.show&&!t.aboveData&&H();for(var e=0;e<at.length;++e)l(bt.drawSeries,[ut,at[e]]),Y(at[e]);l(bt.draw,[ut]),t.show&&t.aboveData&&H()}function D(t,e){var n,o,a,r,l=m();for(i=0;i<l.length;++i)if(n=l[i],n.direction==e&&(r=e+n.n+"axis",t[r]||1!=n.n||(r=e+"axis"),t[r])){o=t[r].from,a=t[r].to;break}if(t[r]||(n="x"==e?ht[0]:mt[0],o=t[e+"1"],a=t[e+"2"]),null!=o&&null!=a&&o>a){var s=o;o=a,a=s}return{from:o,to:a,axis:n}}function P(){ut.save(),ut.translate(dt.left,dt.top),ut.fillStyle=ot(rt.grid.backgroundColor,vt,0,"rgba(255, 255, 255, 0)"),ut.fillRect(0,0,gt,vt),ut.restore()}function H(){var e;ut.save(),ut.translate(dt.left,dt.top);var i=rt.grid.markings;if(i){if(t.isFunction(i)){var n=kt.getAxes();n.xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,i=i(n)}for(e=0;e<i.length;++e){var o=i[e],a=D(o,"x"),r=D(o,"y");null==a.from&&(a.from=a.axis.min),null==a.to&&(a.to=a.axis.max),null==r.from&&(r.from=r.axis.min),null==r.to&&(r.to=r.axis.max),a.to<a.axis.min||a.from>a.axis.max||r.to<r.axis.min||r.from>r.axis.max||(a.from=Math.max(a.from,a.axis.min),a.to=Math.min(a.to,a.axis.max),r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),a.from==a.to&&r.from==r.to||(a.from=a.axis.p2c(a.from),a.to=a.axis.p2c(a.to),r.from=r.axis.p2c(r.from),r.to=r.axis.p2c(r.to),a.from==a.to||r.from==r.to?(ut.beginPath(),ut.strokeStyle=o.color||rt.grid.markingsColor,ut.lineWidth=o.lineWidth||rt.grid.markingsLineWidth,ut.moveTo(a.from,r.from),ut.lineTo(a.to,r.to),ut.stroke()):(ut.fillStyle=o.color||rt.grid.markingsColor,ut.fillRect(a.from,r.to,a.to-a.from,r.from-r.to))))}}for(var n=m(),l=rt.grid.borderWidth,s=0;s<n.length;++s){var c,u,f,h,d=n[s],p=d.box,x=d.tickLength;if(d.show&&0!=d.ticks.length){for(ut.strokeStyle=d.options.tickColor||t.color.parse(d.options.color).scale("a",.22).toString(),ut.lineWidth=1,"x"==d.direction?(c=0,u="full"==x?"top"==d.position?0:vt:p.top-dt.top+("top"==d.position?p.height:0)):(u=0,c="full"==x?"left"==d.position?0:gt:p.left-dt.left+("left"==d.position?p.width:0)),d.innermost||(ut.beginPath(),f=h=0,"x"==d.direction?f=gt:h=vt,1==ut.lineWidth&&(c=Math.floor(c)+.5,u=Math.floor(u)+.5),ut.moveTo(c,u),ut.lineTo(c+f,u+h),ut.stroke()),ut.beginPath(),e=0;e<d.ticks.length;++e){var g=d.ticks[e].v;f=h=0,g<d.min||g>d.max||"full"==x&&l>0&&(g==d.min||g==d.max)||("x"==d.direction?(c=d.p2c(g),h="full"==x?-vt:x,"top"==d.position&&(h=-h)):(u=d.p2c(g),f="full"==x?-gt:x,"left"==d.position&&(f=-f)),1==ut.lineWidth&&("x"==d.direction?c=Math.floor(c)+.5:u=Math.floor(u)+.5),ut.moveTo(c,u),ut.lineTo(c+f,u+h))}ut.stroke()}}l&&(ut.lineWidth=l,ut.strokeStyle=rt.grid.borderColor,ut.strokeRect(-l/2,-l/2,gt+l,vt+l)),ut.restore()}function O(){e.find(".tickLabels").remove();for(var t=['<div class="tickLabels" style="font-size:smaller">'],i=m(),n=0;n<i.length;++n){var o=i[n],a=o.box;if(o.show){t.push('<div class="'+o.direction+"Axis "+o.direction+o.n+'Axis" style="color:'+o.options.color+'">');for(var r=0;r<o.ticks.length;++r){var l=o.ticks[r];if(!(!l.label||l.v<o.min||l.v>o.max)){var s,c={};"x"==o.direction?(s="center",c.left=Math.round(dt.left+o.p2c(l.v)-o.labelWidth/2),"bottom"==o.position?c.top=a.top+a.padding:c.bottom=xt-(a.top+a.height-a.padding)):(c.top=Math.round(dt.top+o.p2c(l.v)-o.labelHeight/2),"left"==o.position?s="right":(c.left=a.left+a.padding,s="left")),c.width=o.labelWidth;var u=["position:absolute","text-align:"+s];for(var f in c)u.push(f+":"+c[f]+"px");t.push('<div class="tickLabel" style="'+u.join(";")+'">'+l.label+"</div>")}}t.push("</div>")}}t.push("</div>"),e.append(t.join(""))}function Y(t){t.lines.show&&j(t),t.bars.show&&V(t),t.points.show&&R(t)}function j(t){function e(t,e,i,n,o){var a=t.points,r=t.pointsize,l=null,s=null;ut.beginPath();for(var c=r;c<a.length;c+=r){var u=a[c-r],f=a[c-r+1],h=a[c],m=a[c+1];if(null!=u&&null!=h){if(f<=m&&f<o.min){if(m<o.min)continue;u=(o.min-f)/(m-f)*(h-u)+u,f=o.min}else if(m<=f&&m<o.min){if(f<o.min)continue;h=(o.min-f)/(m-f)*(h-u)+u,m=o.min}if(f>=m&&f>o.max){if(m>o.max)continue;u=(o.max-f)/(m-f)*(h-u)+u,f=o.max}else if(m>=f&&m>o.max){if(f>o.max)continue;h=(o.max-f)/(m-f)*(h-u)+u,m=o.max}if(u<=h&&u<n.min){if(h<n.min)continue;f=(n.min-u)/(h-u)*(m-f)+f,u=n.min}else if(h<=u&&h<n.min){if(u<n.min)continue;m=(n.min-u)/(h-u)*(m-f)+f,h=n.min}if(u>=h&&u>n.max){if(h>n.max)continue;f=(n.max-u)/(h-u)*(m-f)+f,u=n.max}else if(h>=u&&h>n.max){if(u>n.max)continue;m=(n.max-u)/(h-u)*(m-f)+f,h=n.max}u==l&&f==s||ut.moveTo(n.p2c(u)+e,o.p2c(f)+i),l=h,s=m,ut.lineTo(n.p2c(h)+e,o.p2c(m)+i)}}ut.stroke()}function i(t,e,i){for(var n=t.points,o=t.pointsize,a=Math.min(Math.max(0,i.min),i.max),r=0,l=!1,s=1,c=0,u=0;;){if(o>0&&r>n.length+o)break;r+=o;var f=n[r-o],h=n[r-o+s],m=n[r],d=n[r+s];if(l){if(o>0&&null!=f&&null==m){u=r,o=-o,s=2;continue}if(o<0&&r==c+o){ut.fill(),l=!1,o=-o,s=1,r=c=u+o;continue}}if(null!=f&&null!=m){if(f<=m&&f<e.min){if(m<e.min)continue;h=(e.min-f)/(m-f)*(d-h)+h,f=e.min}else if(m<=f&&m<e.min){if(f<e.min)continue;d=(e.min-f)/(m-f)*(d-h)+h,m=e.min}if(f>=m&&f>e.max){if(m>e.max)continue;h=(e.max-f)/(m-f)*(d-h)+h,f=e.max}else if(m>=f&&m>e.max){if(f>e.max)continue;d=(e.max-f)/(m-f)*(d-h)+h,m=e.max}if(l||(ut.beginPath(),ut.moveTo(e.p2c(f),i.p2c(a)),l=!0),h>=i.max&&d>=i.max)ut.lineTo(e.p2c(f),i.p2c(i.max)),ut.lineTo(e.p2c(m),i.p2c(i.max));else if(h<=i.min&&d<=i.min)ut.lineTo(e.p2c(f),i.p2c(i.min)),ut.lineTo(e.p2c(m),i.p2c(i.min));else{var p=f,x=m;h<=d&&h<i.min&&d>=i.min?(f=(i.min-h)/(d-h)*(m-f)+f,h=i.min):d<=h&&d<i.min&&h>=i.min&&(m=(i.min-h)/(d-h)*(m-f)+f,d=i.min),h>=d&&h>i.max&&d<=i.max?(f=(i.max-h)/(d-h)*(m-f)+f,h=i.max):d>=h&&d>i.max&&h<=i.max&&(m=(i.max-h)/(d-h)*(m-f)+f,d=i.max),f!=p&&ut.lineTo(e.p2c(p),i.p2c(h)),ut.lineTo(e.p2c(f),i.p2c(h)),ut.lineTo(e.p2c(m),i.p2c(d)),m!=x&&(ut.lineTo(e.p2c(m),i.p2c(d)),ut.lineTo(e.p2c(x),i.p2c(d)))}}}}ut.save(),ut.translate(dt.left,dt.top),ut.lineJoin="round";var n=t.lines.lineWidth,o=t.shadowSize;if(n>0&&o>0){ut.lineWidth=o,ut.strokeStyle="rgba(0,0,0,0.1)";var a=Math.PI/18;e(t.datapoints,Math.sin(a)*(n/2+o/2),Math.cos(a)*(n/2+o/2),t.xaxis,t.yaxis),ut.lineWidth=o/2,e(t.datapoints,Math.sin(a)*(n/2+o/4),Math.cos(a)*(n/2+o/4),t.xaxis,t.yaxis)}ut.lineWidth=n,ut.strokeStyle=t.color;var r=X(t.lines,t.color,0,vt);r&&(ut.fillStyle=r,i(t.datapoints,t.xaxis,t.yaxis)),n>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis),ut.restore()}function R(t){function e(t,e,i,n,o,a,r,l){for(var s=t.points,c=t.pointsize,u=0;u<s.length;u+=c){var f=s[u],h=s[u+1];null==f||f<a.min||f>a.max||h<r.min||h>r.max||(ut.beginPath(),f=a.p2c(f),h=r.p2c(h)+n,"circle"==l?ut.arc(f,h,e,0,o?Math.PI:2*Math.PI,!1):l(ut,f,h,e,o),ut.closePath(),i&&(ut.fillStyle=i,ut.fill()),ut.stroke())}}ut.save(),ut.translate(dt.left,dt.top);var i=t.points.lineWidth,n=t.shadowSize,o=t.points.radius,a=t.points.symbol;if(i>0&&n>0){var r=n/2;ut.lineWidth=r,ut.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,o,null,r+r/2,!0,t.xaxis,t.yaxis,a),ut.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,o,null,r/2,!0,t.xaxis,t.yaxis,a)}ut.lineWidth=i,ut.strokeStyle=t.color,e(t.datapoints,o,X(t.points,t.color),0,!1,t.xaxis,t.yaxis,a),ut.restore()}function E(t,e,i,n,o,a,r,l,s,c,u,f){var h,m,d,p,x,g,v,b,k;u?(b=g=v=!0,x=!1,h=i,m=t,p=e+n,d=e+o,m<h&&(k=m,m=h,h=k,x=!0,g=!1)):(x=g=v=!0,b=!1,h=t+n,m=t+o,d=i,p=e,p<d&&(k=p,p=d,d=k,b=!0,v=!1)),m<l.min||h>l.max||p<s.min||d>s.max||(h<l.min&&(h=l.min,x=!1),m>l.max&&(m=l.max,g=!1),d<s.min&&(d=s.min,b=!1),p>s.max&&(p=s.max,v=!1),h=l.p2c(h),d=s.p2c(d),m=l.p2c(m),p=s.p2c(p),r&&(c.beginPath(),c.moveTo(h,d),c.lineTo(h,p),c.lineTo(m,p),c.lineTo(m,d),c.fillStyle=r(d,p),c.fill()),f>0&&(x||g||v||b)&&(c.beginPath(),c.moveTo(h,d+a),x?c.lineTo(h,p+a):c.moveTo(h,p+a),v?c.lineTo(m,p+a):c.moveTo(m,p+a),g?c.lineTo(m,d+a):c.moveTo(m,d+a),b?c.lineTo(h,d+a):c.moveTo(h,d+a),c.stroke()))}function V(t){function e(e,i,n,o,a,r,l){for(var s=e.points,c=e.pointsize,u=0;u<s.length;u+=c)null!=s[u]&&E(s[u],s[u+1],s[u+2],i,n,o,a,r,l,ut,t.bars.horizontal,t.bars.lineWidth)}ut.save(),ut.translate(dt.left,dt.top),ut.lineWidth=t.bars.lineWidth,ut.strokeStyle=t.color;var i=t.bars.barLeft,n=t.bars.fill?function(e,i){return X(t.bars,t.color,e,i)}:null;e(t.datapoints,i,i+t.bars.barWidth,0,n,t.xaxis,t.yaxis),ut.restore()}function X(e,i,n,o){var a=e.fill;if(!a)return null;if(e.fillColor)return ot(e.fillColor,n,o,i);var r=t.color.parse(i);return r.a="number"==typeof a?a:.4,r.normalize(),r.toString()}function B(){if(e.find(".legend").remove(),rt.legend.show){for(var i,n,o=[],a=!1,r=rt.legend.labelFormatter,l=0;l<at.length;++l)i=at[l],n=i.label,n&&(l%rt.legend.noColumns==0&&(a&&o.push("</tr>"),o.push("<tr>"),a=!0),r&&(n=r(n,i)),o.push('<td class="legendColorBox"><div style="border:1px solid '+rt.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+i.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+n+"</td>"));if(a&&o.push("</tr>"),0!=o.length){var s='<table style="font-size:smaller;color:'+rt.grid.color+'">'+o.join("")+"</table>";if(null!=rt.legend.container)t(rt.legend.container).html(s);else{var c="",u=rt.legend.position,f=rt.legend.margin;null==f[0]&&(f=[f,f]),"n"==u.charAt(0)?c+="top:"+(f[1]+dt.top)+"px;":"s"==u.charAt(0)&&(c+="bottom:"+(f[1]+dt.bottom)+"px;"),"e"==u.charAt(1)?c+="right:"+(f[0]+dt.right)+"px;":"w"==u.charAt(1)&&(c+="left:"+(f[0]+dt.left)+"px;");var h=t('<div class="legend">'+s.replace('style="','style="position:absolute;'+c+";")+"</div>").appendTo(e);if(0!=rt.legend.backgroundOpacity){var m=rt.legend.backgroundColor;null==m&&(m=rt.grid.backgroundColor,m=m&&"string"==typeof m?t.color.parse(m):t.color.extract(h,"background-color"),m.a=1,m=m.toString());var d=h.children();t('<div style="position:absolute;width:'+d.width()+"px;height:"+d.height()+"px;"+c+"background-color:"+m+';"> </div>').prependTo(h).css("opacity",rt.legend.backgroundOpacity)}}}}}function q(t,e,i){var n,o,a=rt.grid.mouseActiveRadius,r=a*a+1,l=null;for(n=at.length-1;n>=0;--n)if(i(at[n])){var s=at[n],c=s.xaxis,u=s.yaxis,f=s.datapoints.points,h=s.datapoints.pointsize,m=c.c2p(t),d=u.c2p(e),p=a/c.scale,x=a/u.scale;if(c.options.inverseTransform&&(p=Number.MAX_VALUE),u.options.inverseTransform&&(x=Number.MAX_VALUE),s.lines.show||s.points.show)for(o=0;o<f.length;o+=h){var g=f[o],v=f[o+1];if(null!=g&&!(g-m>p||g-m<-p||v-d>x||v-d<-x)){var b=Math.abs(c.p2c(g)-t),k=Math.abs(u.p2c(v)-e),y=b*b+k*k;y<r&&(r=y,l=[n,o/h])}}if(s.bars.show&&!l){var T=s.bars.barLeft,M=T+s.bars.barWidth;for(o=0;o<f.length;o+=h){var g=f[o],v=f[o+1],w=f[o+2];null!=g&&(at[n].bars.horizontal?m<=Math.max(w,g)&&m>=Math.min(w,g)&&d>=v+T&&d<=v+M:m>=g+T&&m<=g+M&&d>=Math.min(w,v)&&d<=Math.max(w,v))&&(l=[n,o/h])}}}return l?(n=l[0],o=l[1],h=at[n].datapoints.pointsize,{datapoint:at[n].datapoints.points.slice(o*h,(o+1)*h),dataIndex:o,series:at[n],seriesIndex:n}):null}function G(t){rt.grid.hoverable&&Q("plothover",t,function(t){return 0!=t.hoverable})}function _(t){rt.grid.hoverable&&Q("plothover",t,function(t){return!1})}function J(t){Q("plotclick",t,function(t){return 0!=t.clickable})}function Q(t,i,n){var o=ct.offset(),a=i.pageX-o.left-dt.left,r=i.pageY-o.top-dt.top,l=d({left:a,top:r});l.pageX=i.pageX,l.pageY=i.pageY;var s=q(a,r,n);if(s&&(s.pageX=parseInt(s.series.xaxis.p2c(s.datapoint[0])+o.left+dt.left),s.pageY=parseInt(s.series.yaxis.p2c(s.datapoint[1])+o.top+dt.top)),rt.grid.autoHighlight){for(var c=0;c<yt.length;++c){var u=yt[c];u.auto!=t||s&&u.series==s.series&&u.point[0]==s.datapoint[0]&&u.point[1]==s.datapoint[1]||tt(u.series,u.point)}s&&Z(s.series,s.datapoint,t)}e.trigger(t,[l,s])}function $(){Tt||(Tt=setTimeout(K,30))}function K(){Tt=null,ft.save(),ft.clearRect(0,0,pt,xt),ft.translate(dt.left,dt.top);var t,e;for(t=0;t<yt.length;++t)e=yt[t],e.series.bars.show?nt(e.series,e.point):it(e.series,e.point);ft.restore(),l(bt.drawOverlay,[ft])}function Z(t,e,i){if("number"==typeof t&&(t=at[t]),"number"==typeof e){var n=t.datapoints.pointsize;e=t.datapoints.points.slice(n*e,n*(e+1))}var o=et(t,e);o==-1?(yt.push({series:t,point:e,auto:i}),$()):i||(yt[o].auto=!1)}function tt(t,e){null==t&&null==e&&(yt=[],$()),"number"==typeof t&&(t=at[t]),"number"==typeof e&&(e=t.data[e]);var i=et(t,e);i!=-1&&(yt.splice(i,1),$())}function et(t,e){for(var i=0;i<yt.length;++i){var n=yt[i];if(n.series==t&&n.point[0]==e[0]&&n.point[1]==e[1])return i}return-1}function it(e,i){var n=i[0],o=i[1],a=e.xaxis,r=e.yaxis;if(!(n<a.min||n>a.max||o<r.min||o>r.max)){var l=e.points.radius+e.points.lineWidth/2;ft.lineWidth=l,ft.strokeStyle=t.color.parse(e.color).scale("a",.5).toString();var s=1.5*l,n=a.p2c(n),o=r.p2c(o);ft.beginPath(),"circle"==e.points.symbol?ft.arc(n,o,s,0,2*Math.PI,!1):e.points.symbol(ft,n,o,s,!1),ft.closePath(),ft.stroke()}}function nt(e,i){ft.lineWidth=e.bars.lineWidth,ft.strokeStyle=t.color.parse(e.color).scale("a",.5).toString();var n=t.color.parse(e.color).scale("a",.5).toString(),o=e.bars.barLeft;E(i[0],i[1],i[2]||0,o,o+e.bars.barWidth,0,function(){return n},e.xaxis,e.yaxis,ft,e.bars.horizontal,e.bars.lineWidth)}function ot(e,i,n,o){if("string"==typeof e)return e;for(var a=ut.createLinearGradient(0,n,0,i),r=0,l=e.colors.length;r<l;++r){var s=e.colors[r];if("string"!=typeof s){var c=t.color.parse(o);null!=s.brightness&&(c=c.scale("rgb",s.brightness)),null!=s.opacity&&(c.a*=s.opacity),s=c.toString()}a.addColorStop(r/(l-1),s)}return a}var at=[],rt={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},lt=null,st=null,ct=null,ut=null,ft=null,ht=[],mt=[],dt={left:0,right:0,top:0,bottom:0},pt=0,xt=0,gt=0,vt=0,bt={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},kt=this;kt.setData=u,kt.setupGrid=W,kt.draw=L,kt.getPlaceholder=function(){return e},kt.getCanvas=function(){return lt},kt.getPlotOffset=function(){return dt},kt.width=function(){return gt},kt.height=function(){return vt},kt.offset=function(){var t=ct.offset();return t.left+=dt.left,t.top+=dt.top,t},kt.getData=function(){return at},kt.getAxes=function(){var e={};return t.each(ht.concat(mt),function(t,i){i&&(e[i.direction+(1!=i.n?i.n:"")+"axis"]=i)}),e},kt.getXAxes=function(){return ht},kt.getYAxes=function(){return mt},kt.c2p=d,kt.p2c=p,kt.getOptions=function(){return rt},kt.highlight=Z,kt.unhighlight=tt,kt.triggerRedrawOverlay=$,kt.pointOffset=function(t){return{left:parseInt(ht[h(t,"x")-1].p2c(+t.x)+dt.left),
top:parseInt(mt[h(t,"y")-1].p2c(+t.y)+dt.top)}},kt.shutdown=w,kt.resize=function(){k(),y(lt),y(st)},kt.hooks=bt,s(kt),c(a),T(),u(o),W(),L(),M();var yt=[],Tt=null}function n(t,e){return e*Math.floor(t/e)}t.plot=function(i,n,o){var a=new e(t(i),n,o,t.plot.plugins);return a},t.plot.version="0.7",t.plot.plugins=[],t.plot.formatDate=function(t,e,i){var n=function(t){return t=""+t,1==t.length?"0"+t:t},o=[],a=!1,r=!1,l=t.getUTCHours(),s=l<12;null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),e.search(/%p|%P/)!=-1&&(l>12?l-=12:0==l&&(l=12));for(var c=0;c<e.length;++c){var u=e.charAt(c);if(a){switch(u){case"h":u=""+l;break;case"H":u=n(l);break;case"M":u=n(t.getUTCMinutes());break;case"S":u=n(t.getUTCSeconds());break;case"d":u=""+t.getUTCDate();break;case"m":u=""+(t.getUTCMonth()+1);break;case"y":u=""+t.getUTCFullYear();break;case"b":u=""+i[t.getUTCMonth()];break;case"p":u=s?"am":"pm";break;case"P":u=s?"AM":"PM";break;case"0":u="",r=!0}u&&r&&(u=n(u),r=!1),o.push(u),r||(a=!1)}else"%"==u?a=!0:o.push(u)}return o.join("")}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.fillbetween.js' */
!function(e){function n(e){function n(e,n){var l;for(l=0;l<n.length;++l)if(n[l].id==e.fillBetween)return n[l];return"number"==typeof e.fillBetween?(l=e.fillBetween,l<0||l>=n.length?null:n[l]):null}function l(e,l,i){if(null!=l.fillBetween){var t=n(l,e.getData());if(t){for(var s,f,o,u,p,r,h,a=i.pointsize,g=i.points,w=t.datapoints.pointsize,c=t.datapoints.points,v=[],B=l.lines.show,b=a>2&&i.format[2].y,d=B&&l.lines.steps,y=!0,k=0,z=0;;){if(k>=g.length)break;if(h=v.length,null==g[k]){for(m=0;m<a;++m)v.push(g[k+m]);k+=a}else if(z>=c.length){if(!B)for(m=0;m<a;++m)v.push(g[k+m]);k+=a}else if(null==c[z]){for(m=0;m<a;++m)v.push(null);y=!0,z+=w}else{if(s=g[k],f=g[k+1],u=c[z],p=c[z+1],r=0,s==u){for(m=0;m<a;++m)v.push(g[k+m]);r=p,k+=a,z+=w}else if(s>u){if(B&&k>0&&null!=g[k-a]){for(o=f+(g[k-a+1]-f)*(u-s)/(g[k-a]-s),v.push(u),v.push(o),m=2;m<a;++m)v.push(g[k+m]);r=p}z+=w}else{if(y&&B){k+=a;continue}for(m=0;m<a;++m)v.push(g[k+m]);B&&z>0&&null!=c[z-w]&&(r=p+(c[z-w+1]-p)*(s-u)/(c[z-w]-u)),k+=a}y=!1,h!=v.length&&b&&(v[h+2]=r)}if(d&&h!=v.length&&h>0&&null!=v[h]&&v[h]!=v[h-a]&&v[h+1]!=v[h-a+1]){for(m=0;m<a;++m)v[h+a+m]=v[h+m];v[h+1]=v[h-a+1]}}i.points=v}}}e.hooks.processDatapoints.push(l)}var l={series:{fillBetween:null}};e.plot.plugins.push({init:n,options:l,name:"fillbetween",version:"1.0"})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.stack.js' */
!function(n){function s(n){function s(n,s){for(var t=null,i=0;i<s.length&&n!=s[i];++i)s[i].stack==n.stack&&(t=s[i]);return t}function t(n,t,i){if(null!=t.stack){var l=s(t,n.getData());if(l){for(var o,e,f,u,r,a,p,h=i.pointsize,c=i.points,g=l.datapoints.pointsize,k=l.datapoints.points,v=[],z=t.lines.show,b=t.bars.horizontal,d=h>2&&(b?i.format[2].x:i.format[2].y),y=z&&t.lines.steps,D=!0,j=b?1:0,w=b?0:1,x=0,Q=0;;){if(x>=c.length)break;if(p=v.length,null==c[x]){for(m=0;m<h;++m)v.push(c[x+m]);x+=h}else if(Q>=k.length){if(!z)for(m=0;m<h;++m)v.push(c[x+m]);x+=h}else if(null==k[Q]){for(m=0;m<h;++m)v.push(null);D=!0,Q+=g}else{if(o=c[x+j],e=c[x+w],u=k[Q+j],r=k[Q+w],a=0,o==u){for(m=0;m<h;++m)v.push(c[x+m]);v[p+w]+=r,a=r,x+=h,Q+=g}else if(o>u){if(z&&x>0&&null!=c[x-h]){for(f=e+(c[x-h+w]-e)*(u-o)/(c[x-h+j]-o),v.push(u),v.push(f+r),m=2;m<h;++m)v.push(c[x+m]);a=r}Q+=g}else{if(D&&z){x+=h;continue}for(m=0;m<h;++m)v.push(c[x+m]);z&&Q>0&&null!=k[Q-g]&&(a=r+(k[Q-g+w]-r)*(o-u)/(k[Q-g+j]-u)),v[p+w]+=a,x+=h}D=!1,p!=v.length&&d&&(v[p+2]+=a)}if(y&&p!=v.length&&p>0&&null!=v[p]&&v[p]!=v[p-h]&&v[p+1]!=v[p-h+1]){for(m=0;m<h;++m)v[p+h+m]=v[p+m];v[p+1]=v[p-h+1]}}i.points=v}}}n.hooks.processDatapoints.push(t)}var t={series:{stack:null}};n.plot.plugins.push({init:s,options:t,name:"stack",version:"1.2"})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.selection.js' */
!function(e){function t(t){function o(e){h.active&&(a(e),t.getPlaceholder().trigger("plotselecting",[r()]))}function n(t){1==t.which&&(document.body.focus(),void 0!==document.onselectstart&&null==x.onselectstart&&(x.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==x.ondrag&&(x.ondrag=document.ondrag,document.ondrag=function(){return!1}),l(h.first,t),h.active=!0,m=function(e){i(e)},e(document).one("mouseup",m))}function i(e){return m=null,void 0!==document.onselectstart&&(document.onselectstart=x.onselectstart),void 0!==document.ondrag&&(document.ondrag=x.ondrag),h.active=!1,a(e),g()?s():(t.getPlaceholder().trigger("plotunselected",[]),t.getPlaceholder().trigger("plotselecting",[null])),!1}function r(){if(!g())return null;var o={},n=h.first,i=h.second;return e.each(t.getAxes(),function(e,t){if(t.used){var r=t.c2p(n[t.direction]),s=t.c2p(i[t.direction]);o[e]={from:Math.min(r,s),to:Math.max(r,s)}}}),o}function s(){var e=r();t.getPlaceholder().trigger("plotselected",[e]),e.xaxis&&e.yaxis&&t.getPlaceholder().trigger("selected",[{x1:e.xaxis.from,y1:e.yaxis.from,x2:e.xaxis.to,y2:e.yaxis.to}])}function c(e,t,o){return t<e?e:t>o?o:t}function l(e,o){var n=t.getOptions(),i=t.getPlaceholder().offset(),r=t.getPlotOffset();e.x=c(0,o.pageX-i.left-r.left,t.width()),e.y=c(0,o.pageY-i.top-r.top,t.height()),"y"==n.selection.mode&&(e.x=e==h.first?0:t.width()),"x"==n.selection.mode&&(e.y=e==h.first?0:t.height())}function a(e){null!=e.pageX&&(l(h.second,e),g()?(h.show=!0,t.triggerRedrawOverlay()):d(!0))}function d(e){h.show&&(h.show=!1,t.triggerRedrawOverlay(),e||t.getPlaceholder().trigger("plotunselected",[]))}function u(e,o){var n,i,r,s,c=t.getAxes();for(var l in c)if(n=c[l],n.direction==o&&(s=o+n.n+"axis",e[s]||1!=n.n||(s=o+"axis"),e[s])){i=e[s].from,r=e[s].to;break}if(e[s]||(n="x"==o?t.getXAxes()[0]:t.getYAxes()[0],i=e[o+"1"],r=e[o+"2"]),null!=i&&null!=r&&i>r){var a=i;i=r,r=a}return{from:i,to:r,axis:n}}function f(e,o){var n,i=t.getOptions();"y"==i.selection.mode?(h.first.x=0,h.second.x=t.width()):(n=u(e,"x"),h.first.x=n.axis.p2c(n.from),h.second.x=n.axis.p2c(n.to)),"x"==i.selection.mode?(h.first.y=0,h.second.y=t.height()):(n=u(e,"y"),h.first.y=n.axis.p2c(n.from),h.second.y=n.axis.p2c(n.to)),h.show=!0,t.triggerRedrawOverlay(),!o&&g()&&s()}function g(){var e=5;return Math.abs(h.second.x-h.first.x)>=e&&Math.abs(h.second.y-h.first.y)>=e}var h={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},x={},m=null;t.clearSelection=d,t.setSelection=f,t.getSelection=r,t.hooks.bindEvents.push(function(e,t){var i=e.getOptions();null!=i.selection.mode&&(t.mousemove(o),t.mousedown(n))}),t.hooks.drawOverlay.push(function(t,o){if(h.show&&g()){var n=t.getPlotOffset(),i=t.getOptions();o.save(),o.translate(n.left,n.top);var r=e.color.parse(i.selection.color);o.strokeStyle=r.scale("a",.8).toString(),o.lineWidth=1,o.lineJoin="round",o.fillStyle=r.scale("a",.4).toString();var s=Math.min(h.first.x,h.second.x),c=Math.min(h.first.y,h.second.y),l=Math.abs(h.second.x-h.first.x),a=Math.abs(h.second.y-h.first.y);o.fillRect(s,c,l,a),o.strokeRect(s,c,l,a),o.restore()}}),t.hooks.shutdown.push(function(t,i){i.unbind("mousemove",o),i.unbind("mousedown",n),m&&e(document).unbind("mouseup",m)})}e.plot.plugins.push({init:t,options:{selection:{mode:null,color:"#e8cfac"}},name:"selection",version:"1.1"})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.mouseenterexit.js' */
!function(e){function t(e){e.hooks.bindEvents.push(function(e,t){var n=function(t){e.getOptions().mouseEnterExitEvents&&(e.mouseEntered||(e.mouseEntered=!0,e.getPlaceholder().trigger("flotMouseEnter",e)))},o=function(t){e.getOptions().mouseEnterExitEvents&&e.mouseEntered&&(e.mouseEntered=!1,e.getPlaceholder().trigger("flotMouseLeave",e))};t.mousemove(n),t.mouseleave(o)})}var n={mouseEnterExitEvents:!1};AJS.$.plot.plugins.push({init:t,options:n,name:"gh-mouseenterexit-events",version:"1.0"})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/jquery/flot/jquery.flot.multi.js' */
!function(o){function a(o){function a(s,o,a,r){o.bars.show&&n.push(o)}function r(o,a,r){if(a.bars.show&&void 0==a.bars.barLeft){if(0==p)for(var t=0;t<n.length;t++)p+=n[t].bars.barWidth;for(var i=0,u=0;u<n.length&&(s=n[u],s!=a);u++)i+=s.bars.barWidth;a.bars.barLeft=i-p/2}}function t(s,o){o.multiplebars&&(i=o.multiplebars,n=[],p=0,s.hooks.processRawData.push(a),s.hooks.processDatapoints.push(r))}var i=!1,n=[],p=0;o.hooks.processOptions.push(t)}var r={multiplebars:!1};o.plot.plugins.push({init:a,options:r,name:"multiplebars",version:"0.1"})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/lzstring.js' */
var LZString=function(){function o(o,r){if(!t[o]){t[o]={};for(var n=0;n<o.length;n++)t[o][o.charAt(n)]=n}return t[o][r]}var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",t={},i={compressToBase64:function(o){if(null==o)return"";var r=i._compress(o,6,function(o){return n.charAt(o)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(e){return o(n,r.charAt(e))})},compressToUTF16:function(o){return null==o?"":i._compress(o,15,function(o){return r(o+32)})+" "},decompressFromUTF16:function(o){return null==o?"":""==o?null:i._decompress(o.length,16384,function(r){return o.charCodeAt(r)-32})},compressToUint8Array:function(o){for(var r=i.compress(o),n=new Uint8Array(2*r.length),e=0,t=r.length;t>e;e++){var s=r.charCodeAt(e);n[2*e]=s>>>8,n[2*e+1]=s%256}return n},decompressFromUint8Array:function(o){if(null===o||void 0===o)return i.decompress(o);for(var n=new Array(o.length/2),e=0,t=n.length;t>e;e++)n[e]=256*o[2*e]+o[2*e+1];var s=[];return n.forEach(function(o){s.push(r(o))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(o){return null==o?"":i._compress(o,6,function(o){return e.charAt(o)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(n){return o(e,r.charAt(n))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(o,r,n){if(null==o)return"";var e,t,i,s={},p={},u="",c="",a="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<o.length;i+=1)if(u=o.charAt(i),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=f++,p[u]=!0),c=a+u,Object.prototype.hasOwnProperty.call(s,c))a=c;else{if(Object.prototype.hasOwnProperty.call(p,a)){if(a.charCodeAt(0)<256){for(e=0;h>e;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=a.charCodeAt(0),e=0;8>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;h>e;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=a.charCodeAt(0),e=0;16>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}l--,0==l&&(l=Math.pow(2,h),h++),delete p[a]}else for(t=s[a],e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;l--,0==l&&(l=Math.pow(2,h),h++),s[c]=f++,a=String(u)}if(""!==a){if(Object.prototype.hasOwnProperty.call(p,a)){if(a.charCodeAt(0)<256){for(e=0;h>e;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=a.charCodeAt(0),e=0;8>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;h>e;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=a.charCodeAt(0),e=0;16>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}l--,0==l&&(l=Math.pow(2,h),h++),delete p[a]}else for(t=s[a],e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;l--,0==l&&(l=Math.pow(2,h),h++)}for(t=2,e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==r-1){d.push(n(m));break}v++}return d.join("")},decompress:function(o){return null==o?"":""==o?null:i._decompress(o.length,32768,function(r){return o.charCodeAt(r)})},_decompress:function(o,n,e){var t,i,s,p,u,c,a,l,f=[],h=4,d=4,m=3,v="",w=[],A={val:e(0),position:n,index:1};for(i=0;3>i;i+=1)f[i]=i;for(p=0,c=Math.pow(2,2),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;switch(t=p){case 0:for(p=0,c=Math.pow(2,8),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;l=r(p);break;case 1:for(p=0,c=Math.pow(2,16),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;l=r(p);break;case 2:return""}for(f[3]=l,s=l,w.push(l);;){if(A.index>o)return"";for(p=0,c=Math.pow(2,m),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;switch(l=p){case 0:for(p=0,c=Math.pow(2,8),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;f[d++]=r(p),l=d-1,h--;break;case 1:for(p=0,c=Math.pow(2,16),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;f[d++]=r(p),l=d-1,h--;break;case 2:return w.join("")}if(0==h&&(h=Math.pow(2,m),m++),f[l])v=f[l];else{if(l!==d)return null;v=s+s.charAt(0)}w.push(v),f[d++]=s+v.charAt(0),h--,s=v,0==h&&(h=Math.pow(2,m),m++)}}};return i}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/lib/lscache.js' */
!function(n,e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&module.exports?module.exports=e():n.lscache=e()}(this,function(){function n(){var n="__lscachetest__",t=n;if(void 0!==h)return h;try{u(n,t),c(n),h=!0}catch(r){h=!!e(r)}return h}function e(n){return!!(n&&"QUOTA_EXCEEDED_ERR"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name||"QuotaExceededError"===n.name)}function t(){return void 0===d&&(d=null!=window.JSON),d}function r(n){return n+g}function o(){return Math.floor((new Date).getTime()/w)}function i(n){return localStorage.getItem(p+y+n)}function u(n,e){localStorage.removeItem(p+y+n),localStorage.setItem(p+y+n,e)}function c(n){localStorage.removeItem(p+y+n)}function a(n){for(var e=new RegExp("^"+p+y+"(.*)"),t=localStorage.length-1;t>=0;--t){var o=localStorage.key(t);o=o&&o.match(e),o=o&&o[1],o&&o.indexOf(g)<0&&n(o,r(o))}}function f(n){var e=r(n);c(n),c(e)}function l(n){var e=r(n),t=i(e);if(t){var u=parseInt(t,m);if(o()>=u)return c(n),c(e),!0}}function s(n,e){E&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+n),e&&window.console.warn("lscache - The error was: "+e.message))}var h,d,p="lscache-",g="-cacheexpiration",m=10,w=6e4,v=Math.floor(864e13/w),y="",E=!1,S={set:function(l,h,d){if(!n())return!1;if("string"!=typeof h){if(!t())return!1;try{h=JSON.stringify(h)}catch(p){return!1}}try{u(l,h)}catch(p){if(!e(p))return s("Could not add item with key '"+l+"'",p),!1;var g,w=[];a(function(n,e){var t=i(e);t=t?parseInt(t,m):v,w.push({key:n,size:(i(n)||"").length,expiration:t})}),w.sort(function(n,e){return e.expiration-n.expiration});for(var y=(h||"").length;w.length&&y>0;)g=w.pop(),s("Cache is full, removing item with key '"+l+"'"),f(g.key),y-=g.size;try{u(l,h)}catch(p){return s("Could not add item with key '"+l+"', perhaps it's too big?",p),!1}}return d?u(r(l),(o()+d).toString(m)):c(r(l)),!0},get:function(e){if(!n())return null;if(l(e))return null;var r=i(e);if(!r||!t())return r;try{return JSON.parse(r)}catch(o){return r}},remove:function(e){n()&&f(e)},supported:function(){return n()},flush:function(){n()&&a(function(n){f(n)})},flushExpired:function(){n()&&a(function(n){l(n)})},setBucket:function(n){y=n},resetBucket:function(){y=""},enableWarnings:function(n){E=n}};return S});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/QuickFilters.js' */
!function(){"use strict";var t=require("jira-agile/rapid/analytics-tracker"),i=require("jira-agile/tooltip");GH.Components||(GH.Components={}),GH.Components.QuickFilters=function(t){this.stateParamName=t},GH.Components.QuickFilters.events=new GH.Events,GH.Components.QuickFilters.analytics=new t("gh.rapidboard.quickFilters"),GH.Components.QuickFilters.prototype.stateParamName="activeQuickFilters",GH.Components.QuickFilters.prototype.rapidViewConfig={},GH.Components.QuickFilters.prototype.setRapidViewConfig=function(t){this.rapidViewConfig=t,this.validateActiveFilters()},GH.Components.QuickFilters.prototype.getActiveQuickFilters=function(){return GH.BoardState.getPerViewValue(this.stateParamName,[])},GH.Components.QuickFilters.prototype.setActiveQuickFilters=function(t){GH.BoardState.setPerViewValue(this.stateParamName,t)},GH.Components.QuickFilters.prototype.validateActiveFilters=function(){var t=this.getActiveQuickFilters(),i=this,e=_.filter(t,function(t){return _.find(i.rapidViewConfig.quickFilters,function(i){return t===i.id})});t.length!==e.length&&(this.setActiveQuickFilters(e),GH.RapidBoard.State.pushState())},GH.Components.QuickFilters.prototype.getQuickFilters=function(){var t=this.getActiveQuickFilters();return _.map(this.rapidViewConfig.quickFilters,function(i){return i.isActive=_.contains(t,i.id),i})},GH.Components.QuickFilters.prototype.getInitiallyExpanded=function(){return GH.RapidBoard.State.getQuickFiltersExpanded()},GH.Components.QuickFilters.prototype.toggleInitiallyExpanded=function(){var t=!GH.RapidBoard.State.getQuickFiltersExpanded();GH.RapidBoard.State.setQuickFiltersExpanded(t)},GH.Components.QuickFilters.prototype.renderQuickFilters=function(t){var e=this.getQuickFilters(),r=GH.tpl.component.quickfilter.renderQuickFilters({quickFilters:e,canEdit:this.rapidViewConfig.canEdit,initiallyExpanded:this.getInitiallyExpanded(),thisMode:t.mode}),n=AJS.$(r),s=this,o=n.find("#js-quickfilters-label");i.tipsify({selector:o,gravity:"w",className:"ghx-tipsy-left"});var a="#js-"+t.mode+"-quickfilters-trigger";n.find(".js-quickfilter-button").click(function(t){var i=AJS.$(this);s.toggleQuickFilter(t,i)});var l=this.toggleInitiallyExpanded;return n.find(a).click(function(){l()}),n.delegate(a,"aui-expander-expanded aui-expander-collapsed",GH.RapidBoard.ViewController.handleResizeEvent),n},GH.Components.QuickFilters.prototype.toggleQuickFilter=function(t,i){t.preventDefault(),GH.Components.QuickFilters.events.trigger("before:toggle");var e=parseInt(i.attr("data-filter-id"),10);this.toggleActiveQuickFilter(e),i.toggleClass("ghx-active"),AJS.$(this).trigger("quickFilterChange"),GH.Components.QuickFilters.analytics.trigger("toggle","activeFilterCount",this.getActiveQuickFilters().length)},GH.Components.QuickFilters.prototype.toggleActiveQuickFilter=function(t){if(t){for(var i=!1,e=this.getActiveQuickFilters(),r=0,n=e.length;r<n;r++)if(e[r]===t){e.splice(r,1),i=!0;break}i||e.push(t),this.setActiveQuickFilters(e),GH.RapidBoard.State.pushState()}},GH.Components.QuickFilters.prototype.clearFilters=function(){var t=this.getActiveQuickFilters();return 0!==t.length&&(this.setActiveQuickFilters([]),AJS.$(".ghx-controls-filters .ghx-active").removeClass("ghx-active"),!0)},GH.Components.QuickFilters.prototype.quickExpanderLayout=function(t){var i="#js-"+t.mode+"-quickfilters",e=AJS.$(i),r=AJS.$(e).find("dt"),n=e.find(".ghx-quickfilter-trigger"),s=n.outerWidth(),o=n.height()+parseInt(r.css("marginBottom"),10)+1;n.css({display:"none"}),e.css({"padding-right":""}),e[0]&&e[0].scrollHeight>o&&(n.css({display:""}),e.attr("aria-expanded")&&"false"!==e.attr("aria-expanded")||e.css({"padding-right":s}))}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/QuickFilters.soy' */
// This file was automatically generated from QuickFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.quickfilter.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.quickfilter == 'undefined') { GH.tpl.component.quickfilter = {}; }


GH.tpl.component.quickfilter.renderQuickFilters = function(opt_data, opt_ignored) {
  var output = '<dl class="ghx-controls-filters js-quickfilter-selector">';
  var modeExpanderId__soy4 = 'js-' + soy.$$escapeHtml(opt_data.thisMode) + '-quickfilters';
  var modeExpanderTriggerId__soy8 = 'js-' + soy.$$escapeHtml(opt_data.thisMode) + '-quickfilters-trigger';
  var param15 = '<dt id="js-quickfilters-label"' + ((opt_data.canEdit) ? 'data-tooltip="' + soy.$$escapeHtml('Use Quick Filters to view a subset of issues. Add more in the board settings.') + '"' : 'data-tooltip="' + soy.$$escapeHtml('Use Quick Filters to view a subset of issues. Board owners can add more.') + '"') + '>' + soy.$$escapeHtml('Quick Filters') + ':</dt>';
  var quickFilterList29 = opt_data.quickFilters;
  var quickFilterListLen29 = quickFilterList29.length;
  for (var quickFilterIndex29 = 0; quickFilterIndex29 < quickFilterListLen29; quickFilterIndex29++) {
    var quickFilterData29 = quickFilterList29[quickFilterIndex29];
    param15 += '<dd><a role="button" href="#" class="js-quickfilter-button ' + ((quickFilterIndex29 == 0) ? 'first' : '') + ' ' + ((quickFilterIndex29 == quickFilterListLen29 - 1) ? 'last' : '') + ' ' + ((quickFilterData29.isActive) ? ' ghx-active' : '') + '" title="' + ((quickFilterData29.description == '') ? soy.$$escapeHtml(quickFilterData29.query) : soy.$$escapeHtml(quickFilterData29.description)) + '" data-filter-id="' + soy.$$escapeHtml(quickFilterData29.id) + '">' + soy.$$escapeHtml(quickFilterData29.name) + '</a></dd>';
  }
  param15 += '<dd class="ghx-quickfilter-trigger">' + aui.expander.trigger({id: modeExpanderTriggerId__soy8, contentId: modeExpanderId__soy4, tag: 'a', content: opt_data.initiallyExpanded ? '\u2026 Show fewer' : '\u2026 Show more', replaceText: opt_data.initiallyExpanded ? '\u2026 Show more' : '\u2026 Show fewer'}) + '</dd>';
  output += aui.expander.content({id: modeExpanderId__soy4, extraClasses: ['ghx-quick-content'], initiallyExpanded: opt_data.initiallyExpanded, content: param15});
  output += '</dl>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.quickfilter.renderQuickFilters.soyTemplateName = 'GH.tpl.component.quickfilter.renderQuickFilters';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintFilters.js' */
GH.Components||(GH.Components={}),GH.Components.sprintFiltersInit=function(){GH.InlineDialog.registerInlineDialogHacks("sprintDialog",{disregardClickSelectors:[".calendar",".js-edit-sprintName-trigger",".js-edit-startDate-trigger",".js-edit-endDate-trigger"]})},GH.Components.SPRINT_NAME_MAX_LENGTH=30,GH.Components.EVENT_SPRINT_UPDATED="sprintUpdated",GH.Components.SprintFilters=function(t){this.stateParamName=t},GH.Components.SprintFilters.prototype.stateParamName="workSprintFilters",GH.Components.SprintFilters.prototype.rapidViewConfig={},GH.Components.SprintFilters.prototype.setRapidViewConfig=function(t){this.rapidViewConfig=t},GH.Components.SprintFilters.prototype.getActiveSprintFilters=function(){return GH.BoardState.getPerViewValue(this.stateParamName,[])},GH.Components.SprintFilters.prototype.setActiveSprintFilters=function(t){GH.BoardState.setPerViewValue(this.stateParamName,t)},GH.Components.SprintFilters.prototype.renderComponent=function(){return AJS.$(GH.tpl.component.sprintfilters.renderSprintSelector())},GH.Components.SprintFilters.prototype.setSprintData=function(t){this.sprints=t||[]},GH.Components.SprintFilters.prototype.getSprintData=function(){return this.sprints},GH.Components.SprintFilters.prototype.validateActiveSprints=function(){var t=this.getActiveSprintFilters(),i=[];_.each(t,function(t){this.getSprintById(t)&&i.push(t)},this),_.isEqual(t,i)||(this.setActiveSprintFilters(i),GH.RapidBoard.State.replaceState(),AJS.$(this).trigger("sprintFilterChange"))},GH.Components.SprintFilters.prototype.hasSprints=function(t){return this.sprints.length>0},GH.Components.SprintFilters.prototype.getSprintById=function(t){return _.find(this.sprints,function(i){return i.id===t})},GH.Components.SprintFilters.prototype.updateSprintData=function(t,i){var e=!1;if(this.sprints)for(var n=0;n<this.sprints.length;n++)this.sprints[n].id==t&&(this.sprints[n]=i,e=!0);e&&GH.RapidBoard.State.isWorkMode()&&this.drawSprints()},GH.Components.SprintFilters.prototype.getTooltipCompleteSprintBtn=function(t,i){return this.hasSprints()?t?t.canUpdateSprint?"":i?"Only a Jira administrator can start or complete this sprint. Try selecting a project in your current board filter.":AJS.format("You need the {0}Manage sprints permission{1} to start or complete this sprint",'<a class="manage-sprint-permission-help" href="#">',"</a>"):"You can only complete one sprint at a time":"There are no active sprints to complete"},GH.Components.SprintFilters.prototype.drawSprints=function(){var t=this,i=AJS.$(".ghx-controls-work .js-sprint-info"),e=this.getActiveSprintFilters(),n={};_.each(e,function(t){n[t]=!0}),i.html(GH.tpl.component.sprintfilters.renderSprints({sprints:this.sprints,activeSprintMap:n})),this.sprints.length>1&&i.find(".js-toggle-sprint").click(function(i){var e=AJS.$(this);t.toggleActiveSprintFilterButton(i,e)});var r=require("jira/featureflags/simplified-ux-feature-manager");if(GH.RapidBoard.ViewController.hasSideBar){var a=1===this.sprints.length?this.sprints[0].id:this.getActiveSprintFilters()[0],s=this.getSprintById(a);a&&(r.isAdg3StylesEnabled()?AJS.$("#ghx-header").append(GH.tpl.board.x.renderSprintGoal({goal:s.goal})):AJS.$("#ghx-view-selector").append(GH.tpl.board.x.renderSprintGoal({goal:s.goal})))}else i.find(".js-sprint-trigger").click(function(i){var e=AJS.$(this);t.openSprintDialog(e)})},GH.Components.SprintFilters.prototype.toggleActiveSprintFilterButton=function(t,i){t.preventDefault();var e=parseInt(i.parents(".js-sprintfilter").attr("data-sprint-id"),10);this.toggleActiveSprintFilter(e),AJS.$(this).trigger("sprintFilterChange")},GH.Components.SprintFilters.prototype.updateButtonStates=function(){var t=this.getActiveSprintFilters();AJS.$.each(AJS.$(".js-sprint-info").find(".js-sprintfilter"),function(i,e){var n=AJS.$(e),r=parseInt(n.attr("data-sprint-id"),10);_.contains(t,r)?n.addClass("ghx-active"):n.removeClass("ghx-active")})},GH.Components.SprintFilters.prototype.toggleActiveSprintFilter=function(t){var i=this.getActiveSprintFilters(),e=[];0!==i.length&&i[0]===t||e.push(t),this.setActiveSprintFilters(e),GH.RapidBoard.State.pushState()},GH.Components.SprintFilters.prototype.removeDialog=function(){GH.InlineDialog.remove("sprintDialog")},GH.Components.SprintFilters.prototype.openSprintDialog=function(t){this.removeDialog();var i=parseInt(t.parents(".js-sprintfilter").attr("data-sprint-id"),10),e=this.getSprintById(i);this.analytics("open");var n={fadeTime:0,noBind:!0,width:400,cacheContent:!1,hideDelay:6e4},r=this,a=GH.InlineDialog.create("sprintDialog",t,function(t,i,n){r.renderSprintDialog(t,e,n)},n);a.show()},GH.Components.SprintFilters.prototype.analytics=function(t,i){var e=require("jira-agile/rapid/analytics-tracker");new e("gh.edit.sprint.inlinedialog.work.change").trigger(t,i)},GH.Components.SprintFilters.prototype.renderSprintDialog=function(t,i,e){t.html(GH.tpl.component.sprintfilters.renderSprintDetails({sprint:i,canUpdateSprint:i.canUpdateSprint})),t.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),t.parent().hide(),e()},GH.Components.SprintFilters.prototype.createGetInlineEditDataFunction=function(){var t=this;return function(i,e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var n=GH.RapidBoard.Util.InlineEditable.defaultFieldData(i);return"sprintName"===n.fieldName&&(n.maxLength=GH.Components.SPRINT_NAME_MAX_LENGTH,n.cssClass="medium-field"),n.sprintId=parseInt(i.parents(".js-sprint-details").attr("data-sprint-id"),10),n.sprintData=_.clone(t.getSprintById(n.sprintId)),n.sprintFiltersComponent=t,n}},GH.Components.SprintFilters.prototype.initializeInlineEdits=function(){var t=this,i=function(t){var i=t.editElement.val();return!!GH.Validation.notBlank(t.editElement,"Sprint name is required")&&(!!GH.Validation.maxLength(t.editElement,GH.Components.SPRINT_NAME_MAX_LENGTH,AJS.format("Sprint name must be shorter than {0} characters.",GH.Components.SPRINT_NAME_MAX_LENGTH))&&(t.sprintData.name=i,t.newValue=i,!0))},e=function(t){var i=t.editElement.find("input").val();return!!GH.Validation.notBlank(t.editElement.find("input"),"You must specify an end date for the sprint.",t.editElement)&&(t.sprintData.startDate=i,t.newValue=i,!0)},n=function(t){var i=t.editElement.find("input").val();return!!GH.Validation.notBlank(t.editElement.find("input"),"You must specify an end date for the sprint.",t.editElement)&&(t.sprintData.endDate=i,t.newValue=i,!0)},r=function(i){var e=_.clone(t.getSprintById(i.sprintId));_.isEqual(e,i.sprintData)||(t.submitSprintData(i.sprintData),t.analytics("update",i.fieldName)),GH.RapidBoard.Util.InlineEditable.updateView(i)},a=function(t){GH.Validation.clearContextualErrors(".ghx-sprint-active[data-sprint-id="+t.sprintId+"]"),GH.RapidBoard.Util.InlineEditable.cancelActiveEdits()};GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-sprintName-trigger",{getData:this.createGetInlineEditDataFunction(),validate:i,save:r}),GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-startDate-trigger",{getData:this.createGetInlineEditDataFunction(),renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:e,preEdit:a,save:r}),GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-endDate-trigger",{getData:this.createGetInlineEditDataFunction(),renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:n,preEdit:a,save:r})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SprintFilters.soy' */
// This file was automatically generated from SprintFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintfilters.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintfilters == 'undefined') { GH.tpl.component.sprintfilters = {}; }


GH.tpl.component.sprintfilters.renderSprintSelector = function(opt_data, opt_ignored) {
  return '<dl id="ghx-controls-sprint" class="ghx-controls-filters ghx-controls-sprint js-sprint-info">' + GH.tpl.component.sprintfilters.renderNoneActive(null) + '</dl>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintSelector.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintSelector';
}


GH.tpl.component.sprintfilters.renderNoneActive = function(opt_data, opt_ignored) {
  return '<dt>' + soy.$$escapeHtml('Sprint') + ':</dt><dd><span class="ghx-fa">' + soy.$$escapeHtml('No active sprints') + '</span></dd>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderNoneActive.soyTemplateName = 'GH.tpl.component.sprintfilters.renderNoneActive';
}


GH.tpl.component.sprintfilters.renderSprints = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.sprints.length == 0) {
    output += GH.tpl.component.sprintfilters.renderNoneActive(null);
  } else {
    output += '<dt>' + ((opt_data.sprints.length < 2) ? soy.$$escapeHtml('Sprint') + ':' : soy.$$escapeHtml('Sprints') + ':') + '</dt>';
    var sprintList26 = opt_data.sprints;
    var sprintListLen26 = sprintList26.length;
    for (var sprintIndex26 = 0; sprintIndex26 < sprintListLen26; sprintIndex26++) {
      var sprintData26 = sprintList26[sprintIndex26];
      output += '<dd data-sprint-id="' + soy.$$escapeHtml(sprintData26.id) + '" class="ghx-sprint "><a data-sprint-id="' + soy.$$escapeHtml(sprintData26.id) + '" role="button" class="' + ((opt_data.activeSprintMap[sprintData26.id]) ? ' ghx-active' : '') + ((opt_data.sprints.length < 2) ? ' ghx-solo' : '') + ' js-sprintfilter "><span class="ghx-name js-toggle-sprint" role="button">' + soy.$$escapeHtml(sprintData26.name) + '</span><span class="ghx-trigger js-sprint-trigger" role="button"><span class="ghx-icon ghx-icon-drop"></span></span></a></dd>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprints.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprints';
}


GH.tpl.component.sprintfilters.renderSprintDetails = function(opt_data, opt_ignored) {
  return '<div class="js-sprint-details ghx-sprint-details ghx-inline-dialog-content" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.id) + '"><form class="aui"><fieldset><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml('Sprint name') + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'sprintName', fieldValue: opt_data.sprint.name, displayValue: opt_data.sprint.name}) + '</div><div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml('Start Date') + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'startDate', fieldValue: opt_data.sprint.startDate, displayValue: opt_data.sprint.startDate}) + '<span id="ghx-sprint-start-date-error"></span></div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml('End date') + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'endDate', fieldValue: opt_data.sprint.endDate, displayValue: opt_data.sprint.endDate}) + '<span id="ghx-sprint-end-date-error"></span></div><div class="group"><div class="radio"><button id="ghx-complete-sprint" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.id) + '"' + ((! opt_data.canUpdateSprint) ? ' disabled title="' + soy.$$escapeHtml('You must have the Manage sprints permission to complete a sprint') + '"' : '') + ' class="aui-button">' + soy.$$escapeHtml('Complete sprint\u2026') + '</button></div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintDetails.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintDetails';
}


GH.tpl.component.sprintfilters.renderSprintMeta = function(opt_data, opt_ignored) {
  return '<div class="ghx-sprint-meta" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint ? opt_data.sprint.id : '') + '">' + ((opt_data.sprint) ? '<span class="time">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'time'}) + '<span class="days-left">' + soy.$$escapeHtml(AJS.format('{0} {0,choice,0#days|1#day|2#days} remaining',opt_data.sprint.daysRemaining)) + '</span></span>' : '') + '<div class="complete-sprint-container"' + ((opt_data.tooltipText) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipText) + '"' : 'data-tooltip=""') + '>' + aui.buttons.button({text: 'Complete sprint', extraClasses: 'js-complete-sprint ' + (opt_data.isDisabled ? ' disabled' : ''), id: 'ghx-complete-sprint', isDisabled: opt_data.isDisabled}) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintMeta.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintMeta';
}


GH.tpl.component.sprintfilters.renderSprintDatesTooltip = function(opt_data, opt_ignored) {
  return '<div class="ghx-sprint-dates"><p>' + soy.$$escapeHtml('Start Date') + ' <b>' + soy.$$escapeHtml(opt_data.sprint.startDate) + '</b></p><p>' + soy.$$escapeHtml('Projected End Date') + ' <b>' + soy.$$escapeHtml(opt_data.sprint.endDate) + '</b></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintDatesTooltip.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintDatesTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SearchFilter.js' */
GH.Components||(GH.Components={}),GH.Components.SearchFilter=function(e){this.searchQueryCallback=e,this.regexReserved=new RegExp("[.*+?|()\\[\\]{}\\\\]","g")},GH.Components.SearchFilter.prototype.getExpandedSearchFieldWidth=function(){var e=AJS.$("#ghx-backlog-search-input"),a=AJS.$("#js-quickfilters-label"),t=AJS.$("#js-plan-quickfilters").position().left,r=e.position().left,s=t+a.width(),i=s-r;return i},GH.Components.SearchFilter.prototype.render=function(){var e=GH.tpl.component.searchFilter.renderSearchBox(),a=AJS.$(e),t=this,r=a.find("#ghx-backlog-search-input");return r.focus(function(){a.addClass("ghx-active"),r.css({width:t.getExpandedSearchFieldWidth()}),a.parent().addClass("ghx-search-active")}),r.blur(function(){var e=AJS.$.trim(r.val());_.isEmpty(e)&&setTimeout(function(){r.val(""),a.removeClass("ghx-active"),a.find(".aui-iconfont-remove").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small"),r.css({width:""}),a.parent().removeClass("ghx-search-active")},400)}),r.bind("keydown",function(e){27==e.keyCode&&(r.val(""),r.blur(),t.searchQuery())}),a.find(".js-search-trigger").click(function(){a.hasClass("ghx-active")?(a.removeClass("ghx-active"),r.css({width:""}),a.parent().removeClass("ghx-search-active"),a.find(".aui-iconfont-remove").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small"),r.val(""),t.searchQuery()):(a.addClass("ghx-active"),r.css({width:t.getExpandedSearchFieldWidth()}),a.parent().addClass("ghx-search-active"),r.focus())}),r.keyup(function(e){return 13==e.keyCode?void r.blur():(""!==r.val()?a.find(".aui-iconfont-search-small").removeClass("aui-iconfont-search-small").addClass("aui-iconfont-remove"):a.find(".aui-iconfont-remove").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small"),void t.searchQuery())}),a.submit(function(e){e.preventDefault()}),a},GH.Components.SearchFilter.prototype.clearSearchBox=function(){var e=AJS.$("#ghx-backlog-search");e.removeClass("ghx-active"),e.parent().removeClass("ghx-search-active"),e.find(".ghx-search").val("").css({width:""})},GH.Components.SearchFilter.prototype._queryToRegex=function(e){var a;return a=_.isEmpty(e)?".*":_.map(e.split(" "),function(e){return"(?=.*("+e+"))"}).join(""),new RegExp(a,"i")},GH.Components.SearchFilter.prototype.clearLastSearch=function(){this.lastSearch=""},GH.Components.SearchFilter.prototype.stopEdit=function(e){var a=e.find("#ghx-backlog-search-input");a.blur()},GH.Components.SearchFilter.prototype.searchQuery=function(){var e=AJS.$.trim(AJS.$("#ghx-backlog-search-input").val());if(e!==this.lastSearch)if(this.lastSearch=e,""===e)this.searchQueryCallback(null);else{var a;try{a=this._queryToRegex(e),this.searchQueryCallback(a)}catch(t){a=this._queryToRegex(e.replace(this.regexReserved,"\\$&")),this.searchQueryCallback(a)}}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/SearchFilter.soy' */
// This file was automatically generated from SearchFilter.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.searchFilter.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.searchFilter == 'undefined') { GH.tpl.component.searchFilter = {}; }


GH.tpl.component.searchFilter.renderSearchBox = function(opt_data, opt_ignored) {
  return '<form id="ghx-backlog-search" class="aui"><div class="ghx-backlog-search"><input class="text ghx-search" type="text" id="ghx-backlog-search-input"><span class="js-search-trigger ghx-iconfont aui-icon aui-icon-small aui-iconfont-search-small"></span></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.component.searchFilter.renderSearchBox.soyTemplateName = 'GH.tpl.component.searchFilter.renderSearchBox';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/PresentationMode.js' */
!function(){"use strict";var e=(require("jira-agile/tooltip"),require("jira/featureflags/simplified-ux-feature-manager"));GH.PresentationMode={},GH.PresentationMode.NORMAL_MODE="normal",GH.PresentationMode.COMPACT_MODE="compact",GH.PresentationMode.PROJECTOR_MODE="projector",GH.PresentationMode.allModes=[GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.COMPACT_MODE,GH.PresentationMode.PROJECTOR_MODE],GH.PresentationMode.mode=GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.enabled=!1,GH.PresentationMode.init=function(){var t=this,n=GH.PresentationMode.getStoredMode();this.mode=GH.PresentationMode.validateMode(n),this.enabled=!0;var o=function(e){e.isCollapsed(!0)||t.setPresentationMode(GH.PresentationMode.NORMAL_MODE)};e.isAdg3StylesEnabled()&&this.mode===GH.PresentationMode.COMPACT_MODE&&(JIRA.API.getSidebar().then(o),require("jira/navigation").then(o)),this._updateBodyClasses(),this.registerEventsHandler()},GH.PresentationMode.isHeaderHidden=function(){return this.mode===GH.PresentationMode.COMPACT_MODE||this.mode===GH.PresentationMode.PROJECTOR_MODE},GH.PresentationMode.isNormalMode=function(){return this.mode===GH.PresentationMode.NORMAL_MODE},GH.PresentationMode.isProjectorMode=function(){return this.mode===GH.PresentationMode.PROJECTOR_MODE},GH.PresentationMode.toggleNormalAndCompact=function(){GH.PresentationMode.iterateThroughPresentationModes([GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.COMPACT_MODE])},GH.PresentationMode.validateMode=function(e){return _.contains(GH.PresentationMode.allModes,e)?e:GH.PresentationMode.NORMAL_MODE},GH.PresentationMode.setPresentationMode=function(e){GH.PresentationMode.enabled&&(e=GH.PresentationMode.validateMode(e),this.mode=e,GH.PresentationMode.setStoredMode(e),this._updateUI())},GH.PresentationMode.iterateThroughPresentationModes=function(e){var t=_.indexOf(e,this.mode);t+=1,t%=e.length,GH.PresentationMode.setPresentationMode(e[t])},GH.PresentationMode._registerClickHandler=function(e){var t=this;AJS.$(".js-toggle-fullscreen",e).unbind("click.presentationMode").bind("click.presentationMode",function(e){t.toggleNormalAndCompact(),t.fireAnalytics(),e.preventDefault()})},GH.PresentationMode.registerEventsHandler=function(){var t=this;GH.ViewActions.on("boardToolsRendered",function(e){var n=AJS.$("#"+e.sectionId+"-content");GH.PresentationMode._registerClickHandler(n),t.updateMenus()},this);var n=function(){t.mode===GH.PresentationMode.COMPACT_MODE&&t.setPresentationMode(GH.PresentationMode.NORMAL_MODE)};e.isAdg3StylesEnabled()&&(JIRA.API.getSidebar().then(function(e){return e.on(e.events.SIDEBAR_EXPAND_END,n)}),require("jira/navigation").then(function(e){return e.onExpand(n)}))},GH.PresentationMode._updateUI=function(){AJS.$("body").click(),this._updateBodyClasses(),GH.RapidBoard.ViewController.handleResizeEvent(),this.updateMenus(),this.updateGlobalSidebar(),AJS.$(window).resize()},GH.PresentationMode.updateGlobalSidebar=function(){var t=this,n=function(e){switch(t.mode){case GH.PresentationMode.COMPACT_MODE:e.collapse(!0);break;case GH.PresentationMode.NORMAL_MODE:e.expand(!0)}};e.isAdg3StylesEnabled()&&(JIRA.API.getSidebar().then(n),require("jira/navigation").then(n))},GH.PresentationMode.updateMenus=function(){var e=this.isHeaderHidden()?"Show menus":"Hide menus";AJS.$(".js-toggle-fullscreen").empty().append(document.createTextNode(e))},GH.PresentationMode._updateBodyClasses=function(){var e=AJS.$("body");this.isHeaderHidden()?e.addClass("ghx-header-compact"):e.removeClass("ghx-header-compact"),this.isProjectorMode()?e.addClass("ghx-contrast-high"):e.removeClass("ghx-contrast-high")},GH.PresentationMode.fireAnalytics=function(){var e=GH.RapidBoard.State.getMode(),t=e?e:"board",n=this.isHeaderHidden()?"hide":"show";AJS.trigger("analyticsEvent",{name:"jira-software."+t+".boardmenu.click."+n+"-menus"})},GH.PresentationMode.getStoredMode=function(){return GH.storage.get("gh.presentation.mode",!0)},GH.PresentationMode.setStoredMode=function(e){GH.storage.put("gh.presentation.mode",e,!0)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ViewActions.js' */
!function(){"use strict";var e=require("jquery"),i=require("jira/ajs/dropdown/dropdown"),t=require("jira-agile/rapid/const/PageMode"),o=require("jira-agile/rapid/work/quick-filters-bridge"),n=require("jira-agile/rapid/ui/SPConfigController"),a=require("jira/analytics/web-client"),s=require("jira-agile/rapid/ui/bento/bento-features"),r=require("jira-agile/features/feature-flags"),c=require("jira/featureflags/feature-manager");GH.ViewActions={},GH.Events(GH.ViewActions),GH.ViewActions.currentViewId=void 0,GH.ViewActions.currentViewName=void 0,GH.ViewActions.currentMode=t.WORK,GH.ViewActions.processData=function(e){return function(i){var t=!1;i&&(GH.ViewActions.currentViewId=i.id,GH.ViewActions.currentViewName=i.name,GH.ViewActions.canEdit=i.canEdit,t=i.canEdit),e(),GH.ViewActions.setView(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName,t)}},GH.ViewActions.initViewActions=GH.ViewActions.processData(e.noop),GH.ViewActions.shouldHideMenu=function(){return GH.RapidBoard.State.isAgilityBoard()},GH.ViewActions.refreshBoardTools=function(){function i(i){function t(e){return e.replace(/(!|"|#|\$|%|&|'|\(|\)|\*|\+|,|\.|\/|:|;|<|=|>|\?|@|\[|\\|\]|\^|`|\{|\||\}|~)/g,"\\$1")}function o(t){t[0].bind("showLayer",_.once(function(){var o=e(GH.tpl.board.x.renderSectionContent(i));e("#"+s).html(o),GH.ViewActions.trigger("boardToolsRendered",{sectionId:n,dropdown:t})}))}var n=t(i.id),a=n+"-button",s=n+"-content";try{var r=GH.ViewActions.registerDropdown(a,s);o(r)}catch(c){console.error("Error rendering dropdown for section"+i.id+":"+c.message)}}e("#ghx-view-pluggable").css("visibility","hidden"),GH.ViewActions.shouldHideMenu()||GH.ViewActions.currentViewId&&GH.Ajax.get({url:"/xboard/toolSections",data:{mode:GH.ViewActions.mode,rapidViewId:GH.ViewActions.currentViewId,selectedProjectKey:GH.RapidBoard.projectKey},deferErrorHandling:!1}).then(function(t){var n=GH.tpl.board.x.renderToolSections(t),a=e("#ghx-view-pluggable");a.html(n),_.each(t.sections,function(e){i(e)}),c.isFeatureEnabled(r.DEFER_FILTERS_AND_HANDLERS)?(JIRA.API.getSidebar().then(function(){return o.isReactFiltersEnabled().then(function(){a.css("visibility","visible")})}),require("jira/navigation").then(function(){return o.isReactFiltersEnabled().then(function(){a.css("visibility","visible")})})):o.isReactFiltersEnabled().then(function(){a.css("visibility","visible")})}),GH.ReleaseVersionTrigger.remove()},GH.ViewActions.registerDropdown=function(t,o){var n=e("#"+t),a=e("#"+o);return n.click(_.wrap(function(){e(window).resize();var i=GH.RapidBoard.State.getMode()||"board";AJS.trigger("analyticsEvent",{name:"jira-software."+i+".boardmenu.click."+(a.is(":visible")?"open":"closed")})},_.defer)),i.create({trigger:n,content:a,alignment:AJS.RIGHT,width:"auto"})},GH.ViewActions.renderOnConfiguration=GH.ViewActions.processData(e.noop),GH.ViewActions.renderOnManage=GH.ViewActions.processData(function(){e("#ghx-modes-tools").html(GH.tpl.viewactions.renderManageViewActions())}),GH.ViewActions.setView=function(i,t,o){e("#ghx-modes-tools").find(".aui-button.js-view-action-create").attr("disabled","disabled"),i&&e(".js-view-action-configure").removeClass("disabled"),GH.UserData.hasUser()&&GH.UserData.userConfig.canCreateBoard&&(GH.UserData.userConfig.canCreateProject||GH.UserData.userConfig.hasProjectsAccessible||GH.UserData.userConfig.hasFiltersAccessible)&&e("#ghx-modes-tools").find(".aui-button.js-view-action-create").removeAttr("disabled")},GH.ViewActions.setMode=function(e){e!==GH.ViewActions.mode&&(GH.ViewActions.mode=e),e&&GH.ViewActions.refreshBoardTools()},GH.ViewActions.adjustButtonsToMode=function(i){var o=e(".js-view-actions-plan"),n=e(".js-view-actions-work"),a=e(".js-view-actions-report"),s=e(".js-view-actions-print");switch(o.hide(),n.hide(),a.hide(),s.hide(),i){case t.PLAN:o.show(),GH.RapidBoard.State.isKanbanBoard()&&e([".js-view-action-toggle-releases-column",".js-view-action-toggle-epics-column",".js-view-action-toggle-epics-lozenge"].join(",")).hide(),s.show().find("a").removeClass("disabled");break;case t.WORK:GH.ViewActions.enableShowDetailIfIssueSelected(),GH.ViewActions.updateDetailViewModeSwitch(),n.show(),s.show().find("a").removeClass("disabled");break;case t.REPORT:a.show()}},GH.ViewActions.setSwimlanes=function(i){var t=e(".js-view-actions-work");i?t.find(".js-swimlane-action").removeClass("disabled"):t.find(".js-swimlane-action").addClass("disabled")},GH.ViewActions.setVersionsPanelVisible=function(i){var t=e(".js-view-action-toggle-releases-column");i?t.text("Hide versions panel"):t.text("Show versions panel")},GH.ViewActions.setEpicsPanelVisible=function(i){var t=e(".js-view-action-toggle-epics-column");i?t.text("Hide epics panel"):t.text("Show epics panel")},GH.ViewActions.setEpicLozengesVisible=function(i){var t=e(".js-view-action-toggle-epics-lozenge");i?t.text("Hide epic labels"):t.text("Show epic labels")},GH.ViewActions.setDetailViewVisible=function(i){var t=e(".js-view-action-toggle-detail-view");i?t.text("Hide detail view"):t.text("Show detail view")},GH.ViewActions.updateDetailViewModeSwitch=function(){var i=e(".js-view-action-switch-detail-view-mode");if(s.isBentoSidebarOnBoardEnabled()){var t=s.isUsingBentoSidebarOnBoard()?"Open issues in dialog":"Open issues in sidebar";i.text(t)}else i.hide()},GH.ViewActions.createdDropdownOnConfigurationPage=function(){e("#js-view-actions").after(GH.tpl.viewactions.renderConfigurationViewActions()),e("#board-tools-section-content").hide();var i=GH.ViewActions.registerDropdown("js-view-actions","board-tools-section-content");GH.ViewActions.bindBoardToolsClickEvents(i)},GH.ViewActions.afterBoardToolsLoaded=function(i){"board-tools-section"===i.sectionId&&(GH.ViewActions.bindBoardToolsClickEvents(i.dropdown),e(i.dropdown[0]).bind("showLayer",GH.ViewActions.enableShowDetailIfIssueSelected),e(i.dropdown[0]).bind("showLayer",GH.ViewActions.enableShowEpicLozenge),GH.ViewActions.enableShowDetailIfIssueSelected(),GH.ViewActions.enableShowEpicLozenge(),GH.ViewActions.setView(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName,GH.ViewActions.canEdit),GH.ViewActions.adjustButtonsToMode(GH.ViewActions.mode),GH.PlanView.updateViewActions())},GH.ViewActions.bindBoardToolsClickEvents=function(i){e("#board-tools-section-content .aui-list-item a").bind("click",function(t){var o=e(this);return o.hasClass("disabled")?(t.stopPropagation(),!1):void e(i).hide()}),e("#board-tools-section-content .js-view-action-toggle-detail-view").bind("click",function(e){var i=void 0;GH.WorkController.isActive()?(GH.WorkController.toggleDetailsView(),i=GH.WorkController.isDetailsViewOpened()?"show":"hide"):GH.PlanController.isActive()&&(GH.PlanController.toggleDetailsView(),i=GH.PlanController.isDetailsViewOpened()?"show":"hide"),e.preventDefault();var t=GH.RapidBoard.State.getMode()||"board";AJS.trigger("analyticsEvent",{name:"jira-software."+t+".boardmenu.click."+i+"-detail-view"})}),e("#board-tools-section-content .js-view-action-switch-detail-view-mode").bind("click",function(e){if(GH.WorkController.isActive()){var i=void 0;s.isUsingBentoSidebarOnBoard()?(GH.WorkView.setAndShowDetailViewInModalMode(),i="modal"):(GH.WorkView.setAndShowDetailViewInSidebarMode(),i="sidebar"),GH.ViewActions.updateDetailViewModeSwitch(),AJS.trigger("analyticsEvent",{name:"jira-software.work.boardmenu.click.switch-detail-view-mode",data:{viewMode:i}})}e.preventDefault()}),e("#board-tools-section-content .js-view-action-configure").bind("click",function(e){e.preventDefault(),n.openConfig()}),e("#board-tools-section-content .js-view-action-create").bind("click",function(e){e.preventDefault(),AJS.trigger("analyticsEvent",{name:"jira-software.meatballs.boardmenu.click.create-board"})}),e("#board-tools-section-content .js-view-action-print-cards").bind("click",function(e){GH.ViewActions.printCards(),e.preventDefault(),AJS.trigger("analyticsEvent",{name:"jira-software."+(GH.RapidBoard.State.getMode()||"board")+".boardmenu.click.print-cards"})})},GH.ViewActions.showCopyBoardDialog=function(e,i){this.copyBoardDialog||(this.copyBoardDialog=GH.Dialog.create({id:"copy-board-dialog",width:450,height:250}),this.copyBoardDialog.addHeader("Copy board"),this.copyBoardDialog.addPanel("",AJS.format("<p>{0}</p>","When copying a board, the source board\'s settings will be used for the new board, with both boards using the same filter.\u003cbr\u003e\u003cbr\u003e As administrator of the new board, you can modify the settings as needed."),"panel-body"),this.copyBoardDialog.addButton("Confirm",function(t){this.copyBoardDialog.hide(),GH.ViewActions.actionCopy(e,i)}.bind(this)),this.copyBoardDialog.addLink("Cancel",function(e){this.copyBoardDialog.hide()}.bind(this),"#")),this.copyBoardDialog.show(),a.sendPageEvent("copyBoardModal")},GH.ViewActions.actionDelete=function(){GH.ViewActions.currentViewId&&GH.RapidBoard.DeleteDialog.showDeleteDialog(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName)},GH.ViewActions.actionCopy=function(e,i){e||(e=GH.ViewActions.currentViewId,i=GH.ViewActions.currentViewName),GH.RapidBoard.copyRapidViewAndGotoConfiguration(e,i)},GH.ViewActions.printCards=function(){GH.ViewActions.currentViewId&&GH.RapidBoard.printCardsInRapidBoard()},GH.ViewActions.enableShowDetailIfIssueSelected=function(){if(GH.WorkController.isActive()){var i=e(".js-view-actions-work");GH.ViewActions.setDetailViewVisible(GH.WorkController.isDetailsViewOpened()),GH.WorkSelectionController.getSelectedIssueKey()?i.find(".js-view-action-toggle-detail-view").removeClass("disabled"):i.find(".js-view-action-toggle-detail-view").addClass("disabled")}else GH.PlanController.isActive()&&GH.ViewActions.setDetailViewVisible(GH.PlanController.isDetailsViewOpened())},GH.ViewActions.enableShowEpicLozenge=function(){GH.ViewActions.setEpicLozengesVisible(GH.RapidBoard.State.getEpicShownOnRapidBoard())},GH.ViewActions.toggleEpicsShowOnRapidBoard=function(){GH.RapidBoard.State.getEpicShownOnRapidBoard()?(GH.RapidBoard.State.setEpicShownOnRapidBoard(!1),GH.ViewActions.setEpicLozengesVisible(!1)):(GH.RapidBoard.State.setEpicShownOnRapidBoard(!0),GH.ViewActions.setEpicLozengesVisible(!0))},GH.ViewActions.on("boardToolsRendered",GH.ViewActions.afterBoardToolsLoaded)}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ViewActions.soy' */
// This file was automatically generated from ViewActions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.viewactions.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.viewactions == 'undefined') { GH.tpl.viewactions = {}; }


GH.tpl.viewactions.renderManageViewActions = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({extraClasses: ['js-view-action-create'], text: 'Create board'});
};
if (goog.DEBUG) {
  GH.tpl.viewactions.renderManageViewActions.soyTemplateName = 'GH.tpl.viewactions.renderManageViewActions';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/StatusCategoryPicker.js' */
GH.StatusCategoryPicker=function(){function t(t){var n={statusCategoryPicker:null,options:_.defaults({},t,a)};return e(n),s(n),i(n)}function e(t){t.options.element.html(GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions({statusCategories:t.options.statusCategories,selectedStatusCategoryId:t.options.selectedStatusCategoryId}))}function s(t){t.statusCategoryPicker=o.extend({_hasIcon:function(){return!0},setSelection:function(t){o.fn.setSelection.call(this,t),this.$container.find(".fake-ss-icon").remove(),this.$container.append(n(t).css({position:"absolute",left:"6px",top:"50%",marginTop:"-8px",boxSizing:"border-box"}).addClass("fake-ss-icon aui-ss-entity-icon"))},setSelectionByValue:function(t){var e=_.find(this.suggestionsHandler.model.getAllDescriptors(),function(e){return e.properties.value==t});e&&this.setSelection(e)},disableWithValue:function(t){this.setSelectionByValue(t),this.disable()},enableWithValueIfDisabled:function(t){this.disabled&&(this.enable(),this.setSelectionByValue(t))}}),t.statusCategoryPicker.fn._renders.entityIcon=function(t){return AJS.$()}}function n(t){var e=_.omit(AJS.$.extend({},t.model().data()),"descriptor"),s=AJS.$(JIRA.Template.Util.Issue.Status.issueStatus({issueStatus:{name:t.label(),statusCategory:e},isCompact:!0}));return s.removeClass("jira-issue-status-lozenge-tooltip").removeAttr("title").removeAttr("data-tooltip"),s}function i(t){var e=new t.statusCategoryPicker(t.options),s=e.listController._renders.suggestion;return e.listController._renders.suggestion=function(t){var e=s.apply(this,arguments);return e.find("a").prepend("&nbsp;").prepend(n(t)),e},e}var o=require("jira/ajs/select/single-select"),r=4,a={width:250,itemAttrDisplayed:"label",errorMessage:"",removeOnUnSelect:!1,statusCategories:[],selectedStatusCategoryId:r};return{build:t,defaultStatusCategoryId:r}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/StatusCategoryPicker.soy' */
// This file was automatically generated from StatusCategoryPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.statuscategorypicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.statuscategorypicker == 'undefined') { GH.tpl.component.statuscategorypicker = {}; }


GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions = function(opt_data, opt_ignored) {
  var output = '';
  var statusCategoryList3 = opt_data.statusCategories;
  var statusCategoryListLen3 = statusCategoryList3.length;
  for (var statusCategoryIndex3 = 0; statusCategoryIndex3 < statusCategoryListLen3; statusCategoryIndex3++) {
    var statusCategoryData3 = statusCategoryList3[statusCategoryIndex3];
    output += '<option value="' + soy.$$escapeHtml(statusCategoryData3.id) + '" data-self="' + soy.$$escapeHtml(statusCategoryData3.self) + '" data-id="' + soy.$$escapeHtml(statusCategoryData3.id) + '" data-key="' + soy.$$escapeHtml(statusCategoryData3.key) + '" data-color-name="' + soy.$$escapeHtml(statusCategoryData3.colorName) + '"' + ((opt_data.selectedStatusCategoryId == statusCategoryData3.id) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(statusCategoryData3.name) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions.soyTemplateName = 'GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsModel.js' */
define("jira-agile/rapid/ui/detail/details-model",["require"],function(e){"use strict";function t(e,t){return i.find(e.tabs.defaultTabs,function(e){return e.tabId.toLowerCase()===t.toLowerCase()})}var i=e("underscore"),s=GH.RapidBoard,n=(e("jira/featureflags/feature-manager"),e("jira-agile/features/feature-flags"),/\?id=\d+/),a={};return a.TAB_SECTIONS={details:["details","people","dates"],description:["description"]},a.FIELD_SECTION_PRESETS={assignee:"people",created:"dates",components:"details",description:"description",fixVersions:"details",issuekey:"header",labels:"details",reporter:"people",summary:"header",status:"details",updated:"dates",versions:"details",votes:"people"},a.fieldErrorSelectors={},a.fieldCategories={timetracking:["timeestimate","timeoriginalestimate","aggregatetimeestimate","aggregatetimeestimate_subtasks"]},a.issueIdToKeyCache={},a.getIssueKeyForId=function(e){return this.issueIdToKeyCache[e]||!1},a.viewData=null,a.clearViewData=function(){this.viewData=null},a.setViewData=function(e){this.issueIdToKeyCache[e.id]=e.key,this.processFields(e),this.applyOperationUrlPatches(e),this.filterIssueOperations(e),this.viewData=e},a.getViewField=function(e){var i=t(this.viewData,"HEADER");return i.fields.find(function(t){return t.id===e})},a.isFieldInSection=function(e,t){var s=this.fieldSections[t];return!i.isUndefined(s)&&i.any(s,function(t){return t===e})},a.getPrimaryEstimateStatisticField=function(){return 0!==this.fieldSections.estimate.length&&this.getFieldsForSection("estimate")[0]},a.getFieldsForSection=function(e){var t=this.fieldSections[e];return i.isUndefined(t)?[]:i.map(t,function(e){return this.getViewField(e)}.bind(this))},a.getErrorSelectorForField=function(e){return this.fieldErrorSelectors[e]||!1},a.processFields=function(e){this.fieldSections={header:[],estimate:[],details:[],people:[],dates:[],links:[],description:[]};var t=e.primaryStatisticFieldId||"",s=e.trackingStatisticFieldId||"",n=i.findWhere(e.tabs.defaultTabs,{tabId:"HEADER"});i.forEach(n.fields,function(e){if(e&&e.id)if(e.id===t)this.fieldSections.estimate.push(e.id);else if(e.id!==s&&"aggregatetimeestimate"!==e.id&&"aggregatetimeestimate_subtasks"!==e.id){var i=this.FIELD_SECTION_PRESETS[e.id];i=i||e.category||"details","unsupported"!==i&&this.fieldSections[i].push(e.id)}}.bind(this))},a.applyOperationUrlPatches=function(e){var t=s.getCurrentPageReturnUrl(),n=AJS.$("#atlassian-token").attr("content");e.operations&&i.each(e.operations.sections,function(e){i.each(e.operations,function(e){e.url=this.patchIssueOperationUrl(e.url,t,n),e.label=this.patchRankOperationName(e.styleClass,e.label)}.bind(this))}.bind(this))},a.patchRankOperationName=function(e,t){return"issueaction-greenhopper-rank-top-operation"===e?"Send to top":"issueaction-greenhopper-rank-bottom-operation"===e?"Send to bottom":t},a.patchIssueOperationUrl=function(e,t,i){var s="";e.indexOf("#")!==-1&&(s=e.substring(e.indexOf("#")),e=e.substring(0,e.indexOf("#"))),e+=e.indexOf("?")<0?"?":"&",e+="returnUrl="+t;var a="atl_token="+i;return e.indexOf(a)<0&&(e=e.replace("atl_token=",a)),e.indexOf("WorkflowUIDispatcher.jspa")>-1&&(e=e.replace(n,"?id={0}")),e+s},a.filterIssueOperations=function(e){var t=["view-voters","greenhopper-planningboard-operation","greenhopper-taskboard-operation","attach-screenshot","toggle-issue/detailswatch-issue","manage-watchers","move-issue","edit-labels","issue-to-subtask","clone-issue","toggle-vote-issue","greenhopper-rapidboard-operation"],n=["opsbar-transitions"],r=[];i.each(e.operations.sections,function(e){var s=i.find(n,function(t){return t===e.groupId});if(!s){var o=i.reject(e.operations,function(e){var s=i.find(t,function(t){return t===e.id});return i.isString(s)});a.renameWatchIssueId(o),o.length>0&&r.push({operations:o})}});for(var o,d,l=0;l<r.length;l++){var u=r[l];i.isUndefined(o)||(1===u.operations.length?(i.isUndefined(d)&&1===o.operations.length&&(d=o),i.isUndefined(d)||(d.operations=d.operations.concat(u.operations),u.operations=[])):u.operations.length>1&&(d=void 0)),o=u}r=i.reject(r,function(e){return 0===e.operations.length}),e.operations.filteredSections=r,s.State.isScrumBoard()&&e.editable&&e.sprint&&!e.isSubtask&&this.addRemoveFromSprintOperation(e.operations),this.addFlagOperation(e.operations,!e.flagged)},a.renameWatchIssueId=function(e){i.find(e,function(e){if("toggle-watch-issue"===e.id)return e.id="gh-toggle-watch-issue",!0})},a.addRemoveFromSprintOperation=function(e){return e.filteredSections.push({operations:[{id:"removeIssueFromSprint",label:"Remove from sprint",styleClass:"issueaction-remove-issue-from-sprint js-remove-issue-from-sprint",title:"Removes this issue from the current sprint",url:""}]}),e},a.addFlagOperation=function(e,t){t?e.filteredSections.push({operations:[{id:"flagIssueAndComment",label:"Add flag",styleClass:"issueaction-flag-and-comment js-flag-issue-and-comment",title:"Add flag",url:""}]}):e.filteredSections.push({operations:[{id:"unflagIssueAndComment",label:"Remove flag",styleClass:"issueaction-unflag-and-comment js-unflag-issue-and-comment",title:"Remove flag",url:""}]})},a.hasIssueOperation=function(e){return i.find(this.viewData.operations.sections,function(t){return i.find(t.operations,function(t){return t.id===e})})},a.getInlineEditableFields=function(){var e=this,i=AJS.$.Deferred();return GH.DetailsView.getExtraTabsAttributes().done(function(s){var n=s?t({tabs:s},"DETAILS").inlineEditableFields:null;i.resolveWith(e,[n])}),i.promise()},a.getTimeTrackingFields=function(){var e=this.getViewField("timeestimate");if(!e)return null;var t=this.getViewField("aggregatetimeestimate"),i=this.getViewField("aggregatetimeestimate_subtasks");return{currentIssueRemainingEstimateField:e,aggregateRemainingField:t,aggregateRemainingSubtaskField:i}},a.replaceUpdatedTabs=function(e){this.viewData.tabs.defaultTabs=i.map(this.viewData.tabs.defaultTabs,function(t){var s=i.findWhere(e.defaultTabs,{tabId:t.tabId});return s?s:t})},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsFieldRenderer.js' */
define("jira-agile/rapid/ui/detail/details-field-renderer",["underscore","jira-agile/tooltip","jira-agile/rapid/ui/detail/details-model"],function(e,t,i){"use strict";function a(e,t){var i=t.find("#"+e.tabId+"-nav"),a=AJS.$(GH.tpl.detailview.renderTabNavigation({tab:e}));a&&i.replaceWith(a)}var n=GH.RapidViewConfig,s={};return s.renderFields=function(t,a,n){this.renderDetailsHeaderFields(t,a,n);var s=[{fieldsSelector:"details"},{fieldsSelector:"people",title:"People"},{fieldsSelector:"dates",title:"Dates"}],r=e.reduce(s,function(e,t){var a=i.getFieldsForSection(t.fieldsSelector);return a.length>0&&e.push({title:t.title,fields:a}),e},[]),d=a.find("#ghx-detail-nav"),l=a,u=this.buildTabs(t,r);this.renderTabs(t,l,d,u),this.initTabTooltips(l)},s.renderDetailsHeaderFields=function(e,t,a){var n=i.getViewField("issuekey"),s=i.getViewField("summary"),r=t.find("#ghx-detail-head"),d=r.find(".ghx-key"),l=this.renderField(e,n);d.empty(),d.append(l);var u=t.attr("data-issueid");this.renderJiraLink(e,n,r,u);var o=this.renderField(e,s);r.find(".ghx-detail-summary").empty().append(o),this.renderEstimationAndTimeTracking(e,r);var c=a.showLogWorkTrigger&&i.hasIssueOperation("log-work");this.renderLogWorkTrigger(e,r,c)},s.renderEstimationAndTimeTracking=function(e,t){var a=t.find(".ghx-statistic-group"),n=i.getPrimaryEstimateStatisticField(),s=i.getTimeTrackingFields();n||s?(this.renderEstimateStatisticField(n,e,a),s?this.renderTimeTrackingFields(s,e,a):a.find(".ghx-remaining-group").remove()):a.empty()},s.buildTabs=function(e){var t=[];return e.tabs.defaultTabs.length>0&&this._addTabs(t,e.tabs.defaultTabs,e),t},s._addTabs=function(t,i,a){e.each(i,function(e){"HEADER"!==e.tabId&&t.push({tabId:e.tabId,sections:[]})}.bind(this)),e.each(i,function(i){var n="THIRD_PARTY_TAB"!==i.tabId,s=e.findWhere(t,{tabId:i.tabId});s&&("SUB_TASKS"===i.tabId?this.addSubtaskTab(s.sections,i,a.trackingStatisticFieldId,a.key):i.sections&&e.each(i.sections,function(t){if(t.providerKey&&(t.iconURL||t.iconFont||n)){var a;a=n?t.providerKey.split(":")[1]:"ghx-tab-"+t.providerKey,t.titleCount=this._getTitleCount(t,i);var r=e.extend(t,{id:a.replace(/\./g,"-").replace(/:/g,"-"),title:t.label,hasTitleCount:!e.isUndefined(t.titleCount),thirdPartyTab:!n,isLazyLoading:!1,subpanelHtmls:[]});s.sections.push(r)}}.bind(this)))}.bind(this))},s.addSubtaskTab=function(t,a,n,s){if(a.subtaskEntries){var r,d=!!e.find(a.subtaskEntries,function(e){return e.canEdit||e.canDelete}),l=!e.isUndefined(n);if(l){var u=i.getViewField("aggregatetimeestimate_subtasks");u&&(r=u.html)}t.push({id:"subtasks",title:"Sub-Tasks",titleCount:a.subtaskEntries.length,hasTitleCount:!0,subtasks:a.subtaskEntries,canCreateSubtask:i.hasIssueOperation("create-subtask"),showActionsColumn:d,showTrackingField:l,trackingFieldSum:r,parentIssueKey:s,iconFont:"jira-completed-task"})}},s.renderSubtaskAsHtmlNode=function(t){var i=e.first(t.subtasks),a=i&&i.status.statusCategory;return AJS.$(GH.tpl.detailview.renderSubtasks({subtasks:t.subtasks,canCreateSubtask:t.canCreateSubtask,showActionsColumn:t.showActionsColumn,showTrackingField:t.showTrackingField,trackingFieldSum:t.trackingFieldSum,statusCategoriesAvailable:a}))},s.renderSections=function(t,i){var a=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:t.title}));i.append(a),e.each(t.sections,function(e){this.renderSection(i,e,t.viewData)}.bind(this))},s.renderSection=function(t,i,a){var n,s=AJS.$(GH.tpl.detailview.renderTabSection({renderTitle:!e.isUndefined(i.title),title:i.title}));if(i.fields){if(0===i.fields.length)return;n=s.find(".ghx-tab-section-content"),e.each(i.fields,function(e){var t=this.renderField(a,e);n.append(t)}.bind(this)),t.append(s)}else if(i.issueLinks){n=s.find(".ghx-tab-section-content");var r=GH.tpl.detailview.issuelinks.renderIssueLinks({issueLinkTypeEntries:i.issueLinks.issueLinkTypeEntries,canLink:i.issueLinks.canLink});n.replaceWith(r),t.append(s)}},s.renderField=function(e,t){var i=AJS.$(GH.tpl.detailview.renderFieldStructure({issueDetails:e,field:t})),a=this.renderFieldContent(t);return i.find("dd").html(a),i},s.renderLogWorkTrigger=function(e,t,i){var a=t.find("#ghx-log-work-container");i?a.css({display:""}):a.css({display:"none"})},s.renderJiraLink=function(e,t,i,a){var n=i.find(".js-view-in-jira"),s=GH.tpl.detailview.renderIssueLink({issueKey:t.text});n.find("dd").html(s),n.on("mousedown",function(e){if(1===e.which||2===e.which){var t=e.which-1;AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open.full.issue",data:{pageMode:GH.RapidBoard.State.getMode(),issueId:a,middleClick:t}})}})},s.renderFieldContent=function(e){var t;if("description"===e.id)return t=GH.tpl.detailview.renderDescriptionHtmlView({field:e});if(e.id===n.currentData.data.estimationStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});if(e.id===n.currentData.data.trackingStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});if("aggregatetimeestimate"===e.id&&"timeestimate"===n.currentData.data.trackingStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});switch(e.renderer){case"html":t=GH.tpl.detailview.renderHtmlView({field:e});break;case"date":t=GH.tpl.detailview.renderDateView({field:e});break;case"epiclink":t=GH.tpl.field.epicLink.renderEpicLink({field:e,removableIfAllowed:!0});break;case"status":t=GH.tpl.status.renderText({status:e.statusEntry});break;case"text":default:t=GH.tpl.detailview.renderTextView({field:e})}return t},s.initTabTooltips=function(e){var i=".ghx-detail-nav-menu a";return t.tipsify({context:e,selector:i,gravity:"e"}),e.find(i)},s.renderTabs=function(e,t,i,a){var n=AJS.$(GH.tpl.detailview.renderTabs({tabs:a})),s=AJS.$(GH.tpl.detailview.renderTabMenuStructure({tabs:a}));t.append(s),i.append(n),this.renderTabsContent(a,t.find(".ghx-detail-nav-menu"),i)},s.updateTabsContent=function(e,t){var i=this.buildTabs(e),a=t.find("#ghx-detail-nav");this.renderTabsContent(i,t.find(".ghx-detail-nav-menu"),a)},s.renderTabsContent=function(t,i,n){e.each(t,function(t){a(t,i);var s=n.find("#"+t.tabId);s.empty(),e.each(t.sections,function(e){e.subtasks?s.append(this.renderSubtasks(e)):s.append(this.renderTab(e))}.bind(this))}.bind(this))},s.renderSubtasks=function(t){var i=this.renderSubtaskAsHtmlNode(t),a={links:[],groups:[]};return t.canCreateSubtask&&t.subtasks.length>0&&a.links.push({id:"createSubtask",title:"Create Sub-Task",label:"Create Sub-Task",styleClass:"icon issueaction-create-subtask aui-icon aui-icon-small aui-iconfont-add issueaction-aui-icon"}),AJS.$.extend(t,{html:e.map(i,function(e){return AJS.$("<DIV></DIV>").append(AJS.$(e).clone()).html()}).join(""),headerLinks:a,renderHeader:!0,subpanelHtmls:[]}),this.renderTab(t)},s.renderTab=function(e){var t=[];if(e.headerLinks){var i=AJS.$(JIRA.Components.IssueViewer.Templates.Body.issuePanel({html:e.html,id:e.id,label:e.title,renderHeader:e.renderHeader,headerLinks:e.headerLinks,subpanelHtmls:e.subpanelHtmls}));i.addClass("ghx-detail-section"),t=i}else{var a=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:e.title}));t.append(a),t.append(AJS.$(e.html))}return e.thirdPartyTab||e.iconFont||e.iconURL||t.addClass("ghx-no-tab-menu"),e.tabIconId?t.attr("ghx-tab-icon-id",e.tabIconId):e.iconFont||e.iconURL||t.addClass("ghx-hidden-tab"),t},s._getTitleCount=function(t,i){var a;if(e.isUndefined(t.titleCount))switch(i.tabId){case"ATTACHMENT":a=i.totalCount;break;case"COMMENT":a=i.totalComments}else a=t.titleCount;return a},s.renderEstimateStatisticField=function(t,i,a){if(t){var n=e.extend({},t,{dataTooltip:t.label,label:"Estimate"});this.renderStatisticFields([n],".js-estimate",i,a)}else a.find(".js-estimate").remove()},s.renderTimeTrackingFields=function(t,i,a){var n=[];if(n.push(e.extend({},t.currentIssueRemainingEstimateField,{dataTooltip:t.currentIssueRemainingEstimateField.label,label:"Remaining"})),t.aggregateRemainingField){var s=GH.tpl.detailview.renderAggregateRemainingEstimateTooltip({data:[{label:"Parent",value:t.currentIssueRemainingEstimateField.text},{label:t.aggregateRemainingSubtaskField?t.aggregateRemainingSubtaskField.label:null,value:t.aggregateRemainingSubtaskField?t.aggregateRemainingSubtaskField.text:null}]});n.push(e.extend({},t.aggregateRemainingField,{dataTooltip:s,label:"Remaining sum"}))}this.renderStatisticFields(n,".js-remainings",i,a)},s.renderStatisticFields=function(t,i,a,n){var s=n.find(i);s.empty(),e.each(t,function(t){var i=this.renderField(a,t);s.append(i),e.isUndefined(t.text)?s.addClass("ghx-empty"):s.removeClass("ghx-empty")}.bind(this))},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsView.js' */
!function(){"use strict";function e(e,i){r.disable(AJS.$("[data-tooltip][data-field-id="+i+"]"))}function i(e,i){r.enable(AJS.$("[data-tooltip][data-field-id="+i+"]"))}function t(){return GH.DetailsView.getContainer().find("#addcomment").hasClass("active")}function a(e){return"none"===e.css("display")?0:e.width()}var s=require("aui/tabs"),n=require("jira-agile/rapid/analytics-tracker"),l=require("jira/analytics/web-client"),r=require("jira-agile/tooltip"),o=require("jira/ajs/dropdown/dropdown"),d=require("jira/util/events"),c=require("jira/components/issueeditor/eventtypes"),u=require("jira-agile/rapid/ui/detail/details-model"),w=require("jira-agile/rapid/ui/detail/details-field-renderer");GH.DetailsView=new GH.Events,GH.DetailsView._InlineEditor=require("jira-agile/rapid/ui/detail/inlineedit/issue-detail-view-inline-editor"),GH.DetailsView._Reloader=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reloader"),GH.DetailsView.minWidth=400,GH.DetailsView.API_EVENT_DETAIL_VIEW_UPDATED="GH.DetailView.updated",GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED="GH.DetailView.closed",GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED="GH.DetailView.update.started",GH.DetailsView.selectedIssueKey=void 0,GH.DetailsView.rapidViewId=void 0,GH.DetailsView.rapidViewConfig=void 0,GH.DetailsView.containerSelector=void 0,GH.DetailsView.TAB_SUBTASKS="subtasks",GH.DetailsView.$lastSectionSpacer=void 0,GH.DetailsView.opts={canClose:!0,showActionsCog:!0,showSubtaskTab:!0,showLogWorkTrigger:!1,updateSizeHandler:function(){}},GH.DetailsView.analytics=new n("gh.issueaction.issuedetail"),GH.DetailsView.triggerAnalyticsOpenDetailView=function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open"}),GH.DetailsView.analytics.openDetailViewTime=Date.now()},GH.DetailsView.triggerAnalyticsCloseDetailView=function(){var e=GH.DetailsView.analytics.openDetailViewTime,i=Date.now();!e||i-e>3e3?AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.close"}):AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.dismiss"}),GH.DetailsView.analytics.openDetailViewTime=null},GH.DetailsView.triggerAnalyticsEventForAction=function(e,i){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail."+e,data:i})},GH.DetailsView.init=function(){AJS.$(document).bind("tabSelect",GH.DetailsView.handleTabSelection),AJS.$(document).delegate(".js-detailclose","click",function(e){GH.DetailsView.closeHandler&&(GH.DetailsView.closeHandler(e),GH.DetailsView.triggerAnalyticsCloseDetailView())})},GH.DetailsView.getMode=function(){return GH.RapidBoard.ViewController.getMode()},GH.DetailsView.setContainerSelector=function(e){GH.DetailsView.containerSelector=e,e&&AJS.$(e).addClass("gh-editable-detail-view")},GH.DetailsView.setOptions=function(e){GH.DetailsView.opts=e,GH.DetailsView.closeHandler=GH.DetailsView.opts.closeHandler},GH.DetailsView.getContainer=function(){return GH.DetailsView.containerSelector?AJS.$(GH.DetailsView.containerSelector):AJS.$()},GH.DetailsView._getContentContainer=function(){return GH.DetailsView.getContainer().find(".ghx-detail-contents")},GH.DetailsView._getIssueElement=function(){return GH.DetailsView.getContainer().find(".ghx-detail-issue")},GH.DetailsView._replaceUpdatedFields=function(e,i,t){function a(e){return!_.contains(GH.DetailsView.getEditsInProgress(),e)}function s(e){return _.contains(["timeestimate","timeoriginalestimate"],e)}GH.DetailsView._replaceField(e,i,t),"timeoriginalestimate"===t&&a("timeestimate")&&GH.DetailsView._replaceField(e,i,"timeestimate"),"timeestimate"===t&&a("timeoriginalestimate")&&GH.DetailsView._replaceField(e,i,"timeoriginalestimate"),s(t)&&GH.DetailsView._replaceField(e,i,"aggregatetimeestimate")},GH.DetailsView._replaceField=function(e,i,t){var a=GH.DetailsView._InlineEditor.getFieldSelector(t),s=e.find(a),n=i.find(a);0===n.length?s.closest("li, dl").remove():(s.replaceWith(n),GH.DetailsView._InlineEditor.triggerFieldUpdate(t,e,n))},GH.DetailsView._setIssueElement=function(e,i){var t=GH.DetailsView._getIssueElement();return 0===t.length?void GH.DetailsView._getContentContainer().prepend(e):void(i&&GH.DetailsView.hasEditsInProgress()?GH.DetailsView._replaceUpdatedFields(t,e,i):t.replaceWith(e))},GH.DetailsView.setRapidViewId=function(e){GH.DetailsView.rapidViewId=e},GH.DetailsView.setRapidViewConfig=function(e){GH.DetailsView.rapidViewConfig=e,GH.DetailsView.opts.showLogWorkTrigger&&(GH.DetailsView.opts.showLogWorkTrigger=!_.isUndefined(e.trackingStatistic)&&e.trackingStatistic.isEnabled)},GH.DetailsView.setSelectedIssueKey=function(e){GH.DetailsView.selectedIssueKey=e},GH.DetailsView.getSelectedIssueKey=function(){return GH.DetailsView.selectedIssueKey},GH.DetailsView.clearSelectedIssueKey=function(){GH.DetailsView.selectedIssueKey=void 0};var D=function(e,i,t){if(e.key===GH.DetailsView.selectedIssueKey&&(u.setViewData(e),!_.isUndefined(i)&&_.isFunction(i)&&i(t),GH.DetailsView.currentPromise=void 0,(!GH.RapidBoard.State.isWorkRenderImprovementEnabled()||GH.RapidBoard.State.isPlanMode()||GH.DetailsView.opts.isUsingBentoSidebarOnBoard)&&(GH.DetailsView.makeResizable(),AJS.$("#ghx-issue-fragment").on("initialize-resize-handle",function(){GH.DetailsView.makeResizable()})),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()&&!GH.RapidBoard.State.isPlanMode()||GH.BacklogView.checkBacklogWidth(),!GH.DetailsView.opts.isBentoInBacklogEnabled&&!GH.DetailsView.opts.isUsingBentoSidebarOnBoard)){var a=Date.now()-GH.DetailsView.analytics.startLoadTime,s=JIRA.API&&JIRA.API.Projects;AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.load",data:{loadingTimeMs:a,issueId:e.id,projectId:s&&s.getCurrentProjectId(),projectType:s&&s.getCurrentProjectType(),analyticsSource:GH.RapidBoard.State.getMode()}}),V(e)}},V=function(e){var i={objectType:"issue",objectId:e.id,containerType:"project",attributes:{boardId:GH.RapidViewConfig.currentData.data.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectType:"software"},action:"viewed",actionSubject:"issue",actionSubjectId:e.id,source:GH.RapidBoard.State.isPlanMode()?"backlogScreen":"boardScreen"};l.sendTrackEvent(i)},H=function(){var e=GH.DetailsView.getContainer();if(0===e.find("#ghx-detail-contents").length){if(!GH.DetailsView.opts.isBentoInBacklogEnabled&&!GH.DetailsView.opts.isUsingBentoSidebarOnBoard){var i=GH.tpl.detailview.renderIssueDetailsSkeleton();e.empty().append(i)}e.width(GH.DetailsView.getWidth()),GH.DetailsView.initTooltips(),GH.DetailsView.triggerAnalyticsOpenDetailView()}return GH.DetailsView.selectedIssueKey?(GH.RapidBoard.ViewController.handleResizeEvent(),void GH.DetailsView._initInlineEditor()):void GH.DetailsView._getIssueElement().remove()};GH.DetailsView.show=function(e,i){e||u.clearViewData(),H(),GH.DetailsView.preloadPromise?(GH.DetailsView.showSpinner("load-content-spinner"),GH.DetailsView.preloadPromise.done(function(e){D(e,GH.DetailsView.renderDetails)}).always(function(){GH.DetailsView.preloadPromise=void 0,GH.DetailsView.hideSpinner("load-content-spinner")})):(GH.DetailsView.trigger("before:render"),GH.DetailsView.load(null,e,i))},GH.DetailsView.reload=GH.DetailsView.show.bind(GH.DetailsView),GH.DetailsView.getWidth=function(){var e=GH.RapidBoard.State.getDetailViewWidth(),i=e*GH.DetailsView._getTotalWidth(),t=Math.max(i,GH.DetailsView.minWidth);return Math.min(GH.DetailsView.getMaxWidth(),t)},GH.DetailsView.initTooltips=function(){var t=[".ghx-statistic-group [data-tooltip]"];r.tipsify({selector:t.join(", "),context:"#ghx-detail-contents",html:!0}),d.bind(c.INLINE_EDIT_STARTED,e),d.bind(c.BEFORE_INLINE_EDIT_CANCEL,i),d.bind(c.INLINE_EDIT_SAVE_COMPLETE,i)},GH.DetailsView.hide=function(){AJS.$("#ghx-issue-fragment").trigger("hide-detail-view"),GH.DetailsView.currentPromise&&GH.DetailsView.currentPromise.abort&&GH.DetailsView.currentPromise.abort(),GH.DetailsView.getContainer().empty(),AJS.$("#gh").removeClass("js-ghx-detail-loading").removeClass("js-ghx-detail-loaded"),AJS.$(GH).trigger(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED),GH.RapidBoard.ViewController.handleResizeEvent(),GH.DetailsView._InlineEditor.destroy()},GH.DetailsView.resizeLastSectionSpacer=function(){var e,i=AJS.$("#js-detail-nav-content"),t=i.find(".ghx-detail-section"),a=0;e=i.data("$lastSectionSpacer"),e&&(a=e.height());var s=i.height(),n=t.last(),l=n.height()-a;if(s>l){e||i.data("$lastSectionSpacer",e=AJS.$("<div>",{css:{clear:"both"}}).appendTo(n));var r=AJS.$.browser.msie?0:40;e.height(s-l-r)}},GH.DetailsView.selectNavItem=function(e){var i=_.debounce(function(e){GH.DetailsView.triggerAnalyticsEventForAction("scroll",{sectionId:e})},150),t=AJS.$(".ghx-detail-nav-menu .ghx-detail-nav-item"),a=t.filter(".ghx-selected");a.find("a").attr("href")!=="#"+e&&i(e),a.removeClass("ghx-selected");var s=AJS.$("#"+e),n=s.attr("ghx-tab-icon-id");n&&(e=n),t.find("a").filter(function(){return this.hash==="#"+e}).closest(".ghx-detail-nav-item").addClass("ghx-selected")},GH.DetailsView.updateSize=function(){GH.DetailsView.opts.updateSizeHandler(),GH.DetailsView.resizeLastSectionSpacer(),GH.DetailsView.getContainer().width(GH.DetailsView.getWidth()),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()&&!GH.RapidBoard.State.isPlanMode()||GH.BacklogView.checkBacklogWidth(),AJS.$("#ghx-detail-view").agileResizable("option","maxWidth",GH.DetailsView.getMaxWidth())},GH.DetailsView.getFixedElement=function(){return{element:GH.DetailsView.getContainer(),resizeCallback:GH.DetailsView.updateSize}},GH.DetailsView.load=function(e,i,t){if(GH.DetailsView.opts.isBentoInBacklogEnabled||GH.DetailsView.opts.isUsingBentoSidebarOnBoard){var a=i?"refresh-backlog-issue":"show-backlog-issue",s={issueKey:GH.DetailsView.selectedIssueKey};t&&(s.shortcutAction=t),AJS.$("#ghx-issue-fragment").trigger(a,s),GH.DetailsView.loadContent(e)}else AJS.$("#gh").addClass("js-ghx-detail-loading").removeClass("js-ghx-detail-loaded"),i?e?GH.DetailsView._Reloader.reload(i,e):GH.DetailsView._Reloader.reload(i):GH.DetailsView.loadContent(e,GH.DetailsView.renderDetails)},GH.DetailsView.hasEditsInProgress=function(){return GH.DetailsView.getEditsInProgress().length>0||t()},GH.DetailsView.getEditsInProgress=function(){var e=GH.DetailsView._InlineEditor&&GH.DetailsView._InlineEditor.getEditsInProgress();return e||[]};var g=function(){return{rapidViewId:GH.DetailsView.rapidViewId,issueIdOrKey:GH.DetailsView.selectedIssueKey}},G=function(e){return GH.Ajax.get({url:"/xboard/issue/details.json",data:e},"detailView")};GH.DetailsView.preloadData=function(){GH.DetailsView.preloadPromise=G(g())},GH.DetailsView.loadContent=function(e,i){GH.DetailsView.analytics.startLoadTime=Date.now(),e||GH.DetailsView.showSpinner("load-content-spinner");var t=g();GH.DetailsView._InlineEditor.getIssueAttachmentQuery()&&(t=_.extend(t,GH.DetailsView._InlineEditor.getIssueAttachmentQuery())),GH.DetailsView.currentPromise=G(t),GH.DetailsView.currentPromise.done(function(t){D(t,i,e)}).always(function(){GH.DetailsView.hideSpinner("load-content-spinner")})},GH.DetailsView.getExtraTabsAttributes=function(){return GH.Ajax.get({url:"/xboard/issue/details/extraTabsAttributes",data:g()},"extraTabsAttributes")},GH.DetailsView.showSpinner=function(e){AJS.$(".ghx-detail-view-blanket").show().spin("large").attr("spinnerOwnerId",e?e:"")},GH.DetailsView.hideSpinner=function(e){var i=AJS.$(".ghx-detail-view-blanket");e&&i.attr("spinnerOwnerId")!==e||i.hide().spin(!1).attr("spinnerOwnerId","")},GH.DetailsView.getMaxWidth=function(){return Math.max(GH.DetailsView.minWidth,GH.DetailsView._getTotalWidth()/2)},GH.DetailsView.getBacklogElementWidth=function(){return a(AJS.$("#ghx-backlog"))},GH.DetailsView.getWorkPoolElementWidth=function(){return a(AJS.$("#ghx-pool"))},GH.DetailsView.getDetailViewElementWidth=function(){return a(AJS.$("#ghx-detail-view"))},GH.DetailsView._getTotalWidth=function(){var e=GH.DetailsView.getDetailViewElementWidth();return GH.RapidBoard.State.isPlanMode()?e+GH.DetailsView.getBacklogElementWidth():GH.RapidBoard.State.isWorkMode()&&GH.DetailsView.opts.isUsingBentoSidebarOnBoard?e+GH.DetailsView.getWorkPoolElementWidth():e},GH.DetailsView.makeResizable=function(){AJS.$("#ghx-detail-view").agileResizable("destroy");var e;e=!GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||GH.RapidBoard.State.isPlanMode()?GH.BacklogView.checkBacklogWidth:AJS.$.noop,AJS.$("#ghx-detail-view").agileResizable({handles:{w:AJS.$("#js-sizer")},resize:e,stop:GH.DetailsView.storeWidth,maxWidth:GH.DetailsView.getMaxWidth(),minWidth:GH.DetailsView.minWidth}),GH.DetailsView.opts.isBentoInBacklogEnabled||GH.DetailsView.opts.isUsingBentoSidebarOnBoard||r.tipsify({selector:"#js-sizer",gravity:"e"})},GH.DetailsView.storeWidth=function(){var e=GH.DetailsView.getDetailViewElementWidth(),i=e<=GH.DetailsView.minWidth?0:e/GH.DetailsView._getTotalWidth();GH.RapidBoard.State.setDetailViewWidth(i);var t=function(e){return e>=GH.DetailsView.minWidth&&e<=500},a=function(e){return e>500&&e<=600},s=function(e){return e>600};GH.DetailsView.triggerAnalyticsEventForAction("resize",{targetWidth:t(e)?"small":a(e)?"medium":s(e)?"large":"",isNewDetailView:GH.DetailsView.opts.isBentoInBacklogEnabled,width:e})},GH.DetailsView.renderDetailsSingleField=function(e){var i=u.viewData,t=AJS.$(GH.tpl.detailview.renderIssueDetails({issueDetails:i,canClose:GH.DetailsView.opts.canClose,showActionsCog:GH.DetailsView.opts.showActionsCog&&GH.UserData.hasUser()}));w.renderFields(i,t,GH.DetailsView.opts),GH.DetailsView._setIssueElement(t,e)},GH.DetailsView.renderDetails=function(){AJS.$(GH).trigger(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED);var e=u.viewData,i=AJS.$(GH.tpl.detailview.renderIssueDetails({issueDetails:e,canClose:GH.DetailsView.opts.canClose,showActionsCog:GH.DetailsView.opts.showActionsCog&&GH.UserData.hasUser()}));w.renderFields(e,i,GH.DetailsView.opts),GH.DetailsView.registerAllListeners(i),GH.DetailsView._setIssueElement(i),GH.DetailsView.updateSize(),AJS.$(".js-epic-remove").find(".aui-icon-close").addClass("aui-icon aui-icon-small aui-iconfont-remove-label ghx-iconfont"),AJS.$("#gh").removeClass("js-ghx-detail-loading").addClass("js-ghx-detail-loaded"),GH.DetailsViewScrollTracker.init({onSelectedNavChanged:GH.DetailsView.selectNavItem}),GH.DetailsViewScrollTracker.afterDetailsViewLoaded({issueId:e.id}),GH.DetailsView.trigger("after:render"),JIRA.trigger(GH.DetailsView.API_EVENT_DETAIL_VIEW_UPDATED,{issueId:e.id,issueKey:e.key,rapidViewId:GH.DetailsView.rapidViewId,mode:GH.DetailsView.getMode()}),GH.DetailsView._postRenderDetails(i)},GH.DetailsView.registerAllListeners=function(e){if(e.find("#ghx-detail-head .aui-list").length>0){var i=o.create({trigger:e.find("#ghx-detail-head .ghx-actions"),content:e.find("#ghx-detail-head .aui-list"),alignment:AJS.RIGHT}),t=function a(){AJS.$(i).each(function(e,i){i.hide(),i.layerController.$content&&i.layerController.$content.remove()}),AJS.$(GH).unbind(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED,a),AJS.$(GH).unbind(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED,a)};AJS.$(GH).bind(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED,t),AJS.$(GH).bind(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED,t)}e.find("#ghx-more-actions").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.showOperationsDialog()}),e.find(".js-issueaction-container-cog .js-issueaction").click(function(e){var i=AJS.$(e.currentTarget).attr("id");GH.DetailsView.analytics.trigger(i)}),e.find(".js-create-attachment").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.attachFilesSelectedIssue()}),GH.DetailsView.registerListenersForSubtask(e),e.find(".js-link-issue").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.linkSelectedIssue()}),e.find(".js-remove-issue-from-sprint").click(function(e){e.preventDefault();var i=u.viewData;if(i){var t=i.key;GH.IssueActions.removeIssuesFromSprint(GH.DetailsView.rapidViewId,t)}}),e.find(".js-flag-issue-and-comment").click(function(e){e.preventDefault(),GH.DetailsView.flagCurrentIssue(!0)}),e.find(".js-unflag-issue-and-comment").click(function(e){e.preventDefault(),GH.DetailsView.flagCurrentIssue(!1)}),GH.DetailsView.registerHeaderFieldsListeners(e),e.find("#ghx-detail-head .ghx-actions").click(function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open.more.actions"})})},GH.DetailsView.registerListenersForSubtask=function(e){e.find(".js-create-subtask").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.createSubtask()}),e.find(".js-edit-subtask").click(function(e){e.preventDefault(),GH.DetailsView.setSubtaskIssueOverwrite(AJS.$(this))&&GH.IssueOperationShortcuts.editSelectedIssue()}),e.find(".js-delete-subtask").click(function(e){e.preventDefault(),GH.DetailsView.setSubtaskIssueOverwrite(AJS.$(this))&&GH.IssueOperationShortcuts.deleteSelectedIssue()})},GH.DetailsView.registerHeaderFieldsListeners=function(e){e.find(".js-log-work").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.logWorkOnSelectedIssue()})},GH.DetailsView.setSubtaskIssueOverwrite=function(e){var i=e.closest(".js-issue-dropdown"),t=i.attr("data-issue-key"),a=parseInt(i.attr("data-issue-id"),10);return!(!t||!a)&&(GH.IssueOperationShortcuts.setOverrideSelectedIssue({id:a,key:t}),!0)},GH.DetailsView.handleTabSelection=function(e,i){if(0!==i.pane.parents("#ghx-detail-nav").length){var t=i.pane.attr("id");GH.DetailsViewScrollTracker.setSelectedTab(t)}},GH.DetailsView.setTab=function(e){var i=AJS.$("a[href=#"+e+"]");i.length>0&&s.change(i)},GH.DetailsView.renderDetailsHeader=function(){var e=u.viewData,i=AJS.$("#ghx-detail-issue");w.renderDetailsHeaderFields(e,i,GH.DetailsView.opts),GH.DetailsView.registerHeaderFieldsListeners(i),GH.DetailsView.updateSize(),AJS.$("#gh").removeClass("js-ghx-detail-loading").addClass("js-ghx-detail-loaded")},GH.DetailsView.hasCurrentError=function(){var e=AJS.$("#ghx-detail-issue");return e.find(".ghx-error").text().length>0},GH.DetailsView.flagCurrentIssue=function(e){function i(){AJS.$(GH).trigger("issueUpdated",{issueId:t.id,source:"detailView"}),GH.DetailsView.reload()}var t=u.viewData;t&&GH.IssueFlagAndCommentAction.execute(t.key,e,i);var a=e?"gh.issue.ctx.menu.action.flag":"gh.issue.ctx.menu.action.unflag";AJS.trigger("analytics",{name:a,data:{selectedIssueCount:1}})},GH.DetailsView._initInlineEditor=function(){GH.DetailsView._InlineEditor.init({$detailContainer:GH.DetailsView.getContainer(),getRapidViewIdCallback:function(){return GH.DetailsView.rapidViewId},loadIssueDetailCallback:GH.DetailsView.load,getInlineEditableFieldsCallback:function(){var e=u;return e.viewData&&e.viewData.editable?u.getInlineEditableFields():[]},getIssueIdCallback:function(){return u.viewData.id},getIssueKeyCallback:function(){return u.viewData.key},getIssueSprintStatusCallback:function(){return u.viewData.sprint?u.viewData.sprint.state:null}})},GH.DetailsView._postRenderDetails=function(e){GH.DetailsView._InlineEditor.fixUpDetailView(e),GH.DetailsView._InlineEditor.loadIssueToEditor()},GH.DetailsView.getAttachmentViewQuery=function(){return GH.DetailsView._InlineEditor.getIssueAttachmentQuery()},GH.DetailsView.registerListenersForTab=function(e,i){GH.DetailsView._InlineEditor.registerListenersForTab(e,i),"sub_tasks"===e&&GH.DetailsView.registerListenersForSubtask(i)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsViewScrollTracker.js' */
define("jira-agile/rapid/ui/detail/details-view-scroll-tracker",["underscore","jquery","require","jira/util/data/meta"],function(e,i,n,t){"use strict";function a(n){w=i("#js-detail-nav-content"),T=i(".ghx-detail-nav-menu"),D=e.isFunction(n.onSelectedNavChanged)?n.onSelectedNavChanged:function(){},j.init({beforeScroll:f,afterScroll:s}),b=!0,s(),T.delegate("a",{"click.scrollTracking":c}),i(document).on("click",'.aui-message-success a[href="'+t.get("viewissue-permlink")+'"]',function(e){e.preventDefault(),o("attachmentmodule",!0)})}function r(e){e.issueId!==y||V?(o(h()),V=!1):I>=0&&u(I),y=e.issueId}function l(e){k(e),V=!0}function c(e){e.preventDefault();var i=this.hash.replace("#","");o(i,!0),v("go.to.section",{sectionId:i})}function o(e,n){var t=i("#"+e);t.length>0&&(g(e),I=j.scrollToSection(e,n))}function u(e){j.scrollTo(e);var i=j.getCurrentSection();i&&g(i)}function s(){w.bind({"scroll.scrollTracking":function(){b=!0}}),C=setInterval(function(){d()},40)}function d(){if(b){b=!1,I=j.getScrollPosition();var e=j.getCurrentSection();e&&g(e)}}function f(){clearInterval(C),w.unbind("scroll.scrollTracking")}function g(e){D(e),k(e)}function v(e,i){AJS.trigger("analytics",{name:p+"."+e,data:i})}function h(){return S.get("gh.detailViewWork")||null}function k(e){S.put("gh.detailViewWork",e)}var S,p="gh.issueaction.issuedetail",m=n("jira-agile/rapid/global-events"),j=n("jira-agile/rapid/ui/detail/details-view-scroll-tracker/scroller");m.on("pre-initialization",function(){S=GH.storage});var w,T,b,C,I,y,D,V,q={init:a,afterDetailsViewLoaded:r,setSelectedTab:l,_testing_only:{navMenuClick:c}};return q});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsViewScroller.js' */
define("jira-agile/rapid/ui/detail/details-view-scroll-tracker/scroller",["jquery"],function(t){"use strict";var i,o,e,n={};return n.init=function(n){o=n.beforeScroll,e=n.afterScroll,i=t("#js-detail-nav-content")},n.scrollToSection=function(i,o){var e=t("#"+i);return this.scrollTo(this.getScrollPosition()+e.position().top,o)},n.scrollTo=function(t,n){return o(),i.animate({scrollTop:t},n?"fast":0,function(){setTimeout(e,0)}),t},n.getScrollPosition=function(){return i.scrollTop()},n.getCurrentSection=function(){var t,o=i.find(".ghx-detail-section").not(".ghx-hidden-tab");if(i.length>0&&i[0].scrollHeight-this.getScrollPosition()===i.height())t=o[o.length-1];else for(var e=0;e<o.length;e++){var n=o.eq(e);if(n.position().top+n.height()>0){t=n[0];break}}return t?t.id:null},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/detail/DetailsView.soy' */
// This file was automatically generated from DetailsView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.detailview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.detailview == 'undefined') { GH.tpl.detailview = {}; }


GH.tpl.detailview.renderIssueDetailsBody = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-detail-head" class="ghx-detail-head js-issue-fields"><div class="ghx-controls">';
  if (opt_data.showActionsCog) {
    var tooltip__soy6 = '' + soy.$$escapeHtml('Actions (Type . to access issue actions)');
    output += aui.buttons.button({extraAttributes: {title: tooltip__soy6}, extraClasses: ['ghx-actions', 'aui-button-compact'], text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconText: tooltip__soy6, iconType: 'aui'}) + GH.tpl.detailview.renderIssueOperationsForCog(opt_data);
  }
  output += ((opt_data.canClose) ? '<div class="ghx-detail-close js-detailclose" title="' + soy.$$escapeHtml('Close detail ( T )') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close detail ( T )') + '</span></div>' : '') + '</div><div class="ghx-group"><span class="ghx-project-avatar"><img src="' + soy.$$escapeHtml(opt_data.issueDetails.projectAvatarUrl) + '" title="' + soy.$$escapeHtml(opt_data.issueDetails.projectName) + '" /></span><span id="js-sizer" class="ghx-sizer ui-resizable-handle ui-resizable-w" data-tooltip="' + soy.$$escapeHtml('Resize Detail View') + '"><span class="ghx-icon ghx-icon-sizer"></span></span><div class="ghx-key-group"><div class="ghx-project">' + soy.$$escapeHtml(opt_data.issueDetails.projectName) + '</div><div class="ghx-key js-view-in-jira"></div></div><div class="ghx-detail-summary"></div></div>' + GH.tpl.detailview.renderStatisticGroup(null) + '</div><div id="ghx-detail-nav" class="ghx-detail-nav js-issue-fields"></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetailsBody.soyTemplateName = 'GH.tpl.detailview.renderIssueDetailsBody';
}


GH.tpl.detailview.renderLogWorkTrigger = function(opt_data, opt_ignored) {
  return '<dl id="ghx-log-work-container"><dt class="ghx-detail-term"></dt><dd class="ghx-detail-description"><a role="button" class="ghx-trigger js-log-work">' + soy.$$escapeHtml('Log work') + '</a></dd></dl>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderLogWorkTrigger.soyTemplateName = 'GH.tpl.detailview.renderLogWorkTrigger';
}


GH.tpl.detailview.renderIssueOperationsForCog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list hidden js-issueaction-container-cog" data-issuekey="' + soy.$$escapeHtml(opt_data.issueDetails.key) + '">';
  var sectionList43 = opt_data.issueDetails.operations.filteredSections;
  var sectionListLen43 = sectionList43.length;
  for (var sectionIndex43 = 0; sectionIndex43 < sectionListLen43; sectionIndex43++) {
    var sectionData43 = sectionList43[sectionIndex43];
    output += '<ul class="aui-list-section ' + ((sectionIndex43 == 0) ? 'aui-first' : '') + '">';
    var operationList49 = sectionData43.operations;
    var operationListLen49 = operationList49.length;
    for (var operationIndex49 = 0; operationIndex49 < operationListLen49; operationIndex49++) {
      var operationData49 = operationList49[operationIndex49];
      output += '<li class="aui-list-item"><a id="' + soy.$$escapeHtml(operationData49.id) + '" title="' + soy.$$escapeHtml(operationData49.title) + '" class="aui-list-item-link js-issueaction ' + soy.$$escapeHtml(operationData49.styleClass) + '" href="' + soy.$$escapeHtml(operationData49.url) + '" >' + soy.$$escapeHtml(operationData49.label) + '</a></li>';
    }
    output += '</ul>';
  }
  output += '<ul class="aui-list-section aui-last"><li class="aui-list-item"><a id="ghx-more-actions" title="' + soy.$$escapeHtml('More Actions\u2026') + '" class="aui-list-item-link js-issueaction" href="#" >' + soy.$$escapeHtml('More Actions\u2026') + '</a></li></ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueOperationsForCog.soyTemplateName = 'GH.tpl.detailview.renderIssueOperationsForCog';
}


GH.tpl.detailview.renderTabSection = function(opt_data, opt_ignored) {
  return '<div class="ghx-tab-section">' + ((opt_data.renderTitle) ? '<h4>' + soy.$$escapeHtml(opt_data.title) + '</h4>' : '') + '<div class="ghx-tab-section-content"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabSection.soyTemplateName = 'GH.tpl.detailview.renderTabSection';
}


GH.tpl.detailview.renderTabTitle = function(opt_data, opt_ignored) {
  return '<div class="ghx-header"><h3>' + soy.$$escapeHtml(opt_data.tabTitle) + '</h3></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabTitle.soyTemplateName = 'GH.tpl.detailview.renderTabTitle';
}


GH.tpl.detailview.renderIssueLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '" title="' + soy.$$escapeHtml('View this issue') + '">' + soy.$$escapeHtml(opt_data.issueKey) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueLink.soyTemplateName = 'GH.tpl.detailview.renderIssueLink';
}


GH.tpl.detailview.renderTextView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? soy.$$escapeHtml(opt_data.field.text) : '<span class="ghx-fa">' + ((opt_data.field.type == 'number') ? '&nbsp;' : soy.$$escapeHtml('None')) + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextView.soyTemplateName = 'GH.tpl.detailview.renderTextView';
}


GH.tpl.detailview.renderTextEstimateView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? soy.$$escapeHtml(opt_data.field.text) : '<span class="ghx-fa">' + soy.$$escapeHtml('Unestimated') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextEstimateView.soyTemplateName = 'GH.tpl.detailview.renderTextEstimateView';
}


GH.tpl.detailview.renderHtmlView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.html) ? soy.$$filterNoAutoescape(opt_data.field.html) : '<span class="ghx-fa">' + soy.$$escapeHtml('None') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderHtmlView.soyTemplateName = 'GH.tpl.detailview.renderHtmlView';
}


GH.tpl.detailview.renderDescriptionHtmlView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.html) ? soy.$$filterNoAutoescape(opt_data.field.html) : '<span class="ghx-fa">' + soy.$$escapeHtml('There is no description content') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDescriptionHtmlView.soyTemplateName = 'GH.tpl.detailview.renderDescriptionHtmlView';
}


GH.tpl.detailview.renderDateView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? GH.tpl.detailview.renderDate({value: opt_data.field.text, displayValue: opt_data.field.html}) : '<span class="ghx-fa">' + soy.$$escapeHtml('None') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDateView.soyTemplateName = 'GH.tpl.detailview.renderDateView';
}


GH.tpl.detailview.renderDate = function(opt_data, opt_ignored) {
  return '<span class="date user-tz"><time datetime="' + soy.$$escapeHtml(opt_data.value) + '" title="' + soy.$$escapeHtml(opt_data.displayValue) + '">' + soy.$$escapeHtml(opt_data.displayValue) + '</time></span>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDate.soyTemplateName = 'GH.tpl.detailview.renderDate';
}


GH.tpl.detailview.renderSubtasksEmpty = function(opt_data, opt_ignored) {
  return '<p class="ghx-fa">' + soy.$$escapeHtml('There are no sub-tasks') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderSubtasksEmpty.soyTemplateName = 'GH.tpl.detailview.renderSubtasksEmpty';
}


GH.tpl.detailview.renderIssueDetailsSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-detail-contents" class="ghx-detail-contents issue-container"><div class="ghx-detail-view-blanket"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetailsSkeleton.soyTemplateName = 'GH.tpl.detailview.renderIssueDetailsSkeleton';
}


GH.tpl.detailview.renderIssueDetails = function(opt_data, opt_ignored) {
  return '<div id="ghx-detail-issue" class="ghx-detail-issue issue-body-content" data-issueid="' + soy.$$escapeHtml(opt_data.issueDetails.id) + '" data-issuekey="' + soy.$$escapeHtml(opt_data.issueDetails.key) + '">' + GH.tpl.detailview.renderIssueDetailsBody(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetails.soyTemplateName = 'GH.tpl.detailview.renderIssueDetails';
}


GH.tpl.detailview.renderStatisticGroup = function(opt_data, opt_ignored) {
  return '<div class="ghx-statistic-group"><div class="ghx-detail-statistic ghx-estimate js-estimate"></div><div class="ghx-remaining-group"><div class="ghx-detail-statistic ghx-remainings js-remainings"></div>' + GH.tpl.detailview.renderLogWorkTrigger(null) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderStatisticGroup.soyTemplateName = 'GH.tpl.detailview.renderStatisticGroup';
}


GH.tpl.detailview.renderAggregateRemainingEstimateTooltip = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.data) {
    output += '<div class="ghx-aggregatetimeestimate-tooltip">';
    var rowList172 = opt_data.data;
    var rowListLen172 = rowList172.length;
    for (var rowIndex172 = 0; rowIndex172 < rowListLen172; rowIndex172++) {
      var rowData172 = rowList172[rowIndex172];
      output += (rowData172) ? '<div><span>' + soy.$$escapeHtml(rowData172.label) + ': </span><span>' + soy.$$escapeHtml(rowData172.value ? rowData172.value : '-') + '</span></div>' : '';
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderAggregateRemainingEstimateTooltip.soyTemplateName = 'GH.tpl.detailview.renderAggregateRemainingEstimateTooltip';
}


GH.tpl.detailview.renderTabMenuStructure = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-detail-nav-menu"><ul>';
  var tabList184 = opt_data.tabs;
  var tabListLen184 = tabList184.length;
  for (var tabIndex184 = 0; tabIndex184 < tabListLen184; tabIndex184++) {
    var tabData184 = tabList184[tabIndex184];
    output += GH.tpl.detailview.renderTabNavigation({tab: tabData184});
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabMenuStructure.soyTemplateName = 'GH.tpl.detailview.renderTabMenuStructure';
}


GH.tpl.detailview.renderTabNavigation = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList190 = opt_data.tab.sections;
  var sectionListLen190 = sectionList190.length;
  for (var sectionIndex190 = 0; sectionIndex190 < sectionListLen190; sectionIndex190++) {
    var sectionData190 = sectionList190[sectionIndex190];
    output += (sectionData190.iconFont || sectionData190.iconURL) ? '<li id="' + soy.$$escapeHtml(opt_data.tab.tabId) + '-nav" class="ghx-detail-nav-item ' + ((sectionData190.isLazyLoading) ? 'disabled' : '') + '"><a href="#' + soy.$$escapeHtml(sectionData190.id) + '" data-tooltip="' + ((sectionData190.toolTip) ? soy.$$escapeHtml(sectionData190.toolTip) : soy.$$escapeHtml(sectionData190.title)) + '">' + ((sectionData190.thirdPartyTab) ? (sectionData190.iconFont) ? '<span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(sectionData190.iconFont) + '">' + soy.$$escapeHtml(sectionData190.title) + '</span>' : '<span class="ghx-icon ghx-icon-thirdparty" style="background-image:url(\'' + soy.$$escapeHtml(sectionData190.iconURL) + '\');">' + soy.$$escapeHtml(sectionData190.title) + '</span>' : '<span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(sectionData190.iconFont) + '">' + soy.$$escapeHtml(sectionData190.title) + '</span>') + ((sectionData190.hasTitleCount && sectionData190.titleCount > 0) ? '<aui-badge>' + soy.$$escapeHtml(sectionData190.titleCount) + '</aui-badge>' : '') + '</a></li>' : '';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabNavigation.soyTemplateName = 'GH.tpl.detailview.renderTabNavigation';
}


GH.tpl.detailview.renderTabs = function(opt_data, opt_ignored) {
  var output = '<div id="js-detail-nav-content" class="ghx-detail-nav-content">';
  var tabList238 = opt_data.tabs;
  var tabListLen238 = tabList238.length;
  for (var tabIndex238 = 0; tabIndex238 < tabListLen238; tabIndex238++) {
    var tabData238 = tabList238[tabIndex238];
    output += '<div id="' + soy.$$escapeHtml(tabData238.tabId) + '">';
    var sectionList242 = tabData238.sections;
    var sectionListLen242 = sectionList242.length;
    for (var sectionIndex242 = 0; sectionIndex242 < sectionListLen242; sectionIndex242++) {
      var sectionData242 = sectionList242[sectionIndex242];
      output += '<div id="' + soy.$$escapeHtml(sectionData242.id) + '" class="ghx-detail-section"></div>';
    }
    output += '</div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabs.soyTemplateName = 'GH.tpl.detailview.renderTabs';
}


GH.tpl.detailview.renderFieldStructure = function(opt_data, opt_ignored) {
  var output = '';
  var isAgileInlineEdit__soy251 = opt_data.field.id == 'timeoriginalestimate' || opt_data.field.id == 'timeestimate';
  output += '<dl class="ghx-detail-list"><dt class="ghx-detail-term ghx-fieldtype-' + soy.$$escapeHtml(opt_data.field.type) + ' ghx-fieldname-' + soy.$$escapeHtml(opt_data.field.id) + '"' + ((opt_data.field.dataTooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.field.dataTooltip) + '"' : 'title="' + soy.$$escapeHtml(opt_data.field.tooltip ? opt_data.field.tooltip : opt_data.field.label) + '"') + '>' + soy.$$escapeHtml(opt_data.field.label) + ':</dt><dd id="' + soy.$$escapeHtml(opt_data.field.id) + '-val" class="ghx-detail-description ghx-fieldtype-' + soy.$$escapeHtml(opt_data.field.type) + ' ghx-fieldname-' + soy.$$escapeHtml(opt_data.field.id) + '"' + ((opt_data.issueDetails.editable && opt_data.field.editable) ? 'tabindex="0"' : '') + ' data-field-id="' + soy.$$escapeHtml(opt_data.field.id) + '"' + ((opt_data.field.dataTooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.field.dataTooltip) + '"' : 'title="' + soy.$$escapeHtml(opt_data.field.tooltip ? opt_data.field.tooltip : opt_data.field.label) + '"') + '></dd></dl>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderFieldStructure.soyTemplateName = 'GH.tpl.detailview.renderFieldStructure';
}


GH.tpl.detailview.renderSubtasks = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-container">';
  if (opt_data.subtasks.length == 0) {
    output += GH.tpl.detailview.renderSubtasksEmpty(null);
  } else {
    var issueList297 = opt_data.subtasks;
    var issueListLen297 = issueList297.length;
    for (var issueIndex297 = 0; issueIndex297 < issueListLen297; issueIndex297++) {
      var issueData297 = issueList297[issueIndex297];
      output += '<div class="ghx-subtask js-subtask-issue' + ((issueData297.done) ? ' ghx-done' : '') + '"><div class="ghx-top-row">' + ((issueData297.type && issueData297.type.url) ? '<span class="ghx-type" title="' + soy.$$escapeHtml(issueData297.type.name) + '"><img src="' + soy.$$escapeHtml(issueData297.type.url) + '"></span>' : '') + '<span class="ghx-key"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData297.key) + '" title="' + soy.$$escapeHtml('View this issue') + '" class="js-detailview ghx-key">' + soy.$$escapeHtml(issueData297.key) + '</a></span><span class="ghx-status ' + ((! issueData297.status.statusCategory) ? 'ghx-center' : '') + '">' + GH.tpl.status.renderIcon({status: issueData297.status, maxWidth: 'short'}) + '</span>' + ((opt_data.showTrackingField) ? '<span class="ghx-estimate ghx-right ghx-nowrap"><div title="' + soy.$$escapeHtml('Remaining Estimate') + '">' + GH.tpl.detailview.renderTextView({field: issueData297.trackingField}) + '</div></span>' : '') + '<span class="ghx-sub-avatar">' + ((issueData297.assignee) ? '<span id="issue_summary_assignee_admin" class="user-hover" rel="' + soy.$$escapeHtml(issueData297.assignee.id) + '">' + ((! issueData297.assignee.avatar) ? '<a class="user-hover" rel="' + soy.$$escapeHtml(issueData297.assignee.id) + '" href="' + soy.$$escapeHtml("") + '/secure/ViewProfile.jspa?name=' + soy.$$escapeHtml(issueData297.assignee.id) + '">' + soy.$$escapeHtml(issueData297.assignee.name) + '</a>' : '<img class="user-hover" src="' + soy.$$escapeHtml(issueData297.assignee.avatar) + '"' + ((issueData297.assignee.name) ? 'alt="' + soy.$$escapeHtml(issueData297.assignee.name) + '" title="' + soy.$$escapeHtml('Assignee') + ': ' + soy.$$escapeHtml(issueData297.assignee.name) + '"' : 'alt=""') + '>') + '</span>' : '') + '</span>' + ((opt_data.showActionsColumn) ? '<button href="#js-issue-dropdown-' + soy.$$escapeHtml(issueData297.id) + '" aria-owns="js-issue-dropdown-' + soy.$$escapeHtml(issueData297.id) + '" aria-haspopup="true"  class="aui-button ghx-actions aui-button-subtle aui-button-compact aui-dropdown2-trigger aui-dropdown2-trigger-arrowless"><span class="aui-icon ghx-iconfont aui-icon-small aui-iconfont-more"></span></button><!-- Dropdown --><div id="js-issue-dropdown-' + soy.$$escapeHtml(issueData297.id) + '" class="js-issue-dropdown aui-style-default aui-dropdown2" data-issue-key="' + soy.$$escapeHtml(issueData297.key) + '" data-issue-id="' + soy.$$escapeHtml(issueData297.id) + '"><ul class="aui-list-truncate">' + ((issueData297.canEdit) ? '<li><a class="js-edit-subtask" title="' + soy.$$escapeHtml('Edit') + '">' + soy.$$escapeHtml('Edit') + '</a></li>' : '') + ((issueData297.canDelete) ? '<li><a class="js-delete-subtask" title="' + soy.$$escapeHtml('Delete') + '">' + soy.$$escapeHtml('Delete') + '</a></li>' : '') + '</ul></div>' : '') + '</div><div class="ghx-summary" title="' + soy.$$escapeHtml('Summary') + '">' + soy.$$escapeHtml(issueData297.summary) + '</div></div>';
    }
    output += (opt_data.subtasks.length > 0 && opt_data.showTrackingField && opt_data.trackingFieldSum) ? '<div class="ghx-estimate-sum ' + soy.$$escapeHtml(opt_data.showActionsColumn ? 'ghx-actions-padding' : '') + ' ghx-nowrap" title="' + soy.$$escapeHtml('Remaining sum') + '">&Sigma; ' + soy.$$escapeHtml(opt_data.trackingFieldSum) + '</div>' : '';
  }
  output += '</div>' + ((opt_data.canCreateSubtask && opt_data.subtasks.length == 0) ? '<div class="ghx-controls"><button class="aui-button js-create-subtask">' + soy.$$escapeHtml('Create Sub-Task') + '</button></div>' : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderSubtasks.soyTemplateName = 'GH.tpl.detailview.renderSubtasks';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicConfig.js' */
GH.EpicConfig={},GH.EpicConfig.epicConfig=void 0,GH.EpicConfig.setEpicConfig=function(i){GH.EpicConfig.epicConfig=i},GH.EpicConfig.getStoryIssueTypeId=function(){return GH.EpicConfig.epicConfig.storyIssueTypeId},GH.EpicConfig.getStoryIssueTypeName=function(){return GH.EpicConfig.epicConfig.storyIssueTypeName},GH.EpicConfig.getEpicIssueTypeId=function(){return GH.EpicConfig.epicConfig.epicIssueTypeId},GH.EpicConfig.getEpicIssueTypeName=function(){return GH.EpicConfig.epicConfig.epicIssueTypeName},GH.EpicConfig.getEpicLabelFieldId=function(){return GH.EpicConfig.epicConfig.epicLabelFieldId},GH.EpicConfig.getEpicStatusFieldId=function(){return GH.EpicConfig.epicConfig.epicStatusFieldId},GH.EpicConfig.getEpicStatusDoneValueId=function(){return GH.EpicConfig.epicConfig.epicStatusDoneValueId},GH.EpicConfig.getEpicLinkFieldName=function(){return GH.EpicConfig.epicConfig.epicLinkFieldName},GH.EpicConfig.getEpicLinkFieldId=function(){return GH.EpicConfig.epicConfig.epicLinkFieldId},GH.EpicConfig.canMarkEpicAsDone=function(){return!_.isUndefined(GH.EpicConfig.epicConfig.epicStatusDoneValueId)},GH.EpicConfig.getEpicColorFieldId=function(){return GH.EpicConfig.epicConfig.epicColorFieldId},GH.EpicConfig.getEpicNameString=function(i,e){return i||"unlabelled"+"-"+e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/SprintConfig.js' */
define("jira-agile/rapid/ui/plan/sprint-config",[],function(){"use strict";var i={};return i.sprintConfig=void 0,i.setSprintConfig=function(n){i.sprintConfig=n},i.getSprintConfig=function(){return i.sprintConfig},i.getSprintFieldId=function(){return i.getSprintConfig().sprintFieldId},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicController.js' */
GH.EpicController={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.EpicController.analytics=new e("gh.rapidboard.epics"),GH.EpicController.analytics2=new e("gh.rapidboard.epics","epicCount","")}(),GH.EpicController.model=void 0,GH.EpicController.init=function(){AJS.$(GH).bind("issueCreated",GH.EpicController.handleIssueCreated),GH.EpicController.model=new GH.EpicModel,GH.EpicView.init()},GH.EpicController.getFilteredEpicKey=function(){return GH.BoardState.getPerViewValue("planSelectedEpic",null)},GH.EpicController.setFilteredEpicKey=function(e){GH.BoardState.setPerViewValue("planSelectedEpic",e)},GH.EpicController.getEpicModel=function(){return GH.EpicController.model},GH.EpicController.setEpicData=function(e){GH.EpicController.model.setData(e)},GH.EpicController.validateSelectedEpic=function(){var e=GH.EpicController.getEpicModel().getEpicList(),i=GH.EpicController.getFilteredEpicKey(),r=GH.PlanIssueListFiltering.isNoneEpicFilterKey(i)&&e.getNumVisibleIssues()>0||e.isIssueValid(i);r||(GH.EpicController.setFilteredEpicKey(void 0),GH.RapidBoard.UrlState.replaceState())},GH.EpicController.registerEpicsCount=function(e){AJS.trigger("analytics",{name:"jira-software.board.number.of.epics",data:{boardId:GH.RapidBoard.State.getRapidViewId(),epicsOnBoard:e.epics.length}})},GH.EpicController.reorderEpics=function(e,i,r){GH.EpicController.model.getEpicList().reorderIssues(e,i,r)},GH.EpicController.handleIssueCreated=function(e,i){if(GH.AnalyticsEnabled){var r=GH.EpicConfig.getEpicLabelFieldId();_.isString(r)&&0!==r.length&&_.each(i.issues,function(e){GH.Ajax.get({bareUrl:GH.Ajax.CONTEXT_PATH+"/rest/api/2/issue/"+e.issueKey+"?fields=issuetype,"+r},"getEpicLabelLength").done(function(e){if("Epic"===e.fields.issuetype.name){var i=e.fields[r]||"";GH.EpicController.analytics.trigger("epicLabelLength","length",i.length)}})})}},GH.EpicController.addIssuesToEpic=function(e,i){var r=[];_.each(i,function(i){var t=GH.BacklogModel.getIssueData(i);t&&t.typeId!==GH.EpicConfig.getEpicIssueTypeId()&&(t.epic=e,r.push(t))}),GH.EpicController.addIssuesToEpicOnServer(e,i).done(function(e){GH.Notification.showSuccess("Selection successfully added to the epic"),_.each(r,function(e){AJS.$(GH).trigger("issueUpdated",{issueId:e.id,source:"detailView"}),GH.RapidBoard.sendIssueUpdatedTrackEvent(e,[{name:GH.EpicConfig.getEpicLinkFieldId()}])}),GH.PlanController.isActive()&&(GH.BacklogController.updateEpicData(),GH.EpicController._reloadDetailsView(GH.PlanController)),GH.BacklogModel.assignSubtasksToSameEpicAsParent(i),GH.EpicController.analytics.trigger("addIssues","issueCount",i.length)}).fail(function(){GH.BacklogController.loadData()})},GH.EpicController.addIssuesToEpicOnServer=function(e,i){var r={ignoreEpics:!0,issueKeys:i};return GH.Ajax.put({url:"/epics/"+e+"/add",data:r})},GH.EpicController.removeIssuesFromAssociatedEpics=function(e){var i=[];if(GH.PlanController.isActive()){if(i=GH.BacklogModel.removeEpicFromIssues(e),0===i.length)return}else if(GH.WorkController.isActive()&&(i=GH.GridDataController.getModel().removeEpicFromIssues(e),0===i.length))return;var r={issueKeys:e};GH.Ajax.put({url:"/epics/remove",data:r}).done(function(r){GH.Notification.showSuccess("Selection successfully removed from the epic"),_.isEmpty(i)||_.each(i,function(e){AJS.$(GH).trigger("issueUpdated",{issueId:e.id,source:"detailView"})}),GH.PlanController.isActive()?(GH.BacklogController.updateEpicData(),GH.EpicController._reloadDetailsView(GH.PlanController)):GH.WorkController.isActive()&&(GH.EpicController._reloadDetailsView(GH.WorkController),"epic"==GH.GridDataController.getModel().getSwimlaneStrategy()&&GH.WorkController.reload()),GH.EpicController.analytics.trigger("removeIssues","issueCount",e.length)})},GH.EpicController.updateEpicAsDone=function(e){var i=GH.EpicController.updateEpicField(e,GH.EpicConfig.getEpicStatusFieldId(),GH.EpicConfig.getEpicStatusDoneValueId());i.done(function(){GH.EpicController.analytics.trigger("markEpicAsDone"),GH.EpicView.showEpicMarkedAsDoneMessage(),GH.EpicController.getFilteredEpicKey()===e&&(GH.EpicController.setFilteredEpicKey(null),GH.BacklogController.updateEpicFiltering(!1),GH.RapidBoard.State.replaceState()),GH.BacklogController.updateEpicData()})},GH.EpicController.updateEpicField=function(e,i,r,t,l){return GH.Ajax.put({url:"/xboard/issue/update-field.json",data:{issueIdOrKey:e,fieldId:i,newValue:r}}).done(t).fail(l)},GH.EpicController.applyVersionFiltering=function(){if(GH.VersionController.hasFilteredVersion()){var e=GH.BacklogModel.getEpicsFilteredForVersion(GH.VersionController.getFilteredVersionId()),i=GH.EpicController.getFilteredEpicKey();_.contains(e.filtered,i)&&(GH.EpicView.deselectAllEpics(),GH.EpicController.setFilteredEpicKey(null),GH.BacklogController.updateEpicFiltering(!1),GH.RapidBoard.State.pushState()),GH.EpicView.setFilteredStyle(e.filtered)}else GH.EpicController.clearVersionFiltering()},GH.EpicController.clearVersionFiltering=function(){GH.EpicView.clearFilteredStyle()},GH.EpicController._reloadDetailsView=function(e){var i=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");e.reloadDetailView(i.VERSION_PANEL_CHANGED)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicModel.js' */
GH.EpicModel=function(){this.epicsList=void 0,this.canEditEpics=!1,this.supportsPages=!1},GH.EpicModel.prototype.setData=function(i){if(i){this.canEditEpics=!!i.canEditEpics,this.supportsPages=!!i.supportsPages;var e=i.epics||[];_.each(e,GH.EpicModel.prototype._epicPreprocessFn),this.epicsList=new GH.IssueListModel("epics",e,GH.VersionController.getVersionModel())}},GH.EpicModel.prototype._epicPreprocessFn=function(i){i.originalEpicLabel=i.epicLabel||"",i.epicLabel=GH.EpicConfig.getEpicNameString(i.epicLabel,i.key)},GH.EpicModel.prototype.getEpicList=function(){return this.epicsList},GH.EpicModel.prototype.canUserEditEpics=function(){return this.canEditEpics};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicView.js' */
!function(){"use strict";var e=require("jira/ajs/dropdown/dropdown"),i=require("jira-agile/rapid/const/PageMode"),t=require("jira/featureflags/simplified-ux-feature-manager");require("jira/featureflags/feature-manager");GH.EpicView={},GH.EpicView.init=function(){GH.EpicView.initializeInlineEdits(),AJS.$(document).delegate(".js-change-epic-color","click",GH.EpicView.changeEpicColor),AJS.$(document).delegate(".js-mark-epic-done","click",GH.EpicView.handleMarkEpicAsDone)},t.isAdg3ModeOn()?GH.EpicView.colors=["ghx-label-13","ghx-label-5","ghx-label-4","ghx-label-8","ghx-label-14","ghx-label-2","ghx-label-1","ghx-label-6","ghx-label-11","ghx-label-10","ghx-label-7","ghx-label-9","ghx-label-3","ghx-label-12"]:GH.EpicView.colors=["ghx-label-1","ghx-label-2","ghx-label-3","ghx-label-4","ghx-label-10","ghx-label-11","ghx-label-5","ghx-label-12","ghx-label-6","ghx-label-13","ghx-label-7","ghx-label-8","ghx-label-9","ghx-label-14"],GH.EpicView.opts={canClose:!0},GH.EpicView.dropdowns=[],GH.EpicView.shouldHidePanels=function(){return GH.RapidBoard.State.isAgilityBoard()},GH.EpicView.show=function(){if(!GH.EpicView.shouldHidePanels()){var e=AJS.$("#ghx-epic-column");e.html(GH.tpl.epic.renderShell({isEpicPanelExpanded:GH.PlanController.isEpicsColumnVisible(),canCreateIssue:GH.UserData.userConfig.canCreateIssue})),GH.EpicView.renderEpics(),GH.EpicQuickCreate.registerCreateEpicDialog()}},GH.EpicView.hide=function(){AJS.$("#ghx-epic-column").empty()},GH.EpicView.updateEpics=function(){GH.EpicView.renderEpics(),GH.PlanDragAndDrop.initializeClassificationDnD()},GH.EpicView.renderEpics=function(){var t=GH.EpicController.getEpicModel(),a=AJS.$("#ghx-epic-column"),c=a.find(".ghx-classification-scrollview"),n={},l=t.getEpicList(),s=GH.EpicController.getFilteredEpicKey();_.each(l.getAllIssues(),function(e){n[e.key]="open"===GH.EpicView.getTwixieState(e.key),e.epicStats.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.epicStats.doneEstimate),e.epicStats.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.epicStats.totalEstimate),e.epicStats.isIssueCountStatistic="issueCount"===GH.BacklogModel.estimationStatistic.typeId,e.epicStats.estimateStatisticName=GH.BacklogModel.estimationStatistic.name});var o={epicKeys:l.getVisibleRankables(),epics:l.getAllIssues(),isEpicExpandedByKey:n,selectedEpicKey:s,isNoneSelected:GH.PlanIssueListFiltering.isNoneEpicFilterKey(s),isAllSelected:!s,canEditEpics:t.canUserEditEpics(),canMarkAsDone:GH.EpicConfig.canMarkEpicAsDone(),canCreateIssue:GH.UserData.userConfig.canCreateIssue,colors:GH.EpicView.colors,showPages:GH.BacklogModel.supportsPages(),showEstimates:GH.RapidBoard.State.isScrumBoard()};c.html(GH.tpl.epic.renderEpics(o)),GH.PlanView.updateFixedElementPositioning(),a.find(".ghx-classification-item").click(function(e){AJS.$(e.target).closest(".js-epic-actions, .js-create-epic-issue, .js-editing-field, .js-epic-details-toggle, .js-epic-key-link, .js-view-entity-pages").length||GH.EpicView.toggleFiltering(AJS.$(this))}),a.find(".js-epic-details-toggle").click(GH.EpicView.toggleEpicDisplay),a.find(".js-epic-name").click(function(e){e.preventDefault()});var r=AJS.$(".js-epic-actions");_.each(r,function(i){var t="#"+AJS.$(i).attr("id").replace(/^dd-trigger-/,"dd-content-"),a=AJS.$(t),c=e.create({trigger:i,content:a,alignment:AJS.LEFT});AJS.$(c).bind("showLayer",function(){GH.RapidBoard.Util.InlineEditable.submitActiveEdits()}),GH.EpicView.dropdowns.push(c)}),a.find(".js-create-epic-issue").click(GH.EpicView.showCreateIssueAssociatedWithEpicDialog),a.find(".js-view-entity-pages").each(function(){var e=AJS.$(this),t=e.closest(".ghx-classification-item").attr("data-epic-key");GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.EPIC,i.PLAN,t,e)}),GH.EpicView.dropdowns=_.flatten(GH.EpicView.dropdowns),GH.EpicController.applyVersionFiltering()},GH.EpicView.showCreateIssueAssociatedWithEpicDialog=function(e){e.preventDefault();var i=AJS.$(this).parents(".ghx-classification-item").attr("data-epic-key"),t=AJS.$(this).parents(".ghx-classification-item").find("[data-fieldname='epicLabel']").text();GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var a=GH.EpicQuickCreate.createCreateStoryForm();a.bind("contentRefreshed",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),AJS.$(document).unbind("QuickCreateIssue.validationError"),AJS.$(document).bind(JIRA.EpicPicker.READY_EVENT,function(e,a){a.setSelection(new AJS.ItemDescriptor({value:"key:"+i,label:t})),setTimeout(function(){a.disable()},0),AJS.$(document).bind("QuickCreateIssue.validationError",function(e){a.disable()})})});var c=function(e){return GH.EpicController.addIssuesToEpicOnServer(i,_.pluck(e,"issueKey"))},n="addToEpicCallback";GH.BacklogController.registerIssueCreatedCallback(n,c);var l=a.asDialog({windowTitle:AJS.format("Create {0}",GH.EpicConfig.getStoryIssueTypeId()),id:"create-story-dialog"});l.bind("Dialog.hide",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),AJS.$(document).unbind("QuickCreateIssue.validationError"),GH.BacklogController.unregisterIssueCreatedCallback(n)}),l.show()},GH.EpicView.hideDropdown=function(){_.each(GH.EpicView.dropdowns,function(e){e.hide()})},GH.EpicView.toggleFiltering=function(e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),GH.EpicView.deselectAllEpics();var i,t=e.attr("data-epic-key");GH.EpicController.getFilteredEpicKey()===t?i=null:(i=t,AJS.$("#ghx-epic-column").find(".ghx-classification-all").removeClass("ghx-selected"),e.addClass("ghx-selected")),GH.EpicController.setFilteredEpicKey(i),GH.BacklogController.updateEpicFiltering(!1),GH.RapidBoard.State.pushState()},GH.EpicView.deselectAllEpics=function(){var e=AJS.$("#ghx-epic-column"),i=e.find(".ghx-classification-item");i.removeClass("ghx-selected"),e.find(".ghx-classification-all").addClass("ghx-selected")},GH.EpicView.updateEpicStats=function(){var e=AJS.$("#ghx-epic-column");AJS.$.each(e.find(".ghx-classification-item"),function(e,i){var t=AJS.$(i);t.attr("data-epic-key")})},GH.EpicView.setTwixieState=function(e,i){var t="epicTwix-"+e;GH.BoardState.setPerViewValue(t,i)},GH.EpicView.getTwixieState=function(e){var i="epicTwix-"+e;return GH.BoardState.getPerViewValue(i,"closed")},GH.EpicView.toggleEpicDisplay=function(e){var i=AJS.$(this),t=i.parents(".ghx-classification-item");GH.EpicView.toggleEpicDisplayByElementWithAnimation(t)},GH.EpicView.toggleEpicDisplayByElement=function(e){var i=e.attr("data-epic-key");e.hasClass("ghx-open")?(e.removeClass("ghx-open").addClass("ghx-closed"),GH.EpicView.setTwixieState(i,"closed")):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.EpicView.setTwixieState(i,"open"))},GH.EpicView.toggleEpicDisplayByElementWithAnimation=function(e){var i=e.attr("data-epic-key"),t=e.find(".ghx-expanded");e.hasClass("ghx-open")?GH.RapidBoard.Animation.animateHeight(t,160,0).done(function(){e.removeClass("ghx-open").addClass("ghx-closed"),GH.EpicView.setTwixieState(i,"closed")}):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.RapidBoard.Animation.animateHeight(t,0,160).done(function(){GH.EpicView.setTwixieState(i,"open")}))},GH.EpicView.initializeInlineEdits=function(){var e=function(e){var i=e.editElement.val();return!!GH.Validation.notBlank(e.editElement,"Epic Name is required")&&(e.newValue=i,!0)},i=function(e){GH.EpicView.updateEpicLabel(e.epicKey,e.newValue),GH.RapidBoard.Util.InlineEditable.updateView(e)},t=function(e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return"epicLabel"===i.fieldName&&(i.maxLength=30),AJS.$(e).closest(".ghx-header").addClass("ghx-editing-name"),i.epicKey=e.parents(".ghx-classification-item").attr("data-epic-key"),i},a=function(e){var i=AJS.$(this).parents(".js-epic-actions-list").attr("data-epic-key");return AJS.$('.ghx-classification-item[data-epic-key="'+i+'"]').find(".js-edit-epicLabel-trigger")},c=function(e){AJS.$(e.viewElement).closest(".ghx-header").removeClass("ghx-editing-name")};GH.RapidBoard.Util.InlineEditable.register(".js-edit-epic-label",{getViewElement:a,getData:t,validate:e,save:i,renderView:GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView,preEdit:GH.RapidBoard.Util.InlineEditable.cancelActiveEdits,postEdit:c})},GH.EpicView.updateEpicLabel=function(e,i){var t=GH.EpicConfig.getEpicLabelFieldId(),a=GH.EpicController.getEpicModel().getEpicList(),c=a.getIssueData(e),n=c.epicLabel,l=c.originalEpicLabel;c.epicLabel=i,c.originalEpicLabel=i,a.updateIssue(c),GH.BacklogView.draw();var s=function(){GH.EpicView._reloadDetailsView(GH.PlanController)},o=function(){c.epicLabel=n,c.originalEpicLabel=l,a.updateIssue(c),GH.EpicView.renderEpics(),GH.BacklogView.draw()};GH.EpicController.updateEpicField(e,t,i,s,o)},GH.EpicView.changeEpicColor=function(e){var i=AJS.$(this),t=i.attr("data-color-id"),a=i.parents(".js-epic-actions-list").attr("data-epic-key");t&&a&&GH.EpicView.updateEpicColor(a,t)},GH.EpicView.updateEpicColor=function(e,i){var t=GH.EpicConfig.getEpicColorFieldId(),a=GH.EpicController.getEpicModel().getEpicList(),c=a.getIssueData(e),n=c.epicColor;c.epicColor=i,a.updateIssue(c),GH.EpicView.renderEpics(),GH.BacklogView.draw();var l=function(){GH.EpicView._reloadDetailsView(GH.PlanController)},s=function(){c.epicColor=n,a.updateIssue(c),GH.EpicView.renderEpics(),GH.BacklogView.draw()};GH.EpicController.updateEpicField(e,t,i,l,s)},GH.EpicView.scrollToBottom=function(){var e=AJS.$(".ghx-epic-column .ghx-classification-scrollview");e.scrollTop(e[0].scrollHeight)},GH.EpicView.handleMarkEpicAsDone=function(e){if(GH.EpicConfig.canMarkEpicAsDone()){GH.RapidBoard.Util.InlineEditable.cancelActiveEdits();var i=AJS.$(this),t=i.parents(".js-epic-actions-list").attr("data-epic-key"),a=GH.EpicController.getEpicModel().getEpicList(),c=a.getIssueData(t),n=c.epicLabel,l=c.epicStats.notDone,s=function(){GH.EpicController.updateEpicAsDone(t)},o="Mark as Done",r=GH.tpl.epic.renderMarkEpicAsDoneDialog({epicName:AJS.escapeHTML(String(n)),epicKey:t,numIncompleteIssues:l,rapidView:GH.RapidBoard.State.getRapidViewId()}),p=GH.ConfirmDialog.create("ghx-mark-epic-done-dialog",{width:450,header:o,content:r,contentEscaping:!1,onConfirmFn:s});p.show(),p.updateHeight()}},GH.EpicView.showEpicMarkedAsDoneMessage=function(){GH.Notification.showSuccess("Epic has been marked as Done")},GH.EpicView.setFilteredStyle=function(e){var i=AJS.$("#ghx-epic-column"),t=i.find(".ghx-classification-item").removeClass("ghx-filtered");t.each(function(i,t){var a=AJS.$(t);_.contains(e,a.attr("data-epic-key"))&&a.addClass("ghx-filtered")})},GH.EpicView.clearFilteredStyle=function(){var e=AJS.$("#ghx-epic-column");e.find(".ghx-classification-item").removeClass("ghx-filtered")},GH.EpicView.showEpicPagesUpdatedMessage=function(e,i,t){JIRA.IssueNavigator.setIssueUpdatedMsg({issueMsg:t.options.issueMsg,issueId:e,issueKey:i})},GH.EpicView.renderNewEpics=function(e){var i=AJS.$("#ghx-epic-column");_.each(e,function(e){var t=i.find('.ghx-classification-item[data-epic-key="'+e.issueKey+'"]');t.hasClass("ghx-open")||GH.EpicView.toggleEpicDisplayByElement(t),GH.RapidBoard.Animation.animateHeight(t,0,200,GH.RapidBoard.Animation.LONG_DURATION)})},GH.EpicView._reloadDetailsView=function(e){var i=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");e.reloadDetailView(i.VERSION_PANEL_CHANGED)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicView.soy' */
// This file was automatically generated from EpicView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.epic.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.epic == 'undefined') { GH.tpl.epic = {}; }


GH.tpl.epic.renderShell = function(opt_data, opt_ignored) {
  return '' + GH.tpl.epic.renderEpicPanel(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.epic.renderShell.soyTemplateName = 'GH.tpl.epic.renderShell';
}


GH.tpl.epic.renderEpicPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-group"><div class="ghx-classification-header"><div class="ghx-actions">' + ((opt_data.canCreateIssue) ? aui.buttons.button({extraClasses: ['aui-button-link', 'js-create-epic'], text: 'Create epic'}) + '<span class="ghx-divider">|</span>' : '') + '<div class="ghx-close js-epic-toggle" title="' + soy.$$escapeHtml('Hide epics panel') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove-label"></span></div></div><h2>' + soy.$$escapeHtml('Epics') + '</h2></div><div class="ghx-classification-scrollview"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPanel.soyTemplateName = 'GH.tpl.epic.renderEpicPanel';
}


GH.tpl.epic.renderEpics = function(opt_data, opt_ignored) {
  var output = GH.tpl.epic.renderAllEpics(opt_data) + '<div class="ghx-classification-cards">';
  var epicKeyList22 = opt_data.epicKeys;
  var epicKeyListLen22 = epicKeyList22.length;
  for (var epicKeyIndex22 = 0; epicKeyIndex22 < epicKeyListLen22; epicKeyIndex22++) {
    var epicKeyData22 = epicKeyList22[epicKeyIndex22];
    output += GH.tpl.epic.renderEpic({issue: opt_data.epics[epicKeyData22], isEpicExpanded: opt_data.isEpicExpandedByKey[epicKeyData22], isEpicSelected: opt_data.selectedEpicKey == epicKeyData22, canEditEpics: opt_data.canEditEpics, canMarkAsDone: opt_data.canMarkAsDone, canCreateIssue: opt_data.canCreateIssue, colors: opt_data.colors, showPages: opt_data.showPages, showEstimates: opt_data.showEstimates});
  }
  output += '</div>' + ((opt_data.epicKeys.length > 0) ? GH.tpl.epic.renderEpicPending(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpics.soyTemplateName = 'GH.tpl.epic.renderEpics';
}


GH.tpl.epic.renderEpic = function(opt_data, opt_ignored) {
  return '<div class="js-sortable ghx-classification-item' + ((opt_data.isEpicExpanded) ? ' ghx-open' : ' ghx-closed') + ((opt_data.isEpicSelected) ? ' ghx-selected' : '') + '" data-epic-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-epic-id="' + soy.$$escapeHtml(opt_data.issue.id) + '" ><div class="ghx-inner"><div class="ghx-expander js-epic-details-toggle" title="' + soy.$$escapeHtml('Hide/show epic information') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName: 'epicLabel', fieldValue: opt_data.issue.originalEpicLabel, displayValue: opt_data.issue.epicLabel}) + '</span><span id="dd-trigger-' + soy.$$escapeHtml(opt_data.issue.key) + '" class="ghx-swatch js-epic-actions ' + soy.$$escapeHtml(opt_data.issue.epicColor) + '"></span></h3><div id="dd-content-' + soy.$$escapeHtml(opt_data.issue.key) + '" class="aui-list ghx-href-fix-list js-epic-actions-list" data-epic-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-epic-id="' + soy.$$escapeHtml(opt_data.issue.id) + '">' + ((opt_data.canEditEpics) ? '<h5>' + soy.$$escapeHtml('Color') + '</h5><ul class="aui-list-section aui-first"><li class="aui-list-item ghx-epic-palette">' + GH.tpl.epic.renderEpicPalette(opt_data) + '</li></ul>' : '') + '<ul class="aui-list-section aui-last">' + ((opt_data.canEditEpics) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-edit-epic-label">' + soy.$$escapeHtml('Edit name') + '</a></li>' : '') + '<li class="aui-list-item">' + GH.tpl.epic.renderEpicIssueLink({issueKey: opt_data.issue.key}) + '</li>' + ((opt_data.canEditEpics && opt_data.canMarkAsDone) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-mark-epic-done">' + soy.$$escapeHtml('Mark as Done') + '</a></li>' : '') + '</ul></div></div><div class="ghx-expanded"><div class="ghx-summary"><a role="button" class="js-epic-key-link" title="' + soy.$$escapeHtml('View epic details') + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a> ' + soy.$$escapeHtml(opt_data.issue.summary) + '</div><div class="aui-group js-epic-issues-count"><div class="aui-item">' + soy.$$escapeHtml('Issues') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.totalIssueCount}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Completed') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.done}) + '</div></div>' + ((opt_data.showEstimates) ? ((! opt_data.issue.isIssueCountStatistic) ? '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Unestimated') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.notEstimated}) + '</div></div>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + aui.badges.badge({extraAttributes: {title: opt_data.issue.epicStats.estimateStatisticName}, text: opt_data.issue.epicStats.estimateTotal}) + '</div></div>' : '') + '<div class="aui-group">' + ((opt_data.canCreateIssue) ? aui.buttons.button({extraAttributes: {title: 'Create and assign an issue to this epic'}, extraClasses: ['aui-button-link', 'js-create-epic-issue'], text: 'Create issue in epic'}) : '') + ((opt_data.showPages) ? '<div>' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.issue.linkedPagesCount, title: 'Create and view pages linked to this epic'}) + '</div>' : '') + '</div></div><div class="ghx-subheader"><ul class="ghx-classification-progress" title="' + soy.$$escapeHtml(AJS.format('{0} ({1} {2} {3} {4})',AJS.format('{0}% of {1} done',opt_data.issue.epicStats.percentageCompleted,opt_data.issue.epicStats.isIssueCountStatistic ? 'issues' : 'estimated work'),opt_data.issue.epicStats.estimateDone,'of',opt_data.issue.epicStats.estimateTotal,opt_data.issue.epicStats.isIssueCountStatistic ? '' : opt_data.issue.epicStats.estimateStatisticName)) + '" ><li class="ghx-implemented" style="width:' + soy.$$escapeHtml(opt_data.issue.epicStats.percentageCompleted) + '%;"></li></ul></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpic.soyTemplateName = 'GH.tpl.epic.renderEpic';
}


GH.tpl.epic.renderAllEpics = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-all ' + ((opt_data.isAllSelected) ? ' ghx-selected' : '') + '"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + soy.$$escapeHtml('All issues') + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderAllEpics.soyTemplateName = 'GH.tpl.epic.renderAllEpics';
}


GH.tpl.epic.renderEpicPending = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-pending' + ((opt_data.isNoneSelected) ? ' ghx-selected' : '') + '" data-epic-key="none"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + soy.$$escapeHtml('Issues without epics') + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPending.soyTemplateName = 'GH.tpl.epic.renderEpicPending';
}


GH.tpl.epic.renderEpicIssueLink = function(opt_data, opt_ignored) {
  return '<a role="button" class="aui-list-item-link" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '">' + soy.$$escapeHtml('View epic details') + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicIssueLink.soyTemplateName = 'GH.tpl.epic.renderEpicIssueLink';
}


GH.tpl.epic.renderEpicPalette = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-swatches">';
  var colorList177 = opt_data.colors;
  var colorListLen177 = colorList177.length;
  for (var colorIndex177 = 0; colorIndex177 < colorListLen177; colorIndex177++) {
    var colorData177 = colorList177[colorIndex177];
    output += '<li class="ghx-swatch js-change-epic-color ' + soy.$$escapeHtml(colorData177) + '" data-color-id="' + soy.$$escapeHtml(colorData177) + '">e</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPalette.soyTemplateName = 'GH.tpl.epic.renderEpicPalette';
}


GH.tpl.epic.renderMarkEpicAsDoneDialog = function(opt_data, opt_ignored) {
  return ((opt_data.numIncompleteIssues > 0) ? GH.tpl.rapid.notification.renderAuiMessage({type: 'warning', icon: true, messageHtml: true, message: '' + soy.$$escapeHtml(AJS.format('{0,choice,1#1 issue is|1\x3c{0,number} issues are} not yet completed in this epic',opt_data.numIncompleteIssues))}) : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format('The epic {0}{1}{2} will be marked as Done. It will no longer be displayed in the Epics panel of the Backlog, but can be viewed in the {3}Epic Report{4}.','<b>',opt_data.epicName,'</b>','<a href="' + GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView + '&view=reporting&chart=epicReport&epic=' + opt_data.epicKey + '">','</a>')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderMarkEpicAsDoneDialog.soyTemplateName = 'GH.tpl.epic.renderMarkEpicAsDoneDialog';
}


GH.tpl.epic.getEpicNameString = function(opt_data, opt_ignored) {
  return '' + ((opt_data.epicLabel) ? soy.$$escapeHtml(opt_data.epicLabel) : soy.$$escapeHtml('unlabelled') + '-' + soy.$$escapeHtml(opt_data.epicKey));
};
if (goog.DEBUG) {
  GH.tpl.epic.getEpicNameString.soyTemplateName = 'GH.tpl.epic.getEpicNameString';
}


GH.tpl.epic.getEpicNameStringNoAutoescape = function(opt_data, opt_ignored) {
  return '' + ((opt_data.epicLabel) ? soy.$$filterNoAutoescape(opt_data.epicLabel) : soy.$$escapeHtml('unlabelled') + '-' + soy.$$escapeHtml(opt_data.epicKey));
};
if (goog.DEBUG) {
  GH.tpl.epic.getEpicNameStringNoAutoescape.soyTemplateName = 'GH.tpl.epic.getEpicNameStringNoAutoescape';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/epic/EpicQuickCreate.js' */
!function(){"use strict";var e=require("jquery"),r=require("jira-agile/features/feature-flags"),i=require("jira/featureflags/feature-manager"),t=!1;GH.EpicQuickCreate={},GH.EpicQuickCreate.quickCreateReset=!0,GH.EpicQuickCreate.createModel=function(){GH.EpicQuickCreate.Model=JIRA.Forms.CreateIssueModel.extend({getActiveFieldIds:function(){var r=this,i=e.Deferred(),a=[],c=[];t?c.push(GH.EpicConfig.getEpicLabelFieldId()):(c.push("summary"),c.push(GH.EpicConfig.getEpicLabelFieldId())),e.each(c,function(e,r){a.push(r)});var u=["issuetype","summary"];return r.getRequiredFields().done(function(r){e.each(r,function(r,i){e.inArray(i.id,a)!==-1||t&&e.inArray(i.id,u)!==-1||a.push(i.id)}),i.resolve(a)}),i.promise()},getIssueSetupFields:function(){if(t){var r=this,i=jQuery.Deferred(),a=[];return r.getFields().done(function(r){e.each(r,function(e,r){"project"===r.id&&a.push(r)}),i.resolve(a)}),i.promise()}return this._super()},getUseConfigurableForm:function(){var r=e.Deferred();return r.resolve(!0),r.promise()},setUseConfigurableForm:function(){}})},GH.EpicQuickCreate.ConfigurableForm=JIRA.Forms.ConfigurableCreateIssueForm.extend({serialize:function(){var r=this._super(),i=AJS.parseUri("?"+r),t=i.queryKey;return t.summary=t[GH.EpicConfig.getEpicLabelFieldId()],t.issuetype=GH.EpicConfig.getEpicIssueTypeId(),Object.keys(t).forEach(function(e){t[e]=decodeURIComponent(t[e])}),e.param(t)},getFieldById:function(e){var r=this,i=jQuery.Deferred();return"summary"!==e?this._super(e):(i.rejectWith(r,[]),i.promise())}}),GH.EpicQuickCreate.resetQuickCreate=function(){GH.EpicQuickCreate.quickCreateReset||(GH.EpicQuickCreate.quickCreateReset=!0,GH.EpicQuickCreate.storeQuickCreateDefaults(GH.EpicQuickCreate.createFormPreferences))},GH.EpicQuickCreate.rememberQuickCreateDefaults=function(){if(GH.EpicQuickCreate.quickCreateReset){GH.EpicQuickCreate.quickCreateReset=!1;var e=function(e){GH.EpicQuickCreate.createFormPreferences=e};GH.EpicQuickCreate.loadQuickCreateDefaults().done(e)}},GH.EpicQuickCreate.storeQuickCreateDefaults=function(e){return GH.Ajax.put({url:"/userData/quickEditDefaults",data:e})},GH.EpicQuickCreate.loadQuickCreateDefaults=function(){return GH.Ajax.get({url:"/userData/quickEditDefaults"},"quickEditDefaults")},GH.EpicQuickCreate.createCreateEpicForm=function(e){return e=e||{},new JIRA.Forms.Container(function(){e.globalEventNamespaces=e.globalEventNamespaces||["QuickCreateEpic"];var r,i=AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),a=new GH.EpicQuickCreate.Model({projectId:e.pid,issueType:e.issueType}),c=new JIRA.Forms.UnconfigurableCreateIssueForm({model:a,title:i,globalEventNamespaces:e.globalEventNamespaces});return r=t?new GH.EpicQuickCreate.ConfigurableForm({model:a,title:i,globalEventNamespaces:e.globalEventNamespaces}):new JIRA.Forms.ConfigurableCreateIssueForm({model:a,title:i,globalEventNamespaces:e.globalEventNamespaces}),{globalEventNamespaces:e.globalEventNamespaces,model:a,errorHandler:new JIRA.Forms.CreateIssueError,configurableForm:r,unconfigurableForm:c}})},AJS.$(GH).bind("issueCreated",function(e,r){var i=function(e){GH.UserData.quickCreateDefaultIssueTypeId=e.issueTypeId};GH.EpicQuickCreate.loadQuickCreateDefaults().done(i)}),GH.EpicQuickCreate.createCreateStoryForm=function(){var e=GH.UserData.quickCreateDefaultIssueTypeId;return e===GH.EpicConfig.getEpicIssueTypeId()&&(e=GH.EpicConfig.getStoryIssueTypeId()),JIRA.Forms.createCreateIssueForm({issueType:e})},GH.EpicQuickCreate.registerCreateEpicDialog=function(){if(JIRA&&JIRA.Forms&&JIRA.Forms.CreateIssueModel){t=i.isFeatureEnabled(r.EPIC_CREATE_IMPROVEMENT),GH.EpicQuickCreate.createModel();var e=AJS.$("#ghx-epic-column");e.find(".js-create-epic").each(function(){var e=GH.EpicQuickCreate.createCreateEpicForm({issueType:GH.EpicConfig.getEpicIssueTypeId()}),r=e.asDialog({windowTitle:AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),trigger:this,id:"create-epic-issue-dialog"});r.bind("Dialog.show",GH.EpicQuickCreate.rememberQuickCreateDefaults),r.bind("Dialog.hide",GH.EpicQuickCreate.resetQuickCreate)})}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkSelectionController.js' */
GH.WorkSelectionController={},GH.WorkSelectionController.OPT_NO_SCROLL={scrollToView:!1},GH.WorkSelectionController.selectionDataModel={},GH.WorkSelectionController.selectionManager=void 0,GH.WorkSelectionController.init=function(){GH.WorkSelectionController.initSelectionManager(),AJS.$(document).delegate("#ghx-pool .js-issue","click",GH.WorkSelectionController.handleIssueClick),AJS.$(document).delegate("#ghx-pool .js-issue","focus",GH.WorkSelectionController.handleFocus),AJS.$(document).delegate("#ghx-pool .js-issue","contextmenu",GH.WorkSelectionController.handleIssueContextMenu),AJS.$(document).delegate(".ghx-swimlane-header","click",GH.WorkSelectionController.handleSwimlaneClick),AJS.$(document).delegate(".ghx-swimlane-header","focus",GH.WorkSelectionController.handleFocus),AJS.$(document).delegate(".ghx-swimlane-header","contextmenu",GH.WorkSelectionController.handleSwimlaneContextMenu),AJS.$(document).delegate("#ghx-pool .js-issue a.ghx-key","mousedown",GH.WorkSelectionController.handleIssueLinkMiddleClick)},GH.WorkSelectionController.initSelectionManager=function(){GH.WorkSelectionController.selectionDataModel={isIssueValid:function(e){return GH.GridDataController.getModel().isIssueValid(e)},getIssueIndex:function(e){return GH.GridDataController.getModel().getIssueIndexByKey(e)},canAddToSelection:function(e,o){return GH.WorkSelectionController.canAddToSelection(e,o)},getIssueRange:function(e,o){return GH.RankingModel.getRankableIssuesRange(e,o)}},GH.WorkSelectionController.selectionManager=new GH.IssueSelectionManager(GH.WorkSelectionController.selectionDataModel,"work.selectedIssues")},GH.WorkSelectionController.validateCurrentSelection=function(){var e=GH.WorkSelectionController.selectionManager.validateCurrentSelection();e&&(!GH.WorkSelectionController.selectionManager.hasSelection()&&GH.WorkController.isDetailsViewOpened()&&GH.RapidBoard.State.setWorkViewDetailsViewOpened(!1),GH.RapidBoard.State.replaceState(),GH.WorkSelectionController.updateUIAndState())},GH.WorkSelectionController.gotoIssue=function(e){if(e){var o=GH.WorkSelectionController.getSelectedIssueKey();if(e!==o)GH.WorkSelectionController.selectIssue(e);else{var t=AJS.$(".ghx-columns").find('.js-issue[data-issue-key="'+e+'"]');0===t.length&&(t=AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e+"']")),0!==t.length&&GH.WorkSelectionController._scrollToView(t)}}},GH.WorkSelectionController.focusOnIssue=function(e){var o=AJS.$(".ghx-columns").find('.js-issue[data-issue-key="'+e+'"]');0===o.length&&(o=AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e+"']")),0!==o.length&&o.focus()},GH.WorkSelectionController.selectIssue=function(e,o){var t={pushState:!0,scrollToView:!0};o=_.extend(t,o),GH.WorkSelectionController.selectionManager.selectIssue(e),o.pushState&&GH.RapidBoard.State.pushState(),o.dontUpdateUI||GH.WorkSelectionController._updateSelectionUI(o.scrollToView?e:null)},GH.WorkSelectionController.handleSwimlaneClick=function(e){if(!AJS.$(e.target).parents().andSelf().is(".js-expander")){var o=GH.WorkSelectionController.getIssueKey(AJS.$(this));if(o)GH.WorkSelectionController.handleIssueClick.call(this,e);else{var t=parseInt(AJS.$(this).attr("data-swimlane-id"),10),l=GH.GridDataController.getModel(),n=l.getSwimlaneById(t),r=l.getColumns();_.find(r,function(e){return o=l.getIssueKeyForColumnAtIndex(n.id,e.id,0),!!o}),o&&GH.WorkSelectionController.selectIssue(o)}}},GH.WorkSelectionController.handleIssueClick=function(e){var o=GH.WorkSelectionController.getIssueKey(AJS.$(this)),t=AJS.$(e.target).hasClass("js-key-link"),l=!GH.MouseUtils.openInSameTab(e);return!(!t||!l)||(e.preventDefault(),void GH.WorkSelectionController.handleIssueSelectionEvent(e,o,!0))},GH.WorkSelectionController.handleIssueLinkMiddleClick=function(e){var o=e&&(2===e.which||4===e.button);if(o){var t=GH.WorkSelectionController.getIssueId($(this));AJS.trigger("analytics",{name:"jira-software.work.issuecard.open.full.issue",data:{issueId:t}})}},GH.WorkSelectionController.handleSwimlaneContextMenu=function(e){var o=AJS.$(e.target).closest(".ghx-swimlane-header").attr("data-issue-key");if(o){var t=GH.WorkSelectionController.isInSelection(o);t||GH.WorkSelectionController.handleSwimlaneClick.call(this,e),GH.WorkContextMenuController.showContextMenuAt(e,{swimlane:!0})}},GH.WorkSelectionController.handleIssueContextMenu=function(e){var o=GH.WorkSelectionController.getIssueKey(AJS.$(this)),t=GH.WorkSelectionController.isInSelection(o);t||GH.WorkSelectionController.selectIssue(o),GH.WorkContextMenuController.showContextMenuAt(e,{})},GH.WorkSelectionController.handleIssueSelectionEvent=function(e,o,t){var l=GH.MouseUtils.getMetaKeys(e),n=GH.WorkSelectionController.selectionManager.handleIssueClick(l,o),r=GH.IssueSelectionManager.getMultiSelectType(l);r&&(t=!1),n&&(GH.WorkSelectionController._updateSelectionUI(o),GH.WorkController.trigger("before:openDetailView"),!GH.RapidBoard.State.isNewIssueViewEnabled()||GH.DetailsView.opts.isUsingBentoSidebarOnBoard?GH.WorkSelectionController.handleIssueSelectionForSidebarOrADV(t,o):GH.WorkSelectionController.handleIssueSelectionForModal(t))},GH.WorkSelectionController.handleIssueSelectionForSidebarOrADV=function(e,o){var t=require("jira-agile/rapid/ui/bento/bento-features");e&&!GH.WorkController.isDetailsViewOpened()&&GH.WorkSelectionController.selectionManager.hasSelection()?GH.WorkController.openDetailsView(o):GH.RapidBoard.State.replaceState(),e&&t.isUsingBentoSidebarOnBoard()&&AJS.trigger("analyticsEvent",{name:"jira-software.work.issuecard.open",data:{viewMode:"sidebar"}})},GH.WorkSelectionController.handleIssueSelectionForModal=function(e){var o=require("jira-agile/rapid/ui/bento/bento-features");e&&GH.WorkController.isIssueModalPopupEnabled()&&GH.RapidBoard.State.setWorkIssueModalOpened(!0),GH.RapidBoard.State.replaceState(),e&&(GH.WorkView.displayIssueModal({skipStateUpdate:!0}),o.isBentoSidebarOnBoardEnabled()&&AJS.trigger("analyticsEvent",{name:"jira-software.work.issuecard.open",data:{viewMode:o.isUsingBentoModalOnBoard()?"modal":"default"}}))},GH.WorkSelectionController.handleFocus=function(e){var o=GH.WorkSelectionController.getIssueKey(AJS.$(this)),t=GH.WorkSelectionController.isInSelection(o);t||GH.WorkSelectionController.handleIssueSelectionEvent(e,o,!1)},GH.WorkSelectionController.updateUIAndState=function(){GH.WorkSelectionController._updateSelectionUI(),GH.RapidBoard.State.pushState()},GH.WorkSelectionController._updateSelectionUI=function(e){var o=null;AJS.$(".js-issue, .ghx-swimlane-header, #ghx-swimname").removeClass("ghx-selected ghx-selected-primary").each(function(t,n){var r=AJS.$(n),i=r.attr("data-issue-key");i&&(GH.WorkSelectionController.isInSelection(i)&&(r.addClass("ghx-selected"),i===l&&r.addClass("ghx-selected-primary")),null!==e&&i===e&&(o=r))}),o&&!o.hasClass("ghx-swimlane-header")&&GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(e),o&&GH.WorkSelectionController._scrollToView(o);var t=GH.WorkSelectionController.getSelectedIssueKey(),l=GH.GridDataController.getModel().isIssueValid(t)?t:void 0;AJS.$(GH).trigger("issueSelected",l)},GH.WorkSelectionController._scrollToView=function(e){var o=AJS.$("#ghx-pool"),t=AJS.$("#ghx-column-header-group"),l=t[0].getBoundingClientRect(),n=o[0].getBoundingClientRect(),r=e[0].getBoundingClientRect();GH.ScrollUtils.scrollElementToViewPort(o,{top:l.bottom,bottom:n.bottom},r)},GH.WorkSelectionController.ensureIssueSelected=function(e,o){GH.WorkSelectionController.selectionManager.isInSelection(o)||(GH.WorkSelectionController.canAddToSelection(GH.WorkSelectionController.getSelectedIssueKeys(),o)?GH.WorkSelectionController.handleIssueSelectionEvent(e,o):GH.WorkSelectionController.selectIssue(o,GH.WorkSelectionController.OPT_NO_SCROLL))},GH.WorkSelectionController.getSelectedIssueKeys=function(){return GH.WorkSelectionController.selectionManager.getSelectedIssueKeys()},GH.WorkSelectionController.getSelectedIssueKey=function(){return GH.WorkSelectionController.selectionManager.getSelectedIssueKey()},GH.WorkSelectionController.isInSelection=function(e){return GH.WorkSelectionController.selectionManager.isInSelection(e)},GH.WorkSelectionController.setIssueFromUrlState=function(e){GH.WorkSelectionController.selectionManager.selectIssue(e)},GH.WorkSelectionController.getSelectedIssuesInOrder=function(){return GH.WorkSelectionController.selectionManager.getSelectedIssuesInOrder()},GH.WorkSelectionController.canAddToSelection=function(e,o){if(_.isEmpty(e))return!0;var t=_.first(e);return GH.RankingModel.canIssuesBeRankedTogether(t,o)},GH.WorkSelectionController.getIssueId=function(e){return e.closest(".js-issue, .ghx-issue-filtered, .ghx-parent-group, .ghx-swimlane-header").attr("data-issue-id")},GH.WorkSelectionController.getIssueKey=function(e){return e.closest(".js-issue, .ghx-issue-filtered, .ghx-parent-group, .ghx-swimlane-header").attr("data-issue-key")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/BoardHeader.js' */
GH.RapidBoard.BoardHeader={},GH.RapidBoard.BoardHeader.init=function(){GH.RapidBoard.BoardHeader._originalPageTitle=document.title},GH.RapidBoard.BoardHeader.update=function(a){GH.RapidBoard.BoardHeader.updatePageTitle(a)},GH.RapidBoard.BoardHeader.updatePageTitle=function(a){document.title=a.name+" - "+GH.RapidBoard.BoardHeader._originalPageTitle};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/ViewController.js' */
!function(){"use strict";GH.RapidBoard.ViewController=new GH.Events;var e=require("jira-agile/rapid/analytics-tracker"),r=require("jira/util/data/meta"),o=require("jira-agile/tooltip"),i=require("jira-agile/rapid/const/PageMode"),t=require("jira-agile/rapid/work/quick-filters-bridge"),a=require("jira-agile/rapid/ui/SPConfigController"),n=require("jira-agile/features/feature-flags"),l=require("jira/featureflags/feature-manager");GH.RapidBoard.ViewController.analytics=new e("gh.assignedWork.tooltip"),GH.RapidBoard.ViewController.hasSideBar=!1,GH.RapidBoard.ViewController.hasSubnavigator=!1,GH.RapidBoard.ViewController.shouldShowSubnavigator=function(){return GH.RapidBoard.ViewController.hasSideBar&&GH.RapidBoard.ViewController.hasSubnavigator},GH.RapidBoard.ViewController.init=function(){function e(e){var r=e.$tip,o=r.children(".tipsy-inner").get(0);o.scrollHeight>o.clientHeight&&r.addClass("ghx-extra-field-tipsy-truncated")}GH.RapidBoard.ViewController.hasSideBar=JIRA.API.getSidebar&&r.get("sidebar-enabled"),GH.RapidBoard.ViewController.hasSubnavigator=JIRA.Projects&&"function"==typeof JIRA.Projects.Subnavigator,GH.Dialog.registerDialog(".js-view-find",GH.Dialog.FindView.openFindExistingViewDialog),AJS.$("#ghx-rabid").css({display:"none"}),AJS.$("#ghx-operations").append(GH.tpl.viewcontroller.renderOperationsBar()),[{selector:".ghx-avatar-img[data-tooltip]",className:"ghx-tipsy-left ghx-avatar-tipsy",html:!0},{selector:".ghx-issue [data-tooltip]:not(.ghx-summary)"},{selector:".ghx-issue .ghx-summary[data-tooltip]"},{selector:".ghx-backlog .ghx-summary[data-tooltip]"},{selector:".ghx-swimlane .ghx-heading[data-tooltip]"}].forEach(function(e){o.tipsify(_.defaults(e,{className:"ghx-tipsy-left",context:document,html:!1})).on("show",function(e){e.$element.closest(".ghx-assigned-work-stats").length&&GH.RapidBoard.ViewController.analytics.trigger("show")})});var i=o.tipsify({selector:".js-issue:not(.ui-sortable-helper) .ghx-extra-field",context:document,html:!0,className:"ghx-extra-field-tipsy ghx-tipsy-left"});if(i.on("show",e),GH.RapidBoard.ViewController.sidebarController=new GH.RapidBoard.SidebarController,GH.RapidBoard.ViewController.initSidebarActions(),AJS.$(GH).bind(GH.RapidBoard.UrlState.HISTORY_CHANGED,GH.RapidBoard.ViewController.updateModeUrls),GH.IssueOperationShortcuts.init(),GH.DetailsView.init(),GH.PresentationMode.init(),GH.RapidBoard.State.isKanbanBoard()){var t=require("jira-agile/rapid/ui/kanplan/kanplan-acknowledge");t.init()}AJS.$(GH).bind(GH.Layout.EVENT_DELAYED_RESIZE,GH.RapidBoard.ViewController.handleResizeEvent),AJS.$(document).on("aui-message-close",GH.RapidBoard.ViewController.handleResizeEvent),AJS.$(window).on("confluence.header-resized",GH.RapidBoard.ViewController.handleResizeEvent),GH.RapidBoard.ViewController.handleResizeEvent(),AJS.$(document).on("click",".manage-sprint-permission-help",function(e){e.preventDefault(),window.open({"url":"https://confluence.atlassian.com/display/AdminJIRACloud/Managing+project+permissions","isLocal":false}.url,"_blank")})},GH.RapidBoard.ViewController.initSidebarActions=function(){GH.RapidBoard.ViewController.sidebarController.interceptSidebarItems(),GH.RapidBoard.ViewController.sidebarController.reactToSidebarSizeChange()},GH.RapidBoard.ViewController.update=function(e){GH.Notification.clear(),GH.SprintRetrospectiveView.clearDialog(),GH.RapidBoard.ViewController.showRapidView(e),AJS.$("#ghx-rabid").css({display:""})},GH.RapidBoard.ViewController.showRapidView=function(e){AJS.$("#ghx-errors").empty(),GH.RapidBoard.ViewController.updateModeUrls(),GH.RapidBoard.ViewController.updateTabSelector(e),GH.PlanController.setRapidView(e),GH.WorkController.setRapidView(e),GH.ReportController.setRapidView(e),GH.RapidBoard.State.isConfigOpen()?(GH.WorkController.hide(),GH.PlanController.hide(),GH.ReportController.hide(),a.init(e)):GH.RapidBoard.ViewController.setMode(GH.RapidBoard.ViewController.getMode(),!0),GH.PersistentMessages.WelcomeMessage.renderMessage(),GH.PersistentMessages.CreateViewMessage.renderMessage()},GH.RapidBoard.ViewController.validModes={plan:!0,work:!0,report:!0},GH.RapidBoard.ViewController.displayedMode=void 0,GH.RapidBoard.ViewController.updateTabSelector=function(e){var r=e.sprintSupportEnabled,o=GH.RapidBoard.ViewController.getTabLabels(r);AJS.$("#plan-toggle").attr({"data-tooltip":o.plan.tooltip,disabled:!r}).text(o.plan.label),AJS.$("#work-toggle").attr({"data-tooltip":o.work.tooltip}).text(o.work.label)},GH.RapidBoard.ViewController.getTabLabels=function(e,r){var o=void 0;o=e?"simple":r?"scrum":"kanban";var i="gh.rapid.pool.link."+o+".label",t="gh.rapid.pool.link."+o+".tip";return{plan:{label:r?"Backlog":"Backlog",tooltip:r?"Backlog ( 1 )":"The Backlog is not currently available on Kanban boards"},work:{label:AJS.I18n.getText(i),tooltip:AJS.I18n.getText(t)}}},GH.RapidBoard.ViewController.getMode=function(){return GH.RapidBoard.State.getMode()},GH.RapidBoard.ViewController.chooseApplicableMode=function(e){var r=GH.RapidBoard.State.isAgilityBoard(),o=GH.RapidBoard.State.isPlanModeAvailable(),t=e===i.PLAN&&!o;if(r){var a=e===i.WORK,n=e===i.REPORT&&!GH.RapidBoard.State.isAgilityReportsEnabled();if(a)return o?i.PLAN:i.REPORT;if(n)return i.PLAN;if(t)return i.REPORT}else if(t)return i.WORK;return e};var d=function(e){return t.isReactFiltersEnabled().then(function(r){setTimeout(function(){r&&(AJS.$("#ghx-quick-filters").show(),AJS.$(e).hide())},0)})},s=function(e){l.isFeatureEnabled(n.DEFER_FILTERS_AND_HANDLERS)?(JIRA.API.getSidebar().then(function(){return d(e)}),require("jira/navigation").then(function(){return d(e)})):d(e)};GH.RapidBoard.ViewController.setMode=function(e,r){if(r=!!r,GH.SprintRetrospectiveView.clearDialog(),GH.RapidBoard.ViewController.validModes[e]&&(e=GH.RapidBoard.ViewController.chooseApplicableMode(e),GH.RapidBoard.ViewController.displayedMode!==e)){if(GH.RapidBoard.ViewController.trigger("before:navigate",{mode:e}),GH.RapidBoard.State.setMode(e),a.isOpen())return a.closeConfig(),void GH.RapidBoard.refreshBoardData();switch(GH.RapidBoard.ViewController.updateSelector(),GH.Notification.clearBoardUpdatedMessage(),GH.LinkedPagesController.hideCurrentDialog(),GH.RapidBoard.ViewController.hasSideBar&&GH.RapidBoard.ViewController.sidebarController.setSidebarState(e),e){case i.PLAN:GH.PlanController.init(),GH.WorkController.hide(),GH.ReportController.hide(),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta").hide(),AJS.$("#ghx-report,#ghx-controls-report").hide(),AJS.$("#ghx-quick-filters").hide(),AJS.$("#ghx-plan,#ghx-controls-plan").show(),s("#ghx-controls-plan"),GH.PlanController.show();break;case i.REPORT:GH.ReportController.init(),GH.PlanController.hide(),GH.WorkController.hide(),AJS.$("#ghx-plan,#ghx-controls-plan").hide(),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta").hide(),AJS.$("#ghx-quick-filters").hide(),AJS.$("#ghx-report,#ghx-controls-report").show(),GH.ReportController.show();break;case i.WORK:default:GH.WorkController.init(),GH.PlanController.hide(),GH.ReportController.hide(),AJS.$("#ghx-plan,#ghx-controls-plan").hide(),AJS.$("#ghx-report,#ghx-controls-report").hide(),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta").show(),AJS.$("#ghx-quick-filters").hide(),s("#ghx-controls-work"),GH.WorkController.show()}r?GH.RapidBoard.State.replaceState():GH.RapidBoard.State.pushState()}},GH.RapidBoard.ViewController.preload=function(e){switch(GH.RapidBoard.ViewController.getMode()){case i.PLAN:return Promise.resolve();case i.REPORT:return Promise.resolve();default:return new Promise(function(r,o){GH.WorkController.preload(e).done(r,o)})}},GH.RapidBoard.ViewController.updateSelector=function(){AJS.$(".js-mode-selector .aui-button").removeClass("active");var e=GH.RapidBoard.State.getMode();AJS.$("#"+e+"-toggle").addClass("active")},GH.RapidBoard.ViewController.viewByMode={work:"detail",plan:"planning",report:"reporting"},GH.RapidBoard.ViewController.updateModeUrls=function(){var e=GH.RapidBoard.State.getRapidViewId();_.forEach(GH.RapidBoard.ViewController.validModes,function(r,o){var i=GH.RapidBoard.getRapidBoardPageUrl(e,GH.RapidBoard.ViewController.viewByMode[o]);AJS.$("#"+o+"-toggle").attr("href",i)})},GH.RapidBoard.ViewController.updateContentContainer=function(){GH.RapidBoard.ViewController.handleResizeEvent()},GH.RapidBoard.ViewController.handleResizeEvent=function(){GH.RapidBoard.ViewController.updateContentAreaHeight(),GH.PlanView.updateFixedElementPositioning(),GH.WorkView.updateFixedElementPositioning(),GH.RapidBoard.ViewController.hasSideBar&&JIRA.API.getSidebar().then(function(e){e.reflow()})},GH.RapidBoard.ViewController.updateContentAreaHeight=function(){var e=GH.RapidBoard.ViewController.contentContainers();if(e.size()){var r=GH.Layout.getWindowHeight()-2,o=e.offset();o&&o.top&&(r-=o.top),e.css({height:r})}},GH.RapidBoard.ViewController.contentContainers=function(){var e=AJS.$("#ghx-work, #ghx-plan, #ghx-report, #ghx-plan-group");return e.filter(function(){return"none"!==this.style.display})},GH.RapidBoard.ViewController.collectPrintablePlanIssues=function(){return GH.PlanController.collectPrintableIssues()},GH.RapidBoard.ViewController.collectPrintableWorkIssues=function(){return GH.WorkController.collectPrintableIssues()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/SidebarController.js' */
GH.RapidBoard.SidebarController=function(e){"use strict";function r(){}function a(e){return i()?e.find("a").attr("href").indexOf("RapidBoard.jspa")>-1:e.find("a.aui-nav-item").attr("href").indexOf("RapidBoard.jspa")>-1}function n(e,r){switch(e){case"plan":case"work":return!0;case"report":return a(r);default:return!1}}function i(){return m.isGlobalSidebarEnabled()}function o(e,r){var a=k[r]||[],n=a.some(function(r){var a=e.getItem(r);if(a)return a.select(),!0});"report"===r&&!n&&m.isAdg3ModeOn()&&t(e)}function t(e){var r=e.getGroup(y)||e.getGroup(x);r||(r=e.getGroup(I)),r&&r.links&&r.links.length&&r.links.some(function(r){if(r.url){var a=p(r.url),n=p(window.location.href.replace(/^.*\/\/[^\/]+/,""));if(n.chart&&a.chart===n.chart){var i=e.getItem(r.id);if(i)return i.select(),!0}}})}function p(e){var r=e.split("?");try{return 1===r.length?{}:JSON.parse('{"'+r[1].replace(/#.*$/,"").replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,r){return""===e?r:decodeURIComponent(r)})}catch(a){return{}}}function s(e,r){o(e,r)}function c(e,r){var a=e.getGroup("sidebar-navigation-panel");a&&o(a,r)}function d(r){r.on(r.events.BEFORE_NAVIGATE,function(r){var a=r.target,i=a.getId(),o=AJS.$(document.getElementById(i)),t=h[i];n(t,o)&&(e.setMode(t),r.preventDefault())})}function l(r){var a=r.getGroup("sidebar-navigation-panel");a&&a.on("before:navigate",function(r){var a=h[r.emitter.id];n(a,r.emitter.$el)&&(e.setMode(a),r.preventDefault())})}function u(r){var a=r.viewIds.SOFTWARE,n=function(){return e.setMode("plan")},i=function(){return e.setMode("work")};r.onItemClick(a,r.itemIds.PLAN_SCRUM,n),r.onItemClick(a,r.itemIds.WORK_SCRUM,i),r.onItemClick(a,r.itemIds.PLAN_KANBAN,n),r.onItemClick(a,r.itemIds.WORK_KANBAN,i)}function g(e){e.on(e.events.DATA,function(){var r=GH.RapidBoard.State.getMode();s(e,r)})}function b(e){e.on(e.events.SCOPE_SWITCHER_BEFORE_NAVIGATE,function(e,r){var a=r.id;e.preventDefault(),f.send({name:"jira.frontend.fe.navigation.scope-switcher.link.click",properties:{pageMode:GH.RapidBoard.State.getMode()}}),GH.RapidBoard.loadNewBoard(a)})}var m=require("jira/featureflags/simplified-ux-feature-manager"),f=require("jira/analytics"),j=JIRA.API.getNavigationApi||AJS.$.Deferred,h={"com.pyxis.greenhopper.jira:project-sidebar-work-scrum":"work","com.pyxis.greenhopper.jira:project-sidebar-work-kanban":"work","com.pyxis.greenhopper.jira:global-sidebar-work-scrum":"work","com.pyxis.greenhopper.jira:global-sidebar-work-kanban":"work","com.pyxis.greenhopper.jira:user-container-sidebar-work-kanban":"work","com.pyxis.greenhopper.jira:user-container-sidebar-work-scrum":"work","com.pyxis.greenhopper.jira:project-sidebar-plan-scrum":"plan","com.pyxis.greenhopper.jira:project-sidebar-plan-kanban":"plan","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum":"plan","com.pyxis.greenhopper.jira:global-sidebar-plan-kanban":"plan","com.pyxis.greenhopper.jira:user-container-sidebar-plan-scrum":"plan","com.pyxis.greenhopper.jira:user-container-sidebar-plan-kanban":"plan","com.pyxis.greenhopper.jira:global-sidebar-report":"report","com.atlassian.jira.jira-projects-plugin:report-page":"report","com.pyxis.greenhopper.jira:user-container-sidebar-report":"report"},k={plan:["com.pyxis.greenhopper.jira:project-sidebar-plan-scrum","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum","com.pyxis.greenhopper.jira:project-sidebar-plan-kanban","com.pyxis.greenhopper.jira:global-sidebar-plan-kanban","com.pyxis.greenhopper.jira:user-container-sidebar-plan-scrum","com.pyxis.greenhopper.jira:user-container-sidebar-plan-kanban","com.pyxis.greenhopper.jira:project-sidebar-simple-backlog"],work:["com.pyxis.greenhopper.jira:project-sidebar-work-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-kanban","com.pyxis.greenhopper.jira:global-sidebar-work-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-kanban","com.pyxis.greenhopper.jira:user-container-sidebar-work-scrum","com.pyxis.greenhopper.jira:user-container-sidebar-work-kanban"],report:["com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:global-sidebar-report","com.pyxis.greenhopper.jira:user-container-sidebar-report","com.pyxis.greenhopper.jira:project-sidebar-simple-reports"]},y="report_agile_sidebar_links",x="report_agile_sidebar_links_without_label",I="uc_report_agile_sidebar_links";return r.prototype={constructor:r,interceptSidebarItems:function(){JIRA.API.getSidebar().done(function(e){i()?(d(e),b(e),g(e)):l(e)}),j().then(u)},reselectSidebarItem:function(){JIRA.API.getSidebar().done(function(e){if(i()){var r=GH.RapidBoard.State.getMode();o(e,r)}})},setSidebarState:function(e){JIRA.API.getSidebar().done(function(r){i()?s(r,e):c(r,e)})},reactToSidebarSizeChange:function(){JIRA.API.getSidebar().then(function(e){GH.Layout.fireDelayedWindowResize(),e.on("expand-end",function(){GH.Layout.fireDelayedWindowResize()}),e.on("collapse-end",function(){GH.Layout.fireDelayedWindowResize()})})},removePlanMenuItem:function(e){i()?this.updateSidebar(e):JIRA.API.getSidebar().then(function(e){var r=e.getDefaultGroup();if(r){var a=r.getItem("com.pyxis.greenhopper.jira:project-sidebar-plan-kanban"),n=r.getItem("com.pyxis.greenhopper.jira:global-sidebar-plan-kanban");a&&a.remove(),n&&n.remove()}})},updateSidebar:function(e){i()&&JIRA.API.getSidebar().then(function(r){return r.updateData({rapidView:e})})}},r}(GH.RapidBoard.ViewController);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/ViewController.soy' */
// This file was automatically generated from ViewController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.viewcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.viewcontroller == 'undefined') { GH.tpl.viewcontroller = {}; }


GH.tpl.viewcontroller.renderOperationsBar = function(opt_data, opt_ignored) {
  return '<div id="ghx-controls"><div id="ghx-controls-plan" class="ghx-controls-plan ghx-controls-list"></div><div id="ghx-controls-work" class="ghx-controls-work ghx-controls-list"></div><div id="ghx-quick-filters"></div><div id="ghx-controls-report" class="ghx-controls-report"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.viewcontroller.renderOperationsBar.soyTemplateName = 'GH.tpl.viewcontroller.renderOperationsBar';
}


GH.tpl.viewcontroller.renderErrors = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message error"><p class="title"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml('There was an error loading this page') + '</strong></p><ul>';
  var errorList8 = opt_data.errors;
  var errorListLen8 = errorList8.length;
  for (var errorIndex8 = 0; errorIndex8 < errorListLen8; errorIndex8++) {
    var errorData8 = errorList8[errorIndex8];
    output += '<li>' + soy.$$filterNoAutoescape(errorData8.message) + '</li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.viewcontroller.renderErrors.soyTemplateName = 'GH.tpl.viewcontroller.renderErrors';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridDataController.js' */
GH.GridDataController={},GH.GridDataController.model=void 0,GH.GridDataController.swimlaneStrategy="custom",GH.GridDataController.statistics={},GH.GridDataController.canRelease=!1,GH.GridDataController.hasDataChanged=function(a){var t=GH.GridDataController.calculateGridDataModel(a);return!GH.GridDataController.model||GH.GridDataController.model.isModelDifferent(t)},GH.GridDataController.setData=function(a){GH.GridDataController.statistics=a.statistics,GH.GridDataController.canRelease=a.issuesData.canRelease,GH.RankingModel.setOrderData(a.orderData),GH.GridDataController.hasBulkChangePermission=a.issuesData.hasBulkChangePermission;var t=GH.GridDataController.calculateGridDataModel(a);GH.GridDataController.model=t},GH.GridDataController.calculateGridDataModel=function(a){var t=GH.GridSwimlanesData.calculateSwimlanesData(a.issuesData,a.swimlanesData),e=[],r={},l=a.issuesData.isIssueLimitExceeded;_.each(a.issuesData.issues,function(a){e.push(a.key),r[a.key]=a}),_.each(a.issuesData.missingParents,function(a){r[a.key]=a});var s=GH.GridColumnsData.calculateColumnsData(a.issuesData,a.columnsData,a.statistics),i=s.columns,n=s.columnIssueMapping,o={};o.anyColumnBusted=s.anyColumnBusted;var d=[],G={};return _.each(t.swimlanes,function(a){G[a.id]=a.issueKeys.filter(function(a){return r[a]}),delete a.issueKeys,d.push(a)}),o.swimlanesType=t.type,new GH.GridDataModel(i,n,d,G,r,e,o,a.swimlanesData.swimlaneStrategy,l)},GH.GridDataController.getStatistics=function(){return GH.GridDataController.statistics},GH.GridDataController.getModel=function(){return GH.GridDataController.model},GH.GridDataController.hasBustedColumns=function(){return GH.GridDataController.model.data.variables.anyColumnBusted},GH.GridDataController.getSwimlanesType=function(){return GH.GridDataController.model.data.variables.swimlanesType},GH.GridDataController.isIssueLimitExceeded=function(){return!(!GH.GridDataController.getModel()||!GH.GridDataController.getModel().data)&&GH.GridDataController.getModel().data.isIssueLimitExceeded},GH.GridDataController.collectPrintableIssues=function(){var a=GH.GridDataController.getModel(),t=[];return _.each(a.getSwimlanes(),function(e){_.each(a.getColumns(),function(r){var l=a.getCells()[e.id][r.id];l&&t.push.apply(t,l)})}),_.map(t,function(t){return a.getIssues()[t]})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/RankingModel.js' */
GH.RankingModel={},GH.RankingModel.orderData={rankable:!1,rankCustomFieldId:void 0},GH.RankingModel.setOrderData=function(e){GH.RankingModel.orderData=e},GH.RankingModel.isRankable=function(){return GH.RankingModel.orderData.rankable},GH.RankingModel.canUserRank=function(){if(!GH.RankingModel.orderData.rankable)return!1;var e=!1;return _.each(GH.RankingModel.orderData.canRankPerProject,function(n){e=e||n.canRank}),e},GH.RankingModel.canUserRankIssue=function(e){if(!GH.RankingModel.isRankable())return!1;var n=e.substr(0,e.indexOf("-")),a=!1;return _.each(GH.RankingModel.orderData.canRankPerProject,function(e){e.projectKey==n&&(a=e.canRank)}),a},GH.RankingModel.getRankCustomFieldId=function(){return GH.RankingModel.isRankable()?GH.RankingModel.orderData.rankCustomFieldId:null},GH.RankingModel.isRankable=function(){return GH.RankingModel.orderData.rankable},GH.RankingModel.getFirstRankableIssueKeyInColumn=function(e){var n=GH.GridDataController.getModel(),a=n._getIssuePositionAndDataByKey(e);if(a.isSwimlane)return!1;var t=n.getIssuesDataForCell(a.swimlaneId,a.columnId),r=!!a.issue.parentKey,i=_.find(t,function(n){return!r||GH.RankingModel.canIssuesBeRankedTogether(n.key,e)});return!!i&&(r?i.key:i.parentKey?i.parentKey:i.key)},GH.RankingModel.getLastRankableIssueKeyInColumn=function(e){var n=GH.GridDataController.getModel(),a=n._getIssuePositionAndDataByKey(e);if(a.isSwimlane)return!1;var t=n.getIssuesDataForCell(a.swimlaneId,a.columnId),r=!!a.issue.parentKey,i=!1;return _.each(t,function(n){r?GH.RankingModel.canIssuesBeRankedTogether(n.key,e)&&(i=n.key):i=n.parentKey?n.parentKey:n.key}),i},GH.RankingModel.canIssuesBeRankedTogether=function(e,n){var a=GH.GridDataController.getModel(),t=a._getIssuePositionAndDataByKey(e),r=a._getIssuePositionAndDataByKey(n);return!(!t||!r)&&(!t.isSwimlane&&!r.isSwimlane&&(t.swimlaneId==r.swimlaneId&&(t.columnId==r.columnId&&(!t.issue.parentKey&&!r.issue.parentKey||t.issue.parentKey==r.issue.parentKey))))},GH.RankingModel.getRankableIssuesRange=function(e,n){if(!GH.RankingModel.canIssuesBeRankedTogether(e,n))return[];var a=GH.GridDataController.getModel();if(e==n)return[e];var t=a._getIssuePositionAndDataByKey(e),r=a._getIssuePositionAndDataByKey(n);if(t.isSwimlane||r.isSwimlane)return[];var i=[];i.push(e);var o,s,u=a.getIssuesDataForCell(t.swimlaneId,t.columnId),l=t.issueIndex,d=r.issueIndex;if(d>l)for(o=l+1;o<=d;o++)s=u[o],GH.RankingModel.canIssuesBeRankedTogether(e,s.key)&&i.push(s.key);else for(o=l-1;o>=d;o--)s=u[o],GH.RankingModel.canIssuesBeRankedTogether(e,s.key)&&i.push(s.key);return i},GH.RankingModel.getBestFitSelectionAfterRank=function(e){var n=GH.RankingModel.getNextIssueAfterSendToBottom(e);return n||(n=GH.RankingModel.getPreviousIssueAfterSendToBottom(e)),n},GH.RankingModel.getNextIssueAfterSendToBottom=function(e){var n=_.last(e),a=GH.GridDataController.getModel(),t=a.getNextIssueKey(n);if(!t)return!1;var r=a.getIssueDataByKey(n),i=a.getIssueDataByKey(t);if(r.parentKey)return t;for(;i.parentKey&&i.parentKey==n;){if(t=a.getNextIssueKey(t),!t)return!1;i=a.getIssueDataByKey(t)}return t},GH.RankingModel.getPreviousIssueAfterSendToBottom=function(e){var n=_.first(e),a=GH.GridDataController.getModel(),t=a.getPreviousIssueKey(n);if(!t)return!1;var r=a.getIssueDataByKey(n),i=a.getIssueDataByKey(t);if(r.parentKey)return t;for(;i.parentKey;){if(t=a.getPreviousIssueKey(t),!t)return!1;i=a.getIssueDataByKey(t)}return t},GH.RankingModel.reorderIssues=function(e,n,a){var t=GH.GridDataController.getModel();e=GH.RankingModel.getParentAndChildrenKeys(e);var r,i=t.getOrder();if(a)r=_.indexOf(i,a);else if(r=_.indexOf(i,n),r++,GH.RankingModel.isRankable())for(;r<i.length;){var o=t.getIssueDataByKey(i[r]);if(!o||o.parentKey!==n)break;r++}var s=i.slice(0,r),u=i.slice(r);s=GH.RankingModel.withoutArray(s,e),u=GH.RankingModel.withoutArray(u,e);var l=_.flatten([s,e,u]);t.updateOrder(l)},GH.RankingModel.getParentAndChildrenKeys=function(e){var n=GH.GridDataController.getModel(),a=n.getOrder(),t=[];return _.each(e,function(e){t.push(e);var r=n.getIssueDataByKey(e);if(r&&!r.parentKey){var i=_.indexOf(a,e);if(!(i<0))for(var o=i+1;o<a.length;o++){var s=n.getIssueDataByKey(a[o]);if(s.parentKey!=r.key)break;t.push(s.key)}}}),t},GH.RankingModel.withoutArray=function(e,n){var a=e;return _.each(n,function(e){a=_.without(a,e)}),a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridDataModel.js' */
!function(){function t(t,i){var n=Object.keys(t),s=Object.keys(i);if(!e.isEqual(n,s))return!1;var a=n.some(function(n){return!e.isEqual(t[n].slice(0).sort(),i[n].slice(0).sort())});return!a}var e=require("underscore"),i=require("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper");GH.GridDataModel=function(t,e,i,n,s,a,r,o,u){var d=this.data={};d.columns=t,d.columnIssueMapping=e,d.swimlanes=i,d.swimlaneIssueMapping=n,d.issues=s,d.order=a,d.variables=r,d.swimlaneStrategy=o,d.isIssueLimitExceeded=u,this.buildCache(),this.preprocessIssues()},GH.GridDataModel.prototype.isModelDifferent=function(i){return!e.isEqual(this.data.order,i.data.order)||(!e.isEqual(this.data.issues,i.data.issues)||(!e.isEqual(this.data.swimlaneIssueMapping,i.data.swimlaneIssueMapping)||!t(this.data.columnIssueMapping,i.data.columnIssueMapping)))},GH.GridDataModel.prototype.buildCache=function(){var t=this.data,i=this.cache={};i.bySwimlaneThenColumn=[];var n=this;e.each(t.swimlanes,function(s){var a=t.swimlaneIssueMapping[s.id];i.bySwimlaneThenColumn[s.id]=[],e.each(t.columns,function(e){var r=t.columnIssueMapping[e.id],o=n.fastIntersect(r,a);o=n.fastIntersect(t.order,o),i.bySwimlaneThenColumn[s.id][e.id]=o})})},GH.GridDataModel.prototype.fastIntersect=function(t,e){for(var i=t.length,n=e.length,s=t.slice(0).sort(),a=e.slice(0).sort(),r=[],o=0,u=0;o<i&&u<n;){var d=s[o],l=a.indexOf(d,u);l>-1&&(r.push(d),u=l+1),o++}for(var p=[],m=0;m<i;m++)r.indexOf(t[m])>-1&&p.push(t[m]);return p},GH.GridDataModel.prototype.preprocessIssues=function(){var t=this;e.each(this.data.issues,function(e){t.preprocessIssue(e)})},GH.GridDataModel.prototype.preprocessIssue=function(t){this.computeTimeInColumnForIssue(t),i.prepareExtraFields(t.extraFields)},GH.GridDataModel.prototype.computeTimeInColumnForIssue=function(t){var e=864e5;t.timeInColumn&&(t.timeInColumn.days=Math.floor((t.timeInColumn.cumulativeDurationInColumn+(new Date).getTime()-t.timeInColumn.enteredCurrentStatusTime)/e))},GH.GridDataModel.prototype.updateIssueData=function(t){this.preprocessIssue(t),this.data.issues[t.key]=t},GH.GridDataModel.prototype.updateOrder=function(t){this.data.order=t,this.buildCache()},GH.GridDataModel.prototype.getGroupData=function(){var t=[],i=this;e.each(i.data.swimlanes,function(n){e.each(i.data.columns,function(e){t.push(i.getIssuesDataForCell(n.id,e.id))})});var n=GH.IssueListUtil.calculateGroupData(t);return n.drawFakeParents=!this.isParentChildStrategy(),n},GH.GridDataModel.prototype.getIssuesDataForCell=function(t,e){var i=this.cache.bySwimlaneThenColumn[t];if(!i)return!1;var n=i[e];return!!n&&this.getIssueDataByKeys(n)},GH.GridDataModel.prototype.getIssuesDataForColumn=function(t){var e=this.data.columnIssueMapping[t];return!!e&&this.getIssueDataByKeys(e)},GH.GridDataModel.prototype.getIssueDataByKeys=function(t){var i=[],n=this.data.issues;return e.each(t,function(t){var e=n[t];e&&i.push(e)}),i},GH.GridDataModel.prototype.getCells=function(){return this.cache.bySwimlaneThenColumn},GH.GridDataModel.prototype.getIssues=function(){return this.data.issues},GH.GridDataModel.prototype.getColumns=function(){return this.data.columns},GH.GridDataModel.prototype.getSwimlanes=function(){return this.data.swimlanes},GH.GridDataModel.prototype.getOrder=function(){return this.data.order},GH.GridDataModel.prototype.getSwimlaneById=function(t){return e.find(this.data.swimlanes,function(e){return e.id==t})},GH.GridDataModel.prototype.getColumnById=function(t){return e.find(this.data.columns,function(e){return e.id==t})},GH.GridDataModel.prototype.getFirstColumn=function(){return e.first(this.data.columns)},GH.GridDataModel.prototype.getDoneColumn=function(){return e.last(this.data.columns)},GH.GridDataModel.prototype.getSwimlaneIdByIssueKey=function(t){var i=!1;return e.each(this.data.swimlaneIssueMapping,function(n,s){e.indexOf(n,t)>-1&&(i=parseInt(s,10))}),i},GH.GridDataModel.prototype.getColumnIdByIssueKey=function(t){var i=!1;return e.each(this.data.columnIssueMapping,function(n,s){e.indexOf(n,t)>-1&&(i=parseInt(s,10))}),i},GH.GridDataModel.prototype.getIssueDataByKey=function(t){return this.data.issues[t]},GH.GridDataModel.prototype.getIssueDataById=function(t){return e.findWhere(this.data.issues,{id:t})},GH.GridDataModel.prototype.getIssueIdForKey=function(t){var e=this.getIssueDataByKey(t);return!!e&&e.id},GH.GridDataModel.prototype.isIssueValid=function(t){var e=this.data.issues[t];return!!e&&!e.hidden},GH.GridDataModel.prototype.hasSwimlanes=function(){var t=this,i=t.isParentChildStrategy();return e.any(t.getSwimlanes(),function(e){return(i||t.getSwimlaneIssueCount(e.id)>0)&&!e.defaultSwimlane})},GH.GridDataModel.prototype.getSwimlaneIssueCount=function(t){return this.data.swimlaneIssueMapping[t].length},GH.GridDataModel.prototype.getColumnIssueCount=function(t){return this.data.columnIssueMapping[t].length},GH.GridDataModel.prototype.isParentChildStrategy=function(){return"parentChild"==this.data.variables.swimlanesType},GH.GridDataModel.prototype.getParentSwimlaneByIssueKey=function(t){return!!this.isParentChildStrategy()&&(e.find(this.data.swimlanes,function(e){if(e.parentKey==t)return!0})||!1)},GH.GridDataModel.prototype._getIssuePositionAndDataByKey=function(t){var i=this.data.issues[t];if(!i)return!1;var n=!1;if(this.isParentChildStrategy()&&e.each(this.data.swimlanes,function(e){e.parentKey==t&&(n=e)}),n)return{isSwimlane:!0,swimlaneId:n.id,columnId:e.first(this.getColumns()).id,issueIndex:-1,issue:i};var s=this.getSwimlaneIdByIssueKey(t);if(!s)return!1;var a=this.getColumnIdByIssueKey(t),r=-1;if(s&&a){var o=this.cache.bySwimlaneThenColumn[s][a];r=e.indexOf(o,t)}return{swimlaneId:s,columnId:a,issueIndex:r,issue:i}},GH.GridDataModel.prototype.getIssueIndexByKey=function(t){var e=this._getIssuePositionAndDataByKey(t);return!!e&&e.issueIndex},GH.GridDataModel.prototype.getNextIssueKey=function(t,i){var n=this._getIssuePositionAndDataByKey(t);if(!n)return!1;i&&(n.columnId=i);var s=this,a=s.getCells(),r=!1,o=!1;return e.find(s.getSwimlanes(),function(t){var e;if(t.id==n.swimlaneId)r=!0,e=n.issueIndex+1;else{if(!r)return!1;if(t.parentKey)return o=t.parentKey,!0;e=0}var i=s.hasSwimlanes();return(!i||!GH.RapidBoard.State.isSwimlaneCollapsed(t.id))&&(o=a[t.id][n.columnId][e],!!o)}),o||!1},GH.GridDataModel.prototype.getPreviousIssueKey=function(t,i){var n=this._getIssuePositionAndDataByKey(t);if(!n)return!1;i&&(n.columnId=i);var s=this,a=s.getCells(),r=!1,o=!1,u=s.getSwimlanes().slice(0).reverse();return e.find(u,function(i){if(i.id!=n.swimlaneId&&!r)return!1;if(r=!0,i.id==n.swimlaneId)return i.parentKey!=t&&(0==n.issueIndex&&i.parentKey?(o=i.parentKey,!0):(o=a[i.id][n.columnId][n.issueIndex-1],!!o));var u=s.hasSwimlanes()&&GH.RapidBoard.State.isSwimlaneCollapsed(i.id);return!u&&a[i.id][n.columnId].length>0?(o=e.last(a[i.id][n.columnId]),!!o):!!i.parentKey&&(o=i.parentKey,!0)}),o||!1},GH.GridDataModel.prototype.getIssueKeyForColumnAtIndex=function(t,i,n){var s=this.cache.bySwimlaneThenColumn[t][i];return!e.isEmpty(s)&&(n<0?s[0]:n>=s.length?e.last(s):s[n])},GH.GridDataModel.prototype.getFirstIssueKey=function(){var t=this.getSwimlanes(),i=this.getColumns(),n=this.getCells(),s=this.hasSwimlanes(),a=!1;return e.find(i,function(i){return e.find(t,function(t){if(s&&GH.RapidBoard.State.isSwimlaneCollapsed(t.id))return!1;var r=n[t.id][i.id];return!e.isEmpty(r)&&(a=e.first(r),!0)}),a}),a},GH.GridDataModel.prototype.getLastIssueKey=function(){var t=this.getSwimlanes().slice().reverse(),i=this.getColumns(),n=this.getCells(),s=this.hasSwimlanes(),a=!1;return e.find(i,function(i){return e.find(t,function(t){if(s&&GH.RapidBoard.State.isSwimlaneCollapsed(t.id))return!1;var r=n[t.id][i.id];return!e.isEmpty(r)&&(a=e.last(r),!0)}),a}),a},GH.GridDataModel.prototype.getIssueKeyInPreviousColumn=function(t,e){var i=this._getIssuePositionAndDataByKey(t);if(!i)return!1;if(i.isSwimlane)return!1;for(var n=this._getPreviousColumn(i.columnId);n;){var s=this.getIssueKeyForColumnAtIndex(i.swimlaneId,n.id,e);if(s)return s;n=this._getPreviousColumn(n.id)}return!1},GH.GridDataModel.prototype._getPreviousColumn=function(t){for(var e=this.getColumns(),i=e.length-1;i>0;i--)if(e[i].id==t)return e[i-1];return!1},GH.GridDataModel.prototype.getIssueKeyInNextColumn=function(t,e){var i=this._getIssuePositionAndDataByKey(t);if(!i)return!1;if(i.isSwimlane)return!1;for(var n=this._getNextColumn(i.columnId);n;){var s=this.getIssueKeyForColumnAtIndex(i.swimlaneId,n.id,e);if(s)return s;n=this._getNextColumn(n.id)}return!1},GH.GridDataModel.prototype._getNextColumn=function(t){for(var e=this.getColumns(),i=0;i<e.length-1;i++)if(e[i].id==t)return e[i+1];return!1},GH.GridDataModel.prototype.getIssuePositionByKey=function(t){var e=this._getIssuePositionAndDataByKey(t);if(e)return{swimlaneId:e.swimlaneId,columnId:e.columnId,position:e.issueIndex}},GH.GridDataModel.prototype.getIssueKeyAtPosition=function(t){if(t&&void 0!==t.swimlaneId&&void 0!==t.columnId&&void 0!==t.position){for(var i,n,s,a,r=this.getSwimlanes(),o=0,u=r.length;o<u;o++)if(r[o].id==t.swimlaneId){i=r[o],o+1<u&&(a=r[o+1]);break}if(i&&(n=this.getColumnById(t.columnId))){var d=this.cache.bySwimlaneThenColumn[t.swimlaneId][t.columnId];return s=d[t.position],s?s:a?this.getIssueKeyAtPosition({swimlaneId:a.id,columnId:t.columnId,position:0}):e.last(d)}}},GH.GridDataModel.prototype.moveIssueToColumn=function(t,e,i){this.moveIssuesToColumn([t],e,i)},GH.GridDataModel.prototype.moveIssuesToColumn=function(t,i,n){var s=this,a=this.data.columnIssueMapping;if(!a[i]||!a[n])return!1;var r=0;if(t.forEach(function(t){a[i]=e.without(a[i],t),a[n].push(t);var o=s.getIssueDataByKey(t);r+=GH.GridColumnsData.getIssueStatsValue(o)}),r>0){var o=this.getColumnById(i),u=this.getColumnById(n);o.stats.visible-=r,u.stats.visible+=r,this.data.variables.anyColumnBusted=GH.GridColumnsData.computeBusted(this.getColumns())}this.buildCache()},GH.GridDataModel.prototype.removeEpicFromIssues=function(t){var i=[],n=this.getIssueDataByKeys(t);return e.each(n,function(t){t.epic&&(delete t.epic,i.push(t))}),i},GH.GridDataModel.prototype.getSwimlaneStrategy=function(){return this.data.swimlaneStrategy},GH.GridDataModel.prototype.getSubtasks=function(){return e.filter(this.data.issues,function(t){return!e.isUndefined(t.parentId)})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridSwimlanesData.js' */
GH.GridSwimlanesData={},GH.GridSwimlanesData.calculateSwimlanesData=function(e,a){var i=[];switch(a.swimlaneStrategy){case"parentChild":i=GH.GridSwimlanesData.calculateParentChildSwimlanes(e,a.parentSwimlanesData);break;case"assignee":i=GH.GridSwimlanesData.calculateAssigneeSwimlanes(e,!1);break;case"assigneeUnassignedFirst":i=GH.GridSwimlanesData.calculateAssigneeSwimlanes(e,!0);break;case"custom":i=GH.GridSwimlanesData.calculateCustomSwimlanes(e,a.customSwimlanesData);break;case"epic":i=GH.GridSwimlanesData.calculateEpicSwimlanes(e,a.epicSwimlanesData);break;case"project":i=GH.GridSwimlanesData.calculateProjectSwimlanes(e);break;case"none":default:i=GH.GridSwimlanesData.calculateNoneSwimlanes(e)}return{type:a.swimlaneStrategy,swimlanes:i,rapidViewId:a.rapidViewId}},GH.GridSwimlanesData.calculateCustomSwimlanes=function(e,a){var i=e.issues,n=a.swimlanes;return GH.GridSwimlanesData.calculateSwimlaneIssueKeys(i,n),n},GH.GridSwimlanesData.calculateSwimlaneIssueKeys=function(e,a){var i;_.each(a,function(a){a.issueKeys=[],_.isEmpty(a.issueIds)||(i||(i={},_.each(e,function(e){i[e.id]=e.key})),_.each(a.issueIds,function(e){a.issueKeys.push(i[e])}))})},GH.GridSwimlanesData.calculateParentChildSwimlanes=function(e,a){var i={},n=a.parentIssueIds,s=[],t={};e.issues.forEach(function(e){e.parentId&&!e.hidden?(s.push(e.parentId),t[e.parentId]||(t[e.parentId]=[]),t[e.parentId].push(e.key)):(e.hidden||s.push(e.id),i[e.id]=e)}),_.each(e.missingParents,function(e){i[e.id]=e}),s=_.uniq(s,!0);var r=_.intersection(s,n),u=1,c=[];_.each(r,function(e){var n=t[e]||[],s=i[e],r=_.contains(a.doneCandidates,e),l={id:u++,name:s.key,description:s.summary,defaultSwimlane:!1,parentKey:s.key,query:"",issueKeys:n,avatarUrl:s.typeUrl,parentOutOfSync:r};r&&GH.WorkController.analytics.trigger("movetodonebutton.shown"),c.push(l)});var l=_.filter(s,function(e){return!_.include(n,e)}),m=l.map(function(e){return i[e]}).filter(function(e){return e&&!e.hidden}).map(function(e){return e.key}),d={id:u++,name:"Other Issues",description:"",defaultSwimlane:!0,query:"",issueKeys:m};return c.push(d),c},GH.GridSwimlanesData.calculateAssigneeSwimlanes=function(e,a){var i={},n=[];_.each(e.issues,function(e){e.hidden||(e.assignee?(i[e.assignee]=i[e.assignee]||[],i[e.assignee].push(e)):n.push(e.key))});var s=1,t=[];if(_.each(i,function(e){var a=e[0].assigneeName,i={id:s++,name:a,lowercaseName:a.toLowerCase(),description:a,defaultSwimlane:!1,query:"",issueKeys:_.map(e,function(e){return e.key})};t.push(i)}),t.sort(GH.GridSwimlanesData.swimlaneNameComparator),!_.isEmpty(n)){var r={id:s++,name:"Unassigned",description:"",defaultSwimlane:!1,query:"",issueKeys:n};a?t.splice(0,0,r):t.push(r)}return t},GH.GridSwimlanesData.calculateEpicSwimlanes=function(e,a){var i={},n=[],s={},t=[];_.each(e.issues,function(e){e.hidden||(e.epic?(i[e.epic]=i[e.epic]||[],i[e.epic].push(e.key),s[e.key]=e.epic):e.parentKey?t.push(e):e.typeId!==GH.EpicConfig.getEpicIssueTypeId()&&n.push(e.key))}),_.each(t,function(e){var a=s[e.parentKey];a?i[a].push(e.key):n.push(e.key)});var r=[],u=1;if(_.each(a.epics,function(e){var n=GH.EpicConfig.getEpicNameString(a.epicNames[e],e),s={id:u++,name:n,lowercaseName:n.toLowerCase(),description:n,defaultSwimlane:!1,query:"",issueKeys:i[e]||[]};r.push(s)}),!_.isEmpty(n)){var c={id:u++,name:"Issues without epics",description:"",defaultSwimlane:!0,query:"",issueKeys:n};r.push(c)}return r},GH.GridSwimlanesData.calculateProjectSwimlanes=function(e){var a=[];_.each(e.issues,function(e){e.hidden||(a[e.projectId]=a[e.projectId]||[],a[e.projectId].push(e.key))});var i=[],n=1;return _.each(e.projects,function(e){var s={id:n++,name:e.key,lowercaseName:e.key,description:e.name,defaultSwimlane:!1,query:"",avatarUrl:e.avatarUrl,issueKeys:a[e.id]||[]};s.issueKeys.length>0&&i.push(s)}),i.sort(GH.GridSwimlanesData.swimlaneNameComparator),i},GH.GridSwimlanesData.calculateNoneSwimlanes=function(e){var a={id:1,name:"None",description:"None",defaultSwimlane:!0,query:"",issueKeys:e.issues.filter(function(e){return!e.hidden}).map(function(e){return e.key})};return[a]},GH.GridSwimlanesData.swimlaneNameComparator=function(e,a){return e.lowercaseName.localeCompare(a.lowercaseName)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/GridColumnsData.js' */
GH.GridColumnsData={},GH.GridColumnsData.Constraints={ISSUE_COUNT_EXCL_SUBS:"issueCountExclSubs",ISSUE_COUNT:"issueCount",NONE:"none"},GH.GridColumnsData.calculateColumnsData=function(n,t,u){var s=t.columns,a=GH.GridColumnsData.getColumnIssueMapping(n,s),i=!!u.fieldConfigured&&GH.GridColumnsData.computeBusted(s),e={columns:s,columnIssueMapping:a,anyColumnBusted:i};return e},GH.GridColumnsData.getColumnIssueMapping=function(n,t){var u={},s={},a={};return _.each(t,function(n){u[n.id]=[],a[n.id]={visible:0,hidden:0},_.each(n.statusIds,function(t){s[t]=n.id})}),_.each(n.issues,function(n){var t=s[n.statusId];if(u[t]){var i=GH.GridColumnsData.getIssueStatsValue(n);n.hidden?a[t].hidden+=i:(u[t].push(n.key),a[t].visible+=i)}}),_.each(t,function(n){n.stats=a[n.id]}),u},GH.GridColumnsData.getIssueStatsValue=function(n){var t=Boolean(n.parentId),u=n.columnStatistic&&n.columnStatistic.statFieldId;return u===GH.GridColumnsData.Constraints.ISSUE_COUNT_EXCL_SUBS?t?0:1:u===GH.GridColumnsData.Constraints.ISSUE_COUNT?1:0},GH.GridColumnsData.computeBusted=function(n){var t=!1;return _.each(n,function(n){var u=n.stats.visible+n.stats.hidden;n.minBusted="undefined"!=typeof n.min&&n.min>u,n.maxBusted="undefined"!=typeof n.max&&n.max<u,t=t||n.minBusted||n.maxBusted}),t},GH.GridColumnsData.getColumnIdForStatus=function(n,t){var u=_.find(n,function(n){return _.find(n.statusIds,function(n){if(n==t)return!0})});return!!u&&u.id};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/IssueListUtil.js' */
GH.IssueListUtil={},GH.IssueListUtil.calculateGroupData=function(e){var n={fakeParents:{},beginGroups:{},endGroups:{}};return _.each(e,function(e){GH.IssueListUtil._calculateGroupData(n,e)}),n},GH.IssueListUtil.issueListToTree=function(e){var n=[];return e=e.map(function(e){return Object.assign({},e)}),_.each(e,function(t,a){if(t.parentKey){var s=n.find(function(e){return e.key===t.parentKey});s||(s=e.find(function(e){return e.key===t.parentKey}),s||(s={key:t.parentKey,fakeParent:!0},n.push(s))),s.subTasks||(s.subTasks=[]),s.subTasks.push(t)}else n.push(t)}),n},GH.IssueListUtil.applyExpandedState=function(e,n){e.forEach(function(e){n.includes(e.key)&&(e.expanded=!0)})},GH.IssueListUtil._calculateGroupData=function(e,n){var t=null,a=null,s=n[n.length-1];_.each(n,function(n){n.parentId?(t?t.parentId!==n.parentId?(e.endGroups[t.id]=!0,e.beginGroups[n.id]=!0,e.fakeParents[n.id]=!0):n.id===s.id?(e.endGroups[n.id]=!0,e.fakeParents[n.id]=!0):e.fakeParents[t.id]&&(e.fakeParents[n.id]=!0):(a&&a.id===n.parentId?e.beginGroups[a.id]=!0:e.fakeParents[n.id]=!0,e.beginGroups[n.id]=!0),t=n):t&&(e.endGroups[t.id]=!0,t=null),a=n})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/JiraBridge.js' */
JIRA.IssueNavigator.getSelectedIssueKey=function(){return GH.IssueOperationShortcuts.getSelectedIssueKey()},JIRA.IssueNavigator.getSelectedIssueId=function(){return GH.IssueOperationShortcuts.getSelectedIssueId()},JIRA.Issue.getIssueId=JIRA.IssueNavigator.getSelectedIssueId,JIRA.Issue.getIssueKey=JIRA.IssueNavigator.getSelectedIssueKey,JIRA.Issues.Api.getSelectedIssueId=JIRA.IssueNavigator.getSelectedIssueId,JIRA.Issues.Api.getSelectedIssueKey=JIRA.IssueNavigator.getSelectedIssueKey;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-IssueActionsDialog.js' */
define("jira-agile/dialog/issue-actions",["jira/ajs/select/queryable-dropdown-select","jira/dialog/dialog","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/ajax/smart-ajax","jira/focus/set-focus","jira-agile/rapid/ui/detail/details-model","jquery"],function(t,e,i,s,n,a,o,r){var l="unified-attach-file-wrapper",d=JIRA.IssueNavigator,c=JIRA.Issue;return e.extend({_getDefaultOptions:function(){return r.extend(this._super(),{cached:!1,id:"issue-actions-dialog",widthClass:"small"})},_setContent:function(t,i){if(t?this._super(t,i):this._super(r(["<form id='issue-actions-dialog-form' class='aui ajs-dirty-warning-exempt issue-actions-dialog-form'>","<div class='form-body'>","<div id='issueactions-suggestions' class='aui-list' />","<div class='description'>","Begin typing for available operations or press down to see all","</div>","</div>","</form>"].join("")),!0),e.current===this){var s=new a.FocusConfiguration;s.context=this.get$popup()[0],s.parentElementSelectors=[".form-body"],a.pushConfiguration(s),a.triggerFocus()}},_attachFileHandler:function(t){t.preventDefault(),this.hide(),r("#attach-file").click()},_formatActionsResponse:function(t){function e(t){return GH.RapidBoard.getCurrentPageReturnUrl()}function n(n){var a=new i({label:"Workflow"});return r(n).each(function(){a.addItem(new s({href:contextPath+"/secure/WorkflowUIDispatcher.jspa?id={0}&action="+this.action+"&atl_token="+t.atlToken+"&returnUrl="+e(t.key),label:this.name,styleClass:"issueaction-workflow-transition"}))}),a}function a(n){var a=new i({label:"Actions"});return r(n).each(function(){var i=e(t.key),n=this.name;o.patchRankOperationName&&(n=o.patchRankOperationName(this.styleClass,this.name));var r=this.url.indexOf("?")===-1?"?":"&",d=this.url+r+"returnUrl="+i,c=this.styleClass;"unified-attach-file"===this.styleClass&&(c=l),a.addItem(new s({href:d,label:n,styleClass:c}))}),a}var d=[];return t&&(t.actions&&0!==t.actions.length&&d.push(n(t.actions)),t.operations&&0!==t.operations.length&&d.push(a(t.operations))),d},decorateContent:function(){var e=this,i=this,s=d.getSelectedIssueKey(),a=c.getIssueId()||d.getSelectedIssueId();s?this.addHeading("Operations"+": <span>"+s+"</span>"):this.addHeading("Operations"),this.queryControl=new t({id:"issueactions",element:this.$content.find("#issueactions-suggestions"),ajaxOptions:{minQueryLength:1,dataType:"json",url:AJS.format(contextPath+"/rest/api/1.0/issues/{0}/ActionsAndOperations?atl_token={1}",a,atl_token()),formatResponse:function(t){return e._formatActionsResponse(t)}},showDropdownButton:!0,loadOnInit:!0}),this.queryControl._handleServerError=function(t){var e=n.buildSimpleErrorContent(t),s=401===t.status?"warning":"error";i._setContent(r('<div class="ajaxerror"><div class="aui-message '+s+'"><p>'+e+"</p></div></div>"),!1),i._addCloseLink()},this._attachFileHandler=this._attachFileHandler.bind(this),r("body").on("click","."+l,this._attachFileHandler),this.timeoutId=void 0,this._addCloseLink()},_addCloseLink:function(){var t,e,i,s=this;e=r('<div class="buttons-container form-footer"></div>').appendTo(this.get$popupContent()),i=r('<div class="buttons"/>').appendTo(e),t=r("<a href='#' class='cancel' id='aui-dialog-close'>"+"Close"+"</a>"),t.appendTo(i,this.get$popupContent()).click(function(t){s.hide(),t.preventDefault()}),this.get$popupContent().append(e)},hide:function(t){return this._super(t)!==!1&&(r("body").off("click","."+l,this._attachFileHandler),void a.popConfiguration())}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-LinkIssueDialog.js' */
!function(){"use strict";var e=require("jquery"),t=require("jira-agile/dialog/issue-dialog-util");GH.LinkIssueDialog={},GH.LinkIssueDialog.create=function(){function n(t,n){var i=!1;return e.each(n,function(e,n){if(n.id===t)return n.isSelected=!0,i=!0,!1}),i||(n[0].isSelected=!0),n}function i(t){var n=e.Deferred();return JIRA.SmartAjax.makeRequest({url:contextPath+"/rest/viewIssue/1/remoteIssueLink/linkType?issueId="+t,complete:function(e,t,i){i.successful?n.resolve(i.data):n.reject(JIRA.SmartAjax.buildDialogErrorContent(i))}}),n.promise()}function s(t){var n=e.Deferred(),i=JIRA.Dialogs.getDefaultAjaxOptions.call(t);return i.complete=function(e,t,i){i.successful?n.resolve(i.data):n.reject(JIRA.SmartAjax.buildDialogErrorContent(i))},JIRA.SmartAjax.makeRequest(i),n.promise()}function u(e){return e.$activeTrigger.attr("id")}return function(r,o,a,l){return a=a||t.storeCurrentIssueIdOnSucessfulSubmit,new GH.FormDialog({id:"link-issue-dialog",trigger:r,onSuccessfulSubmit:a,issueMsg:"thanks_issue_linked",widthClass:"large",stacked:!0,content:function(t){var r=this,a=l||JIRA.Issue.getIssueId()||JIRA.IssueNavigator.getSelectedIssueId();s(r).done(function(s){i(a).done(function(i){var a=o||u(r);i=n(a,i),t(JIRA.Templates.LinkIssue.dialog({linkTypes:i,tabContent:s})),e.each(i,function(t,n){var i;n.isSelected===!0&&(i="[name='"+n.focusedFieldName+"']",0===e(i).length&&(i="#"+n.id),r._focusFirstField(i))})}).fail(function(e){t(e)})}).fail(function(e){t(e)})},formatSubmitResponseContent:function(e){return this.get$popupContent().find(".dialog-pane").html(e),this.get$popupContent().html()},onContentRefresh:function(){this.bindAnchorsToDialog(this.get$popupContent().find(".dialog-menu-item "))}})}}()}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/gh-InitDialogs.js' */
AJS.$(function(){require(["jira/dialog/dialog-register","jira-agile/dialog/issue-actions","jira-agile/dialog/labels-dialog","jira/dialog/screenshot-window","jira/dialog/form-dialog","jira/dialog/dialog","jquery","aui/tabs"],function(e,s,t,i,o,n,a,r){function u(e){}var l,c=JIRA.IssueNavigator,d=JIRA.Issue,g=["deleteIssueLink","editComment","deleteComment"];for(var f in e)if(e.hasOwnProperty(f)){if(g.indexOf(f)>=0)continue;l=e[f],l._unassignEvents&&l.options.trigger&&l._unassignEvents("trigger",l.options.trigger)}a(document).undelegate("a.issueaction-workflow-transition","click"),a("a.issueaction-attach-screenshot").die("click"),e.keyboardShortcuts=new o({id:"keyboard-shortcuts-dialog",trigger:"#keyshortscuthelp",widthClass:"large",onContentRefresh:function(){var e=this.get$popupContent();a("a.submit-link",e).click(function(s){s.preventDefault(),a("form",e).submit()})}}),document.getElementById("dashboard")?(e.deleteDashboard=new o({type:"ajax"}),a(document).delegate("#delete_dashboard","click",function(s){s.stopPropagation(),s.preventDefault(),e.deleteDashboard.$activeTrigger=a("#delete_dashboard"),e.deleteDashboard.init({type:"ajax",id:"delete-dshboard",ajaxOptions:{url:e.deleteDashboard.$activeTrigger.attr("href")},targetUrl:"input[name=targetUrl]"}),e.deleteDashboard.show()})):(e.assignToMe=new GH.FormDialog({id:"assign-to-me-link-handler",trigger:"a.issueaction-assign-to-me",ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned"}),e.linkIssue=GH.LinkIssueDialog.create("a.issueaction-link-issue"),e.deleteIssue=new GH.FormDialog({id:"delete-issue-dialog",trigger:"a.issueaction-delete-issue",targetUrl:"#delete-issue-return-url",ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_deleted",onContentRefresh:function(){a(".overflow-ellipsis").textOverflow()}}),e.cloneIssue=new GH.FormDialog({id:"clone-issue-dialog",trigger:"a.issueaction-clone-issue",handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_cloned",onContentRefresh:function(){a(".overflow-ellipsis").textOverflow()}}),e.assignIssue=new GH.FormDialog({id:"assign-dialog",trigger:"a.issueaction-assign-issue",ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned",onContentRefresh:function(){a(".overflow-ellipsis").textOverflow()}}),e.logWork=new GH.FormDialog({id:"log-work-dialog",trigger:"a.issueaction-log-work",handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_worklogged",onContentRefresh:function(){a(".overflow-ellipsis").textOverflow();this.get$popupContent()}}),e.attachFile=new GH.FormDialog({id:"attach-file-dialog",trigger:"a.issueaction-attach-file",handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",onContentRefresh:function(){a(".overflow-ellipsis").textOverflow()}}),e.attachScreenshotDialog=new GH.FormDialog({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",onContentRefresh:function(){a(".overflow-ellipsis").textOverflow()}}),e.attachScreenshot=new i({id:"attach-screenshot-window",trigger:"a.issueaction-attach-screenshot"}),e.comment=new GH.FormDialog({id:"comment-add-dialog",trigger:"a.issueaction-comment-issue",handleRedirect:!0,widthClass:"large",ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_commented",onContentRefresh:function(){a(".overflow-ellipsis").textOverflow()}}),e.editLabels=new t({id:"edit-labels-dialog",trigger:"a.issueaction-edit-labels,a.edit-labels",autoClose:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_labelled",labelsProvider:u,onContentRefresh:function(){a(".overflow-ellipsis").textOverflow()}}),e.issueActions=new s,AJS.namespace("jira.app.issueActionsPopup",null,e.issueActions),a(document).delegate("a.issueaction-workflow-transition","click",function(s){s.preventDefault();var t=/action=(\d+)/.exec(this.href.slice(this.href.indexOf("?")));if(t){var i="workflow-transition-"+t[1]+"-dialog",o=a(this);e[i]||(e[i]=new GH.FormDialog({id:i,url:o.attr("href"),transitionActionId:t[1],trigger:'a[href*="'+t[0]+'"].issueaction-workflow-transition',widthClass:"large",handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_transitioned",onContentRefresh:function(){r.setup()}}),e[i].show())}}),a.each(e,function(e,s){s instanceof n&&a(s).bind("beforeShow",function(){if("keyboardShortcuts"!==e)return c.isRowSelected()||void 0!==d.getIssueId()})}))})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/KeyboardShortcuts.js' */
!function(){"use strict";var e=require("jquery"),o=require("jira-agile/rapid/const/PageMode"),t=require("jira-agile/rapid/ui/bento/bento-features"),s=require("jira/analytics/web-client"),n=function(e,o){function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}var n="unknown";GH.ReportController&&GH.ReportController.visible?n=GH.ReportController.getCurrentChart().id+"Screen":GH.PlanController&&GH.PlanController.isActive()?n="backlogScreen":GH.WorkController&&GH.WorkController.isActive()&&(n="boardScreen");var r="keyboardShortcut";s.sendUIEvent({source:n,action:"pressed",actionSubject:r,actionSubjectId:o+t(r),attributes:{key:e}})};GH.Shortcut={focusBoardSearch:function(e){},newIssue:function(o){r()||e("#create_link").click()},toggleBox:function(e){},editIssuePriority:function(e){},projector:function(e){n(e,"projector"),GH.PresentationMode.iterateThroughPresentationModes(GH.PresentationMode.allModes)},viewIssue:function(e){a(GH.IssueOperationShortcuts.viewSelectedIssue,null,{key:e,type:"viewIssue"})},editIssue:function(e){a(GH.IssueOperationShortcuts.editSelectedIssue,null,{key:e,type:"editIssue"})},assignIssue:function(e){var o={type:"EDIT_FIELD",payload:{fieldId:"assignee"}};a(GH.IssueOperationShortcuts.assignSelectedIssue,o,{key:e,type:"assignIssue"})},assignIssueToMe:function(e){t.isIssueDetailsKeyboardShortcutsEnabled()?i()||(n(e,"assignToMe"),GH.IssueOperationShortcuts.assignSelectedIssueToMe()):r()||(n(e,"assignToMe"),GH.IssueOperationShortcuts.assignSelectedIssueToMe())},commentIssue:function(e){var o={type:"ADD_COMMENT"};a(GH.IssueOperationShortcuts.commentSelectedIssue,o,{key:e,type:"commentIssue"})},editIssueLabels:function(e){r()||(n(e,"editIssueLabels"),GH.IssueOperationShortcuts.editSelectedIssueLabels())},showOperationsDialog:function(e){r()||(n(e,"showOperationsDialog"),GH.IssueOperationShortcuts.showOperationsDialog())},sendToTop:function(e,o){GH.WorkController.isActive()?r()||(n(o,"sendToTop"),GH.WorkKBShortcuts.sendToTop(e)):GH.PlanController.isActive()&&(n(o,"sendToTop"),GH.PlanKBShortcuts.sendToTop(e))},sendToBottom:function(e,o){GH.WorkController.isActive()?r()||(n(o,"sendToBottom"),GH.WorkKBShortcuts.sendToBottom(e)):GH.PlanController.isActive()&&(n(o,"sendToBottom"),GH.PlanKBShortcuts.sendToBottom(e))},nextIssue:function(e){GH.WorkController.isActive()?r()||(n(e,"nextIssue"),GH.WorkKBNavigation.selectNextIssue()):GH.PlanController.isActive()&&(n(e,"nextIssue"),GH.BacklogSelectionController.selectNextIssue())},previousIssue:function(e){GH.WorkController.isActive()?r()||(n(e,"previousIssue"),GH.WorkKBNavigation.selectPreviousIssue()):GH.PlanController.isActive()&&(n(e,"previousIssue"),GH.BacklogSelectionController.selectPreviousIssue())},nextBox:function(e){GH.WorkController.isActive()&&(r()||(n(e,"nextColumn"),GH.WorkKBNavigation.selectNextColumn()))},previousBox:function(e){GH.WorkController.isActive()&&(r()||(n(e,"previousColumn"),GH.WorkKBNavigation.selectPreviousColumn()))},toggleSwimlanes:function(e){GH.WorkController.isActive()&&(n(e,"toggleSwimlanes"),GH.WorkKBNavigation.toggleSwimlanes())},planMode:function(e){l()||(GH.RapidBoard.State.isPlanModeAvailable()?r()||(n(e,"setPlanMode"),GH.RapidBoard.ViewController.setMode(o.PLAN)):this.workMode())},workMode:function(e){l()||r()||(n(e,"setWorkMode"),GH.RapidBoard.ViewController.setMode(o.WORK))},reportMode:function(e){l()||r()||(n(e,"setReportMode"),GH.RapidBoard.ViewController.setMode(o.REPORT))},toggleIssue:function(e){n(e,"toggleDetailsView"),GH.WorkController.isActive()?GH.WorkController.toggleDetailsView():GH.PlanController.isActive()&&GH.PlanController.toggleDetailsView()}},e(document).bind("keydown");var r=function(){return GH.WorkController.isActive()&&GH.RapidBoard.State.isNewIssueViewEnabled()&&GH.WorkView.isIssueModalOpened()},i=function(){var e=GH.WorkController.isActive()&&GH.RapidBoard.State.isNewIssueViewEnabled()&&GH.WorkController.isDetailsViewOpened(),o=GH.PlanController.isActive()&&t.isBentoInBacklogEnabled()&&GH.PlanController.isDetailsViewOpened();return e||o},l=function(){return GH.RapidBoard.State.isAgilityBoard()},a=function(e,o,s){GH.WorkController.isActive()&&GH.RapidBoard.State.isNewIssueViewEnabled()?!GH.WorkController.isDetailsViewOpened()&&GH.WorkSelectionController.getSelectedIssueKey()&&(GH.WorkController.toggleDetailsView(o),n(s.key,s.type)):GH.PlanController.isActive()&&t.isIssueDetailsKeyboardShortcutsEnabled()&&t.isBentoInBacklogEnabled()?!GH.PlanController.isDetailsViewOpened()&&GH.IssueOperationShortcuts.getSelectedIssueKey()&&(GH.PlanController.toggleDetailsView(o),n(s.key,s.type)):(e(),n(s.key,s.type))}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/IssueOperationShortcuts.js' */
!function(){"use strict";var e=require("jira-agile/rapid/analytics-tracker"),t=require("jira/dialog/dialog-register");GH.IssueOperationShortcuts={},GH.IssueOperationShortcuts.overrideSelectedIssue=void 0,GH.IssueOperationShortcuts.analytics=function(t){return new e("gh.issueaction."+t)},GH.IssueOperationShortcuts.init=function(){GH.IssueOperationShortcuts.bindEnter(),AJS.$(document).delegate(".js-issueaction-container-dot .js-issueaction","click",function(e){var t=AJS.$(e.currentTarget).attr("id");GH.IssueOperationShortcuts.trackKeyboardShortcuts(t)}),AJS.$(document).delegate("#issueactions-suggestions a.aui-list-item-link","click",function(e){var t=AJS.$(e.currentTarget).attr("class");if(t.indexOf("issueaction-")>=0){var s=t.replace(/.*issueaction-([a-z0-9_-]+).*/,"$1");GH.IssueOperationShortcuts.trackDotDialogAction(s)}}),AJS.bind("remove.dialog",function(){GH.IssueOperationShortcuts.bindEnter()})},GH.IssueOperationShortcuts.bindEnter=function(){AJS.$(document).bind("keydown",function(e){if("13"===e.keyCode){var t=e.target;void 0!==t&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&t!==document||GH.IssueOperationShortcuts.viewSelectedIssue()}})},GH.IssueOperationShortcuts.setOverrideSelectedIssue=function(e){GH.IssueOperationShortcuts.overrideSelectedIssue=e},GH.IssueOperationShortcuts.clearOverrideSelectedIssue=function(){GH.IssueOperationShortcuts.overrideSelectedIssue=void 0},GH.IssueOperationShortcuts.isOverrideSelectedIssueActive=function(){return!!GH.IssueOperationShortcuts.overrideSelectedIssue},GH.IssueOperationShortcuts.getSelectedIssueKey=function(){return GH.IssueOperationShortcuts.overrideSelectedIssue?GH.IssueOperationShortcuts.overrideSelectedIssue.key:GH.WorkController.isActive()?GH.WorkSelectionController.getSelectedIssueKey():GH.PlanController.isActive()?GH.BacklogSelectionController.getSelectedIssueKey():void 0},GH.IssueOperationShortcuts.getSelectedIssueId=function(){if(GH.IssueOperationShortcuts.overrideSelectedIssue)return GH.IssueOperationShortcuts.overrideSelectedIssue.id;if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey();if(e){var t=GH.GridDataController.getModel();return t&&t.getIssueIdForKey(e)}}else if(GH.PlanController.isActive()){var e=GH.BacklogSelectionController.getSelectedIssueKey();if(e){var t=GH.BacklogModel;return t&&t.getIssueIdForKey(e)}}},GH.IssueOperationShortcuts.viewSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();if(e){GH.IssueOperationShortcuts.trackKeyboardShortcuts("open-issue");var t=GH.Ajax.CONTEXT_PATH+"/browse/"+e;window.location.href=t}},GH.IssueOperationShortcuts.editSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueId();e&&AJS.$("a.issueaction-edit-issue").trigger("click")},GH.IssueOperationShortcuts.assignSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-assign-issue").trigger("click")},GH.IssueOperationShortcuts.assignSelectedIssueToMe=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-assign-to-me").trigger("click")},GH.IssueOperationShortcuts.commentSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();if(e){var t=AJS.$("#ghx-detail-view #addcomment a[name=add-comment]");t.length>0?t.trigger("click"):AJS.$(".js-issueaction-container-dot a.issueaction-comment-issue").trigger("click")}},GH.IssueOperationShortcuts.attachFilesSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-attach-file").trigger("click")},GH.IssueOperationShortcuts.editSelectedIssueLabels=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-edit-labels").trigger("click")},GH.IssueOperationShortcuts.deleteSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueId();e&&AJS.$(".js-issueaction-container-dot a.issueaction-delete-issue").trigger("click")},GH.IssueOperationShortcuts.linkSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueId();e&&AJS.$(".js-issueaction-container-dot a.issueaction-link-issue").trigger("click")},GH.IssueOperationShortcuts.createSubtask=function(){var e=AJS.$("#atlassian-token").attr("content"),t=GH.Ajax.CONTEXT_PATH+"/secure/CreateSubTaskIssue!default.jspa?parentIssueId={0}&atl_token="+e+"&returnUrl=",s='<a href="'+t+'" class="issueaction-create-subtask" style="display:none"></a>',r=AJS.$(s);AJS.$("#gh").append(r),r.click(),r.remove()},GH.IssueOperationShortcuts.logWorkOnSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-log-work").trigger("click")},GH.IssueOperationShortcuts.showOperationsDialog=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&t.issueActions.show()},GH.IssueOperationShortcuts.trackKeyboardShortcuts=function(e){GH.IssueOperationShortcuts.analytics("keyboardshortcuts").trigger(e)},GH.IssueOperationShortcuts.trackDotDialogAction=function(e){GH.IssueOperationShortcuts.analytics("dotdialog").trigger(e)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkKBShortcuts.js' */
GH.WorkKBShortcuts={},GH.WorkKBShortcuts.sendToTop=function(o){GH.WorkRanking.sendToTop(o)},GH.WorkKBShortcuts.sendToBottom=function(o){GH.WorkRanking.sendToBottom(o)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkKBNavigation.js' */
GH.WorkKBNavigation={},GH.WorkKBNavigation.currentIndex=0,GH.WorkKBNavigation.currentColumn=0,GH.WorkKBNavigation.currentSwimlane=0,GH.WorkKBNavigation.columnChange=!1,GH.WorkKBNavigation.init=function(){AJS.$(GH).bind("issueSelected",function(e,o){GH.WorkKBNavigation.adaptCurrentPosition(o)})},GH.WorkKBNavigation.initCurrentPosition=function(){var e=GH.WorkSelectionController.getSelectedIssueKey();e?GH.WorkKBNavigation.setCurrentPosition(e,!0,!1):GH.WorkKBNavigation.resetCurrentPosition()},GH.WorkKBNavigation.adaptCurrentPosition=function(e){GH.WorkKBNavigation.columnChange?(GH.WorkKBNavigation.columnChange=!1,GH.WorkKBNavigation.setCurrentPosition(e,!1,!0)):GH.WorkKBNavigation.setCurrentPosition(e,!1,!1)},GH.WorkKBNavigation.setCurrentPosition=function(e,o,i){if(e){var n=GH.GridDataController.getModel()._getIssuePositionAndDataByKey(e);if(n)return i||(GH.WorkKBNavigation.currentIndex=n.issueIndex),!o&&n.isSwimlane||(GH.WorkKBNavigation.currentColumn=n.columnId),void(GH.WorkKBNavigation.currentSwimlane=n.swimlaneId)}GH.WorkKBNavigation.resetCurrentPosition()},GH.WorkKBNavigation.resetCurrentPosition=function(){GH.WorkKBNavigation.currentIndex=0,GH.WorkKBNavigation.currentColumn=0,GH.WorkKBNavigation.currentSwimlane=0},GH.WorkKBNavigation.selectNextIssue=function(){if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey(),o=GH.GridDataController.getModel();if(e){if(!GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(e)){var i=o.getNextIssueKey(e,GH.WorkKBNavigation.currentColumn);i&&GH.WorkSelectionController.focusOnIssue(i)}}else{var n=o.getFirstIssueKey();n&&GH.WorkSelectionController.focusOnIssue(n)}}},GH.WorkKBNavigation.selectPreviousIssue=function(){if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey(),o=GH.GridDataController.getModel();if(e){if(!GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(e)){var i=o.getPreviousIssueKey(e,GH.WorkKBNavigation.currentColumn);i&&GH.WorkSelectionController.focusOnIssue(i)}}else{var n=o.getLastIssueKey();n&&GH.WorkSelectionController.focusOnIssue(n)}}},GH.WorkKBNavigation.selectNextColumn=function(){if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey();if(!e)return void GH.WorkKBNavigation.selectNextIssue();var o=GH.GridDataController.getModel(),i=o.isIssueValid(e);if(!i)return void GH.WorkKBNavigation.selectNextIssue();if(!GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(e)){var n=o.getIssueKeyInNextColumn(e,GH.WorkKBNavigation.currentIndex);n&&(GH.WorkKBNavigation.columnChange=!0,GH.WorkSelectionController.focusOnIssue(n))}}},GH.WorkKBNavigation.selectPreviousColumn=function(){if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey();if(!e)return void GH.WorkKBNavigation.selectNextIssue();var o=GH.GridDataController.getModel(),i=o.isIssueValid(e);if(!i)return void GH.WorkKBNavigation.selectNextIssue();if(!GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(e)){var n=o.getIssueKeyInPreviousColumn(e,GH.WorkKBNavigation.currentIndex);n&&(GH.WorkKBNavigation.columnChange=!0,GH.WorkSelectionController.focusOnIssue(n))}}},GH.WorkKBNavigation.toggleSwimlanes=function(){GH.SwimlaneView.toggleAllSwimlanes()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkTransitionService.js' */
define("jira-agile/rapid/ui/work/work-transition-service",["require"],function(){"use strict";var n=require("underscore"),r=require("jquery"),t=require("jira-agile/rapid/ajax"),e={};e.dataPromise=r.Deferred(),e.data=null,e.checkForUpdates=function(){var r=i();return!this.dataPromise.isRejected()&&n.isEqual(r,this.dataPromise.projectIds)||e.preloadData(r),this.dataPromise},e.preloadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();this.dataPromise=t.get({url:"/xboard/work/transitions.json",data:{projectId:n}},"workTransitionService").done(function(n){e.data=n}),this.dataPromise.projectIds=n};var i=function(){var n=GH.VersionController.getVersionModel();return n.getProjects().map(function(n){return n.id}).sort()};e.getValidTransitionsForIssue=function(n){return t.get({bareUrl:t.buildBareRestUrl("/rest/api/2/issue/"+n+"/transitions")}).fail(t.handleGlobalErrors)},e.queryTransitionForColumn=function(n,t,e){var i=this,o=r.Deferred();return p().done(function(){var r=[];n.forEach(function(n){var e=v(n);r.push(m(e,t))});var s=void 0;i._filterAvailableTransitionsForIssue(n,r,e).done(function(r){s=a(n,r,t),o.resolve(s)}).fail(o.reject)}).fail(o.reject),o};var a=function(r,t,e){var i=void 0;if(1===r.length){var a=t[0];i=n.isEmpty(a)||o(t)?u(AJS.format("Something isn\'\'t letting us move {0} to {1}. Ask your project administrator to check the workflow settings and transition conditions.",r[0],e.name)):a}else if(f(t))i=u(AJS.format("Unable to transition multiple issues to {0}. The transition screen is not supported when transitioning multiple issues.",e.name));else if(d(t)){var s=t[0];i=n.isEmpty(s)?u(AJS.format("Unable to transition the issues to {0}. Check if all transition conditions are met when moving multiple issues.",e.name)):s}else i=c(t)?[{}]:u(AJS.format("Unable to transition issues to {0}. Check if the issues you\'\'re transitioning have the same set of transitions.",e.name));return i},o=function(n){return n.every(function(n){return n.every(function(n){return n.isInvalid})})},s=function(n){return n.some(function(n){return n.some(function(n){return n.hasConditions})})},u=function(n){return[{error:n}]},f=function(n){return n.some(function(n){return n.some(function(n){return n.hasScreen})})},c=function(n){return n.every(function(n){return 1===n.length})},d=function(r){var t=r[0];return r.every(function(r){return n.isEqual(r,t)})};e._filterAvailableTransitionsForIssue=function(n,r,t){var e=s(r)&&1===n.length,i=AJS.$.Deferred();return e?(t.done(function(n){i.resolve(l(r,n))}).fail(function(){i.reject()}),i.promise()):i.resolve(r)};var l=function(n,r){var t=r.transitions,e=n[0],i=new Set;t.map(function(n){return Number(n.id)}).forEach(function(n){return i.add(n)});var a=e.map(function(n){var r=Object.assign({},n);return i.has(r.transitionId)||(r.isInvalid=!0),r});return[a]};e.getTransitionById=function(r,t){var e=I(r);return n.find(this.data.workflowToTransitions[e],function(n){return n.transitionId===Number(t)})},e.hasAnyTransitionHasScreen=function(n,r){return n.some(function(n){var t=e.getTransitionById(n,r);return t.hasScreen})};var v=function(r){var t=I(r),i=e.data.workflowToTransitions[t];if(n.isUndefined(i))return[];var a=h(r);return i.filter(function(r){return!r.isInitial&&(n.isUndefined(r.fromStatusId)||r.fromStatusId===Number(a.statusId))})},m=function(n,r){var t=[];return n.forEach(function(n){r.statusIds.forEach(function(r){Number(r)===n.toStatusId&&t.push(n)})}),t},p=function(){return e.checkForUpdates()},h=function(n){var r=GH.GridDataController.getModel();return r.getIssueDataByKey(n)},I=function(n){var r=h(n),t=e.data.projectAndIssueTypeToWorkflow[r.projectId];return t[r.typeId]};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkDragAndDrop.js' */
!function(){function r(r,e){return!!e&&!o.hasAnyTransitionHasScreen(r,e)}var o=require("jira-agile/rapid/ui/work/work-transition-service"),e=require("jira-agile/rapid/analytics-tracker"),n=require("underscore"),a=(require("jira/featureflags/feature-manager"),require("jira-agile/features/feature-flags"),require("jira-agile/rapid/events"));GH.WorkDragAndDrop=new a,GH.WorkDragAndDrop.currentDragElement=null,GH.WorkDragAndDrop.cancel=!1,GH.WorkDragAndDrop.enabled=!1,GH.WorkDragAndDrop.skipNextRank=!1,GH.WorkDragAndDrop.analytics={dragAndDrop:new e("gh.rapidboard.work.dragAndDrop"),ranking:new e("gh.rapidboard.rankissues")},GH.WorkDragAndDrop.init=function(){GH.WorkDragAndDrop.enabled=!0},GH.WorkDragAndDrop.initDraggables=function(r){GH.WorkDragAndDrop.enabled&&setTimeout(function(){GH.WorkDragAndDrop._registerDraggables(r)},0)},GH.WorkDragAndDrop._registerDraggables=function(r){var o=GH.RankingModel.canUserRank();r.find(".ghx-columns").each(function(r,e){var n=AJS.$(e);o?n.find(".ghx-column").on("mousedown",function(){document.activeElement&&document.activeElement.blur()}).agileSortable({revert:0,zIndex:3e3,start:GH.WorkDragAndDrop.issueDragStart,stop:GH.WorkDragAndDrop.issueDragStop,items:".js-parent-drag",cancel:".js-fake-parent, .ghx-parent-group > .ghx-subtask-group",update:GH.WorkDragAndDrop.updateIssueHandler}).find(".ghx-subtask-group").agileSortable({revert:0,zIndex:3e3,start:function(r,o){GH.WorkDragAndDrop.issueDragStart.apply(this,[r,o]);var e=AJS.$(o.item).parent();e.children().length>2&&e.addClass("ghx-contain")},stop:function(r,o){GH.WorkDragAndDrop.issueDragStop.apply(this,[r,o]),AJS.$(o.item).parent().removeClass("ghx-contain")},items:".ghx-issue-subtask",update:GH.WorkDragAndDrop.updateIssueHandler}):GH.WorkDragAndDrop._initIssueCardsDraggable(n.find(".js-issue"),n)})},GH.WorkDragAndDrop.registerSingleCardDraggable=function(r){var o=GH.RankingModel.canUserRank();if(!o){var e=r.closest(".ghx-columns");GH.WorkDragAndDrop._initIssueCardsDraggable(r,e)}},GH.WorkDragAndDrop._initIssueCardsDraggable=function(r,o){r.draggable({revert:!0,revertDuration:0,zIndex:3e3,containment:o,start:GH.WorkDragAndDrop.issueDragStart,stop:GH.WorkDragAndDrop.issueDragStop})},GH.WorkDragAndDrop.updateIssueHandler=function(r,o){if(GH.WorkDragAndDrop.skipNextRank)return void AJS.$(this).agileSortable("cancel");if(!GH.WorkDragAndDrop.cancel){var e=AJS.$(o.item),n=GH.WorkSelectionController.getSelectedIssuesInOrder(),a=GH.WorkSelectionController.getIssueKey(e.prev(".js-issue, .ghx-parent-group")),t=GH.WorkSelectionController.getIssueKey(e.next(".js-issue, .ghx-parent-group"));GH.WorkDragAndDrop.analytics.ranking.trigger("dragAndDrop",n.length),GH.WorkRanking.rankIssues(n,a,t)}},GH.WorkDragAndDrop.issueDragStart=function(r,o){GH.WorkDragAndDrop.cancel=!1,GH.WorkDragAndDrop.skipNextRank=!1,GH.WorkContextMenuController.hideContextMenu();var e=!!o.item,n=e?AJS.$(o.item):AJS.$(this);AJS.$(o.placeholder).height(n.height());var a=AJS.$(this);AJS.$(document).bind("keydown.dragAndDrop",function(r){27===r.keyCode&&(GH.WorkDragAndDrop.cancel=!0,e?a.agileSortable("cancel"):a.draggable("cancel"),GH.WorkDragAndDrop.analytics.dragAndDrop.trigger("cancel"))}),GH.WorkDragAndDrop.currentDragElement=n;var t=(GH.WorkSelectionController.getIssueId(n),GH.WorkSelectionController.getIssueKey(n));GH.WorkSelectionController.ensureIssueSelected(r,t),GH.WorkDragAndDrop.droppablesReady=!1,AJS.$(".ghx-column").agileDroppable("destroy");var i=GH.WorkSelectionController.getSelectedIssueKeys();GH.WorkDragAndDrop.initDropZoneOverlay(n),GH.WorkDragAndDrop.initDropZones(t),i.length>1&&(n.hasClass("ghx-parent-group")?n.children(".js-issue").addClass("ghx-move-main").find(".ghx-move-count > b").text(i.length):n.addClass("ghx-move-main").find(".ghx-move-count > b").text(i.length)),GH.WorkDragAndDrop.analytics.dragAndDrop.trigger("start","issueCount",i.length)},GH.WorkDragAndDrop.issueDragStop=function(r,o){AJS.$(document).unbind("keydown.dragAndDrop");var e=o.item?AJS.$(o.item):AJS.$(this);if(e.hasClass("ghx-parent-group")?e.children(".js-issue").removeClass("ghx-move-main"):e.removeClass("ghx-move-main"),GH.WorkDragAndDrop.destroyDropZoneOverlay(),GH.WorkDragAndDrop.cleanTransitionClasses(),GH.WorkDragAndDrop.currentDragElement=null,!GH.WorkDragAndDrop.cancel&&!GH.RankingModel.isRankable()){var n=Math.abs(o.position.left),a=Math.abs(o.position.top);n<35&&a>50&&GH.WorkDragAndDrop.showNotRankableWarning()}GH.WorkDragAndDrop.droppablesReady=!1,GH.WorkDragAndDrop.analytics.dragAndDrop.trigger("complete")},GH.WorkDragAndDrop.showNotRankableWarning=function(){var r=GH.RapidBoard.getRapidViewConfigurationUrl(GH.WorkController.rapidViewData.id,"filter"),o='<a href="'+r+'">',e="</a>",n=AJS.format("Ranking is disabled, as the Filter Query for this board is not ordered by ascending Rank. Please check your {0}filter configuration{1}.",o,e);GH.Notification.showWarning(n)},GH.WorkDragAndDrop.isIssueBeingDragged=function(r){var o=GH.WorkDragAndDrop.currentDragElement;if(o){var e=AJS.$(o).data("issue-key");return r===e}},GH.WorkDragAndDrop.issueDropped=function(o,e){if(!GH.WorkDragAndDrop.cancel){var n=GH.WorkSelectionController.getSelectedIssueKeys();GH.WorkDragAndDrop.trigger("before:transitionAndRankIssue",{selectedIssueNo:n.length});var a=void 0,t=AJS.$(this),i=t.attr("target-transition-id"),s=parseInt(t.attr("target-transition-status"),10),d=GH.RapidBoard.State.getRapidViewId(),g=t.closest(".ghx-target-option").data("column-id"),l=e.draggable.closest(".ghx-column").data("column-id");if(r(n,i))a=GH.WorkController.optimisticallyTransition(n,i,s,l,g);else if(n.length>1){var p={rapidViewId:d,issueKeys:n,targetColumn:g,selectedTransitionId:i,mode:GH.RapidBoard.State.getMode()};a=GH.WorkController.submitTransitionAndRank(p).always(GH.WorkController.reload)}else{var D=GH.WorkSelectionController.getIssueId(AJS.$(this));GH.WorkDragAndDrop.executeWorkflowTransition(D,i,s),a=AJS.$.Deferred().resolve()}AJS.trigger("analyticsEvent",{name:"gh.rapidboard.transitionissues.dragAndDrop",data:{issueCount:n.length,boardId:d,fromColumn:l,toColumn:g,totalColumns:GH.GridDataController.getModel().getColumns().length}}),GH.WorkDragAndDrop.skipNextRank=!0,a.always(function(){GH.WorkDragAndDrop.trigger("after:transitionAndRankIssue")})}},GH.WorkDragAndDrop._shouldUseOptimisticTranstion=r,GH.WorkDragAndDrop.dropzoneOverlay=null,GH.WorkDragAndDrop.initDropZoneOverlay=function(r){var o=GH.GridDataController.getModel(),e=o.getColumns(),n=parseInt(r.closest(".ghx-column").attr("data-column-id"),10),a=AJS.$(GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay({columns:e,sourceColumnId:n}));GH.WorkDragAndDrop.dropzoneOverlay=a;var t=r.closest(".ghx-swimlane");t.addClass("ghx-drag-in-progress"),t.append(a),GH.WorkDragAndDrop.positionDropZoneOverlay(),AJS.$("#ghx-pool").bind("scroll.overlayResizer",GH.WorkDragAndDrop.positionDropZoneOverlay)},GH.WorkDragAndDrop.positionDropZoneOverlay=function(){var r=AJS.$(".ghx-zone-overlay"),o=r.prev(".ghx-columns"),e=AJS.$("#ghx-pool"),n=e.scrollTop(),a=o.position().top,t=a+n,i=e.children(".ghx-swimlane").first().children(".ghx-columns").position(),s=i.top+n,d=a-s;d<0&&(t-=d);var g=o.height(),l=g,p=AJS.$(window).height(),D=p-e.offset().top-t+n;l>D&&(l=D);var u=a+g+n,c=u-t;l>c&&(l=c);var k=l<1?"hidden":"";r.css({top:t,height:l,visibility:k})},GH.WorkDragAndDrop.initDropZones=function(r,e){var a=GH.WorkDragAndDrop.currentDragElement;if(a&&GH.WorkSelectionController.getIssueKey(a)==r&&GH.WorkDragAndDrop.dropzoneOverlay){var t=GH.GridDataController.getModel(),i=AJS.$(".ghx-column-headers"),s=GH.WorkDragAndDrop.dropzoneOverlay.find(".ghx-zone-table"),d=o.getValidTransitionsForIssue(r);s.each(function(r,e){var a=AJS.$(e),s=a.data("column-id"),g=t.getColumnById(s);if(g){var l=void 0,p=GH.WorkSelectionController.getSelectedIssueKeys();GH.WorkDragAndDrop.setupLoadingDropZoneForColumn(a),l=o.queryTransitionForColumn(p,g,d),l.done(function(r){if(!n.isEmpty(r)){var o=i.children(".ghx-column[data-id="+s+"]");a.addClass("ghx-target-option"),o.addClass("ghx-target-option"),GH.WorkDragAndDrop.setupDropZonesForColumn(a,o,r),GH.WorkDragAndDrop.forceDroppablesReload()}}).fail(function(){GH.WorkDragAndDrop.destroyDropZoneOverlay(),GH.WorkDragAndDrop.cleanTransitionClasses()})}})}},GH.WorkDragAndDrop.getTransitionsForColumn=function(r,o){for(var e=AJS.$.Deferred(),n=[],a=0;a<r.transitions.length;a++)for(var t=0;t<o.statusIds.length;t++)o.statusIds[t]==r.transitions[a].targetStatus&&n.push(r.transitions[a]);return e.resolve(n)},GH.WorkDragAndDrop.setupLoadingDropZoneForColumn=function(r){var o=AJS.$(GH.tpl.rapid.workdraganddrop.renderLoadingDropZone());r.append(o)},GH.WorkDragAndDrop.setupDropZonesForColumn=function(r,o,e){r.empty(),n.each(e,function(o){if(!o.isInvalid){var n=AJS.$(GH.tpl.rapid.workdraganddrop.renderDropZone({transition:o,singleTransition:1===e.length}));r.append(n)}});var a={accept:".js-issue, .ghx-parent-group",hoverClass:"ghx-target-hover",over:function(){r.addClass("ghx-target-hover"),o.addClass("ghx-target-hover")},out:function(){r.find(".ghx-drop-zone.ghx-target-hover").length<1&&(r.removeClass("ghx-target-hover"),o.removeClass("ghx-target-hover"))},tolerance:"pointer"};n.isUndefined(e[0].error)?a.drop=GH.WorkDragAndDrop.issueDropped:a.drop=function(){GH.WorkDragAndDrop.destroyDropZoneOverlay(),GH.WorkDragAndDrop.cleanTransitionClasses(),GH.Notification.showInfo(e[0].error)},r.children().agileDroppable(a)},GH.WorkDragAndDrop.destroyDropZoneOverlay=function(){GH.WorkDragAndDrop.dropzoneOverlay&&(GH.WorkDragAndDrop.dropzoneOverlay.remove(),GH.WorkDragAndDrop.dropzoneOverlay=null,AJS.$("#ghx-pool").unbind("scroll.overlayResizer"))},GH.WorkDragAndDrop.cleanTransitionClasses=function(){AJS.$(".ghx-column").removeClass("ghx-target-option").removeClass("ghx-target-hover"),AJS.$(".ghx-swimlane").removeClass("ghx-drag-in-progress")},GH.WorkDragAndDrop.forceDroppablesReload=function(){var r=AJS.$.ui.ddmanager,o=r.current;o&&(r.prepareOffsets(o,null),r.drag(o,null)),GH.WorkDragAndDrop.droppablesReady=!0},GH.WorkDragAndDrop.executeWorkflowTransition=function(r,o,e){GH.WorkDragAndDrop.transitionTargetStatus=e;var n=AJS.$("#atlassian-token").attr("content"),a=GH.Ajax.CONTEXT_PATH+"/secure/WorkflowUIDispatcher.jspa?id={0}&action="+o+"&atl_token="+n+"&returnUrl=",t='<a href="'+a+'" class="issueaction-workflow-transition" style="display:none"></a>',i=AJS.$(t);AJS.$("#gh").append(i),i.click(),i.remove()},GH.WorkDragAndDrop.transitionTargetStatus=void 0}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkDragAndDrop.soy' */
// This file was automatically generated from WorkDragAndDrop.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.workdraganddrop.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.workdraganddrop == 'undefined') { GH.tpl.rapid.workdraganddrop = {}; }


GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-zone-overlay"><div class="ghx-zone-overlay-table">';
  var columnList4 = opt_data.columns;
  var columnListLen4 = columnList4.length;
  for (var columnIndex4 = 0; columnIndex4 < columnListLen4; columnIndex4++) {
    var columnData4 = columnList4[columnIndex4];
    output += (columnData4.id == opt_data.sourceColumnId) ? '<div class="ghx-zone-overlay-column ghx-empty"></div>' : '<div class="ghx-zone-overlay-column ' + ((columnData4.maxBusted) ? 'ghx-busted-max' : '') + ' ' + ((columnData4.minBusted) ? 'ghx-busted-min' : '') + ' ' + ((columnData4.collapsed) ? 'ghx-collapsed-column' : '') + '"><div class="ghx-zone-table" data-column-id="' + soy.$$escapeHtml(columnData4.id) + '"></div></div>';
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay.soyTemplateName = 'GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay';
}


GH.tpl.rapid.workdraganddrop.renderDropZone = function(opt_data, opt_ignored) {
  return '' + ((opt_data.transition.error) ? '<div class="ghx-zone-row ghx-undroppable-column"><div class="ghx-undroppable-message"></div></div>' : '<div class="ghx-zone-row" ' + ((opt_data.transition.transitionId) ? 'target-transition-id="' + soy.$$escapeHtml(opt_data.transition.transitionId) + '"' : '') + ' target-transition-status="' + soy.$$escapeHtml(opt_data.transition.toStatusId) + '"><div class="ghx-zone-cell">' + ((! opt_data.singleTransition) ? '<h2>' + soy.$$escapeHtml(opt_data.transition.name) + '</h2>' : '') + '</div></div>');
};
if (goog.DEBUG) {
  GH.tpl.rapid.workdraganddrop.renderDropZone.soyTemplateName = 'GH.tpl.rapid.workdraganddrop.renderDropZone';
}


GH.tpl.rapid.workdraganddrop.renderLoadingDropZone = function(opt_data, opt_ignored) {
  return '<div class="ghx-zone-row"><div class="ghx-zone-cell ghx-loading-cell"><h2>' + soy.$$escapeHtml('Loading...') + '</h2></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.workdraganddrop.renderLoadingDropZone.soyTemplateName = 'GH.tpl.rapid.workdraganddrop.renderLoadingDropZone';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/RankController.js' */
!function(){GH.RankController={};var r=require("jira-agile/rapid/ui/plan/backlog-model");GH.RankController.rankIssues=function(r,e,a,n,i){i=i||{};var t,s={issueKeys:e,customFieldId:r};if(n)t="after",_.isNumber(n)?s.rankAfterRankable={type:"sprintmarker",id:n}:s.rankAfterKey=n;else if(t="before",_.isNumber(a))s.rankBeforeRankable={type:"sprintmarker",id:a};else{if(!a)return AJS.$.Deferred().resolve().promise();s.rankBeforeKey=a}var o=_.extend(i,{url:"/api/rank/"+t,data:s});return GH.Ajax.put(o).promise()},GH.RankController.rankEpics=function(r,e,a,n,i){if(!n&&!a)return AJS.$.Deferred().resolve().promise();var t={rankCustomFieldId:r};n?t.rankAfterEpic=n:t.rankBeforeEpic=a;var s=_.extend(i||{},{bareUrl:GH.Ajax.buildPublicRestUrl("epic/"+e+"/rank"),data:t});return GH.Ajax.put(s).promise()},GH.RankController.sprintRankIssues=function(e,a,n,i,t,s,o){s=s||{};var l={idOrKeys:a,customFieldId:e,rapidViewId:GH.RapidBoard.State.getRapidViewId(),calculateNewIssuesOrder:o};n&&n!==r.BACKLOG_ID?(l.sprintId=n,l.addToBacklog=!1):(l.sprintId=null,l.addToBacklog=!0),i&&(l.idOrKeyBefore=i),t&&(l.idOrKeyAfter=t);var d=_.extend(s,{url:"/sprint/rank",data:l});return GH.Ajax.put(d).promise()},GH.RankController.getErrorRankResultFromResponse=function(r){return r.isSuccess()&&_.find(r.success.rankableChanges,function(r){return r.errors&&r.errors.length>0})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkRanking.js' */
!function(){var e=require("jira-agile/rapid/events"),n=require("jira-agile/rapid/analytics-tracker");GH.WorkRanking=new e,GH.WorkRanking.events={RANK_CHANGE:Symbol("RANK_CHANGE")},GH.WorkRanking.analytics=new n("gh.rapidboard.rankissues"),GH.WorkRanking.sendToTop=function(e){if(GH.WorkController.isActive()){var n=GH.WorkSelectionController.getSelectedIssueKey();if(n&&GH.RankingModel.canUserRankIssue(n)){var r=GH.RankingModel.getFirstRankableIssueKeyInColumn(n);if(r){var o=GH.WorkSelectionController.getSelectedIssuesInOrder();GH.WorkRanking.analytics.trigger("sendToTop"+(e?e:""),o.length);var t=GH.RankingModel.getBestFitSelectionAfterRank(o),a=function(){GH.Notification.showSuccess("Issue has been re-ranked to the top of its column.")};GH.WorkRanking.rankIssues(o,null,r,a),t&&GH.WorkSelectionController.gotoIssue(t)}}}},GH.WorkRanking.sendToBottom=function(e){if(GH.WorkController.isActive()){var n=GH.WorkSelectionController.getSelectedIssueKey();if(n&&GH.RankingModel.canUserRankIssue(n)){var r=GH.RankingModel.getLastRankableIssueKeyInColumn(n);if(r){var o=GH.WorkSelectionController.getSelectedIssuesInOrder();GH.WorkRanking.analytics.trigger("sendToBottom"+(e?e:""),o.length);var t=GH.RankingModel.getBestFitSelectionAfterRank(o),a=function(){GH.Notification.showSuccess("Issue has been re-ranked to the bottom of its column.")};GH.WorkRanking.rankIssues(o,r,null,a),t&&GH.WorkSelectionController.gotoIssue(t)}}}},GH.WorkRanking.rankIssues=function(e,n,r,o){GH.WorkRanking.trigger("before:workRankIssue",{selectedIssueNo:e.length}),GH.RankingModel.reorderIssues(e,n,r),GH.SwimlaneView.rerenderCellOfIssue(r||n),GH.WorkRanking.trigger(GH.WorkRanking.events.RANK_CHANGE,e,n,r);var t={issueKeys:e,rankAfterKey:n,rankBeforeKey:r,customFieldId:GH.RankingModel.getRankCustomFieldId()},a=function(e){var n=GH.RankController.getErrorRankResultFromResponse(e);n?(GH.Notification.showWarning(n.errors[0]),GH.WorkController.reload().done(function(){GH.WorkRanking.trigger("after:workRankIssue")})):(e.success.rankableChanges.map(function(e){if(e.wasChanged){var n=GH.GridDataController.getModel().data.issues[e.issueKey];GH.RapidBoard.sendIssueUpdatedTrackEvent(n,[{name:"customfield_"+GH.RankingModel.getRankCustomFieldId()}])}}),_.isFunction(o)&&(o(e),GH.WorkRanking.trigger("after:workRankIssue")))},s=function(){GH.WorkController.reload().done(function(){GH.WorkRanking.trigger("after:workRankIssue")})};GH.Ajax.put({url:"/rank",data:t}).done(a).fail(s)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/WindowActivityNotifier.js' */
!function(i,t,n){function o(){n(this),this._bindFocusBlur()}o.prototype={_bindFocusBlur:function(){var n=this,o=!1,r=t.debounce(function(i){o||(i?n.trigger("focus"):n.trigger("blur"))},200),u=t.partial(r,!0),c=t.partial(r,!1);i(window).on({focus:u,blur:c,unload:function(){o=!0,n.trigger("unload")}})}},GH.WindowActivityNotifier=o,GH.windowActivityNotifier=new o}(AJS.$,_,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/DurationsTimer.js' */
!function(t,i){function s(s){i(this),this._durations=s.slice(),this._accumulatedDuration=0,s.length&&(t.on("focus",this.start,this).on("blur",this.pause,this).on("unload",this.pause,this),this.start())}s.prototype={start:function(){if(this._timeout)return this;var t=this._durations[0]-this._accumulatedDuration;if(t<0)return this._tick(),this;var i=this;return this._timeoutStart=new Date,this._timeout=setTimeout(function(){i._clearTimeout(),i._accumulatedDuration+=new Date-i._timeoutStart,i._tick()},t),this},pause:function(){return this._timeout&&(this._clearTimeout(),this._accumulatedDuration+=new Date-this._timeoutStart),this},destroy:function(){return this._clearTimeout(),t.off(this),this},_tick:function(){this.trigger("tick",this._durations[0]),this._durations.shift(),this._durations.length?this.start():this.destroy()},_clearTimeout:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}},GH.DurationsTimer=s}(GH.windowActivityNotifier,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ops/Poller.js' */
GH.Poller=function(t){function n(){a||(a=!0,_.each(r,e))}function o(){a&&(a=!1,_.each(r,c))}function e(t){null!=t.timeout&&(clearTimeout(t.timeout),t.timeout=null)}function i(t,n){if(t||null!=n.timeout){var o=_.partial(l,n),e=n.handler.call(n.context,t);return e&&e.done?void e.done(o):void o()}}function l(t){t.timeout=setTimeout(_.partial(i,!1,t),t.interval)}var u=3e4,r={},a=!1,c=_.partial(i,!0);return{init:function(){t.on("focus",o).on("blur",n).on("unload",n)},addPoller:function(t,n,o,e){"function"==typeof n&&(e=o,o=n,n=u),this.removePoller(t);var i={id:t,interval:n,handler:o,context:e};r[t]=i,a||l(i)},removePoller:function(t){var n=r[t];n&&(e(n),delete r[t])}}}(GH.windowActivityNotifier);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueActions.js' */
define("jira-agile/rapid/ui/plan/issue-actions",["require"],function(e){"use strict";var s,n,r,i=e("underscore"),a=e("jquery"),t=e("jira-agile/rapid/global-events"),o=e("jira-agile/rapid/analytics-tracker"),u=e("jira-agile/rapid/ui/plan/issue-move-controller");t.on("pre-initialization",function(){s=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),n=e("jira-agile/rapid/ui/plan/backlog-controller"),r=e("jira-agile/rapid/ui/plan/plan-drag-and-drop")});var l={};return l.Analytics={},l.Analytics.removeFromSprint=new o("gh.sprint.issue.remove"),l.removeIssuesFromSprint=function(e,s){i.isArray(s)||(s=[s]),GH.Ajax.get({url:"/sprint/rank/"+e+"/remove",data:{issues:s}},"removeIssuesFromActiveSprintsCheck").done(function(e){var s=u.confirmMove(e);s.done(l.removeIssuesFromCurrentSprints)})},l.removeIssuesFromCurrentSprints=function(e){var s=u.getAllIssueKeys(e);return GH.Ajax.put({url:"/sprint/rank/"+e.rapidViewId+"/remove",data:{rapidViewId:n.rapidViewData.id,idOrKeys:s}}).done(function(e){var s=e.success,n=u.getAllIssueKeys(s);l.showSprintRankSuccessMessage(s),a(GH).trigger("issuesRemovedFromSprint",{issueKeys:n}),l.Analytics.removeFromSprint.trigger("remove","removedIssuesCount",n.length)})},l.showSprintRankSuccessMessage=function(e){u.isOnlyRankOperation(e)||u.isRankBetweenFutureAndBacklog(e)||GH.Notification.showSuccess("Selection successfully moved.")},l._createIssueKeysLinkHtml=function(e){i.isArray(e)||(e=[e]);var s=i.map(e,function(e){return'<a href="'+GH.Ajax.CONTEXT_PATH+"/browse/"+e+'">'+AJS.escapeHTML(String(e))+"</a>"});return s.join(", ")},l.sendIssuesToBottomOfSprint=function(e,s){var n=i.last(s.getIssueList().getOrder());return r.rankIssues(e,s.getId(),n,null)},l.sendIssuesToSprint=function(e,s){return r.rankIssues(e,s.getId(),null,null)},l.sendIssuesToTopOfBacklog=function(e,s){var n=i.first(s.getIssueList().getOrder());r.rankIssues(e,s.getId(),null,n)},l.sendIssuesToBottomOfBacklog=function(e,s){var n=i.last(s.getIssueList().getOrder());r.rankIssues(e,s.getId(),n,null)},l.sendIssuesToBacklog=function(e){r.rankIssues(e,null,null,null)},l.flag=function(e,s,n,r){return i.isArray(e)||(e=[e]),GH.Ajax.post({url:"/xboard/issue/flag/flag.json",data:{issueKeys:e,flag:s,comment:n,commentVisibility:r}}).done(function(e){i.has(e.success,"errorMessages")&&GH.Notification.showWarnings(i.map(e.success.errorMessages,function(e){return{autoHideDelay:1e4,message:e,noAutoescape:!0}}),{showTitle:!0})})},l.viewInIssueNavigator=function(e){var s=GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(e.join(","));location.href=s},l.gotoLink=function(e){location.href=e},l.bulkChange=function(e){var s=GH.Ajax.CONTEXT_PATH+"/secure/GHBulkChange.jspa?issueKeys="+encodeURIComponent(e.join(","));location.href=s},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/dialog/FlagAndAddCommentDialog.soy' */
// This file was automatically generated from FlagAndAddCommentDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialog.flagandcomment.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialog == 'undefined') { GH.tpl.dialog = {}; }
if (typeof GH.tpl.dialog.flagandcomment == 'undefined') { GH.tpl.dialog.flagandcomment = {}; }


GH.tpl.dialog.flagandcomment.dialogHeader = function(opt_data, opt_ignored) {
  return '<div class="flag-and-add-comment-header"><div class="flag-and-add-comment-summary"><span class="ghx-flag-icon"/>' + ((opt_data.isAdd) ? soy.$$escapeHtml(AJS.format('Add flag to {0}',opt_data.issueKeys)) : soy.$$escapeHtml(AJS.format('Remove flag from {0}',opt_data.issueKeys))) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialog.flagandcomment.dialogHeader.soyTemplateName = 'GH.tpl.dialog.flagandcomment.dialogHeader';
}


GH.tpl.dialog.flagandcomment.comment = function(opt_data, opt_ignored) {
  return ((opt_data.isAdd) ? '(flag) ' + soy.$$escapeHtml('Flag added') : '(flagoff) ' + soy.$$escapeHtml('Flag removed')) + '\n\n' + soy.$$escapeHtml(opt_data.content);
};
if (goog.DEBUG) {
  GH.tpl.dialog.flagandcomment.comment.soyTemplateName = 'GH.tpl.dialog.flagandcomment.comment';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/IssueFlagAndCommentAction.js' */
define("jira-agile/rapid/ui/plan/issue-flag-and-comment-action",["jira/dialog/form-dialog","jira/dialog/dialog-util","jquery","underscore"],function(e,n,a,t){function i(e,n,t){return function(i){i.preventDefault();var o=this,d=a("#flag-and-add-comment-dialog").find(".jira-dialog-content form .comment-input"),l=d.find("textarea").val().trim(),r=l?GH.tpl.dialog.flagandcomment.comment({isAdd:n,content:l}):"",u=d.find(".security-level select option:selected").val(),s=u?u:"";GH.IssueActions.flag(e,n,r,s).always(function(){o.hide()}).done(t)}}function o(e,n){return n?AJS.format("Add flag and comment: {0} {0,choice,1#issue|1\u003cissues}",e.length):AJS.format("Remove flag and add comment: {0} {0,choice,1#issue|1\u003cissues}",e.length)}function d(e,n){return function(){var t=a("#flag-and-add-comment-dialog");t.find(".jira-dialog-heading > h2").html(o(e,n)).removeAttr("title");var i=t.find(".jira-dialog-content");i.prepend(GH.tpl.dialog.flagandcomment.dialogHeader({isAdd:n,issueKeys:e.join(", ")}));var d=i.find("form");d.addClass("ajs-dirty-warning-exempt");var l=t.find(".form-footer");l.find("p").remove(),l.find('.aui-button[type="submit"]').addClass("aui-button-primary")}}function l(a,t,o){var l=new e({id:"flag-and-add-comment-dialog",url:AJS.contextPath()+"/secure/GHBulkCommentDialog.jspa?issueKeys="+encodeURIComponent(a.join(",")),submitHandler:i(a,t,o),handleRedirect:!0,ajaxOptions:n.getDefaultAjaxOptions,isIssueDialog:!0,widthClass:"large"});return l.onContentReady(d(a,t)),l}var r={};return r.execute=function(e,n,a){t.isArray(e)||(e=[e]),l(e,n,a).show()},r}),AJS.namespace("GH.IssueFlagAndCommentAction.execute",null,require("jira-agile/rapid/ui/plan/issue-flag-and-comment-action").execute);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ContextMenu.js' */
!function(){"use strict";var t=require("jira/ajs/dropdown/dropdown");GH.ContextMenu=function(t){this.actionGroups=t.actionGroups,this.dropdown=null},GH.ContextMenu.menuSelector="#gh-ctx-menu",GH.ContextMenu.contentSelector="#gh-ctx-menu-content",GH.ContextMenu.triggerSelector="#gh-ctx-menu-trigger",GH.ContextMenu.prototype._executeContextAction=function(t){var e=this._findActionById(t);e.actionFn()},GH.ContextMenu.prototype._findActionById=function(t){var e=[];return _.each(this.actionGroups,function(t){e=e.concat(t.actions)}),_.find(e,function(e){return e.id===t})},GH.ContextMenu.prototype.showAt=function(t){if(!_.isUndefined(t)&&!_.isNull(t)){this._initDropdown();var e=t.pageX,n=t.pageY,o=AJS.$(GH.ContextMenu.contentSelector),r=o.height();GH.Util.UI.isVisibleY(n+r)||(n-=r),this._positionDropdownAt(e,n),this.dropdown.show()}},GH.ContextMenu.prototype._positionDropdownAt=function(t,e){AJS.$(GH.ContextMenu.triggerSelector).offset({left:t,top:e})},GH.ContextMenu.prototype._initDropdown=function(){AJS.$(GH.ContextMenu.menuSelector).remove();var e=GH.tpl.contextmenu.renderContextMenu({ctxActionGroups:this.actionGroups});AJS.$("#gh").append(e);var n=this,o=AJS.$(GH.ContextMenu.contentSelector);o.click(function(t){var e=AJS.$(t.target).closest(".js-context-menu-action"),o=e.attr("data-ctx-action");_.isUndefined(o)||o===!1||(n._executeContextAction(o),t.preventDefault())});var r={content:o,trigger:AJS.$(GH.ContextMenu.triggerSelector),alignment:AJS.LEFT};this.dropdown=t.create(r)[0];var i=this.dropdown.layerController._validateClickToClose,c=function(t){return 2!==t.button&&(!i||i.apply(this,arguments))};this.dropdown.layerController._validateClickToClose=c},GH.ContextMenu.prototype.hide=function(){this.dropdown&&this.dropdown.hide(),AJS.$(GH.ContextMenu.menuSelector).remove(),AJS.$(GH.ContextMenu.contentSelector).remove(),AJS.$(GH.ContextMenu.triggerSelector).remove(),AJS.$(GH.ContextMenu.triggerSelector+"_drop").remove()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/component/ContextMenu.soy' */
// This file was automatically generated from ContextMenu.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.contextmenu.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.contextmenu == 'undefined') { GH.tpl.contextmenu = {}; }


GH.tpl.contextmenu.renderContextMenu = function(opt_data, opt_ignored) {
  var output = '<div id="gh-ctx-menu" class="aui-dd-parent"><div id="gh-ctx-menu-trigger" class="aui-dd-trigger" style="width:1px; height:1px; position:absolute;"></div><div id="gh-ctx-menu-content" class="aui-list">';
  var ctxActionGroupList4 = opt_data.ctxActionGroups;
  var ctxActionGroupListLen4 = ctxActionGroupList4.length;
  for (var ctxActionGroupIndex4 = 0; ctxActionGroupIndex4 < ctxActionGroupListLen4; ctxActionGroupIndex4++) {
    var ctxActionGroupData4 = ctxActionGroupList4[ctxActionGroupIndex4];
    output += GH.tpl.contextmenu.renderContextActionGroup({ctxActionGroup: ctxActionGroupData4, isLast: ctxActionGroupIndex4 == ctxActionGroupListLen4 - 1});
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextMenu.soyTemplateName = 'GH.tpl.contextmenu.renderContextMenu';
}


GH.tpl.contextmenu.renderContextActionGroup = function(opt_data, opt_ignored) {
  var output = ((opt_data.ctxActionGroup.label) ? '<h5>' + soy.$$escapeHtml(opt_data.ctxActionGroup.label) + '</h5>' : '') + '<ul class="aui-list-section aui-first ' + ((opt_data.isLast) ? 'aui-last' : '') + '">';
  var ctxActionList21 = opt_data.ctxActionGroup.actions;
  var ctxActionListLen21 = ctxActionList21.length;
  for (var ctxActionIndex21 = 0; ctxActionIndex21 < ctxActionListLen21; ctxActionIndex21++) {
    var ctxActionData21 = ctxActionList21[ctxActionIndex21];
    output += GH.tpl.contextmenu.renderContextAction({ctxAction: ctxActionData21});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextActionGroup.soyTemplateName = 'GH.tpl.contextmenu.renderContextActionGroup';
}


GH.tpl.contextmenu.renderContextAction = function(opt_data, opt_ignored) {
  var output = '<li id="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '-container" class="aui-list-item"><a  data-ctx-action="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '" id="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '" class="aui-list-item-link js-context-menu-action" title="' + soy.$$escapeHtml(opt_data.ctxAction.label) + '"' + ((opt_data.ctxAction.href != null) ? 'href="' + soy.$$escapeHtml(opt_data.ctxAction.href) + '"' : 'href="#"') + '>' + soy.$$escapeHtml(opt_data.ctxAction.label);
  if (opt_data.ctxAction.shortcut) {
    output += '<span class="ghx-shortcut">';
    var keyList48 = opt_data.ctxAction.shortcut.keys;
    var keyListLen48 = keyList48.length;
    for (var keyIndex48 = 0; keyIndex48 < keyListLen48; keyIndex48++) {
      var keyData48 = keyList48[keyIndex48];
      output += (keyIndex48 == 0) ? soy.$$escapeHtml(keyData48) : '<span class="ghx-separator">' + soy.$$escapeHtml(opt_data.ctxAction.shortcut.separator) + '</span><span class="ghx-monospace">' + soy.$$escapeHtml(keyData48) + '</span>';
    }
    output += '</span>';
  }
  output += '</a></li>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextAction.soyTemplateName = 'GH.tpl.contextmenu.renderContextAction';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/plan/PlanContextMenuController.js' */
define("jira-agile/rapid/ui/plan/plan-context-menu-controller",["require"],function(e){"use strict";function t(e){return GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(e.join(","))}function n(e){var t=[];return i.each(e,function(e){var n=u.getIssueData(e);n&&t.push(n)}),{issues:t,epics:s.getEpicMap(),viewMode:p.PLAN,boardType:GH.RapidBoard.State.getBoardType()}}var s,a,i=e("underscore"),o=e("jquery"),l=e("jira-agile/rapid/global-events"),c=e("jira-agile/rapid/analytics-tracker"),u=e("jira-agile/rapid/ui/plan/backlog-model"),r=e("jira-agile/rapid/ui/plan/issue-actions"),g=e("jira-agile/rapid/ui/print/card-printing-controller"),d=e("jira-agile/rapid/ui/plan/contextmenu/split-issue-action"),p=e("jira-agile/rapid/const/PageMode"),h=e("jira-agile/rapid/ui/plan/plan-issue-list-view");l.on("pre-initialization",function(){s=e("jira-agile/rapid/ui/plan/backlog-controller"),a=e("jira-agile/rapid/ui/plan/backlog-selection-controller")});var I={};return I.ctxMenu=null,I.Analytics={},I.Analytics.show=new c("gh.issue.ctx.menu.show"),I.Analytics.action=new c("gh.issue.ctx.menu.action"),I.resolveContext=function(){var e=a.getSelectedIssuesInOrder(),t=u.findModelWithIssue(i.first(e));if(t){var n=u.getSprintModels(),s=u.getBacklogModel2(),o=u.hasBulkChangePermission,l=i.chain(t.getIssueList().getAllIssues()).pick(e).values().value(),c=e.some(u.isSubtask);return{containsSubtasks:c,singleIssue:1===e.length,selectedIssues:e,selectedIssuesData:l,sprintModels:n,backlogModel2:s,currentModel:t,flaggedIssuesCount:i.where(l,{flagged:!0}).length,hasBulkChangePermission:o}}},I.showContextMenuAt=function(e){if(I.hideContextMenu(),!(o(e.target).closest("a").length>0)){var t=I.resolveContext(),n={actionGroups:I.resolveActionsForContext(t)};I.ctxMenu=new GH.ContextMenu(n),I.ctxMenu.showAt(e),e.preventDefault(),o(GH.ContextMenu.menuSelector).focus(),I.Analytics.show.trigger(t.type,"selectedIssuesCount",t.selectedIssues.length)}},I.resolveActionsForContext=function(e){var s=GH.RapidBoard.State.isAgilityBoard(),o=[],l=[],c=[],p=e.selectedIssues.concat(a.getCollapsedSubTasksToSelection(e.selectedIssues));if(0===e.selectedIssues.length)return o;if(i.each(e.sprintModels,function(t){if(!(t.getId()===e.currentModel.getId()||GH.RapidBoard.State.isCollapsibleBacklogEnabled()&&t.isBacklog())){var n=t.isActiveSprint()?"send to active sprint":"send to future sprint";l.push({id:"ghx-issue-ctx-action-send-to-sprint-"+t.getSprintId(),name:n,label:t.getSprintData().name,actionFn:function(){var s=e.containsSubtasks?r.sendIssuesToSprint:r.sendIssuesToBottomOfSprint;s(p,t).done(function(){h.expandAllAfterTransition(p),I.Analytics.action.trigger(n,"selectedIssuesCount",p.length)})}})}}),e.containsSubtasks||!u.isRankable()){var x=!1;x=GH.RapidBoard.State.isCollapsibleBacklogEnabled()?e.currentModel.isBacklog():e.backlogModel2.getId()===e.currentModel.getId(),x||l.push({id:"ghx-issue-ctx-action-send-backlog",name:"send to backlog",label:"Backlog",actionFn:function(){r.sendIssuesToBacklog(p),h.expandAllAfterTransition(p),I.Analytics.action.trigger(this.name,"selectedIssuesCount",p.length)}})}else l.push({id:"ghx-issue-ctx-action-send-top-backlog",name:"send to top of backlog",label:"Top of Backlog",actionFn:function(){r.sendIssuesToTopOfBacklog(p,e.backlogModel2),h.expandAllAfterTransition(p),I.Analytics.action.trigger(this.name,"selectedIssuesCount",p.length)}}),l.push({id:"ghx-issue-ctx-action-send-bottom-backlog",name:"send to bottom of backlog",label:"Bottom of Backlog",actionFn:function(){r.sendIssuesToBottomOfBacklog(p,e.backlogModel2),h.expandAllAfterTransition(p),I.Analytics.action.trigger(this.name,"selectedIssuesCount",p.length)}});o.push({label:"Send to",actions:l});var f=t(e.selectedIssues),m={id:"ghx-issue-ctx-action-view-in-navigator",name:"view in navigator",label:"View in Issue Navigator",href:f,actionFn:function(){r.gotoLink(f),I.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}},b={id:"ghx-issue-ctx-action-bulk-change",name:"bulk change",label:"Bulk Change",actionFn:function(){r.bulkChange(e.selectedIssues),I.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}};if(e.singleIssue){var A={id:"ghx-issue-ctx-action-delete",name:"delete",label:"Delete",actionFn:function(){GH.IssueOperationShortcuts.deleteSelectedIssue(),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.delete"})}};c.push(A)}var k=void 0;if(k=e.flaggedIssuesCount!==e.selectedIssues.length?{id:"ghx-issue-ctx-action-flag-and-comment",name:"flag-and-comment",label:"Add flag",actionFn:function(){GH.IssueFlagAndCommentAction.execute(e.selectedIssues,!0,GH.BacklogController.loadData),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag",data:{selectedIssueCount:e.selectedIssues.length}})}}:{id:"ghx-issue-ctx-action-unflag-and-comment",name:"unflag-and-comment",label:"Remove flag",actionFn:function(){GH.IssueFlagAndCommentAction.execute(e.selectedIssues,!1,GH.BacklogController.loadData),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag",data:{selectedIssueCount:e.selectedIssues.length}})}},c.push(k),d.appendItem(e,c),e.singleIssue||s||c.push(m),!e.hasBulkChangePermission||e.singleIssue||s||c.push(b),e.selectedIssues.length>0&&!s){var v={id:"ghx-issue-ctx-action-print-cards",name:"print cards",label:AJS.format("Print selected {0,choice,1# card|1\u003c cards}",e.selectedIssues.length),actionFn:function(){g.printSelectedIssues(n(e.selectedIssues))}};c.push(v)}return c.length>0&&o.push({label:"Other actions",actions:c}),o},I.hideContextMenu=function(){null!=I.ctxMenu&&(I.ctxMenu.hide(),I.ctxMenu=null)},I});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/work/WorkContextMenuController.js' */
!function(){"use strict";var e=require("jira-agile/rapid/analytics-tracker"),t=require("jira-agile/rapid/const/PageMode");GH.WorkContextMenuController={},GH.WorkContextMenuController.ctxMenu=null,GH.WorkContextMenuController.Analytics={},GH.WorkContextMenuController.Analytics.show=new e("gh.issue.ctx.menu.show"),GH.WorkContextMenuController.Analytics.action=new e("gh.issue.ctx.menu.action"),GH.WorkContextMenuController.showContextMenuAt=function(e,t){if(GH.WorkContextMenuController.hideContextMenu(),!(AJS.$(e.target).closest("a").length>0)){var n=GH.WorkContextMenuController.resolveContext(t),o={actionGroups:GH.WorkContextMenuController.resolveActionsForContext(n)};GH.WorkContextMenuController.ctxMenu=new GH.ContextMenu(o),GH.WorkContextMenuController.ctxMenu.showAt(e),e.preventDefault(),AJS.$(GH.ContextMenu.menuSelector).focus(),GH.WorkContextMenuController.Analytics.show.trigger(n.type,"selectedIssuesCount",n.selectedIssues.length)}},GH.WorkContextMenuController.resolveContext=function(e){var t=GH.WorkSelectionController.getSelectedIssuesInOrder(),n=_.extend({selectedIssues:t},e);n.type=GH.WorkControls.getBoardType();var o=!1,s=GH.GridDataController.getModel().getIssueDataByKeys(t);return n.selectedIssuesData=s,n.flaggedIssuesCount=_.where(s,{flagged:!0}).length,_.every(s,function(e){return!e.parentId||(o=!0,!1)}),n.hasSubtasks=o,n.hasBulkChangePermission=GH.GridDataController.hasBulkChangePermission,n},GH.WorkContextMenuController.resolveActionsForContext=function(e){function n(e,t,n){return function(){if(t){var e=GH.GridDataController.getModel().getIssueDataByKeys(e);_.each(e,function(e){e.flagged=n,n?AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e.key+"']").addClass("ghx-flagged"):AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e.key+"']").removeClass("ghx-flagged")})}else GH.WorkController.reload()}}var o=[],s=[],r=AJS.$(".ghx-swimlane-header").length>1,a=GH.WorkContextMenuController.getSendToTopAction(e,r?"Top of Swimlane":"Top of Column"),l=GH.WorkContextMenuController.getSendToBottomAction(e,r?"Bottom of Swimlane":"Bottom of Column");if(o.push({label:"Send to",actions:[a,l]}),"scrum"===e.type&&!e.hasSubtasks&&!e.swimlane){var i={id:"ghx-issue-ctx-action-remove-from-sprint",name:"remove from sprint",label:"Remove from sprint",actionFn:function(){GH.IssueActions.removeIssuesFromSprint(GH.WorkController.rapidViewData.id,e.selectedIssues),GH.WorkContextMenuController.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}};s.push(i)}if(1===e.selectedIssues.length){var u={id:"ghx-issue-ctx-action-delete",name:"delete",label:"Delete",actionFn:function(){GH.IssueOperationShortcuts.deleteSelectedIssue(),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.delete"})}};s.push(u)}var c=void 0;if(c=e.flaggedIssuesCount!==e.selectedIssues.length?{id:"ghx-issue-ctx-action-flag-and-comment",name:"flag-and-comment",label:"Add flag",actionFn:function(){GH.IssueFlagAndCommentAction.execute(e.selectedIssues,!0,n(e.selectedIssues,e.swimlane,!0)),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag",data:{selectedIssueCount:e.selectedIssues.length}})}}:{id:"ghx-issue-ctx-action-unflag-and-comment",name:"unflag-and-comment",label:"Remove flag",actionFn:function(){GH.IssueFlagAndCommentAction.execute(e.selectedIssues,!1,n(e.selectedIssues,e.swimlane,!1)),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag",data:{selectedIssueCount:e.selectedIssues.length}})}},s.push(c),!e.swimlane){var g={id:"ghx-issue-ctx-action-view-in-navigator",name:"view in navigator",label:"View in Issue Navigator",actionFn:function(){GH.IssueActions.viewInIssueNavigator(e.selectedIssues),GH.WorkContextMenuController.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}};e.selectedIssues.length>1&&s.push(g);var d={id:"ghx-issue-ctx-action-bulk-change",name:"bulk change",label:"Bulk Change",actionFn:function(){GH.IssueActions.bulkChange(e.selectedIssues),GH.WorkContextMenuController.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}};e.hasBulkChangePermission&&e.selectedIssues.length>1&&s.push(d)}var x=function(e){var n=_.map(e,function(e){return GH.GridDataController.getModel().getIssues()[e]});return{issues:n,viewMode:t.WORK,boardType:GH.WorkControls.getBoardType()}};if(e.selectedIssues.length>0){var h={id:"ghx-issue-ctx-action-print-cards",name:"print cards",label:AJS.format("Print selected {0,choice,1# card|1\u003c cards}",e.selectedIssues.length),actionFn:function(){var t=require("jira-agile/rapid/ui/print/card-printing-controller");t.printSelectedIssues(x(e.selectedIssues))}};s.push(h)}return s.length>0&&o.push({label:"Other actions",actions:s}),o},GH.WorkContextMenuController.getSendToTopAction=function(e,t){return{id:"ghx-issue-ctx-action-send-top",name:"send to top of swimlane",label:t,actionFn:function(){GH.WorkRanking.sendToTop("WorkContextMenu")}}},GH.WorkContextMenuController.getSendToBottomAction=function(e,t){return{id:"ghx-issue-ctx-action-send-bottom",name:"send to bottom of swimlane",label:t,actionFn:function(){GH.WorkRanking.sendToBottom("WorkContextMenu")}}},GH.WorkContextMenuController.hideContextMenu=function(){null!=GH.WorkContextMenuController.ctxMenu&&(GH.WorkContextMenuController.ctxMenu.hide(),GH.WorkContextMenuController.ctxMenu=null)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/state/RapidBoardState.js' */
!function(){"use strict";var a=require("jira-agile/rapid/const/PageMode"),t=require("jira-agile/rapid/ui/SPConfig"),e=require("jira/featureflags/feature-manager"),d=require("jira/featureflags/simplified-ux-feature-manager"),i=(require("jira-agile/features/feature-flags"),require("jira-agile/rapid/ajax")),r=require("wrm/data"),o="ISSUE_BOARD_EXPANDED_LIST_KEY",n="newIssueViewEnabled",s="activeQuickFilters",p="planQuickFilters",u="workSprintFilters";GH.RapidBoard.State={},GH.RapidBoard.State.data={};var S=!0;GH.RapidBoard.State._storedMode=null,GH.RapidBoard.State._storedBoardSettings=null,GH.RapidBoard.State.setDataValue=function(a,t){_.isUndefined(t)||_.isNull(t)?delete GH.RapidBoard.State.data[a]:GH.RapidBoard.State.data[a]=t},GH.RapidBoard.State.getDataValue=function(a){return GH.RapidBoard.State.data[a]},GH.RapidBoard.State.getMode=function(){return GH.RapidBoard.State.getDataValue("mode")||a.WORK},GH.RapidBoard.State.getStoredMode=function(){if(!GH.RapidBoard.State._storedMode){var t=r.claim("stored-mode");GH.RapidBoard.State._storedMode=t?t.mode:a.WORK}return GH.RapidBoard.State._storedMode},GH.RapidBoard.State.isPlanMode=function(){return GH.RapidBoard.State.getMode()===a.PLAN},GH.RapidBoard.State.isWorkMode=function(){return GH.RapidBoard.State.getMode()===a.WORK},GH.RapidBoard.State.setMode=function(a){GH.RapidBoard.State.setDataValue("mode",a),GH.storage.put("gh.mode",a),GH.RapidBoard.State._storedMode!==a&&GH.RapidBoard.State._submitUpdateStoreMode(a)},GH.RapidBoard.State._submitUpdateStoreMode=function(a){i.put({url:"/userData/storeMode?mode="+a}),GH.RapidBoard.State._storedMode=a},GH.RapidBoard.State.getLastCardPrintingSize=function(){return GH.storage.get("gh.card.printing.size")||"small"},GH.RapidBoard.State.setLastCardPrintingSize=function(a){GH.storage.put("gh.card.printing.size",a)},GH.RapidBoard.State.isNewIssueViewEnabled=function(){return"true"===AJS.$('meta[name="ghx-user-bento-enabled"]').attr("content")},GH.RapidBoard.State.setNewIssueViewEnabled=function(a){GH.RapidBoard.State.setDataValue(n,a)},GH.RapidBoard.State.getProjectKey=function(){return GH.RapidBoard.State.getDataValue("projectKey")||void 0},GH.RapidBoard.State.setProjectKey=function(a){GH.RapidBoard.State.setDataValue("projectKey",a)};var l=function(a){return{key:a,set:function(t){return GH.RapidBoard.State.setDataValue(a,t)},get:function(){var t=GH.RapidBoard.State.getDataValue(a);return void 0===t||null===t?void 0:t},reset:function(){return GH.RapidBoard.State.setDataValue(a,null)}}};GH.RapidBoard.State.numberOfIssues=new l("numberOfIssues"),GH.RapidBoard.State.numberOfVersions=new l("numberOfVersions"),GH.RapidBoard.State.numberOfEpics=new l("numberOfEpics"),GH.RapidBoard.State.numberOfProjects=new l("numberOfProjects"),GH.RapidBoard.State.numberOfCustomFields=new l("numberOfCustomFields"),GH.RapidBoard.State.numberOfSubtasks=new l("numberOfSubtasks"),GH.RapidBoard.State.isDetailsViewOpened=function(){return GH.RapidBoard.State.getDataValue("detailViewWork")||!1},GH.RapidBoard.State.isIssueModalOpened=function(){return GH.RapidBoard.State.getDataValue("issueModalWork")||!1},GH.RapidBoard.State.isDetailsViewPlanOpened=function(){return GH.RapidBoard.State.getBoardSetting(null,"detailViewPlan",!0)||!1},GH.RapidBoard.State.getStoredDetailViewOpened=function(){return GH.storage.get("gh.detailViewWork")||!1},GH.RapidBoard.State.setWorkViewDetailsViewOpened=function(a){GH.RapidBoard.State.setDataValue("detailViewWork",a||!1),GH.storage.put("gh.detailViewWork",a||!1)},GH.RapidBoard.State.setWorkIssueModalOpened=function(a){GH.RapidBoard.State.setDataValue("issueModalWork",a||!1)},GH.RapidBoard.State.setPlanViewDetailsViewOpened=function(a){GH.RapidBoard.State.setBoardSetting("detailViewPlan",a||!1)},GH.RapidBoard.State.setEpicShownOnRapidBoard=function(a){GH.storage.put("gh.epicShownOnRapidBoard."+GH.RapidBoard.State.getRapidViewId(),a)},GH.RapidBoard.State.getEpicShownOnRapidBoard=function(){var a=GH.storage.get("gh.epicShownOnRapidBoard."+GH.RapidBoard.State.getRapidViewId());return!!_.isNull(a)||a},GH.RapidBoard.State.setNonWorkingDaysShown=function(a,t){GH.storage.put("gh.nonWorkingDaysShown."+a,t)},GH.RapidBoard.State.getNonWorkingDaysShown=function(a){var t=GH.storage.get("gh.nonWorkingDaysShown."+a);return!!_.isNull(t)||t},GH.RapidBoard.State.setQuickFiltersExpanded=function(a){GH.storage.put("gh.quickFiltersExpanded",a)},GH.RapidBoard.State.getQuickFiltersExpanded=function(){var a=GH.storage.get("gh.quickFiltersExpanded");return!_.isNull(a)&&a},GH.RapidBoard.State.setDetailViewWidth=function(a){GH.storage.put("gh.detailViewWidth",a)},GH.RapidBoard.State.getDetailViewWidth=function(){var a=GH.storage.get("gh.detailViewWidth");return _.isNull(a)?0:a},GH.RapidBoard.State.getCycleTimeCalculationType=function(){var a=GH.RapidBoard.State.getDataValue("cycleTimeCalculationType");return _.isUndefined(a)&&(a=GH.storage.get("gh.cycleTimeCalculationType"),_.isNull(a))?(GH.RapidBoard.State.setCycleTimeCalculationType(GH.ControlChart.CYCLE_TIME_CALCULATION_TOTAL),GH.ControlChart.CYCLE_TIME_CALCULATION_TOTAL):a},GH.RapidBoard.State.setCycleTimeCalculationType=function(a){GH.RapidBoard.State.setDataValue("cycleTimeCalculationType",a),GH.storage.put("gh.cycleTimeCalculationType",a)},GH.RapidBoard.State.getStoredChartIntroState=function(){return GH.storage.get("gh.charts.intro")!==!1},GH.RapidBoard.State.setChartIntroState=function(a){GH.storage.put("gh.charts.intro",a)},GH.RapidBoard.State.isChartViewOpened=function(){return GH.RapidBoard.State.getMode()===a.REPORT},GH.RapidBoard.State.getRapidViewId=function(){var a=GH.RapidBoard.State.getDataValue("rapidViewId");return _.isUndefined(a)&&(a=GH.RapidBoard.State.getMostRecentRapidViewId()),a},GH.RapidBoard.State.getRapidViewIdWithInfo=function(){var a={};return a.viewId=GH.RapidBoard.State.getDataValue("rapidViewId"),a.fromLocalStorage=!1,_.isUndefined(a.viewId)&&(a.viewId=GH.RapidBoard.State.getMostRecentRapidViewId(),a.fromLocalStorage=!0),a},GH.RapidBoard.State.getMostRecentRapidViewId=function(){return GH.storage.get("gh.latestRapidViewId")},GH.RapidBoard.State.setRapidViewId=function(a){GH.RapidBoard.State.setDataValue("rapidViewId",a),GH.storage.put("gh.latestRapidViewId",a)},GH.RapidBoard.State.getSelectedIssueKey=function(){return GH.RapidBoard.State.getDataValue("selectedIssueKey")||null},GH.RapidBoard.State.getStoredSelectedIssueKey=function(){return GH.storage.get("gh.selectedIssueKey")||null},GH.RapidBoard.State.setSelectedIssueKey=function(a){GH.RapidBoard.State.setDataValue("selectedIssueKey",a),GH.storage.put("gh.selectedIssueKey",a)};var B=function(){return GH.RapidBoard.State.isAgilityBoard()?null:GH.RapidBoard.State.getDataValue("selectedConfigTab")||null};GH.RapidBoard.State.isConfigOpen=function(){return Boolean(B())},GH.RapidBoard.State.getSelectedConfigTab=B;var g=function(){return GH.storage.get("selectedConfigTab")||t.INITIAL_TAB};GH.RapidBoard.State.getStoredSelectedConfigTab=g,GH.RapidBoard.State.setStoredSelectedConfigTab=function(a){GH.storage.put("selectedConfigTab",a)};var G=function(a){return GH.RapidBoard.State.setDataValue("selectedConfigTab",a)};GH.RapidBoard.State.openConfig=function(){return G(g())},GH.RapidBoard.State.setSelectedConfigTab=G,GH.RapidBoard.State.closeConfig=function(){return G(null)},GH.RapidBoard.State.setChartType=function(a){var t=GH.RapidBoard.State.getBoardSettings();_.isUndefined(a)||_.isNull(a)?delete t.chartType:t.chartType=a,GH.RapidBoard.State.setBoardSettings(t)},GH.RapidBoard.State.getChartType=function(){return d.isAdg3ModeOn()?GH.RapidBoard.UrlState.getNormalizedUrlState().chart||GH.RapidBoard.State.getBoardSettings().chartType||"":GH.RapidBoard.State.getBoardSettings().chartType||""},GH.RapidBoard.State.getRetrospectiveSprintId=function(){return GH.RapidBoard.State.getBoardSettings().retrospectiveSprintId||!1},GH.RapidBoard.State.setRetrospectiveSprintId=function(a){return GH.RapidBoard.State.setBoardSetting("retrospectiveSprintId",a)},GH.RapidBoard.State.addIssueKeyToExpanded=function(a){var t=GH.RapidBoard.State.getBoardSetting(null,o)||[];return t.includes(a)||t.push(a),GH.RapidBoard.State.setBoardSetting(o,t)},GH.RapidBoard.State.removeIssueKeyFromExpanded=function(a){var t=GH.RapidBoard.State.getBoardSetting(null,o)||[];return t.includes(a)&&t.splice(t.indexOf(a),1),GH.RapidBoard.State.setBoardSetting(o,t)},GH.RapidBoard.State.getExpandedIssueKeys=function(){return GH.RapidBoard.State.getBoardSetting(null,o)||[]},GH.RapidBoard.State.setTimeFrame=function(a){var t=GH.RapidBoard.State.getBoardSettings();_.isUndefined(a)||_.isNull(a)?delete t.timeFrame:t.timeFrame=a,GH.RapidBoard.State.setBoardSettings(t)},GH.RapidBoard.State.getTimeFrame=function(){var a=GH.RapidBoard.State.getBoardSettings().timeFrame;return _.isUndefined(a)||_.isNull(a)?7:a},GH.RapidBoard.State.getBoardSettings=function(a){(_.isUndefined(a)||_.isNull(a))&&(a=GH.RapidBoard.State.getRapidViewId());var t=a||"00000";return GH.RapidBoard.State.getDataValue("boardSettings."+t)||H(t)};var H=function(a){var t=GH.storage.get("gh.boardSettings."+a);return t=t?t:{},t||(t={},GH.RapidBoard.State.setDataValue("boardSettings."+a,t)),GH.RapidBoard.State._storedBoardSettings||(GH.RapidBoard.State._storedBoardSettings=r.claim("stored-board-settings"),GH.RapidBoard.State._storedBoardSettings=GH.RapidBoard.State._storedBoardSettings?GH.RapidBoard.State._storedBoardSettings:{}),_.extend(t,R(GH.RapidBoard.State._storedBoardSettings))};GH.RapidBoard.State.setBoardSettings=function(a,t){var e=GH.RapidBoard.State.getRapidViewId();if(e&&(GH.RapidBoard.State.setDataValue("boardSettings."+e,a),GH.storage.put("gh.boardSettings."+e,a),t)){var d={activeQuickFilters:a[s],workSprintFilters:a[u],planQuickFilters:a[p]};_.isEqual(d,GH.RapidBoard.State._storedBoardSettings)||GH.RapidBoard.State._submitBoardSettingsRequest(d)}},GH.RapidBoard.State._submitBoardSettingsRequest=function(a){i.put({url:"/userData/boardSettings?rapidViewId="+GH.RapidBoard.State.getRapidViewId(),data:a}),GH.RapidBoard.State._storedBoardSettings=R(a)};var R=function(a){return JSON.parse(JSON.stringify(a))};GH.RapidBoard.State.isSwimlaneCollapsed=function(a){var t=GH.RapidBoard.State.getBoardSettings().collapsedSwimlanes||[];return t.indexOf(a)>-1},GH.RapidBoard.State.setSwimlaneCollapsed=function(a,t){var e=GH.RapidBoard.State.getBoardSettings(),d=e.collapsedSwimlanes||[];if(t)d.indexOf(a)<0&&(d.push(a),e.collapsedSwimlanes=d);else{var i=d.indexOf(a);if(i<0)return;d.splice(i,1),d.length>0?e.collapsedSwimlanes=d:delete e.collapsedSwimlanes}GH.RapidBoard.State.setBoardSettings(e)},GH.RapidBoard.State.getBoardSetting=function(a,t,e){var d=GH.RapidBoard.State.getBoardSettings(a)[t];return void 0!==d?d:e},GH.RapidBoard.State.setBoardSetting=function(a,t){var e=GH.RapidBoard.State.getBoardSettings();void 0!==t?e[a]=t:delete e[a];var d=[s,p,u].includes(a);GH.RapidBoard.State.setBoardSettings(e,d)},GH.RapidBoard.State.getNumberArrayBoardSetting=function(a,t,e){var d=GH.RapidBoard.State.getBoardSettings(a)[t]||e;return _.isArray(d)?d:[]},GH.RapidBoard.State.setNumberArrayBoardSetting=function(a,t){var e=GH.RapidBoard.State.getBoardSettings();if(void 0!==t){if(!_.isArray(t))return;e[a]=t}else delete e[a];GH.RapidBoard.State.setBoardSettings(e)},GH.BoardState={},GH.BoardState.setGlobalValue=function(a,t){GH.RapidBoard.State.setDataValue(a,t),GH.storage.put("gh."+a,t)},GH.BoardState.getGlobalValue=function(a,t){return GH.RapidBoard.State.getDataValue(a)||GH.storage.get("gh."+a)||t},GH.BoardState.setPerViewValue=function(a,t){GH.RapidBoard.State.setBoardSetting(a,t)},GH.BoardState.getPerViewValue=function(a,t){return GH.RapidBoard.State.getBoardSetting(null,a,t)},GH.RapidBoard.State.pushState=function(){GH.RapidBoard.UrlState.pushState()},GH.RapidBoard.State.replaceState=function(){GH.RapidBoard.UrlState.replaceState()},GH.RapidBoard.State.initializeState=function(){GH.RapidBoard.State.setSelectedIssueKey(GH.RapidBoard.State.getStoredSelectedIssueKey()),GH.RapidBoard.State.setWorkViewDetailsViewOpened(GH.RapidBoard.State.getStoredDetailViewOpened());var t=GH.RapidBoard.State.getStoredMode();t!==a.PLAN||GH.RapidBoard.State.isPlanModeAvailable()||(t=a.WORK),GH.RapidBoard.State.setMode(t),GH.RapidBoard.State.setChartIntroState(GH.RapidBoard.State.getStoredChartIntroState()),GH.RapidBoard.UrlState.setHandlers([GH.RapidBoardUrlState,GH.PlanUrlState,GH.WorkUrlState,GH.ReportUrlState]),GH.RapidBoard.UrlState.hasUrlState()&&GH.RapidBoard.UrlState.loadState();var e=GH.RapidBoard.State.isLoadingKanPlanWhileItDisabled();GH.RapidBoard.UrlState.replaceState(e),GH.RapidBoard.UrlState.init()},GH.RapidBoard.State.isPlanModeAvailable=function(){var a=require("jira-agile/rapid/ui/kanplan/kan-plan-feature-service");return!GH.RapidBoard.State.shouldUseReactifiedBacklog()&&(GH.RapidBoard.State.isScrumBoard()||a.shouldShowKanbanBacklog()||GH.RapidBoard.State.isIssueListBacklog())},GH.RapidBoard.State.isLoadingKanPlanWhileItDisabled=function(a){var t=GH.RapidBoard.UrlState.getCurrentUrlState();return a=a?a:GH.RapidBoard.UrlState.normalizeStringParam(t.view,""),!!_.isString(a)&&(a.indexOf("planning")>-1&&!GH.RapidBoard.State.isPlanModeAvailable())},GH.RapidBoard.State.isScrumBoard=function(){return GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.sprintSupportEnabled},GH.RapidBoard.State.isIssueListBacklog=function(){return GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.isIssueListBacklog},GH.RapidBoard.State.isKanbanBoard=function(){return GH.RapidViewConfig.currentData.data&&!GH.RapidViewConfig.currentData.data.sprintSupportEnabled},GH.RapidBoard.State.isAgilityBoard=function(){return GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.isSimpleBoard},GH.RapidBoard.State.isAgilityReportsEnabled=function(){return d.isAdg3ModeOn()&&GH.RapidBoard.State.isAgilityBoard()&&GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.isReportsEnabled},GH.RapidBoard.State.shouldUseReactifiedBacklog=function(){return GH.RapidBoard.State.isIssueListBacklog()&&e.isFeatureEnabled("jsw.agility.reactified.backlog",!1)},GH.RapidBoard.State.getBoardType=function(){return GH.RapidBoard.State.isAgilityBoard()?"simple":GH.RapidBoard.State.isScrumBoard()?"scrum":GH.RapidBoard.State.isKanbanBoard()?"kanban":void 0},GH.RapidBoard.State.getBoardTypeForAnalytics=function(){return GH.RapidBoard.State.isAgilityBoard()?"Agility":GH.RapidBoard.State.isScrumBoard()?"Scrum":GH.RapidBoard.State.isKanbanBoard()?"Kanban":void 0},GH.RapidBoard.State.showEpicAsPanel=function(){return!!_.isUndefined(GH.RapidViewConfig.currentData.data.showEpicAsPanel)||GH.RapidViewConfig.currentData.data.showEpicAsPanel},GH.RapidBoard.State.changeFirstLoadState=function(){S=!1},GH.RapidBoard.State.isFirstLoad=function(){return S},GH.RapidBoard.State.isWorkRenderImprovementEnabled=function(){return e.isFeatureEnabled("jsw.work.render.improvement")},GH.RapidBoard.State.isBacklogRenderingImprovementEnabled=function(){return e.isFeatureEnabled("jsw.backlog.render.performance.improvement")},GH.RapidBoard.State.isCollapsibleBacklogEnabled=function(){return e.isFeatureEnabled("jsw.collapsible.backlog")}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/card-printing.soy' */
// This file was automatically generated from card-printing.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.print.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.print == 'undefined') { GH.tpl.rapid.print = {}; }


GH.tpl.rapid.print.printCardScreen = function(opt_data, opt_ignored) {
  var output = '';
  var hasIssue__soy3 = opt_data.issues && opt_data.issues.length > 0;
  output += '<div id="ghx-print-toolbar">' + ((hasIssue__soy3) ? '<div class="ghx-print-toolbar-left ghx-print-toolbar-item"><span class="ghx-print-toolbar-label">' + soy.$$escapeHtml('Card size') + '</span><span class="ghx-print-card-size-trigger"> </span><span class="ghx-print-card-size-options"> </span><span class="ghx-print-filter-label ghx-print-toolbar-label">' + soy.$$escapeHtml('Select') + '</span><span class="ghx-print-filter-trigger"> </span><span class="ghx-print-filter-options"> </span></div><div class="ghx-print-toolbar-right ghx-print-toolbar-item"><span id="ghx-print-toolbar-issue-count" ' + ((opt_data.warnIssueCount) ? 'class="warning"' : '') + '>' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|2#{0} issues}',opt_data.issues.length)) + '</span><button id="ghx-print-card-print-btn" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Print') + '</button></div>' : '') + '</div><div class="ghx-print-content-sizing ghx-print-' + soy.$$escapeHtml(opt_data.cardSize) + '">' + GH.tpl.rapid.print.printCardPageContent(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardScreen.soyTemplateName = 'GH.tpl.rapid.print.printCardScreen';
}


GH.tpl.rapid.print.printCardPageContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issues && opt_data.issues.length > 0) ? GH.tpl.rapid.print.printCards(opt_data) : '<div class="aui-message aui-message-warning">' + soy.$$escapeHtml('There is no issue to print') + '</div>');
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardPageContent.soyTemplateName = 'GH.tpl.rapid.print.printCardPageContent';
}


GH.tpl.rapid.print.printCards = function(opt_data, opt_ignored) {
  var output = '';
  var issueList40 = opt_data.issues;
  var issueListLen40 = issueList40.length;
  for (var issueIndex40 = 0; issueIndex40 < issueListLen40; issueIndex40++) {
    var issueData40 = issueList40[issueIndex40];
    output += '<div class="ghx-card ' + ((issueData40.cardPrintingCategory) ? soy.$$escapeHtml(issueData40.cardPrintingCategory) : '') + '">' + GH.tpl.rapid.print.printOneCard({issue: issueData40, epics: opt_data.epics, showEpic: opt_data.showEpic}) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCards.soyTemplateName = 'GH.tpl.rapid.print.printCards';
}


GH.tpl.rapid.print.printOneCard = function(opt_data, opt_ignored) {
  return '<div class="ghx-card-content">' + GH.tpl.rapid.print.printCardHeaderRow(opt_data) + '<div class="ghx-card-summary">' + soy.$$escapeHtml(opt_data.issue.summary) + '<span class="ellipsis">&#133;</span><span class="obscurer"> </span></div>' + GH.tpl.rapid.print.printCardExtraFields(opt_data) + GH.tpl.rapid.print.printCardFooterRow(opt_data) + '</div><div class="ghx-card-color" ' + ((opt_data.issue.color != null) ? 'style="border-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"' : '') + '></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printOneCard.soyTemplateName = 'GH.tpl.rapid.print.printOneCard';
}


GH.tpl.rapid.print.printCardHeaderRow = function(opt_data, opt_ignored) {
  return '<div class="ghx-card-header">' + ((opt_data.issue.typeUrl) ? '<div class="ghx-card-icon"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '"></div>' : '') + ((opt_data.issue.flagged) ? '<div class="ghx-card-icon"><div class="aui-icon aui-icon-small aui-iconfont-flag"></div></div>' : (opt_data.issue.priorityUrl) ? '<div class="ghx-card-icon"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '"></div>' : '') + '<div class="ghx-card-key">' + soy.$$escapeHtml(opt_data.issue.key) + '</div><div class="ghx-row-end">' + GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, drawAvatarTextBorder: true}) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardHeaderRow.soyTemplateName = 'GH.tpl.rapid.print.printCardHeaderRow';
}


GH.tpl.rapid.print.printCardExtraFields = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issue.extraFields) {
    output += '<div class="ghx-card-extra-fields">';
    var extraFieldList97 = opt_data.issue.extraFields;
    var extraFieldListLen97 = extraFieldList97.length;
    for (var extraFieldIndex97 = 0; extraFieldIndex97 < extraFieldListLen97; extraFieldIndex97++) {
      var extraFieldData97 = extraFieldList97[extraFieldIndex97];
      output += '<div class="ghx-card-xfield-row"><div class="ghx-card-xfield-label">' + soy.$$escapeHtml(extraFieldData97.label) + '</div><div class="ghx-card-xfield-value">' + ((extraFieldData97.renderedContent) ? (extraFieldData97.useSoyNoAutoescape) ? soy.$$filterNoAutoescape(extraFieldData97.renderedContent) : soy.$$escapeHtml(extraFieldData97.renderedContent) : soy.$$escapeHtml('None')) + '</div></div>';
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardExtraFields.soyTemplateName = 'GH.tpl.rapid.print.printCardExtraFields';
}


GH.tpl.rapid.print.printCardFooterRow = function(opt_data, opt_ignored) {
  var output = '';
  var epic__soy115 = opt_data.epics && opt_data.issue.epic ? opt_data.epics[opt_data.issue.epic] : opt_data.issue.epicField;
  var hasVersion__soy116 = opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0;
  var hasEpic__soy117 = opt_data.showEpic && epic__soy115;
  var estimation__soy118 = opt_data.issue.estimateStatistic;
  var hasEstimate__soy119 = estimation__soy118 && estimation__soy118.statFieldId != 'issueCount' && estimation__soy118.statFieldValue && estimation__soy118.statFieldValue.text;
  output += '<div class="ghx-card-footer">';
  if (hasVersion__soy116) {
    var lozengeWidthClass__soy123 = hasEpic__soy117 && hasEstimate__soy119 ? 'ghx-card-lozenges-3' : hasEpic__soy117 || hasEstimate__soy119 ? 'ghx-card-lozenges-2' : '';
    output += '<span class="aui-label ghx-card-version ' + soy.$$escapeHtml(lozengeWidthClass__soy123) + '">' + ((opt_data.issue.fixVersionsUI.versions.length > 1) ? soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions.length) + ' ' + soy.$$escapeHtml('Versions') : soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions[0].name)) + '</span>';
  }
  if (hasEpic__soy117) {
    var lozengeWidthClass__soy137 = hasVersion__soy116 && hasEstimate__soy119 ? 'ghx-card-lozenges-3' : hasVersion__soy116 || hasEstimate__soy119 ? 'ghx-card-lozenges-2' : '';
    output += '<span class="aui-label ' + soy.$$escapeHtml(epic__soy115.epicColor) + ' ' + soy.$$escapeHtml(lozengeWidthClass__soy137) + '">' + ((epic__soy115.epicLabel) ? soy.$$escapeHtml(epic__soy115.epicLabel) : (epic__soy115.text) ? soy.$$escapeHtml(epic__soy115.text) : soy.$$escapeHtml('unlabelled') + '-' + soy.$$escapeHtml(opt_data.issue.epicField.epicKey)) + '</span>';
  }
  if (hasEstimate__soy119) {
    var estimateWidthClass__soy155 = hasVersion__soy116 && hasEpic__soy117 ? 'ghx-card-estimate-3' : hasVersion__soy116 || hasEpic__soy117 ? 'ghx-card-estimate-2' : 'ghx-card-estimate-1';
    output += '<div class="ghx-row-end"><div class="aui-badge ghx-card-estimate ' + soy.$$escapeHtml(estimateWidthClass__soy155) + '">' + soy.$$escapeHtml(estimation__soy118.statFieldValue.text) + '</div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardFooterRow.soyTemplateName = 'GH.tpl.rapid.print.printCardFooterRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/CardPrintingAnalytic.js' */
define("jira-agile/rapid/ui/print/card-printing-analytic",["jquery","jira-agile/rapid/const/PageMode"],function(t,e){"use strict";function i(t){this.context=t}function r(e){var i=e.actionContext;e.AJS.trigger("analytics",{name:n({triggeredFrom:i.triggeredFrom,boardType:i.boardType,viewMode:i.viewMode,cardSize:o.getLastCardPrintingSize()}),data:{issueCount:t(".ghx-card").length-t(".ghx-card-filtered-out").length}})}function n(t){return["gh.cardprinting.",t.triggeredFrom,".",t.boardType,".",t.viewMode,".",t.cardSize,".",a()].join("")}function a(){var e=t("#subnav-trigger-ghx-print-filter-cbx").data("selected-filter-type");return e?e:"notApplicable"}var o=GH.RapidBoard.State;return i.prototype.registerForPrintEvent=function(){if(window.matchMedia){var e=window.matchMedia("print");e.addListener(t.proxy(function(t){t.matches||r(this.context)},this))}window.onafterprint=t.proxy(function(){r(this.context)},this)},i.takeNoteSelectedFilterId=function(e){var i;i=isNaN(e)?e:parseInt(e)===-1?"selected4dev":"sprint",t("#subnav-trigger-ghx-print-filter-cbx").data("selected-filter-type",i)},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/CardPrintingView.js' */
define("jira-agile/rapid/ui/print/card-printing-view",["underscore","jquery","jira-agile/rapid/ui/print/card-printing-analytic"],function(t,e,i){"use strict";function n(i){var n=GH.tpl.rapid.print.printCardScreen(e.extend({},i,{showEpic:g.getEpicShownOnRapidBoard(),cardSize:g.getLastCardPrintingSize(),warnIssueCount:a(t.size(i.issues))})),d=r();window.cardPrintingContext={filterItems:i.filterItems,selectedItem:i.selectedItem,actionContext:i.actionContext,AJS:AJS};var c=window.open();c.document.write([o(),"<html>","<head>",d,"</head>",'<body id="jira" class="ghx-print-card-body">',n,'<script type="text/javascript">','   var CardPrintingView = require("jira-agile/rapid/ui/print/card-printing-view");',"   CardPrintingView.initPrintScreen();","   if (window.stop) {","       window.stop();","       }","</script>","</body></html>"].join("")),c.document.close()}function r(){var t=[];return e("head").children().each(function(i,n){e(n).is("title, style, base, link, meta, script, noscript")&&t.push(e(n)[0].outerHTML)}),t.join("")}function o(){var t=document.doctype;return["<!DOCTYPE ",t.name,t.publicId?' PUBLIC "'+t.publicId+'"':"",!t.publicId&&t.systemId?" SYSTEM":"",t.systemId?' "'+t.systemId+'"':"",">"].join("")}function a(t){return t>=p}function d(){var t=[{id:"small",label:"Small"},{id:"medium",label:"Medium"},{id:"large",label:"Large"}],i=new JIRA.Projects.Subnavigator({id:"ghx-print-card-size-dropdown",triggerPlaceholder:"#ghx-print-toolbar .ghx-print-card-size-trigger",contentPlaceholder:"#ghx-print-toolbar .ghx-print-card-size-options",itemGroups:t,selectedItem:g.getLastCardPrintingSize(),hideSelectedItem:!0});i.show(),i.on("itemSelected",function(t){t.preventDefault();var i=t.item.id;e(".ghx-print-content-sizing").removeClass().addClass("ghx-print-content-sizing ghx-print-"+i),g.setLastCardPrintingSize(i)})}function c(t){e("#ghx-print-toolbar").on("click","#ghx-print-card-print-btn",function(){window.print()}),e("#ghx-print-toolbar-issue-count").tooltip({title:function(){return e("#ghx-print-toolbar-issue-count").hasClass("warning")?"Too many issues? If not, go ahead and print them!":""}});var n=new i({actionContext:t.actionContext,AJS:t.AJS});n.registerForPrintEvent()}function s(n,r){if(t.isEmpty(n))e("#ghx-print-toolbar").find(".ghx-print-filter-label").css("display","none");else{var o=new JIRA.Projects.Subnavigator({id:"ghx-print-filter-cbx",triggerPlaceholder:"#ghx-print-toolbar .ghx-print-filter-trigger",contentPlaceholder:"#ghx-print-toolbar .ghx-print-filter-options",itemGroups:n,selectedItem:r,hideSelectedItem:!0});o.show(),i.takeNoteSelectedFilterId(r),o.on("itemSelected",function(t){t.preventDefault(),e(".ghx-card").addClass("ghx-card-filtered-out");var n=t.item.id,r=".sprint-"+n;"backlog"===n?r=".backlog":"all"===n&&(r=".ghx-card");var o=e(r);o.removeClass("ghx-card-filtered-out"),l(o.length),i.takeNoteSelectedFilterId(n)})}}function l(t){if(e("#ghx-print-toolbar").find(".ghx-print-toolbar-item").css("display",t?"":"none"),t){var i=e("#ghx-print-toolbar-issue-count");i.empty().append(AJS.format("{0,choice,0#0 issues|1#1 issue|2#{0} issues}",t)),a(t)?i.addClass("warning"):i.removeClass("warning")}}var p=400,g=GH.RapidBoard.State,u={showPrintScreen:function(t){n(t)},initPrintScreen:function(){var t=window.opener.cardPrintingContext;window.opener.cardPrintingContext=void 0,d(),s(t.filterItems,t.selectedItem),c(t)}};return u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/ui/print/CardPrintingController.js' */
define("jira-agile/rapid/ui/print/card-printing-controller",["require"],function(){"use strict";function e(e){return GH.RapidBoard.State.isCollapsibleBacklogEnabled()?c(e):p(e)}function i(e,i){return n.map(i,function(i){return n.extend({cardPrintingCategory:e},i)})}function r(e){var i=[],r=n.filter(e.sprintIssues,function(e){return n.size(e.issues)>0}),s=n.map(r,function(e){return{id:e.sprintId.toString(),label:e.sprintName}});return(n.size(s)>1||1===n.size(s)&&!n.isEmpty(e.backlogIssues))&&(i.push([{id:o,label:"Backlog"},{id:a,label:"All issues"}]),i.push(s)),i}var n=require("underscore"),s=(require("jquery"),require("jira-agile/rapid/ui/print/card-printing-view")),t=require("jira-agile/rapid/ui/plan/backlog-model"),a="all",o="backlog",u={printSelectedIssues:function(e){s.showPrintScreen({issues:e.issues,epics:e.epics,actionContext:{triggeredFrom:"contextMenu",viewMode:e.viewMode,boardType:e.boardType}})},printBoardPlanView:function(i){s.showPrintScreen({issues:e(i),filterItems:r(i),selectedItem:a,epics:i.epics,actionContext:{triggeredFrom:"boardMenu",viewMode:i.viewMode,boardType:i.boardType}})},printBoardWorkView:function(e){s.showPrintScreen({issues:e.issues,actionContext:{triggeredFrom:"boardMenu",viewMode:e.viewMode,boardType:e.boardType}})}},p=function(e){var r=[];return n.each(e.sprintIssues,function(e){r.push.apply(r,i("sprint-"+e.sprintId,e.issues))}),r.push.apply(r,i("backlog",e.backlogIssues)),r},c=function(e){var r=[];return n.each(e.sprintIssues,function(e){e.sprintId===t.BACKLOG_ID?r.push.apply(r,i(t.BACKLOG_ID,e.issues)):r.push.apply(r,i("sprint-"+e.sprintId,e.issues))}),r};return u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid', location = 'includes/js/rapid/LegacyNamespaces.js' */
AJS.namespace("GH.AssignedWorkDialog",null,require("jira-agile/rapid/ui/plan/assigned-work-dialog")),AJS.namespace("GH.BacklogController",null,require("jira-agile/rapid/ui/plan/backlog-controller")),AJS.namespace("GH.BacklogModel",null,require("jira-agile/rapid/ui/plan/backlog-model")),AJS.namespace("GH.BacklogModel2",null,require("jira-agile/rapid/ui/plan/backlog-model2")),AJS.namespace("GH.BacklogSelectionController",null,require("jira-agile/rapid/ui/plan/backlog-selection-controller")),AJS.namespace("GH.BacklogStatistics",null,require("jira-agile/rapid/ui/plan/backlog-statistics")),AJS.namespace("GH.BacklogView",null,require("jira-agile/rapid/ui/plan/BacklogView")),AJS.namespace("GH.IssueActions",null,require("jira-agile/rapid/ui/plan/issue-actions")),AJS.namespace("GH.IssueListModel",null,require("jira-agile/rapid/ui/plan/issue-list-model")),AJS.namespace("GH.IssueMoveController",null,require("jira-agile/rapid/ui/plan/issue-move-controller")),AJS.namespace("GH.PlanContextMenuController",null,require("jira-agile/rapid/ui/plan/plan-context-menu-controller")),AJS.namespace("GH.PlanController",null,require("jira-agile/rapid/ui/plan/plan-controller")),AJS.namespace("GH.PlanControls",null,require("jira-agile/rapid/ui/plan/plan-controls")),AJS.namespace("GH.PlanDragAndDrop",null,require("jira-agile/rapid/ui/plan/plan-drag-and-drop")),AJS.namespace("GH.PlanIssueListFiltering",null,require("jira-agile/rapid/ui/plan/plan-issue-list-filtering")),AJS.namespace("GH.PlanIssueListView",null,require("jira-agile/rapid/ui/plan/plan-issue-list-view")),AJS.namespace("GH.PlanKBShortcuts",null,require("jira-agile/rapid/ui/plan/plan-kb-shortcuts")),AJS.namespace("GH.PlanRankController",null,require("jira-agile/rapid/ui/plan/plan-rank-controller")),AJS.namespace("GH.PlanUrlState",null,require("jira-agile/rapid/ui/plan/plan-url-state")),AJS.namespace("GH.PlanView",null,require("jira-agile/rapid/ui/plan/plan-view")),AJS.namespace("GH.SprintBacklogController",null,require("jira-agile/rapid/ui/plan/sprint-backlog-controller")),AJS.namespace("GH.SprintBacklogView",null,require("jira-agile/rapid/ui/plan/sprint-backlog-view")),AJS.namespace("GH.SprintConfig",null,require("jira-agile/rapid/ui/plan/sprint-config")),AJS.namespace("GH.SprintController",null,require("jira-agile/rapid/ui/plan/sprint-controller")),AJS.namespace("GH.SprintModel",null,require("jira-agile/rapid/ui/plan/sprint-model")),AJS.namespace("GH.SprintView",null,require("jira-agile/rapid/ui/plan/sprint-view")),AJS.namespace("GH.ReleaseVersionTrigger",null,require("jira-agile/rapid/ui/work/release-version-trigger")),AJS.namespace("GH.BurndownChartController",null,require("jira-agile/rapid/ui/chart/burndown-chart-controller")),AJS.namespace("GH.BurndownChartModel",null,require("jira-agile/rapid/ui/chart/burndown-chart-model")),AJS.namespace("GH.BurndownChartView",null,require("jira-agile/rapid/ui/chart/burndown-chart-view")),AJS.namespace("GH.BurndownRate",null,require("jira-agile/rapid/ui/chart/burndown-rate")),AJS.namespace("GH.BurndownReportChartController",null,require("jira-agile/rapid/ui/chart/burndown-report-chart-controller")),AJS.namespace("GH.BurndownTableProducer",null,require("jira-agile/rapid/ui/chart/burndown-table-producer")),AJS.namespace("GH.BurndownTimelineProducer",null,require("jira-agile/rapid/ui/chart/burndown-timeline-producer")),AJS.namespace("GH.CFD.Data",null,require("jira-agile/rapid/ui/chart/cfd-data")),AJS.namespace("GH.CFDController",null,require("jira-agile/rapid/ui/chart/cfd-controller")),AJS.namespace("GH.CFDView",null,require("jira-agile/rapid/ui/chart/cfd-view")),AJS.namespace("GH.ChangeEvent",null,require("jira-agile/rapid/ui/chart/change-event")),AJS.namespace("GH.ChangesReportModel",null,require("jira-agile/rapid/ui/chart/changes-report-model")),AJS.namespace("GH.Chart",null,require("jira-agile/rapid/ui/chart/chart")),AJS.namespace("GH.ChartColors",null,require("jira-agile/rapid/ui/chart/chart-colors")),AJS.namespace("GH.ChartController",null,require("jira-agile/rapid/ui/chart/chart-controller")),AJS.namespace("GH.ChartView",null,require("jira-agile/rapid/ui/chart/chart-view")),AJS.namespace("GH.NonWorkingDaysUtils",null,require("jira-agile/rapid/ui/chart/non-working-days-util")),AJS.namespace("GH.ReleaseDatePredictor",null,require("jira-agile/rapid/ui/chart/release-date-predictor")),AJS.namespace("GH.ReportController",null,require("jira-agile/rapid/ui/chart/report-controller")),AJS.namespace("GH.Reports.ControlChartController",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")),AJS.namespace("GH.Reports.ControlChartDataService",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service")),AJS.namespace("GH.Reports.ControlChartView",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view")),AJS.namespace("GH.Reports.EpicBurndownChartDataService",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service")),AJS.namespace("GH.Reports.EpicBurndownChartTableDataService",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service")),AJS.namespace("GH.Reports.EpicBurndownReportController",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller")),AJS.namespace("GH.Reports.EpicBurndownReportView",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-view")),AJS.namespace("GH.Reports.ReleaseBurndownChartDataService",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service")),AJS.namespace("GH.Reports.ReleaseBurndownChartTableDataService",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service")),AJS.namespace("GH.Reports.ReleaseBurndownReportController",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller")),AJS.namespace("GH.Reports.ReleaseBurndownReportView",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view")),AJS.namespace("GH.Reports.BurnupReportView",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view")),AJS.namespace("GH.Reports.BurnupReportController",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller")),AJS.namespace("GH.Reports.BurnupChartDataService",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service")),AJS.namespace("GH.VersionReport",null,require("jira-agile/rapid/ui/chart/version-report")),AJS.namespace("GH.VersionReportController",null,require("jira-agile/rapid/ui/chart/version-report-controller")),AJS.namespace("GH.VersionReportModel",null,require("jira-agile/rapid/ui/chart/version-report-model")),AJS.namespace("GH.VersionReportView",null,require("jira-agile/rapid/ui/chart/version-report-view")),AJS.namespace("GH.EstimatePicker",null,require("jira-agile/rapid/ui/component/estimate-picker")),AJS.namespace("GH.ChartPicker",null,require("jira-agile/rapid/ui/component/chart-picker")),AJS.namespace("GH.SprintActions",null,require("jira-agile/rapid/ui/component/sprintactions/sprint-actions")),GH.sprintActions=new GH.SprintActions,AJS.namespace("GH.Dialogs.CompleteSprintDialog",null,require("jira-agile/rapid/ui/dialog/complete-sprint-dialog")),AJS.namespace("GH.DetailsViewScrollTracker",null,require("jira-agile/rapid/ui/detail/details-view-scroll-tracker")),AJS.namespace("GH.Ajax",null,require("jira-agile/rapid/ajax"));;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan-initialiser', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-initialiser.js' */
define("jira/inline-issue-create/agile/initialiser",["jquery","underscore","jira/inline-issue-create/util","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/inline-bootstrap","jira/inline-issue-create/agile/widget-group","jira/inline-issue-create/agile/entities/issue-types","jira/inline-issue-create/agile/views/description","jira/inline-issue-create/views/default-trigger","jira-agile/rapid/ui/plan/plan-controller","jira-agile/rapid/ui/plan/backlog-controller","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/sprint-backlog-view","jira-agile/rapid/ui/plan/sprint-view","jira-agile/rapid/ui/plan/plan-controls","exports"],function(k,H,n,F,D,B,m,p,z,v,s,a,j,C,A,b){if(AJS&&AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("jira.inline.issue.create.disable")){return}var h=z.extend({serializeData:function r(){return{cssClass:"iic-agile-plan",isAgility:GH.RapidBoard.State.isAgilityBoard()}}});var o=F.Model.extend({namedAttributes:{id:"string",translatedName:"string"}});var f=F.Collection.extend({model:o});var t=new f();var g=D.extend({issueTypesCollectionType:m});var l=new g();var u=new B({TriggerView:h,inlineBootstrap:l,widgetOptions:{descriptionView:p},createdCallback:function G(K,L){if(L!=="backlog"){K.setOverrides({Sprint:L})}K.descriptionView.currentSectionId=""+L;K.descriptionView.allSections=t;K.listenTo(K.descriptionView.allSections,"refreshed",function J(){this.render()});K.descriptionView.on("selected",function I(N){var M=k(N);var O=M.data("section-id");u.activateWidget(u.getWidget(O).widget)})}});function q(){var K=H.filter(A.quickfilters.getQuickFilters(),function I(L){return L.isActive});var J=H.map(K,function(L){return L.query});u.setFilterJQLs(J)}function y(){q();t.reset();l.fireWhenInitialized(function(){if(l.getHasCreateIssuePermission()){if(l.getHasScheduleIssuePermission()){a.getFutureSprintModels().forEach(function I(J){t.add(new o({id:""+J.sprintData.id,translatedName:J.sprintData.name}))})}t.add(new o({id:"backlog",translatedName:"Backlog"}))}});t.trigger("refreshed")}var E=k.Deferred();function i(L){if(!L||L.model.getLockState()===L.model.constants.STATE_LOCK_PERM_INACTIVE){return false}if(E.state()==="pending"){return false}var I=a.getBacklogModel2().getIssueList();var J=GH.BacklogStatistics.getIssueListStats(I,false);if(J.totalCount===0){var M=GH.RapidBoard.State.isAgilityBoard();if(M){var K=a.getSprintModels();if(K.length===1){return K[0].issueList.data.order.length===0}}else{return a.getSprintModels().length===0}return false}}function c(){q();l.fireWhenInitialized(function(){E.then(function I(){if(l.getHasCreateIssuePermission()){var K=u.getWidget("backlog");K.render(k("#ghx-content-group .ghx-backlog-group .js-issue-list"));if(i(K.widget)){var J=K.widget.model;if(J.getIssueTypes()){J.setSelectedIssueType(J.getIssueTypes().at(0))}u.activateWidget(K.widget)}}})});JIRA.trace("inline.create.backlog.rendered")}var e;function w(){if(e!==GH.RapidBoard.State.getRapidViewId()){e=GH.RapidBoard.State.getRapidViewId();JIRA.trace("inline.create.boardjql.fetching");GH.Ajax.get({url:"/rapidviewconfig/editmodel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId()},deferErrorHandling:true},"rapidBoardJQL").done(function I(J){var K=J.filterConfig.query;u.setBoardJQL(K);JIRA.trace("inline.create.boardjql.fetched")})}}function x(I,K){q();if(!K.isActiveSprint()){var L=K.getSprintData().id;l.fireWhenInitialized(function J(){if(l.getHasCreateIssuePermission()&&l.getHasScheduleIssuePermission()){u.getWidget(L).render(I.find(".ghx-issues"))}})}}var d=H.once(function(){n.after(a,"setData",function J(){E.resolve();y()});n.after(a,"updateDataForSprint",y);n.after(C,"renderAllSprints",y);n.after(j,"renderBacklog",c);n.after(A.quickfilters,"setActiveQuickFilters",q);n.after(j,"updateBacklog",c);n.after(s,"updateEpicFiltering",c);n.after(s,"updateVersionFiltering",c);n.after(C,"_renderSprintContent",x);n.after(GH.RapidBoard,"refreshBoardData",w);var I=a.getSprintModels();w();c();I.forEach(function(K){var L=k('.js-sprint-container[data-sprint-id="'+K.getSprintId()+'"]');x(L,K)})});b.init=H.once(function(){if(v.isActive()){d()}else{n.after(v,"initializePlanMode",d)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan-init', location = '/inline-issue-create/widgets/agile-plan/init-agile-plan-inline-issue-create.js' */
require(["jira/inline-issue-create/agile/initialiser"],function(a){a.init()});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:jag-integration-tests', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-initialiser-tests.js' */
require(["underscore","jquery","jira/inline-issue-create/util"],function(b,d,g){function c(h){var i="iic.test."+h;JIRA.trace(i)}function a(h,l,i,k){g.after(h,l,function j(){if(b.isFunction(k)){k.apply(this,arguments)}c(i)})}a(GH.PlanControls,"init","controls.inited");a(GH.SprintView,"renderAllSprints","render.all.sprints");a(GH.BacklogModel,"setData","backlog.data.set");a(GH.BacklogView,"_scrollToView","scrolled.to.issue");a(GH.BacklogModel,"updateDataForSprint","updated.data.for.sprint");a(GH.SprintBacklogView,"renderBacklog","backlog.rendered");a(GH.SprintBacklogView,"updateBacklog","backlog.updated");a(GH.RapidBoard.State,"setRapidViewId","rapid.view.changed");a(GH.SprintView,"_renderSprintContent","sprint.content.rendered",function f(h,i){c("sprint.content.rendered."+i.getSprintData().id)});g.after(GH.PlanControls,"init",function e(){a(GH.PlanControls.quickfilters,"setActiveQuickFilters","active.filters.set")})});;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'probe.js' */
!function(){var n,t,e,r,i,o,u,a,c,s,f,l,h,d,y,p,v,m,w;n=function(){return window}(),t=function(n){return!(!n.performance||!n.performance.now)}(n),e=[],r=function(n){return function(t){n.unshift({addReporter:t})}}(e),i=function(n){return function(t){for(;n.length;)t(n.splice(0,1)[0]);n.unshift=t,n.push=t}}(e),o=function(n,t){return function(e){n.push({end:{key:e.key,timestamp:t.performance.now()}})}}(e,n),u=function(n){return n.document}(n),a=function(n){return n.Promise}(n),c=function(){function n(){this._={}}var t=function(e){var r=e[0],i=e[1];i instanceof n?e.length>=3?Object.keys(i._).forEach(function(n){t([r,i._[n],n].concat(e.slice(2)))}):Object.keys(i._).forEach(function(n){t([r,i._[n],n])}):Array.isArray(i)&&r.apply(null,[i].concat(e.slice(2)))};n.prototype.forEach=function(n){t([n,this])},n.prototype.add=function(){for(var t=this,e=null,r=null,i=0;i<arguments.length;i++){if(r=arguments[i],i===arguments.length-1&&Array.isArray(t)){t.push(r);break}i<arguments.length-2&&!t._.hasOwnProperty(r)?t._[r]=new n:i!==arguments.length-2||t._.hasOwnProperty(r)||(t._[r]=[]),t=t._[r],e=r}};var e=function(n,t){if(0!==n.length){var r=n.pop(),i=r[0],o=r[1];i===t?e(n,i):o._.hasOwnProperty(t)&&delete o._[t],0===Object.keys(o).length&&e(n,i)}};return n.prototype.remove=function(){for(var n,t=!1,r=null,i=this,o=[[r,i]],u=null,a=0;a<arguments.length;a++)if(u=arguments[a],Array.isArray(i))n=i.indexOf(u),n>-1&&(i.splice(n,1),0===i.length&&o.length>1&&e(o,r),t=!0);else{if(!i._.hasOwnProperty(u))break;a===arguments.length-1&&(delete i._[u],0===Object.keys(i).length&&o.length>1&&e(o,r),t=!0),r=u,i=i._[u],o.push([r,i])}return t},n.prototype.get=function(n){return this._.hasOwnProperty(n)?this._[n]:[]},n}(),s=function(n,t,e,r){function i(n){return!n||null==n||"null"===n||"undefined"===n}function o(t,e,r){l||(c.observe(n,{attributes:!0,childList:!0,subtree:!0}),l=!0),s.add(t,e,r)}function u(t,e){var r=n.querySelectorAll(t);return r.length&&(i(e)||Array.prototype.every.call(r,function(n){return!n.querySelector(e)}))}function a(n,e){var r;n.forEach||(n=[n]),!i(e)&&Array.isArray(e)&&(e=e.join(", "));var a=new t(function(i,a){var c=[],f=[];n.forEach(function(n){var r,i;u(n,e)||(r=new t(function(t){o(n,e,t),i=function(){s.remove(n,e,t)},f.push(i)}),c.push(r))});var l=function(){f.forEach(function(n){n()})};t.all(c).then(l).then(i,a),r=function(){l(),a()}});return a.dismiss=r,a}var c,s,f=r.MutationObserver,l=!1;return f&&t?(s=new e,c=new f(function(){s.forEach(function(n,t,e){u(e,t)&&(n.forEach(function(n){n()}),s.remove(e,t))})}),a):void 0}(u,a,c,n),f=function(n){return!!n}(s),l=function(n){function t(){c(),n.body.classList.add(u)}function e(){function e(){n.body.classList.remove(u),n.removeEventListener(i,s),n.removeEventListener(o,c),r=null}if(r)return r;var c,s,f=!1;return r=new Promise(function(e,r){"visible"!==n.visibilityState?r():(s=function(){f=!0},c=function(n){n.animationName===a&&(f?r():e())},n.addEventListener(i,s),n.addEventListener(o,c),t())}),r.then(e,e),r}var r,i="visibilitychange",o="animationend",u="browser-metrics-visibility-test",a="browser-metrics-visibility-animation",c=function(){var t=n.createElement("style"),e=["."+u+" {","-webkit-animation-duration: 0.001s;","animation-duration: 0.001s;","-webkit-animation-name: "+a+";","animation-name: "+a+";","-webkit-animation-iteration-count: 1;","animation-iteration-count: 1;","}","@keyframes "+a+" {}","@-webkit-keyframes "+a+" {","from {}","to {}","}"].join("\n");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(n.createTextNode(e)),n.head.appendChild(t),c=function(){}};return e}(u),h=function(n,t,e,r,i){function o(n){return Array.isArray(n)||(n=[n]),n.map(function(n){return"string"==typeof n?{selector:n,hasNone:null}:n})}function u(n){return Array.isArray(n)||"string"==typeof n}function a(n){return u(n)&&(n={rules:n}),n.rules=o(n.rules),n.requirePaint="undefined"==typeof n.requirePaint?!1:n.requirePaint,n}return function(i,o){if(n){i=a(i);var u=function(){},c=new e(function(n,r){var o=[],a=i.rules.map(function(n){var e=new t(n.selector,n.hasNone);return o.push(function(){e.dismiss()}),e});u=function(){o.forEach(function(n){n()}),r()},e.all(a).then(function(n){}).then(n,r)});return c.cancel=u,i.requirePaint&&(c=c.then(r)),"function"==typeof o&&c.then(o),c}}}(f,s,a,l,n),d=function(n,t){function e(){return r}var r=!1;return n.addEventListener("DOMContentLoaded",function(){t.setTimeout(function(){r=!0})}),e}(u,n),y=function(n,t,e,r,i,o,u){function a(){c=null}var c;return function(o){var s="isInitial"in o?o.isInitial:i()===!1,f="threshold"in o?o.threshold:1e3,l="reporters"in o?o.reporters:[];r.push({start:{key:o.key,isInitial:s,threshold:f,timestamp:s?0:u.performance.now(),reporters:Array.isArray(l)?l:[l]}}),c&&(c.cancel(),a()),o.ready&&e&&(c=n(o.ready),c.then(function(){t({key:o.key})}).then(a,a))}}(h,o,f,e,d,a,n),p=function(n){return function(t){n.push({subscribe:t})}}(e),v=function(){return window}(),m=function(n){return n.performance}(v),w=function(n,t,e,r,i,o,u){var a=function(){};return u?{start:n?i:a,end:n?r:a,addReporter:n?t:a,delegateTo:n?e:a,subscribe:n?o:a}:void 0}(t,r,i,o,y,p,m),window["browser-metrics"]=w,window.define&&window.define("internal/browser-metrics",function(){return w})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'internal/browser-metrics-aa-beacon.js' */
!function(){var e={};e=function(e){function n(e,n){Object.keys(n).forEach(function(r){e[r]=n[r]})}Object.defineProperty(e,"__esModule",{value:!0});var r,t=[],o=[];return e.addUrlCleaner=function(e){o.push(e)},e.cleanUrl=function(e){return o.reduce(function(n,r){var t=r(e);return t.length>n.length?t:n},"")},e.addReportMarshaller=function(e){t.push(e)},e.setEventQueue=function(e){r=e},e.beacon=function(e){var o={};t.forEach(function(r){var t=r(e);"object"==typeof t&&n(o,t)});var a={name:"browser.metrics.navigation",properties:o};(r||AJS.EventQueue).push(a)},e}(e),window["browser-metrics-aa-beacon"]=e,window.define&&window.define("internal/browser-metrics-aa-beacon",function(){return e})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'loader.js' */
!function(){var n={},r={};r=function(n,r,i){function e(){t===u&&o&&(o(),o=null)}Object.defineProperty(n,"__esModule",{value:!0});var t=0,u=0,o=null,c={install:function(n){t+=1,n(function(){u+=1,e()})}};return r["browser-metrics-plugin"]=c,i.require(["wrc!browser-metrics-plugin.contrib"],function(){r.require(["internal/browser-metrics-plugin/collector"],function(n){o=function(){n.install()},e()})}),n}(r,n=window,n.WRM)}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-board-browser-metrics', location = 'includes/js/browser-metrics/BrowserMetricsRegister.js' */
define("jira-agile/browser-metrics/browser-metrics-register",[],function(){"use strict";var r=window["browser-metrics"]||{start:function(){},end:function(){}},e=function(e,t,n,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(r){return{}};e.on(t,function(){var e=arguments,t={key:o,isInitial:!1,reporters:[function(){return s(o)},function(){return e[0]}]};r.start(t),n.on(i,function(){r.end({key:o})})})},t=function(e,t,n,i,o){e.on(t,function(){GH.RapidBoard.ViewController.isBoardLoadMetricsInProgress||r.start({key:i,isInitial:!1,ready:n,reporters:function(){return o(i)}})})};return{registerMetricListener:e,registerMetricListenerWithSelector:t}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-board-browser-metrics', location = 'includes/js/browser-metrics/BoardBrowserMetrics.js' */
!function(){"use strict";function e(e,r){for(var a=document.querySelectorAll(e),t=0;t<a.length;t++)a[t].classList.add(r)}function r(){var e=GH.RapidBoard.State.getRapidViewId(),r=GH.RapidBoard.State.getBoardSettings(e),a=!1,t=!1;switch(c){case"plan":return a=r["backlog.selectedIssues"]&&1===r["backlog.selectedIssues"].length,t=GH.RapidBoard.State.isDetailsViewPlanOpened(),a&&t;case"work":return a=r["work.selectedIssues"]&&1===r["work.selectedIssues"].length,t=GH.RapidBoard.State.isDetailsViewOpened(),a&&t;default:return!1}}var a=require("jira-agile/browser-metrics/browser-metrics-register"),t=require("jira-agile/rapid/ui/plan/backlog-controller"),i=require("jira-agile/rapid/ui/plan/kanban-transition-and-rank"),n=require("jira-agile/rapid/ui/plan/plan-drag-and-drop"),o=require("jira-agile/features/feature-flags"),s=require("jira/featureflags/feature-manager"),d=window["browser-metrics"]||{start:function(){},end:function(){}},l="#gh.js-ghx-detail-loaded:not(.browser-metrics-stale)",u={plan:".js-marker-backlog-header:not(.browser-metrics-stale)",report:"#ghx-chart-header-primary:not(.browser-metrics-stale)",work:"#ghx-work .ghx-issue:not(.browser-metrics-stale), #ghx-work .ghx-sad-columns:not(.browser-metrics-stale)"},g=!0,c=GH.RapidBoard.ViewController.displayedMode,p=function(e){return{issueNo:GH.RapidBoard.State.numberOfIssues.get(),epicNo:GH.RapidBoard.State.numberOfEpics.get(),versionNo:GH.RapidBoard.State.numberOfVersions.get(),projectNo:GH.RapidBoard.State.numberOfProjects.get(),boardType:GH.RapidBoard.State.getBoardType(),boardId:GH.RapidViewConfig.currentData.id,cardColorStrategy:GH.RapidViewConfig.currentData.data.cardColorStrategy,workModeExtraFieldNo:GH.RapidViewConfig.currentData.data.workModeExtraFieldIds.length,planModeExtraFieldNo:GH.RapidViewConfig.currentData.data.planModeExtraFieldIds.length,columnNo:GH.RapidViewConfig.currentData.data.columns.length,swimlaneNo:GH.RapidViewConfig.currentData.data.swimlanes.length,swimlaneStrategy:GH.RapidViewConfig.currentData.data.swimlaneStrategy,daysInColumnEnabled:GH.RapidViewConfig.currentData.data.showDaysInColumn,trackingStatistic:GH.RapidViewConfig.currentData.data.trackingStatistic.id,estimationStatistic:GH.RapidViewConfig.currentData.data.estimationStatistic.id,isDeferFiltersAndHandlersOnRapidBoardsOn:s.isFeatureEnabled(o.DEFER_FILTERS_AND_HANDLERS)}};GH.RapidBoard.ViewController.on("before:navigate",function(a){var t,i,n=[],o=[];GH.RapidBoard.ViewController.isBoardLoadMetricsInProgress||(GH.RapidBoard.ViewController.isBoardLoadMetricsInProgress=!0,o.push(function(){return GH.RapidBoard.ViewController.isBoardLoadMetricsInProgress=!1,{}}),c=a.mode,i=r(),t="jira.agile."+a.mode+(i?"-detail":""),o.push(function(){return p(t)}),n.push(u[a.mode]),i&&n.push(l),g||n.forEach(function(r){return e(r,"browser-metrics-stale")}),d.start({key:t,isInitial:g,ready:n,reporters:o}),g=!1)}),GH.DetailsView.on("after:render",function(){document.querySelector("#gh").classList.remove("browser-metrics-stale")}),a.registerMetricListener(GH.Components.QuickFilters.events,"before:toggle",GH.WorkController,"after:render","jira.agile.quickfilter.toggle",p),a.registerMetricListener(GH.SprintRetrospectiveController,"before:renderChart",GH.SprintRetrospectiveController,"after:renderChart","jira.agile.report.sprint",p),a.registerMetricListener(GH.WorkDragAndDrop,"before:issueDropRender",GH.WorkController,"after:render","jira.board.work.transition.issue",p),a.registerMetricListener(n,"before:sprintRankIssue",n,"after:sprintRankIssue","jira.agile.plan.rankIssue",p),a.registerMetricListener(n,"before:kanbanRankIssue",n,"after:kanbanRankIssue","jira.agile.plan.rankIssue",p),a.registerMetricListener(GH.WorkController,"before:addNewIssueToSprint",GH.WorkController,"after:addNewIssueToSprint","jira.agile.plan.addNewIssueToSprint",p),a.registerMetricListener(GH.WorkRanking,"before:workRankIssue",GH.WorkRanking,"after:workRankIssue","jira.agile.work.rankIssue",p),a.registerMetricListener(GH.WorkDragAndDrop,"before:transitionAndRankIssue",GH.WorkDragAndDrop,"after:transitionAndRankIssue","jira.agile.work.transitionAndRankIssue",p),a.registerMetricListener(t,"before:rankCreatedIssue",t,"after:rankCreatedIssue","jira.agile.plan.rankCreatedIssue",p),a.registerMetricListener(i,"before:submitMultipleTransitionsDialog",i,"after:submitMultipleTransitionsDialog","jira.agile.plan.submitMultipleTransitionsDialog",p),a.registerMetricListenerWithSelector(GH.WorkController,"before:openDetailView",l,"jira.agile.openDetailView",p),a.registerMetricListenerWithSelector(GH.PlanController,"before:openDetailView",l,"jira.agile.openDetailView",p)}();;
;
/* module-key = 'com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload', location = 'jira-attachments.js' */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),o=r(i),a=n(77),s=r(a),u=n(78),c=r(u),l=n(83),f=r(l),d=n(85),h=r(d),p=n(86),v=r(p),m=n(89),y=r(m),b=n(4),g=r(b),_=n(90),w=r(_),x=n(9),k=r(x);g.default.areAttachmentsEnabled()&&((0,w.default)(),k.default.install(),h.default.registerAttachmentMenuHandlerFactory(c.default),h.default.registerBrowseLinkHandlerFactory(c.default),h.default.registerAttachmentsZoneCreator(o.default),h.default.registerTemporaryAttachmentCreatorFactory(f.default),h.default.registerTemporaryAttachmentZoneCreator(s.default),h.default.registerTemporaryBinaryUploadHandler(v.default),h.default.registerConnectedTemporaryBinaryUploadHandler(y.default))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(16),a=r(o),s=n(10),u=r(s),c=n(20),l=r(c);t.default=function(e){var t="view-issue/drop-zone",n=(0,i.dropzone)(e).then(function(e){return e.on("drop",function(){a.default.triggerAttachRequested("viewIssueDropZone")}),e}),r=!1;return{activate:function(){return n.then(function(e){r||(r=!0,e.activate(),u.default.publish("upload/switch-context",{name:t}))})},deactivate:function(){return n.then(function(e){r&&(e.deactivate(),r=!1)})},drop:function(){return n.catch(function(e){a.default.triggerInitialisationException((0,l.default)(e)),u.default.publish("media/error","jira.attachments.setup.failed.description")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.connectedTemporaryBinary=t.binary=t.dropzone=t.popup=t.browser=t.temporaryAttachmentDropzone=t.temporaryAttachmentPopup=t.temporaryAttachmentBrowser=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(3),a=r(o),s=n(16),u=r(s),c=n(17),l=r(c),f=n(24),d=n(20),h=r(d),p=n(76),v=n(19),m=r(v),y="user_token_fetch_fail",b=3e4,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.getApiUrl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.authProvider,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default.getUploadParameters,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.connectToIssueChanges;return n().then(function(t){m.default.mark("attachments.media.components."+e+".credentials.received");var n=i({},{apiUrl:t},{authProvider:r});return n}).then(function(n){return(0,f.MediaPicker)(e,n,t)}).then(function(t){return m.default.mark("attachments.media.components."+e+".component.created"),t}).then(p.connect).then(s).then(function(e){return o().then(function(t){return e.setUploadParams(t)}),e})}},_=function(e){return new Promise(function(t,n){var r=l.default.schedule(function(){u.default.triggerInitializationTimeout(),n({message:"Initialisation Timeout",logged:!0})},b);e.on("ready",function(){m.default.mark("attachments.media.components.popup.ready"),l.default.cancel(r),u.default.triggerPopupInitialized(),u.default.triggerPopupMetrics(),t(e)}),e.on("upload-error",function(t){var i=t.error;i.logged=!0,i.name===y?(u.default.triggerUserNotLoggedIn(),m.default.mark("attachments.media.components.popup.user.not.logged"),l.default.cancel(r),e.teardown(),n(i)):u.default.triggerPopupError((0,h.default)(i))})})},w=g("browser",{multiple:!0}),x=function(e){return g("popup",{userAuthProvider:e})().then(_)},k=function(e){return g("dropzone",{headless:!0,container:e})()},A=(t.temporaryAttachmentBrowser=function(e){return function(){return w(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)}},t.temporaryAttachmentPopup=function(e){return function(t){return g("popup",{userAuthProvider:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges).then(_)}},t.temporaryAttachmentDropzone=function(e,t){return g("dropzone",{headless:!0,container:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)},function(e){return a.default.getApiUrl().then(function(t){var n=i({},{apiUrl:t},{authProvider:function(){return a.default.temporaryAuthProviderGetter(e)}});return n}).then(function(e){return(0,f.MediaPicker)("binary",e)}).then(function(t){return a.default.getTemporaryAttachmentUploadParameters(e).then(function(e){return t.setUploadParams(e),t})})}),S=function(e){return g("binary")(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)};t.browser=w,t.popup=x,t.dropzone=k,t.binary=A,t.connectedTemporaryBinary=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(4),s=r(a),u=n(8),c=r(u),l=n(9),f=r(l),d=n(11),h=r(d),p=n(16),v=r(p),m=n(20),y=r(m),b=n(22),g=r(b),_=n(7),w=r(_);n(23);var x=(0,c.default)(),k=function(e){return e.ok?e.json():e.text().then(function(t){t=t||"Unexpected error",t="Credentials request failure: "+t+" (http status code: "+e.status+")";var n=new Error(t);throw n.description=t,n})},A=function(e){return[x+"/rest/api/2/attachment/upload/issue/"+e+"/credentials",{credentials:"same-origin"}]},S=function(e){return[x+"/rest/api/2/attachment/upload/project/"+e+"/credentials",{credentials:"same-origin"}]},P=function(e,t){return[x+"/rest/api/2/attachment/upload/issue/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t}),headers:{"Content-Type":"application/json"}}]},O=function(e,t,n){return[x+"/rest/api/2/attachment/upload/project/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t,formToken:n}),headers:{"Content-Type":"application/json"}}]},I=function(){return new Request(x+"/rest/internal/latest/media/user/credentials",{credentials:"same-origin"})},E={fetchMetadata:!1,autoFinalize:!0},j=function(e){return Promise.resolve(e).then(F).then(k).then(function(e){var t=e.token,n=e.targetCollection,r=e.tokenDurationInMins;return o({},{token:t,targetCollection:n},isNaN(r)?{}:{tokenDurationInMins:r})})},T=function(e){return Promise.resolve(e).then(fetch).then(k).then(function(e){var t=e.id,n=e.token,r=e.tokenDurationInMins;return o({},{clientId:t,token:n},isNaN(r)?{}:{tokenDurationInMins:r})})},C=function(e){return 60*((e.tokenDurationInMins||10)-1)*1e3},M=(0,g.default)(function(e){return Promise.resolve(e).then(A).then(j)},C),U=(0,g.default)(function(e){return Promise.resolve(e).then(S).then(j)},C),L=(0,g.default)(function(e){return Promise.resolve(e).then(I).then(T)},C),F=function(e){var t=i(e,2),n=t[0],r=t[1];return fetch(n,r)},R=w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiClientId)return e.apiClientId;throw new Error("Media clientId is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve clientId",description:(0,y.default)(e)})})}),N=function(e){return R().then(function(t){return U.get(e).then(function(e){return{clientId:t,token:e.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})};t.default={getClientId:R,getApiUrl:w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiUrl)return e.apiUrl;throw new Error("Media apiUrl is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve apiUrl",description:(0,y.default)(e)})})}),authProvider:function(){return R().then(function(e){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(t){return{clientId:e,token:t.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},userAuthProvider:function(){return Promise.resolve("userAuth").then(L.get).catch(function(e){v.default.triggerUserAuthFetchFailed((0,y.default)(e))})},temporaryAuthProvider:function(){return f.default.getProjectContext().then(function(e){return N(e)}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},temporaryAuthProviderGetter:N,getUploadParameters:function(){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},createAttachment:function(e,t){return Promise.resolve(P(e,t)).then(F).then(k)},createTemporaryAttachment:function(e,t,n){return Promise.resolve(O(e,t,n)).then(F).then(k)},getTemporaryAttachmentUploadParameters:function(e){return Promise.resolve(e).then(U.get).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},reset:function(){M.clear()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=r(i),a=n(6),s=r(a),u=n(7),c=r(u),l="com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload.integration-configuration",f=["\\","/",'"',":","?","*","<","|",">"],d=o.default.getWRM("upload-limit")||1/0,h=o.default.getWRM("thumbnail-mime-types"),p=c.default.memoize(function(){return s.default.claim(l)});t.default={getInvalidChars:function(){return f},getMaxFileSize:function(){return d},getThumbnailMimeType:function(){return h},getMediaCredentials:function(){var e=p(),t=e.apiUrl,n=e.apiClientId;return{apiUrl:t,apiClientId:n}},areAttachmentsEnabled:function(){return p().attachmentsEnabled===!0}}},function(e,t){e.exports=require("dndattachment/util/Configuration")},function(e,t){e.exports=require("wrm/data")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a={uploadContext:null,projectId:null};t.default={getProjectContext:function(){return a.projectId?Promise.resolve(a.projectId):Promise.reject(new Error("Project id wasn't set"))},getUploadContextName:function(){return a.uploadContext&&a.uploadContext.name},getUploadContextSettings:function(){return a.uploadContext&&a.uploadContext.uploadSettings},install:function(){o.default.subscribe("upload/switch-context",function(e){a.uploadContext=e}),o.default.subscribe("project/changed",function(e){a.projectId=e})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Map;t.default={subscribe:function(e,t){n.has(e)||n.set(e,[]),n.get(e).push(t)},publish:function(e,t){n.has(e)&&n.get(e).forEach(function(e){e(t)})},unsubscribe:function(e){n.forEach(function(t){for(var n=0,r=t.length;n<r;n++)t[n]===e&&(t.splice(n,1),n--)})},reset:function(){n=new Map}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a=n(12),s=r(a),u=n(13),c=r(u),l=n(14),f=r(l),d=n(15),h=r(d),p=2e3,v=function(){return new Promise(function(e,t){var n=s.default.getSelectedIssueId(),r=void 0;n?e(n):r=setInterval(function(){n=s.default.getSelectedIssueId(),n&&(clearInterval(r),e(n))},p)})},m=void 0;c.default.bind(f.default.ISSUE_REFRESHED,function(e,t){m=Promise.resolve(t),o.default.publish("issue/changed",t)}),t.default={getIssueId:function(){return m=m||v()},getIssueKey:function(){return s.default.getSelectedIssueKey()},getIssuePermlink:function(){return h.default.get("viewissue-permlink")}}},function(e,t){e.exports=require("jira/issues/api")},function(e,t){e.exports=require("jira/util/events")},function(e,t){e.exports=require("jira/components/issueviewer/eventtypes")},function(e,t){e.exports=require("jira/util/data/meta")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),a=r(o),s=n(19),u=r(s),c=n(20),l=r(c),f=n(21),d=r(f),h={stopInitialising:function(e){this.initialising=!1,this.popupInitialised=e},startRequest:function(e){this.requestStartedTime=a.default.current(),this.source=e},getData:function(e){var t=e.error,n=e.fileSize,r=e.uploadId;return{msSinceLastUserAction:a.default.since(this.requestStartedTime),initialising:this.initialising,popupInitialised:this.popupInitialised,source:this.source,error:(0,d.default)(t),fileSize:n,uploadId:r}},reset:function(){this.initialising=!0,this.popupInitialised=!1,this.requestStartedTime=Number.MAX_VALUE}};h.reset();var p=function(e,t){return AJS.trigger("analytics",{name:e,data:t})},v=function(e,t){return p(e,h.getData(t||{}))},m=function(e,t){return p(e,i({},{source:h.source},t))};t.default={triggerPopupInitialized:function(){h.stopInitialising(!0),v("issue.attachment.media-picker.popup-initialized")},triggerUserNotLoggedIn:function(){h.stopInitialising(!1),v("issue.attachment.media-picker.user-not-logged")},triggerPopupError:function(e){v("issue.attachment.media-picker.popup-error",{error:e})},triggerGenericPopupInitialisationError:function(e){v("issue.attachment.media-picker.generic-popup-initialisation-error",{error:e})},triggerAttachRequested:function(e){h.startRequest(e),v("issue.attachment.media-picker.attach-requested")},triggerPopupShown:function(){v("issue.attachment.media-picker.popup-shown")},triggerPopupFailedToShow:function(e){v("issue.attachment.media-picker.popup-failed-to-show",{error:e})},triggerAttachFileBrowserShown:function(){v("issue.attachment.media-picker.browse-shown")},triggerAttachFileBrowserFailedToShow:function(e){v("issue.attachment.media-picker.browse-failed-to-show",{error:e})},triggerInitialisationException:function(e){e=(0,l.default)(e),h.stopInitialising(!1),v("issue.attachment.media-picker.initialisation-exception",{error:e})},triggerFileUploadFinished:function(e){v("issue.attachment.media-picker.file-upload-finished",{uploadId:e})},triggerAttachmentCreatedInJIRA:function(e){v("issue.attachment.media-picker.attachment-created-in-jira",{uploadId:e})},triggerCantCreateAttachmentInJIRA:function(e,t){v("issue.attachment.media-picker.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerUploadStarted:function(e,t){v("issue.attachment.media-picker.upload-started",{uploadId:e,fileSize:t})},triggerUploadError:function(e,t){v("issue.attachment.media-picker.upload-error",{error:e,uploadId:t})},triggerUploadCancelled:function(e){v("issue.attachment.media-picker.upload-cancelled",{uploadId:e})},triggerUploadValidationFailed:function(e,t){v("issue.attachment.media-picker.upload-validation-failed",{error:e,uploadId:t})},triggerInitializationTimeout:function(){v("issue.attachment.media-picker.initialization-timeout")},triggerTokenFetchFailed:function(e){v("issue.attachment.media-picker.error.token-fetch",{error:e})},triggerUserAuthFetchFailed:function(e){v("issue.attachment.media-picker.popup-error.user-auth-fetch",{error:e})},triggerUploadParametersFetchFailed:function(e){v("issue.attachment.media-picker.error.upload-params-fetch",{error:e})},triggerUploadRequestedWhenNotInitialised:function(){v("issue.attachment.media-picker.upload-request.not-initialised")},triggerBrowserRequestedWhenNotInitialised:function(){v("issue.attachment.media-picker.upload-request.browser.not-initialised")},triggerTemporaryAttachmentCreatedInJIRA:function(e){m("issue.attachment.media-picker.temporary.attachment-created-in-jira",{uploadId:e})},triggerCantCreateTemporaryAttachmentInJIRA:function(e,t){m("issue.attachment.media-picker.temporary.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerPopupMetrics:function(){var e=i({"dom.loaded":u.default.getDomContentLoadedTiming()},u.default.getMarksForNamespace("attachments.media.components.popup"));AJS.trigger("analytics",{name:"issue.attachment.media-picker.popup-metrics",data:e})},getRequestIdentifier:function(){return h.requestIdentifier},reset:function(){h.reset()}}},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={current:function(){return Math.round(e&&e.performance&&e.performance.now())},since:function(e){return Math.round(this.current()-e)},schedule:function(e,t){return setTimeout(e,t)},cancel:function(e){clearTimeout(e)}}}).call(t,n(18))},function(e,t,n){(function(t){"use strict";e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(18))},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mark:function(t){return e&&e.performance&&e.performance.mark(t)},getMarksForNamespace:function(t){var n={};if(e&&e.performance){e.performance.getEntriesByType("mark").filter(function(e){return 0===e.name.indexOf(t)}).forEach(function(e){var t=e.name,r=e.startTime;return n[t]=parseInt(r,10)})}return n},getDomContentLoadedTiming:function(){var t=e&&e.performance&&e.performance.timing;return t?parseInt(t.domContentLoadedEventStart-t.navigationStart,10):0}}}).call(t,n(18))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e){return"undefined"!=typeof e},i=function(e){return r(e.config)&&r(e.config.headers)&&r(e.response)&&r(e.response.config)&&r(e.response.config.headers)};t.default=function(e){if(r(e.name)&&r(e.message))return e.toString();if(r(e.name)&&r(e.description))return e.name+": "+e.description;if(r(e.message))return e.message;if("string"==typeof e)return e;if(i(e)){var t=n({},e);return delete t.config.headers.Authorization,delete t.response.config.headers.Authorization,""+e}return""+e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&e.indexOf("Authorization")!==-1?"Error sanitized":e}},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},n=new Map;return{get:function(i){if(!n.has(i)){var o=e(i).then(function(e){var o=t(e);return o&&setTimeout(function(){return r(n,i)},o),e}).catch(function(e){throw r(n,i),e});n.set(i,o)}return n.get(i)},clear:function(){n.clear()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=function(e,t){return e.has(t)&&e.delete(t)}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&g(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},f.call(h.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];m.redirect=function(e,t){if(x.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var i=new h(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="lib/",t(t.s=149)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(159),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(61)("wks"),i=n(42),o=n(4).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(4),i=n(2),o=n(14),a=n(15),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";function r(e){return"[object Array]"===k.call(e)}function i(e){return"[object ArrayBuffer]"===k.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===k.call(e)}function d(e){return"[object File]"===k.call(e)}function h(e){return"[object Blob]"===k.call(e)}function p(e){return"[object Function]"===k.call(e)}function v(e){return l(e)&&p(e.pipe)}function m(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function b(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function g(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function _(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=_(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)g(arguments[n],e);return t}function w(e,t,n){return g(t,function(t,r){e[r]=n&&"function"==typeof t?x(t,n):t}),e}var x=n(117),k=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:l,isUndefined:c,isDate:f,isFile:d,isBlob:h,isFunction:p,isStream:v,isURLSearchParams:m,isStandardBrowserEnv:b,forEach:g,merge:_,extend:w,trim:y}},function(e,t,n){(function(t,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.1
	 */
!function(t,r){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function i(e){return"function"==typeof e}function o(e){V=e}function a(e){W=e}function s(){return void 0!==$?function(){$(c)}:u()}function u(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<q;e+=2)(0,X[e])(X[e+1]),X[e]=void 0,X[e+1]=void 0;q=0}function l(e,t){var n=arguments,r=this,i=new this.constructor(d);void 0===i[ee]&&T(i);var o=r._state;return o?function(){var e=n[o-1];W(function(){return I(o,i,e,r._result)})}():A(r,i,e,t),i}function f(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(d);return _(n,e),n}function d(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function v(e){try{return e.then}catch(e){return ie.error=e,ie}}function m(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function y(e,t,n){W(function(e){var r=!1,i=m(n,t,function(n){r||(r=!0,t!==n?_(e,n):x(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function b(e,t){t._state===ne?x(e,t._result):t._state===re?k(e,t._result):A(t,void 0,function(t){return _(e,t)},function(t){return k(e,t)})}function g(e,t,n){t.constructor===e.constructor&&n===l&&t.constructor.resolve===f?b(e,t):n===ie?(k(e,ie.error),ie.error=null):void 0===n?x(e,t):i(n)?y(e,t,n):x(e,t)}function _(t,n){t===n?k(t,h()):e(n)?g(t,n,v(n)):x(t,n)}function w(e){e._onerror&&e._onerror(e._result),S(e)}function x(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&W(S,e))}function k(e,t){e._state===te&&(e._state=re,e._result=t,W(w,e))}function A(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=n,i[o+re]=r,0===o&&e._state&&W(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?I(n,r,i,o):i(o);e._subscribers.length=0}}function P(){this.error=null}function O(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function I(e,t,n,r){var o=i(n),a=void 0,s=void 0,u=void 0,c=void 0;if(o){if(a=O(n,r),a===oe?(c=!0,s=a.error,a.error=null):u=!0,t===a)return void k(t,p())}else a=r,u=!0;t._state!==te||(o&&u?_(t,a):c?k(t,s):e===ne?x(t,a):e===re&&k(t,a))}function E(e,t){try{t(function(t){_(e,t)},function(t){k(e,t)})}catch(t){k(e,t)}}function j(){return ae++}function T(e){e[ee]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function C(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[ee]||T(this.promise),H(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&x(this.promise,this._result))):k(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function U(e){return new C(this,e).promise}function L(e){var t=this;return new t(H(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(d);return k(n,e),n}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[ee]=j(),this._result=this._state=void 0,this._subscribers=[],d!==e&&("function"!=typeof e&&R(),this instanceof z?E(this,e):N())}function D(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=z}var B=void 0;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H=B,q=0,$=void 0,V=void 0,W=function(e,t){X[q]=e,X[q+1]=t,2===(q+=2)&&(V?V(c):Z())},J="undefined"!=typeof window?window:void 0,K=J||{},G=K.MutationObserver||K.WebKitMutationObserver,Y="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),Z=void 0;Z=Y?function(){return function(){return t.nextTick(c)}}():G?function(){var e=0,t=new G(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():Q?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===J?function(){try{var e=r(209);return $=e.runOnLoop||e.runOnContext,s()}catch(e){return u()}}():u();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,re=2,ie=new P,oe=new P,ae=0;return C.prototype._enumerate=function(e){for(var t=0;this._state===te&&t<e.length;t++)this._eachEntry(e[t],t)},C.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===f){var i=v(e);if(i===l&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(d);g(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},C.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===te&&(this._remaining--,e===re?k(r,n):this._result[t]=n),0===this._remaining&&x(r,this._result)},C.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(re,t,e)})},z.all=U,z.race=L,z.resolve=f,z.reject=F,z._setScheduler=o,z._setAsap=a,z._asap=W,z.prototype={constructor:z,then:l,catch:function(e){return this.then(null,e)}},z.polyfill=D,z.Promise=z,z}()}()}).call(t,n(78),n(52))},function(e,t,n){var r=n(140)("wks"),i=n(141),o=n(13).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(10),i=n(92),o=n(63),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(29);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(9),i=n(43);e.exports=n(12)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports={default:n(156),__esModule:!0}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(93),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(178),o=r(i),a=n(182),s=r(a),u=n(93),c=r(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(187),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(110),i=n(25);t.handleError=function(e,t){var n=Error().stack||"",o=t||"",a=e+": "+o+" \n "+n;(new r.UserTracker).track()(new i.ErrorException(e,n,t)),console.error(a)}},function(e,t){e.exports={}},function(e,t,n){var r=n(66),i=n(59);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(19),s=r(a),u=n(20),c=r(u),l=n(0),f=r(l),d=n(1),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(t,n){(0,f.default)(this,e),this.prefix="files.mediapicker-web.",this.name=this.prefix+t,this.properties=n}return(0,h.default)(e,[{key:"toJSON",value:function(){return{name:this.name,properties:this.properties}}}]),e}();t.UserEvent=p;var v=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"library.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MediaPickerLoaded=v;var m=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"browser.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPBrowserLoaded=m;var y=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"dropzone.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPDropzoneLoaded=y;var b=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"cliboard.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPClipboardLoaded=b;var g=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupLoaded=g;var _=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.shown",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupShown=_;var w=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.hidden",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupHidden=w;var x=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.ended",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadEnded=x;var k=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadStarted=k;var A=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.processing.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileProcessingStarted=A;var S=function(e){function t(e,n,r){(0,f.default)(this,t);var i={alias:e,description:r,stacktrace:n};return(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"files.mediapicker-web.library.exception.fired",i))}return(0,c.default)(t,e),t}(p);t.ErrorException=S},function(e,t){e.exports=n(25)},function(e,t,n){var r=n(55),i=n(138);e.exports=n(37)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(56);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(164)(!0);n(65)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(9).f,i=n(17),o=n(3)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(169);for(var r=n(4),i=n(15),o=n(23),a=n(3)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){var r=n(14),i=n(189),o=n(190),a=n(10),s=n(67),u=n(102),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(80),o=n(122),a=n(112),s=function(e,t){return o.checkWebpSupport().then(function(t){return e.accept=t?"image/webp,image/*,*/*;q=0.8":"image/*,*/*;q=0.8",e})},u=function(t,n,i,o){var u=r.__assign({},n,{"Content-Type":"application/json"});return i||(a.isAsapBasedAuth(t)?u["X-Issuer"]=t.asapIssuer:a.isClientBasedAuth(t)&&(u["X-Client-Id"]=t.clientId),u.Authorization="Bearer "+t.token),"image"===o?s(u):e.resolve(u)},c=function(t,n,i,o){var s={};return i&&(s.token=t.token,a.isClientBasedAuth(t)?s.client=t.clientId:a.isAsapBasedAuth(t)&&(s.issuer=t.asapIssuer)),e.resolve(r.__assign({collection:o},n,s))},l=function(e){return e=e||"json",{image:"blob",json:"json"}[e]};t.default=function(t){var n=t.preventPreflight,r=t.collectionName,o=t.config,a=o.authProvider,s=o.serviceHost;return function(t){var o=t.url,f=t.headers,d=t.params,h=t.responseType,p=t.method,v=t.data,m=a({collectionName:r}),y=function(t){return e.all([u(t,f,n,h),c(t,d,n,r)])},b=function(e){var t=e[0],n=e[1];return i.default({method:p||"get",url:o,baseURL:s,headers:t,params:n,data:v,responseType:l(h)})};return m.then(y).then(b).then(function(e){return e.data})}}}).call(t,n(7))},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(137)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports={}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(u(r.parts[o],t));d[r.id]={id:r.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],u=i[3],c={css:a,media:s,sourceMap:u};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function i(e,t){var n=v(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function u(e,t){var n,r,i;if(t.singleton){var u=y++;n=m||(m=a(t)),r=c.bind(null,n,u,!1),i=c.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=f.bind(null,n),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=l.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function l(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},h=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},p=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,b=[];e.exports=function(e,t){t=t||{},void 0===t.singleton&&(t.singleton=p()),void 0===t.insertAt&&(t.insertAt="bottom");var i=r(e);return n(i,t),function(e){for(var o=[],a=0;a<i.length;a++){var s=i[a],u=d[s.id];u.refs--,o.push(u)}e&&n(r(e),t);for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete d[u.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(59);e.exports=function(e){return Object(r(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!0},function(e,t,n){var r=n(10),i=n(166),o=n(68),a=n(60)("IE_PROTO"),s=function(){},u=function(){var e,t=n(62)("iframe"),r=o.length;for(t.style.display="none",n(96).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(95),i=n(68);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(185),v=n(132),m=n(271),y=function(e){function t(e,n){var r=n.apiUrl,i=n.authProvider,a=n.uploadParams;(0,s.default)(this,t);var u=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return u.onFilesAdded=function(e){var t=e.files;u.emitUploadsStart(t)},u.onFileAdded=function(e){var t=e.file;u.emitUploadStart(t),t.raw&&t.type.match(/^image\//)&&m.default(t.raw).then(function(e){u.emitUploadPreviewUpdate(t,e)})},u.onFileUploading=function(e){var t=e.file,n=e.progress;u.emitUploadProgress(t,n)},u.onFileFinalizeReady=function(e){var t=e.file,n=e.finalize;u.emitUploadFinalizeReady(t,n)},u.onFileConverting=function(e){var t=e.file;u.emitUploadProcessing(t)},u.onFileConverted=function(e){var t=e.file,n=e.progress,r=e.metadata;u.emitUploadProgress(t,n),u.emitUploadEnd(t,r)},u.onUploadError=function(e){var t=e.file,n=e.error;u.emitUploadError(t,n)},u.uploadService=new p.UploadService(r,i,a||{}),u.uploadService.on("files-added",u.onFilesAdded),u.uploadService.on("file-added",u.onFileAdded),u.uploadService.on("file-uploading",u.onFileUploading),u.uploadService.on("file-finalize-ready",u.onFileFinalizeReady),u.uploadService.on("file-converting",u.onFileConverting),u.uploadService.on("file-converted",u.onFileConverted),u.uploadService.on("file-upload-error",u.onUploadError),u}return(0,h.default)(t,e),(0,c.default)(t,[{key:"cancel",value:function(e){this.uploadService.cancel(e)}},{key:"setUploadParams",value:function(e){this.uploadService.setUploadParams(e)}}]),t}(v.MPComponent);t.MediaLocalUpload=y},function(e,t,n){var r=n(31),i=n(3)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){e.exports={default:n(203),__esModule:!0}},function(e,t,n){var r=n(207),i=n(208),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";(function(t){e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(52))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n}function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(t,n,r,i){return new(r||(r=e))(function(e,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function s(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){t.done?e(t.value):new r(function(e){e(t.value)}).then(a,s)}u((i=i.apply(t,n||[])).next())})}function c(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function p(e){return this instanceof p?(this.v=e,this):new p(e)}function v(t,n,r){function i(t){f[t]&&(l[t]=function(n){return new e(function(e,r){d.push([t,n,e,r])>1||o(t,n)})})}function o(e,t){try{a(f[e](t))}catch(e){c(d[0][3],e)}}function a(t){t.value instanceof p?e.resolve(t.value.v).then(s,u):c(d[0][2],t)}function s(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),d.shift(),d.length&&o(d[0][0],d[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,f=r.apply(t,n||[]),d=[];return l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l}function m(e){function t(t,i){e[t]&&(n[t]=function(n){return(r=!r)?{value:p(e[t](n)),done:"return"===t}:i?i(n):n})}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof f?f(e):e[Symbol.iterator]()}t.__extends=r,n.d(t,"__assign",function(){return g}),t.__rest=i,t.__decorate=o,t.__param=a,t.__metadata=s,t.__awaiter=u,t.__generator=c,t.__exportStar=l,t.__values=f,t.__read=d,t.__spread=h,t.__await=p,t.__asyncGenerator=v,t.__asyncDelegator=m,t.__asyncValues=y;/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}}.call(t,n(7))},function(e,t,n){var r=n(86);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(28),i=n(276),o=n(277),a=Object.defineProperty;t.f=n(37)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(61)("keys"),i=n(42);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(4),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(11),i=n(4).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(44),i=n(5),o=n(94),a=n(15),s=n(17),u=n(23),c=n(165),l=n(32),f=n(91),d=n(3)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&w.next&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t,n){var r=n(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(64),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){t.f=n(3)},function(e,t,n){var r=n(42)("meta"),i=n(11),o=n(17),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(18)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t,n){var r=n(4),i=n(2),o=n(44),a=n(69),s=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(29);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(15);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){(function(r,i){var o;!function(a){function s(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==a?e.maxListeners:p,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=p}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}function f(e,t,n,r){if(!n)return[];var i,o,a,s,u,c,l,d=[],h=t.length,p=t[r],v=t[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(d=d.concat(f(e,t,n[a],r+1)));return d}if("**"===p){(l=r+1===h||r+2===h&&"*"===v)&&n._listeners&&(d=d.concat(f(e,t,n,h)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!l&&(d=d.concat(f(e,t,n[a],h))),d=d.concat(f(e,t,n[a],r))):d=a===v?d.concat(f(e,t,n[a],r+2)):d.concat(f(e,t,n[a],r)));return d}d=d.concat(f(e,t,n[p],r+1))}if(s=n["*"],s&&f(e,t,s,r+1),u=n["**"])if(r<h){u._listeners&&f(e,t,u,h);for(a in u)"_listeners"!==a&&u.hasOwnProperty(a)&&(a===v?f(e,t,u[a],r+2):a===p?f(e,t,u[a],r+1):(c={},c[a]=u[a],f(e,t,{"**":c},r+1)))}else u._listeners?f(e,t,u,h):u["*"]&&u["*"]._listeners&&f(e,t,u["*"],h);return d}function d(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,o=e.shift();o!==a;){if(i[o]||(i[o]={}),i=i[o],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,c.call(this,i._listeners.length,o))):i._listeners=t,!0;o=e.shift()}return!0}var h=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=10;l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==a&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,r){function i(){return 0==--t&&o.off(e,i),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return i._origin=n,this._on(e,i,r),o},l.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,i,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,o,u,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return i.resolve([!1]);var t,n,r,o,a,u=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),o=1;o<c;o++)t[o]=arguments[o];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:u.push(this._all[r].call(this,e));break;case 2:u.push(this._all[r].call(this,e,arguments[1]));break;case 3:u.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:u.push(this._all[r].apply(this,t))}}if(this.wildcard){a=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,a,l,this.listenerTree,0)}else a=this._events[e];if("function"==typeof a)switch(this.event=e,c){case 1:u.push(a.call(this));break;case 2:u.push(a.call(this,arguments[1]));break;case 3:u.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];u.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),c>3)for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,c){case 1:u.push(a[r].call(this));break;case 2:u.push(a[r].call(this,arguments[1]));break;case 3:u.push(a[r].call(this,arguments[1],arguments[2]));break;default:u.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?i.reject(arguments[1]):i.reject("Uncaught, unspecified 'error' event.");return i.all(u)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this.emit("newListener",e,t),this.wildcard?(d.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){function n(e){if(e!==a){var t=Object.keys(e);for(var r in t){var i=t[r],o=e[i];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&n(e[i]),0===Object.keys(o).length&&delete e[i])}}}if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();i=f.call(this,null,o,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var s=0;s<i.length;s++){var u=i[s];if(r=u._listeners,h(r)){for(var c=-1,l=0,d=r.length;l<d;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){c=l;break}if(c<0)continue;return this.wildcard?u._listeners.splice(c,1):this._events[e].splice(c,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete u._listeners:delete this._events[e],this.emit("removeListener",e,t))}return n(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;n<r;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||s.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=f.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var i=n[r];i._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return f.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),h(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},(o=function(){return l}.call(t,n,t,e))!==a&&(e.exports=o)}()}).call(t,n(78),n(7))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],v=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){e.exports=n(39)},function(e,t,n){e.exports=n(220)},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(6),o=n(222),a=/^\)\]\}',?\n/,s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(118):void 0!==t&&(e=n(118)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(a,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),e.exports=u}).call(t,n(78))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.referenceCountById={},this.referencesById={}}return e.prototype.acquire=function(e,t){return this.referenceCountById[e]||(this.referencesById[e]=t(),this.referenceCountById[e]=0),this.referenceCountById[e]=this.referenceCountById[e]+1,this.referencesById[e]},e.prototype.release=function(e){this.referenceCountById[e]>0&&(this.referenceCountById[e]=this.referenceCountById[e]-1),this.referenceCountById[e]||delete this.referencesById[e]},e}();t.Pool=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(50),f=r(l);Object.defineProperty(t,"__esModule",{value:!0});var d=n(80),h=n(111);t.isTokenError=function(e){if(e&&e.error){var t=e.error.code;return"JwtAuthoriser:TokenExpiredError"===t||"JwtAuthoriser:AuthenticationError"===t}return!1},t.addAuthToHeaders=function(e,t){var n=e.headers||{};return(0,f.default)({},e,{headers:(0,f.default)({},n,h.mapAuthToAuthHeaders(t))})},t.addAuthToQueryParameters=function(e,t){return(0,f.default)({},e,{parameters:(0,f.default)({},e.parameters,h.mapAuthToQueryParameters(t))})};var p=function(){function e(t,n,r){(0,s.default)(this,e),this.apiUrl=t,this.authProvider=n,this.collection=r}return(0,c.default)(e,[{key:"refreshAuth",value:function(){var e=this;return this.authProvider({collectionName:this.collection}).then(function(t){return e.auth=t,t})}},{key:"call",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.addAuthToHeaders;return this.makeCall(e,r).catch(function(i){if(!(i&&i.response&&t.isTokenError(i.response.data)))throw i;return n.makeCall(e,r,!0)})}},{key:"makeCall",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getAuth(r).then(function(r){return n.makeCallWithToken(e,t,r)})}},{key:"getAuth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.auth&&!e?o.default.resolve(this.auth):this.refreshAuth()}},{key:"makeCallWithToken",value:function(e,t,n){var r=t(e,n),i=this.getAxiosRequestConfig(r);return d.default.request(i).then(function(e){return e.data})}},{key:"getAxiosRequestConfig",value:function(e){var t=e.httpMethod,n=e.mediaApiMethod,r=e.parameters,i=e.headers,o=e.data;return{url:this.apiUrl+"/"+n,method:t,headers:(0,f.default)({},i,o?{"Content-Type":"application/json; charset=utf-8"}:{}),params:r,data:o}}},{key:"storedAuth",get:function(){return this.auth}}]),e}();t.MediaClient=p},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(56),i=n(13).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(284),i=n(85);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(140)("keys"),i=n(141);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(55).f,i=n(57),o=n(8)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(17),i=n(41),o=n(60)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){e.exports=!n(12)&&!n(18)(function(){return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(162),o=r(i),a=n(171),s=r(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,n){e.exports=n(15)},function(e,t,n){var r=n(17),i=n(24),o=n(167)(!1),a=n(60)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(31);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(95),i=n(68).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(47),i=n(43),o=n(24),a=n(63),s=n(17),u=n(92),c=Object.getOwnPropertyDescriptor;t.f=n(12)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){e.exports={default:n(186),__esModule:!0}},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(10),i=n(29),o=n(3)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r,i,o,a=n(14),s=n(191),u=n(96),c=n(62),l=n(4),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,m=0,y={},b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},g=function(e){b.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},h=function(e){delete y[e]},"process"==n(31)(f)?r=function(e){f.nextTick(a(b,e,1))}:v&&v.now?r=function(e){v.now(a(b,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=g,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(10),i=n(11),o=n(75);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(4),i=n(2),o=n(9),a=n(12),s=n(3)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(t,n(52))},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(50),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(210),f=function(){function e(){(0,s.default)(this,e),this.defaults={storage_key:"media-picker.herment.storage",product:"media-picker",subproduct:"library",version:"1.0"},this.queue=[],this.queueProcessor=l.default((0,o.default)({},this.defaults,{queue:this.queue})),this.queueProcessor&&this.queueProcessor.start(),this.defaultProperties={}}return(0,c.default)(e,[{key:"track",value:function(){var e=this;return function(t){var n=t.toJSON();n.properties=(0,o.default)({},e.defaultProperties,n.properties),e.queue.push(n)}}}]),e}();t.UserTracker=f},function(e,t,n){"use strict";function r(e){return o.isClientBasedAuth(e)?{"X-Client-Id":e.clientId,Authorization:"Bearer "+e.token}:{"X-Issuer":e.asapIssuer,Authorization:"Bearer "+e.token}}function i(e){return o.isClientBasedAuth(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(212);t.mapAuthToAuthHeaders=r,t.mapAuthToQueryParameters=i},function(e,t,n){"use strict";function r(e){return!!e.clientId}function i(e){return!!e.asapIssuer}Object.defineProperty(t,"__esModule",{value:!0}),t.isClientBasedAuth=r,t.isAsapBasedAuth=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114);t.RemoteMediaCollectionProvider=r.RemoteMediaCollectionProvider;var i=n(116);t.FileProvider=i.FileProvider;var o=n(123);t.LinkProvider=o.LinkProvider;var a=n(239);t.MediaItemProvider=a.MediaItemProvider;var s=n(240);t.MediaUrlPreviewProvider=s.MediaUrlPreviewProvider;var u=n(126);t.UrlPreviewProvider=u.UrlPreviewProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115);n(79);var i=function(){function e(e,t,n,i){this.collectionService=e,this.collectionName=t,this.pageSize=n,this.sortDirection=i,this.subject=new r.Subject,this.connectableObservable=this.subject.publishReplay(1),this.items=[],this.nextInclusiveStartKey=void 0,this.isLoading=!1,this.connectableObservable.connect(),this.loadNextPage()}return e.prototype.observable=function(){return this.connectableObservable},e.prototype.loadNextPageUntil=function(e){var t=this;if(!this.items.some(e))var n=this.connectableObservable.subscribe({next:function(r){!t.nextInclusiveStartKey||r.items.some(e)?n.unsubscribe():t.loadNextPage()},complete:function(){return n.unsubscribe()},error:function(e){return n.unsubscribe()}})},e.prototype.loadNextPage=function(){var e=this;this.isLoading||(this.isLoading=!0,this.collectionService.getCollectionItems(this.collectionName,this.pageSize,this.nextInclusiveStartKey,this.sortDirection,"full").then(function(t){e.isLoading=!1,(r=e.items).push.apply(r,t.items);var n={id:e.collectionName,items:e.items};e.nextInclusiveStartKey=t.nextInclusiveStartKey,e.subject.next(n);var r},function(t){e.isLoading=!1,e.subject.error(t)}))},e.prototype.refresh=function(){var e=this;if(!this.isLoading){this.isLoading=!0;var t,n=this.items[0]&&this.items[0].details,r=n&&n.id,i=n&&n.occurrenceKey,o=[],a=function(){e.collectionService.getCollectionItems(e.collectionName,e.pageSize,t,e.sortDirection,"full").then(function(n){for(var s=!1,u=0,c=n.items;u<c.length;u++){var l=c[u],f=l.details,d=f.id,h=f.occurrenceKey;if(d===r&&h===i){s=!0;break}o.push(l)}s?(e.isLoading=!1,e.items=o.concat(e.items),e.subject.next({id:e.collectionName,items:e.items})):n.nextInclusiveStartKey&&(t=n.nextInclusiveStartKey,a())},function(t){e.isLoading=!1,e.subject.error(t)})};a()}},e}();t.RemoteMediaCollectionProvider=i},function(e,t){e.exports=n(42)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(219),i=n(26);n(79),t.FILE_PROVIDER_RETRY_INTERVAL=2e3;var o=function(){function e(){}return e.fromMediaApi=function(t,n,i,o,a){return e.fromFileService(new r.MediaFileService(t,n),i,o,a)},e.fromFileService=function(e,t,n,r){return{observable:function(){var o=new i.Observable(function(i){var o,a=r||1e3,s=function(){e.getFileItem(t,n).then(function(e){"pending"!==e.details.processingStatus?(i.next(e),i.complete()):(i.next(e),o=setTimeout(function(){return s()},a))},function(e){i.error(e)})};return s(),function(){null!==o&&clearTimeout(o)}}).publishReplay(1);return o.connect(),o}}},e}();t.FileProvider=o},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";(function(t){var r=n(6),i=n(223),o=n(225),a=n(226),s=n(227),u=n(119),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(228);e.exports=function(e){return new t(function(t,l){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest,p="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(e.url)||(h=new window.XDomainRequest,p="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var m=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+c(m+":"+y)}if(h.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[p]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?h.response:h.responseText,o={data:r,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:n,config:e,request:h};i(t,l,o),h=null}},h.onerror=function(){l(u("Network Error",e)),h=null},h.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),h=null},r.isStandardBrowserEnv()){var b=n(229),g=(e.withCredentials||s(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(d,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(e){if("json"!==h.responseType)throw e}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),l(e),h=null)}),void 0===f&&(f=null),h.send(f)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(224);e.exports=function(e,t,n,i){var o=new Error(e);return r(o,t,n,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(237)),r(n(238))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(124),i=n(26);n(79);var o=function(){function e(){}return e.fromMediaApi=function(t,n,i){return e.fromLinkService(new r.MediaLinkService(t),n,i)},e.fromLinkService=function(e,t,n){return{observable:function(){
var r=new i.Observable(function(r){return e.getLinkItem(t,n).then(function(e){r.next(e),r.complete()},function(e){r.error(e)}),function(){}}).publishReplay(1);return r.connect(),r}}},e}();t.LinkProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getLinkItem=function(e,t){return r.default({config:this.config,collectionName:t,preventPreflight:!0})({url:"/link/"+e}).then(function(e){return e.data}).then(function(e){return{type:"link",details:{id:e.id,url:e.url,type:e.metadata.type,title:e.metadata.title,description:e.metadata.description,site:e.metadata.site,author:e.metadata.author,date:e.metadata.date,resources:e.metadata.resources}}})},e.prototype.addLinkItem=function(e,t,n){return r.default({config:this.config,collectionName:t})({method:"post",url:"/link",data:{url:e,metadata:n}}).then(function(e){return e.data.id})},e}();t.MediaLinkService=i},function(e,t,n){"use strict";function r(e,t,n){return new i.Observable(function(r){var i=e.acquire(t,n),o=i.subscribe(r);return function(){o.unsubscribe(),e.release(t)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.observableFromObservablePool=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(241),i=n(26),o=function(){function e(){}return e.fromMediaApi=function(t,n){return e.fromUrlPreviewService(new r.MediaUrlPreviewService(t),n)},e.fromUrlPreviewService=function(e,t){return{observable:function(){return new i.Observable(function(n){return e.getUrlPreview(t).then(function(e){n.next(e),n.complete()},function(e){n.error(e)}),function(){}})}}},e}();t.UrlPreviewProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(35);t.DEFAULT_COLLECTION_PAGE_SIZE=10;var o=function(){function e(e){this.config=e}return e.prototype.mapToMediaCollectionItem=function(e){var t=e.id,n=e.type,i=e.occurrenceKey,o=e.details;if("file"===n){var a=o;return{type:"file",details:r.__assign({id:t,occurrenceKey:i},a)}}var s=o;return{type:"link",details:r.__assign({id:t,type:"link",occurrenceKey:i,title:s.title||""},s)}},e.prototype.getCollectionItems=function(e,n,r,o,a){var s=this;return void 0===n&&(n=t.DEFAULT_COLLECTION_PAGE_SIZE),i.default({config:this.config,preventPreflight:!0,collectionName:e})({url:"/collection/"+e+"/items",params:{limit:n,inclusiveStartKey:r,sortDirection:o,details:a}}).then(function(e){return{items:e.data.contents.map(s.mapToMediaCollectionItem),nextInclusiveStartKey:e.data.nextInclusiveStartKey}})},e}();t.MediaCollectionService=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_NAMES={OBJ_CREATE_FAIL:"object_create_fail",METADATA_FETCH_FAIL:"metadata_fetch_fail",TOKEN_FETCH_FAIL:"token_fetch_fail",TOKEN_UPDATE_FAIL:"token_update_fail",TOKEN_SOURCE_EMPTY:"token_source_empty",UPLOAD_FAIL:"upload_fail",USER_TOKEN_FETCH_FAIL:"user_token_fetch_fail"};var u=function(){function e(t,n,r){(0,o.default)(this,e),this.fileId=t,this.name=n,this.description=r}return(0,s.default)(e,[{key:"toJSON",value:function(){return{fileId:this.fileId,name:this.name,description:this.description}}}]),e}();t.MediaError=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(246),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(22),f=function(){function e(t,n,r,i,o,a,u){(0,s.default)(this,e),e.isValidFileId(t)||l.handleError("wrong_file_id","Passed fileId is incorrect."),e.isValidName(n)||l.handleError("wrong_file_name","Passed file name is incorrect."),e.isValidSize(r)||l.handleError("wrong_file_size","Passed file size is incorrect."),e.isValidCreationDate(i)||l.handleError("wrong_file_date","Passed file creation date is incorrect."),e.isValidType(o)||l.handleError("wrong_file_type","Passed file type is incorrect."),this.id=t,this.name=n,this.size=r,this.creationDate=i,this.type=o,this.publicId=a,this.resumableFile=u}return(0,c.default)(e,[{key:"toJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId,chunks:this.chunks,toPureJSON:this.toPureJSON.bind(this)}}},{key:"toPureJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId}}},{key:"_isImage",value:function(){return new o.default(["image/png","image/jpeg","image/jpg","image/gif"]).has(this.type)}},{key:"chunks",get:function(){return this.resumableFile?this.resumableFile.chunks:void 0}},{key:"raw",get:function(){return this.resumableFile?this.resumableFile.file:void 0}},{key:"preview",get:function(){return this._isImage()?this.raw:void 0}}],[{key:"isValidFileId",value:function(e){return"string"==typeof e&&e.length>0}},{key:"isValidName",value:function(e){return"string"==typeof e}},{key:"isValidType",value:function(e){return"string"==typeof e}},{key:"isValidSize",value:function(e){return"number"==typeof e&&e>=0}},{key:"isValidCreationDate",value:function(e){return"number"==typeof e&&e>0}}]),e}();t.MediaFile=f},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUploadParams={collection:void 0,fetchMetadata:!0,autoFinalize:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(270),c=n(77),l=n(22),f=n(25),d=function(){function e(t){(0,o.default)(this,e),this.context=t,this.emitter=new c.EventEmitter2({wildcard:!0})}return(0,s.default)(e,[{key:"once",value:function(e,t){this.emitter.once(e,t)}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"onAny",value:function(e){this.emitter.onAny(e)}},{key:"addListener",value:function(e,t){this.emitter.addListener(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"removeListener",value:function(e,t){this.emitter.removeListener(e,t)}},{key:"removeAllListeners",value:function(e){this.emitter.removeAllListeners(e)}},{key:"emit",value:function(e,t){return this.emitter.emit(e,t)}},{key:"emitUploadsStart",value:function(e){this.emit("uploads-start",{files:e.map(function(e){return e.toJSON()})})}},{key:"emitUploadStart",value:function(e){this.emit("upload-start",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileUploadStarted)}},{key:"emitUploadProgress",value:function(e,t){this.emit("upload-status-update",{file:e.toJSON(),progress:t})}},{key:"emitUploadFinalizeReady",value:function(e,t){this.emit("upload-finalize-ready",{file:e.toJSON(),finalize:t})}},{key:"emitUploadPreviewUpdate",value:function(e,t){this.emit("upload-preview-update",{file:e.toJSON(),preview:t})}},{key:"emitUploadProcessing",value:function(e){this.emit("upload-processing",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileProcessingStarted)}},{key:"emitUploadEnd",value:function(e,t){this.emit("upload-end",{file:e.toJSON(),public:t}),this.context.trackEvent(new f.MPFileUploadEnded)}},{key:"emitUploadError",value:function(e,t){this.emit("upload-error",{file:e.toJSON(),error:t.toJSON()})}},{key:"getStaticAssetUrl",value:function(e){return void 0===u.html[e]&&l.handleError("wrong_static_asset","The passet static asset does not exist"),!0===u.usingVersions?u.baseUrl+"/"+u.version+"/"+u.html[e]:u.baseUrl+"/"+u.html[e]}}]),e}();t.MPComponent=d},function(e,t,n){e.exports={default:n(272),__esModule:!0}},function(e,t,n){"use strict";var r=n(135),i=n(136),o=n(278),a=n(27),s=n(57),u=n(38),c=n(279),l=n(90),f=n(287),d=n(8)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t){e.exports=!0},function(e,t,n){var r=n(13),i=n(36),o=n(54),a=n(27),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(84),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(13),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(13).document&&document.documentElement},function(e,t,n){var r=n(58),i=n(8)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r,i,o,a=n(54),s=n(300),u=n(143),c=n(87),l=n(13),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete m[e]},"process"==n(58)(f)?r=function(e){f.nextTick(a(y,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){var r=n(307);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){/*!
	  * domready (c) Dustin Diaz 2014 - License MIT
	  */
!function(t,n){e.exports=function(){var e,t=[],n=document,r=n.documentElement.doScroll,i=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return i||n.addEventListener("DOMContentLoaded",e=function(){for(n.removeEventListener("DOMContentLoaded",e),i=1;e=t.shift();)e()}),function(e){i?setTimeout(e,0):t.push(e)}}()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHTML=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]}},function(e,t,n){e.exports=n(150)},function(e,t,n){"use strict";function r(e,t,n){if(!t)return{binary:i.BinaryUploader,browser:o.Browser,clipboard:a.Clipboard,dropzone:s.Dropzone,popup:u.Popup}[e];var r={trackEvent:f};switch(e){case"binary":return new i.BinaryUploader(r,t);case"browser":return new o.Browser(r,t,n);case"clipboard":return new a.Clipboard(r,t);case"dropzone":return new s.Dropzone(r,t,n);case"popup":return new u.Popup(r,t,n);default:var c="The component "+e+" does not exist";throw l.handleError("wrong_component",c),new Error(c)}}Object.defineProperty(t,"__esModule",{value:!0}),n(151),n(153);var i=n(155);t.BinaryUploader=i.BinaryUploader;var o=n(306);t.Browser=o.Browser;var a=n(308);t.Clipboard=a.Clipboard;var s=n(309);t.Dropzone=s.Dropzone;var u=n(313);t.Popup=u.Popup;var c=n(110),l=n(22),f=(new c.UserTracker).track();t.MediaPicker=r},function(e,t,n){var r=n(152);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,'.mpAUI{color:#333;font-family:Arial,sans-serif;font-size:14px;line-height:1.42857143}.mpAUI h2{color:#333;font-size:24px;font-weight:400;line-height:1.25;text-transform:none;margin:30px 0 0}.mpAUI .aui-dialog2-header-close img{width:16px!important;height:16px!important;position:relative;top:2px;opacity:.5}.mpAUI .aui-dialog2-header-close:hover img{opacity:1}.mpAUI .aui-dialog2{box-sizing:border-box;position:relative;left:0;right:0;visibility:hidden}.mpAUI .aui-dialog2-xlarge{width:980px;min-height:431px}.mpAUI .aui-dialog2-small .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:380px}@media (max-height:700px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large,.mpAUI .aui-dialog2-xlarge{min-height:131px;height:-120%}}@media (max-height:500px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-medium .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium{min-height:131px;height:-120%}}@media (max-width:1000px){.mpAUI .aui-dialog2-xlarge{width:100%;height:-20%}.mpAUI .aui-dialog2-xlarge.aui-layer{top:69px}.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{height:100%}}@media (max-width:820px){.mpAUI .aui-dialog2-large{width:100%;height:-20%}.mpAUI .aui-dialog2-large.aui-layer{top:69px}.mpAUI .aui-dialog2-large .aui-dialog2-content{height:100%}}@media (max-width:620px){.mpAUI .aui-dialog2-medium{width:100%;height:-20%}.mpAUI .aui-dialog2-medium.aui-layer{top:69px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{height:100%}}@media (max-width:420px){.mpAUI .aui-dialog2-small{width:100%;height:-20%}.mpAUI .aui-dialog2-small.aui-layer{top:69px}.mpAUI .aui-dialog2-small .aui-dialog2-content{height:100%}}.mpAUI .aui-dialog2-footer,.mpAUI .aui-dialog2-header{background:#f5f5f5;visibility:visible}.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-header{opacity:0;transition:opacity .2s,visibility .2s;transition-delay:0s;visibility:hidden}.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-header{opacity:1;transition:opacity .2s;transition-delay:0s;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-content{max-height:100%}.mpAUI .aui-dialog2-content{border-radius:3px;background-color:#fff;box-sizing:border-box;overflow:auto;padding:20px;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-header{margin-top:-69px}.mpAUI .aui-dialog2-header{border-bottom:1px solid #ccc;border-radius:5px 5px 0 0;box-sizing:border-box;color:#333;font-weight:400;height:69px;padding:0 20px;width:100%;display:table}.mpAUI .aui-dialog2-header-actions{width:100%}.mpAUI .aui-dialog2-header-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-main,.mpAUI .aui-dialog2-header-secondary{display:table-cell;vertical-align:middle}.mpAUI .aui-dialog2[data-aui-modal=true] .aui-dialog2-header-close{display:none}.mpAUI .aui-dialog2-footer-hint{color:#707070;line-height:31px}.mpAUI .aui-dialog2-footer-hint,.mpAUI .aui-dialog2-header-main{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:10px}.mpAUI .aui-dialog2-header-main{max-width:400px}.mpAUI .aui-dialog2-footer-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-secondary{text-align:right}.mpAUI .aui-dialog2-footer-actions{float:right}.mpAUI .aui-dialog2-header-close{width:20px;height:20px;padding-left:5px;text-align:right;vertical-align:middle;line-height:100%;cursor:pointer;color:#707070}.mpAUI .aui-iconfont-close-dialog:before{content:"\\F11B"}.mpAUI .aui-dialog2-warning .aui-dialog2-header{background-color:#d04437;border-bottom-color:#d04437;color:#fff}.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-actions a,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-close,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-main,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-secondary a{color:inherit}.mpAUI .aui-dialog2-header-close .aui-icon{vertical-align:middle}.mpAUI .aui-dialog2-footer{border-top:1px solid #ccc;box-sizing:border-box;height:51px;overflow:hidden;padding:10px 20px;width:100%;border-radius:0 0 5px 5px}.mpAUI .aui-dialog2-footer:empty{height:5px;padding:0}.mpAUI .aui-button,.mpAUI .aui-button:visited,.mpAUI a.aui-button{box-sizing:border-box;background:#f5f5f5;border:1px solid #ccc;border-radius:3.01px;color:#333;cursor:pointer;display:inline-block;font-family:inherit;font-size:14px;font-variant:normal;font-weight:400;height:2.14285714em;line-height:1.42857143;margin:0;padding:4px 10px;text-decoration:none;vertical-align:baseline;white-space:nowrap}.mpAUI .aui-button.aui-button-light,.mpAUI .aui-button:visited.aui-button-light,.mpAUI a.aui-button.aui-button-light{background:#fff}.mpAUI .aui-button~.aui-button{margin-left:10px}.mpAUI a.aui-button:active,.mpAUI a.aui-button:focus,.mpAUI a.aui-button:hover{text-decoration:none}.mpAUI .aui-button:focus,.mpAUI form.aui .button:focus,.mpAUI form.aui .cancel:focus{outline:1px dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:1px}.mpAUI .aui-button::-moz-focus-inner{border:0;padding:0}.mpAUI .aui-button-subtle.aui-button:focus,.mpAUI .aui-button-subtle.aui-button:hover,.mpAUI .aui-button:focus,.mpAUI .aui-button:hover{background:#e9e9e9;border-color:#999;color:#000;text-decoration:none}.mpAUI .aui-button.aui-button-subtle.active,.mpAUI .aui-button.aui-button-subtle:active{border-color:#999}.mpAUI .aui-button-subtle.aui-button.active,.mpAUI .aui-button-subtle.aui-button:active,.mpAUI .aui-button.active,.mpAUI .aui-button:active,.mpAUI .aui-header .aui-button-split-more.active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#f5f5f5;text-decoration:none}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(:active){border-right-color:transparent}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:active:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:focus:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:hover:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):active+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):focus+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more:before{visibility:hidden}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more{border-left:1px solid #999;margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more{margin-left:-1px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:focus,.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:hover{margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger:before{content:"";border-left:1px solid #ccc;bottom:4px;display:block;left:-1px;position:absolute;top:4px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger.aui-button-primary:before{border-color:#fff}.mpAUI .aui-button.aui-button-primary,.mpAUI .aui-button.aui-button-primary:visited{background:#3572b0;border-color:transparent;color:#fff;font-weight:700;-webkit-font-smoothing:antialiased}.mpAUI .aui-button.aui-button-primary:focus,.mpAUI .aui-button.aui-button-primary:hover{background:#2a67a5;border-color:transparent;color:#fff}.mpAUI .aui-button.aui-button-primary:active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#3572b0;text-decoration:none}.mpAUI .aui-button.aui-button-link,.mpAUI .aui-button.aui-button-link:visited,.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{background:transparent;border-color:transparent;color:#3572b0;padding:4px 0;text-decoration:none;box-shadow:none}.mpAUI .aui-button.aui-button-link:active,.mpAUI .aui-button.aui-button-link:focus,.mpAUI .aui-button.aui-button-link:hover,.mpAUI .aui-button.aui-button-text:active,.mpAUI .aui-button.aui-button-text:focus,.mpAUI .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-link:active,.mpAUI .aui-buttons .aui-button.aui-button-link:focus,.mpAUI .aui-buttons .aui-button.aui-button-link:hover,.mpAUI .aui-buttons .aui-button.aui-button-link[aria-pressed=true],.mpAUI .aui-buttons .aui-button.aui-button-text:active,.mpAUI .aui-buttons .aui-button.aui-button-text:focus,.mpAUI .aui-buttons .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-text[aria-pressed=true]{background:transparent;border-color:transparent;box-shadow:none;text-decoration:underline}.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{border:none;font-size:inherit;height:inherit;line-height:normal;padding:0}.mpAUI .aui-button.aui-button-subtle{background:transparent;border-color:transparent;color:#707070}.mpAUI .aui-buttons .aui-button.aui-button-subtle{border-radius:3.01px}.mpAUI .aui-button.aui-button-subtle .aui-icon{margin-right:1px}.mpAUI .aui-button>.aui-icon+.aui-button-label{margin-left:4px}',""])},function(e,t,n){var r=n(154);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup .aui-dialog2-large{width:845px;height:530px;position:fixed;left:calc(50% - 845px/2);top:calc(50% - 530px/2);margin:0;overflow:visible}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=function(e){function t(e,n){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"upload",value:function(e,t){var n=t||"file",r=this._urltoFile(e,n);this.uploadService.addFile(r)}},{key:"_urltoFile",value:function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/);if(!r||r.length<2)throw new Error("Failed to retrieve file from data URL");for(var i=r[1],o=atob(n[1]),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);var u=new Blob([s],{type:i});return u.name=t,u}}]),t}(p.MediaLocalUpload);t.BinaryUploader=v},function(e,t,n){n(157),e.exports=n(2).Object.getPrototypeOf},function(e,t,n){var r=n(41),i=n(91);n(158)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(5),i=n(2),o=n(18);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(160),__esModule:!0}},function(e,t,n){n(161);var r=n(2).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(5);r(r.S+r.F*!n(12),"Object",{defineProperty:n(9).f})},function(e,t,n){e.exports={default:n(163),__esModule:!0}},function(e,t,n){n(30),n(33),e.exports=n(69).f("iterator")},function(e,t,n){var r=n(64),i=n(59);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(45),i=n(43),o=n(32),a={};n(15)(a,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(9),i=n(10),o=n(46);e.exports=n(12)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(24),i=n(67),o=n(168);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(64),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(170),i=n(97),o=n(23),a=n(24);e.exports=n(65)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(172),__esModule:!0}},function(e,t,n){n(173),n(73),n(176),n(177),e.exports=n(2).Symbol},function(e,t,n){"use strict";var r=n(4),i=n(17),o=n(12),a=n(5),s=n(94),u=n(70).KEY,c=n(18),l=n(61),f=n(32),d=n(42),h=n(3),p=n(69),v=n(71),m=n(174),y=n(98),b=n(10),g=n(24),_=n(63),w=n(43),x=n(45),k=n(175),A=n(100),S=n(9),P=n(46),O=A.f,I=S.f,E=k.f,j=r.Symbol,T=r.JSON,C=T&&T.stringify,M=h("_hidden"),U=h("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),R=l("symbols"),N=l("op-symbols"),z=Object.prototype,D="function"==typeof j,B=r.QObject,H=!B||!B.prototype||!B.prototype.findChild,q=o&&c(function(){return 7!=x(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=O(z,t);r&&delete z[t],I(e,t,n),r&&e!==z&&I(z,t,r)}:I,$=function(e){var t=R[e]=x(j.prototype);return t._k=e,t},V=D&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},W=function(e,t,n){return e===z&&W(N,t,n),b(e),t=_(t,!0),b(n),i(R,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=x(n,{enumerable:w(0,!1)})):(i(e,M)||I(e,M,w(1,{})),e[M][t]=!0),q(e,t,n)):I(e,t,n)},J=function(e,t){b(e);for(var n,r=m(t=g(t)),i=0,o=r.length;o>i;)W(e,n=r[i++],t[n]);return e},K=function(e,t){return void 0===t?x(e):J(x(e),t)},G=function(e){var t=L.call(this,e=_(e,!0));return!(this===z&&i(R,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(R,e)||i(this,M)&&this[M][e])||t)},Y=function(e,t){if(e=g(e),t=_(t,!0),e!==z||!i(R,t)||i(N,t)){var n=O(e,t);return!n||!i(R,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=E(g(e)),r=[],o=0;n.length>o;)i(R,t=n[o++])||t==M||t==u||r.push(t);return r},X=function(e){for(var t,n=e===z,r=E(n?N:g(e)),o=[],a=0;r.length>a;)!i(R,t=r[a++])||n&&!i(z,t)||o.push(R[t]);return o};D||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(N,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),q(this,e,w(1,n))};return o&&H&&q(z,e,{configurable:!0,set:t}),$(e)},s(j.prototype,"toString",function(){return this._k}),A.f=Y,S.f=W,n(99).f=k.f=Q,n(47).f=G,n(72).f=X,o&&!n(44)&&s(z,"propertyIsEnumerable",G,!0),p.f=function(e){return $(h(e))}),a(a.G+a.W+a.F*!D,{Symbol:j});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)h(Z[ee++]);for(var te=P(h.store),ne=0;te.length>ne;)v(te[ne++]);a(a.S+a.F*!D,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=j(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!D,"Object",{create:K,defineProperty:W,defineProperties:J,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Q,getOwnPropertySymbols:X}),T&&a(a.S+a.F*(!D||c(function(){var e=j();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!V(t))return t}),r[1]=t,C.apply(T,r)}}}),j.prototype[U]||n(15)(j.prototype,U,j.prototype.valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(46),i=n(72),o=n(47);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(24),i=n(99).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){n(71)("asyncIterator")},function(e,t,n){n(71)("observable")},function(e,t,n){e.exports={default:n(179),__esModule:!0}},function(e,t,n){n(180),e.exports=n(2).Object.setPrototypeOf},function(e,t,n){var r=n(5);r(r.S,"Object",{setPrototypeOf:n(181).set})},function(e,t,n){var r=n(11),i=n(10),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(14)(Function.call,n(100).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(183),__esModule:!0}},function(e,t,n){n(184);var r=n(2).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(5);r(r.S,"Object",{create:n(45)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(21),s=r(a),u=n(196),c=r(u),l=n(50),f=r(l),d=n(0),h=r(d),p=n(1),v=r(p);Object.defineProperty(t,"__esModule",{value:!0});var m=n(206),y=n(51),b=n(77),g=n(22),_=n(211),w=n(111),x=n(128),k=n(129),A=n(261),S=n(131),P=n(262),O=n(83),I=n(267),E=n(268),j=function(){function e(t,n,r){var i=this;(0,h.default)(this,e),this.uploads={},this.retry=0,this.emit=function(e,t){i.emitter.emit(e,t)},this.getQueryParameters=function(e,t){var n=i.getMediaClient(e),r=n.storedAuth;if(r)return(0,f.default)({hash:t.hash},w.mapAuthToQueryParameters(r));throw new Error("auth required")},this.generateTarget=function(e){var t=e.map(function(e){return e.split("=")}).reduce(function(e,t){var n=(0,c.default)(t,2),r=n[0],i=n[1];return e[r]=i,e},{}),n=t.hash,r=t.resumableCurrentChunkSize,o=t.client,a=t.issuer,s=t.token,u=void 0;return u=a?"issuer="+a+"&token="+s:"client="+o+"&token="+s,i.uploadChunkUrl+"/"+n+"-"+r+"?"+u},this.onFilesAdded=function(e){if(0!==e.length){var t=i.uploadParams;e.forEach(function(e){i.uploads[e.uniqueIdentifier]={creationDate:Date.now(),uploadParams:t}});var n=t.collection;i.mediaClientPool.getMediaClient(n).refreshAuth().then(function(){i.retry=0;var t=e.map(function(e){return i.mapResumableFileToMediaFile(e)});i.emit("files-added",{files:t}),t.forEach(function(e){return i.emit("file-added",{file:e})}),i.resumable.upload()},function(){e.forEach(function(e){return i.onError(e,x.ERROR_NAMES.TOKEN_FETCH_FAIL)}),e.forEach(function(e){return e.cancel()}),e.forEach(i.cleanupResumableFile)})}},this.onChunkingComplete=function(e){e.chunks.forEach(function(t){var n=t.callback;t.callback=function(t,r){return"error"===t?(i.retry++,e.abort(),e.pause(!0),void i.resumable.fire("fileError",e,r||"")):("success"===t&&(i.retry=0),void n(t,r))}})},this.onFileProgress=function(e){var t=e.progress(),n=i.mapResumableFileToMediaFile(e);if(t>0&&t<1){var r=new A.MediaProgress(n.size,n.size*t,n.creationDate,Date.now());i.emit("file-uploading",{file:n,progress:r})}},this.onFileSuccess=function(e){return i.getResumableFileUploadParams(e).autoFinalize?void i.finalizeFile(e):void i.emit("file-finalize-ready",{file:i.mapResumableFileToMediaFile(e),finalize:function(){i.finalizeFile(e)}})},this.onFileError=function(e,t){var n=i.getMediaClient(e);i.onUploadError(e,x.ERROR_NAMES.UPLOAD_FAIL,t,n).then(function(){e._prevProgress=0,e.pause(!1),e.chunks.forEach(function(e){"error"===e.status()&&(e.preprocessState=0,e.send()),"pending"===e.status()&&2===e.preprocessState&&(e.preprocessState=0)})}).catch(function(){e.cancel()})},this.onDrop=function(e){e.preventDefault(),e.stopPropagation(),i.emit("file-dropped",e)},this.mapResumableFileToMediaFile=function(e,t){return new k.MediaFile(e.uniqueIdentifier,e.file.name,e.file.size,i.getResumableFileCreationDate(e),e.file.type,t,e)},this.getResumableFileCreationDate=function(e){return i.uploads[e.uniqueIdentifier].creationDate},this.getResumableFileUploadParams=function(e){return i.uploads[e.uniqueIdentifier].uploadParams},this.cleanupResumableFile=function(e){delete i.uploads[e.uniqueIdentifier]},this.emitter=new b.EventEmitter2,this.uploadChunkUrl=t+"/chunk",this.mediaClientPool=new I.MediaClientPool(t,n),this.api=new E.MediaApi,this.setUploadParams(r),this.resumable=new m({target:this.generateTarget,uploadMethod:"PUT",testMethod:"HEAD",chunkSize:4194304,chunkRetryInterval:2500,maxChunkRetries:5,simultaneousUploads:3,forceChunkSize:!0,permanentErrors:[400,403,404,415,500,501],method:"octet",minFileSize:0,query:this.getQueryParameters,preprocess:function(t){return e.hasher.hash(t)},generateUniqueIdentifier:function(){return y.v4()}}),this.resumable.on("filesAdded",this.onFilesAdded),this.resumable.on("chunkingComplete",this.onChunkingComplete),this.resumable.on("fileProgress",this.onFileProgress),this.resumable.on("fileSuccess",this.onFileSuccess),this.resumable.on("fileError",this.onFileError)}return(0,v.default)(e,[{key:"setUploadParams",value:function(e){this.uploadParams=(0,f.default)({},S.defaultUploadParams,e)}},{key:"getUploadParams",value:function(){return this.uploadParams}},{key:"addBrowse",value:function(e){this.resumable.assignBrowse(e)}},{key:"addDropzone",value:function(e){this.dropzoneElement||(this.dropzoneElement=e,this.dropzoneElement.addEventListener("drop",this.onDrop),this.resumable.assignDrop(this.dropzoneElement))}},{key:"removeDropzone",value:function(){this.dropzoneElement&&(this.dropzoneElement.removeEventListener("drop",this.onDrop),this.resumable.unAssignDrop(this.dropzoneElement),this.dropzoneElement=void 0)}},{key:"addFile",value:function(e){this.resumable.addFile(e)}},{key:"cancel",value:function(e){if(e){var t=this.resumable.getFromUniqueIdentifier(e);t&&t.cancel()}else this.resumable.cancel()}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"getMediaClient",value:function(e){var t=this.getResumableFileUploadParams(e),n=t.collection;return this.mediaClientPool.getMediaClient(n)}},{key:"finalizeFile",value:function(e){var t=this,n=e.fileName,r=e.file,i=this.getResumableFileUploadParams(e),o=i.collection,a=e.chunks.map(function(e){return e.hash+"-"+(e.endByte-e.startByte)}),s=this.getMediaClient(e);this.api.createUpload(s).then(function(e){return t.appendChunksToUpload(s,e,a,1e3)}).then(function(e){return t.api.createFileFromUpload(s,n,r.type,e,o)}).then(function(n){return t.processFile(s,n,e)}).catch(function(n){t.onError(e,x.ERROR_NAMES.OBJ_CREATE_FAIL,n)})}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i=this;return _.sliceByChunks(n,r).map(function(n,o){var a=o*r;return function(){return i.api.appendChunksToUpload(e,t,n,a)}}).reduce(function(e,t){return e.then(t)},s.default.resolve()).then(function(){return t})}},{key:"processFile",value:function(e,t,n){var r=this;return this.fetchFileMetadata(e,t,n).then(function(e){var t=r.mapResumableFileToMediaFile(n,e.id),i=new A.MediaProgress(t.size,t.size,t.creationDate,Date.now());r.emit("file-converted",{file:t,progress:i,metadata:e})}).catch(function(e){r.onError(n,x.ERROR_NAMES.METADATA_FETCH_FAIL,e)})}},{key:"fetchFileMetadata",value:function(e,t,n){var r=this.getResumableFileUploadParams(n),i=r.collection;return r.fetchMetadata?(this.emit("file-converting",{file:this.mapResumableFileToMediaFile(n,t)}),this.api.pollForFileMetadata(e,t,i)):s.default.resolve({id:t})}},{key:"onUploadError",value:function(e,t,n,r){var i=this;return new s.default(function(o,a){var s=e.uniqueIdentifier,u=void 0;try{u=JSON.parse(n)}catch(e){}return O.isTokenError(u)&&i.retry<=1?void r.refreshAuth().then(function(){return o()}).catch(function(){i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,x.ERROR_NAMES.TOKEN_UPDATE_FAIL,n)}),g.handleError(t,n),a()}):(u&&u.error&&u.error.title&&(n=u.error.title),i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,t,n)}),g.handleError(t,n),a(),void 0)})}},{key:"onError",value:function(e,t,n){var r=void 0;r=n&&n.error&&n.error.title?n.error.title:(0,o.default)(n||{}),this.emit("file-upload-error",{file:this.mapResumableFileToMediaFile(e),error:new x.MediaError(e.uniqueIdentifier,t,r)}),g.handleError(t,r)}}]),e}();j.hasher=P.createHasher(),t.UploadService=j},function(e,t,n){var r=n(2),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(73),n(30),n(33),n(188),n(194),n(195),e.exports=n(2).Promise},function(e,t,n){"use strict";var r,i,o,a,s=n(44),u=n(4),c=n(14),l=n(49),f=n(5),d=n(11),h=n(29),p=n(74),v=n(34),m=n(103),y=n(104).set,b=n(192)(),g=n(75),_=n(105),w=n(106),x=u.TypeError,k=u.process,A=u.Promise,S="process"==l(k),P=function(){},O=i=g.f,I=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(P,P)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t}catch(e){}}(),E=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;b(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&M(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(x("Promise-chain cycle")):(o=E(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){y.call(u,function(){var t,n,r,i=e._v,o=C(e);if(o&&(t=_(function(){S?k.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=S||C(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},C=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!C(t.promise))return!1;return!0},M=function(e){y.call(u,function(){var t;S?k.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=E(e))?b(function(){var r={_w:n,_d:!1};try{t.call(e,c(L,r,1),c(U,r,1))}catch(e){U.call(r,e)}}):(n._v=e,n._s=1,j(n,!1))}catch(e){U.call({_w:n,_d:!1},e)}}};I||(A=function(e){p(this,A,"Promise","_h"),h(e),r.call(this);try{e(c(L,this,1),c(U,this,1))}catch(e){U.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(76)(A.prototype,{then:function(e,t){var n=O(m(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(L,e,1),this.reject=c(U,e,1)},g.f=O=function(e){return e===A||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:A}),n(32)(A,"Promise"),n(107)("Promise"),a=n(2).Promise,f(f.S+f.F*!I,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(e){return w(s&&this===a?A:this,e)}}),f(f.S+f.F*!(I&&n(193)(function(e){A.all(e).catch(P)})),"Promise",{all:function(e){var t=this,n=O(t),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=_(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(23),i=n(3)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(4),i=n(104).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(31)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(3)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5),i=n(2),o=n(4),a=n(103),s=n(106);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(5),i=n(75),o=n(105);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;
var i=n(197),o=r(i),a=n(200),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(198),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(199)},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){e.exports={default:n(201),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(202)},function(e,t,n){var r=n(10),i=n(102);e.exports=n(2).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){n(204),e.exports=n(2).Object.assign},function(e,t,n){var r=n(5);r(r.S+r.F,"Object",{assign:n(205)})},function(e,t,n){"use strict";var r=n(46),i=n(72),o=n(47),a=n(41),s=n(66),u=Object.assign;e.exports=!u||n(18)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var d,h=s(arguments[c++]),p=l?r(h).concat(l(h)):r(h),v=p.length,m=0;v>m;)f.call(h,d=p[m++])&&(n[d]=h[d]);return n}:u},function(e,t,n){!function(){"use strict";var t=function(e){function n(e,t,n){var i=this;i.opts={},i.getOpt=e.getOpt,i._prevProgress=0,i.resumableObj=e,i.file=t,i.fileName=t.fileName||t.name,i.size=t.size,i.relativePath=t.webkitRelativePath||t.relativePath||i.fileName,i.uniqueIdentifier=n,i._pause=!1,i.container="";var a=void 0!==n,s=function(e,t){switch(e){case"progress":i.resumableObj.fire("fileProgress",i);break;case"error":i.abort(),a=!0,i.chunks=[],i.resumableObj.fire("fileError",i,t);break;case"success":if(a)return;i.resumableObj.fire("fileProgress",i),i.isComplete()&&i.resumableObj.fire("fileSuccess",i,t);break;case"retry":i.resumableObj.fire("fileRetry",i)}};return i.chunks=[],i.abort=function(){var e=0;o.each(i.chunks,function(t){"uploading"==t.status()&&(t.abort(),e++)}),e>0&&i.resumableObj.fire("fileProgress",i)},i.cancel=function(){var e=i.chunks;i.chunks=[],o.each(e,function(e){"uploading"==e.status()&&(e.abort(),i.resumableObj.uploadNextChunk())}),i.resumableObj.removeFile(i),i.resumableObj.fire("fileProgress",i)},i.retry=function(){i.bootstrap();var e=!1;i.resumableObj.on("chunkingComplete",function(){e||i.resumableObj.upload(),e=!0})},i.bootstrap=function(){i.abort(),a=!1,i.chunks=[],i._prevProgress=0;for(var e=i.getOpt("forceChunkSize")?Math.ceil:Math.floor,t=Math.max(e(i.file.size/i.getOpt("chunkSize")),1),n=0;n<t;n++)!function(e){window.setTimeout(function(){i.chunks.push(new r(i.resumableObj,i,e,s)),i.resumableObj.fire("chunkingProgress",i,e/t)},0)}(n);window.setTimeout(function(){i.resumableObj.fire("chunkingComplete",i)},0)},i.progress=function(){if(a)return 1;var e=0,t=!1;return o.each(i.chunks,function(n){"error"==n.status()&&(t=!0),e+=n.progress(!0)}),e=t?1:e>.99999?1:e,e=Math.max(i._prevProgress,e),i._prevProgress=e,e},i.isUploading=function(){var e=!1;return o.each(i.chunks,function(t){if("uploading"==t.status())return e=!0,!1}),e},i.isComplete=function(){var e=!1;return o.each(i.chunks,function(t){var n=t.status();if("pending"==n||"uploading"==n||1===t.preprocessState)return e=!0,!1}),!e},i.pause=function(e){i._pause=void 0===e?!i._pause:e},i.isPaused=function(){return i._pause},i.resumableObj.fire("chunkingStart",i),i.bootstrap(),this}function r(e,t,n,r){var i=this;i.opts={},i.getOpt=e.getOpt,i.resumableObj=e,i.fileObj=t,i.fileObjSize=t.size,i.fileObjType=t.file.type,i.offset=n,i.callback=r,i.lastProgressCallback=new Date,i.tested=!1,i.retries=0,i.pendingRetry=!1,i.preprocessState=0;var a=i.getOpt("chunkSize");return i.loaded=0,i.startByte=i.offset*a,i.endByte=Math.min(i.fileObjSize,(i.offset+1)*a),i.fileObjSize-i.endByte<a&&!i.getOpt("forceChunkSize")&&(i.endByte=i.fileObjSize),i.xhr=null,i.test=function(){i.xhr=new XMLHttpRequest;var e=function(e){i.tested=!0;var t=i.status();"success"==t?(i.callback(t,i.message()),i.resumableObj.uploadNextChunk()):i.send()};i.xhr.addEventListener("load",e,!1),i.xhr.addEventListener("error",e,!1),i.xhr.addEventListener("timeout",e,!1);var t=[],n=i.getOpt("parameterNamespace"),r=i.getOpt("query");"function"==typeof r&&(r=r(i.fileObj,i)),o.each(r,function(e,r){t.push([encodeURIComponent(n+e),encodeURIComponent(r)].join("="))}),t.push([n+"resumableChunkNumber",encodeURIComponent(i.offset+1)].join("=")),t.push([n+"resumableChunkSize",encodeURIComponent(i.getOpt("chunkSize"))].join("=")),t.push([n+"resumableCurrentChunkSize",encodeURIComponent(i.endByte-i.startByte)].join("=")),t.push([n+"resumableTotalSize",encodeURIComponent(i.fileObjSize)].join("=")),t.push([n+"resumableType",encodeURIComponent(i.fileObjType)].join("=")),t.push([n+"resumableIdentifier",encodeURIComponent(i.fileObj.uniqueIdentifier)].join("=")),t.push([n+"resumableFilename",encodeURIComponent(i.fileObj.fileName)].join("=")),t.push([n+"resumableRelativePath",encodeURIComponent(i.fileObj.relativePath)].join("=")),t.push([n+"resumableTotalChunks",encodeURIComponent(i.fileObj.chunks.length)].join("=")),i.xhr.open(i.getOpt("testMethod"),o.getTarget(t)),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var a=i.getOpt("headers");"function"==typeof a&&(a=a(i.fileObj,i)),o.each(a,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(null)},i.preprocessFinished=function(){i.preprocessState=2,i.send()},i.send=function(){var e=i.getOpt("preprocess");if("function"==typeof e)switch(i.preprocessState){case 0:return i.preprocessState=1,void e(i);case 1:return}if(i.getOpt("testChunks")&&!i.tested)return void i.test();i.xhr=new XMLHttpRequest,i.xhr.upload.addEventListener("progress",function(e){new Date-i.lastProgressCallback>1e3*i.getOpt("throttleProgressCallbacks")&&(i.callback("progress"),i.lastProgressCallback=new Date),i.loaded=e.loaded||0},!1),i.loaded=0,i.pendingRetry=!1,i.callback("progress");var t=function(e){var t=i.status();if("success"==t||"error"==t)i.callback(t,i.message()),i.resumableObj.uploadNextChunk();else{i.callback("retry",i.message()),i.abort(),i.retries++;var n=i.getOpt("chunkRetryInterval");void 0!==n?(i.pendingRetry=!0,setTimeout(i.send,n)):i.send()}};i.xhr.addEventListener("load",t,!1),i.xhr.addEventListener("error",t,!1),i.xhr.addEventListener("timeout",t,!1);var n={resumableChunkNumber:i.offset+1,resumableChunkSize:i.getOpt("chunkSize"),resumableCurrentChunkSize:i.endByte-i.startByte,resumableTotalSize:i.fileObjSize,resumableType:i.fileObjType,resumableIdentifier:i.fileObj.uniqueIdentifier,resumableFilename:i.fileObj.fileName,resumableRelativePath:i.fileObj.relativePath,resumableTotalChunks:i.fileObj.chunks.length},r=i.getOpt("query");"function"==typeof r&&(r=r(i.fileObj,i)),o.each(r,function(e,t){n[e]=t});var a=i.fileObj.file.slice?"slice":i.fileObj.file.mozSlice?"mozSlice":i.fileObj.file.webkitSlice?"webkitSlice":"slice",s=i.fileObj.file[a](i.startByte,i.endByte),u=null,c=i.getOpt("target"),l=i.getOpt("parameterNamespace");if("octet"===i.getOpt("method")){u=s;var f=[];o.each(n,function(e,t){f.push([encodeURIComponent(l+e),encodeURIComponent(t)].join("="))}),c=o.getTarget(f)}else u=new FormData,o.each(n,function(e,t){u.append(l+e,t)}),u.append(l+i.getOpt("fileParameterName"),s);var d=i.getOpt("uploadMethod");i.xhr.open(d,c),"octet"===i.getOpt("method")&&i.xhr.setRequestHeader("Content-Type","binary/octet-stream"),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var h=i.getOpt("headers");"function"==typeof h&&(h=h(i.fileObj,i)),o.each(h,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(u)},i.abort=function(){i.xhr&&i.xhr.abort(),i.xhr=null},i.status=function(){return i.pendingRetry?"uploading":i.xhr?i.xhr.readyState<4?"uploading":200==i.xhr.status||201==i.xhr.status?"success":o.contains(i.getOpt("permanentErrors"),i.xhr.status)||i.retries>=i.getOpt("maxChunkRetries")?"error":(i.abort(),"pending"):"pending"},i.message=function(){return i.xhr?i.xhr.responseText:""},i.progress=function(e){void 0===e&&(e=!1);var t=e?(i.endByte-i.startByte)/i.fileObjSize:1;if(i.pendingRetry)return 0;switch(i.status()){case"success":case"error":return 1*t;case"pending":return 0*t;default:return i.loaded/(i.endByte-i.startByte)*t}},this}if(!(this instanceof t))return new t(e);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var i=this;i.files=[],i.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:void 0,chunkRetryInterval:void 0,permanentErrors:[400,404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,maxFilesErrorCallback:function(e,t){var n=i.getOpt("maxFiles");alert("Please upload no more than "+n+" file"+(1===n?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too small, please upload files larger than "+o.formatSize(i.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too large, please upload files less than "+o.formatSize(i.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.fileName||e.name+" has type not allowed, please upload files of type "+i.getOpt("fileType")+".")}},i.opts=e||{},i.getOpt=function(e){var i=this;if(e instanceof Array){var a={};return o.each(e,function(e){a[e]=i.getOpt(e)}),a}if(i instanceof r){if(void 0!==i.opts[e])return i.opts[e];i=i.fileObj}if(i instanceof n){if(void 0!==i.opts[e])return i.opts[e];i=i.resumableObj}if(i instanceof t)return void 0!==i.opts[e]?i.opts[e]:i.defaults[e]},i.events=[],i.on=function(e,t){i.events.push(e.toLowerCase(),t)},i.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var n=e[0].toLowerCase(),t=0;t<=i.events.length;t+=2)i.events[t]==n&&i.events[t+1].apply(i,e.slice(1)),"catchall"==i.events[t]&&i.events[t+1].apply(null,e);"fileerror"==n&&i.fire("error",e[2],e[1]),"fileprogress"==n&&i.fire("progress")};var o={stopEvent:function(e){e.stopPropagation(),e.preventDefault()},each:function(e,t){if(void 0!==e.length){for(var n=0;n<e.length;n++)if(!1===t(e[n]))return}else for(n in e)if(!1===t(n,e[n]))return},generateUniqueIdentifier:function(e){var t=i.getOpt("generateUniqueIdentifier");if("function"==typeof t)return t(e);var n=e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(e,t){var n=!1;return o.each(e,function(e){return e!=t||(n=!0,!1)}),n},formatSize:function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(e){var t=i.getOpt("target");return"function"==typeof t?t(e):(t+=t.indexOf("?")<0?"?":"&",t+e.join("&"))}},a=function(e){o.stopEvent(e),e.dataTransfer&&e.dataTransfer.items?u(e.dataTransfer.items,e):e.dataTransfer&&e.dataTransfer.files&&u(e.dataTransfer.files,e)},s=function(e){e.preventDefault()},u=function(e,t,n,r){n||(n={total:0,files:[],event:t}),c(e.length,n);for(var i=0;i<e.length;i++){var o,a,s=e[i];if(s.isFile||s.isDirectory)o=s;else if(s.getAsEntry)o=s.getAsEntry();else{if(!s.webkitGetAsEntry){if("function"==typeof s.getAsFile){l(s.getAsFile(),n,r);continue}if(File&&s instanceof File){l(s,n,r);continue}c(-1,n);continue}o=s.webkitGetAsEntry()}if(o){if(o.isFile)o.file(function(e){l(e,n,r)},function(e){console.warn(e)});else if(o.isDirectory){a=o.createReader();var f=[],d=function(e){a.readEntries(function(r){if(r.length>0){for(var i=0;i<r.length;i++)f.push(r[i]);d(o.fullPath)}else u(f,t,n,e),c(-1,n)},function(e){c(-1,n),console.warn(e)})};d(o.fullPath)}}else c(-1,n)}},c=function(e,t){t.total+=e,t.files.length===t.total&&f(t.files,t.event)},l=function(e,t,n){n&&(e.relativePath=n+"/"+e.name),t.files.push(e),t.files.length===t.total&&f(t.files,t.event)},f=function(e,t){var r=0,a=i.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if(void 0!==a.maxFiles&&a.maxFiles<e.length+i.files.length){if(1!==a.maxFiles||1!==i.files.length||1!==e.length)return a.maxFilesErrorCallback(e,r++),!1;i.removeFile(i.files[0])}var s=[];o.each(e,function(e){function u(r){i.getFromUniqueIdentifier(r)||function(){e.uniqueIdentifier=r;var o=new n(i,e,r);i.files.push(o),s.push(o),o.container=void 0!==t?t.srcElement:null,window.setTimeout(function(){i.fire("fileAdded",o,t)},0)}()}var c=e.name;if(a.fileType.length>0){var l=!1;for(var f in a.fileType){var d="."+a.fileType[f];if(-1!==c.indexOf(d,c.length-d.length)){l=!0;break}}if(!l)return a.fileTypeErrorCallback(e,r++),!1}if(void 0!==a.minFileSize&&e.size<a.minFileSize)return a.minFileSizeErrorCallback(e,r++),!1;if(void 0!==a.maxFileSize&&e.size>a.maxFileSize)return a.maxFileSizeErrorCallback(e,r++),!1;var h=o.generateUniqueIdentifier(e);h&&"function"==typeof h.done&&"function"==typeof h.fail?h.done(function(e){u(e)}).fail(function(){u()}):u(h)}),window.setTimeout(function(){i.fire("filesAdded",s)},0)};return i.uploadNextChunk=function(){var e=!1;if(i.getOpt("prioritizeFirstAndLastChunk")&&(o.each(i.files,function(t){return t.chunks.length&&"pending"==t.chunks[0].status()&&0===t.chunks[0].preprocessState?(t.chunks[0].send(),e=!0,!1):t.chunks.length>1&&"pending"==t.chunks[t.chunks.length-1].status()&&0===t.chunks[t.chunks.length-1].preprocessState?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return!0;if(o.each(i.files,function(t){if(!1===t.isPaused()&&o.each(t.chunks,function(t){if("pending"==t.status()&&0===t.preprocessState)return t.send(),e=!0,!1}),e)return!1}),e)return!0;var t=!1;return o.each(i.files,function(e){if(!e.isComplete())return t=!0,!1}),t||i.fire("complete"),!1},i.assignBrowse=function(e,t){void 0===e.length&&(e=[e]),o.each(e,function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:(n=document.createElement("input"),n.setAttribute("type","file"),n.style.display="none",e.addEventListener("click",function(){n.style.opacity=0,n.style.display="block",n.focus(),n.click(),n.style.display="none"},!1),e.appendChild(n));var r=i.getOpt("maxFiles");void 0===r||1!=r?n.setAttribute("multiple","multiple"):n.removeAttribute("multiple"),t?n.setAttribute("webkitdirectory","webkitdirectory"):n.removeAttribute("webkitdirectory"),n.addEventListener("change",function(e){f(e.target.files,e),e.target.value=""},!1)})},i.assignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.addEventListener("dragover",s,!1),e.addEventListener("dragenter",s,!1),e.addEventListener("drop",a,!1)})},i.unAssignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.removeEventListener("dragover",s),e.removeEventListener("dragenter",s),e.removeEventListener("drop",a)})},i.isUploading=function(){var e=!1;return o.each(i.files,function(t){if(t.isUploading())return e=!0,!1}),e},i.upload=function(){if(!i.isUploading()){i.fire("uploadStart");for(var e=1;e<=i.getOpt("simultaneousUploads");e++)i.uploadNextChunk()}},i.pause=function(){o.each(i.files,function(e){e.abort()}),i.fire("pause")},i.cancel=function(){for(var e=i.files.length-1;e>=0;e--)i.files[e].cancel();i.fire("cancel")},i.progress=function(){var e=0,t=0;return o.each(i.files,function(n){e+=n.progress()*n.size,t+=n.size}),t>0?e/t:0},i.addFile=function(e,t){f([e],t)},i.removeFile=function(e){for(var t=i.files.length-1;t>=0;t--)i.files[t]===e&&i.files.splice(t,1)},i.getFromUniqueIdentifier=function(e){var t=!1;return o.each(i.files,function(n){n.uniqueIdentifier==e&&(t=n)}),t},i.getSize=function(){var e=0;return o.each(i.files,function(t){e+=t.size}),e},this};e.exports=t}()},function(e,t,n){function r(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:u,f=void 0!==e.msecs?e.msecs:(new Date).getTime(),d=void 0!==e.nsecs?e.nsecs:l+1,h=f-c+(d-l)/1e4;if(h<0&&void 0===e.clockseq&&(a=a+1&16383),(h<0||f>c)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=d,u=a,f+=122192928e5;var p=(1e4*(268435455&f)+d)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var v=f/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var m=e.node||s,y=0;y<6;++y)i[r+y]=m[y];return t||o(i)}var i=n(108),o=n(109),a=i(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]],u=16383&(a[6]<<8|a[7]),c=0,l=0;e.exports=r},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||o(a)}var i=n(108),o=n(109);e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l={internalStorage:{storage:{},getItem:function(e){return this.storage[e]},setItem:function(e,t){this.storage[e]=t},clear:function(){this.storage={}}},getLocalStorage:function(){return window.localStorage},getSessionStorage:function(){return window.sessionStorage},getInternalStorage:function(){return this.internalStorage},getStorage:function(){try{var e=this.getLocalStorage();if(e)return e;var t=this.getSessionStorage();if(t)return t}catch(e){return this.getInternalStorage()}},isCORSRequest:function(e){var t=document.createElement("a");return t.href=e,t.host!==window.location.host},getCookieValue:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}},f=function(){function e(t){var n=this;(0,s.default)(this,e),this.STORAGE_KEY_PREAMBLE="herment",this.MAXEVENTS=100,this.PUBLISH_INTERVAL=5e3,this.SAVE_INTERVAL=1e3,this.isStarted=!1,this.config=this.parseConfig(t),this.storage=l.getStorage(),window.addEventListener("unload",function(){return n.moveQueueToStorage()})}return(0,c.default)(e,[{key:"getAtlPath",value:function(){return l.getCookieValue("__atl_path")}},{key:"getServerName",value:function(){return document.location.hostname}},{key:"getProductNameFromServerName",value:function(e){return void 0!==e?e.replace(".com","").replace(".net","").replace(".org","").replace(".au","").replace(".io",""):"-"}},{key:"getSubdomain",value:function(e){if(e.match(/^([a-z0-9\.]*)[\-\.]{1}([a-z0-9]+)+\.([a-z]{2,6})$/i)){var t=e.split(".");if(t=2===t[t.length-1].length?t.slice(0,t.length-3):t.slice(0,t.length-2),0!==t.length)return t.join(".")}return"-"}},{key:"generateRandomStorageKey",value:function(){var e=(Math.random()+"").slice(2,12),t=(Math.random()+"").slice(2,12);return e.concat(t)}},{key:"ajaxPost",value:function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json, text/javascript, */*;"),n.send(t)}},{key:"parseConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window,n=t.AJS?t.AJS.EventQueue:[],r=e.queue||n,i=e.analyticsscheme||"https",o=e.analyticsserver||"analytics.atlassian.com",a=e.analyticsurl||"/analytics/events",s=e.server||this.getServerName();return{queue:r,gasScheme:i,gasServer:o,gasUrl:a,serverName:s,productName:e.product||this.getProductNameFromServerName(s),subProductName:e.subproduct||this.getSubdomain(s)||"-",version:e.version,session:e.session,sen:e.sen,sourceIP:e.sourceIP,atlPath:e.atlpath||this.getAtlPath(),post:e.ajax||this.ajaxPost,maxevents:e.maxevents||this.MAXEVENTS,storageKey:e.storage_key||this.STORAGE_KEY_PREAMBLE+this.generateRandomStorageKey()+this.generateRandomStorageKey(),user:e.user||"default",publishInterval:e.publish_interval||this.PUBLISH_INTERVAL,saveInterval:e.save_interval||this.SAVE_INTERVAL}}},{key:"pushToServer",value:function(e,t){var n=this.config,r=n.gasScheme,i=n.gasServer,a=n.gasUrl;(t||this.config.post)(r+"://"+i+a,(0,o.default)({events:e}))}},{key:"addEventsToArray",value:function(e,t,n){if(n&&n.server&&n.product&&n.subproduct&&n.user)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(t.length>=this.config.maxevents)return;if(i.name&&i.properties){var o={name:i.name,properties:i.properties,serverTime:i.time||(new Date).getTime(),server:n.server,user:n.user,product:n.product,subproduct:n.subproduct,version:n.version,session:n.session,sen:n.sen,sourceIP:n.sourceIP,atlPath:n.atlPath};t.push(o)}}}},{key:"publishFromQueueAndStorage",value:function(e){try{var t=e||this.pushToServer.bind(this),n=[];if(this.config.queue.length<1&&(void 0===this.storage||this.storage.length<1))return;var r={server:this.config.serverName,user:this.config.user,product:this.config.productName,subproduct:this.config.subProductName,version:this.config.version,session:this.config.session,sen:this.config.sen,sourceIP:this.config.sourceIP,atlPath:this.config.atlPath};this.addEventsToArray(this.config.queue,n,r);var i=this.popEventsFromStorage();this.addEventsToArray(i,n,r),this.config.queue.length=0,n&&n.length&&t(n)}catch(e){}}},{key:"serialiseEventsToString",value:function(e){return(0,o.default)(e)}},{key:"deserialiseEvents",value:function(e){return JSON.parse(e)}},{key:"storeEvents",value:function(e){if(this.storage)try{if(this.storage[this.config.storageKey]){var t=this.deserialiseEvents(this.storage[this.config.storageKey])||[];t.length<this.config.maxevents&&t.push.apply(t,e),e=t}this.storage.setItem(this.config.storageKey,this.serialiseEventsToString(e))}catch(e){}}},{key:"popEventsFromStorage",value:function(){if(!this.storage)return[];try{if(this.storage[this.config.storageKey]){var e=this.deserialiseEvents(this.storage[this.config.storageKey]);return this.storage[this.config.storageKey]=this.serialiseEventsToString([]),e}}catch(e){}return[]}},{key:"moveQueueToStorage",value:function(){0!==this.config.queue.length&&this.storage&&(this.storeEvents(this.config.queue),this.config.queue.length=0)}},{key:"start",value:function(){var e=this;this.isStarted=!0;var t=Array.prototype.push;this.config.queue.push=function(n){n.time=(new Date).getTime(),t.call(e.config.queue,n)},this.initialSaveTimeout=setTimeout(this.publishFromQueueAndStorage.bind(this),this.config.saveInterval),this.publishInterval=setInterval(this.publishFromQueueAndStorage.bind(this),this.config.publishInterval),this.saveInterval=setInterval(this.moveQueueToStorage.bind(this),this.config.saveInterval)}},{key:"stop",value:function(){this.isStarted=!1,this.publishFromQueueAndStorage(),clearTimeout(this.initialSaveTimeout),clearInterval(this.saveInterval),clearInterval(this.publishInterval)}},{key:"destroy",value:function(){this.stop()}}]),e}(),d=void 0,h=function(){return function(e){return d?(d.stop(),void(d.config=d.parseConfig(e))):d=new f(e)}}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sliceByChunks=function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(213)),r(n(112)),r(n(214)),r(n(216)),r(n(113)),r(n(122))},function(e,t,n){"use strict";function r(e,t){return{type:"FETCHING_COLLECTION_SUCCEEDED",collection:e,hasNextPage:t}}function i(e){return{type:"FETCHING_COLLECTION_FAILED",error:e}}Object.defineProperty(t,"__esModule",{value:!0});var o;!function(e){e[e.click=0]="click",e[e.delete=1]="delete",e[e.download=2]="download",e[e.retry=3]="retry",e[e.custom=4]="custom"}(o=t.CardActionType||(t.CardActionType={})),t.CardClick=function(e){return{type:o.click,handler:e}},t.CardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.ListCardClick=function(e){return{type:o.click,handler:e}},t.ListCardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.CollectionCardClick=function(e){return{type:o.click,handler:e}},t.fetchingCollectionSucceeded=r,t.fetchingCollectionFailed=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(215);t.DefaultMediaStateManager=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=function(){function e(){this.subscribers={},this.state=new Map}return e.prototype.getState=function(e){return this.state.get(e)},e.prototype.updateState=function(e,t){var n=this.subscribers[e],i=r.__assign({},this.state.get(e)||{},t);this.state.set(e,i),void 0!==n&&Array.from(n).forEach(function(e){return e.call(e,i)})},e.prototype.subscribe=function(e,t){var n=this.subscribers,r=n[e];void 0===r&&(r=[],n[e]=r),r.indexOf(t)>-1||r.push(t)},e.prototype.unsubscribe=function(e,t){var n=this.subscribers[e];if(void 0!==n){var r=n.indexOf(t);r>-1&&n.splice(r,1)}},e.prototype.destroy=function(){this.subscribers={}},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26);n(217),n(218);var i=n(113),o=n(242),a=n(244),s=n(124),u=n(245),c=n(127),l=200,f=function(){function e(){}return e.create=function(e){return new d(e)},e}();t.ContextFactory=f;var d=function(){function e(e){this.config=e,this.collectionPool=o.RemoteMediaCollectionProviderFactory.createPool(),this.itemPool=i.MediaItemProvider.createPool(),this.urlPreviewPool=i.MediaUrlPreviewProvider.createPool(),this.fileItemCache=new u.LRUCache(e.cacheSize||l)}return e.prototype.getMediaItemProvider=function(e,t,n,o){var a=o&&"link"===o.type,s=o&&"file"===o.type&&"pending"!==o.details.processingStatus;if(o&&(a||s))return{observable:function(){return r.Observable.of(o)}};var u=i.MediaItemProvider.fromPool(this.itemPool,this.apiConfig,this.fileItemCache,t,e,n);return o?{observable:function(){return u.observable().startWith(o)}}:u},e.prototype.getMediaCollectionProvider=function(e,t){return void 0===t&&(t=c.DEFAULT_COLLECTION_PAGE_SIZE),o.RemoteMediaCollectionProviderFactory.fromPool(this.collectionPool,this.apiConfig,e,t)},e.prototype.getDataUriService=function(e){return new a.MediaDataUriService(this.config.authProvider,this.config.serviceHost,e)},e.prototype.getUrlPreviewProvider=function(e){return i.MediaUrlPreviewProvider.fromPool(this.urlPreviewPool,this.apiConfig,e)},e.prototype.addLinkItem=function(e,t,n){return new s.MediaLinkService(this.apiConfig).addLinkItem(e,t,n)},e.prototype.refreshCollection=function(e,t){this.getMediaCollectionProvider(e,t).refresh()},Object.defineProperty(e.prototype,"apiConfig",{get:function(){return{serviceHost:this.config.serviceHost,authProvider:this.config.authProvider}},enumerable:!0,configurable:!0}),e}()},function(e,t){e.exports=n(56)},function(e,t){e.exports=n(62)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t){this.config=e,this.fileItemCache=t}return t.prototype.getFileItem=function(t,n){var i=this,o=[t,"file"].join("-"),a=this.fileItemCache.get(o);return a?e.resolve(a):r.default({config:this.config,collectionName:n,preventPreflight:!0})({url:"/file/"+t}).then(function(e){return e.data}).then(function(e){var t={type:"file",details:{id:e.id,mediaType:e.mediaType,mimeType:e.mimeType,name:e.name,processingStatus:e.processingStatus,size:e.size,artifacts:e.artifacts}};return"succeeded"===e.processingStatus&&i.fileItemCache.set(o,t),t})},t}();t.MediaFileService=i}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(6),o=n(117),a=n(221),s=n(81),u=r(s);u.Axios=a,u.create=function(e){return r(i.merge(s,e))},u.Cancel=n(121),u.CancelToken=n(235),u.isCancel=n(120),u.all=function(e){return t.all(e)},u.spread=n(236),e.exports=u,e.exports.default=u}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(81),o=n(6),a=n(230),s=n(231),u=n(233),c=n(234);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url));var n=[s,void 0],r=t.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},o.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(119);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(6);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&void 0!==e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){
var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(6);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";(function(t){function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(6),o=n(232),a=n(120),s=n(81);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(n){return a(n)||(r(e),n&&n.response&&(n.response.data=o(n.response.data,n.response.headers,e.transformResponse))),t.reject(n)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t,n){"use strict";(function(t){function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new t(function(e){n=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),n(r.reason))})}var i=n(121);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImageRemote=function(e,t){if(void 0===t&&(t=window.location.origin),URL&&URL.prototype){var n=new URL(e);return!!n.host&&n.origin!==t}return!0}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n;t.checkWebpSupport=function(){return void 0!==n?e.resolve(n):new e(function(e){var t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=function(){n=2===t.height,e(n)}})}}).call(t,n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=n(123),o=n(82),a=n(125),s=function(){function e(){}return e.fromMediaApi=function(e,t,n,o,a){switch(n){case"file":return r.FileProvider.fromMediaApi(e,t,o,a,r.FILE_PROVIDER_RETRY_INTERVAL);case"link":return i.LinkProvider.fromMediaApi(e,o,a);default:throw new Error("invalid media type "+n)}},e.fromPool=function(t,n,r,i,o,s){return{observable:function(){var u=[i,o,s].join("-");return a.observableFromObservablePool(t,u,function(){return e.fromMediaApi(n,r,i,o,s).observable()})}}},e.createPool=function(){return new o.Pool},e}();t.MediaItemProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(126),o=n(82),a=n(125),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.fromMediaApi=function(e,t){return i.UrlPreviewProvider.fromMediaApi(e,t)},t.fromPool=function(e,n,r){return{observable:function(){return a.observableFromObservablePool(e,r,function(){return t.fromMediaApi(n,r).observable()})}}},t.createPool=function(){return new o.Pool},t}(i.UrlPreviewProvider);t.MediaUrlPreviewProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getUrlPreview=function(e){return r.default({config:this.config})({url:"/link/preview",params:{url:e}}).then(function(e){var t=e.data,n=t.preview,r=t.previewError;if(r)throw new Error(r.code+": "+r.name);return n})},e}();t.MediaUrlPreviewService=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),i=n(127),o=n(243),a=n(82),s=function(){function e(){}return e.fromCollectionService=function(e,t,n,i){return void 0===i&&(i="desc"),new r.RemoteMediaCollectionProvider(e,t,n,i)},e.fromMediaAPI=function(t,n,r,o){return void 0===o&&(o="desc"),e.fromCollectionService(new i.MediaCollectionService(t),n,r,o)},e.fromPool=function(e,t,n,a,s){void 0===s&&(s="desc");var u=[n,a,s].join("-"),c=function(){var e=new i.MediaCollectionService(t);return new r.RemoteMediaCollectionProvider(e,n,a,s)};return o.mediaCollectionProviderFromPool(e,u,c)},e.createPool=function(){return new a.Pool},e}();t.RemoteMediaCollectionProviderFactory=s},function(e,t,n){"use strict";function r(e,t,n){return e.acquire(t,function(){var r=n(),o=r.observable;return r.observable=function(){return new i.Observable(function(n){var i=o.bind(r)(),a=i.subscribe(n);return function(){a.unsubscribe(),e.release(t)}})},r})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.mediaCollectionProviderFromPool=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t,n){this.authProvider=e,this.serviceHost=t,this.collectionName=n,this.request=r.default({config:{serviceHost:this.serviceHost,authProvider:this.authProvider},collectionName:this.collectionName})}return t.prototype.fetchOriginalDataUri=function(e){return this.fetchSomeDataUri("/file/"+e.details.id+"/binary",{"max-age":3600,collection:this.collectionName})},t.prototype.fetchImageDataUri=function(e,t,n,r){return void 0===r&&(r="crop"),this.fetchSomeDataUri("/file/"+e.details.id+"/image",{width:t,height:n,mode:r,"max-age":3600,collection:this.collectionName})},t.prototype.fetchSomeDataUri=function(e,t){return this.request({url:e,params:t,responseType:"image"}).then(this.readBlob)},t.prototype.readBlob=function(t){return new e(function(e,n){var r=new FileReader;r.addEventListener("load",function(){return e(r.result)}),r.addEventListener("error",function(){return n(r.error)}),r.readAsDataURL(t)})},t}();t.MediaDataUriService=i}).call(t,n(7))},function(e,t){function n(e){this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap={}}n.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},n.prototype.put=function(e,t){var n=this._keymap[e];return n?(n.value=t,void this._markEntryAsUsed(n)):(this._keymap[e]=n={key:e,value:t,older:void 0,newer:void 0},this.newest?(this.newest.newer=n,n.older=this.newest):this.oldest=n,this.newest=n,this.size++,this.size>this.limit?this.shift():void 0)},n.prototype.shift=function(){var e=this.oldest;return e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),e.newer=e.older=void 0,delete this._keymap[e.key],this.size--),e},n.prototype.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return this._markEntryAsUsed(n),t?n:n.value},n.prototype.find=function(e){return this._keymap[e]},n.prototype.set=function(e,t){var n,r=this.get(e,!0);return r?(n=r.value,r.value=t):(n=this.put(e,t))&&(n=n.value),n},n.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.oldest=t.newer):t.older?(t.older.newer=void 0,this.newest=t.older):this.oldest=this.newest=void 0,this.size--,t.value},n.prototype.removeAll=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?n.prototype.keys=function(){return Object.keys(this._keymap)}:n.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},n.prototype.forEach=function(e,t,n){var r;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(r=this.newest;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.oldest;r;)e.call(t,r.key,r.value,this),r=r.newer},n.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,n=this.oldest;n;)e[t++]={key:n.key,value:n.value},n=n.newer;return e},n.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=n)},function(e,t,n){e.exports={default:n(247),__esModule:!0}},function(e,t,n){n(73),n(30),n(33),n(248),n(254),n(257),n(259),e.exports=n(2).Set},function(e,t,n){"use strict";var r=n(249),i=n(130);e.exports=n(250)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r=n(9).f,i=n(45),o=n(76),a=n(14),s=n(74),u=n(34),c=n(65),l=n(97),f=n(107),d=n(12),h=n(70).fastKey,p=n(130),v=d?"_s":"size",m=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=m(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(p(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return p(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(70),a=n(18),s=n(15),u=n(76),c=n(34),l=n(74),f=n(11),d=n(32),h=n(9).f,p=n(251)(0),v=n(12);e.exports=function(e,t,n,m,y,b){var g=r[e],_=g,w=y?"set":"add",x=_&&_.prototype,k={};return v&&"function"==typeof _&&(b||x.forEach&&!a(function(){(new _).entries().next()}))?(_=t(function(t,n){l(t,_,e,"_c"),t._c=new g,void 0!=n&&c(n,y,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!b||"clear"!=e)&&s(_.prototype,e,function(n,r){if(l(this,_,e),!t&&b&&!f(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),b||h(_.prototype,"size",{get:function(){return this._c.size}})):(_=m.getConstructor(t,e,y,w),u(_.prototype,n),o.NEED=!0),d(_,e),k[e]=_,i(i.G+i.W+i.F,k),b||m.setStrong(_,e,y),_}},function(e,t,n){var r=n(14),i=n(66),o=n(41),a=n(67),s=n(252);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var v,m,y=o(t),b=i(y),g=r(s,p,3),_=a(b.length),w=0,x=n?h(t,_):u?h(t,0):void 0;_>w;w++)if((d||w in b)&&(v=b[w],m=g(v,w,y),e))if(n)x[w]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:x.push(v)}else if(l)return!1;return f?-1:c||l?l:x}}},function(e,t,n){var r=n(253);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(11),i=n(98),o=n(3)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(5);r(r.P+r.R,"Set",{toJSON:n(255)("Set")})},function(e,t,n){var r=n(49),i=n(256);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(34);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(258)("Set")},function(e,t,n){"use strict";var r=n(5);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(260)("Set")},function(e,t,n){"use strict";var r=n(5),i=n(29),o=n(14),a=n(34);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(22),c=function(){function e(t,n,r,i){return(0,o.default)(this,e),this.size=t,this.progress=n,this.startTime=r,this.measureTime=i,e.isValidSize(t)?e.isValidProgress(t,n)?e.isValidStartTime(r)?e.isValidMeasureTime(r,i)?(this.size=t,this.progress=n,this.startTime=r,void(this.measureTime=i)):void u.handleError("wrong_measure_time","The progress measure time has incorrect format."):void u.handleError("wrong_start_time","The progress start time has incorrect format."):void u.handleError("wrong_progress","The progress format is incorrect."):void u.handleError("wrong_file_size","Passed file size is incorrect.")}return(0,s.default)(e,[{key:"toJSON",value:function(){return{absolute:this.absolute,portion:this.portion,max:this.max,overallTime:this.overallTime,expectedFinishTime:this.expectedFinishTime,timeLeft:this.timeLeft}}},{key:"absolute",get:function(){return this.progress}},{key:"portion",get:function(){return this.progress/this.size}},{key:"max",get:function(){return this.size}},{key:"overallTime",get:function(){return(this.measureTime-this.startTime)/this.portion}},{key:"expectedFinishTime",get:function(){return this.startTime+this.overallTime}},{key:"timeLeft",get:function(){return this.expectedFinishTime-this.measureTime}}],[{key:"isValidSize",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidProgress",value:function(t,n){return e.isValidSize(t)&&"number"==typeof n&&n>=0&&n<=t}},{key:"isValidStartTime",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidMeasureTime",value:function(t,n){return e.isValidStartTime(t)&&"number"==typeof n&&n>=t}}]),e}();t.MediaProgress=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(263),i=n(265);t.createHasher=function(){var e=void 0;try{e=new i.WorkerHasher(3)}catch(t){e=new r.SimpleHasher}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(264),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"hash",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=new FileReader;r.onload=function(t){var n=t.target.result;e.hash=new u(4194304).digestFromArrayBuffer(n),e.preprocessFinished()},r.readAsArrayBuffer(n)}}]),e}();t.SimpleHasher=c},function(e,t,n){(function(t){!function(){function n(e){"use strict";for(var t={fill:0},o=function(e){for(e+=9;e%64>0;e+=1);return e},a=function(e,t){var n=new Uint8Array(e.buffer),r=t%4,i=t-r;switch(r){case 0:n[i+3]=0;case 1:n[i+2]=0;case 2:n[i+1]=0;case 3:n[i+0]=0}for(var o=1+(t>>2);o<e.length;o++)e[o]=0},s=function(e,t,n){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=n/(1<<29)|0,e[15+(2+(t>>2)&-16)]=n<<3},u=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a.charCodeAt(n+3);case 1:e[i+1-(s<<1)|0]=a.charCodeAt(n+2);case 2:e[i+2-(s<<1)|0]=a.charCodeAt(n+1);case 3:e[i+3-(s<<1)|0]=a.charCodeAt(n)}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2]=a.charCodeAt(n+o)<<24|a.charCodeAt(n+o+1)<<16|a.charCodeAt(n+o+2)<<8|a.charCodeAt(n+o+3);switch(u){case 3:e[i+c+1|0]=a.charCodeAt(n+c+2);case 2:e[i+c+2|0]=a.charCodeAt(n+c+1);case 1:e[i+c+3|0]=a.charCodeAt(n+c)}}},c=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a[n+3];case 1:e[i+1-(s<<1)|0]=a[n+2];case 2:e[i+2-(s<<1)|0]=a[n+1];case 3:e[i+3-(s<<1)|0]=a[n]}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2|0]=a[n+o]<<24|a[n+o+1]<<16|a[n+o+2]<<8|a[n+o+3];switch(u){case 3:e[i+c+1|0]=a[n+c+2];case 2:e[i+c+2|0]=a[n+c+1];case 1:e[i+c+3|0]=a[n+c]}}},l=function(e,t,n,r,o){var a,s=this,u=o%4,c=(r+u)%4,l=r-c,f=new Uint8Array(i.readAsArrayBuffer(s.slice(n,n+r)));switch(u){case 0:e[o]=f[3];case 1:e[o+1-(u<<1)|0]=f[2];case 2:e[o+2-(u<<1)|0]=f[1];case 3:e[o+3-(u<<1)|0]=f[0]}if(!(r<c+u)){for(a=4-u;a<l;a=a+4|0)t[o+a>>2|0]=f[a]<<24|f[a+1]<<16|f[a+2]<<8|f[a+3];switch(c){case 3:e[o+l+1|0]=f[l+2];case 2:e[o+l+2|0]=f[l+1];case 1:e[o+l+3|0]=f[l]}}},f=function(e){switch(r.getDataType(e)){case"string":return u.bind(e);case"array":case"buffer":return c.bind(e);case"arraybuffer":return c.bind(new Uint8Array(e));case"view":return c.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return l.bind(e)}},d=new Array(256),h=0;h<256;h++)d[h]=(h<16?"0":"")+h.toString(16);var p=function(e){for(var t=new Uint8Array(e),n=new Array(e.byteLength),r=0;r<n.length;r++)n[r]=d[t[r]];return n.join("")},v=function(e){var t;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t};!function(e){if(e%64>0)throw new Error("Chunk size must be a multiple of 128 bit");t.offset=0,t.maxChunkLen=e,t.padMaxChunkLen=o(e),t.heap=new ArrayBuffer(v(t.padMaxChunkLen+320+20)),t.h32=new Int32Array(t.heap),t.h8=new Int8Array(t.heap),t.core=new n._core({Int32Array:Int32Array,DataView:DataView},{},t.heap),t.buffer=null}(e||65536);var m=function(e,n){t.offset=0;var r=new Int32Array(e,n+320,5);r[0]=1732584193,r[1]=-271733879,r[2]=-1732584194,r[3]=271733878,r[4]=-1009589776},y=function(e,n){var r=o(e),i=new Int32Array(t.heap,0,r>>2);return a(i,e),s(i,e,n),r},b=function(e,n,r,i){f(e)(t.h8,t.h32,n,r,i||0)},g=function(e,n,r,i,o){var a=r;b(e,n,r),o&&(a=y(r,i)),t.core.hash(a,t.padMaxChunkLen)},_=function(e,t){var n=new Int32Array(e,t+320,5),r=new Int32Array(5),i=new DataView(r.buffer);return i.setInt32(0,n[0],!1),i.setInt32(4,n[1],!1),i.setInt32(8,n[2],!1),i.setInt32(12,n[3],!1),i.setInt32(16,n[4],!1),r},w=this.rawDigest=function(e){var n=e.byteLength||e.length||e.size||0;m(t.heap,t.padMaxChunkLen);var r=0,i=t.maxChunkLen;for(r=0;n>r+i;r+=i)g(e,r,i,n,!1);return g(e,r,n-r,n,!0),_(t.heap,t.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return p(w(e).buffer)},this.resetState=function(){return m(t.heap,t.padMaxChunkLen),this},this.append=function(e){var n,r=0,i=e.byteLength||e.length||e.size||0,o=t.offset%t.maxChunkLen;for(t.offset+=i;r<i;)n=Math.min(i-r,t.maxChunkLen-o),b(e,r,n,o),o+=n,r+=n,o===t.maxChunkLen&&(t.core.hash(t.maxChunkLen,t.padMaxChunkLen),o=0);return this},this.getState=function(){var e;if(t.offset%t.maxChunkLen)e=t.heap.slice(0);else{var n=new Int32Array(t.heap,t.padMaxChunkLen+320,5);e=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}return{offset:t.offset,heap:e}},this.setState=function(e){return t.offset=e.offset,20===e.heap.byteLength?new Int32Array(t.heap,t.padMaxChunkLen+320,5).set(new Int32Array(e.heap)):t.h32.set(new Int32Array(e.heap)),this};var x=this.rawEnd=function(){var e=t.offset,n=e%t.maxChunkLen,r=y(n,e);t.core.hash(r,t.padMaxChunkLen);var i=_(t.heap,t.padMaxChunkLen);return m(t.heap,t.padMaxChunkLen),i};this.end=function(){return p(x().buffer)}}var r={getDataType:function(e){if("string"==typeof e)return"string";if(e instanceof Array)return"array";if(void 0!==t&&t.Buffer&&t.Buffer.isBuffer(e))return"buffer";if(e instanceof ArrayBuffer)return"arraybuffer";if(e.buffer instanceof ArrayBuffer)return"view";if(e instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(n._core=function(e,t,n){"use asm";var r=new e.Int32Array(n);function i(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0,d=0,h=0,p=0,v=0,m=0;o=r[t+320>>2]|0;s=r[t+324>>2]|0;c=r[t+328>>2]|0;f=r[t+332>>2]|0;h=r[t+336>>2]|0;for(n=0;(n|0)<(e|0);n=n+64|0){a=o;u=s;l=c;d=f;p=h;for(i=0;(i|0)<64;i=i+4|0){m=r[n+i>>2]|0;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[e+i>>2]=m}for(i=e+64|0;(i|0)<(e+80|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+80|0;(i|0)<(e+160|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)+1859775393|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+160|0;(i|0)<(e+240|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|s&f|c&f)|0)+((m+h|0)-1894007588|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+240|0;(i|0)<(e+320|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)-899497514|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}o=o+a|0;s=s+u|0;c=c+l|0;f=f+d|0;h=h+p|0}r[t+320>>2]=o;r[t+324>>2]=s;r[t+328>>2]=c;r[t+332>>2]=f;r[t+336>>2]=h}return{hash:i}},e.exports=n,"undefined"!=typeof FileReaderSync){var i=new FileReaderSync,o=function(e,t,n){try{return n(null,e.digest(t))}catch(e){return n(e)}},a=function(e,t,n,r,i){var o=new self.FileReader;o.onloadend=function(){var s=o.result;t+=o.result.byteLength;try{e.append(s)}catch(e){return void i(e)}t<r.size?a(e,t,n,r,i):i(null,e.end())},o.readAsArrayBuffer(r.slice(t,t+n))};self.onmessage=function(e){var t=e.data.data,r=e.data.file,i=e.data.id;if(void 0!==i&&(r||t)){var s=e.data.blockSize||4194304,u=new n(s);u.resetState();var c=function(e,t){e?self.postMessage({id:i,error:e.name}):self.postMessage({id:i,hash:t})};t&&o(u,t,c),r&&a(u,0,s,r,c)}}}}()}).call(t,n(52))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(266),c=function(){function e(t){(0,o.default)(this,e),this.workers=[],this.jobs={};for(var n=0;n<t;++n)this.workers.push(this.createWorker())}return(0,s.default)(e,[{key:"hash",value:function(e){this.calculateHashInWorker(e)}},{key:"createWorker",value:function(){var e=this,t=new Blob([u]),n=URL.createObjectURL(t),r=new Worker(n),i={worker:r,activeJobs:0};return r.addEventListener("message",function(t){e.handleWorkerMessage(t,i)}),i}},{key:"handleWorkerMessage",value:function(e,t){var n=e.data.id,r=this.jobs[n];r&&(delete this.jobs[n],t.activeJobs--,e.data.error?this.calculateHashInWorker(r):(r.hash=e.data.hash,r.preprocessFinished()))}},{key:"calculateHashInWorker",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=e.fileObj.fileName+e.fileObjSize+e.startByte;this.jobs[r]=e;var i=this.getWorker();this.dispatch(r,i,n)}},{key:"dispatch",value:function(e,t,n){t.activeJobs++;var r=t.worker;if(navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")){var i=new FileReader;return i.onload=function(){r.postMessage({id:e,data:i.result})},void i.readAsBinaryString(n)}r.postMessage({id:e,data:n})}},{key:"getWorker",value:function(){return this.workers.reduce(function(e,t){return t.activeJobs<e.activeJobs?t:e},this.workers[0])}}]),e}();t.WorkerHasher=c},function(e,t){e.exports="(function () {\n    var /*\n * Rusha, a JavaScript implementation of the Secure Hash Algorithm, SHA-1,\n * as defined in FIPS PUB 180-1, tuned for high performance with large inputs.\n * (http://github.com/srijs/rusha)\n *\n * Inspired by Paul Johnstons implementation (http://pajhome.org.uk/crypt/md5).\n *\n * Copyright (c) 2013 Sam Rijs (http://awesam.de).\n * Released under the terms of the MIT license as follows:\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n    util = {\n        getDataType: function (data) {\n            if (typeof data === 'string') {\n                return 'string';\n            }\n            if (data instanceof Array) {\n                return 'array';\n            }\n            if (typeof global !== 'undefined' && global.Buffer && global.Buffer.isBuffer(data)) {\n                return 'buffer';\n            }\n            if (data instanceof ArrayBuffer) {\n                return 'arraybuffer';\n            }\n            if (data.buffer instanceof ArrayBuffer) {\n                return 'view';\n            }\n            if (data instanceof Blob) {\n                return 'blob';\n            }\n            throw new Error('Unsupported data type.');\n        }\n    };\n    function Rusha(chunkSize) {\n        'use strict';\n        var // Private object structure.\n        self$2 = { fill: 0 };\n        var // Calculate the length of buffer that the sha1 routine uses\n        // including the padding.\n        padlen = function (len) {\n            for (len += 9; len % 64 > 0; len += 1);\n            return len;\n        };\n        var padZeroes = function (bin, len) {\n            var h8 = new Uint8Array(bin.buffer);\n            var om = len % 4, align = len - om;\n            switch (om) {\n            case 0:\n                h8[align + 3] = 0;\n            case 1:\n                h8[align + 2] = 0;\n            case 2:\n                h8[align + 1] = 0;\n            case 3:\n                h8[align + 0] = 0;\n            }\n            for (var i$2 = (len >> 2) + 1; i$2 < bin.length; i$2++)\n                bin[i$2] = 0;\n        };\n        var padData = function (bin, chunkLen, msgLen) {\n            bin[chunkLen >> 2] |= 128 << 24 - (chunkLen % 4 << 3);\n            // To support msgLen >= 2 GiB, use a float division when computing the\n            // high 32-bits of the big-endian message length in bits.\n            bin[((chunkLen >> 2) + 2 & ~15) + 14] = msgLen / (1 << 29) | 0;\n            bin[((chunkLen >> 2) + 2 & ~15) + 15] = msgLen << 3;\n        };\n        var // Convert a binary string and write it to the heap.\n        // A binary string is expected to only contain char codes < 256.\n        convStr = function (H8, H32, start, len, off) {\n            var str = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = str.charCodeAt(start + 3);\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = str.charCodeAt(start + 2);\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = str.charCodeAt(start + 1);\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = str.charCodeAt(start);\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2] = str.charCodeAt(start + i$2) << 24 | str.charCodeAt(start + i$2 + 1) << 16 | str.charCodeAt(start + i$2 + 2) << 8 | str.charCodeAt(start + i$2 + 3);\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = str.charCodeAt(start + j + 2);\n            case 2:\n                H8[off + j + 2 | 0] = str.charCodeAt(start + j + 1);\n            case 1:\n                H8[off + j + 3 | 0] = str.charCodeAt(start + j);\n            }\n        };\n        var // Convert a buffer or array and write it to the heap.\n        // The buffer or array is expected to only contain elements < 256.\n        convBuf = function (H8, H32, start, len, off) {\n            var buf = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = buf[start + 3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[start + 2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[start + 1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[start];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[start + i$2] << 24 | buf[start + i$2 + 1] << 16 | buf[start + i$2 + 2] << 8 | buf[start + i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[start + j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[start + j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[start + j];\n            }\n        };\n        var convBlob = function (H8, H32, start, len, off) {\n            var blob = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            var buf = new Uint8Array(reader.readAsArrayBuffer(blob.slice(start, start + len)));\n            switch (om) {\n            case 0:\n                H8[off] = buf[3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[0];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[i$2] << 24 | buf[i$2 + 1] << 16 | buf[i$2 + 2] << 8 | buf[i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[j];\n            }\n        };\n        var convFn = function (data) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return convStr.bind(data);\n            case 'array':\n                return convBuf.bind(data);\n            case 'buffer':\n                return convBuf.bind(data);\n            case 'arraybuffer':\n                return convBuf.bind(new Uint8Array(data));\n            case 'view':\n                return convBuf.bind(new Uint8Array(data.buffer, data.byteOffset, data.byteLength));\n            case 'blob':\n                return convBlob.bind(data);\n            }\n        };\n        var slice = function (data, offset) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return data.slice(offset);\n            case 'array':\n                return data.slice(offset);\n            case 'buffer':\n                return data.slice(offset);\n            case 'arraybuffer':\n                return data.slice(offset);\n            case 'view':\n                return data.buffer.slice(offset);\n            }\n        };\n        var // Precompute 00 - ff strings\n        precomputedHex = new Array(256);\n        for (var i = 0; i < 256; i++) {\n            precomputedHex[i] = (i < 16 ? '0' : '') + i.toString(16);\n        }\n        var // Convert an ArrayBuffer into its hexadecimal string representation.\n        hex = function (arrayBuffer) {\n            var binarray = new Uint8Array(arrayBuffer);\n            var res = new Array(arrayBuffer.byteLength);\n            for (var i$2 = 0; i$2 < res.length; i$2++) {\n                res[i$2] = precomputedHex[binarray[i$2]];\n            }\n            return res.join('');\n        };\n        var ceilHeapSize = function (v) {\n            // The asm.js spec says:\n            // The heap object's byteLength must be either\n            // 2^n for n in [12, 24) or 2^24 * n for n  1.\n            // Also, byteLengths smaller than 2^16 are deprecated.\n            var p;\n            if (// If v is smaller than 2^16, the smallest possible solution\n                // is 2^16.\n                v <= 65536)\n                return 65536;\n            if (// If v < 2^24, we round up to 2^n,\n                // otherwise we round up to 2^24 * n.\n                v < 16777216) {\n                for (p = 1; p < v; p = p << 1);\n            } else {\n                for (p = 16777216; p < v; p += 16777216);\n            }\n            return p;\n        };\n        var // Initialize the internal data structures to a new capacity.\n        init = function (size) {\n            if (size % 64 > 0) {\n                throw new Error('Chunk size must be a multiple of 128 bit');\n            }\n            self$2.offset = 0;\n            self$2.maxChunkLen = size;\n            self$2.padMaxChunkLen = padlen(size);\n            // The size of the heap is the sum of:\n            // 1. The padded input message size\n            // 2. The extended space the algorithm needs (320 byte)\n            // 3. The 160 bit state the algoritm uses\n            self$2.heap = new ArrayBuffer(ceilHeapSize(self$2.padMaxChunkLen + 320 + 20));\n            self$2.h32 = new Int32Array(self$2.heap);\n            self$2.h8 = new Int8Array(self$2.heap);\n            self$2.core = new Rusha._core({\n                Int32Array: Int32Array,\n                DataView: DataView\n            }, {}, self$2.heap);\n            self$2.buffer = null;\n        };\n        // Iinitializethe datastructures according\n        // to a chunk siyze.\n        init(chunkSize || 64 * 1024);\n        var initState = function (heap, padMsgLen) {\n            self$2.offset = 0;\n            var io = new Int32Array(heap, padMsgLen + 320, 5);\n            io[0] = 1732584193;\n            io[1] = -271733879;\n            io[2] = -1732584194;\n            io[3] = 271733878;\n            io[4] = -1009589776;\n        };\n        var padChunk = function (chunkLen, msgLen) {\n            var padChunkLen = padlen(chunkLen);\n            var view = new Int32Array(self$2.heap, 0, padChunkLen >> 2);\n            padZeroes(view, chunkLen);\n            padData(view, chunkLen, msgLen);\n            return padChunkLen;\n        };\n        var // Write data to the heap.\n        write = function (data, chunkOffset, chunkLen, off) {\n            convFn(data)(self$2.h8, self$2.h32, chunkOffset, chunkLen, off || 0);\n        };\n        var // Initialize and call the RushaCore,\n        // assuming an input buffer of length len * 4.\n        coreCall = function (data, chunkOffset, chunkLen, msgLen, finalize) {\n            var padChunkLen = chunkLen;\n            write(data, chunkOffset, chunkLen);\n            if (finalize) {\n                padChunkLen = padChunk(chunkLen, msgLen);\n            }\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n        };\n        var getRawDigest = function (heap, padMaxChunkLen) {\n            var io = new Int32Array(heap, padMaxChunkLen + 320, 5);\n            var out = new Int32Array(5);\n            var arr = new DataView(out.buffer);\n            arr.setInt32(0, io[0], false);\n            arr.setInt32(4, io[1], false);\n            arr.setInt32(8, io[2], false);\n            arr.setInt32(12, io[3], false);\n            arr.setInt32(16, io[4], false);\n            return out;\n        };\n        var // Calculate the hash digest as an array of 5 32bit integers.\n        rawDigest = this.rawDigest = function (str) {\n            var msgLen = str.byteLength || str.length || str.size || 0;\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            var chunkOffset = 0, chunkLen = self$2.maxChunkLen;\n            for (chunkOffset = 0; msgLen > chunkOffset + chunkLen; chunkOffset += chunkLen) {\n                coreCall(str, chunkOffset, chunkLen, msgLen, false);\n            }\n            coreCall(str, chunkOffset, msgLen - chunkOffset, msgLen, true);\n            return getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n        };\n        // The digest and digestFrom* interface returns the hash digest\n        // as a hex string.\n        this.digest = this.digestFromString = this.digestFromBuffer = this.digestFromArrayBuffer = function (str) {\n            return hex(rawDigest(str).buffer);\n        };\n        this.resetState = function () {\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return this;\n        };\n        this.append = function (chunk) {\n            var chunkOffset = 0;\n            var chunkLen = chunk.byteLength || chunk.length || chunk.size || 0;\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var inputLen;\n            self$2.offset += chunkLen;\n            while (chunkOffset < chunkLen) {\n                inputLen = Math.min(chunkLen - chunkOffset, self$2.maxChunkLen - turnOffset);\n                write(chunk, chunkOffset, inputLen, turnOffset);\n                turnOffset += inputLen;\n                chunkOffset += inputLen;\n                if (turnOffset === self$2.maxChunkLen) {\n                    self$2.core.hash(self$2.maxChunkLen, self$2.padMaxChunkLen);\n                    turnOffset = 0;\n                }\n            }\n            return this;\n        };\n        this.getState = function () {\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var heap;\n            if (!turnOffset) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                heap = io.buffer.slice(io.byteOffset, io.byteOffset + io.byteLength);\n            } else {\n                heap = self$2.heap.slice(0);\n            }\n            return {\n                offset: self$2.offset,\n                heap: heap\n            };\n        };\n        this.setState = function (state) {\n            self$2.offset = state.offset;\n            if (state.heap.byteLength === 20) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                io.set(new Int32Array(state.heap));\n            } else {\n                self$2.h32.set(new Int32Array(state.heap));\n            }\n            return this;\n        };\n        var rawEnd = this.rawEnd = function () {\n            var msgLen = self$2.offset;\n            var chunkLen = msgLen % self$2.maxChunkLen;\n            var padChunkLen = padChunk(chunkLen, msgLen);\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n            var result = getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return result;\n        };\n        this.end = function () {\n            return hex(rawEnd().buffer);\n        };\n    }\n    ;\n    // The low-level RushCore module provides the heart of Rusha,\n    // a high-speed sha1 implementation working on an Int32Array heap.\n    // At first glance, the implementation seems complicated, however\n    // with the SHA1 spec at hand, it is obvious this almost a textbook\n    // implementation that has a few functions hand-inlined and a few loops\n    // hand-unrolled.\n    Rusha._core = function RushaCore(stdlib, foreign, heap) {\n        'use asm';\n        var H = new stdlib.Int32Array(heap);\n        function hash(k, x) {\n            // k in bytes\n            k = k | 0;\n            x = x | 0;\n            var i = 0, j = 0, y0 = 0, z0 = 0, y1 = 0, z1 = 0, y2 = 0, z2 = 0, y3 = 0, z3 = 0, y4 = 0, z4 = 0, t0 = 0, t1 = 0;\n            y0 = H[x + 320 >> 2] | 0;\n            y1 = H[x + 324 >> 2] | 0;\n            y2 = H[x + 328 >> 2] | 0;\n            y3 = H[x + 332 >> 2] | 0;\n            y4 = H[x + 336 >> 2] | 0;\n            for (i = 0; (i | 0) < (k | 0); i = i + 64 | 0) {\n                z0 = y0;\n                z1 = y1;\n                z2 = y2;\n                z3 = y3;\n                z4 = y4;\n                for (j = 0; (j | 0) < 64; j = j + 4 | 0) {\n                    t1 = H[i + j >> 2] | 0;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[k + j >> 2] = t1;\n                }\n                for (j = k + 64 | 0; (j | 0) < (k + 80 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 80 | 0; (j | 0) < (k + 160 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) + 1859775393 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 160 | 0; (j | 0) < (k + 240 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | y1 & y3 | y2 & y3) | 0) + ((t1 + y4 | 0) - 1894007588 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 240 | 0; (j | 0) < (k + 320 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) - 899497514 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                y0 = y0 + z0 | 0;\n                y1 = y1 + z1 | 0;\n                y2 = y2 + z2 | 0;\n                y3 = y3 + z3 | 0;\n                y4 = y4 + z4 | 0;\n            }\n            H[x + 320 >> 2] = y0;\n            H[x + 324 >> 2] = y1;\n            H[x + 328 >> 2] = y2;\n            H[x + 332 >> 2] = y3;\n            H[x + 336 >> 2] = y4;\n        }\n        return { hash: hash };\n    };\n    if (// If we'e running in Node.JS, export a module.\n        typeof module !== 'undefined') {\n        module.exports = Rusha;\n    } else if (// If we're running in a DOM context, export\n        // the Rusha object to toplevel.\n        typeof window !== 'undefined') {\n        window.Rusha = Rusha;\n    }\n    if (// If we're running in a webworker, accept\n        // messages containing a jobid and a buffer\n        // or blob object, and return the hash result.\n        typeof FileReaderSync !== 'undefined') {\n        var reader = new FileReaderSync();\n        var hashData = function hash(hasher, data, cb) {\n            try {\n                return cb(null, hasher.digest(data));\n            } catch (e) {\n                return cb(e);\n            }\n        };\n        var hashFile = function hashArrayBuffer(hasher, readTotal, blockSize, file, cb) {\n            var reader$2 = new self.FileReader();\n            reader$2.onloadend = function onloadend() {\n                var buffer = reader$2.result;\n                readTotal += reader$2.result.byteLength;\n                try {\n                    hasher.append(buffer);\n                } catch (e) {\n                    cb(e);\n                    return;\n                }\n                if (readTotal < file.size) {\n                    hashFile(hasher, readTotal, blockSize, file, cb);\n                } else {\n                    cb(null, hasher.end());\n                }\n            };\n            reader$2.readAsArrayBuffer(file.slice(readTotal, readTotal + blockSize));\n        };\n        self.onmessage = function onMessage(event) {\n            var data = event.data.data, file = event.data.file, id = event.data.id;\n            if (typeof id === 'undefined')\n                return;\n            if (!file && !data)\n                return;\n            var blockSize = event.data.blockSize || 4 * 1024 * 1024;\n            var hasher = new Rusha(blockSize);\n            hasher.resetState();\n            var done = function done$2(err, hash) {\n                if (!err) {\n                    self.postMessage({\n                        id: id,\n                        hash: hash\n                    });\n                } else {\n                    self.postMessage({\n                        id: id,\n                        error: err.name\n                    });\n                }\n            };\n            if (data)\n                hashData(hasher, data, done);\n            if (file)\n                hashFile(hasher, 0, blockSize, file, done);\n        };\n    }\n}());";
},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),a=function e(t,n){var r=this;(0,i.default)(this,e),this.apiUrl=t,this.authProvider=n,this.clients={},this.getMediaClient=function(e){return r.getStoredClient(e)||r.createNewClient(e)},this.createNewClient=function(e){var t=new o.MediaClient(r.apiUrl,r.authProvider,e);return r.setClient(t,e),t},this.getStoredClient=function(e){return void 0===e?r.clientForAbsentCollection:r.clients[e]},this.setClient=function(e,t){return void 0===t?void(r.clientForAbsentCollection=e):void(r.clients[t]=e)}};t.MediaClientPool=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(51),c=n(83),l=n(269),f=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"createUpload",value:function(e){var t={httpMethod:"POST",mediaApiMethod:"upload",parameters:{createUpTo:1,safariCacheBuster:u.v4()}};return l.retryTask(function(){return e.call(t,c.addAuthToQueryParameters).then(function(e){var t=e.data;if(0===t.length)throw new Error("No uploads were created");return t[0].id})},5,1e3,2)}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i={httpMethod:"PUT",mediaApiMethod:"upload/"+t+"/chunks",data:{chunks:n,offset:r}};return e.call(i)}},{key:"createFileFromUpload",value:function(e,t,n,r,i){var o={httpMethod:"POST",mediaApiMethod:"file/upload",parameters:i?{collection:i}:{},data:{name:t,mimeType:n,uploadId:r}};return e.call(o).then(function(e){return e.data.id})}},{key:"pollForFileMetadata",value:function(e,t,n){var r={httpMethod:"GET",mediaApiMethod:"file/"+t,parameters:n?{collection:n}:{}};return l.retryTask(function(){return e.call(r,c.addAuthToQueryParameters).then(function(e){var t=e.data;if("succeeded"===t.processingStatus||"failed"===t.processingStatus)return t;throw new Error("Processing not finished")})},10,1e3,2)}}]),e}();t.MediaApi=f},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new o.default(function(i,o){!function t(n,a){n>0?e().then(i).catch(function(e){setTimeout(function(){t(n-1,a*r)},a)}):e().then(i).catch(o)}(t,n)})}var i=n(21),o=function(e){return e&&e.__esModule?e:{default:e}}(i);Object.defineProperty(t,"__esModule",{value:!0}),t.retryTask=r},function(e,t){e.exports={baseUrl:"https://d2lmxj1uc02uys.cloudfront.net",usingVersions:!0,html:{popup:"./html/popup.html",popupInject:"./html/popup/popup.html",dropzone:"./html/dropzone.html",redirectUrl:"./html/link-account-handler/handler.html",userMethodsHelperUrl:"./html/user-methods-helper/helper.html"},version:"11.1.11"}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(305);t.default=function(e){return new i.default(function(t,n){o.fileToBase64(e).then(function(e){var r=new Image;r.src=e,r.onload=function(){return t({src:r.src,width:r.width,height:r.height})},r.onerror=n})})}},function(e,t,n){n(273),n(274),n(289),n(293),e.exports=n(36).Promise},function(e,t){},function(e,t,n){"use strict";var r=n(275)(!0);n(134)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(84),i=n(85);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){e.exports=!n(37)&&!n(137)(function(){return 7!=Object.defineProperty(n(87)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(56);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=n(27)},function(e,t,n){"use strict";var r=n(280),i=n(138),o=n(90),a={};n(27)(a,n(8)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(28),i=n(281),o=n(142),a=n(89)("IE_PROTO"),s=function(){},u=function(){var e,t=n(87)("iframe"),r=o.length;for(t.style.display="none",n(143).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(55),i=n(28),o=n(282);e.exports=n(37)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(283),i=n(142);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(57),i=n(88),o=n(285)(!1),a=n(89)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(58);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(88),i=n(139),o=n(286);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(84),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(57),i=n(288),o=n(89)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(85);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(290);for(var r=n(13),i=n(27),o=n(38),a=n(8)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){"use strict";var r=n(291),i=n(292),o=n(38),a=n(88);e.exports=n(134)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,o,a=n(135),s=n(13),u=n(54),c=n(144),l=n(136),f=n(56),d=n(86),h=n(294),p=n(295),v=n(299),m=n(145).set,y=n(301)(),b=s.TypeError,g=s.process,_=s.Promise,g=s.process,w="process"==c(g),x=function(){},k=!!function(){try{var e=_.resolve(1),t=(e.constructor={})[n(8)("species")]=function(e){e(x,x)};return(w||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(e){}}(),A=function(e,t){return e===t||e===_&&t===o},S=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return A(_,e)?new O(e):new i(e)},O=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},I=function(e){try{e()}catch(e){return{error:e}}},E=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&C(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(b("Promise-chain cycle")):(o=S(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){m.call(s,function(){var t,n,r,i=e._v;if(T(e)&&(t=I(function(){w?g.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=w||T(e)?2:1),e._a=void 0,t)throw t.error})},T=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!T(t.promise))return!1;return!0},C=function(e){m.call(s,function(){var t;w?g.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=S(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(M,r,1))}catch(e){M.call(r,e)}}):(n._v=e,n._s=1,E(n,!1))}catch(e){M.call({_w:n,_d:!1},e)}}};k||(_=function(e){h(this,_,"Promise","_h"),d(e),r.call(this);try{e(u(U,this,1),u(M,this,1))}catch(e){M.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(302)(_.prototype,{then:function(e,t){var n=P(v(this,_));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=w?g.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&E(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),O=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(M,e,1)}),l(l.G+l.W+l.F*!k,{Promise:_}),n(90)(_,"Promise"),n(303)("Promise"),o=n(36).Promise,l(l.S+l.F*!k,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(a||!k),"Promise",{resolve:function(e){if(e instanceof _&&A(e.constructor,this))return e;var t=P(this);return(0,t.resolve)(e),t.promise}}),l(l.S+l.F*!(k&&n(304)(function(e){_.all(e).catch(x)})),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=I(function(){var n=[],o=0,a=1;p(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=I(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(54),i=n(296),o=n(297),a=n(28),s=n(139),u=n(298),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(28);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(38),i=n(8)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(144),i=n(8)("iterator"),o=n(38);e.exports=n(36).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(28),i=n(86),o=n(8)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(13),i=n(145).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(58)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(27);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(13),i=n(36),o=n(55),a=n(37),s=n(8)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(8)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.fileToBase64=function(e){return new i.default(function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onabort=function(){return n("abort")},r.onerror=n,r.readAsDataURL(e)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var p=n(48),v=n(25),m=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.browseElem=document.createElement("INPUT"),i.browseElem.setAttribute("type","file"),i.browseElem.style.display="none",r.multiple&&i.browseElem.setAttribute("multiple",""),r.fileExtensions&&i.browseElem.setAttribute("accept",r.fileExtensions.join(",")),document.body.appendChild(i.browseElem),i.uploadService.addBrowse(i.browseElem),i.context.trackEvent(new v.MPBrowserLoaded),i}return(0,h.default)(t,e),(0,c.default)(t,[{key:"browse",value:function(){this.browseElem.click()}},{key:"teardown",value:function(){var e=this.browseElem.parentNode;e&&e.removeChild(this.browseElem)}}]),t}(p.MediaLocalUpload);t.Browser=m},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup{display:none;position:fixed;z-index:2147483647;left:0;top:0;width:100%;height:100%;background-color:rgba(9,30,66,.44);transition:opacity .2s;transition-delay:.1s}.mediaPickerPopup .aui-dialog2-header{height:50px!important}.mediaPickerPopup .aui-dialog2-content{padding:0!important;height:100%;position:relative!important;overflow:hidden!important}.mediaPickerPopup .aui-dialog2-content iframe{width:100%;height:100%;border-width:0;position:absolute}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=n(25),m=n(147),y=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return r.pasteHandler=function(e){for(var t=e.clipboardData.files,n=0;n<t.length;++n){var i=t[n];r.uploadService.addFile(i)}},r.context.trackEvent(new v.MPClipboardLoaded),r}return(0,h.default)(t,e),(0,c.default)(t,[{key:"activate",value:function(){var e=this;m(function(){e.deactivate(),document.addEventListener("paste",e.pasteHandler,!1)})}},{key:"deactivate",value:function(){document.removeEventListener("paste",this.pasteHandler)}}]),t}(p.MediaLocalUpload);t.Clipboard=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(16),s=r(a),u=n(0),c=r(u),l=n(1),f=r(l),d=n(19),h=r(d),p=n(20),v=r(p);Object.defineProperty(t,"__esModule",{value:!0}),n(310);var m=n(80),y=n(48),b=n(22),g=n(25),_=n(148),w=n(312),x=function(e){return[].slice.call(e,0)},k=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.default)(this,t);var i=(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));i.onDragOver=function(e){if(e.preventDefault(),i.instance&&t.dragContainsFiles(e)){var n=e.dataTransfer,r=void 0;try{r=n.effectAllowed}catch(e){}n.dropEffect="move"===r||"linkMove"===r?"move":"copy",i.instance.classList.add("active");var o=i.getDraggedItemsLength(n);i.emitDragOver({length:o})}},i.onDragLeave=function(e){i.instance&&(e.preventDefault(),i.instance.classList.remove("active"),i.emitDragLeave())},i.onDrop=function(e){var n=i.instance;n&&t.dragContainsFiles(e)&&(n.classList.remove("active"),i.emit("drop",void 0),i.emitDragLeave())};var o=r;return i.container=o.container||document.body,i.headless=o.headless||!1,i.uiActive=!1,i.context.trackEvent(new g.MPDropzoneLoaded),i}return(0,v.default)(t,e),(0,f.default)(t,[{key:"activate",value:function(){var e=this;return w.whenDomReady.then(function(){if(e.container=e.container||document.body,!e.instance)return e.createInstance()}).then(function(){e.deactivate(),e.container.addEventListener("dragover",e.onDragOver,!1),e.container.addEventListener("dragleave",e.onDragLeave,!1),e.uploadService.addDropzone(e.container)})}},{key:"deactivate",value:function(){this.container.removeEventListener("dragover",this.onDragOver,!1),this.container.removeEventListener("dragleave",this.onDragLeave,!1),this.uploadService.removeDropzone()}},{key:"getDraggedItemsLength",value:function(e){return e.items?x(e.items).filter(function(e){return"file"===e.kind}).length:e.files.length}},{key:"createInstance",value:function(){var e=this;return this.getDropzoneUI().then(function(t){e.instance=t,e.container.appendChild(e.instance),e.uploadService.on("file-dropped",e.onDrop)})}},{key:"getDropzoneUI",value:function(){var e=this;return this.headless?o.default.resolve(document.createElement("DIV")):new o.default(function(t,n){return m.default.get(e.getStaticAssetUrl("dropzone")).then(function(e){t(_.parseHTML(e.data))},function(e){b.handleError("dropzone_load_fail",e),n(e)})})}},{key:"emitDragOver",value:function(e){this.uiActive||(this.uiActive=!0,this.emit("drag-enter",e))}},{key:"emitDragLeave",value:function(){var e=this;this.uiActive&&(this.uiActive=!1,window.setTimeout(function(){e.uiActive||e.emit("drag-leave",void 0)},50))}}],[{key:"dragContainsFiles",value:function(e){var t=e.dataTransfer.types;return x(t).indexOf("Files")>-1}}]),t}(y.MediaLocalUpload);t.Dropzone=k},function(e,t,n){var r=n(311);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerDropzone{position:fixed;left:0;top:0;width:100%;height:0;overflow:hidden;margin:auto;font-family:Source Sans Pro,Helvetica Neue,Helvetica,Arial,sans-serif;pointer-events:none}@keyframes atlassian-doc{0%{transform:rotate(0deg)}to{transform:rotate(-18deg)}}@keyframes spreadsheet{0%{transform:rotate(0deg)}to{transform:rotate(20deg)}}.mediaPickerDropzone .mp-content{width:100vw;height:100vh}.mediaPickerDropzone .mp-content .mp-circle{transition:width .2s ease,height .2s ease,top .2s ease,left .2s ease;width:0;height:0;transform:scale(1);background-color:#0052cc;border-radius:50%;margin:auto;position:absolute;overflow:hidden;color:#fff;top:50%;left:50%}.mediaPickerDropzone .mp-content .mp-circle .mp-title{font-weight:500;font-size:40px;margin-bottom:20px}.mediaPickerDropzone .mp-content .mp-circle .mp-description{font-size:16px;font-weight:500}.mediaPickerDropzone .mp-content .mp-circle .mp-text{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;left:0;right:0;top:130px;position:absolute;text-align:center}.mediaPickerDropzone .mp-content .mp-circle .mp-text span{display:block}.mediaPickerDropzone .mp-content .mp-circle .mp-fileIcon{width:auto;height:200px;position:absolute;bottom:0;margin:auto;transform-origin:bottom;left:150px}.mediaPickerDropzone.active{height:100%;background-color:hsla(0,0%,100%,.7);position:fixed;z-index:500}.mediaPickerDropzone.active .mp-circle{width:500px;height:500px;top:calc(50% - 250px);left:calc(50% - 250px)}.mediaPickerDropzone.active .mp-circle .mp-iconAtlassianDoc{left:100px;width:183px;height:212px;bottom:-15px;animation:atlassian-doc .75s .2s forwards}.mediaPickerDropzone.active .mp-circle .mp-iconOtherDoc{left:170px;z-index:1;width:173px;height:224px}.mediaPickerDropzone.active .mp-circle .mp-iconPageSpreadsheet{left:250px;animation:spreadsheet .75s .2s forwards}",""])},function(e,t,n){"use strict";var r=n(21),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.whenDomReady=function(){return"complete"===document.readyState?i.default.resolve():new i.default(function(e){window.addEventListener("load",e)})}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.id,n=e.name,r=e.size,i=e.creationDate,o=e.type,a=e.publicId;return new S.MediaFile(t,n,r,i,o,a)}var o=n(21),a=r(o),s=n(50),u=r(s),c=n(16),l=r(c),f=n(0),d=r(f),h=n(1),p=r(h),v=n(19),m=r(v),y=n(20),b=r(y);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var g=n(51),_=n(132),w=n(314),x=n(22),k=n(315),A=n(25),S=n(129),P=n(128),O=n(131),I=n(147),E=n(148),j=n(316);t.USER_RECENTS_COLLECTION="recents";var T=function(e){function t(e,n,r){var i=r.userAuthProvider,o=r.container;(0,d.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.config=n,a.context.trackEvent(new A.MPPopupLoaded),a.uploadParams=(0,u.default)({},O.defaultUploadParams,n.uploadParams),a.userAuthProvider=i,a.container=o||document.body,I(function(){a.init()}),a}return(0,b.default)(t,e),(0,p.default)(t,[{key:"init",value:function(){this.popupReady=!1;var e=g.v4(),t={channelName:e,apiUrl:this.config.apiUrl,redirectUrl:this.getStaticAssetUrl("redirectUrl")};this.instance=this._createInstance(t),this.container.appendChild(this.instance),this.popupIframe=this._createInteractionLayer(e)}},{key:"show",value:function(){var e=this;return this.instance||this.init(),this.config.authProvider({collectionName:this.uploadParams.collection}).then(function(t){return e.popupIframe.setTenant({auth:t,uploadParams:e.uploadParams}),e.popupIframe.resetView(),e._show(),a.default.resolve()})}},{key:"cancel",value:function(e){this.popupIframe.cancelUpload(e)}},{key:"teardown",value:function(){this.instance&&(this.instance.parentNode&&this.instance.parentNode.removeChild(this.instance),delete this.instance),this.localFileBrowser&&this.localFileBrowser.teardown()}},{key:"hide",value:function(){this.instance&&(this.instance.style.display="none"),this.emit("closed",void 0),this.context.trackEvent(new A.MPPopupHidden)}},{key:"setUploadParams",value:function(e){this.uploadParams=(0,u.default)({},O.defaultUploadParams,e)}},{key:"_show",value:function(){this.popupReady&&(this.instance.style.display="block",this.context.trackEvent(new A.MPPopupShown))}},{key:"_createInstance",value:function(e){var t=e.apiUrl,n=e.channelName,r=e.redirectUrl,i="?channelName="+encodeURIComponent(n)+"&apiUrl="+encodeURIComponent(t)+"&redirectUrl="+encodeURIComponent(r);return E.parseHTML('<div class="mediaPickerPopup mpAUI">\n        <section role="dialog" id="demo-dialog" class="aui-layer aui-dialog2 aui-dialog2-large" aria-hidden="false">\n            <div class="aui-dialog2-content">\n                <iframe class="mpApp" src="'+this.getStaticAssetUrl("popupInject")+i+'"></iframe>\n            </div>\n        </section>\n      </div>')}},{key:"_createInteractionLayer",value:function(e){var t=this,n=this.instance.querySelector(".mpApp"),r=n.contentWindow,o=w({window:r,scope:e});this.messageService=new j.PostisMessageService(o),this.messageService.handle("uploadFinalizeReady",function(e){return new a.default(function(n){t.emitUploadFinalizeReady(i(e),function(){return n()})})}),this.messageService.handle("getUserAuth",function(e){return t.userAuthProvider(e)});var s=new k.InteractionLayer(this,o);return s.on("uploadEvent",function(e){switch(e.name){case"upload-start":t.emitUploadStart(i(e.data.file));break;case"upload-status-update":t.emitUploadProgress(i(e.data.file),e.data.progress);break;case"upload-preview-update":var n=e.data,r=n.file,o=n.preview;t.emitUploadPreviewUpdate(i(r),o);break;case"upload-processing":t.emitUploadProcessing(i(e.data.file));break;case"upload-end":t.emitUploadEnd(i(e.data.file),e.data.public);break;case"upload-error":var a=e.data,s=a.file,u=a.error;t.emitUploadError(i(s),new P.MediaError(u.fileId,u.name,u.description)),x.handleError(u.name,u.description)}}),s.on("ready",function(){t.emit("ready",void 0),t.popupReady=!0}),s.initProtocol(),s}}]),t}(_.MPComponent);t.Popup=T},function(e,t){function n(e){var t,n=e.scope,r=e.window,i=e.windowForEventListening||window,o={},a=[],s={},u=!1,c=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}if(t.postis&&t.scope===n){var r=o[t.method];if(r)for(var i=0;i<r.length;i++)r[i].call(null,t.params);else s[t.method]=s[t.method]||[],s[t.method].push(t.params)}};i.addEventListener("message",c,!1);var l={listen:function(e,t){o[e]=o[e]||[],o[e].push(t);var n=s[e];if(n)for(var r=o[e],i=0;i<r.length;i++)for(var a=0;a<n.length;a++)r[i].call(null,n[a]);delete s[e]},send:function(e){var t=e.method;(u||"__ready__"===e.method)&&r&&"function"==typeof r.postMessage?r.postMessage(JSON.stringify({postis:!0,scope:n,method:t,params:e.params}),"*"):a.push(e)},ready:function(e){u?e():setTimeout(function(){l.ready(e)},50)},destroy:function(e){clearInterval(t),u=!1,i&&"function"==typeof i.removeEventListener&&i.removeEventListener("message",c),e&&e()}},f=+new Date+Math.random()+"";return t=setInterval(function(){l.send({method:"__ready__",params:f})},50),l.listen("__ready__",function(e){if(e===f){clearInterval(t),u=!0;for(var n=0;n<a.length;n++)l.send(a[n]);a=[]}else l.send({method:"__ready__",params:e})}),l}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(77),c=function(){function e(t,n){(0,o.default)(this,e),this.popup=t,this.channel=n,this.sanitizeUploadParams=function(e){return{collection:e.collection,fetchMetadata:e.fetchMetadata,autoFinalize:e.autoFinalize}},this.emitter=new u.EventEmitter2}return(0,s.default)(e,[{key:"initProtocol",value:function(){var e=this;this.channel.ready(function(){e.channel.listen("hidePopup",function(){e.popup.hide()}),e.channel.listen("showPopup",function(){e.popup.show()}),e.channel.listen("ready",function(){e.emit("ready",void 0)}),e.channel.listen("uploadEvent",function(t){e.emit("uploadEvent",t.event)})})}},{key:"resetView",value:function(){this.channel.send({method:"resetView"})}},{key:"cancelUpload",value:function(e){this.channel.send({method:"cancelUpload",params:{uploadId:e}})}},{key:"setTenant",value:function(e){var t=e.auth,n=e.uploadParams;this.channel.send({method:"setTenant",params:{auth:t,uploadParams:this.sanitizeUploadParams(n)}})}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"emit",value:function(e,t){this.emitter.emit(e,t)}}]),e}();t.InteractionLayer=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(115);n(317),n(318);var f=n(51),d=function(){function e(t){(0,s.default)(this,e),this.channel=t,this.requests=this.observeChannelRequests(t),this.responses=this.observeChannelResponses(t)}return(0,c.default)(e,[{key:"post",value:function(e){var t=this;return new o.default(function(n,r){var i=f.v4(),o=t.responses.filter(function(e){return e.traceId===i}).subscribe({next:function(e){var t=e.response,i=e.error;i?r(i):n(t),o.unsubscribe()}});t.channel.send({method:"REQUEST",params:{traceId:i,message:e}})})}},{key:"handle",value:function(e,t){var n=this;this.requests.filter(function(t){return t.message.type===e}).subscribe({next:function(e){var r=e.traceId,i=e.message;t(i.payload).then(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,response:e}})}).catch(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,error:e}})})}})}},{key:"observeChannelRequests",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("REQUEST",function(e){t.next(e)})}),t}},{key:"observeChannelResponses",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("RESPONSE",function(e){t.next(e)})}),t}}]),e}();t.PostisMessageService=d},function(e,t){e.exports=n(72)},function(e,t){e.exports=n(74)}]))},function(e,t,n){"use strict";var r=n(26),i=n(27),o=n(38),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=i.toSubscriber(e,t,n);if(r?r.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var i;i=n.subscribe(function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=a},function(e,t,n){(function(e){"use strict";var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i="undefined"!=typeof e&&e,o=n||i||r;t.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(t,n(18))},function(e,t,n){"use strict";function r(e,t,n){if(e){if(e instanceof i.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||n?new i.Subscriber(e,t,n):new i.Subscriber(a.empty)}var i=n(28),o=n(37),a=n(36);t.toSubscriber=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(29),o=n(30),a=n(36),s=n(37),u=function(e){function t(n,r,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!n){this.destination=a.empty;break}if("object"==typeof n){n instanceof t?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return r(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},
t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,n=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},t}(o.Subscription);t.Subscriber=u;var c=function(e){function t(t,n,r,o){e.call(this),this._parentSubscriber=t;var s,u=this;i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.empty&&(u=Object.create(n),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=o}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},function(e,t){"use strict";function n(e){return"function"==typeof e}t.isFunction=n},function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var i=n(31),o=n(32),a=n(29),s=n(33),u=n(34),c=n(35),l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,l=n._parent,f=n._parents,d=n._unsubscribe,h=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,v=f?f.length:0;l;)l.remove(this),l=++p<v&&f[p]||null;if(a.isFunction(d)){var m=s.tryCatch(d).call(this);m===u.errorObject&&(t=!0,e=e||(u.errorObject.e instanceof c.UnsubscriptionError?r(u.errorObject.e.errors):[u.errorObject.e]))}if(i.isArray(h))for(p=-1,v=h.length;++p<v;){var y=h[p];if(o.isObject(y)){var m=s.tryCatch(y.unsubscribe).call(y);if(m===u.errorObject){t=!0,e=e||[];var b=u.errorObject.e;b instanceof c.UnsubscriptionError?e=e.concat(r(b.errors)):e.push(b)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=this._subscriptions||(this._subscriptions=[]);return i.push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this,n=t._parent,r=t._parents;n&&n!==e?r?r.indexOf(e)===-1&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=l},function(e,t){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return null!=e&&"object"==typeof e}t.isObject=n},function(e,t,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function i(e){return o=e,r}var o,a=n(34);t.tryCatch=i},function(e,t){"use strict";t.errorObject={e:{}}},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(t,e),t}(Error);t.UnsubscriptionError=r},function(e,t){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";var r=n(26),i=r.root.Symbol;t.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var i=n(26);t.getSymbolObservable=r,t.observable=r(i.root),t.$$observable=t.observable},function(e,t,n){"use strict";var r=n(25),i=n(40);r.Observable.prototype.publishReplay=i.publishReplay},function(e,t,n){"use strict";function r(e,t,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),o.multicast.call(this,new i.ReplaySubject(e,t,n))}var i=n(41),o=n(54);t.publishReplay=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(42),o=n(45),a=n(30),s=n(52),u=n(43),c=n(44),l=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return r(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new f(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?t=a.Subscription.EMPTY:this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),r&&e.add(e=new s.ObserveOnSubscriber(e,r));for(var i=n.length,o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.Subject);t.ReplaySubject=l;var f=function(){function e(e,t){this.time=e,this.value=t}return e}()},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(25),o=n(28),a=n(30),s=n(43),u=n(44),c=n(37),l=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(o.Subscriber);t.SubjectSubscriber=l;var f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[c.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.Observable);t.Subject=f;var d=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},t}(f);t.AnonymousSubject=d},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ObjectUnsubscribedError=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(30),o=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);n!==-1&&t.splice(n,1)}}},t}(i.Subscription);t.SubjectSubscription=o},function(e,t,n){"use strict";var r=n(46),i=n(49);t.queue=new i.QueueScheduler(r.QueueAction)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(47),o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(i.AsyncAction);t.QueueAction=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=n(48),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),i.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&this.pending===!1?t:i.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,r!==-1&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(o.Action);t.AsyncAction=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(30),o=function(e){function t(t,n){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i.Subscription);t.Action=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(50),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(i.AsyncScheduler);t.QueueScheduler=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(51),o=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(i.Scheduler);t.AsyncScheduler=o},function(e,t){"use strict";var n=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=n},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=0),this.lift(new s(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(28),a=n(53);t.observeOn=r;var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=s;var u=function(e){function t(t,n,r){void 0===r&&(r=0),e.call(this,t),this.scheduler=n,this.delay=r}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new c(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},t}(o.Subscriber);t.ObserveOnSubscriber=u;var c=function(){function e(e,t){this.notification=e,this.destination=t}return e}();t.ObserveOnMessage=c},function(e,t,n){"use strict";var r=n(25),i=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){var r=this.kind;switch(r){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!=typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",(void 0),t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",(void 0)),e}();t.Notification=i},function(e,t,n){"use strict";function r(e,t){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new o(n,t));var r=Object.create(this,i.connectableObservableDescriptor);return r.source=this,r.subjectFactory=n,r}var i=n(55);t.multicast=r;var o=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}();t.MulticastOperator=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(42),o=n(25),a=n(28),s=n(30),u=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.Subscription,e.add(this.source.subscribe(new l(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new f(this))},t}(o.Observable);t.ConnectableObservable=u;var c=u.prototype;t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};var l=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),f=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new d(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),d=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e)return void(this.connection=null);this.connectable=null;var t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()},t}(a.Subscriber)},function(e,t,n){"use strict";var r=n(25),i=n(57);r.Observable.of=i.of},function(e,t,n){"use strict";var r=n(58);t.of=r.ArrayObservable.of},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(25),o=n(59),a=n(60),s=n(61),u=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var i=e.length;return i>1?new t(e,r):1===i?new o.ScalarObservable(e[0],r):new a.EmptyObservable(r)},t.dispatch=function(e){var t=e.array,n=e.index,r=e.count,i=e.subscriber;return n>=r?void i.complete():(i.next(t[n]),void(i.closed||(e.index=n+1,this.schedule(e))))},t.prototype._subscribe=function(e){var n=0,r=this.array,i=r.length,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{array:r,index:n,count:i,subscriber:e});for(var a=0;a<i&&!e.closed;a++)e.next(r[a]);e.complete()},t}(i.Observable);t.ArrayObservable=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(25),o=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.done,n=e.value,r=e.subscriber;return t?void r.complete():(r.next(n),void(r.closed||(e.done=!0,this.schedule(e))))},t.prototype._subscribe=function(e){var n=this.value,r=this.scheduler;return r?r.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e}):(e.next(n),void(e.closed||e.complete()))},t}(i.Observable);t.ScalarObservable=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(25),o=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;return n?n.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(i.Observable);t.EmptyObservable=o},function(e,t){"use strict";function n(e){return e&&"function"==typeof e.schedule}t.isScheduler=n},function(e,t,n){"use strict";var r=n(25),i=n(63);r.Observable.prototype.startWith=i.startWith},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];u.isScheduler(n)?e.pop():n=null;var r=e.length;return 1===r?s.concatStatic(new o.ScalarObservable(e[0],n),this):r>1?s.concatStatic(new i.ArrayObservable(e,n),this):s.concatStatic(new a.EmptyObservable(n),this)}var i=n(58),o=n(59),a=n(60),s=n(64),u=n(61);t.startWith=r},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(i.apply(void 0,[this].concat(e)))}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,r=e;return a.isScheduler(r[e.length-1])&&(n=r.pop()),null===n&&1===e.length&&e[0]instanceof o.Observable?e[0]:new s.ArrayObservable(e,n).lift(new u.MergeAllOperator(1))}var o=n(25),a=n(61),s=n(58),u=n(65);t.concat=r,t.concatStatic=i},function(e,t,n){"use strict";function r(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new s(e))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(66),a=n(67);t.mergeAll=r;var s=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.concurrent))},e}();t.MergeAllOperator=s;var u=function(e){function t(t,n){e.call(this,t),this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(a.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);t.MergeAllSubscriber=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(28),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i.Subscriber);t.OuterSubscriber=o},function(e,t,n){"use strict";function r(e,t,n,r){var d=new l.InnerSubscriber(e,n,r);if(d.closed)return null;if(t instanceof u.Observable)return t._isScalar?(d.next(t.value),d.complete(),null):t.subscribe(d);if(o.isArrayLike(t)){for(var h=0,p=t.length;h<p&&!d.closed;h++)d.next(t[h]);d.closed||d.complete()}else{if(a.isPromise(t))return t.then(function(e){d.closed||(d.next(e),d.complete())},function(e){return d.error(e)}).then(null,function(e){i.root.setTimeout(function(){throw e})}),d;if(t&&"function"==typeof t[c.iterator])for(var v=t[c.iterator]();;){var m=v.next();if(m.done){d.complete();break}if(d.next(m.value),d.closed)break}else if(t&&"function"==typeof t[f.observable]){var y=t[f.observable]();if("function"==typeof y.subscribe)return y.subscribe(new l.InnerSubscriber(e,n,r));d.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var b=s.isObject(t)?"an invalid object":"'"+t+"'",g="You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";d.error(new TypeError(g))}}return null}var i=n(26),o=n(68),a=n(69),s=n(32),u=n(25),c=n(70),l=n(71),f=n(38);t.subscribeToResult=r},function(e,t){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}t.isPromise=n},function(e,t,n){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}var i=n(26);t.symbolIteratorPonyfill=r,t.iterator=r(i.root),t.$$iterator=t.iterator},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(28),o=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i.Subscriber);t.InnerSubscriber=o},function(e,t,n){"use strict";var r=n(25),i=n(73);r.Observable.prototype.filter=i.filter},function(e,t,n){"use strict";function r(e,t){return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(28);t.filter=r;var a=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.thisArg=r,this.count=0}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(o.Subscriber)},function(e,t,n){"use strict";var r=n(25),i=n(75);r.Observable.prototype.map=i.map},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(28);t.map=r;var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=a;var s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.Subscriber)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.on("upload-start",function(e){return u.default.publish(f+"new",e)}),e.on("upload-preview-update",function(e){return u.default.publish(f+"preview",e)}),e.on("upload-status-update",function(e){return u.default.publish(f+"progress",e)}),e.on("upload-error",function(e){return u.default.publish(f+"error",e)}),e.on("upload-processing",function(e){return u.default.publish(f+"done",e)}),e.on("upload-end",function(e){return u.default.publish(f+"done",e)}),u.default.subscribe(f+"cancel",function(t){e.cancel&&e.cancel(t)}),e}function o(e){return u.default.subscribe("issue/changed",function(t){l.default.getUploadParameters().then(e.setUploadParams.bind(e))}),e}function a(e){return u.default.subscribe("project/changed",function(t){l.default.getTemporaryAttachmentUploadParameters(t).then(e.setUploadParams.bind(e))}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.connect=i,t.connectToIssueChanges=o,t.connectToProjectChanges=a;var s=n(10),u=r(s),c=n(3),l=r(c),f="upload/"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(16),s=r(a),u=n(10),c=r(u),l=n(20),f=r(l);t.default=function(e,t,n,r,a){var u="create-issue/drop-zone",l=(0,o.temporaryAttachmentDropzone)(e,r).then(function(e){return e.on("drop",function(){s.default.triggerAttachRequested(u)}),e}),d=!1;return{activate:function(){return l.then(function(r){d||(d=!0,r.activate(),c.default.publish("upload/switch-context",{name:u,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},a)}),c.default.publish("project/changed",e))})},deactivate:function(){return l.then(function(e){d&&(e.deactivate(),d=!1)})},drop:function(){return l.catch(function(e){s.default.triggerInitialisationException((0,f.default)(e)),c.default.publish("media/error","jira.attachments.setup.failed.description")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(79),o=r(i),a=n(20),s=r(a),u=n(16),c=r(u),l=n(10),f=r(l),d=n(82),h=r(d),p="jira.issue.media-picker.show",v={
blockWikiEditorMarkupInsert:!1},m=void 0,y=function(e){var t="view-issue/"+e;return(0,o.default)().then(function(e){m=e}).catch(function(e){c.default.triggerInitialisationException((0,s.default)(e))}),function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;n&&n.preventDefault(),h.default.start({key:p,isInitial:!1,threshold:250}),c.default.triggerAttachRequested(e),m?m.show().then(function(){return h.default.end({key:p})}).then(function(){return f.default.publish("upload/switch-context",{name:t,uploadSettings:r})}).catch(function(){f.default.publish("media/error","jira.attachments.setup.failed.description")}):c.default.triggerUploadRequestedWhenNotInitialised()}};t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(80),a=r(o),s=n(81),u=r(s),c=n(7),l=r(c),f=function(){return u.default.then(function(){return new a.default(i.popup,i.browser)})};t.default=l.default.memoize(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(16),u=r(s),c=n(20),l=r(c),f=n(3),d=r(f),h=function(){function e(t,n){var r=this;i(this,e);var o=d.default.userAuthProvider;o().then(function(e){e?r.componentPromise=t(o).then(function(e){return[e,"popup"]}).catch(function(e){return e.logged||u.default.triggerGenericPopupInitialisationError((0,l.default)(e)),n().then(function(e){return[e,"browser"]})}).then(r.handleComponentInitSuccess.bind(r)).catch(r.handleComponentInitFailure.bind(r)):r.componentPromise=r.initializeBrowser.call(r,n)})}return a(e,[{key:"initializeBrowser",value:function(e){return e().then(function(e){return[e,"browser"]}).then(this.handleComponentInitSuccess.bind(this)).catch(this.handleComponentInitFailure.bind(this))}},{key:"handleComponentInitSuccess",value:function(e){var t=o(e,2),n=t[0],r=t[1];return this.mediaComponent=n,this.componentType=r,[n,r]}},{key:"handleComponentInitFailure",value:function(e){u.default.triggerInitialisationException((0,l.default)(e)),this.componentType="none"}},{key:"show",value:function(){var e=this;switch(this.componentType){case"browser":return this.showBrowser();case"popup":return this.showPopup();case"none":return Promise.reject("Component initialisation error");default:return d.default.userAuthProvider().then(function(){return e.componentPromise}).then(function(){return"popup"===e.componentType?e.showPopup():(u.default.triggerBrowserRequestedWhenNotInitialised(),Promise.resolve())})}}},{key:"showPopup",value:function(){return this.mediaComponent.show().then(function(){return u.default.triggerPopupShown()}).catch(function(e){return u.default.triggerPopupFailedToShow((0,l.default)(e)),Promise.reject(e)})}},{key:"showBrowser",value:function(){var e=this;return new Promise(function(t,n){try{e.mediaComponent.browse(),u.default.triggerAttachFileBrowserShown(),t()}catch(e){u.default.triggerAttachFileBrowserFailedToShow((0,l.default)(e)),n(e)}})}}]),e}();t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Promise(function(e,t){"undefined"==typeof document?t("Document is not available"):/^loaded|^interactive|^complete/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(t){return e()})})},function(e,t){e.exports=require("internal/browser-metrics")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return _||(0,u.default)(e).then(function(e){_=e}).catch(function(e){d.default.triggerInitialisationException((0,l.default)(e))}),p.default.publish("project/changed",e),function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return r&&r.preventDefault(),m.default.start({key:y,isInitial:!1,threshold:250}),d.default.triggerAttachRequested(b),_?(i=a({},i,{projectId:e,formToken:t,panelNode:n}),p.default.publish("project/changed",e),_.show().then(function(){return m.default.end({key:y})}).then(function(){return p.default.publish("upload/switch-context",{name:b,uploadSettings:i})}).catch(function(){p.default.publish("media/error","jira.attachments.setup.failed.description")})):void d.default.triggerUploadRequestedWhenNotInitialised()}}function o(){_=null}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i,t.resetMediaComponent=o;var s=n(84),u=r(s),c=n(20),l=r(c),f=n(16),d=r(f),h=n(10),p=r(h),v=n(82),m=r(v),y="jira.create.issue.media-picker.show",b="create-issue/link",g={blockWikiEditorMarkupInsert:!1},_=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(80),a=r(o),s=n(81),u=r(s),c=n(7),l=r(c),f=function(e){var t=(0,i.temporaryAttachmentPopup)(e),n=(0,i.temporaryAttachmentBrowser)(e);return u.default.then(function(){return new a.default(t,n)})};t.default=l.default.memoize(f)},function(e,t){e.exports=require("dndattachment/integration-register")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(3),a=r(o),s=n(87),u=r(s),c=n(16),l=r(c),f=n(20),d=r(f),h=n(88),p=r(h);t.default=function(e,t,n,r){var o="view-issue/attach-screenshot",s=p.default.Deferred();(0,i.binary)(e).then(function(t){return t.on("upload-start",function(e){s.notify("init"),l.default.triggerUploadStarted(e.file.id,e.file.size)}),t.on("upload-status-update",function(e){s.notify({loaded:e.progress.absolute,total:e.progress.max})}),t.on("upload-end",function(t){return a.default.createTemporaryAttachment(e,t.file.publicId,r).then(function(e){s.resolve({id:e.attachmentId})})}),t.on("upload-processing",function(e){s.notify({loaded:e.absolute,total:e.max})}),t.on("upload-error",function(e){s.reject(null,e.name,e.description,{}),l.default.triggerUploadError(e.name,e.fileId)}),t}).then(function(e){return l.default.triggerAttachRequested(o),(0,u.default)(t).then(function(t){e.upload(t,n)})}).catch(function(e){return l.default.triggerInitialisationException((0,d.default)(e))});return s}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(){n(this)},r.readAsDataURL(e)})}},function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(87),s=r(a),u=n(10),c=r(u),l=n(16),f=r(l),d=n(20),h=r(d),p={blockWikiEditorMarkupInsert:!0},v=function(e,t,n){var r="create-issue/attach-screenshot",a=(0,o.connectedTemporaryBinary)(e).catch(function(e){f.default.triggerInitialisationException((0,h.default)(e))});return function(o){return a.then(function(a){return(0,s.default)(o).then(function(s){f.default.triggerAttachRequested(r),c.default.publish("project/changed",e),c.default.publish("upload/switch-context",{name:r,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},p)}),a.upload(s,o.name)})}).catch(function(){c.default.publish("media/error","jira.attachments.setup.failed.description")})}};t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(10),a=r(o),s=n(91),u=r(s),c=n(108),l=r(c);n(23),t.default=function(){a.default.subscribe("upload/new",function(e){var t=e.file;u.default.startUpload(t)}),a.default.subscribe("upload/preview",function(e){var t=e.file,n=e.preview,r=l.default.decodeBase64DataUri(n.src),i=new Blob([r],{type:t.type});i.name=t.name,u.default.updatePreview(t,i)}),a.default.subscribe("upload/progress",function(e){var t=e.file,n=e.progress;u.default.progress(t,n)}),a.default.subscribe("upload/error",function(e){var t=e.error;t.isMediaError=!0,u.default.error(t)}),a.default.subscribe("upload/done",function(e){var t=e.file.publicId?e.file:i({},e.file,{publicId:e.public.id});u.default.done(t)}),a.default.subscribe("media/error",u.default.globalError)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(92),s=r(a),u=n(98),c=r(u),l=n(100),f=r(l),d=n(101),h=r(d),p=n(11),v=r(p),m=n(9),y=r(m),b=n(3),g=r(b),_=n(103),w=r(_),x=n(10),k=r(x),A=n(104),S=r(A),P=n(16),O=r(P),I=n(106),E=r(I),j=n(107),T=r(j),C=new Map,M=function(e){return e&&0===e.indexOf("create-issue")};t.default={startUpload:function(e){var t=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1};O.default.triggerUploadStarted(e.id,e.size);var n=this._createUpload(e);C.set(e.id,n),t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e),n.then(function(e){var t=e.view,n=e.uploadContext,r=e.uploadSettings;M(n)?f.default.insertUpload(r.panelNode,t.$node):c.default.insertUpload(t.$node)}),this._validate(e)},updatePreview:function(e,t){t&&C.get(e.id)&&C.get(e.id).then(function(e){e.preview=t,e.view.loadThumbnail(t)})},progress:function(e,t){C.get(e.id)&&C.get(e.id).then(function(e){var n=e.view;return n.progress(t.portion)})},error:function(e){e.fileId&&C.get(e.fileId)&&C.get(e.fileId).then(function(t){var n=t.view,r=t.file,i=t.uploadContext,o=t.uploadSettings;e.logged||O.default.triggerUploadError(e.description,e.fileId),e.isMediaError&&(e.description="jira.attachments.not.uploaded.description"),n.fail(e),M(i)||c.default.uploadError(r.name,e.description,function(){n.destroy(),C.delete(r.id)}),o.onFileUploadFinished&&o.onFileUploadFinished.call(r,r)})},globalError:function(e){c.default.globalError(e)},done:function(e){var t=this;O.default.triggerFileUploadFinished(e.id),C.get(e.id).then(function(n){var r=n.view,i=n.uploadContext,o=n.uploadSettings;return r.done(),M(i)?t.createTemporaryAttachment(e,o):t.createAttachment(o.issueId,e)})},createTemporaryAttachment:function(e,t){var n=this;Promise.all([t.projectId,t.formToken]).then(function(t){var n=o(t,2),r=n[0],i=n[1];if(!r||!i)throw new Error("Missing form data associated with upload");return g.default.createTemporaryAttachment(r,e.publicId,i)}).then(this.temporaryAttachmentCreated.bind(this,e)).catch(function(t){var r=t.message;O.default.triggerCantCreateTemporaryAttachmentInJIRA(r,e.id),n.error({fileId:e.id,description:r||"Couldn't create attachment"})})},createAttachment:function(e,t){var n=this;g.default.createAttachment(e,t.publicId).then(this.attachmentCreated.bind(this,t)).catch(function(e){var r=e.message;O.default.triggerCantCreateAttachmentInJIRA(r,t.id),n.error({fileId:t.id,description:r||"Couldn't create attachment"})})},attachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(r){var i=r.view,o=r.wikiFieldsContext,a=r.issueLinkHTML,s=r.uploadSettings;O.default.triggerAttachmentCreatedInJIRA(e.id),n.updateViewWithCreatedAttachment(e,t,i,s.issueId,o),c.default.notifyUserOfCreatedAttachment(e,a),C.delete(e.id)})},temporaryAttachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(e){var r=e.view,i=e.wikiFieldsContext,o=e.uploadSettings,a=e.preview,s=e.file;O.default.triggerTemporaryAttachmentCreatedInJIRA(s.id),n.addAttachmentToDndStore(t.attachmentId,s,a),r.attachmentCreated(t.attachmentId),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,s.name),o.onFileUploadFinished&&o.onFileUploadFinished.call(s,s),C.delete(s.id)})},addAttachmentToDndStore:function(e,t,n){return T.default.putAttachment(e,n?n:t)},updateViewWithCreatedAttachment:function(e,t,n,r,i){var o=h.default.create(e,t,{viewType:c.default.getViewType(),issueId:r});n.$node.replaceWith(o),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,e.name)},cancel:function(e){C.has(e.id)&&C.get(e.id).then(function(t){var n=t.uploadSettings;O.default.triggerUploadCancelled(e.id),k.default.publish("upload/cancel",e.id),C.delete(e.id),n.onFileUploadFinished&&onFileUploadFinished.call(e,e)})},_createUpload:function(e){var t=this,n=y.default.getUploadContextName(),r=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1},o=void 0;return o=M(n)?Promise.resolve(r):v.default.getIssueId().then(function(e){return i({},r,{issueId:e})}),o.then(function(r){var i=S.default.getWikiFieldsContextInformation(),o=void 0;i&&i.isWikiFieldFocused&&r.blockWikiEditorMarkupInsert&&(i.isWikiFieldFocused=!1),o=M(n)?s.default.createIssue(e,{},function(){t.cancel(e)}):s.default.viewIssue(e,{viewType:c.default.getViewType()},function(){t.cancel(e)});var a=v.default.getIssuePermlink(),u=v.default.getIssueKey(),l=E.default.getHtml(u,a);return{view:o,file:e,wikiFieldsContext:i,issueLinkHTML:l,uploadContext:n,uploadSettings:r}})},_validate:function(e){var t=w.default.validateFile(e),n=t.valid,r=t.message;n||(O.default.triggerUploadValidationFailed(r,e.id),this.error({fileId:e.id,description:r,logged:!0}),k.default.publish("upload/cancel",e.id))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(93),o=r(i),a=n(97),s=r(a);t.default={viewIssue:function(e,t,n){return new o.default(e,t,n)},createIssue:function(e,t,n){return new s.default(e,t,n)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(94),s=r(a),u=n(95),c=r(u),l=n(96),f=r(l),d=n(88),h=r(d),p=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="attachments-upload-progress-bar"/>'),this.$node.data("viewMode",this.context.viewType),this.render()}return o(e,[{key:"render",value:function(){var e=s.default.AttachmentsUploadProgressBar({isImageType:"gallery"===this.context.viewType});"list"===this.context.viewType&&this.$node.addClass("attachment-content"),this.$node.html(e),this.renderFileProperties()}},{key:"renderFileProperties",value:function(){var e=this;"gallery"==this.context.viewType?(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode):(0,h.default)(c.default.renderAttachmentIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__upload-control span").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size))}},{key:"loadThumbnail",value:function(e){if("gallery"===this.context.viewType){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.$node.find(".upload-progress-bar__upload-control").hide(),this.$node.addClass("upload-progress-bar__upload-finished")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%")}},{key:"destroy",value:function(){this.$node.remove()}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=p},function(e,t){e.exports=JIRA.Templates.DnDAttachmentPlugin},function(e,t){e.exports=JIRA.Templates.ViewIssue},function(e,t){"use strict";function n(e){var t=e/a;return t.toFixed(2)+u}function r(e){var t=Math.round(e/o);return t+s}function i(e){var t=e/o;return t.toFixed(1)+s}Object.defineProperty(t,"__esModule",{value:!0});var o=1024,a=o*o,s=" kB",u=" MB";t.default=function(e){return e>a?n(e):e>o?r(e):i(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(94),s=r(a),u=n(95),c=r(u),l=n(96),f=r(l),d=n(88),h=r(d),p=["aui-iconfont-close-dialog","aui-iconfont-success","aui-iconfont-error"],v=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="upload-progress-bar"/>'),this.render()}return o(e,[{key:"render",value:function(){var e=this,t=s.default.UploadProgressBar({isImageType:!0});this.$node.html(t),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__control button").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size)),(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.thumbnailNode.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui")}},{key:"loadThumbnail",value:function(e){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.setIcon("aui-iconfont-success"),this.progress(1)}},{key:"attachmentCreated",value:function(e){this.$checkbox=(0,h.default)('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",e).attr("id","filetoconvert-"+e).prop("checked",!0).insertBefore(this.$node),this.$node.addClass("upload-progress-bar__upload-ready").addClass("upload-progress-bar__upload-finished"),this.setIcon("aui-iconfont-close-dialog")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%"),this.$node.find(".upload-progress-bar__error-message").text(e.description)}},{key:"destroy",value:function(){this.$checkbox&&this.$checkbox.prop("checked",!1).prop("value",null),this.$node.remove()}},{key:"setIcon",value:function(e){var t=this.$node.find(".upload-progress-bar__control button .aui-icon");p.forEach(function(n){t.toggleClass(n,n===e)})}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(88),o=r(i),a=n(99),s=r(a),u="#file_attachments, #attachment_thumbnails",c=function(){return(0,o.default)(u)};t.default={getViewType:function(){return"file_attachments"===c().attr("id")?"list":"gallery"},insertUpload:function(e){if(0===c().length)throw new Error("Attachment List is not present");c().prepend(e)},uploadError:function(e,t,n){var r=s.default.showErrorMsg(AJS.format("jira.attachments.not.uploaded.title",e),t);(0,o.default)(r).on("aui-flag-close",n)},globalError:function(e){return s.default.showErrorMsg("jira.attachments.setup.failed.title",e)},notifyUserOfCreatedAttachment:function(e,t){s.default.showSuccessMsg("",AJS.format("{0} was attached successfully to {1}.",e.name,t))}}},function(e,t){e.exports=require("jira/flag")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(88),o=r(i);t.default={insertUpload:function(e,t){var n=(0,o.default)(e);if(0===n.length)throw new Error("Cannot find temp attachment dropzone");n.after((0,o.default)(t))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(95),o=r(i),a=n(8),s=r(a),u=n(96),c=r(u),l=n(102),f=n(88),d=r(f),h=function(){return"undefined"==typeof window?"":window&&window.location&&window.location.origin}(),p=(0,s.default)(),v=""+h+p,m=function(e){return encodeURIComponent(e)},y=function(e,t){var n=m(e.name);return"secure/attachment/"+t.attachmentId+"/"+n},b=function(e,t){var n=m(e.name);return(0,l.isImageType)(e)?v+"/secure/thumbnail/"+t.attachmentId+"/"+n+"?default=false":null},g=function(e,t){var n=m(e.name);return t.expandable?null:v+"/secure/thumbnail/"+t.attachmentId+"/"+n};t.default={create:function(e,t,n){var r=[{id:t.attachmentId,attachmentUrl:y(e,t),thumbnailUrl:b(e,t),jiraThumbnailUrl:g(e,t),fileName:e.name,mimeType:e.type,expandable:t.expandable,deletable:t.deletable,fileSize:(0,c.default)(e.size),createdIso8601:e.creationDate,createdDateTime:e.creationDate}];return(0,d.default)(o.default.renderAttachments({baseurl:p,fullBaseUrl:v,issue:{id:n.issueId},attachments:r,viewMode:n.viewType})).find(".attachment-content")}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=u.default.getThumbnailMimeType().split(",");return e&&e.type&&a.default.contains(t,e.type)}Object.defineProperty(t,"__esModule",{value:!0}),t.isImageType=void 0;var o=n(7),a=r(o),s=n(4),u=r(s);t.isImageType=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(96),o=r(i),a=n(4),s=r(a);t.default={validateFile:function(e){var t=this.fileNameContainsInvalidCharacter(e.name),n=void 0;return""!==t&&(n=AJS.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",e.name,t)),this.sizeExceedsMaximum(e.size)&&(n="File exceeds maximum size limit set by the administrator ({0}).".replace("{0}",(0,o.default)(s.default.getMaxFileSize()))),n?{valid:!1,message:n}:{valid:!0}},fileNameContainsInvalidCharacter:function(e){return s.default.getInvalidChars().reduce(function(t,n){return e.indexOf(n)!==-1?n:t},"")},sizeExceedsMaximum:function(e){return e>s.default.getMaxFileSize()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(88),o=r(i),a=n(105),s=r(a);t.default={getWikiFieldsContextInformation:function(){var e=(0,o.default)("textarea.wiki-textfield:visible:focus");return e?{isWikiFieldFocused:e.length>0,focusedField:e[0]}:void 0},insertWikiMarkup:function(e,t){var n=(0,o.default)(e);s.default.insertWikiMarkup(t,e,e.selectionStart,e.selectionStart),n.is(":focus")||n.focus()}}},function(e,t){e.exports=require("dndattachment/ctrlv/utility")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(88),o=r(i),a=n(94),s=r(a);t.default={getHtml:function(e,t){var n=(0,o.default)("#summary-val input"),r=(0,o.default)("#summary-val"),i=n&&n.attr("value")||r&&r.text();return s.default.SuccessMessageLink({issueLink:t,issueKey:e,issueSummary:i})}}},function(e,t){e.exports=require("dndattachment/TemporaryAttachments")},function(e,t){e.exports=require("dndattachment/ctrlv/base64decode")}]);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-onboarding', location = 'includes/js/rapid/ui/plan/PlanOnboarding.js' */
!function(t,s,i,e,a,n){"use strict";function r(){var t=i.getBacklogModel2(),n=t.getIssueList(),r={issueListStats:e.getIssueListStats(n,!1),sprintModels:i.getSprintModels(),canCreateIssue:i.canCreateIssue(),canManageSprints:i.canManageSprints(),isIssueLimitExceeded:i.isIssueLimitExceeded,isUsingLogicalSprints:!GH.RapidBoard.State.isIssueListBacklog()&&!GH.RapidBoard.State.isKanbanBoard(),sprintIssueListStats:[],numActiveSprints:0,numFutureSprints:0};return s.each(r.sprintModels,function(t){r.sprintIssueListStats.push(a.calculateSprintIssueListStats(t,t.getIssueList())),"ACTIVE"===t.sprintData.state&&r.numActiveSprints++,"FUTURE"===t.sprintData.state&&r.numFutureSprints++}),r}function o(s){var i=t(".ghx-onboarding-fillyourbacklog-group"),e=t(".ghx-backlog-group .ghx-helper");s.isIssueLimitExceeded?(e.hide(),i.empty()):s.issueListStats.totalCount<3&&0===s.sprintModels.length&&s.canCreateIssue?(i.html(GH.tpl.planonboarding.renderFillYourBacklogMessage()),e.hide()):0===s.issueListStats.totalCount||0===s.issueListStats.visibleCount?(e.show(),i.empty()):(e.hide(),i.empty())}function p(i){var e,a,n,r;i.canManageSprints&&0===i.numActiveSprints&&!i.isIssueLimitExceeded&&(n=s.first(i.sprintModels),r=s.first(i.sprintIssueListStats),n&&r&&(GH.RapidBoard.State.isCollapsibleBacklogEnabled()&&n.isBacklog()?l._updateFillYourBacklogMessageNew(i):"FUTURE"===n.sprintData.state&&0===r.totalCount&&(e=t(".js-sprint-container"),a=e.filter("[data-sprint-id="+n.sprintData.id+"]").find(".ghx-helper"),a.html(GH.tpl.planonboarding.renderPlanYourSprintMessage()))))}function u(s){var i=t(".ghx-onboarding-error-group");if(s.isIssueLimitExceeded){var e=GH.RapidBoard.State.getRapidViewId(),a=GH.RapidBoard.getRapidViewConfigurationUrl(e,"filter");i.html(GH.tpl.planonboarding.renderTooManyIssuesMessage({linkAddr:a,boardSettingClass:"board-settings-link"}))}else i.empty()}function d(t){return t.canManageSprints&&0===t.numFutureSprints&&0===t.numActiveSprints&&t.issueListStats.totalCount>=3}var l=function(){n(this)};l._updateFillYourBacklogMessageNew=function(s){var i=t(".ghx-onboarding-fillyourbacklog-group"),e=t(".js-sprint-container").filter("[data-sprint-id='backlog']").find(".ghx-helper");s.isIssueLimitExceeded?(e.hide(),i.empty()):s.issueListStats.totalCount<3&&1===s.sprintModels.length&&s.canCreateIssue?(i.html(GH.tpl.planonboarding.renderFillYourBacklogMessage()),e.hide()):0===s.issueListStats.totalCount||0===s.issueListStats.visibleCount?(e.show(),i.empty()):(e.hide(),i.empty())},l.prototype.updateStartSprint=function(i){if(t(".js-sprint-start").removeClass("aui-button-primary"),i.canManageSprints&&0===i.numActiveSprints&&!i.isIssueLimitExceeded){var e=s.find(i.sprintModels,function(t,s){return"FUTURE"===t.sprintData.state&&i.sprintIssueListStats[s].totalCount>0});if(e){var a=".js-sprint-container[data-sprint-id="+e.sprintData.id+"] .js-sprint-start";t(a).addClass("aui-button-primary")}}},l.prototype.renderOnboarding=function(){var t=r();GH.RapidBoard.State.isCollapsibleBacklogEnabled()||o(t),t.isUsingLogicalSprints&&p(t),u(t),this.updateCreateSprint(t),this.updateStartSprint(t),this.refresh()},l.prototype.refresh=function(){this.trigger("refresh")},l.prototype.updateCreateSprint=function(s){var i=t(".js-add-sprint");d(s)?i.addClass("aui-button-primary"):i.removeClass("aui-button-primary")},GH.PlanOnboarding=l,GH.planOnboarding=new l}(AJS.$,_,GH.BacklogModel,GH.BacklogStatistics,GH.SprintView,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-onboarding', location = 'includes/js/rapid/ui/plan/PlanOnboarding.soy' */
// This file was automatically generated from PlanOnboarding.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.planonboarding.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.planonboarding == 'undefined') { GH.tpl.planonboarding = {}; }


GH.tpl.planonboarding.renderFillYourBacklogMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-fillyourbacklog ghx-onboarding-container"><div class="ghx-onboarding-image"></div><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml('Plan your team\x27s work') + '</h5><p>' + soy.$$escapeHtml('The backlog is your team\x27s to-do list. Create 3 issues, and rank them in order of priority.') + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderFillYourBacklogMessage.soyTemplateName = 'GH.tpl.planonboarding.renderFillYourBacklogMessage';
}


GH.tpl.planonboarding.renderPlanYourSprintMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-planyoursprint ghx-onboarding-container"><div class="ghx-onboarding-image"></div><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml('Plan your sprint') + '</h5><p>' + soy.$$escapeHtml('As a team, agree on what work needs to be completed, and drag these issues to the sprint.') + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderPlanYourSprintMessage.soyTemplateName = 'GH.tpl.planonboarding.renderPlanYourSprintMessage';
}


GH.tpl.planonboarding.renderTooManyIssuesMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-error ghx-onboarding-container"><div class="ghx-onboarding-image"></div><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml('Too many issues are trying to load') + '</h5><p>' + soy.$$escapeHtml('It will take you eons to scroll through mountains of issues.') + '</p><p><a href="' + soy.$$escapeHtml(opt_data.linkAddr) + '" class="' + soy.$$escapeHtml(opt_data.boardSettingClass) + '">' + soy.$$escapeHtml('Update board filter') + '</a></p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderTooManyIssuesMessage.soyTemplateName = 'GH.tpl.planonboarding.renderTooManyIssuesMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:plan-chaperones', location = 'onboarding/chaperones/PlanChaperones.js' */
define("jira-agile/onboarding/chaperones/plan-chaperones",["jquery","underscore","jira/util/data/meta"],function(e,t,n){function i(){t.each(this.chaperones,function(t){"undefined"!=typeof t.helptip?t.helptip.refresh():e(t.anchorSelector).length&&this._initChaperone(t)},this)}function o(){return n.getBoolean("onboarding-has-completed-first-use-flow")}var r=function(e){this.chaperones=[{id:"create-sprint",title:"Create a sprint",bodyHtml:"You now have some issues in your backlog. Create a sprint to start working on them.",anchorSelector:".js-add-sprint.aui-button-primary"},{id:"start-sprint",title:"Start your sprint",bodyHtml:"Click this button when you are ready to start the sprint.",anchorSelector:".js-sprint-start.aui-button-primary"}],e.on("refresh",i,this)};return r.prototype._initChaperone=function(n){AJS.HelpTip&&o()&&"undefined"==typeof n.helptip&&(n.helptip=new AJS.HelpTip({id:"onboarding-"+n.id,title:n.title,bodyHtml:n.bodyHtml,anchor:n.anchorSelector,showCloseButton:!0}),n.helptip.show({force:!0}),e(document).on("click.planChaperone",n.anchorSelector,t.bind(function(){this._dismissChaperone(n)},this)))},r.prototype._dismissChaperone=function(t){"undefined"!=typeof t.helptip&&(t.helptip.dismiss("dismissed"),delete t.helptip,e(document).off("click.planChaperone",t.anchorSelector))},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:plan-chaperones', location = 'onboarding/chaperones/PlanChaperonesInit.js' */
require(["jira-agile/onboarding/chaperones/plan-chaperones"],function(n){new n(GH.planOnboarding)});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/Subnavigator.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator");var e=require("jira/featureflags/simplified-ux-feature-manager");JIRA.Projects.Subnavigator=JIRA.Projects.Libs.Marionette.Controller.extend({_shouldShow:function(){return!this.model.isEmpty()},_shouldShowTriggerView:function(){if(this.triggerView&&this.triggerView.isHidden)return!1;if(this.options.changeViewText){var e=this.model.getAllItems().length;return e>1}return!0},_sanitizeItems:function(){var e=this.options.itemGroups;return e&&e[0]&&!_.isArray(e[0])?[e]:e},_buildModel:function(){this.model=new JIRA.Projects.Subnavigator.Entities.Items({itemGroups:this._sanitizeItems()}),this.model.selectItem(this.options.selectedItem),this.listenTo(this.model,"change:selectedItem",this.show)},_buildTitleView:function(){"summary-options"===this.options.id?this.titleView=new JIRA.Projects.Subnavigator.Views.Title({model:this.model,fixedTitle:"Summary"}):this.titleView=new JIRA.Projects.Subnavigator.Views.Title({model:this.model}),this.titleView.setElement(AJS.$(this.options.titlePlaceholder))},_buildTriggerView:function(){"summary-options"===this.options.id&&e.isAdg3ModeOn()?this.triggerView=new JIRA.Projects.Subnavigator.Views.SummaryTrigger({model:this.model,id:this.options.id,itemGroups:this.options.itemGroups,label:this.options.changeViewText}):this.options.changeViewText?(this.triggerView=new JIRA.Projects.Subnavigator.Views.StaticTrigger({model:this.model,id:this.options.id,label:this.options.changeViewText}),this.triggerView.isHidden="report"===this.options.id&&e.isAdg3ModeOn()):this.triggerView=new JIRA.Projects.Subnavigator.Views.Trigger({model:this.model,id:this.options.id}),this.triggerView.setElement(AJS.$(this.options.triggerPlaceholder))},_buildContentView:function(){this.contentView=new JIRA.Projects.Subnavigator.Views.Content({model:this.model,id:this.options.id,hideSelectedItem:this.options.hideSelectedItem}),this.contentView.setElement(AJS.$(this.options.contentPlaceholder)),this.listenTo(this.contentView,"click",function(e){setTimeout(function(){this.model.selectItem(e);var i=this.model.get("selectedItem"),t=this.triggerPreventable("itemSelected",{item:i});t.isPrevented||i.link&&require("jira/util/browser").reloadViaWindowLocation(i.link)}.bind(this),0)}.bind(this))},initialize:function(){this._buildModel(),this._shouldShow()&&(this._buildTriggerView(),this._buildContentView(),this.options.titlePlaceholder&&this._buildTitleView())},show:function(){this._shouldShow()&&(this._shouldShowTriggerView()&&(this.triggerView.render(),this.contentView.render()),this.titleView&&this.titleView.render())},selectItem:function(e){this._shouldShow()&&this.model.selectItem(e)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/templates/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Subnavigator.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Subnavigator == 'undefined') { JIRA.Projects.Subnavigator = {}; }
if (typeof JIRA.Projects.Subnavigator.Templates == 'undefined') { JIRA.Projects.Subnavigator.Templates = {}; }


JIRA.Projects.Subnavigator.Templates.content = function(opt_data, opt_ignored) {
  var output = '<div id="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-opts subnavigator-content aui-dropdown2 aui-style-default">';
  var itemGroupList9 = opt_data.itemGroups;
  var itemGroupListLen9 = itemGroupList9.length;
  for (var itemGroupIndex9 = 0; itemGroupIndex9 < itemGroupListLen9; itemGroupIndex9++) {
    var itemGroupData9 = itemGroupList9[itemGroupIndex9];
    output += JIRA.Projects.Subnavigator.Templates.itemSection({items: itemGroupData9});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.content.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.content';
}


JIRA.Projects.Subnavigator.Templates.itemSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.items.length > 0) {
    output += '<div class="aui-dropdown2-section"><ul class="aui-list-truncate">';
    var itemList18 = opt_data.items;
    var itemListLen18 = itemList18.length;
    for (var itemIndex18 = 0; itemIndex18 < itemListLen18; itemIndex18++) {
      var itemData18 = itemList18[itemIndex18];
      output += JIRA.Projects.Subnavigator.Templates.item({item: itemData18});
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.itemSection.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.itemSection';
}


JIRA.Projects.Subnavigator.Templates.item = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.item.description) ? ' title="' + soy.$$escapeHtml(opt_data.item.description) + '"' : '') + '>' + ((opt_data.item.link) ? '<a data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '" href="' + soy.$$escapeHtml(opt_data.item.link) + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a>' : '<a class="aui-dropdown2-radio' + ((opt_data.item.selected) ? ' checked' : '') + '" data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a>') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.item.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.item';
}


JIRA.Projects.Subnavigator.Templates.tabbedTrigger = function(opt_data, opt_ignored) {
  var output = '<div class="aui-tabs horizontal-tabs aui-tabs-disabled"><ul class="tabs-menu summary-trigger">';
  var groupList53 = opt_data.itemGroups;
  var groupListLen53 = groupList53.length;
  for (var groupIndex53 = 0; groupIndex53 < groupListLen53; groupIndex53++) {
    var groupData53 = groupList53[groupIndex53];
    output += '<li class="menu-item subnav-trigger subnavigator-trigger ' + ((opt_data.selectedItem == groupData53.id) ? ' active-tab ' : '') + '"><a href="summary/' + soy.$$escapeHtml(groupData53.id) + '">' + soy.$$escapeHtml(groupData53.label) + '</a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.tabbedTrigger.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.tabbedTrigger';
}


JIRA.Projects.Subnavigator.Templates.trigger = function(opt_data, opt_ignored) {
  return '' + ((opt_data.renderAsButton) ? '<button id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger aui-button ' + ((opt_data.useLinkStyle) ? 'aui-button-link' : '') + ' aui-dropdown2-trigger" aria-owns="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" role="menu" aria-haspopup="true" >' + soy.$$escapeHtml(opt_data.label) + '</button>' : '<span id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger">' + soy.$$escapeHtml(opt_data.label) + '</button>');
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.trigger.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.trigger';
}


JIRA.Projects.Subnavigator.Templates.title = function(opt_data, opt_ignored) {
  return '<span class="subnavigator-title" title="' + soy.$$escapeHtml(opt_data.title) + '">' + soy.$$escapeHtml(opt_data.title) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.title.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.title';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Content.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.Content"),JIRA.Projects.Subnavigator.Views.Content=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.content,tooltipTimer:null,ui:{item:"li"},initialize:function(){this.tooltipTimeout=this.options.tooltipTimeout||600,this.hideSelectedItem=this.options.hideSelectedItem===!1},_hideTooltips:function(){clearTimeout(this.tooltipTimer),AJS.$(".tipsy").remove()},events:{"aui-dropdown2-item-check":function(t){this._hideTooltips();var i=AJS.$(t.target).attr("data-item-id");this.trigger("click",i)},"mouseenter @ui.item":function(t){this._hideTooltips(),this.tooltipTimer=setTimeout(function(){AJS.$(t.currentTarget).tipsy("show")},this.tooltipTimeout)},"mouseleave @ui.item":"_hideTooltips","aui-dropdown2-hide":"_hideTooltips"},serializeData:function(){var t=this.model.get("selectedItem"),i=this.model.get("itemGroups"),e=this.hideSelectedItem;return t&&(i=_.map(i,function(i){return e?_.map(i,function(i){var e=_.clone(i);return e.id===t.id&&(e.selected=!0),e}):_.reject(i,function(i){return i.id===t.id})})),{itemGroups:i,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate(),this._hideTooltips(),AJS.$(this.ui.item).tooltip({gravity:"w",trigger:"manual"})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Trigger.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.Trigger");var e=require("jira/featureflags/simplified-ux-feature-manager");JIRA.Projects.Subnavigator.Views.Trigger=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.trigger,serializeData:function(){return{label:this.model.get("selectedItem").label,renderAsButton:this.model.getAllItems().length>1,idSuffix:this.options.id||"",useLinkStyle:!e.isAdg3StylesEnabled()}},onRender:function(){this.unwrapTemplate()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/StaticTrigger.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.StaticTrigger");var e=require("jira/featureflags/simplified-ux-feature-manager");JIRA.Projects.Subnavigator.Views.StaticTrigger=JIRA.Projects.Subnavigator.Views.Trigger.extend({serializeData:function(){return{label:this.options.label,renderAsButton:!0,idSuffix:this.options.id||"",useLinkStyle:!e.isAdg3StylesEnabled()}},onRender:function(){this.unwrapTemplate(),this.$el.removeClass("subnav-trigger")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/SummaryTrigger.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.SummaryTrigger"),JIRA.Projects.Subnavigator.Views.SummaryTrigger=JIRA.Projects.Subnavigator.Views.Trigger.extend({template:JIRA.Projects.Subnavigator.Templates.tabbedTrigger,serializeData:function(){return{selectedItem:this.options.model.attributes.selectedItem.id,itemGroups:this.options.itemGroups}},onRender:function(){this.unwrapTemplate(),this.$el.removeClass("subnav-trigger")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Title.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.Title"),JIRA.Projects.Subnavigator.Views.Title=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.title,serializeData:function(){var e=this.model.get("selectedItem");return{title:this.options.fixedTitle||e.label}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/entities/Items.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Entities.Items"),JIRA.Projects.Subnavigator.Entities.Items=Backbone.Model.extend({defaults:{itemGroups:[],selectedItem:null},isEmpty:function(){return _.isEmpty(this.getAllItems())},selectItem:function(t){var e=this.getAllItems();this.set("selectedItem",_.find(e,function(e){return e.id===t})||_.first(e))},getAllItems:function(){return _.flatten(this.get("itemGroups"))}})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/SubnavigatorController.soy' */
// This file was automatically generated from SubnavigatorController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.subnavigator.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.subnavigator == 'undefined') { GH.tpl.subnavigator = {}; }


GH.tpl.subnavigator.header = function(opt_data, opt_ignored) {
  return '<h1><span id="ghx-board-name" class="subnav-page-header">' + soy.$$escapeHtml(opt_data.headerText) + '</span></h1>';
};
if (goog.DEBUG) {
  GH.tpl.subnavigator.header.soyTemplateName = 'GH.tpl.subnavigator.header';
}


GH.tpl.subnavigator.subnavigator = function(opt_data, opt_ignored) {
  return '<span class="subnav-container"><span id="subnav-title"></span><span id="subnav-board-selector"></span><span id="subnav-trigger"></span><span id="subnav-opts"></span></span>';
};
if (goog.DEBUG) {
  GH.tpl.subnavigator.subnavigator.soyTemplateName = 'GH.tpl.subnavigator.subnavigator';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/PlanSubnavigatorContextProvider.js' */
AJS.namespace("GH.RapidBoard.PlanSubnavigatorContextProvider"),define("jira-agile/subnavigator/plan-subnavigator-context-provider",["underscore","jira-agile/rapid/ui/plan/plan-controls"],function(n,a){var e={id:0,label:"Backlog"},r={hasSubnavigator:function(){return!0},header:function(){return a.rapidViewConfig.name},itemList:function(){return[e]},onLoad:function(){},selectedItem:function(){return e.id},getChangeViewText:function(){return"_"},analyticEvent:function(){}};return r}),AJS.namespace("GH.RapidBoard.PlanSubnavigatorContextProvider",null,require("jira-agile/subnavigator/plan-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/WorkSubnavigatorContextProvider.js' */
AJS.namespace("GH.RapidBoard.WorkSubnavigatorContextProvider"),define("jira-agile/subnavigator/work-subnavigator-context-provider",["jquery","underscore","jira-agile/rapid/work/work-controls"],function(t,r,i){var n="all",e="sprintFilterChange",a={id:0,label:"Kanban board"},o={id:0,label:"Active sprints"},s={hasSubnavigator:function(){return!0},header:function(){return i.rapidViewConfig.name},itemList:function(){if(this._isKanban())return[a];var t=r.map(this._getSprints(),function(t){return{id:t.id.toString(),label:t.name}});return 0===t.length?[o]:1===t.length?t:[t,[{id:n,label:"All sprints"}]]},onLoad:function(){},selectedItem:function(){if(this._isKanban())return a.id;var t=i.sprintfilters.getActiveSprintFilters()[0];if(t)return t.toString();var r=this._getSprints().length;return 0===r?o.id:1===r?i.sprintfilters.getSprintData()[0].id.toString():n},selectionHandler:function(r){var a=r===n?i.sprintfilters.getActiveSprintFilters()[0]:parseInt(r,10);i.sprintfilters.toggleActiveSprintFilter(a),t(i.sprintfilters).trigger(e)},getChangeViewText:function(){return "Switch sprint"},analyticEvent:function(t,r){return{name:"jira.project.sidebar.sprint.select",data:{sprintId:t,initialLoad:r}}},_getSprints:function(){return i.sprintfilters.getSprintData()||[]},_isKanban:function(){return!i.rapidViewConfig.sprintSupportEnabled}};return s}),AJS.namespace("GH.RapidBoard.WorkSubnavigatorContextProvider",null,require("jira-agile/subnavigator/work-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/ReportSubnavigatorContextProvider.js' */
define("jira-agile/subnavigator/report-subnavigator-context-provider",["underscore","jira/util/browser","jira-agile/rapid/ui/chart/report-controller","jira/featureflags/simplified-ux-feature-manager"],function(e,t,r,i){var a={selectionHandler:function(e){if("com.atlassian.jira.jira-projects-plugin:report-page"===e){var i=AJS.contextPath()+"/projects/"+JIRA.API.Projects.getCurrentProjectKey()+"?selectedItem="+e;t.reloadViaWindowLocation(i)}else r.selectChart(e),this._storeLastViewedReportLink(e)},header:function(){return r.rapidViewConfig.name},hasSubnavigator:function(){return!0},itemList:function(){var t=e.map(r.getApplicableCharts(),function(e){return{id:e.id,label:e.name,description:e.tooltip}});return i.isGlobalSidebarEnabled()||JIRA.API.Sidebar.isProjectSidebar()?[t,[{id:"com.atlassian.jira.jira-projects-plugin:report-page",label:"All reports",description:"Show the reports overview page, which lists all available reports"}]]:t},onLoad:function(){var e=this.selectedItem();this._storeLastViewedReportLink(e)},selectedItem:function(){return r.getSelectedChart()},getChangeViewText:function(){return "Switch report"},analyticEvent:function(e,t){return{name:"jira.project.sidebar.report.select",data:{reportId:e,initialLoad:t}}},_storeLastViewedReportLink:function(e){JIRA.API.getSidebar().done(function(t){if(t.isProjectSidebar()&&JIRA.Projects.Sidebar.Reports){var i=r.rapidViewData.id,a=JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key"),o=AJS.contextPath()+"/secure/RapidBoard.jspa?";a&&(o+="projectKey="+a+"&"),o+="rapidView="+i+"&view=reporting&chart="+e+"&useStoredSettings=true",JIRA.Projects.Sidebar.Reports.storeLastViewedReportLink(o,t)}})}};return a}),AJS.namespace("GH.RapidBoard.ReportSubnavigatorContextProvider",null,require("jira-agile/subnavigator/report-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator', location = 'includes/js/sidebar/subnavigator/SubnavigatorController.js' */
AJS.namespace("GH.RapidBoard.SubnavigatorController"),GH.RapidBoard.SubnavigatorController=function(e,t,r,a,i,n,o,d,s,u,l){var g={contextProviders:{plan:e,work:t,report:r},render:function(){this._getContextProvider().onLoad(),this.setHeader(),this.renderSubnavigator()},setHeader:function(){var e=GH.RapidBoard.State.isAgilityBoard();AJS.$("#ghx-view-selector").children().remove(),s.isAdg3StylesEnabled()&&AJS.$(".ghx-sprint-goal").remove(),AJS.$("#ghx-view-selector").html(a.header({headerText:this._getContextProvider().header()})),l.isEnabled()&&(l.render(),e||(l.removeItem(l.Items.REPORTS.id),i.getMode()===u.REPORT&&l.insertItem(l.Items.REPORTS)))},renderSubnavigator:function(){var e=this._getContextProvider();if(e.hasSubnavigator()){this.createSubnavigatorPlaceholders();var t=JIRA.Projects.Subnavigator;return this._getSubnavSettings(t,e).then(function(r){var a=new t(r);return a.on("itemSelected",function(t){t.preventDefault(),e.selectionHandler(t.item.id),AJS.trigger("analyticsEvent",e.analyticEvent(t.item.id,!1))}),a.show(),AJS.trigger("analyticsEvent",e.analyticEvent(e.selectedItem(),!0)),a})}},createSubnavigatorPlaceholders:function(){AJS.$("#ghx-view-selector h1").append(a.subnavigator())},_getContextProvider:function(){var e=i.getMode();return this.contextProviders[e]},_shouldReturnEmptyList:function(){return n.isReactFiltersEnabled().then(function(e){return e&&i.getMode()===u.WORK&&s.isGlobalSidebarEnabled()})},_getSubnavSettings:function(e,t){return g._shouldReturnEmptyList().then(function(r){var a={id:i.getMode(),triggerPlaceholder:r?null:"#subnav-trigger",contentPlaceholder:"#subnav-opts",itemGroups:t.itemList(),selectedItem:t.selectedItem()},n=void 0!==e.prototype._shouldShowTriggerView;return n&&(a.titlePlaceholder="#subnav-title",a.hideSelectedItem=!0,a.changeViewText=t.getChangeViewText()),a})}};return g}(GH.RapidBoard.PlanSubnavigatorContextProvider,GH.RapidBoard.WorkSubnavigatorContextProvider,GH.RapidBoard.ReportSubnavigatorContextProvider,GH.tpl.subnavigator,GH.RapidBoard.State,require("jira-agile/rapid/work/quick-filters-bridge"),require("jira-agile/features/feature-flags"),require("jira/featureflags/feature-manager"),require("jira/featureflags/simplified-ux-feature-manager"),require("jira-agile/rapid/const/PageMode"),require("jira/atlaskit/breadcrumbs"));;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/rpc.js' */
var gadgets=gadgets||{};gadgets.rpc=function(){var CALLBACK_NAME="__cb";var DEFAULT_NAME="";var FE_G2C_CHANNEL="__g2c_rpc";var FE_C2G_CHANNEL="__c2g_rpc";var services={};var iframePool=[];var relayUrl={};var useLegacyProtocol={};var authToken={};var callId=0;var callbacks={};var setup={};var sameDomain={};var params={};if(gadgets.util){params=gadgets.util.getUrlParameters()}authToken[".."]=params.rpctoken||params.ifpctok||0;function getRelayChannel(){return typeof window.postMessage==="function"?"wpm":typeof document.postMessage==="function"?"dpm":navigator.product==="Gecko"?"fe":"ifpc"}function setupChannel(){if(relayChannel==="dpm"||relayChannel==="wpm"){window.addEventListener("message",function(packet){try{if(packet&&packet.origin&&packet.origin!=="null"&&typeof packet.data==="string"){if(!isRpcRequest(gadgets.json.parse(packet.data))){return }if(packet.origin===location.origin){process(gadgets.json.parse(packet.data))}else{AJS.$.get(AJS.contextPath()+"/rest/whitelist/1/check",{url:packet.origin}).done(function(result){if(result&&result.inbound&&result.inbound===true){process(gadgets.json.parse(packet.data))}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}).fail(function(jqXHR,textStatus,errorThrown){AJS.log("RPC: REST "+textStatus,errorThrown)})}}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}catch(e){if(AJS.debug){var origin=packet&&packet.origin?packet.origin:"undefined origin";AJS.log("Error processing gadget rpc message from '"+origin+"': "+e)}}},false)}}var relayChannel=getRelayChannel();setupChannel();services[DEFAULT_NAME]=function(){throw new Error("Unknown RPC service: "+this.s)};services[CALLBACK_NAME]=function(callbackId,result){var callback=callbacks[callbackId];if(callback){delete callbacks[callbackId];callback(result)}};function setupFrame(frameId){if(setup[frameId]){return }if(relayChannel==="fe"){try{var frame=document.getElementById(frameId);frame[FE_G2C_CHANNEL]=function(args){process(gadgets.json.parse(args))}}catch(e){}}setup[frameId]=true}function encodeLegacyData(args){var stringify=gadgets.json.stringify;var argsEscaped=[];for(var i=0,j=args.length;i<j;++i){argsEscaped.push(encodeURIComponent(stringify(args[i])))}return argsEscaped.join("&")}function isRpcRequest(request){return request&&typeof request.s==="string"&&typeof request.f==="string"&&request.a instanceof Array}function process(rpc){if(isRpcRequest(rpc)){if(authToken[rpc.f]){if(authToken[rpc.f]!=rpc.t){if(AJS.debug){console.log("Invalid auth token received for operation: "+rpc.s)}return }}if(rpc.c){rpc.callback=function(result){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}var result=(services[rpc.s]||services[DEFAULT_NAME]).apply(rpc,rpc.a);if(rpc.c&&typeof result!="undefined"){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}}function callFrameElement(targetId,serviceName,from,rpcData,callArgs){try{if(from!=".."){var fe=window.frameElement;if(typeof fe[FE_G2C_CHANNEL]==="function"){if(typeof fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]!=="function"){fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]=function(args){process(gadgets.json.parse(args))}}fe[FE_G2C_CHANNEL](rpcData);return }}else{var frame=document.getElementById(targetId);if(typeof frame[FE_G2C_CHANNEL]==="function"&&typeof frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL]==="function"){frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL](rpcData);return }}}catch(e){}callIfpc(targetId,serviceName,from,rpcData,callArgs)}function callIfpc(targetId,serviceName,from,rpcData,callArgs){var relay=gadgets.rpc.getRelayUrl(targetId);if(!relay){throw new Error("No relay file assigned for IFPC")}var src=null;if(useLegacyProtocol[targetId]){src=[relay,"#",encodeLegacyData([from,callId,1,0,encodeLegacyData([from,serviceName,"","",from].concat(callArgs))])].join("")}else{src=[relay,"#",targetId,"&",from,"@",callId,"&1&0&",encodeURIComponent(rpcData)].join("")}emitInvisibleIframe(src)}function emitInvisibleIframe(src){var iframe;for(var i=iframePool.length-1;i>=0;--i){var ifr=iframePool[i];try{if(ifr&&(ifr.recyclable||ifr.readyState==="complete")){ifr.parentNode.removeChild(ifr);if(window.ActiveXObject){iframePool[i]=ifr=null;iframePool.splice(i,1)}else{ifr.recyclable=false;iframe=ifr;break}}}catch(e){}}if(!iframe){iframe=document.createElement("iframe");iframe.style.border=iframe.style.width=iframe.style.height="0px";iframe.style.visibility="hidden";iframe.style.position="absolute";iframe.onload=function(){this.recyclable=true};iframePool.push(iframe)}iframe.src=src;setTimeout(function(){document.body.appendChild(iframe)},0)}function callSameDomain(target,rpc){if(typeof sameDomain[target]==="undefined"){sameDomain[target]=false;var targetEl=null;if(target===".."){targetEl=parent}else{targetEl=frames[target]}try{sameDomain[target]=targetEl.gadgets.rpc.receiveSameDomain}catch(e){}}if(typeof sameDomain[target]==="function"){sameDomain[target](rpc);return true}return false}if(gadgets.config){function init(config){if(config.rpc.parentRelayUrl.substring(0,7)==="http://"){relayUrl[".."]=config.rpc.parentRelayUrl}else{var params=document.location.search.substring(0).split("&");var parentParam="";for(var i=0,param;param=params[i];++i){if(param.indexOf("parent=")===0){parentParam=decodeURIComponent(param.substring(7));break}}relayUrl[".."]=parentParam+config.rpc.parentRelayUrl}useLegacyProtocol[".."]=!!config.rpc.useLegacyProtocol}var requiredConfig={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",requiredConfig,init)}return{register:function(serviceName,handler){if(serviceName==CALLBACK_NAME){throw new Error("Cannot overwrite callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot overwrite default service:"+" use registerDefault")}services[serviceName]=handler},unregister:function(serviceName){if(serviceName==CALLBACK_NAME){throw new Error("Cannot delete callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete services[serviceName]},registerDefault:function(handler){services[""]=handler},unregisterDefault:function(){delete services[""]},call:function(targetId,serviceName,callback,var_args){++callId;targetId=targetId||"..";if(callback){callbacks[callId]=callback}var from="..";if(targetId===".."){from=window.name}var rpc={s:serviceName,f:from,c:callback?callId:0,a:Array.prototype.slice.call(arguments,3),t:authToken[targetId]};if(callSameDomain(targetId,rpc)){return }var rpcData=gadgets.json.stringify(rpc);var channelType=relayChannel;if(useLegacyProtocol[targetId]){channelType="ifpc"}switch(channelType){case"dpm":var targetDoc=targetId===".."?parent.document:frames[targetId].document;targetDoc.postMessage(rpcData);break;case"wpm":var targetWin=targetId===".."?parent:frames[targetId];targetWin.postMessage(rpcData,relayUrl[targetId]);break;case"fe":callFrameElement(targetId,serviceName,from,rpcData,rpc.a);break;default:callIfpc(targetId,serviceName,from,rpcData,rpc.a);break}},getRelayUrl:function(targetId){return relayUrl[targetId]},setRelayUrl:function(targetId,url,opt_useLegacy){relayUrl[targetId]=url;useLegacyProtocol[targetId]=!!opt_useLegacy},setAuthToken:function(targetId,token){authToken[targetId]=token;setupFrame(targetId)},getRelayChannel:function(){return relayChannel},receive:function(fragment){if(fragment.length>4){process(gadgets.json.parse(decodeURIComponent(fragment[fragment.length-1])))}},receiveSameDomain:function(rpc){rpc.a=Array.prototype.slice.call(rpc.a);window.setTimeout(function(){process(rpc)},0)}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/util.js' */
Function.prototype.inherits=function(parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;this.superClass_=parentCtor.prototype;this.prototype=new tempCtor();this.prototype.constructor=this};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/json.js' */
var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/gadgets-core.js' */
var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(message){if(window.console&&console.log){console.log(message)}else{var logEntry=document.createElement("div");logEntry.className="gadgets-log-entry";logEntry.innerHTML=message;document.body.appendChild(logEntry)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(dependencies){for(var p in dependencies){this[p]=dependencies[p]}};gadgets.Extensible.prototype.getDependencies=function(name){return this[name]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(gadget){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(gadget){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(elementId,height){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(gadget,title){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(id){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);var service=this;gadgets.rpc.register("resize_iframe",function(){service.setHeight.apply(this,arguments)});gadgets.rpc.register("set_pref",function(){service.setUserPref.apply(this,arguments)});gadgets.rpc.register("set_title",function(){service.setTitle.apply(this,arguments)});gadgets.rpc.register("requestNavigateTo",function(){service.requestNavigateTo.apply(this,arguments)})};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(view,opt_params){var id=this.getGadgetIdFromModuleId(this.f);var url=this.getUrlForView(view);if(opt_params){var paramStr=JSON.stringify(opt_params);if(paramStr.length>0){url+="&appParams="+encodeURIComponent(paramStr)}}if(url&&document.location.href.indexOf(url)==-1){document.location.href=url}};gadgets.IfrGadgetService.prototype.getUrlForView=function(view){if(view==="canvas"){return"/canvas"}else{if(view==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(moduleId){return parseInt(moduleId.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(gadgetChromeIds){this.gadgetChromeIds_=gadgetChromeIds};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(gadget){var chromeId=this.gadgetChromeIds_[gadget.id];return chromeId?document.getElementById(chromeId):null};gadgets.FloatLeftLayoutManager=function(layoutRootId){gadgets.LayoutManager.call(this);this.layoutRootId_=layoutRootId};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(gadget){var layoutRoot=document.getElementById(this.layoutRootId_);if(layoutRoot){var chrome=document.createElement("div");chrome.className="gadgets-gadget-chrome";chrome.style.cssFloat="left";layoutRoot.appendChild(chrome);return chrome}else{return null}};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-container-resources', location = 'js/gadgets-container.js' */
gadgets.Container=function(){this.parentUrl_="http://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};gadgets.Container.inherits(gadgets.Extensible);gadgets.Container.prototype.userPrefStore=new gadgets.DefaultUserPrefStore();gadgets.Container.prototype.gadgetService=new gadgets.GadgetService();gadgets.Container.prototype.layoutManager=new gadgets.StaticLayoutManager();gadgets.Container.prototype.setParentUrl=function(url){this.parentUrl_=url};gadgets.Container.prototype.setCountry=function(country){this.country_=country};gadgets.Container.prototype.setNoCache=function(nocache){this.nocache_=nocache};gadgets.Container.prototype.setLanguage=function(language){this.language_=language};gadgets.Container.prototype.setView=function(view){this.view_=view};gadgets.Container.prototype.setMaxHeight=function(maxheight){this.maxheight_=maxheight};gadgets.Container.prototype.getGadgetKey_=function(instanceId){return"gadget_"+instanceId};gadgets.IfrContainer=function(){gadgets.Container.call(this)};gadgets.IfrContainer.inherits(gadgets.Container);gadgets.IfrContainer.prototype.gadgetService=new gadgets.IfrGadgetService();gadgets.IfrContainer.prototype.setParentUrl=function(url){if(!url.match(/^http[s]?:\/\//)){url=document.location.href.match(/^[^?#]+\//)[0]+url}this.parentUrl_=url};gadgets.container=new gadgets.IfrContainer();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-standalone-resources', location = 'js/gadgets-standalone.js' */
new gadgets.IfrGadgetService();gadgets.IfrGadgetService.prototype.setTitle=function(title){};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:project-page', location = '/sidebar/navigation/items.js' */
AJS.$(function(n){n(document).on("click",'.aui-nav > [aria-expanded] > a.aui-nav-item[href="#"]',function(a){a.preventDefault(),AJS.navigation(n(this).siblings(".aui-nav")).toggle()})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-init-adg3', location = '/sidebar/main-adg3.js' */
require(["jira/projects/sidebar/lastvisited/updater","jira/featureflags/simplified-ux-feature-manager"],function(e,i){"use strict";i.isGlobalSidebarEnabled()&&JIRA.API.getSidebar().done(function(i){i.isProjectSidebar()&&e.start(i)})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ProjectShortcuts.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts.Templates == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts.Templates = {}; }


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.canManage || opt_data.numberOfShortcuts > 0) {
    output += '<div class="aui-sidebar-group jira-sidebar-group-with-divider project-shortcuts-group' + ((opt_data.numberOfShortcuts == 0) ? ' project-shortcuts-group_empty' : '') + '" data-id="project-shortcuts-group"><div class="aui-nav-heading">' + soy.$$escapeHtml('Project Shortcuts') + '</div><ul class="aui-nav project-shortcuts-list">';
    if (opt_data.shortcuts) {
      var shortcutList14 = opt_data.shortcuts;
      var shortcutListLen14 = shortcutList14.length;
      for (var shortcutIndex14 = 0; shortcutIndex14 < shortcutListLen14; shortcutIndex14++) {
        var shortcutData14 = shortcutList14[shortcutIndex14];
        output += JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut({id: shortcutData14.id, name: shortcutData14.name, url: shortcutData14.url, icon: shortcutData14.icon, canManage: opt_data.canManage, iconsMap: opt_data.iconsMap, isWithIcon: opt_data.isWithIcons});
      }
    }
    output += ((opt_data.canManage) ? '<li><a class="aui-nav-item project-shortcuts-group__add" href="#" data-link-id="project-shortcut-add"><span class="aui-icon aui-icon-large aui-iconfont-add-small"></span><span class="aui-nav-item-label">' + soy.$$escapeHtml('Add shortcut') + '</span></a></li>' : '') + '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut = function(opt_data, opt_ignored) {
  return '<li class="project-shortcut"><a class="aui-nav-item project-shortcuts-group__link" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '" target="_blank" data-shortcut-id="' + soy.$$escapeHtml(opt_data.id) + '" data-link-id="project-shortcut-' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.isWithIcon) ? '<span class="aui-icon aui-icon-large ' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon({iconId: opt_data.icon, iconsMap: opt_data.iconsMap}) + '" data-project-shortcuts-icon-id="' + soy.$$escapeHtml(opt_data.icon) + '">' + soy.$$escapeHtml('Project shortcut icon') + '</span>' : '') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.name) + '</span></a>' + ((opt_data.canManage) ? '<a href="#project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-owns="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true" class="aui-dropdown2-trigger project-shortcuts-group__actions"><span>' + soy.$$escapeHtml('Actions') + '</span></a><div id="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default project-shortcuts-group__dropdown"><ul class="aui-list-truncate"><li><a class="project-shortcuts-group__actions__edit" href="#">' + soy.$$escapeHtml('Edit') + '</a></li><li><a class="project-shortcuts-group__actions__delete  " href="#">' + soy.$$escapeHtml('Delete') + '</a></li></ul></div>' : '') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.iconsMap) {
    var id__soy73 = opt_data.iconId && opt_data.iconsMap[opt_data.iconId] ? opt_data.iconId : '1';
    output += (opt_data.iconsMap[id__soy73]) ? soy.$$escapeHtml(opt_data.iconsMap[id__soy73].className) : '';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields = function(opt_data, opt_ignored) {
  return '<div class="project-shortcuts-field-group">' + aui.form.textField({name: 'project-shortcuts-url-' + opt_data.action, id: 'project-shortcuts-url-' + opt_data.action, labelContent: 'Web address', placeholderText: 'e.g. http://www.atlassian.com', extraClasses: 'project-shortcuts-url', value: opt_data.url ? opt_data.url : '', errorTexts: opt_data.errors.urlError ? [opt_data.errors.urlError] : []}) + '<div class="field-group project-shortcuts-name">' + aui.form.label({forField: 'project-shortcuts-name-' + opt_data.action, content: 'Name'}) + '<div class="project-shortcuts-name-icon-block"><div class="project-shortcuts-icon-picker-block"></div>' + aui.form.input({name: 'project-shortcuts-name-' + opt_data.action, id: 'project-shortcuts-name-' + opt_data.action, placeholderText: 'e.g. Atlassian website', extraClasses: 'project-shortcuts-name-input' + (opt_data.isWithIcon ? ' project-shortcuts-name-input-with-icon' : ''), value: opt_data.name ? opt_data.name : '', type: 'text'}) + '</div>' + ((opt_data.errors.iconError) ? aui.form.fieldError({message: opt_data.errors.iconError}) : '') + ((opt_data.errors.nameError) ? aui.form.fieldError({message: opt_data.errors.nameError}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker = function(opt_data, opt_ignored) {
  return '<span>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList(opt_data) + '</span>' + aui.dropdown2.trigger({menu: {id: 'project-shortcuts-icons-list-' + opt_data.cid}, extraClasses: 'aui-button project-shortcuts-icons-picker', iconClasses: 'aui-icon aui-icon-large  ' + soy.$$escapeHtml(opt_data.icon.className), extraAttributes: {href: '#'}});
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList = function(opt_data, opt_ignored) {
  var output = '<div id="project-shortcuts-icons-list-' + soy.$$escapeHtml(opt_data.cid) + '" aria-hidden="true" class="aui-style-default aui-dropdown2 project-shortcuts-icons-list aui-dropdown2-section"><ul>';
  var iconList126 = opt_data.iconsList;
  var iconListLen126 = iconList126.length;
  for (var iconIndex126 = 0; iconIndex126 < iconListLen126; iconIndex126++) {
    var iconData126 = iconList126[iconIndex126];
    output += '<li><a class="project-shortcuts-icons-icon" data-project-shortcuts-icons-id="' + soy.$$escapeHtml(iconData126.name) + '"><span class="aui-icon aui-icon-large ' + soy.$$escapeHtml(iconData126.className) + '">' + soy.$$escapeHtml('Project shortcut icon') + '</span></a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogNonAdg3 = function(opt_data, opt_ignored) {
  return '<form action="" method="post" class="aui"><h3>' + soy.$$escapeHtml('Add shortcut') + '</h3><fieldset>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '<div class="buttons-container"><div class="buttons"><button class="aui-button project-shortcuts-submit">' + soy.$$escapeHtml('Add') + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></div></fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogNonAdg3.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogNonAdg3';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogAdg3 = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="add-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="add-shortcut-dialog-header"></header><div class="aui-dialog2-content"><div id="image-behind"><div id="image-behind-top"/><div id="image-behind-bottom"/></div><div id="add-shortcut-image-container"><div id="add-shortcut-dialog-image"/></div><form action="" method="post" class="aui"><h1>' + soy.$$escapeHtml('Add shortcut') + '</h1><fieldset>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '</fieldset><button type="submit" class="project-shortcuts-hidden-submit" tabindex="-1"></button></form></div><div class="aui-dialog2-footer"><div class="buttons-container"><div class="buttons"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml('Add') + '</button><button class="aui-button aui-button-text aui-button-subtle project-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></div></div></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogAdg3.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogAdg3';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog = function(opt_data, opt_ignored) {
  return '' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogAdg3(opt_data) : JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogNonAdg3(opt_data));
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="edit-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Edit shortcut') + '</h2></header></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog = function(opt_data, opt_ignored) {
  return ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<section role="dialog" id="add-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="add-shortcut-dialog-header"></header>' : '') + '<div class="aui-dialog2-content">' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<div id="image-behind"><div id="image-behind-top"/><div id="image-behind-bottom"/></div><div id="add-shortcut-image-container"><div id="add-shortcut-dialog-image" /></div>' : '') + '<form class="aui" method="post">' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<h1>' + soy.$$escapeHtml('Edit shortcut') + '</h1>' : '') + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'edit'})) + '<button type="submit" class="project-shortcuts-hidden-submit" tabindex="-1"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<button class="aui-button project-shortcuts-delete">' + soy.$$escapeHtml('Delete') + '</button>' : '') + '<button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml('Save') + '</button><button class="aui-button aui-button-link project-shortcuts-cancel' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? ' aui-button-subtle' : '') + '">' + soy.$$escapeHtml('Cancel') + '</button></div></footer>' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '</section>' : '');
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="delete-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete shortcut') + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('Are you sure you want to delete this shortcut?') + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml('Delete') + '</button><button class="aui-button aui-button-link project-shortcuts-cancel' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? ' aui-button-subtle' : '') + '">' + soy.$$escapeHtml('Cancel') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Add.js' */
define("jira/projects/sidebar/projectShortcuts/dialogs/add",["jira/featureflags/simplified-ux-feature-manager","underscore","jquery","jira/projects/libs/marionette","aui/flag"],function(e,t,i,o,s){return o.Controller.extend({initialize:function(o){t.bindAll(this,"hide","refresh","focusForm");const r=this;this.analyticsSave=!1,this.sidebarItem=o.sidebarItem,this.projectKey=o.projectKey,this.collection=o.collection,this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent({model:this.model,errorModel:this.errorModel}),this.view.render();const c=i(window),a=i(document),n=i(".aui-sidebar-body");e.isGlobalSidebarEnabled()?(this.dialog=AJS.dialog2(r.view.$el),this.dialog.show(),this.view.ui.url.focus(),this.dialog.on("hide",function(){r.trigger("dialog:close",r.analyticsSave)})):(this.dialog=AJS.InlineDialog(this.sidebarItem.ui.link,"project-shortcuts-group__add-dialog",function(e,t,i){return r.sidebarItem.$el.addClass("aui-nav-selected"),r.view.render(),r.view.$el.appendTo(e),r.view.ui.url.focus(),c.on("scroll.project-shortcuts",function(){r.refresh()}),n.on("scroll.project-shortcuts",function(){r.hide()}),a.on("showLayer",r.focusForm),c.on("resize",r.refresh),i(),!1},{gravity:"w",autoWidth:!0,initCallback:function(){r.trigger("dialog:open"),r.analyticsSave=!1},hideCallback:function(){r.sidebarItem.$el.removeClass("aui-nav-selected"),r.sidebarItem.ui.link.blur(),c.off("scroll.project-shortcuts"),n.off("scroll.project-shortcuts"),a.off("showLayer",r.focusForm),r.trigger("dialog:close",r.analyticsSave)},persistent:!0,closeOnTriggerClick:!0,offsetY:function(e,t){const i=t.target.height(),o=e.height()/2;return o-i-10},arrowOffsetY:function(e,t){const i=t.target.height()/2,o=e.height()/2;return-o+22+i}}),this.listenTo(this.sidebarItem,"before:select",function(e){e.preventDefault()}),AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide),i(".project-shortcuts-group").on("click","li",this.hide)),this.listenTo(this.view,"render",this.refresh),this.listenTo(this.view,"cancel",this.hideAndRender),this.listenTo(this.model,"save:success",function(){const t=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(this.model.toJSON(),{projectKey:this.projectKey});this.model.clear(),this.collection.add(t),e.isGlobalSidebarEnabled()&&this._addToADG3Sidebar(t),s({type:"success",title:"You have added the shortcut",body:"Nicely done! Your team is going to love this.",close:"auto"}),this.analyticsSave=!0,this.hide()})},_addToADG3Sidebar:function(e){JIRA.API.getSidebar().done(function(t){const i="sidebar-project-shortcuts",o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link."+e.id,s={id:o,name:e.get("name"),url:e.get("url"),icon:"shortcut",canEdit:!0};t.addItem(i,s)})},show:function(){this.dialog.show()},hide:function(){this.view.hideIconPicker(),this.dialog.hide()},refresh:function(){this.view.hideIconPicker(),e.isGlobalSidebarEnabled()||this.dialog.refresh()},hideAndRender:function(){this.hide()},focusForm:function(){this.view.ui.url.focus()}})}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add",null,require("jira/projects/sidebar/projectShortcuts/dialogs/add"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/services/AvailableIcons.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons");var t=[],n={},e=!1;JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons={initialize:function(e){t=e||t,n={},_.each(e,function(t){n[t.name]=t})},getIconsList:function(){return t},getIconsMap:function(){return n},getAllIconsClasses:function(){return _.reduce(t,function(t,n){return t+n.className+" "},"")},getIconFromName:function(t){return this.getIconsMap()[t]?this.getIconsMap()[t]:this.getIconsList()[0]?this.getIconsList()[0]:{}},setWithIcons:function(t){e=t},isWithIcons:function(){return e}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcut.js' */
!function(){"use strict";function t(t){var e;try{e=JSON.parse(t.responseText)}catch(t){e={message:"We couldn\'t complete the action as there seems to be a communication issue."}}return e}AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut=Backbone.Model.extend({defaults:{url:"",name:"",icon:"",type:""},initialize:function(t,e){if(!e||!e.projectKey)throw"Project key is required";this.projectKey=e.projectKey},urlRoot:function(){return AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(this.projectKey)+"/shortcut"},clear:function(){this.unset("id"),this.set("url",this.defaults.url),this.set("name",this.defaults.name),this.set("icon",this.defaults.icon),this.set("type",this.defaults.type)},save:function(){if(1!=this.saving){this.saving=!0;var e=this;e.trigger("save:start");var s=this.isNew()?"create":"update";this.sync(s,e).always(function(){e.saving=!1,e.trigger("save:finish")}).done(function(t){e.set(t,{silent:!0}),JIRA.trace("jira.projects.shortcuts."+s+".success"),e.trigger("save:success")}).fail(function(r){var i=t(r);JIRA.trace("jira.projects.shortcuts."+s+".fail"),e.trigger("save:failure",i)})}},destroy:function(){if(1!=this.saving){this.saving=!0;var e=this;e.trigger("remove:start");var s=Backbone.Model.prototype.destroy.apply(this,arguments);return s.always(function(){e.saving=!1,e.trigger("remove:finish")}).done(function(){e.trigger("remove:success")}).fail(function(s){var r=t(s);e.trigger("remove:failure",r)}),s}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/ShortcutErrors.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors=Backbone.Model.extend({defaults:{urlError:"",nameError:"",iconError:"",generalError:""},initialize:function(r,e){var s=e.model;this.listenTo(s,"save:failure remove:failure",function(r){this.set({urlError:r.errors&&r.errors.url,nameError:r.errors&&r.errors.name,iconError:r.errors&&r.errors.icon,generalError:r.message||r.errorMessages&&r.errorMessages.length>0?r.message||r.errorMessages[0]:void 0})}),this.listenTo(s,"save:success remove:success",this.clear)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcuts.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts=Backbone.Collection.extend({model:JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut,initialize:function(t,e){this.projectKey=e.projectKey}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/IconPickerContent.js' */
!function(i){"use strict";function c(i,c){var e,o=5,n=i.ui.iconList.find(".active"),s=i.ui.iconList.find("li").size();switch(c.keyCode){case AJS.keyCode.LEFT:e=-1;break;case AJS.keyCode.RIGHT:e=1;break;case AJS.keyCode.DOWN:e=o;break;case AJS.keyCode.UP:e=-o;break;default:e=0}var a=n.closest("li").index()+e;(a<0||a>=s)&&(a+=s,a%=s),n.removeClass(t),i.ui.icon.eq(a).addClass(t)}var e="projectShortcutsIconsId",t="active aui-dropdown2-active";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker,ui:{icon:".project-shortcuts-icons-icon",iconList:".project-shortcuts-icons-list",iconPicker:".project-shortcuts-icons-picker"},modelEvents:{"change:icon":function(){var i=this._modelIcon(),c=this.ui.iconPicker.children();c.removeClass(this.iconFactory.getAllIconsClasses()),c.addClass(i.className),this.ui.iconPicker.data(e,i.name)},"save:start":function(){this.ui.iconPicker.attr("aria-disabled",!0)},"save:finish":function(){this.ui.iconPicker.attr("aria-disabled",!1)}},events:{"keydown @ui.iconPicker":function(i){if(this.isPickerActive())switch(i.keyCode){case AJS.keyCode.LEFT:case AJS.keyCode.RIGHT:case AJS.keyCode.DOWN:case AJS.keyCode.UP:c(this,i),i.stopPropagation(),i.preventDefault(),this.ui.iconList.trigger("aui-dropdown2-item-selected");break;case AJS.keyCode.ESCAPE:this.hideIconPicker(),i.stopPropagation(),i.preventDefault()}}},initialize:function(i){this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons,this.analytics=JIRA.Projects.Sidebar.ProjectShortcuts.Analytics},onRender:function(){var c=this;this.ui.icon.on("click",function(){var t=i(this).data(e);c.analytics.iconChangeConfirmed(c.model,t),c.analyticsOldIconId="",c.analyticsIconClicked=!0,c.model.set("icon",t),c.ui.iconPicker.focus()}),this.ui.iconList.on("aui-dropdown2-show",function(){c.ui.iconPicker.focus(),c.analyticsIconClicked=!1,c.analytics.iconPickerOpened(c.model)}),this.ui.iconList.on("aui-dropdown2-hide",function(){c.analytics.iconPickerClosed(c.model,c.analyticsIconClicked)}),this.analyticsOldIconId="",this.ui.iconList.on("aui-dropdown2-item-selected",function(i){var t=AJS.$(this).find(".active").data(e);c.analyticsOldIconId&&c.analyticsOldIconId!==t&&c.analytics.iconChanged(c.model,t,c.analyticsOldIconId),c.analyticsOldIconId=t}),this.ui.iconPicker.data(e,this.model.get("icon"))},hideIconPicker:function(){this.isPickerActive()&&this.ui.iconPicker.trigger("aui-button-invoke")},isPickerActive:function(){return this.ui.iconPicker.hasClass("active")},_modelIcon:function(){return this.iconFactory.getIconFromName(this.model.get("icon"))},onFormSubmit:function(){this.model.set("icon",this.ui.iconPicker.data(e)||"")},focus:function(){this.ui.iconPicker.focus()},serializeData:function(){return{iconsList:this.iconFactory.getIconsList(),icon:this._modelIcon(),cid:this.cid}}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/DialogContent.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent=JIRA.Projects.Libs.Marionette.LayoutView.extend({ui:{form:"form",inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel",url:".project-shortcuts-url input",name:".project-shortcuts-name input"},regions:{iconPicker:".project-shortcuts-icon-picker-block"},events:{"click @ui.cancel":function(t){t.preventDefault(),this.model.clear(),this.setNameAutomagically=!0,this.errorModel.clear(),this.trigger("cancel")},"click @ui.submit":"formSubmit","submit @ui.form":"formSubmit","blur @ui.url":function(){this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function(){this.model.set("url",this.ui.url.val()),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function(){this.setNameAutomagically=!1,this.model.set("name",this.ui.name.val())},"keydown @ui.name":function(t){this.iconPickerContent&&t.shiftKey&&t.keyCode===AJS.keyCode.TAB&&(t.preventDefault(),this.iconPickerContent.focus())},"keydown @ui.url":function(t){this.iconPickerContent&&(t.shiftKey||t.keyCode!==AJS.keyCode.TAB||(t.preventDefault(),this.iconPickerContent.focus()))}},modelEvents:{"save:start":function(){this.ui.inputs.prop("disabled",!0),this.ui.submit.addClass("loading"),this.ui.submit.spin({className:"spinner"})},"save:finish":function(){this.ui.inputs.prop("disabled",!1),this.ui.submit.removeClass("loading"),this.ui.submit.spinStop({className:"spinner"})},"save:failure":function(){if(this.render(),this.errorModel.get("generalError")){var t=require("aui/flag");t({type:"error",title:"We couldn\'t save the shortcut for you",close:"auto",body:this.errorModel.get("generalError")})}return this.errorModel.get("nameError")&&this.ui.name.focus(),this.errorModel.get("urlError")&&this.ui.url.focus(),this},"save:success":function(){this.setNameAutomagically=!0}},initialize:function(t){this.errorModel=t.errorModel;var e=this.model.get("name");this.setNameAutomagically=0==e.length,this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},serializeData:function(){return _.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action,isWithIcon:this.iconFactory.isWithIcons()})},onRender:function(){this.iconFactory.isWithIcons()?(this.iconPickerContent=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent({model:this.model,action:this.action,observable:this}),this.getRegion("iconPicker").show(this.iconPickerContent)):delete this.iconPickerContent},hideIconPicker:function(){this.iconPickerContent&&this.iconPickerContent.hideIconPicker()},setName:function(t){this.ui.name.val(t),this.model.set("name",t)},setUrl:function(t){this.ui.url.val(t),this.model.set("url",t)},ensureProtocolPrefix:function(){var t=this.ui.url.val().trim();t.length>0&&!JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlPattern.test(t)&&this.setUrl("http://"+t)},tryToAutomagicallyDeriveNameFromUrl:function(){var t=this.ui.url.val().trim();if(this.setNameAutomagically)if(JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.test(t)){var e=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.exec(t);this.setName(e[3])}else this.setName(t)},formSubmit:function(t){t.preventDefault(),this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl(),this.iconPickerContent&&this.iconPickerContent.onFormSubmit(),this.model.set({url:this.ui.url.val(),name:this.ui.name.val()}),this.model.save()}},{urlPattern:/^[a-zA-Z0-9]+:(\/\/)?([^\/]*).*/,urlOptionalProtocolPattern:/^([a-zA-Z0-9]+:(\/\/)?)?([^\/]*).*/})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/AddDialogContent.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/EditDialogContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content",["underscore","jira/featureflags/simplified-ux-feature-manager"],function(e,t){"use strict";var r=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent,i=r.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog});return t.isAdg3ModeOn()?i.extend({ui:e.extend({},r.prototype.ui,{delete:".project-shortcuts-delete"})}):i}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent",null,require("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Edit.js' */
define("jira/projects/sidebar/project-shortcuts/dialogs/edit",["jquery","jira/projects/sidebar/project-shortcuts/views/edit-dialog-content","jira/projects/libs/marionette","aui/flag","jira/featureflags/simplified-ux-feature-manager","jira/api/projects"],function(e,t,o,i,s,r){"use strict";return o.Controller.extend({initialize:function(o){var c=this;_.bindAll(this,"hide"),this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(o.model.toJSON(),{projectKey:o.model.projectKey||o.model.collection.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors((void 0),{model:this.model}),this.view=new t({model:this.model,errorModel:this.errorModel}),this.analyticsSave=!1,this.view.render();var d=e(JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome({}));if(this.view.$el.appendTo(d),this.dialog=AJS.dialog2(d),this.dialog.show(),this.view.ui.url.focus(),s.isAdg3ModeOn()){var l=r.getCurrentProjectType(),n=r.getCurrentProjectId();this.view.ui.delete.on("click",function(e){c.hide(),e.preventDefault(),AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.delete.dialog.opened",data:{isSave:!1,shortcutId:c.model.get("id"),projectId:n,projectType:l}});var t=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:c.model});c.listenToOnce(t,"dialog:close",function(e){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.delete.dialog.closed",data:{isSave:e,shortcutId:c.model.get("id"),projectId:n,projectType:l}})})}),this.listenTo(this.model,"remove:success",function(){o.model.collection&&o.model.collection.remove(c.model),i({type:"success",body:"Shortcut deleted.",close:"auto"})})}this._onResizeWindow=function(){c.hideIconPicker()},e(window).on("resize",this._onResizeWindow),this.listenTo(this.view,"cancel",this.hide),this.listenTo(this.model,"save:success",function(){i({type:"success",body:"You have updated the shortcut.",close:"auto"}),this.analyticsSave=!0,this.hide(),o.model.set(c.model.toJSON())}),this.dialog.on("hide",function(){c.trigger("dialog:close",c.analyticsSave)})},hideIconPicker:function(){this.view.hideIconPicker()},hide:function(){this.dialog.hide(),e(window).off("resize",this._onResizeWindow)}})}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit",null,require("jira/projects/sidebar/project-shortcuts/dialogs/edit"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/Shortcut.js' */
!function(e){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut");var o=require("jira/projects/sidebar/project-shortcuts/dialogs/edit");JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut,initialize:function(){_.bindAll(this,"toggleDropdown"),this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},ui:{del:".project-shortcuts-group__actions__delete",edit:".project-shortcuts-group__actions__edit",trigger:".project-shortcuts-group__actions",dropdown:".project-shortcuts-group__dropdown",link:".project-shortcuts-group__link"},modelEvents:{change:"render"},events:{"click @ui.link":function(){this.trigger("click:link",this.model)}},onRender:function(){var t=this;this.unwrapTemplate();var i=e(window),r=e(".aui-sidebar-body");this.ui.trigger.on("click",function(e){t.trigger("dropdown:click",t.model)}),this.ui.edit.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var i=new o({model:t.model});t.trigger("edit:open",t.model),t.listenToOnce(i,"dialog:close",function(e){t.trigger("edit:close",t.model,e)})}),this.ui.del.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var o=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:t.model});t.trigger("delete:open",t.model),t.listenToOnce(o,"dialog:close",function(e){t.trigger("delete:close",t.model,e)})}),this.ui.dropdown.on({"aui-dropdown2-show":function(){t.$el.addClass("aui-nav-selected"),r.one("scroll",t.toggleDropdown),i.one("scroll",t.toggleDropdown),t.ui.trigger.focus()},"aui-dropdown2-hide":function(){t.$el.removeClass("aui-nav-selected"),r.off("scroll",t.toggleDropdown),i.off("scroll",t.toggleDropdown)}})},serializeData:function(){var e=_.extend(this.model.toJSON(),{canManage:!0,isWithIcon:this.iconFactory.isWithIcons()});return this.iconFactory.isWithIcons()&&(e=_.extend(e,{iconsMap:JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.getIconsMap()})),e},toggleDropdown:function(){this.ui.trigger.trigger("aui-button-invoke")}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/ShortcutsList.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.List");var e=require("jira/projects/sidebar/projectShortcuts/dialogs/add");JIRA.Projects.Sidebar.ProjectShortcuts.Views.List=JIRA.Projects.Libs.Marionette.CompositeView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content,childView:JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut,ui:{itemsContainer:".aui-nav",description:".project-shortcuts-group__description",add:".project-shortcuts-group__add"},collectionEvents:{"add remove":function(){(0==this.collection.length&&0!=this.lastCollectionLength||0!=this.collection.length&&0==this.lastCollectionLength)&&(this.lastCollectionLength=this.collection.length,this.ui.description.toggleClass("hidden",this.collection.length>0),this.$el.toggleClass("project-shortcuts-group_empty",0==this.collection.length))}},initialize:function(){var e=this;JIRA.API.getSidebar().done(function(o){o.on("expand-end",function(){t(".aui-sidebar-submenu-dialog .project-shortcuts-group__dropdown").remove()}),o.on("collapse-start",function(){e.$(".project-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke")})}),this.lastCollectionLength=this.collection.length},attachElContent:function(e){var o=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:e});return JIRA.API.Sidebar.replaceGroup(this.options.targetGroup,o),this.$el=t(o.getElement()),this},onRender:function(){var t=new e({sidebarItem:JIRA.API.Sidebar.getGroup("project-shortcuts-group").getItem("project-shortcut-add"),projectKey:this.collection.projectKey,collection:this.collection});this.listenTo(t,"dialog:open",function(){this.trigger("add:open")}),this.listenTo(t,"dialog:close",function(t){this.trigger("add:close",t)})},serializeData:function(){return{canManage:!0,numberOfShortcuts:this.collection.length}},attachBuffer:function(t,e){this.ui.itemsContainer.prepend(e)},onAddChild:function(t){this.ui.add.parent().before(t.$el)}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Delete.js' */
!function(e){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete"),JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog,ui:{inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel"},events:{"click @ui.cancel":function(e){e.preventDefault(),this.trigger("dialog:close",!1),this.dialog.hide()},"click @ui.submit":function(e){e.preventDefault(),this.trigger("dialog:close",!0),this.model.destroy({wait:!0})}},modelEvents:{"remove:start":function(){this.ui.inputs.prop("disabled",!0),this.ui.submit.addClass("loading"),this.ui.submit.spin({className:"spinner"})},"remove:finish":function(){this.ui.inputs.prop("disabled",!1),this.ui.submit.removeClass("loading"),this.ui.submit.spinStop({className:"spinner"}),this.dialog.hide(),JIRA.trace("jira.projects.shortcuts.deleted")},"remove:failure":function(e){if(e.message||e.errorMessages&&e.errorMessages.length>0){var t=require("aui/flag");t({type:"error",title:"We couldn\'t delete the shortcut for you",close:"auto",body:e.message||e.errorMessages[0]})}}},initialize:function(){this.render(),this.$el.appendTo("body"),this.dialog=AJS.dialog2(this.$el),this.dialog.show();var e=this;this.dialog.on("hide",function(){_.defer(function(){e.destroy()})})},onRender:function(){this.unwrapTemplate()}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-init', location = '/sidebar/project-shortcuts/project-shortcuts-analytics.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Analytics");var t="a.project-shortcuts-group__link",e=AJS.DarkFeatures.isEnabled("com.atlassian.jira.projects.ProjectCentricNavigation.ProjectShortcutIcons"),i=require("jira/api/projects");JIRA.Projects.Sidebar.ProjectShortcuts.Analytics={initialize:function(){},initShortcutClick:function(c,o){var r=AJS.sidebar(o),n=AJS.$(c),s=this;n.on("click",t,function(c){var o=n.find(t),d=AJS.$(this);i.getCurrentProjectId(),i.getCurrentProjectType();s._triggerAnalyticsEvent("jira.projects.shortcut.clicked",{shortcutId:d.data("shortcutId"),shortcutPosition:d.closest("li").index()+1,shortcutIconName:e?d.find(".aui-icon").data("projectShortcutsIconId"):"",shortcutCount:o.size(),isWithIcons:e,isSidebarCollapsed:r.isCollapsed(),projectId:s.projectId,projectType:s.projectType})})},initDialogActions:function(t){var i=this,c=function(t,c){var o=t.collection.indexOf(t)+1;return{isWithIcons:e,isSave:c,shortcutId:t.get("id"),shortcutPosition:o,shortcutCount:t.collection.size(),projectId:i.projectId,projectType:i.projectType}};t.on("childview:dropdown:click",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.dropdown.clicked",c(e,!1))}),t.on("childview:edit:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.opened",c(e,!1))}),t.on("childview:edit:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.closed",c(e,o))}),t.on("childview:delete:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.opened",c(e))}),t.on("childview:delete:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.closed",c(e,o))}),t.on("add:open",function(){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.opened",{isWithIcons:e,projectId:i.projectId,projectType:i.projectType})}),t.on("add:close",function(t){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.closed",{isWithIcons:e,isSave:t,projectId:i.projectId,projectType:i.projectType})})},iconChanged:function(t,e,i){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.changed",{iconName:e,oldIconName:i,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconChangeConfirmed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.confirmed",{oldIconName:t.get("icon"),iconName:e,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:projectType})},iconPickerOpened:function(t){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.opened",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconPickerClosed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.closed",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,isSave:e,projectId:this.projectId,projectType:this.projectType})},_triggerAnalyticsEvent:function(t,e){AJS.trigger("analyticsEvent",{name:t,data:e})}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-init', location = '/sidebar/project-shortcuts/project-shortcuts-init.js' */
require(["jira/featureflags/simplified-ux-feature-manager"],function(t){t.isAdg3ModeOn()||JIRA.API.getSidebar().done(function(){var t=WRM.data.claim("com.atlassian.jira.projects.shortcuts:project-id"),r=JIRA.API.Projects.getCurrentProjectType();if(JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initialize(t,r),WRM.data.claim("com.atlassian.jira.projects.shortcuts:can-manage")){var e=WRM.data.claim("com.atlassian.jira.projects.shortcuts:with-icons");e&&JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.initialize(WRM.data.claim("com.atlassian.jira.projects.shortcuts:icons-list")),JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.setWithIcons(e);var c=JIRA.API.Projects.getCurrentProjectKey(),s=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts(WRM.data.claim("com.atlassian.jira.projects.shortcuts:shortcuts"),{projectKey:c}),a=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.List({collection:s,targetGroup:"project-shortcuts-group"});a.render(),JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initDialogActions(a)}JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initShortcutClick(".project-shortcuts-list",".aui-sidebar")})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-adg3', location = '/sidebar/project-shortcuts/project-shortcuts-analytics.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Analytics");var t="a.project-shortcuts-group__link",e=AJS.DarkFeatures.isEnabled("com.atlassian.jira.projects.ProjectCentricNavigation.ProjectShortcutIcons"),i=require("jira/api/projects");JIRA.Projects.Sidebar.ProjectShortcuts.Analytics={initialize:function(){},initShortcutClick:function(c,o){var r=AJS.sidebar(o),n=AJS.$(c),s=this;n.on("click",t,function(c){var o=n.find(t),d=AJS.$(this);i.getCurrentProjectId(),i.getCurrentProjectType();s._triggerAnalyticsEvent("jira.projects.shortcut.clicked",{shortcutId:d.data("shortcutId"),shortcutPosition:d.closest("li").index()+1,shortcutIconName:e?d.find(".aui-icon").data("projectShortcutsIconId"):"",shortcutCount:o.size(),isWithIcons:e,isSidebarCollapsed:r.isCollapsed(),projectId:s.projectId,projectType:s.projectType})})},initDialogActions:function(t){var i=this,c=function(t,c){var o=t.collection.indexOf(t)+1;return{isWithIcons:e,isSave:c,shortcutId:t.get("id"),shortcutPosition:o,shortcutCount:t.collection.size(),projectId:i.projectId,projectType:i.projectType}};t.on("childview:dropdown:click",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.dropdown.clicked",c(e,!1))}),t.on("childview:edit:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.opened",c(e,!1))}),t.on("childview:edit:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.closed",c(e,o))}),t.on("childview:delete:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.opened",c(e))}),t.on("childview:delete:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.closed",c(e,o))}),t.on("add:open",function(){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.opened",{isWithIcons:e,projectId:i.projectId,projectType:i.projectType})}),t.on("add:close",function(t){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.closed",{isWithIcons:e,isSave:t,projectId:i.projectId,projectType:i.projectType})})},iconChanged:function(t,e,i){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.changed",{iconName:e,oldIconName:i,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconChangeConfirmed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.confirmed",{oldIconName:t.get("icon"),iconName:e,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:projectType})},iconPickerOpened:function(t){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.opened",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconPickerClosed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.closed",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,isSave:e,projectId:this.projectId,projectType:this.projectType})},_triggerAnalyticsEvent:function(t,e){AJS.trigger("analyticsEvent",{name:t,data:e})}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-adg3', location = '/sidebar/project-shortcuts/project-shortcuts-init-adg3.js' */
require(["jira/featureflags/simplified-ux-feature-manager","jira/featureflags/feature-manager","jira/projects/sidebar/projectShortcuts/dialogs/add","jira/api/projects"],function(t,e,r,i){if(t.isAdg3ModeOn()){var o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link.",a="project.shortcut.default.link",n=i.getCurrentProjectKey(),c=i.getCurrentProjectType(),s=i.getCurrentProjectId(),d=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts([],{projectKey:n}),u=function(t){t.on(t.events.JIRA_SUMMON_ADD_SHORTCUT_DIALOG,function(t,e){if("com.atlassian.jira.jira-projects-plugin:project-shortcut-type"===e.shortcutTypeId){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.opened",data:{projectId:s,projectType:c}});var i=new r({projectKey:n,collection:d});i.on("dialog:close",function(t){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.closed",data:{isSave:t,projectId:s,projectType:c}})})}})},j=function(t){t.on(t.events.EDIT,function(e){var r=e.target.getId();if(r&&0===r.indexOf(o)){var i=r.substr(o.length),u=t.getItem(r),j=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut({id:i,name:u.name,type:a,url:u.url},{projectKey:n});d.add(j),AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.opened",data:{isSave:!1,shortcutId:j.get("id"),projectId:s,projectType:c}});var l=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit({model:j});l.on("dialog:close",function(t){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.closed",data:{isSave:t,shortcutId:j.get("id"),projectId:s,projectType:c}})}),j.on("change",function(){t.replaceItem(r,{id:r,name:j.get("name"),url:j.get("url"),canEdit:!0})}),d.on("remove",function(e){t.deleteItem(o+e.get("id"))})}})},o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link.",l="com.atlassian.jira.jira-projects-plugin:source.code.link.",g="com.atlassian.jira.projects.ProjectCentricNavigation.ProjectShortcutIcons",p=function(t){t.on(t.events.BEFORE_NAVIGATE,function(r){var i=r.target.getId(),a=!1,n="";if(i.indexOf(o)>=0?(a=!0,n=o):l.indexOf(l)>=0&&(a=!0,n=l),a){var c={},s=t.findParentOf(i),d=t.getItem(i),u=s.links.filter(function(t){return t.indexOf(n)>=0});c.shortcutId=i.substring(n.length),c.shortcutPosition=u.indexOf(i),c.shortcutIconName=d.icon||"",c.shortcutCount=u.length,c.isWithIcons=e.isFeatureEnabled(g),AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.clicked",data:c})}}.bind(this))}.bind(this);JIRA.API.getSidebar().done(function(t){u(t),j(t),p(t)})}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:report-page-assets', location = '/page/project/report/analytics.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Report"),JIRA.Projects.Report.Analytics=function(){t(".reports .reports__list__report").on("click",function(r){var e=t(this);AJS.trigger("analyticsEvent",{name:"jira.projects.report.clicked",data:{report:e.attr("data-report-key"),category:e.closest("ul").attr("data-category-key"),listPosition:e.closest("li").prevAll().length+1}})})},t(JIRA.Projects.Report.Analytics)}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-storage', location = '/sidebar/reports/reports-link-storage.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Reports"),JIRA.Projects.Sidebar.Reports={storeLastViewedReportLink:function(e,r){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||r&&r.isProjectSidebar()){var t=this._createLastViewedReportKey(r);require("jira/data/local-storage").setItem(t,e),this._setReportsItemLink(e,r)}JIRA.trace("jira.projects.sidebar.reports.link.stored")},restoreLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar()){var r=this._createLastViewedReportKey(e),t=require("jira/data/local-storage").getItem(r);t&&this._setReportsItemLink(t,e)}JIRA.trace("jira.projects.sidebar.reports.link.restored")},removeLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar()){var r=this._createLastViewedReportKey(e);require("jira/data/local-storage").removeItem(r)}JIRA.trace("jira.projects.sidebar.reports.link.remove")},getLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar()){var r=this._createLastViewedReportKey(e),t=require("jira/data/local-storage").getItem(r);if(t)return t}return""},_createLastViewedReportKey:function(e){var r=JIRA.API.Sidebar?JIRA.API.Sidebar.getSelectedScopeFilterId():e?e.getSelectedScopeFilterId():"",t=JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key")||"uc.context",i="last.viewed.report."+t;return r&&(i+="."+r),i},_setReportsItemLink:function(e,r){if(!JIRA.API.Sidebar)return"";var t=JIRA.API.Sidebar.getGroup("sidebar-navigation-panel"),i=t.getItem("com.atlassian.jira.jira-projects-plugin:report-page");"undefined"==typeof i&&(i=t.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")),i&&i.attr("href",e)}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link', location = '/sidebar/reports/reports-link.js' */
define("jira/projects/sidebar/reports/reports-link",["jira/featureflags/simplified-ux-feature-manager","underscore"],function(e,t){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ReportsLink"),JIRA.Projects.Sidebar.ReportsLink={CONSTANT:{REPORTS_NAVGROUP_IDS:["com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:user-container-sidebar-report"],COMPARE_PARAMS:["chart","rapidView","view"],AGILE_SECTION_IN_UC_SIDEBAR_ID:"uc_report_agile_sidebar_links",OVERVIEW_PAGE_REGEX:/projects\/.+selectedItem=com.atlassian.jira.jira-projects-plugin:report-page/i},_location:function(){if("undefined"!=typeof window)return window.location},_isSameReport:function(e,r){var i=this._getUrlParams(e),n=this._getUrlParams(r);return t.filter(this.CONSTANT.COMPARE_PARAMS,function(e){return i[e]&&n[e]&&i[e]===n[e]}).length===this.CONSTANT.COMPARE_PARAMS.length},_getUrlParams:function(e){var t=e.split("?");try{return 1===t.length?{}:JSON.parse('{"'+t[1].replace(/#.*$/,"").replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,t){return""===e?t:decodeURIComponent(t)})}catch(e){return{}}},handleOverviewPage:function(t){var r=this.CONSTANT.OVERVIEW_PAGE_REGEX.test(this._location().href);r&&e.isAdg3ModeOn()&&JIRA.Projects.Sidebar.Reports.removeLastViewedReportLink(t)},handleNonAgileReports:function(t){var r=this._location().pathname,i=0===r.indexOf(AJS.contextPath()+"/secure/ConfigureReport");if(i&&(JIRA.Projects.Sidebar.Reports.removeLastViewedReportLink(t),e.isAdg3ModeOn())){var n=this._location().href.replace(/^.*\/\/[^\/]+/,"");JIRA.Projects.Sidebar.Reports.storeLastViewedReportLink(n,t)}},handleAdg2:function(e){JIRA.Projects.Sidebar.Reports.restoreLastViewedReportLink(e)},handleClickingOnReports:function(e,r){if(t.contains(this.CONSTANT.REPORTS_NAVGROUP_IDS,r.target.getId())){var i=AJS.contextPath(),n=JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key"),a=this._location().href.replace(/^.*\/\/[^\/]+/,""),o=JIRA.Projects.Sidebar.Reports.getLastViewedReportLink(e);if(n){var s=i+"/projects/"+n+"?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page";o=o||s}else{var c=e.getGroup(this.CONSTANT.AGILE_SECTION_IN_UC_SIDEBAR_ID);!o&&c&&c.links&&c.links.length&&(o=c.links[0].url)}o===a||this._isSameReport(o,a)||(r.preventDefault(),this._location().assign(o))}},handleSwitchingBoards:function(e,t){e.preventDefault(),AJS.$.ajax({url:AJS.contextPath()+"/rest/greenhopper/1.0/rapidview/addtohistory",type:"POST",data:JSON.stringify({rapidViewId:t.id}),dataType:"json",contentType:"application/json"}).done(function(){JIRA.Projects.Sidebar.ReportsLink._location().reload()})},handleReportsLink:function(t){if(this.handleOverviewPage(t),this.handleNonAgileReports(t),this.handleAdg2(t),e.isAdg3ModeOn()){var r=this;t.on("before:nested",function(e){r.handleClickingOnReports(t,e)});var i=this.CONSTANT.OVERVIEW_PAGE_REGEX.test(this._location().href),n=this._location().pathname,a=0===n.indexOf(AJS.contextPath()+"/secure/ConfigureReport");(i||a)&&t.on("scope-switcher:before:navigate",this.handleSwitchingBoards)}}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-init', location = '/sidebar/reports/reports-link-init.js' */
AJS.$(function(){"use strict";require("jira/projects/sidebar/reports/reports-link"),JIRA.API.getSidebar().done(function(e){JIRA.Projects.Sidebar.ReportsLink.handleReportsLink(e)})});;
;
/* module-key = 'com.atlassian.plugin.jslibs:bluebird-2.3.6', location = 'libs/bluebird/2.3.6/bluebird-2.3.6.js' */
/*
 The MIT License (MIT)

 Copyright (c) 2014 Petka Antonov

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:</p>

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.

*/
(function(r){define("atlassian/libs/bluebird-2.3.6",function(){var t={};r(t);return"undefined"!==typeof exports?module.exports.noConflict():t.Promise.noConflict()})})(function(r){var t=function(){return function d(o,b,a){function k(f,j){if(!b[f]){if(!o[f]){var l="function"==typeof require&&require;if(!j&&l)return l(f,!0);if(m)return m(f,!0);throw Error("Cannot find module '"+f+"'");}l=b[f]={exports:{}};o[f][0].call(l.exports,function(a){var h=o[f][1][a];return k(h?h:a)},l,l.exports,d,o,b,a)}return b[f].exports}
for(var m="function"==typeof require&&require,i=0;i<a.length;i++)k(a[i]);return k}({1:[function(d,o){o.exports=function(b){function a(a){var a=new k(a),b=a.promise();if(b.isRejected())return b;a.setHowMany(1);a.setUnwrap();a.init();return b}var k=b._SomePromiseArray;b.any=function(b){return a(b)};b.prototype.any=function(){return a(this)}}},{}],2:[function(d,o){function b(){this._isTickUsed=!1;this._schedule=a;this._length=0;this._lateBuffer=new k(16);this._functionBuffer=new k(65536);var b=this;
this.consumeFunctionBuffer=function(){b._consumeFunctionBuffer()}}var a=d("./schedule.js"),k=d("./queue.js"),m=d("./util.js").errorObj,i=d("./util.js").tryCatch1,f="undefined"!==typeof process?process:void 0;b.prototype.haveItemsQueued=function(){return 0<this._length};b.prototype.invokeLater=function(a,b,n){void 0!==f&&(null!=f.domain&&!a.domain)&&(a=f.domain.bind(a));this._lateBuffer.push(a,b,n);this._queueTick()};b.prototype.invoke=function(a,b,n){void 0!==f&&(null!=f.domain&&!a.domain)&&(a=f.domain.bind(a));
var h=this._functionBuffer;h.push(a,b,n);this._length=h.length();this._queueTick()};b.prototype._consumeFunctionBuffer=function(){for(var a=this._functionBuffer;0<a.length();){var b=a.shift(),n=a.shift(),h=a.shift();b.call(n,h)}this._reset();this._consumeLateBuffer()};b.prototype._consumeLateBuffer=function(){for(var a=this._lateBuffer;0<a.length();){var b=a.shift(),n=a.shift(),h=a.shift(),n=i(b,n,h);if(n===m)if(this._queueTick(),null!=b.domain)b.domain.emit("error",n.e);else throw n.e;}};b.prototype._queueTick=
function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)};b.prototype._reset=function(){this._isTickUsed=!1;this._length=0};o.exports=new b},{"./queue.js":25,"./schedule.js":28,"./util.js":35}],3:[function(d,o){var b=d("./promise.js")();o.exports=b},{"./promise.js":20}],4:[function(d,o){var b=Object.create;if(b){var a=b(null),k=b(null);a[" size"]=k[" size"]=0}o.exports=function(b){function i(a){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,
a))}function f(a){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",a))}function j(a,g,c){var b=c[a];if("function"!==typeof b){if(!q(a))return null;b=g(a);c[a]=b;c[" size"]++;if(512<c[" size"]){a=Object.keys(c);for(g=0;256>g;++g)delete c[a[g]];c[" size"]=a.length-256}}return b}function l(a){return a[this.pop()].apply(a,
this)}function n(a){return a[this]}function h(a){return a[this]}var c=d("./util.js"),e=c.canEvaluate,q=c.isIdentifier;b.prototype.call=function(p){for(var g=arguments.length,c=Array(g-1),b=1;b<g;++b)c[b-1]=arguments[b];if(e&&(g=j(p,i,a),null!==g))return this._then(g,void 0,void 0,c,void 0);c.push(p);return this._then(l,void 0,void 0,c,void 0)};b.prototype.get=function(a){var g;"number"!==typeof a?e?(g=j(a,f,k),g=null!==g?g:n):g=n:g=h;return this._then(g,void 0,void 0,a,void 0)}}},{"./util.js":35}],
5:[function(d,o){o.exports=function(b,a){var k=d("./errors.js"),m=k.canAttach,i=d("./async.js"),f=k.CancellationError;b.prototype._cancel=function(a){if(!this.isCancellable())return this;for(var b,n=this;void 0!==(b=n._cancellationParent)&&b.isCancellable();)n=b;n._attachExtraTrace(a);n._rejectUnchecked(a)};b.prototype.cancel=function(a){if(!this.isCancellable())return this;a=void 0!==a?m(a)?a:Error(a+""):new f;i.invokeLater(this._cancel,this,a);return this};b.prototype.cancellable=function(){if(this._cancellable())return this;
this._setCancellable();this._cancellationParent=void 0;return this};b.prototype.uncancellable=function(){var m=new b(a);m._propagateFrom(this,6);m._follow(this);m._unsetCancellable();return m};b.prototype.fork=function(a,b,n){a=this._then(a,b,n,void 0,void 0);a._setCancellable();a._cancellationParent=void 0;return a}}},{"./async.js":2,"./errors.js":10}],6:[function(d,o){o.exports=function(){function b(a){var b;if("function"===typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a.toString();if(/\[object [a-zA-Z0-9$_]+\]/.test(b))try{b=
JSON.stringify(a)}catch(c){}0===b.length&&(b="(empty array)")}a=41>b.length?b:b.substr(0,38)+"...";return"(<"+a+">, no stack trace)"}function a(b,h){this.captureStackTrace(a,h)}var k=d("./util.js").inherits,m=d("./es5.js").defineProperty,i=RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|3|4|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),f=null,j=null;k(a,Error);
a.prototype.captureStackTrace=function(a,b){l(this,a,b)};a.possiblyUnhandledRejection=function(a){"object"===typeof console&&(a="object"===typeof a||"function"===typeof a?"Possibly unhandled "+j(a.stack,a):"Possibly unhandled "+String(a),"function"===typeof console.error||"object"===typeof console.error?console.error(a):("function"===typeof console.log||"object"===typeof console.log)&&console.log(a))};a.combine=function(a,b){for(var c=a.length-1,e=b.length-1;0<=e;--e)if(a[c]===b[e])a.pop(),c--;else break;
a.push("From previous event:");for(var c=a.concat(b),q=[],e=0,p=c.length;e<p;++e)i.test(c[e])&&f.test(c[e])||0<e&&!f.test(c[e])&&"From previous event:"!==c[e]||q.push(c[e]);return q};a.protectErrorMessageNewlines=function(a){for(var b=0;b<a.length&&!f.test(a[b]);++b);if(!(1>=b)){for(var c=[],e=0;e<b;++e)c.push(a.shift());a.unshift(c.join("\u0002\x00\u0001"))}};a.isSupported=function(){return"function"===typeof l};var l=function h(){if("number"===typeof Error.stackTraceLimit&&"function"===typeof Error.captureStackTrace){f=
/^\s*at\s*/;j=function(a,g){return"string"===typeof a?a:void 0!==g.name&&void 0!==g.message?g.name+". "+g.message:b(g)};var a=Error.captureStackTrace;return function(b,g){a(b,g)}}var e=Error();if("string"===typeof e.stack&&"function"===typeof"".startsWith&&e.stack.startsWith("stackDetection@")&&"stackDetection"===h.name){m(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25});f=/@/;var q=/[@\n]/;j=function(a,g){return"string"===typeof a?g.name+". "+g.message+"\n"+a:void 0!==
g.name&&void 0!==g.message?g.name+". "+g.message:b(g)};return function(a){for(var b=Error().stack.split(q),c=b.length,e="",h=0;h<c;h+=2)e+=b[h],e+="@",e+=b[h+1],e+="\n";a.stack=e}}j=function(a,g){return"string"===typeof a?a:("object"===typeof g||"function"===typeof g)&&void 0!==g.name&&void 0!==g.message?g.name+". "+g.message:b(g)};return null}();return a}},{"./es5.js":12,"./util.js":35}],7:[function(d,o){o.exports=function(b){function a(a,b,c){this._instances=a;this._callback=b;this._promise=c}var k=
d("./util.js"),m=d("./errors.js"),i=k.tryCatch1,f=k.errorObj,j=d("./es5.js").keys,l=m.TypeError;a.prototype.doFilter=function(a){for(var h=this._callback,c=this._promise._boundTo,e=0,q=this._instances.length;e<q;++e){var p=this._instances[e],g=p===Error||null!=p&&p.prototype instanceof Error;if(g&&a instanceof p)return a=i(h,c,a),a===f?(b.e=a.e,b):a;if("function"===typeof p&&!g)if(g={},p=i(p,g,a),p!==f&&j(g).length&&(f.e=new l("Catch filter must inherit from Error or be a simple predicate function"),
p=f),p===f){a=m.canAttach(f.e)?f.e:Error(f.e+"");this._promise._attachExtraTrace(a);a=f.e;break}else if(p)return a=i(h,c,a),a===f?(b.e=a.e,b):a}b.e=a;return b};return a}},{"./errors.js":10,"./es5.js":12,"./util.js":35}],8:[function(d,o){var b=d("./util.js"),a=b.isPrimitive,k=b.wrapsPrimitiveReceiver;o.exports=function(b){var i=function(){return this},f=function(){throw this;},d=function(a,b){if(1===b)return function(){throw a;};if(2===b)return function(){return a}};b.prototype["return"]=b.prototype.thenReturn=
function(b){return k&&a(b)?this._then(d(b,2),void 0,void 0,void 0,void 0):this._then(i,void 0,void 0,b,void 0)};b.prototype["throw"]=b.prototype.thenThrow=function(b){return k&&a(b)?this._then(d(b,1),void 0,void 0,void 0,void 0):this._then(f,void 0,void 0,b,void 0)}}},{"./util.js":35}],9:[function(d,o){o.exports=function(b,a){var k=b.reduce;b.prototype.each=function(b){return k(this,b,null,a)};b.each=function(b,i){return k(b,i,null,a)}}},{}],10:[function(d,o){function b(a,b){function p(c){if(!(this instanceof
p))return new p(c);this.message="string"===typeof c?c:b;this.name=a;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}i(p,Error);return p}function a(a){this.name="OperationalError";this.cause=this.message=a;this.isOperational=!0;a instanceof Error?(this.message=a.message,this.stack=a.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var k=d("./es5.js").freeze,m=d("./util.js"),i=m.inherits,f=m.notEnumerableProp,j,l,m=b("CancellationError","cancellation error"),
n=b("TimeoutError","timeout error"),h=b("AggregateError","aggregate error");try{j=TypeError,l=RangeError}catch(c){j=b("TypeError","type error"),l=b("RangeError","range error")}for(var e="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),q=0;q<e.length;++q)"function"===typeof Array.prototype[e[q]]&&(h.prototype[e[q]]=Array.prototype[e[q]]);h.prototype.length=0;h.prototype.isOperational=!0;var p=0;h.prototype.toString=function(){var a=
Array(4*p+1).join(" "),b="\n"+a+"AggregateError of:\n";p++;for(var a=Array(4*p+1).join(" "),c=0;c<this.length;++c){for(var e=this[c]===this?"[Circular AggregateError]":this[c]+"",e=e.split("\n"),h=0;h<e.length;++h)e[h]=a+e[h];e=e.join("\n");b+=e+"\n"}p--;return b};i(a,Error);e=Error.__BluebirdErrorTypes__;e||(e=k({CancellationError:m,TimeoutError:n,OperationalError:a,RejectionError:a,AggregateError:h}),f(Error,"__BluebirdErrorTypes__",e));o.exports={Error:Error,TypeError:j,RangeError:l,CancellationError:e.CancellationError,
OperationalError:e.OperationalError,TimeoutError:e.TimeoutError,AggregateError:e.AggregateError,originatesFromRejection:function(b){return b==null?false:b instanceof a||b.isOperational===true},markAsOriginatingFromRejection:function(a){try{f(a,"isOperational",true)}catch(b){}},canAttach:function(a){return a instanceof Error}}},{"./es5.js":12,"./util.js":35}],11:[function(d,o){o.exports=function(b){var a=d("./errors.js").TypeError;return function(k){var k=new a(k),m=b.rejected(k),i=m._peekContext();
null!=i&&i._attachExtraTrace(k);return m}}},{"./errors.js":10}],12:[function(d,o){var b=function(){return void 0===this}();if(b)o.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:b};else{var a={}.hasOwnProperty,k={}.toString,m={}.constructor.prototype;o.exports={isArray:function(a){try{return"[object Array]"===k.call(a)}catch(b){return!1}},keys:function(b){var f=[],m;for(m in b)a.call(b,m)&&f.push(m);
return f},defineProperty:function(a,b,m){a[b]=m.value;return a},freeze:function(a){return a},getPrototypeOf:function(a){try{return Object(a).constructor.prototype}catch(b){return m}},isES5:b}}},{}],13:[function(d,o){o.exports=function(b,a){var k=b.map;b.prototype.filter=function(b,d){return k(this,b,d,a)};b.filter=function(b,d,f){return k(b,d,f,a)}}},{}],14:[function(d,o){o.exports=function(b,a,k){function m(){return this}function i(){throw this;}function f(a,b,g){g=h&&c(b)?g?function(){return b}:
function(){throw b;}:g?m:i;return a._then(g,e,void 0,b,void 0)}function j(c){var p=this.promise,g=this.handler,g=p._isBound()?g.call(p._boundTo):g();return void 0!==g&&(g=k(g,void 0),g instanceof b)?f(g,c,p.isFulfilled()):p.isRejected()?(a.e=c,a):c}function l(a){var c=this.promise,g=this.handler,c=c._isBound()?g.call(c._boundTo,a):g(a);return void 0!==c&&(c=k(c,void 0),c instanceof b)?f(c,a,!0):a}var n=d("./util.js"),h=n.wrapsPrimitiveReceiver,c=n.isPrimitive,e=n.thrower;b.prototype._passThroughHandler=
function(a,b){return"function"!==typeof a?this.then():this._then(b?j:l,b?j:void 0,void 0,{promise:this,handler:a},void 0)};b.prototype.lastly=b.prototype["finally"]=function(a){return this._passThroughHandler(a,!0)};b.prototype.tap=function(a){return this._passThroughHandler(a,!1)}}},{"./util.js":35}],15:[function(d,o){o.exports=function(b,a,k,m){function i(a,g){for(var h=c,q=b,n=g.length,l=0;l<n;++l){var f=e(g[l],void 0,a);if(f===h)return q.reject(h.e);f=m(f,i);if(f instanceof q)return f}return null}
function f(a,c,e){(this._promise=new b(k))._setTrace(void 0);this._generatorFunction=a;this._receiver=c;this._generator=void 0;this._yieldHandlers="function"===typeof e?[e].concat(q):q}var j=d("./errors.js"),l=j.TypeError,n=d("./util.js").deprecated,h=d("./util.js"),c=h.errorObj,e=h.tryCatch1,q=[];f.prototype.promise=function(){return this._promise};f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=void 0;this._next(void 0)};
f.prototype._continue=function(a){if(a===c){this._generator=void 0;var e=j.canAttach(a.e)?a.e:Error(a.e+"");this._promise._attachExtraTrace(e);this._promise._reject(a.e,e)}else if(e=a.value,!0===a.done)this._generator=void 0,this._promise._tryFollow(e)||this._promise._fulfill(e);else{a=m(e,void 0);if(!(a instanceof b)&&(a=i(a,this._yieldHandlers),null===a)){this._throw(new l("A value was yielded that could not be treated as a promise"));return}a._then(this._next,this._throw,void 0,this,null)}};f.prototype._throw=
function(a){j.canAttach(a)&&this._promise._attachExtraTrace(a);this._continue(e(this._generator["throw"],this._generator,a))};f.prototype._next=function(a){this._continue(e(this._generator.next,this._generator,a))};b.coroutine=function(a,b){if("function"!==typeof a)throw new l("generatorFunction must be a function");var c=Object(b).yieldHandler;return function(){var b=a.apply(this,arguments),e=new f(void 0,void 0,c);e._generator=b;e._next(void 0);return e.promise()}};b.coroutine.addYieldHandler=function(a){if("function"!==
typeof a)throw new l("fn must be a function");q.push(a)};b.spawn=function(c){n("Promise.spawn is deprecated. Use Promise.coroutine instead.");if("function"!==typeof c)return a("generatorFunction must be a function");var c=new f(c,this),e=c.promise();c._run(b.spawn);return e}}},{"./errors.js":10,"./util.js":35}],16:[function(d,o){o.exports=function(b,a,k,m){var i=d("./util.js"),f=i.canEvaluate,j=i.tryCatch1,l=i.errorObj;if(f){for(var i=function(a){for(var b=[],c=1;c<=a;++c)b.push("holder.p"+c);return new Function("holder",
"                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,b.join(", ")))},n=[],h=[void 0],c=1;5>=c;++c)n.push(new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,
c))),h.push(i(c));var e=function(a,b){this.p1=this.p2=this.p3=this.p4=this.p5=null;this.fn=b;this.total=a;this.now=0};e.prototype.callers=h;e.prototype.checkFulfillment=function(a){var b=this.now;b++;var c=this.total;b>=c?(b=j(this.callers[c],void 0,this),b===l?a._rejectUnchecked(b.e):a._tryFollow(b)||a._fulfillUnchecked(b)):this.now=b}}b.join=function(){var c=arguments.length-1,h;if(0<c&&"function"===typeof arguments[c]&&(h=arguments[c],6>c&&f)){var g=new b(m);g._setTrace(void 0);h=new e(c,h);for(var l=
g._reject,d=n,i=0;i<c;++i){var j=k(arguments[i],void 0);j instanceof b?j.isPending()?j._then(d[i],l,void 0,g,h):j.isFulfilled()?d[i].call(g,j._settledValue,h):(g._reject(j._settledValue),j._unsetRejectionIsUnhandled()):d[i].call(g,j,h)}return g}c=arguments.length;g=Array(c);for(l=0;l<c;++l)g[l]=arguments[l];g=(new a(g)).promise();return void 0!==h?g.spread(h):g}}},{"./util.js":35}],17:[function(d,o){o.exports=function(b,a,k,m,i){function f(a,b,c,h){this.constructor$(a);this._callback=b;this._preservedValues=
h===i?Array(this.length()):null;this._limit=c;this._inFlight=0;this._queue=1<=c?[]:e;this._init$(void 0,-2)}function j(a,b,c,e){c="object"===typeof c&&null!==c?c.concurrency:0;c="number"===typeof c&&isFinite(c)&&1<=c?c:0;return new f(a,b,c,e)}var l=d("./util.js"),n=l.tryCatch3,h=l.errorObj,c={},e=[];l.inherits(f,a);f.prototype._init=function(){};f.prototype._promiseFulfilled=function(a,e){var g=this._values;if(null!==g){var l=this.length(),f=this._preservedValues,d=this._limit;if(g[e]===c){if(g[e]=
a,1<=d&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(1<=d&&this._inFlight>=d){g[e]=a;this._queue.push(e);return}null!==f&&(f[e]=a);var k=n(this._callback,this._promise._boundTo,a,e,l);if(k===h)return this._reject(k.e);var i=m(k,void 0);if(i instanceof b){if(i.isPending())return 1<=d&&this._inFlight++,g[e]=c,i._proxyPromiseArray(this,e);if(i.isFulfilled())k=i.value();else return i._unsetRejectionIsUnhandled(),this._reject(i.reason())}g[e]=k}++this._totalResolved>=l&&(null!==
f?this._filter(g,f):this._resolve(g))}};f.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;0<a.length&&this._inFlight<b;){var e=a.pop();this._promiseFulfilled(c[e],e)}};f.prototype._filter=function(a,b){for(var c=b.length,e=Array(c),h=0,l=0;l<c;++l)a[l]&&(e[h++]=b[l]);e.length=h;this._resolve(e)};f.prototype.preservedValues=function(){return this._preservedValues};b.prototype.map=function(a,b){return"function"!==typeof a?k("fn must be a function"):j(this,a,b,null).promise()};
b.map=function(a,b,c,e){return"function"!==typeof b?k("fn must be a function"):j(a,b,c,e).promise()}}},{"./util.js":35}],18:[function(d,o){o.exports=function(b){function a(a){throw a;}function k(b,e){if(!f.isArray(b))return m(b,e);var l=f.tryCatchApply(this,[null].concat(b),e);l===h&&j.invokeLater(a,void 0,l.e)}function m(b,e){var f=void 0===b?n(this,e,null):l(this,e,null,b);f===h&&j.invokeLater(a,void 0,f.e)}function i(b,e){var l=n(this,e,b);l===h&&j.invokeLater(a,void 0,l.e)}var f=d("./util.js"),
j=d("./async.js"),l=f.tryCatch2,n=f.tryCatch1,h=f.errorObj;b.prototype.nodeify=function(a,b){if("function"==typeof a){var h=m;void 0!==b&&Object(b).spread&&(h=k);this._then(h,i,void 0,a,this._boundTo)}return this}}},{"./async.js":2,"./util.js":35}],19:[function(d,o){o.exports=function(b,a){var k=d("./util.js"),m=d("./async.js"),i=d("./errors.js"),f=k.tryCatch1,j=k.errorObj;b.prototype.progressed=function(a){return this._then(void 0,void 0,a,void 0,void 0)};b.prototype._progress=function(a){this._isFollowingOrFulfilledOrRejected()||
this._progressUnchecked(a)};b.prototype._clearFirstHandlerData$Base=b.prototype._clearFirstHandlerData;b.prototype._clearFirstHandlerData=function(){this._clearFirstHandlerData$Base();this._progressHandler0=void 0};b.prototype._progressHandlerAt=function(a){return 0===a?this._progressHandler0:this[(a<<2)+a-5+2]};b.prototype._doProgressWith=function(a){var n=a.promise,a=f(a.handler,a.receiver,a.value);if(a===j){if(null!=a.e&&"StopProgressPropagation"!==a.e.name){var h=i.canAttach(a.e)?a.e:Error(a.e+
"");n._attachExtraTrace(h);n._progress(a.e)}}else a instanceof b?a._then(n._progress,null,null,n,void 0):n._progress(a)};b.prototype._progressUnchecked=function(f){if(this.isPending())for(var n=this._length(),h=this._progress,c=0;c<n;c++){var e=this._progressHandlerAt(c),d=this._promiseAt(c);if(d instanceof b)"function"===typeof e?m.invoke(this._doProgressWith,this,{handler:e,promise:d,receiver:this._receiverAt(c),value:f}):m.invoke(h,d,f);else{var p=this._receiverAt(c);"function"===typeof e?e.call(p,
f,d):p instanceof b&&p._isProxied()?p._progressUnchecked(f):p instanceof a&&p._promiseProgressed(f,d)}}}}},{"./async.js":2,"./errors.js":10,"./util.js":35}],20:[function(d,o){var b;"undefined"!==typeof Promise&&(b=Promise);o.exports=function(){function a(b){if("function"!==typeof b)throw new s("the promise constructor requires a resolver function");if(this.constructor!==a)throw new s("the promise constructor cannot be invoked directly");this._bitField=0;this._boundTo=this._settledValue=this._receiver0=
this._promise0=this._rejectionHandler0=this._fulfillmentHandler0=void 0;b!==l&&this._resolveFromResolver(b)}function k(a){return a[0]}function m(){return new a.PromiseInspection(this)}var i=d("./util.js"),f=d("./async.js"),j=d("./errors.js"),l=function(){},n={},h={e:null},c=d("./thenables.js")(a,l),e=d("./promise_array.js")(a,l,c),q=d("./captured_trace.js")(),p=d("./catch_filter.js")(h),g=d("./promise_resolver.js"),o=i.isArray,u=i.errorObj,z=i.tryCatch1,D=i.tryCatch2,B=i.tryCatchApply,G=j.RangeError,
s=j.TypeError,H=j.CancellationError,I=j.TimeoutError,E=j.OperationalError,J=j.originatesFromRejection,F=j.markAsOriginatingFromRejection,x=j.canAttach,r=i.thrower,y=d("./errors_api_rejection")(a),t=function(){return new s("circular promise resolution chain")};a.prototype.bind=function(b){var e=c(b,void 0),h=new a(l);e instanceof a?(b=e.then(function(a){h._setBoundTo(a)}),b=a.all([this,b]).then(k),h._follow(b)):(h._follow(this),h._setBoundTo(b));h._propagateFrom(this,3);return h};a.prototype.toString=
function(){return"[object Promise]"};a.prototype.caught=a.prototype["catch"]=function(b){var c=arguments.length;if(1<c){var e=Array(c-1),h=0,g;for(g=0;g<c-1;++g){var f=arguments[g];if("function"===typeof f)e[h++]=f;else return c=new s("A catch filter must be an error constructor or a filter function"),this._attachExtraTrace(c),a.reject(c)}e.length=h;b=arguments[g];this._resetTrace();c=new p(e,b,this);return this._then(void 0,c.doFilter,void 0,c,void 0)}return this._then(void 0,b,void 0,void 0,void 0)};
a.prototype.reflect=function(){return this._then(m,m,void 0,this,void 0)};a.prototype.then=function(a,b,c){return this._then(a,b,c,void 0,void 0)};a.prototype.done=function(a,b,c){this._then(a,b,c,void 0,void 0)._setIsFinal()};a.prototype.spread=function(a,b){return this._then(a,b,void 0,n,void 0)};a.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()};a.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};this.isFulfilled()?
(a.fulfillmentValue=this._settledValue,a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this._settledValue,a.isRejected=!0);return a};a.prototype.all=function(){return(new e(this)).promise()};a.is=function(b){return b instanceof a};a.all=function(a){return(new e(a)).promise()};a.prototype.error=function(a){return this.caught(J,a)};a.prototype._resolveFromSyncValue=function(b){if(b===u)this._cleanValues(),this._setRejected(),this._settledValue=b.e,this._ensurePossibleRejectionHandled();else{var e=
c(b,void 0);e instanceof a?this._follow(e):(this._cleanValues(),this._setFulfilled(),this._settledValue=b)}};a.method=function(b){if("function"!==typeof b)throw new s("fn must be a function");return function(){var c;switch(arguments.length){case 0:c=z(b,this,void 0);break;case 1:c=z(b,this,arguments[0]);break;case 2:c=D(b,this,arguments[0],arguments[1]);break;default:c=arguments.length;for(var e=Array(c),h=0;h<c;++h)e[h]=arguments[h];c=B(b,e,this)}e=new a(l);e._setTrace(void 0);e._resolveFromSyncValue(c);
return e}};a.attempt=a["try"]=function(b,c,e){if("function"!==typeof b)return y("fn must be a function");b=o(c)?B(b,c,e):z(b,e,c);c=new a(l);c._setTrace(void 0);c._resolveFromSyncValue(b);return c};a.defer=a.pending=function(){var b=new a(l);b._setTrace(void 0);return new g(b)};a.bind=function(b){var e=c(b,void 0),h=new a(l);h._setTrace(void 0);e instanceof a?(b=e.then(function(a){h._setBoundTo(a)}),h._follow(b)):(h._setBoundTo(b),h._setFulfilled());return h};a.cast=function(b){b=c(b,void 0);if(!(b instanceof
a)){var e=b,b=new a(l);b._setTrace(void 0);b._setFulfilled();b._cleanValues();b._settledValue=e}return b};a.resolve=a.fulfilled=a.cast;a.reject=a.rejected=function(b){var c=new a(l);c._setTrace(void 0);F(b);c._cleanValues();c._setRejected();c._settledValue=b;x(b)||c._setCarriedStackTrace(Error(b+""));c._ensurePossibleRejectionHandled();return c};a.onPossiblyUnhandledRejection=function(a){q.possiblyUnhandledRejection="function"===typeof a?a:void 0};var C;a.onUnhandledRejectionHandled=function(a){C=
"function"===typeof a?a:void 0};var v=!!("undefined"!==typeof process&&"string"===typeof process.execPath&&"object"===typeof process.env&&(process.env.BLUEBIRD_DEBUG||"development"===process.env.NODE_ENV));a.longStackTraces=function(){if(f.haveItemsQueued()&&!1===v)throw Error("cannot enable long stack traces after promises have been created");v=q.isSupported()};a.hasLongStackTraces=function(){return v&&q.isSupported()};a.prototype._then=function(b,c,e,h,g){var p=void 0!==g,g=p?g:new a(l);p||(v&&
(p=this._peekContext()===this._traceParent,g._traceParent=p?this._traceParent:this),g._propagateFrom(this,7));b=this._addCallbacks(b,c,e,g,h);this.isResolved()&&f.invoke(this._queueSettleAt,this,b);return g};a.prototype._length=function(){return this._bitField&262143};a.prototype._isFollowingOrFulfilledOrRejected=function(){return 0<(this._bitField&939524096)};a.prototype._isFollowing=function(){return 536870912===(this._bitField&536870912)};a.prototype._setLength=function(a){this._bitField=this._bitField&
-262144|a&262143};a.prototype._setFulfilled=function(){this._bitField|=268435456};a.prototype._setRejected=function(){this._bitField|=134217728};a.prototype._setFollowing=function(){this._bitField|=536870912};a.prototype._setIsFinal=function(){this._bitField|=33554432};a.prototype._isFinal=function(){return 0<(this._bitField&33554432)};a.prototype._cancellable=function(){return 0<(this._bitField&67108864)};a.prototype._setCancellable=function(){this._bitField|=67108864};a.prototype._unsetCancellable=
function(){this._bitField&=-67108865};a.prototype._setRejectionIsUnhandled=function(){this._bitField|=2097152};a.prototype._unsetRejectionIsUnhandled=function(){this._bitField&=-2097153;this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())};a.prototype._isRejectionUnhandled=function(){return 0<(this._bitField&2097152)};a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField|=524288};a.prototype._unsetUnhandledRejectionIsNotified=
function(){this._bitField&=-524289};a.prototype._isUnhandledRejectionNotified=function(){return 0<(this._bitField&524288)};a.prototype._setCarriedStackTrace=function(a){this._bitField|=1048576;this._fulfillmentHandler0=a};a.prototype._unsetCarriedStackTrace=function(){this._bitField&=-1048577;this._fulfillmentHandler0=void 0};a.prototype._isCarryingStackTrace=function(){return 0<(this._bitField&1048576)};a.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:
void 0};a.prototype._receiverAt=function(a){a=0===a?this._receiver0:this[(a<<2)+a-5+4];return this._isBound()&&void 0===a?this._boundTo:a};a.prototype._promiseAt=function(a){return 0===a?this._promise0:this[(a<<2)+a-5+3]};a.prototype._fulfillmentHandlerAt=function(a){return 0===a?this._fulfillmentHandler0:this[(a<<2)+a-5+0]};a.prototype._rejectionHandlerAt=function(a){return 0===a?this._rejectionHandler0:this[(a<<2)+a-5+1]};a.prototype._addCallbacks=function(a,b,c,e,h){var g=this._length();262138<=
g&&(g=0,this._setLength(0));if(0===g){if(this._promise0=e,void 0!==h&&(this._receiver0=h),"function"===typeof a&&!this._isCarryingStackTrace()&&(this._fulfillmentHandler0=a),"function"===typeof b&&(this._rejectionHandler0=b),"function"===typeof c)this._progressHandler0=c}else{var f=(g<<2)+g-5;this[f+3]=e;this[f+4]=h;this[f+0]="function"===typeof a?a:void 0;this[f+1]="function"===typeof b?b:void 0;this[f+2]="function"===typeof c?c:void 0}this._setLength(g+1);return g};a.prototype._setProxyHandlers=
function(a,b){var c=this._length();262138<=c&&(c=0,this._setLength(0));if(0===c)this._promise0=b,this._receiver0=a;else{var e=(c<<2)+c-5;this[e+3]=b;this[e+4]=a;this[e+0]=this[e+1]=this[e+2]=void 0}this._setLength(c+1)};a.prototype._proxyPromiseArray=function(a,b){this._setProxyHandlers(a,b)};a.prototype._proxyPromise=function(a){a._setProxied();this._setProxyHandlers(a,-15)};a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField|=8388608,this._boundTo=a):this._bitField&=-8388609};a.prototype._isBound=
function(){return 8388608===(this._bitField&8388608)};a.prototype._resolveFromResolver=function(a){var b=this;this._setTrace(void 0);this._pushContext();a=D(a,void 0,function(a){b._tryFollow(a)||b._fulfill(a)},function(a){var c=x(a)?a:Error(a+"");b._attachExtraTrace(c);F(a);b._reject(a,c===a?void 0:c)});this._popContext();if(void 0!==a&&a===u){var a=a.e,c=x(a)?a:Error(a+"");b._reject(a,c)}};a.prototype._spreadSlowCase=function(a,b,c,h){c=(new e(c)).promise()._then(function(){return a.apply(h,arguments)},
void 0,void 0,n,void 0);b._follow(c)};a.prototype._callSpread=function(b,e,h){var g=this._boundTo;if(o(h))for(var f=0,p=h.length;f<p;++f)if(c(h[f],void 0)instanceof a){this._spreadSlowCase(b,e,h,g);return}e._pushContext();return B(b,h,g)};a.prototype._callHandler=function(a,b,c,e){b===n&&!this.isRejected()?a=this._callSpread(a,c,e):(c._pushContext(),a=z(a,b,e));c._popContext();return a};a.prototype._settlePromiseFromHandler=function(b,e,g,f){f instanceof a?(b=this._callHandler(b,e,f,g),f._isFollowing()||
(b===u||b===f||b===h?(g=b===f?t():b.e,e=x(g)?g:Error(g+""),b!==h&&f._attachExtraTrace(e),f._rejectUnchecked(g,e)):(g=c(b,f),g instanceof a?(g.isRejected()&&(!g._isCarryingStackTrace()&&!x(g._settledValue))&&(e=Error(g._settledValue+""),f._attachExtraTrace(e),g._setCarriedStackTrace(e)),f._follow(g),f._propagateFrom(g,1)):f._fulfillUnchecked(b)))):b.call(e,g,f)};a.prototype._follow=function(a){this._setFollowing();a.isPending()?(this._propagateFrom(a,1),a._proxyPromise(this)):a.isFulfilled()?this._fulfillUnchecked(a._settledValue):
this._rejectUnchecked(a._settledValue,a._getCarriedStackTrace());a._isRejectionUnhandled()&&a._unsetRejectionIsUnhandled();v&&null==a._traceParent&&(a._traceParent=this)};a.prototype._tryFollow=function(b){if(this._isFollowingOrFulfilledOrRejected()||b===this)return!1;b=c(b,void 0);if(!(b instanceof a))return!1;this._follow(b);return!0};a.prototype._resetTrace=function(){v&&(this._trace=new q(void 0===this._peekContext()))};a.prototype._setTrace=function(a){if(v){var b=this._peekContext();this._traceParent=
b;this._trace=void 0!==a&&a._traceParent===b?a._trace:new q(void 0===b)}return this};a.prototype._attachExtraTrace=function(a){if(v){var b=this,c=a.stack,c="string"===typeof c?c.split("\n"):[];q.protectErrorMessageNewlines(c);for(var e=1;null!=b&&null!=b._trace;)c=q.combine(c,b._trace.stack.split("\n")),b=b._traceParent,e++;b=((Error.stackTraceLimit||10)+1)*e;e=c.length;e>b&&(c.length=b);0<e&&(c[0]=c[0].split("\u0002\x00\u0001").join("\n"));a.stack=1>=c.length?"(No stack trace)":c.join("\n")}};a.prototype._cleanValues=
function(){this._cancellable()&&(this._cancellationParent=void 0)};a.prototype._propagateFrom=function(a,b){0<(b&1)&&a._cancellable()&&(this._setCancellable(),this._cancellationParent=a);0<(b&4)&&this._setBoundTo(a._boundTo);0<(b&2)&&this._setTrace(a)};a.prototype._fulfill=function(a){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(a)};a.prototype._reject=function(a,b){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(a,b)};a.prototype._settlePromiseAt=function(b){var c=
this.isFulfilled()?this._fulfillmentHandlerAt(b):this._rejectionHandlerAt(b),h=this._settledValue,g=this._receiverAt(b),f=this._promiseAt(b);if("function"===typeof c)this._settlePromiseFromHandler(c,g,h,f);else{var c=!1,p=this.isFulfilled();void 0!==g&&(g instanceof a&&g._isProxied()?(g._unsetProxied(),p?g._fulfillUnchecked(h):g._rejectUnchecked(h,this._getCarriedStackTrace()),c=!0):g instanceof e&&(p?g._promiseFulfilled(h,f):g._promiseRejected(h,f),c=!0));c||(p?f._fulfill(h):f._reject(h,this._getCarriedStackTrace()))}4<=
b&&this._queueGC()};a.prototype._isProxied=function(){return 4194304===(this._bitField&4194304)};a.prototype._setProxied=function(){this._bitField|=4194304};a.prototype._unsetProxied=function(){this._bitField&=-4194305};a.prototype._isGcQueued=function(){return-1073741824===(this._bitField&-1073741824)};a.prototype._setGcQueued=function(){this._bitField|=-1073741824};a.prototype._unsetGcQueued=function(){this._bitField&=1073741823};a.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),
f.invokeLater(this._gc,this,void 0))};a.prototype._gc=function(){for(var a=5*this._length()-5,b=0;b<a;b++)delete this[b];this._clearFirstHandlerData();this._setLength(0);this._unsetGcQueued()};a.prototype._clearFirstHandlerData=function(){this._receiver0=this._promise0=this._rejectionHandler0=this._fulfillmentHandler0=void 0};a.prototype._queueSettleAt=function(a){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled();f.invoke(this._settlePromiseAt,this,a)};a.prototype._fulfillUnchecked=
function(a){if(this.isPending()){if(a===this)return a=t(),this._attachExtraTrace(a),this._rejectUnchecked(a,void 0);this._cleanValues();this._setFulfilled();this._settledValue=a;a=this._length();0<a&&f.invoke(this._settlePromises,this,a)}};a.prototype._rejectUncheckedCheckError=function(a){var b=x(a)?a:Error(a+"");this._rejectUnchecked(a,b===a?void 0:b)};a.prototype._rejectUnchecked=function(a,b){if(this.isPending()){if(a===this){var c=t();this._attachExtraTrace(c);return this._rejectUnchecked(c)}this._cleanValues();
this._setRejected();this._settledValue=a;this._isFinal()?f.invokeLater(r,void 0,void 0===b?a:b):(c=this._length(),void 0!==b&&this._setCarriedStackTrace(b),0<c?f.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled())}};a.prototype._rejectPromises=function(){this._settlePromises();this._unsetCarriedStackTrace()};a.prototype._settlePromises=function(){for(var a=this._length(),b=0;b<a;b++)this._settlePromiseAt(b)};a.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled();
void 0!==q.possiblyUnhandledRejection&&f.invokeLater(this._notifyUnhandledRejection,this,void 0)};a.prototype._notifyUnhandledRejectionIsHandled=function(){"function"===typeof C&&f.invokeLater(C,void 0,this)};a.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue,b=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified();void 0!==b&&(this._unsetCarriedStackTrace(),a=b);"function"===typeof q.possiblyUnhandledRejection&&q.possiblyUnhandledRejection(a,
this)}};var A=[];a.prototype._peekContext=function(){var a=A.length-1;if(0<=a)return A[a]};a.prototype._pushContext=function(){v&&A.push(this)};a.prototype._popContext=function(){v&&A.pop()};a.noConflict=function(){var c=a;try{Promise===c&&(Promise=b)}catch(e){}return c};a.setScheduler=function(a){if("function"!==typeof a)throw new s("fn must be a function");f._schedule=a};q.isSupported()||(a.longStackTraces=function(){},v=!1);a._makeSelfResolutionError=t;d("./finally.js")(a,h,c);d("./direct_resolve.js")(a);
d("./synchronous_inspection.js")(a);d("./join.js")(a,e,c,l);a.RangeError=G;a.CancellationError=H;a.TimeoutError=I;a.TypeError=s;a.OperationalError=E;a.RejectionError=E;a.AggregateError=j.AggregateError;i.toFastProperties(a);i.toFastProperties(a.prototype);a.Promise=a;d("./timers.js")(a,l,c);d("./race.js")(a,l,c);d("./call_get.js")(a);d("./generators.js")(a,y,l,c);d("./map.js")(a,e,y,c,l);d("./nodeify.js")(a);d("./promisify.js")(a,l);d("./props.js")(a,e,c);d("./reduce.js")(a,e,y,c,l);d("./settle.js")(a,
e);d("./some.js")(a,e,y);d("./progress.js")(a,e);d("./cancel.js")(a,l);d("./filter.js")(a,l);d("./any.js")(a,e);d("./each.js")(a,l);d("./using.js")(a,y,c);a.prototype=a.prototype;return a}},{"./any.js":1,"./async.js":2,"./call_get.js":4,"./cancel.js":5,"./captured_trace.js":6,"./catch_filter.js":7,"./direct_resolve.js":8,"./each.js":9,"./errors.js":10,"./errors_api_rejection":11,"./filter.js":13,"./finally.js":14,"./generators.js":15,"./join.js":16,"./map.js":17,"./nodeify.js":18,"./progress.js":19,
"./promise_array.js":21,"./promise_resolver.js":22,"./promisify.js":23,"./props.js":24,"./race.js":26,"./reduce.js":27,"./settle.js":29,"./some.js":30,"./synchronous_inspection.js":31,"./thenables.js":32,"./timers.js":33,"./using.js":34,"./util.js":35}],21:[function(d,o){o.exports=function(b,a,k){function m(a){switch(a){case -2:return[];case -3:return{}}}function i(f){var n=this._promise=new b(a),h=void 0;f instanceof b&&(h=f,n._propagateFrom(h,5));n._setTrace(h);this._values=f;this._totalResolved=
this._length=0;this._init(void 0,-2)}var f=d("./errors.js").canAttach,j=d("./util.js").isArray;i.prototype.length=function(){return this._length};i.prototype.promise=function(){return this._promise};i.prototype._init=function n(a,c){var e=k(this._values,void 0);if(e instanceof b)if(this._values=e,e._setBoundTo(this._promise._boundTo),e.isFulfilled()){if(e=e._settledValue,!j(e)){e=new b.TypeError("expecting an array, a promise or a thenable");this.__hardReject__(e);return}}else{e.isPending()?e._then(n,
this._reject,void 0,this,c):(e._unsetRejectionIsUnhandled(),this._reject(e._settledValue));return}else if(!j(e)){e=new b.TypeError("expecting an array, a promise or a thenable");this.__hardReject__(e);return}if(0===e.length)-5===c?this._resolveEmptyArray():this._resolve(m(c));else{for(var f=this.getActualLength(e.length),p=this.shouldCopyValues()?Array(f):this._values,g=!1,d=0;d<f;++d){var i=k(e[d],void 0);i instanceof b?i.isPending()?i._proxyPromiseArray(this,d):(i._unsetRejectionIsUnhandled(),g=
!0):g=!0;p[d]=i}this._values=p;this._length=f;g&&this._scanDirectValues(f)}};i.prototype._settlePromiseAt=function(a){var h=this._values[a];h instanceof b?h.isFulfilled()?this._promiseFulfilled(h._settledValue,a):h.isRejected()&&this._promiseRejected(h._settledValue,a):this._promiseFulfilled(h,a)};i.prototype._scanDirectValues=function(a){for(var b=0;b<a&&!this._isResolved();++b)this._settlePromiseAt(b)};i.prototype._isResolved=function(){return null===this._values};i.prototype._resolve=function(a){this._values=
null;this._promise._fulfill(a)};i.prototype.__hardReject__=i.prototype._reject=function(a){this._values=null;var b=f(a)?a:Error(a+"");this._promise._attachExtraTrace(b);this._promise._reject(a,b)};i.prototype._promiseProgressed=function(a,b){this._isResolved()||this._promise._progress({index:b,value:a})};i.prototype._promiseFulfilled=function(a,b){this._isResolved()||(this._values[b]=a,++this._totalResolved>=this._length&&this._resolve(this._values))};i.prototype._promiseRejected=function(a){this._isResolved()||
(this._totalResolved++,this._reject(a))};i.prototype.shouldCopyValues=function(){return!0};i.prototype.getActualLength=function(a){return a};return i}},{"./errors.js":10,"./util.js":35}],22:[function(d,o){function b(a){return function(b,e){if(null!==a){if(b){var d=k(b),d=d instanceof Error&&l.getPrototypeOf(d)===Error.prototype?new f(d):d;m.markAsOriginatingFromRejection(d);a._attachExtraTrace(d);a._reject(d)}else if(2<arguments.length){for(var d=arguments.length,p=Array(d-1),g=1;g<d;++g)p[g-1]=arguments[g];
a._fulfill(p)}else a._fulfill(e);a=null}}}var a=d("./util.js"),k=a.maybeWrapAsError,m=d("./errors.js"),i=m.TimeoutError,f=m.OperationalError,j=d("./async.js"),a=a.haveGetters,l=d("./es5.js"),n;n=a?function(a){this.promise=a}:function(a){this.promise=a;this.callback=this.asCallback=b(a)};a&&(a={get:function(){return b(this.promise)}},l.defineProperty(n.prototype,"asCallback",a),l.defineProperty(n.prototype,"callback",a));n._nodebackForPromise=b;n.prototype.toString=function(){return"[object PromiseResolver]"};
n.prototype.resolve=n.prototype.fulfill=function(a){if(!(this instanceof n))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var b=this.promise;b._tryFollow(a)||j.invoke(b._fulfill,b,a)};n.prototype.reject=function(a){if(!(this instanceof n))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");
var b=this.promise;m.markAsOriginatingFromRejection(a);var e=m.canAttach(a)?a:Error(a+"");b._attachExtraTrace(e);j.invoke(b._reject,b,a);e!==a&&j.invoke(this._setCarriedStackTrace,this,e)};n.prototype.progress=function(a){if(!(this instanceof n))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");j.invoke(this.promise._progress,this.promise,a)};n.prototype.cancel=function(){j.invoke(this.promise.cancel,
this.promise,void 0)};n.prototype.timeout=function(){this.reject(new i("timeout"))};n.prototype.isResolved=function(){return this.promise.isResolved()};n.prototype.toJSON=function(){return this.promise.toJSON()};n.prototype._setCarriedStackTrace=function(a){this.promise.isRejected()&&this.promise._setCarriedStackTrace(a)};o.exports=n},{"./async.js":2,"./errors.js":10,"./es5.js":12,"./util.js":35}],23:[function(d,o){o.exports=function(b,a){function k(a){try{return!0===a.__isPromisified__}catch(b){return!1}}
function m(a){return n.isIdentifier(a)?"."+a:"['"+a.replace(/(['\\])/g,"\\$1")+"']"}function i(g,f,d,p,i){for(var p=Math.max(0,("number"===typeof p.length?Math.max(Math.min(p.length,1024),0):0)-1),k=[p],j=Math.max(0,p-1-5),q=p-1;q>=j;--q)q!==p&&k.push(q);for(q=p+1;5>=q;++q)k.push(q);d="string"===typeof d&&n.isIdentifier(d)?d+i:"promisified";return(new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function FunctionName(Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(void 0);                                       \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",
d).replace("Parameters",n.filledRange(p,"_arg","")).replace("[CodeForSwitchCase]",function(){for(var a="",b=0;b<k.length;++b){var c="case "+k[b]+":",e,h=k[b];e=n.filledRange(h,"arguments[","]").join(", ");var h=0<h?", ":"",d=void 0,d="string"===typeof g?"                                                          \n                this.method({{args}}, fn);                                   \n                break;                                                       \n            ".replace(".method",
m(g)):f===l?"                                                         \n                callback.call(this, {{args}}, fn);                           \n                break;                                                       \n            ":void 0!==f?"                                                         \n                callback.call(receiver, {{args}}, fn);                       \n                break;                                                       \n            ":"                                                         \n                callback({{args}}, fn);                                      \n                break;                                                       \n            ";
e=d.replace("{{args}}",e).replace(", ",h);a+=c+e}b="string"===typeof g?"                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",m(g)):f===l?"                                                  \n                callback.apply(this, args);                                  \n            ":"                                                  \n                callback.apply(receiver, args);                              \n            ";
return a+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",
b)}())))(b,g,f,c,e,h,a)}function f(g,f){function d(){var p=f;f===l&&(p=this);"string"===typeof g&&(g=p[g]);var k=new b(a);k._setTrace(void 0);var i=h(k);try{g.apply(p,c(arguments,i))}catch(m){p=e(m),k._attachExtraTrace(p),k._reject(p)}return k}d.__isPromisified__=!0;return d}function j(a,b,c,e){for(var g=RegExp(b.replace(/([$])/,"\\$")+"$"),h=n.inheritedDataKeys(a),f=[],d=0;d<h.length;++d){var i=h[d],m=a[i],j;if(j="function"===typeof m)if(j=!k(m))j=n.getDataPropertyOrDefault(a,i+b,o),j=!(j&&k(j))&&
c(i,m,a);j&&f.push(i,m)}for(c=0;c<f.length;c+=2)if(h=f[c],g.test(h)){h=h.replace(g,"");for(d=0;d<f.length;d+=2)if(f[d]===h)throw new p("Cannot promisify an API that has normal methods with '"+b+"'-suffix");}g=0;for(c=f.length;g<c;g+=2)h=f[g],d=f[g+1],a[h+b]=e===u?u(h,l,h,d,b):e(d);n.toFastProperties(a);return a}var l={},n=d("./util.js"),h=d("./promise_resolver.js")._nodebackForPromise,c=n.withAppended,e=n.maybeWrapAsError,q=n.canEvaluate,p=d("./errors").TypeError,g=function(a,b){return n.isIdentifier(a)&&
"_"!==a.charAt(0)&&!n.isClass(b)},o={__isPromisified__:!0},u=q?i:f;b.promisify=function(a,b){if("function"!==typeof a)throw new p("fn must be a function");return k(a)?a:u(a,2>arguments.length?l:b,void 0,a)};b.promisifyAll=function(a,b){if("function"!==typeof a&&"object"!==typeof a)throw new p("the target of promisifyAll must be an object or a function");var b=Object(b),c=b.suffix;"string"!==typeof c&&(c="Async");var e=b.filter;"function"!==typeof e&&(e=g);var h=b.promisifier;"function"!==typeof h&&
(h=u);if(!n.isIdentifier(c))throw new RangeError("suffix must be a valid identifier");for(var f=n.inheritedDataKeys(a,{includeHidden:!0}),d=0;d<f.length;++d){var k=a[f[d]];"constructor"!==f[d]&&n.isClass(k)&&(j(k.prototype,c,e,h),j(k,c,e,h))}return j(a,c,e,h)}}},{"./errors":10,"./promise_resolver.js":22,"./util.js":35}],24:[function(d,o){o.exports=function(b,a,k){function m(a){for(var b=n.keys(a),e=b.length,f=Array(2*e),d=0;d<e;++d){var g=b[d];f[d]=a[g];f[d+e]=g}this.constructor$(f)}function i(a){var c=
k(a,void 0);if(l(c))a=c instanceof b?c._then(b.props,void 0,void 0,void 0,void 0):(new m(c)).promise();else return j("cannot await properties of a non-object");c instanceof b&&a._propagateFrom(c,4);return a}var f=d("./util.js"),j=d("./errors_api_rejection")(b),l=f.isObject,n=d("./es5.js");f.inherits(m,a);m.prototype._init=function(){this._init$(void 0,-3)};m.prototype._promiseFulfilled=function(a,b){if(!this._isResolved()&&(this._values[b]=a,++this._totalResolved>=this._length)){for(var e={},f=this.length(),
d=0,g=this.length();d<g;++d)e[this._values[d+f]]=this._values[d];this._resolve(e)}};m.prototype._promiseProgressed=function(a,b){this._isResolved()||this._promise._progress({key:this._values[b+this.length()],value:a})};m.prototype.shouldCopyValues=function(){return!1};m.prototype.getActualLength=function(a){return a>>1};b.prototype.props=function(){return i(this)};b.props=function(a){return i(a)}}},{"./errors_api_rejection":11,"./es5.js":12,"./util.js":35}],25:[function(d,o){function b(a,b,d,f,j){for(var l=
0;l<j;++l)d[l+f]=a[l+b]}function a(a){this._capacity=a;this._front=this._length=0;this._makeCapacity()}a.prototype._willBeOverCapacity=function(a){return this._capacity<a};a.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);this[this._front+b&this._capacity-1]=a;this._length=b+1};a.prototype.push=function(a,b,d){var f=this.length()+3;if(this._willBeOverCapacity(f))this._pushOne(a),this._pushOne(b),this._pushOne(d);else{var j=this._front+f-3;this._checkCapacity(f);var l=this._capacity-
1;this[j+0&l]=a;this[j+1&l]=b;this[j+2&l]=d;this._length=f}};a.prototype.shift=function(){var a=this._front,b=this[a];this[a]=void 0;this._front=a+1&this._capacity-1;this._length--;return b};a.prototype.length=function(){return this._length};a.prototype._makeCapacity=function(){for(var a=this._capacity,b=0;b<a;++b)this[b]=void 0};a.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<3)};a.prototype._resizeTo=function(a){var d=this._front,i=this._capacity,f=Array(i),
j=this.length();b(this,0,f,0,i);this._capacity=a;this._makeCapacity();this._front=0;d+j<=i?b(f,d,this,0,j):(a=j-(d+j&i-1),b(f,d,this,0,a),b(f,0,this,a,j-a))};o.exports=a},{}],26:[function(d,o){o.exports=function(b,a,k){function m(d,n){var h=k(d,void 0);if(h instanceof b)return h.then(function(a){return m(a,h)});if(!f(d))return i("expecting an array, a promise or a thenable");var c=new b(a);void 0!==n?c._propagateFrom(n,7):c._setTrace(void 0);for(var e=c._fulfill,q=c._reject,p=0,g=d.length;p<g;++p){var o=
d[p];(void 0!==o||j.call(d,p))&&b.cast(o)._then(e,q,void 0,c,null)}return c}var i=d("./errors_api_rejection.js")(b),f=d("./util.js").isArray,j={}.hasOwnProperty;b.race=function(a){return m(a,void 0)};b.prototype.race=function(){return m(this,void 0)}}},{"./errors_api_rejection.js":11,"./util.js":35}],27:[function(d,o){o.exports=function(b,a,k,m,i){function f(a,c,h,g){this.constructor$(a);this._preservedValues=g===i?[]:null;this._zerothIsAccum=void 0===h;this._gotAccum=!1;this._reducingIndex=this._zerothIsAccum?
1:0;this._valuesPhase=void 0;var a=m(h,void 0),g=!1,f=a instanceof b;f&&(a.isPending()?a._proxyPromiseArray(this,-1):a.isFulfilled()?(h=a.value(),this._gotAccum=!0):(a._unsetRejectionIsUnhandled(),this._reject(a.reason()),g=!0));!f&&!this._zerothIsAccum&&(this._gotAccum=!0);this._callback=c;this._accum=h;g||this._init$(void 0,-5)}function j(a,b,c,g){return"function"!==typeof b?k("fn must be a function"):(new f(a,b,c,g)).promise()}var l=d("./util.js"),n=l.tryCatch4,h=l.tryCatch3,c=l.errorObj;l.inherits(f,
a);f.prototype._init=function(){};f.prototype._resolveEmptyArray=function(){if(this._gotAccum||this._zerothIsAccum)this._resolve(null!==this._preservedValues?[]:this._accum)};f.prototype._promiseFulfilled=function(a,f){var d=this._values;if(null!==d){var g=this.length(),i=this._preservedValues,k=null!==i,j=this._gotAccum,l=this._valuesPhase,o;if(!l){l=this._valuesPhase=Array(g);for(o=0;o<g;++o)l[o]=0}o=l[f];0===f&&this._zerothIsAccum?(j||(this._accum=a,this._gotAccum=j=!0),l[f]=0===o?1:2):-1===f?
j||(this._accum=a,this._gotAccum=j=!0):0===o?l[f]=1:(l[f]=2,j&&(this._accum=a));if(j){for(var j=this._callback,t=this._promise._boundTo,s=this._reducingIndex;s<g;++s)if(o=l[s],2===o)this._reducingIndex=s+1;else{if(1!==o)return;a=d[s];if(a instanceof b)if(a.isFulfilled())a=a._settledValue;else{if(a.isPending())return;a._unsetRejectionIsUnhandled();return this._reject(a.reason())}k?(i.push(a),o=h(j,t,a,s,g)):o=n(j,t,this._accum,a,s,g);if(o===c)return this._reject(o.e);var r=m(o,void 0);if(r instanceof
b){if(r.isPending())return l[s]=4,r._proxyPromiseArray(this,s);if(r.isFulfilled())o=r.value();else return r._unsetRejectionIsUnhandled(),this._reject(r.reason())}this._reducingIndex=s+1;this._accum=o}this._reducingIndex<g||this._resolve(k?i:this._accum)}}};b.prototype.reduce=function(a,b){return j(this,a,b,null)};b.reduce=function(a,b,c,g){return j(a,b,c,g)}}},{"./util.js":35}],28:[function(d,o){var b;if("object"===typeof process&&"string"===typeof process.version)b=function(a){process.nextTick(a)};
else if("undefined"!==typeof MutationObserver&&(b=MutationObserver)||"undefined"!==typeof WebKitMutationObserver&&(b=WebKitMutationObserver)){var a=document.createElement("div"),k=void 0;(new b(function(){var a=k;k=void 0;a()})).observe(a,{attributes:!0});b=function(b){k=b;a.classList.toggle("foo")}}else if("undefined"!==typeof setTimeout)b=function(a){setTimeout(a,0)};else throw Error("no async scheduler available");o.exports=b},{}],29:[function(d,o){o.exports=function(b,a){function k(a){this.constructor$(a)}
var m=b.PromiseInspection;d("./util.js").inherits(k,a);k.prototype._promiseResolved=function(a,b){this._values[a]=b;++this._totalResolved>=this._length&&this._resolve(this._values)};k.prototype._promiseFulfilled=function(a,b){if(!this._isResolved()){var d=new m;d._bitField=268435456;d._settledValue=a;this._promiseResolved(b,d)}};k.prototype._promiseRejected=function(a,b){if(!this._isResolved()){var d=new m;d._bitField=134217728;d._settledValue=a;this._promiseResolved(b,d)}};b.settle=function(a){return(new k(a)).promise()};
b.prototype.settle=function(){return(new k(this)).promise()}}},{"./util.js":35}],30:[function(d,o){o.exports=function(b,a,k){function m(a){this.constructor$(a);this._howMany=0;this._initialized=this._unwrap=!1}function i(a,b){if((b|0)!==b||0>b)return k("expecting a positive integer");var e=new m(a),f=e.promise();if(f.isRejected())return f;e.setHowMany(b);e.init();return f}var f=d("./util.js"),j=d("./errors.js").RangeError,l=d("./errors.js").AggregateError,n=f.isArray;f.inherits(m,a);m.prototype._init=
function(){if(this._initialized)if(0===this._howMany)this._resolve([]);else{this._init$(void 0,-5);var a=n(this._values);!this._isResolved()&&(a&&this._howMany>this._canPossiblyFulfill())&&this._reject(this._getRangeError(this.length()))}};m.prototype.init=function(){this._initialized=!0;this._init()};m.prototype.setUnwrap=function(){this._unwrap=!0};m.prototype.howMany=function(){return this._howMany};m.prototype.setHowMany=function(a){this._isResolved()||(this._howMany=a)};m.prototype._promiseFulfilled=
function(a){this._isResolved()||(this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values)))};m.prototype._promiseRejected=function(a){if(!this._isResolved()&&(this._addRejected(a),this.howMany()>this._canPossiblyFulfill())){for(var a=new l,b=this.length();b<this._values.length;++b)a.push(this._values[b]);this._reject(a)}};m.prototype._fulfilled=function(){return this._totalResolved};
m.prototype._rejected=function(){return this._values.length-this.length()};m.prototype._addRejected=function(a){this._values.push(a)};m.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a};m.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};m.prototype._getRangeError=function(a){return new j("Input array must contain at least "+this._howMany+" items but contains only "+a+" items")};m.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};
b.some=function(a,b){return i(a,b)};b.prototype.some=function(a){return i(this,a)};b._SomePromiseArray=m}},{"./errors.js":10,"./util.js":35}],31:[function(d,o){o.exports=function(b){function a(a){void 0!==a?(this._bitField=a._bitField,this._settledValue=a.isResolved()?a._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}a.prototype.isFulfilled=b.prototype.isFulfilled=function(){return 0<(this._bitField&268435456)};a.prototype.isRejected=b.prototype.isRejected=function(){return 0<(this._bitField&
134217728)};a.prototype.isPending=b.prototype.isPending=function(){return 0===(this._bitField&402653184)};a.prototype.value=b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue};a.prototype.error=a.prototype.reason=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue};a.prototype.isResolved=b.prototype.isResolved=
function(){return 0<(this._bitField&402653184)};b.PromiseInspection=a}},{}],32:[function(d,o){o.exports=function(b,a){var k=d("./util.js"),m=d("./errors.js").canAttach,i=k.errorObj,f=k.isObject,j={}.hasOwnProperty;return function(d,k){if(f(d)){if(d instanceof b)return d;if(j.call(d,"_promise0")){var h=new b(a);h._setTrace(void 0);d._then(h._fulfillUnchecked,h._rejectUncheckedCheckError,h._progressUnchecked,h,null);h._setFollowing();return h}try{h=d.then}catch(c){i.e=c,h=i}if(h===i)return void 0!==
k&&m(h.e)&&k._attachExtraTrace(h.e),b.reject(h.e);if("function"===typeof h){var e=function(a){w||(w=!0,d===a?(a=b._makeSelfResolutionError(),void 0!==k&&k._attachExtraTrace(a),g.promise._reject(a,void 0)):g.resolve(a))},o=function(a){if(!w){w=!0;var b=m(a)?a:Error(a+"");void 0!==k&&k._attachExtraTrace(b);g.promise._reject(a,b)}},p=function(a){if(!w){var b=g.promise;"function"===typeof b._progress&&b._progress(a)}},g=b.defer(),w=!1;try{h.call(d,e,o,p)}catch(u){w||(w=!0,h=m(u)?u:Error(u+""),void 0!==
k&&k._attachExtraTrace(h),g.promise._reject(u,h))}return g.promise}}return d}}},{"./errors.js":10,"./util.js":35}],33:[function(d,o){var b=function(a,b){var d=arguments[2],i=arguments[3],f=5<=arguments.length?arguments[4]:void 0;setTimeout(function(){a(d,i,f)},b|0)};o.exports=function(a,k,m){d("./util.js");var i=d("./errors.js");d("./errors_api_rejection")(a);var f=a.TimeoutError,j=function(a,b,e){a.isPending()&&("string"!==typeof b&&(b="operation timed out after "+e+" ms"),b=new f(b),i.markAsOriginatingFromRejection(b),
a._attachExtraTrace(b),a._cancel(b))},l=function(a,b){b._fulfill(a)},n=a.delay=function(d,c){void 0===c&&(c=d,d=void 0);var c=+c,e=m(d,void 0),f=new a(k);if(e instanceof a)return f._propagateFrom(e,7),f._follow(e),f.then(function(b){return a.delay(b,c)});f._setTrace(void 0);b(l,c,d,f);return f};a.prototype.delay=function(a){return n(this,a)};a.prototype.timeout=function(d,c){var d=+d,e=new a(k);e._propagateFrom(this,7);e._follow(this);b(j,d,e,c,d);return e.cancellable()}}},{"./errors.js":10,"./errors_api_rejection":11,
"./util.js":35}],34:[function(d,o){o.exports=function(b,a,k){function m(a){for(var c=a.length,e=0;e<c;++e){var d=a[e];if(d.isRejected())return b.reject(d.error());a[e]=d.value()}return a}function i(a){setTimeout(function(){throw a;},0)}function f(a,c){function e(){if(d>=f)return h.resolve();var j;j=a[d++];var l=k(j,void 0);l!==j&&("function"===typeof j._isDisposable&&"function"===typeof j._getDisposer&&j._isDisposable())&&l._setDisposable(j._getDisposer());j=l;if(j instanceof b&&j._isDisposable()){try{j=
k(j._getDisposer().tryDispose(c),void 0)}catch(m){return i(m)}if(j instanceof b)return j._then(e,i,null,null,null)}e()}var d=0,f=a.length,h=b.defer();e();return h.promise}function j(a){var b=new o;b._settledValue=a;b._bitField=268435456;return f(this,b).thenReturn(a)}function l(a){var b=new o;b._settledValue=a;b._bitField=134217728;return f(this,b).thenThrow(a)}function n(a,b){this._data=a;this._promise=b}function h(a,b){this.constructor$(a,b)}var c=d("./errors.js").TypeError,e=d("./util.js").inherits,
o=b.PromiseInspection;n.prototype.data=function(){return this._data};n.prototype.promise=function(){return this._promise};n.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null};n.prototype.tryDispose=function(a){var b=this.resource(),a=null!==b?this.doDispose(b,a):null;this._promise._unsetDisposable();this._data=this._promise=null;return a};n.isDisposer=function(a){return null!=a&&"function"===typeof a.resource&&"function"===typeof a.tryDispose};e(h,n);h.prototype.doDispose=
function(a,b){return this.data().call(a,a,b)};b.using=function(){var c=arguments.length;if(2>c)return a("you must pass at least 2 arguments to Promise.using");var e=arguments[c-1];if("function"!==typeof e)return a("fn must be a function");c--;for(var d=Array(c),f=0;f<c;++f){var h=arguments[f];if(n.isDisposer(h)){var i=h,h=h.promise();h._setDisposable(i)}d[f]=h}return b.settle(d).then(m).spread(e)._then(j,l,void 0,d,void 0)};b.prototype._setDisposable=function(a){this._bitField|=262144;this._disposer=
a};b.prototype._isDisposable=function(){return 0<(this._bitField&262144)};b.prototype._getDisposer=function(){return this._disposer};b.prototype._unsetDisposable=function(){this._bitField&=-262145;this._disposer=void 0};b.prototype.disposer=function(a){if("function"===typeof a)return new h(a,this);throw new c;}}},{"./errors.js":10,"./util.js":35}],35:[function(d,o){function b(a){return"string"===typeof a?a:""+a}function a(a){return null==a||!0===a||!1===a||"string"===typeof a||"number"===typeof a}
var k=d("./es5.js"),m;try{var i={};k.defineProperty(i,"f",{get:function(){return 3}});m=3===i.f}catch(f){m=!1}var i="undefined"==typeof navigator,j={e:{}},l=function(){return"string"!==this}.call("string"),n;n=k.isES5?function(a,b){for(var d=[],f=Object.create(null),g=Object(b).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=a;){var h;try{h=g(a)}catch(j){break}for(var i=0;i<h.length;++i){var l=h[i];if(!f[l]){f[l]=!0;var m=Object.getOwnPropertyDescriptor(a,l);null!=m&&(null==m.get&&null==
m.set)&&d.push(l)}}a=k.getPrototypeOf(a)}return d}:function(a){var b=[],d;for(d in a)b.push(d);return b};var h=/^[a-z$_][a-z$_0-9]*$/i;o.exports={isClass:function(a){try{if("function"===typeof a){var b=k.keys(a.prototype);return 0<b.length&&!(1===b.length&&"constructor"===b[0])}return!1}catch(d){return!1}},isIdentifier:function(a){return h.test(a)},inheritedDataKeys:n,getDataPropertyOrDefault:function(a,b,d){if(k.isES5){if(a=Object.getOwnPropertyDescriptor(a,b),null!=a)return null==a.get&&null==a.set?
a.value:d}else return{}.hasOwnProperty.call(a,b)?a[b]:void 0},thrower:function(a){throw a;},isArray:k.isArray,haveGetters:m,notEnumerableProp:function(b,e,d){if(a(b))return b;k.defineProperty(b,e,{value:d,configurable:!0,enumerable:!1,writable:!0});return b},isPrimitive:a,isObject:function(b){return!a(b)},canEvaluate:i,errorObj:j,tryCatch1:function(a,b,d){try{return a.call(b,d)}catch(f){return j.e=f,j}},tryCatch2:function(a,b,d,f){try{return a.call(b,d,f)}catch(g){return j.e=g,j}},tryCatch3:function(a,
b,d,f,g){try{return a.call(b,d,f,g)}catch(h){return j.e=h,j}},tryCatch4:function(a,b,d,f,g,h){try{return a.call(b,d,f,g,h)}catch(i){return j.e=i,j}},tryCatchApply:function(a,b,d){try{return a.apply(d,b)}catch(f){return j.e=f,j}},inherits:function(a,b){function d(){this.constructor=a;this.constructor$=b;for(var g in b.prototype)f.call(b.prototype,g)&&"$"!==g.charAt(g.length-1)&&(this[g+"$"]=b.prototype[g])}var f={}.hasOwnProperty;d.prototype=b.prototype;a.prototype=new d;return a.prototype},withAppended:function(a,
b){var d=a.length,f=Array(d+1),g;for(g=0;g<d;++g)f[g]=a[g];f[g]=b;return f},asString:b,maybeWrapAsError:function(c){return!a(c)?c:Error(b(c))},wrapsPrimitiveReceiver:l,toFastProperties:function(a){function b(){}b.prototype=a;return b},filledRange:function(a,b,d){for(var f=Array(a),g=0;g<a;++g)f[g]=b+g+d;return f}}},{"./es5.js":12}]},{},[3])(3)};"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof r?r.Promise=t():"undefined"!=typeof global?
global.Promise=t():"undefined"!=typeof self&&(self.Promise=t());!0;"undefined"!==typeof r&&null!==r?r.P=r.Promise:"undefined"!==typeof self&&null!==self&&(self.P=self.Promise)});;
;
/* module-key = 'com.atlassian.jira.jira-onboarding-assets-plugin:promise', location = 'lib/bluebird-promise-amd.js' */
define("bluebird/Promise",["atlassian/libs/bluebird-2.3.6"],function(i){return i});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'templates/repository-shortcuts/repository-shortcuts.soy' */
// This file was automatically generated from repository-shortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Software.RepositoryShortcuts.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Software == 'undefined') { JIRA.Software = {}; }
if (typeof JIRA.Software.RepositoryShortcuts == 'undefined') { JIRA.Software.RepositoryShortcuts = {}; }
if (typeof JIRA.Software.RepositoryShortcuts.Templates == 'undefined') { JIRA.Software.RepositoryShortcuts.Templates = {}; }


JIRA.Software.RepositoryShortcuts.Templates.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.canManageShortcuts || opt_data.numberOfShortcuts > 0) {
    output += '<div class="aui-sidebar-group jira-sidebar-group-with-divider repo-shortcuts-group' + ((opt_data.numberOfShortcuts == 0) ? ' repo-shortcuts-group_empty' : '') + '" data-id="repo-shortcuts-group"><div class="aui-nav-heading">' + soy.$$escapeHtml('Source code') + '</div><ul class="aui-nav repo-shortcuts-list">';
    if (opt_data.shortcuts) {
      var shortcutList14 = opt_data.shortcuts;
      var shortcutListLen14 = shortcutList14.length;
      for (var shortcutIndex14 = 0; shortcutIndex14 < shortcutListLen14; shortcutIndex14++) {
        var shortcutData14 = shortcutList14[shortcutIndex14];
        output += JIRA.Software.RepositoryShortcuts.Templates.shortcut({canManageShortcuts: opt_data.canManageShortcuts, canManageDVCS: opt_data.canManageDVCS, id: shortcutData14.id, name: shortcutData14.name, url: shortcutData14.url, dvcsType: shortcutData14.dvcsType, shouldWarnPotentialConnection: shortcutData14.shouldWarnPotentialConnection, isFirstSyncRunning: shortcutData14.isFirstSyncRunning});
      }
    }
    output += ((opt_data.canManageShortcuts) ? '<li><a class="aui-nav-item repo-shortcuts-group__add" href="#" data-link-id="repo-shortcut-add">' + aui.icons.icon({useIconFont: true, size: 'large', icon: 'add-small'}) + '<span class="aui-nav-item-label">' + soy.$$escapeHtml('Add source code') + '</span></a></li>' : '') + '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.content.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.content';
}


JIRA.Software.RepositoryShortcuts.Templates.shortcut = function(opt_data, opt_ignored) {
  var output = '';
  var imgBaseUrl__soy37 = "" + '/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts/images';
  output += '<li class="repo-shortcut"><a class="aui-nav-item repo-shortcuts-group__link" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '" target="_blank" data-shortcut-id="' + soy.$$escapeHtml(opt_data.id) + '" data-link-id="repo-shortcut-' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.dvcsType == 'bitbucket') ? '<span class="aui-icon aui-icon-large aui-iconfont-bitbucket">' + soy.$$escapeHtml('Bitbucket source code link') + '</span>' : (opt_data.dvcsType == 'github') ? '<img class="aui-icon" src="' + soy.$$escapeHtml(imgBaseUrl__soy37) + '/octocat-icon.svg" alt="' + soy.$$escapeHtml('GitHub source code link') + '" />' : '<span class="aui-icon aui-icon-large aui-iconfont-link">' + soy.$$escapeHtml('Unknown source code link') + '</span>') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.name) + '</span></a>' + ((opt_data.canManageShortcuts) ? '<a href="#repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-owns="repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true" class="aui-dropdown2-trigger repo-shortcuts-group__actions" style="' + ((opt_data.isFirstSyncRunning || opt_data.shouldWarnPotentialConnection) ? 'right: 40px' : '') + '"><span>' + soy.$$escapeHtml('Actions') + '</span></a><div id="repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default repo-shortcuts-group__dropdown"><ul class="aui-list-truncate">' + ((opt_data.shouldWarnPotentialConnection) ? '' : '') + '<li><a class="repo-shortcuts-group__actions__edit" href="#">' + soy.$$escapeHtml('Edit') + '</a></li><li><a class="repo-shortcuts-group__actions__delete" href="#">' + soy.$$escapeHtml('Delete') + '</a></li></ul></div>' : '') + ((opt_data.isFirstSyncRunning) ? '<a class="repo-shortcuts-group__warning syncing-trigger" href="#syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '"><span class="aui-icon aui-icon-small aui-iconfont-warning" original-title="warning">$' + soy.$$escapeHtml('Sync in progress') + '</span></a>' + JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog(opt_data) : '') + ((opt_data.shouldWarnPotentialConnection) ? '<a class="repo-shortcuts-group__warning suggest-connection-trigger" href="#suggest-connection-dialog-' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="suggest-connection-dialog-' + soy.$$escapeHtml(opt_data.id) + '"><span class="aui-icon aui-icon-small aui-iconfont-warning" original-title="warning">$' + soy.$$escapeHtml('Sync in progress') + '</span></a>' : '') + '</li>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.shortcut.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.shortcut';
}


JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-field-group">' + aui.form.textField({name: 'repo-shortcuts-url-' + opt_data.action, id: 'repo-shortcuts-url-' + opt_data.action, labelContent: opt_data.urlLabel ? opt_data.urlLabel : 'Repo link', placeholderText: 'e.g. https://bitbucket.org/org/projectrepository', extraClasses: 'repo-shortcuts-url', value: opt_data.url ? opt_data.url : '', errorTexts: opt_data.errors.urlError ? [opt_data.errors.urlError] : []}) + '<div class="field-group repo-shortcuts-name">' + aui.form.label({forField: 'repo-shortcuts-name-' + opt_data.action, content: opt_data.nameLabel ? opt_data.nameLabel : 'Label'}) + '<div class="repo-shortcuts-name-icon-block"><div class="repo-shortcuts-icon-picker-block"></div>' + aui.form.input({name: 'repo-shortcuts-name-' + opt_data.action, id: 'repo-shortcuts-name-' + opt_data.action, placeholderText: 'e.g. Project repository', extraClasses: 'repo-shortcuts-name-input' + (opt_data.isWithIcon ? ' repo-shortcuts-name-input-with-icon' : ''), value: opt_data.name ? opt_data.name : '', type: 'text'}) + '</div>' + ((opt_data.errors.iconError) ? aui.form.fieldError({message: opt_data.errors.iconError}) : '') + ((opt_data.errors.nameError) ? aui.form.fieldError({message: opt_data.errors.nameError}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields';
}


JIRA.Software.RepositoryShortcuts.Templates.addDialog = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-header-image add-repo"></div><form action="" method="post" class="aui"><h3>' + soy.$$escapeHtml('Create a repo link') + '</h3><p>' + soy.$$escapeHtml('Add a link to this project\x27s repo so your team can easily find their code.') + '</p><fieldset>' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '<div class="buttons-container"><div class="buttons repo-shortcuts-buttons">' + aui.buttons.button({text: 'Link repo', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></div></fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.addDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.addDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="' + soy.$$escapeHtml(opt_data.isAddDialog ? 'add-repository-dialog' : 'edit-repository-dialog') + '" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="manage-shortcut-dialog-header"></header><div class="aui-dialog2-content"><div id="image-behind"><div id="image-behind-top"/><div id="image-behind-bottom"/></div><div id="manage-repository-image-container"><div id="manage-repository-dialog-image"/></div><form action="" method="post" class="aui"><h1 id="manage-repository-dialog-title">' + soy.$$escapeHtml(opt_data.isAddDialog ? 'Connect a repository' : 'Edit repository') + '</h1><p id="manage-repository-dialog-description">' + soy.$$escapeHtml('Linking a repository will show information about your branches, commits and pull requests in Jira issues.') + '</p><fieldset>' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: opt_data.isAddDialog ? 'add' : 'edit', urlLabel: 'Repository link', nameLabel: 'Name'})) + '</fieldset><button type="submit" class="repo-shortcuts-hidden-submit" tabindex="-1"></button></form></div><div class="aui-dialog2-footer"><div class="buttons-container"><div class="buttons">' + ((! opt_data.isAddDialog) ? '<button class="aui-button repo-shortcuts-delete">' + soy.$$escapeHtml('Delete') + '</button>' : '') + '<button class="aui-button aui-button-primary repo-shortcuts-submit">' + soy.$$escapeHtml(opt_data.isAddDialog ? 'Connect' : 'Update') + '</button><button class="aui-button aui-button-text aui-button-subtle repo-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></div></div></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog(soy.$$augmentMap(opt_data, {isAddDialog: true}));
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog(soy.$$augmentMap(opt_data, {isAddDialog: false}));
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-header-image connection-request"></div><h3 class="repo-shortcuts-connectionRequestHeading">' + soy.$$escapeHtml('Linked but not integrated') + '</h3><p class="repo-shortcuts-connectionRequestDescription">' + soy.$$escapeHtml(AJS.format('Your repo is now linked, but your team can get visibility of development progress in their issues when {0} and Jira are integrated.',opt_data.dvcsName)) + '</p>' + ((opt_data.isIntegration) ? aui.buttons.button({text: AJS.format('Integrate Jira with {0}',opt_data.dvcsName), type: 'primary', extraClasses: 'repo-connection-start'}) : aui.buttons.button({text: 'Sync repository with Jira', type: 'primary', extraClasses: 'repo-connection-start'})) + aui.buttons.button({text: 'No thanks', type: 'link', extraClasses: 'repo-connection-cancel'});
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '" class="repo-shortcuts-syncing-dialog" responds-to="hover"><div class="repo-shortcuts-syncing-dialog-header"></div><h3>' + soy.$$escapeHtml(AJS.format('Syncing Jira with {0}',opt_data.dvcsType)) + '</h3><p>' + soy.$$escapeHtml(AJS.format('We\x27re busy syncing Jira with {0} \xe2\x80\x93 larger repos will take an hour or two. Once done, your team will',opt_data.dvcsType)) + '&nbsp;<a href="https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+JIRA+applications+with+Bitbucket+Cloud">' + soy.$$escapeHtml('enjoy greater confidence') + '</a>&nbsp;' + soy.$$escapeHtml('in their development process, and they can start') + '&nbsp;<a href="https://confluence.atlassian.com/display/BITBUCKET/Processing+JIRA+Software+issues+with+Smart+Commit+messages">' + soy.$$escapeHtml('using issue keys') + '</a>&nbsp;' + soy.$$escapeHtml('in commit messages right now!') + '</p>' + ((opt_data.canManageDVCS) ? aui.buttons.button({text: 'See syncing progress', type: 'link', href: '/secure/admin/ConfigureDvcsOrganizations!default.jspa'}) : '') + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="edit-repo-shortcuts-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Edit repo link') + '</h2></header></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome';
}


JIRA.Software.RepositoryShortcuts.Templates.editDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog2-content"><form class="aui" method="post">' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'edit'})) + '<button type="submit" class="repo-shortcuts-hidden-submit" tabindex="-1"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + aui.buttons.button({text: 'Save', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></footer>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.editDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.editDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.deleteDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="delete-repo-shortcuts-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete repo link') + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('Are you sure you want to delete this repo link?') + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + aui.buttons.button({text: 'Delete', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.deleteDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.deleteDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent = function(opt_data, opt_ignored) {
  var output = '';
  var imgBaseUrl__soy267 = "" + '/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts/images';
  output += '<div class="aui-dialog2-content">' + ((opt_data.isAdg3AddItemEnabled) ? '<img src="' + soy.$$escapeHtml(imgBaseUrl__soy267) + '/integrate-product-with-jira.svg" style="width: 100%" /><div class="description-container">' + ((opt_data.canUserManageDVCSAccounts && ! opt_data.isIntegration) ? '<p>' + soy.$$escapeHtml(AJS.format('A shortcut to your {0} repository has been created.',opt_data.dvcsName)) + '</p><p>' + soy.$$escapeHtml(AJS.format('Next, sync your Jira Cloud and {0} repository.',opt_data.dvcsName)) + '</p>' : '<p>' + soy.$$escapeHtml(AJS.format('Your repo is now linked, but your team can get visibility of development progress in their issues when {0} and Jira are integrated.',opt_data.dvcsName)) + '</p>') + ((! opt_data.canUserManageDVCSAccounts) ? '<p>' + soy.$$escapeHtml('A Jira admin needs to do this. Should we contact them for you?') + '</p>' : '') + '</div>' : '<div class="container"><div class="suggestion"><h3><span class="aui-icon aui-icon-small aui-iconfont-approve" original-title="approve"></span>' + soy.$$escapeHtml('Your link is ready.') + '</h3><p>' + soy.$$escapeHtml(AJS.format('The shortcut to your {0} repo has been created.',opt_data.dvcsName)) + '</p><h3>' + soy.$$escapeHtml('Now get the full experience!') + '</h3><p>' + soy.$$escapeHtml(AJS.format('Sync your Jira and {0} accounts to enjoy the seamless integration of issues and code.',opt_data.dvcsName)) + '<p></div><div class="value-prop"><img src="' + soy.$$escapeHtml(imgBaseUrl__soy267) + '/repo-issue-update.svg" width="128" height="100"/><p class="issue-update">' + soy.$$escapeHtml('Jira issues update to show repo branch, commit and pull request activity.') + '</p></div><div class="value-prop"><img src="' + soy.$$escapeHtml(imgBaseUrl__soy267) + '/repo-issue-transition.svg" width="114" height="87"/><p class="issue-transition">' + soy.$$escapeHtml('Jira workflows sync with repo activity to update automatically as you work.') + '</p></div></div>' + ((! opt_data.canUserManageDVCSAccounts) ? '<p class="non-admin-info"><span class="aui-icon aui-icon-small aui-iconfont-info"></span>' + soy.$$escapeHtml('A Jira admin needs to do this. Should we contact them for you?') + '</p>' : '')) + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent';
}


JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent = function(opt_data, opt_ignored) {
  return '<header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main" style="overflow: visible">' + ((opt_data.isIntegration) ? soy.$$escapeHtml(AJS.format('Integrate Jira with {0}',opt_data.dvcsName)) : soy.$$escapeHtml('Sync repository with Jira')) + '</h2></header>' + JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent(opt_data) + '<footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + ((opt_data.canUserManageDVCSAccounts && opt_data.isIntegration) ? aui.buttons.button({text: opt_data.isAdg3AddItemEnabled ? AJS.format('Integrate with {0}',opt_data.dvcsName) : AJS.format('Integrate {0}',opt_data.dvcsName), type: 'primary', extraClasses: 'repo-connect-start'}) : (opt_data.canUserManageDVCSAccounts && ! opt_data.isIntegration) ? aui.buttons.button({text: 'Start syncing', type: 'primary', extraClasses: 'repo-connect-start'}) : aui.buttons.button({text: 'Ask my admin', type: 'primary', extraClasses: 'repo-connect-start'})) + ((opt_data.isAdg3AddItemEnabled && opt_data.canUserManageDVCSAccounts) ? aui.buttons.button({text: 'Edit repository', type: 'link', extraClasses: 'repo-connect-edit aui-button-subtle'}) : (opt_data.isAdg3AddItemEnabled && ! opt_data.canUserManageDVCSAccounts) ? aui.buttons.button({text: 'Maybe later', type: 'link', extraClasses: 'repo-connect-cancel aui-button-subtle'}) : aui.buttons.button({text: 'Maybe later', type: 'link', extraClasses: 'repo-connect-cancel'})) + '</div></footer>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/URLMatcher.js' */
"use strict";define("repository-shortcuts/services/url-matcher",[],function(){return{parseUrl:function(t){function s(t,s,e){if(t&&t[1]&&s.indexOf(t[1])===-1&&e.indexOf(t[2])===-1)return{dvcsOrg:t[1],dvcsRepo:t[2]}}function e(){var e=/https:\/\/bitbucket\.org(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["snippets","account","dashboard"],i=["profile"];return s(r,c,i)}function r(){var e=/https:\/\/github\.com(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["pulls","issues","notifications","explore","integrations","settings","blog","about","site","security"],i=[];return s(r,c,i)}if("string"!=typeof t)throw new Error("parseUrl expects URLs to be strings");return e()?{dvcsType:"bitbucket",dvcsOrg:e().dvcsOrg,dvcsRepo:e().dvcsRepo}:r()?{dvcsType:"github",dvcsOrg:r().dvcsOrg,dvcsRepo:r().dvcsRepo}:{dvcsType:"unsupported"}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/DVCSAccountMatcher.js' */
"use strict";define("repository-shortcuts/services/dvcs-account-matcher",["jquery","underscore","bluebird/Promise","wrm/context-path","repository-shortcuts/services/url-matcher","jira/featureflags/feature-manager"],function(e,t,r,n,s,i){return{matchUrlAgainstNetwork:function(u){function c(s){var i=n()+"/rest/bitbucket/1.0/repository/summary/find?type="+s.dvcsType+"&orgName="+s.dvcsOrg+"&repoSlug="+s.dvcsRepo;return r.resolve(e.get(i)).then(function(e){return t.extend({},s,e)})["catch"](function(e){return e&&404===e.status?a(s):s})}function a(t){var s=n()+"/rest/bitbucket/1.0/organization/find?name="+t.dvcsOrg+"&type="+t.dvcsType;return r.resolve(e.get(s)).then(function(e){var r=e.dvcsType,n=e.name,s=e.approvalState,i=r===t.dvcsType,u=n===t.dvcsOrg,c="APPROVED"===s;return t.isOrganisationLinked=i&&u&&c,t})["catch"](function(e){return t})}function o(t){var s=n()+"/rest/devinfoadmin/1.0/githubAppDetails";return r.resolve(e.get(s)).then(function(e){var r=e.githubAppInstalled;return r&&(t.isOrganisationLinked=!0,t.isRepositoryLinked=!0),t.githubAppInstalled=r,t})["catch"](function(e){return t})}try{var d=s.parseUrl(u);if("unsupported"===d.dvcsType)return r.resolve(d);var v=i.isFeatureEnabled("fusion-dvcs-new-github-integrations-allowed");return d.newGithubDvcsIntegrationsAllowed=v,v||"github"!==d.dvcsType?d.dvcsRepo?c(d):a(d):o(d)}catch(p){return r.reject(p)}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/DVCSIntegrator.js' */
"use strict";define("repository-shortcuts/services/dvcs-integrator",["jquery","bluebird/Promise","jira/featureflags/simplified-ux-feature-manager","wrm/context-path","aui/flag","jira/featureflags/feature-manager"],function(t,e,o,n,r,i){function a(i){var a=i.dvcsRepoId,s=i.dvcsRepo;return e.resolve(t.ajax({type:"POST",contentType:"application/json",url:n()+"/rest/bitbucket/1.0/repo/"+a+"/autolink",data:JSON.stringify({payload:!0})})).then(function(){t.ajax({type:"POST",url:n()+"/rest/bitbucket/1.0/repository/"+a+"/softsync"}),r(o.isGlobalSidebarEnabled()?{type:"success",title:"You have added the repository",body:"Nicely done! Your team is going to love this.",close:"auto"}:{type:"success",body:AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e repo is now linked with Jira",s),close:"auto"})})["catch"](function(t){return r({type:"error",body:AJS.format("Failed to link \u003cstrong\u003e{0}\u003c/strong\u003e repo with Jira",s)}),e.reject(t)})}function s(t){var e=i.getStringValue("fusion-dvcs-github-addon-url"),o=n()+"/"+e+"&atl_token="+t;window.location.href=o}return{startBBOrganisationLink:function(t){var e=""+window.location.origin+n(),o=e+"/rest/aci/1.0/installation/jira-bitbucket-connector-plugin/descriptor",r=document.getElementById("atlassian-token").getAttribute("content"),i=e+"/secure/BitbucketPostInstallApprovalAction.jspa?jiraInitiated=true&customReturnUrl="+(window.location.href+"&atl_token="+r),a="https://bitbucket.org/site/addons/authorize";window.location.href=a+"?account="+t+"&descriptor_uri="+encodeURIComponent(o)+"&redirect_uri="+encodeURIComponent(i)},startBBRepositoryLink:function(t){var e=t.dvcsRepoId,o=t.dvcsRepo;return a({dvcsRepoId:e,dvcsRepo:o})},startGithubOrganisationLink:function(){var t=document.getElementById("atlassian-token").getAttribute("content"),e=i.isFeatureEnabled("fusion-dvcs-new-github-integrations-allowed");if(e){var o=n()+"/secure/admin/ConfigureDvcsOrganizations!default.jspa?openGithubDialog=1&customReturnUrl="+(window.location.href+"&atl_token="+t);window.location.href=o}else s(t)},startGithubRepositoryLink:function(t){var e=t.dvcsRepoId,o=t.dvcsRepo,n=i.isFeatureEnabled("fusion-dvcs-new-github-integrations-allowed");if(n)return a({dvcsRepoId:e,dvcsRepo:o});var r=document.getElementById("atlassian-token").getAttribute("content");s(r)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/RepoShortcutUpdateHandler.js' */
"use strict";define("repository-shortcuts/services/repo-shortcut-update-handler",["repository-shortcuts/views/connection-modal","jira/featureflags/simplified-ux-feature-manager","aui/flag"],function(e,t,r){return function(o,s){var a=o.attributes;if(o.hasLinkedAllComponents()){var i=a.dvcsRepo||a.dvcsOrg,n=a.dvcsRepo?"repository":"organisation",c="bitbucket"===a.dvcsType?"Bitbucket":"GitHub";return void(t.isGlobalSidebarEnabled()||r({type:"success",body:AJS.format("{0} {1} \u003cstrong\u003e{2}\u003c/strong\u003e is linked with Jira",c,n,i),close:"auto"}))}var u={repoShortcutModel:o,canUserManageDVCSAccounts:s},d=new e(u);d.render()}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/models/RepositoryShortcut.js' */
"use strict";define("repository-shortcuts/models/repository-shortcut",[],function(){return JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut.extend({defaults:{url:"",name:"",icon:"",type:"source.code.link",dvcsType:"unsupported",isPendingApproval:!1,dvcsOrg:void 0,dvcsRepo:void 0,dvcsRepoId:void 0,isOrganisationLinked:void 0,isRepositoryLinked:void 0,isFirstSyncRunning:void 0,newGithubDvcsIntegrationsAllowed:!0,githubAppInstalled:!1},clear:function(){this.unset("id"),this.set(this.defaults)},hasLinkedOrg:function(){var t=this.attributes;return t.dvcsOrg&&t.isOrganisationLinked},hasNotLinkedOrg:function(){var t=this.attributes;return t.dvcsOrg&&!t.isOrganisationLinked},hasLinkedOrgAndNotRepo:function(){var t=this.attributes;return this.hasLinkedOrg()&&t.dvcsRepo&&!t.isRepositoryLinked},isGithubAndNewGithubDvcsIntegrationsDisabled:function(){var t=this.attributes;return"github"===t.dvcsType&&!t.newGithubDvcsIntegrationsAllowed},hasLinkedAllComponents:function(){function t(){return s.dvcsRepo&&s.isRepositoryLinked}function i(){return!s.dvcsRepo}var s=this.attributes;return this.isGithubAndNewGithubDvcsIntegrationsDisabled()?s.githubAppInstalled:this.hasLinkedOrg()&&(t()||i())}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/models/RepositoryShortcuts.js' */
"use strict";define("repository-shortcuts/models/repository-shortcuts",["repository-shortcuts/models/repository-shortcut"],function(t){return JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts.extend({model:t,initialize:function(t,e){var i=this;this.projectKey=e.projectKey,this.canUserManageDVCSAccounts=e.canUserManageDVCSAccounts,this.listenTo(this,"dvcsremote:change",function(t){i._handleRepoLinkChangeOrAdd(t)})},_handleRepoLinkChangeOrAdd:function(t){var e=function(t,e){return t.get("dvcsType")===e.get("dvcsType")&&t.get("dvcsOrg")===e.get("dvcsOrg")},i=function(t,i){return e(t,i)&&t.get("dvcsRepo")===i.get("dvcsRepo")};this.forEach(function(n){t.id!==n.id&&(i(t,n)?n.set({isOrganisationLinked:t.get("isOrganisationLinked"),isRepositoryLinked:t.get("isRepositoryLinked"),dvcsRepoId:t.get("dvcsRepoId"),isFirstSyncRunning:t.get("isFirstSyncRunning")}):e(t,n)&&n.set({isOrganisationLinked:t.get("isOrganisationLinked")}))})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/RepositoryShortcutsList.js' */
"use strict";define("repository-shortcuts/views/repository-shortcut-list",["jquery","repository-shortcuts/views/repository-shortcut","repository-shortcuts/dialogs/add"],function(t,e,o){return JIRA.Projects.Sidebar.ProjectShortcuts.Views.List.extend({template:JIRA.Software.RepositoryShortcuts.Templates.content,childView:e,ui:{itemsContainer:".aui-nav",add:".repo-shortcuts-group__add"},collectionEvents:{add:function(){0!==this.collection.length&&this.$el.hasClass("repo-shortcuts-group_empty")&&this.$el.removeClass("repo-shortcuts-group_empty")},remove:function(){0!==this.collection.length||this.$el.hasClass("repo-shortcuts-group_empty")||this.$el.addClass("repo-shortcuts-group_empty")}},initialize:function(){var e=this;JIRA.API.getSidebar().done(function(o){var r=o.getAUISidebar();r.on("expand-end",function(){t(".aui-sidebar-submenu-dialog .repo-shortcuts-group__dropdown").remove(),t(".aui-sidebar-submenu-dialog .repo-shortcuts-syncing-dialog").remove()}),r.on("collapse-start",function(){e.$(".repo-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke"),e._addConnectionsAvailableMarkerOnSidebarIcon()})})},onRender:function(){var t=this,e=new o({sidebarItem:JIRA.API.Sidebar.getGroup(this.options.targetGroup).getItem("repo-shortcut-add"),projectKey:this.collection.projectKey,collection:this.collection}),r=JIRA.API.Projects.getCurrentProjectId();this.listenTo(e,"dialog:open",function(){t.trigger("add:open"),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.add-link.click",data:{projectId:r}})}),this.listenTo(e,"dialog:close",function(e){t.trigger("add:close",e),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.add-link.close",data:{projectId:r,isSave:e}})}),this._addConnectionsAvailableMarkerOnSidebarIcon()},serializeData:function(){return{canManageShortcuts:!0,numberOfShortcuts:this.collection.length}},_addConnectionsAvailableMarkerOnSidebarIcon:function(){var t=this.collection.some(function(t){return t.hasNotLinkedOrg()||t.hasLinkedOrgAndNotRepo()});t&&this.$el.addClass("connections-available")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/RepositoryShortcut.js' */
"use strict";define("repository-shortcuts/views/repository-shortcut",["jquery","underscore","repository-shortcuts/dialogs/connection","repository-shortcuts/dialogs/edit","repository-shortcuts/services/dvcs-integrator"],function(e,t,o,i,r){function n(e){return"bitbucket"===e||"github"===e}return JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut.extend({template:JIRA.Software.RepositoryShortcuts.Templates.shortcut,initialize:function(){t.bindAll(this,"toggleDropdown")},ui:{integrate:".repo-shortcuts-group__actions__integrate",del:".repo-shortcuts-group__actions__delete",edit:".repo-shortcuts-group__actions__edit",trigger:".repo-shortcuts-group__actions",dropdown:".repo-shortcuts-group__dropdown",link:".repo-shortcuts-group__link",connectionDialogTrigger:".suggest-connection-trigger"},templateHelpers:function(){var e=this.model.attributes,t=this.model.collection.canUserManageDVCSAccounts,o=n(e.dvcsType);if(t&&this.model.isGithubAndNewGithubDvcsIntegrationsDisabled()){var i=e.githubAppInstalled;return{warnOnGithubConnection:i}}var r=!(!e.isOrganisationLinked||e.dvcsRepo&&!e.isRepositoryLinked),s=t&&o&&!r;return{shouldWarnPotentialConnection:s}},onRender:function(){this.unwrapTemplate();var t=this,n=e(window),s=e(".aui-sidebar-body");new o({$trigger:this.ui.connectionDialogTrigger,repoShortcutModel:this.model}),this.ui.integrate.on("click",function(e){var o=t.model.attributes;if(e.preventDefault(),t.ui.trigger.blur(),"bitbucket"===o.dvcsType&&t.model.hasNotLinkedOrg())r.startBBOrganisationLink(o.dvcsOrg);else if("bitbucket"===o.dvcsType&&t.model.hasLinkedOrgAndNotRepo())r.startBBRepositoryLink(t.model.attributes).then(function(){t.model.set({isRepositoryLinked:!0}),t.model.trigger("dvcsremote:change",t.model)});else{if("github"!==o.dvcsType)throw"Unsupported DVCS Type";o.newGithubDvcsIntegrationsAllowed?t.model.hasNotLinkedOrg()?r.startGithubOrganisationLink():t.model.hasLinkedOrgAndNotRepo()&&r.startGithubRepositoryLink(t.model.attributes).then(function(){t.model.set({isRepositoryLinked:!0}),t.model.trigger("dvcsremote:change",t.model)}):o.githubAppInstalled||r.startGithubOrganisationLink()}}),this.ui.edit.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var o=new i({repoShortcutModel:t.model,canUserManageDVCSAccounts:t.model.collection.canUserManageDVCSAccounts});t.trigger("edit:open",t.model),t.listenToOnce(o,"dialog:close",function(e){t.trigger("edit:close",t.model,e)})}),this.ui.del.on("click",function(e){e.preventDefault(),t.ui.trigger.blur(),new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:t.model})}),this.ui.dropdown.on({"aui-dropdown2-show":function(){t.$el.addClass("aui-nav-selected"),s.one("scroll",t.toggleDropdown),n.one("scroll",t.toggleDropdown),t.ui.trigger.focus()},"aui-dropdown2-hide":function(){t.$el.removeClass("aui-nav-selected"),s.off("scroll",t.toggleDropdown),n.off("scroll",t.toggleDropdown)}}),this.ui.connectionDialogTrigger.on("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.warning.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t.model.id}})}),this.ui.link.on("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.shortcut.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t.model.id,shortcutType:t.model.dvcsType}})})},serializeData:function(){var e=t.extend(this.model.toJSON(),{canManageShortcuts:!0,canManageDVCS:this.model.collection.canUserManageDVCSAccounts});return e}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/DialogContent.js' */
"use strict";define("repository-shortcuts/views/dialog-content",["repository-shortcuts/services/url-matcher","repository-shortcuts/services/dvcs-account-matcher"],function(t,e){var r=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent;return r.extend({ui:{form:"form",inputs:"input, button",submit:".repo-shortcuts-submit",cancel:".repo-shortcuts-cancel",url:".repo-shortcuts-url input",name:".repo-shortcuts-name input"},events:{"click @ui.cancel":function(t){t.preventDefault(),this.model.clear(),this.setNameAutomagically=!0,this.errorModel.clear(),this.trigger("cancel")},"click @ui.submit":"_handleFormSubmit","submit @ui.form":"_handleFormSubmit","blur @ui.url":function(){this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function(){this.model.set("url",this.ui.url.val()),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function(){this.setNameAutomagically=!1,this.model.set("name",this.ui.name.val())}},initialize:function(t){var e=t.errorModel,r=t.canUserManageDVCSAccounts;this.canUserManageDVCSAccounts=r,this.errorModel=e;var i=this.model.get("name");this.setNameAutomagically=0===i.length},serializeData:function(){return _.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action})},onRender:function(){},hideIconPicker:function(){},_handleFormSubmit:function(r){var i=this,o=function(t){i.model.set({url:i.ui.url.val(),name:i.ui.name.val()}),i.model.set(t),i.model.save()};r.preventDefault(),this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl(),this.model.set(this.model.defaults);var s=this.ui.url.val();if(this.canUserManageDVCSAccounts)e.matchUrlAgainstNetwork(s).then(function(t){return o(t)})["catch"](function(){return o({})});else{var a=t.parseUrl(s);o(a)}},tryToAutomagicallyDeriveNameFromUrl:function(){var e=this.ui.url.val().trim();if(this.setNameAutomagically){var i=t.parseUrl(e);if(i.dvcsRepo)this.setName(i.dvcsRepo);else{if(!i.dvcsOrg)return r.prototype.tryToAutomagicallyDeriveNameFromUrl.call(this);this.setName(i.dvcsOrg)}}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/AddDialogContent.js' */
"use strict";define("repository-shortcuts/views/add-dialog-content",["repository-shortcuts/views/dialog-content","jira/featureflags/simplified-ux-feature-manager"],function(e,t){var o=t.isAdg3ModeOn(),r=o?JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog:JIRA.Software.RepositoryShortcuts.Templates.addDialog;return e.extend({template:r})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/EditDialogContent.js' */
"use strict";define("repository-shortcuts/views/edit-dialog-content",["repository-shortcuts/views/dialog-content","jira/featureflags/simplified-ux-feature-manager"],function(e,t){var o=t.isAdg3ModeOn();return o?e.extend({template:JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog,ui:_.extend({},e.prototype.ui,{"delete":".repo-shortcuts-delete"})}):e.extend({template:JIRA.Software.RepositoryShortcuts.Templates.editDialog})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/ConnectionDialogContent.js' */
"use strict";define("repository-shortcuts/views/connection-dialog-content",["repository-shortcuts/services/dvcs-integrator"],function(t){return JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog,ui:{start:".repo-connection-start",cancel:".repo-connection-cancel"},events:{"click @ui.start":function(t){t.preventDefault(),this.triggerSubmitAnalyticEvent(),this.startConnection(),this.trigger("connection:start")},"click @ui.cancel":function(t){t.preventDefault(),this.triggerCancelAnalyticEvent(),this.trigger("connection:cancel")}},triggerSubmitAnalyticEvent:function(){this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-integrate.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-sync.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},triggerCancelAnalyticEvent:function(){this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-integrate.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-sync.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},templateHelpers:function(){return{dvcsName:this.dvcsName,isIntegration:this.isIntegration}},initialize:function(e){var n=e.repoShortcutModel,i=function(t){t.set({isRepositoryLinked:!0}),t.trigger("dvcsremote:change",t)},r=n.attributes;if(this.dvcsName="bitbucket"===r.dvcsType?"Bitbucket":"GitHub",this.isIntegration=n.hasNotLinkedOrg(),"bitbucket"===r.dvcsType&&n.hasNotLinkedOrg())this.startConnection=function(){return t.startBBOrganisationLink(r.dvcsOrg)};else if("bitbucket"===r.dvcsType&&n.hasLinkedOrgAndNotRepo())this.startConnection=function(){t.startBBRepositoryLink(n.attributes).then(function(){return i(n)})};else{if("github"!==r.dvcsType)throw"Unsupported DVCS Type";r.newGithubDvcsIntegrationsAllowed?n.hasNotLinkedOrg()?this.startConnection=function(){t.startGithubOrganisationLink()}:n.hasLinkedOrgAndNotRepo()&&(this.startConnection=function(){t.startGithubRepositoryLink(n.attributes).then(function(){return i(n)})}):r.githubAppInstalled||(this.startConnection=function(){t.startGithubOrganisationLink()})}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/modal-dialogs/ConnectionModal.js' */
"use strict";define("repository-shortcuts/views/connection-modal",["underscore","aui/flag","repository-shortcuts/services/dvcs-integrator","jira/featureflags/simplified-ux-feature-manager"],function(t,e,i,n){var r=n.isAdg3ModeOn(),a=r?"aui-dialog2-small":"aui-dialog2-medium";return JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent,tagName:"section",attributes:{role:"dialog","class":"aui-layer aui-dialog2 "+a+" repo-integration-dialog","aria-hidden":"true","data-aui-modal":r?"false":"true","data-aui-focus-selector":".aui-dialog2-content .repo-connect-start"},ui:{submit:".repo-connect-start",cancel:".repo-connect-cancel",edit:".repo-connect-edit"},events:{"click @ui.submit":function(t){t.preventDefault(),this.triggerSubmitAnalyticEvent(),this.handleSubmit()},"click @ui.cancel":function(t){t.preventDefault(),this.triggerCancelAnalyticEvent(),this._removeAndHide()},"click @ui.edit":function(t){t.preventDefault(),this._removeAndHide(),this.triggerEditAnalyticEvent(),this.repoShortcutModel.trigger("edit:start",this.repoShortcutModel.id)}},templateHelpers:function(){return{dvcsName:this.dvcsName,canUserManageDVCSAccounts:this.canUserManageDVCSAccounts,isIntegration:this.isIntegration,isAdg3AddItemEnabled:r}},_removeAndHide:function(){var t=this;AJS.dialog2(this.$el).hide(),setTimeout(function(){return t.destroy()})},triggerSubmitAnalyticEvent:function(){this.canUserManageDVCSAccounts?this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.ask-admin.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},triggerEditAnalyticEvent:function(){this.canUserManageDVCSAccounts&&(this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}))},triggerCancelAnalyticEvent:function(){this.canUserManageDVCSAccounts?this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.ask-admin.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},initialize:function(t){var n=this,r=t.repoShortcutModel,a=t.canUserManageDVCSAccounts;this.repoShortcutModel=r;var s=function(t){t.set({isRepositoryLinked:!0}),t.trigger("dvcsremote:change",t),n._removeAndHide()},c=function(){r.set({isPendingApproval:!0}),n.listenTo(r,"save:success",function(){e({type:"success",body:"Your admin will be notified when they next login",close:"auto"}),n._removeAndHide()}),n.listenTo(r,"save:failure",function(){e({type:"error",body:"Failed to notify admin"}),n._removeAndHide()}),r.save()},o=r.attributes;if(this.dvcsName="bitbucket"===o.dvcsType?"Bitbucket":"GitHub",this.canUserManageDVCSAccounts=a,this.isIntegration=r.hasNotLinkedOrg(),a)if("bitbucket"===o.dvcsType&&r.hasNotLinkedOrg()&&a)this.handleSubmit=function(){return i.startBBOrganisationLink(o.dvcsOrg)};else if("bitbucket"===o.dvcsType&&r.hasLinkedOrgAndNotRepo()&&a)this.handleSubmit=function(){i.startBBRepositoryLink(r.attributes).then(function(){return s(r)})["catch"](function(){return n._removeAndHide()})};else{if("github"!==o.dvcsType)throw"Unsupported DVCS Type";o.newGithubDvcsIntegrationsAllowed?r.hasNotLinkedOrg()?this.handleSubmit=function(){i.startGithubOrganisationLink()}:r.hasLinkedOrgAndNotRepo()&&(this.handleSubmit=function(){i.startGithubRepositoryLink(r.attributes).then(function(){return s(r)})}):o.githubAppInstalled||(this.handleSubmit=function(){i.startGithubOrganisationLink()})}else this.handleSubmit=c},onRender:function(){AJS.dialog2(this.$el).show()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/Add.js' */
"use strict";define("repository-shortcuts/dialogs/add",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/add-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler"],function(e,t,s,i){return JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add.extend({initialize:function(r){_.bindAll(this,"hide","refresh","focusForm");var o=this;this.analyticsSave=!1,this.sidebarItem=r.sidebarItem,this.projectKey=r.projectKey,this.collection=r.collection,this.model=new t(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new s({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts}),this.view.render();var c=e(window),n=e(document),a=e(".aui-sidebar-body");this.dialog=AJS.InlineDialog(this.sidebarItem.ui.link,"repo-shortcuts-group__add-dialog",function(e,t,s){return o.sidebarItem.$el.addClass("aui-nav-selected"),o.view.render(),o.view.$el.appendTo(e),o.view.ui.url.focus(),c.on("scroll.repo-shortcuts",function(){o.refresh()}),a.on("scroll.repo-shortcuts",function(){o.hide()}),n.on("showLayer",o.focusForm),c.on("resize",o.refresh),s(),!1},{gravity:"w",autoWidth:!0,initCallback:function(){o.trigger("dialog:open"),o.analyticsSave=!1},hideCallback:function(){o.sidebarItem.$el.removeClass("aui-nav-selected"),o.sidebarItem.ui.link.blur(),c.off("scroll.repo-shortcuts"),a.off("scroll.repo-shortcuts"),n.off("showLayer",o.focusForm),o.trigger("dialog:close",o.analyticsSave)},persistent:!0,closeOnTriggerClick:!0}),this.listenTo(this.view,"render",this.refresh),this.listenTo(this.view,"cancel",this.hideAndRender),this.listenTo(this.model,"save:success",function(){var e=new t(this.model.toJSON(),{projectKey:this.projectKey});this.collection.add(e),this.model.clear(),this.analyticsSave=!0,this.hide(),"bitbucket"!==e.attributes.dvcsType&&"github"!==e.attributes.dvcsType||i(e,this.collection.canUserManageDVCSAccounts),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.link-repo.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),dvcsType:e.attributes.dvcsType}})}),this.listenTo(this.sidebarItem,"before:select",function(e){return e.preventDefault()}),AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide),e(".repo-shortcuts-group").on("click","li",this.hide)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/AddModal.js' */
"use strict";define("repository-shortcuts/dialogs/add-modal",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/add-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler","aui/flag"],function(t,e,o,s,i){return JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(t){this.collection=t.collection,this.projectKey=t.projectKey,this.projectId=t.projectId,this.analyticsSave=!1,this.model=new e(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new o({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts}),this.view.render(),this.dialog=AJS.dialog2(this.view.$el),this.listenTo(this.model,"save:success",function(){var t=new e(this.model.toJSON(),{projectKey:this.projectKey});this.collection.add(t),this.model.clear(),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.link-repo.click",data:{projectId:this.projectId,dvcsType:t.attributes.dvcsType}}),this.analyticsSave=!0,this._closeDialog(),"bitbucket"===t.attributes.dvcsType||"github"===t.attributes.dvcsType?(s(t,this.collection.canUserManageDVCSAccounts),t.hasLinkedAllComponents()&&i({type:"success",title:"You have added the repository",body:"Nicely done! Your team is going to love this.",close:"auto"})):i({type:"success",title:"You have added the shortcut",body:"Nicely done! Your team is going to love this.",close:"auto"})}),this.listenTo(this.view,"cancel",this._closeDialog),this.listenTo(this.dialog,"hide",this._cleanUpDialog)},show:function(){this.dialog.show(),this.view.ui.url.focus(),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.add-link.click",data:{projectId:this.projectId}})},_closeDialog:function(){this.dialog.hide()},_cleanUpDialog:function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.add-link.close",data:{projectId:this.projectId,isSave:this.analyticsSave}}),t("#add-repository-dialog").parent().remove()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/Edit.js' */
"use strict";define("repository-shortcuts/dialogs/edit",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/edit-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler","aui/flag","jira/featureflags/simplified-ux-feature-manager"],function(e,t,o,r,s,i){var c=i.isAdg3ModeOn();return JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit.extend({initialize:function(i){var d=this,a=i.repoShortcutModel,n=i.canUserManageDVCSAccounts;_.bindAll(this,"hide"),this.model=new t(a.toJSON(),{projectKey:a.projectKey||a.collection.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors((void 0),{model:this.model}),this.view=new o({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:n}),this.view.render();var l=e(JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome({}));if(this.view.$el.appendTo(l),this.dialog=AJS.dialog2(l),this.dialog.show(),this.view.ui.url.focus(),c){var u=JIRA.API.Projects.getCurrentProjectId();this.view.ui["delete"].on("click",function(e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.click",data:{projectId:u,shortcutId:d.model.id}}),e.preventDefault(),d.hide();var t=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:d.model});d.listenToOnce(t,"dialog:close",function(e){e?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.confirm",data:{projectId:u,shortcutId:d.model.id}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.cancel",data:{projectId:u,shortcutId:d.model.id}})})}),this.listenTo(this.model,"remove:success",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.success",data:{projectId:u,shortcutId:d.model.id}}),a.collection.remove(a),s({type:"success",body:"Shortcut deleted.",close:"auto"})}),this.listenTo(this.model,"save:start",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.save",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:d.model.id}})})}this.listenTo(this.view,"cancel",function(){c&&AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:a.id}}),d.hide()}),this.listenTo(this.model,"save:success",function(){c&&AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.success",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:d.model.id}}),d.hide(),a.set(d.model.toJSON()),"bitbucket"===a.get("dvcsType")||"github"===a.get("dvcsType")?(r(a,n),c&&a.hasLinkedAllComponents()&&s({type:"success",body:"You have updated the repository",close:"auto"})):c&&s({type:"success",body:"You have updated the shortcut",close:"auto"})}),this.dialog.on("hide",function(){return d.trigger("dialog:close",d.analyticsSave)})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/Connection.js' */
"use strict";define("repository-shortcuts/dialogs/connection",["jquery","underscore","repository-shortcuts/views/connection-dialog-content"],function(i,e,o){return JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(t){var r=this,s=t.$trigger,n=t.repoShortcutModel;e.bindAll(this,"hide");var c=this,l={gravity:"w",persistent:!0,closeOnTriggerClick:!0,initCallback:function(){c.trigger("dialog:open"),c.analyticsSave=!1},hideCallback:function(){i(window).off("scroll.repo-shortcuts"),i(".aui-sidebar-body").off("scroll.repo-shortcuts"),i(document).off("showLayer",c.focusForm),c.trigger("syncDialog:close")}},a=function(e,o,t){var s=i(window),n=i(".aui-sidebar-body");return e.addClass("connection-dialog"),r.view.render(),r.view.$el.appendTo(e),s.on("resize",r.refresh),s.on("scroll.repo-shortcuts",r.refresh),n.on("scroll.repo-shortcuts",r.hide),t(),!1},d="suggest-connection-dialog-"+n.id;this.view=new o({repoShortcutModel:n}),this.listenTo(this.view,"connection:start",this.hide),this.listenTo(this.view,"connection:cancel",this.hide),this.dialog=AJS.InlineDialog(s,d,a,l),AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide)},hide:function(){this.dialog.hide()},refresh:function(){this.dialog.refresh()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/init-adg2.js' */
"use strict";require(["underscore","bluebird/Promise","repository-shortcuts/models/repository-shortcuts","repository-shortcuts/views/repository-shortcut-list","repository-shortcuts/services/dvcs-account-matcher","jira/featureflags/simplified-ux-feature-manager","jira/featureflags/feature-manager","aui/flag"],function(e,t,r,a,s,o,i,c){function n(o){var i=WRM.data.claim("com.atlassian.jira.plugin.devstatus.web.reposhortcuts:can-manage-dvcs"),c=JIRA.API.Projects.getCurrentProjectKey(),n=o.map(function(e){return s.matchUrlAgainstNetwork(e.url)});t.all(n).then(function(t){var s=o.map(function(r,a){return e.extend({},r,t[a])}),n=new r(s,{projectKey:c,canUserManageDVCSAccounts:i}),u=new a({collection:n,targetGroup:"repo-shortcuts-group"});u.render()})["catch"](function(e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.shortcut-data-retrieve-fail",errorMessage:e&&e.message})})}function u(){var e=JSON.parse(sessionStorage.getItem("reposhortcuts.pageloadmessages")),t=Array.isArray(e)?e:[];t.forEach(function(e){c({type:e.type,title:e.title,body:e.body,close:e.close})}),sessionStorage.removeItem("reposhortcuts.pageloadmessages")}JIRA.API.getSidebar().done(function(){if(!o.isGlobalSidebarEnabled()){var e=WRM.data.claim("com.atlassian.jira.plugin.devstatus.web.reposhortcuts:can-manage-shortcuts"),t=WRM.data.claim("com.atlassian.jira.plugin.devstatus.web.reposhortcuts:repository-shortcuts");e&&Array.isArray(t)&&(n(t),u())}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-shortcut-utils', location = 'js/repository-shortcuts/utils/ShortcutUtils.js' */
"use strict";define("repository-shortcuts/utils/repository-shortcut-utils",["exports"],function(t){t.mapDvcsTypeToIcon=function(t){switch(t){case"bitbucket":return"bitbucket";case"github":return"repos";default:return"shortcut"}},t.shouldShowSync=function(t,e){var s=t.attributes,i="bitbucket"===s.dvcsType||"github"===s.dvcsType,o=Boolean(s.isOrganisationLinked&&(!s.dvcsRepo||s.isRepositoryLinked));return e&&i&&!o}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3', location = 'js/repository-shortcuts/views/RepositoryShortcutsSidebarGroup.js' */
"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}define("repository-shortcuts/views/repository-shortcut-sidebar-group",["underscore","jira/dev-status/util/es6","repository-shortcuts/views/connection-modal","repository-shortcuts/dialogs/edit","repository-shortcuts/utils/repository-shortcut-utils"],function(t,e,o,n,r){var i="com.atlassian.jira.jira-projects-plugin:source.code.link.",c="sidebar-project-shortcuts";return JIRA.Projects.Libs.Marionette.CompositeView.extend({initialize:function(){var t=this;JIRA.API.getSidebar().done(function(e){t._updateAllRepoShortcutItems(e),t._initialiseSyncRepoDialog(e),t._initialiseEditRepoDialog(e),t.collection.on("change",function(o){return t._updateRepoShortcutItem(o,e)}).on("add",function(o){return t._addNewShortcutToSidebar(o,e)}).on("remove",function(o){return t._removeShortcutFromSidebar(o.id,e)}).on("edit:start",function(e){t._showEditShortcutDialog(e,"integrationDialog")})})},_updateAllRepoShortcutItems:function(t){var o=this;if(!this.collection.isEmpty()){var n=t.getGroup(c).links.slice(0),a=n.filter(function(t){return e.stringStartsWith(t.id,i)});if(0!==a.length){var s=a[0].canEdit,u=this.collection.map(function(t){return{id:""+i+t.id,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),canEdit:s,showSync:r.shouldShowSync(t,o.collection.canUserManageDVCSAccounts)}}),d=e.findIndex(n,function(t){return t.id===a[0].id});n.splice.apply(n,[d,a.length].concat(_toConsumableArray(u)));var l=t.getGroup(c);t.replaceGroup(c,t.createGroup({id:c,name:l.getName(),links:n,section:!0}))}}},_updateRepoShortcutItem:function(t,e){e.replaceItem(""+i+t.id,{id:""+i+t.id,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),canEdit:!0,showSync:r.shouldShowSync(t,this.collection.canUserManageDVCSAccounts)})},_initialiseSyncRepoDialog:function(t){var e=this;t.on(t.events.SYNC,function(t){var n=e._getRepoShortcutId(t.target.getId());if(n){var r=e.collection.models.find(function(t){return t.get("id")===n}),i=new o({repoShortcutModel:r,canUserManageDVCSAccounts:e.collection.canUserManageDVCSAccounts});i.render()}})},_initialiseEditRepoDialog:function(t){var e=this;t.on(t.events.EDIT,function(t){e._showEditShortcutDialog(e._getRepoShortcutId(t.target.getId()),"sidebar")})},_showEditShortcutDialog:function(t,e){if(t){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t,referrer:e}});var o=this.collection.models.find(function(e){return e.get("id")===t});new n({repoShortcutModel:o,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts})}},_getRepoShortcutId:function(t){return e.stringStartsWith(t,i)?t.substr(i.length):null},_addNewShortcutToSidebar:function(t,o){var n=""+i+t.id,a={id:n,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),showSync:r.shouldShowSync(t,this.collection.canUserManageDVCSAccounts),canEdit:!0},s=o.getGroup(c).links,u=e.findIndex(s,function(t){return e.stringStartsWith(t.id,"com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link")});u=u>=0?u:void 0,o.addItem(c,a,u)},_removeShortcutFromSidebar:function(t,e){var o=""+i+t;e.deleteItem(o)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3', location = 'js/repository-shortcuts/init-adg3.js' */
"use strict";require(["jquery","underscore","bluebird/Promise","repository-shortcuts/models/repository-shortcuts","repository-shortcuts/services/dvcs-account-matcher","repository-shortcuts/dialogs/add-modal","repository-shortcuts/views/repository-shortcut-sidebar-group","jira/featureflags/simplified-ux-feature-manager","aui/flag"],function(e,t,r,o,n,a,i,s){function c(a,s){var c=AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(a)+"/shortcut";e.ajax(c+"?shortcutType=source.code.link").done(function(e){var c=e.map(function(e){return n.matchUrlAgainstNetwork(e.url)});r.all(c).then(function(r){var n=e.map(function(e,o){return t.extend({},e,r[o])}),c=new o(n,{projectKey:a,canUserManageDVCSAccounts:s});new i({collection:c}),p(c)})["catch"](function(e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.shortcut-data-retrieve-fail",errorMessage:e&&e.message})})})}function u(e){var t=JIRA.API.Projects.getCurrentProjectId(),r=new a({projectKey:e.projectKey,projectId:t,collection:e});r.show()}function p(e){JIRA.API.getSidebar().done(function(t){t.on(t.events.JIRA_SUMMON_ADD_SHORTCUT_DIALOG,function(t,r){r.shortcutTypeId===l&&u(e)}),t.on(t.events.BEFORE_NAVIGATE,function(t,r){t.target.getId()===d&&u(e)})})}var d="com.pyxis.greenhopper.jira:project-sidebar-simple-add-repo",l="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcut-type",g="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3.repository-shortcuts-data";JIRA.API.getSidebar().done(function(){if(s.isAdg3ModeOn()){var e=WRM.data.claim(g),t=JIRA.API.Projects.getCurrentProjectKey();c(t,e.canManageDVCS)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-navigation-next', location = 'js/repository-shortcuts/integration/navigation-next.js' */
"use strict";define("repository-shortcuts/navigation-next",["jquery","underscore","bluebird/Promise","jira/dev-status/util/es6","repository-shortcuts/models/repository-shortcuts","repository-shortcuts/dialogs/add-modal","repository-shortcuts/dialogs/edit","repository-shortcuts/views/connection-modal","repository-shortcuts/utils/repository-shortcut-utils","repository-shortcuts/services/dvcs-account-matcher"],function(t,e,n,r,o,i,c,a,s,u){var d="com.atlassian.jira.jira-projects-plugin:source.code.link.",l="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-navigation-next.repository-shortcuts-data",f="com.pyxis.greenhopper.jira:project-sidebar-simple-add-repo",p=WRM.data.claim(l),g=p.canManageDVCS;return function(r){var l=r.shortcuts,p=r.onAdd,h=r.onEdit,y=r.onDelete,v=r.canUserManageDVCSAccounts,m=void 0===v?g:v,j=JIRA.API.Projects.getCurrentProjectKey(),A=JIRA.API.Projects.getCurrentProjectId(),E=new o([],{canUserManageDVCSAccounts:m,projectKey:j}),w=!1,S=function(t){if(!w){var e=t.get("icon");if(e)return e}return s.mapDvcsTypeToIcon(t.get("dvcsType"))},I=function(t){return s.shouldShowSync(t,m)},C=function(t){return d+t.id},D=function(t,n){return e.extend({},n,{name:t.get("name"),url:t.get("url"),type:t.get("type"),id:C(t),icon:S(t),showSync:I(t),onEditClick:function(){return b(t.id,"sidebar")},onSyncClick:function(){return k(t.id)}})},M=function(t){return{name:t.text,url:t.href,id:t.id,icon:t.icon}},P=function(){return new i({collection:E,projectKey:j,projectId:A}).show()},b=function(t,e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit",data:{projectId:A,shortcutId:t,referrer:e}}),new c({repoShortcutModel:E.get(t),canUserManageDVCSAccounts:m})},k=function(t){return new a({repoShortcutModel:E.get(t),canUserManageDVCSAccounts:m}).render()},x=function(t){return p(D(t,{canEdit:!0}))},J=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.canEdit;(Array.isArray(t)?t:[t]).forEach(function(t){return h(D(t,{canEdit:n}))})},R=function(t){return y(C(t))};E.add(l.map(M),{projectKey:j}),l._collection=E,l.length&&J(E.models,{canEdit:l[0].canEdit}),E.on("add",function(t){return x(t)}).on("change",function(t,e){var n=e.canEdit,r=void 0===n||n;return J(t,{canEdit:r})}).on("remove",function(t){return R(t)}).on("edit:start",function(t){return b(t,"integrationDialog")});var U=l.map(function(t){return u.matchUrlAgainstNetwork(t.href)});return n.all(U).then(function(t){w=!0,t.forEach(function(t,e){var n=l[e],r=E.get(n.id);r&&r.set(t,{canEdit:n.canEdit})})})["catch"](function(t){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.shortcut-data-retrieve-fail",errorMessage:t&&t.message})}),(JIRA.API.getNavigationApi||t.Deferred)().then(function(t){t.onItemClick(t.viewIds.SOFTWARE,f,P)}),{add:P}}});;
;
/* module-key = 'com.atlassian.jira.jira-one-click-invite-plugin:one-click-invite-init', location = 'js/sidebar/one-click-invite/one-click-invite-init.js' */
AJS.toInit(function(){var i=WRM.data.claim("com.atlassian.jira.jira-one-click-invite-plugin:one-click-invite-init.is-ondemand-data-provider");i&&WRM.require("wrc!com.atlassian.jira.jira-one-click-invite-plugin:one-click-invite")});;
;
/* module-key = 'jira.webresources:mobile-getmobile', location = '/includes/jira/mobile/show-get-mobile-dialog.js' */
define("jira/mobile/show-get-mobile-dialog",["wrm/data","wrm/context-path","jquery"],function(t,e,n){"use strict";function i(){0==n(r).length&&(n("body").append(JIRA.Templates.Mobile.getmobile({contextPath:c})),s(),n(p).click(function(){var t=n(d).intlTelInput("getNumber");u(t),AJS.dialog2(r).hide(),n(d).intlTelInput("setNumber",""),a(!1)})),AJS.dialog2(n(r)).show()}function l(){return n("head").append("<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/9.0.9/css/intlTelInput.css'>"),n.getScript("https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/9.0.9/js/intlTelInput.min.js")}function s(){l().done(function(){n.fn.intlTelInput.loadUtils("https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/9.0.9/js/utils.js"),o()})}function o(){n(d).intlTelInput({preferredCountries:["us","gb","au","de","es","jp"]}),n(d).on("input",function(){a(n(d).intlTelInput("isValidNumber"))}),n(d).on("countrychange",function(){a(n(d).intlTelInput("isValidNumber"))}),n("#jira-get-mobile-content").css("overflow","visible"),n(".country-list").css("width","359px")}function a(t){n("#jira-get-mobile-continue").prop("disabled",!t)}function u(t){return n.ajax({url:"https://simple-sms-sender.us-east-1.prod.public.atl-paas.net/rest/send/EE-29",type:"POST",contentType:"application/json",data:JSON.stringify({to:t,name:"there",atlassianAccount:AJS.Meta.get("atlassian-account-id")})}).then(function(){analytics.send({name:"getmobile.sendsms"})})}var c=e(),r="#jira-get-mobile-dialog",p="#jira-get-mobile-continue",d="#jira-get-mobile-phone";return i});;
;
/* module-key = 'jira.webresources:mobile-getmobile', location = '/includes/jira/mobile/getmobile.js' */
require(["jira/mobile/show-get-mobile-dialog","jira/analytics","jquery"],function(e,i,t){"use strict";t(function(){var n=t("#view_get_mobile");n.length>0&&(n.attr("href","#"),n.click(function(){e(),i.send({name:"getmobile.click"})}))})});;
;
/* module-key = 'jira.webresources:mobile-getmobile', location = 'includes/jira/mobile/getmobile.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Mobile&&(JIRA.Templates.Mobile={}),JIRA.Templates.Mobile.getmobile=function(e,i){return'<section role="dialog" id="jira-get-mobile-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true"><header class="aui-dialog2-header" style="background-image: url('+soy.$$escapeHtml(e.contextPath)+'/images/mobile/getmobile.png);"><h2 class="aui-dialog2-header-main"></h2><a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a></header><div id="jira-get-mobile-content" class="aui-dialog2-content"><div><h2>'+soy.$$escapeHtml("Create your next issue anywhere")+'</h2></div><div class="jira-get-mobile-content-copy">'+soy.$$escapeHtml("On the train or between meetings, the Jira app is ready wherever inspiration strikes.")+'<form class="aui" style="padding-top: 15px; padding-bottom: 8px" onsubmit="return false;"><div style="display: inline-block; white-space: nowrap"><input type="tel" id="jira-get-mobile-phone" style="border-top-right-radius: 0; border-bottom-right-radius: 0; width: 261px;" class="text long-field form-control" autofocus><button id="jira-get-mobile-continue" style="border-bottom-left-radius: 0; border-top-left-radius: 0; margin-left: -4px;" class="aui-button aui-button-primary" disabled>'+soy.$$escapeHtml("Get the app")+"</button></div></form><small>"+soy.$$escapeHtml("Your carrier\'s standard messaging rates apply to the text message received.")+'</small></div></div><footer class="aui-dialog2-footer"></footer></section>'};;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-header-async', location = 'node_modules/@atlassian/aui/src/js/aui/header-async.js' */
("undefined"===typeof window?global:window).__b85c25eb273a1b11a40084d04bbc6270=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__906ea2ee8af7ec57662c322a720a678d,c=a&&a.__esModule?a:{"default":a},a=(a=__c1ce1f1e3e613f564fc234ff043570f1)&&a.__esModule?a:{"default":a},a=(0,a.default)("aui-header",{type:a.default.type.CLASSNAME,created:function(a){(0,c.default)(a)}});b.default=a;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml('Application Links') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml('Shortcuts') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.loading.soyTemplateName = 'navlinks.templates.appswitcher.loading';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy79 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy79, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList87 = opt_data.list;
  var linkListLen87 = linkList87.length;
  for (var linkIndex87 = 0; linkIndex87 < linkListLen87; linkIndex87++) {
    var linkData87 = linkList87[linkIndex87];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData87.href) + '" title="' + soy.$$escapeHtml(linkData87.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData87.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  var loadingContent__soy98 = '' + navlinks.templates.appswitcher.loading(null);
  var triggerContent__soy100 = '' + navlinks.templates.appswitcher.trigger(null);
  output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy98, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy100, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy106 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy106) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy106) + '" target="_blank"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher.suggestionApp';
}


navlinks.templates.appswitcher.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml('Try other Atlassian apps') + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml('Don\x27t show this again') + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher.suggestionApps';
}


navlinks.templates.appswitcher.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applications.soyTemplateName = 'navlinks.templates.appswitcher.applications';
}


navlinks.templates.appswitcher.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param141 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList149 = opt_data.list;
    var linkListLen149 = linkList149.length;
    for (var linkIndex149 = 0; linkIndex149 < linkListLen149; linkIndex149++) {
      var linkData149 = linkList149[linkIndex149];
      param141 += navlinks.templates.appswitcher.applicationsSectionItem(soy.$$augmentMap(linkData149, {showDescription: opt_data.showDescription}));
    }
    param141 += '</ul>';
    output += aui.dropdown2.section({content: param141});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher.applicationsSection';
}


navlinks.templates.appswitcher.applicationsSectionItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsSectionItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsSectionItem';
}


navlinks.templates.appswitcher.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('Configure\x26hellip;') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.adminSection.soyTemplateName = 'navlinks.templates.appswitcher.adminSection';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click";var APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show";var APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error";var APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click";var APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";(function(c,f){var b="isAppSuggestionAvailable";var d="isSiteAdminUser";var e="isUserAdmin";var a="#app-switcher";f.AppSwitcher=function(j){var l=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var k="unified.usermanagement";var m=this;this.$dropdown=null;j=c.extend({dropdownContents:null},j);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=c(j.dropdownContents);this.envData=this.$dropdown.data("environment")}return this.$dropdown};this.updateDropdown=function(n){this.getDropdown().html(navlinks.templates.appswitcher.applications({apps:n,showAdminLink:this.envData[e],adminLink:l}));this.bindAnalyticsHandlers();if(this.envData[b]===true){this.handleSuggestionApps(n)}}.bind(this);this.bindAnalyticsHandlers=function(){c(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});c("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});c("#app-switcher .nav-link").on("click",function(){var p="custom";var q=c(this).find("a");var o=q.attr("href");var n=window.location.hostname;if(o.indexOf(n+"/wiki")>-1){p="confluence"}else{if(o.indexOf(n+"/build")>-1){p="bamboo"}else{if(o.indexOf(n)>-1){p="jira"}}}AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:p}})});c(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.isBillingSystemEnabled=function(){return(this.envData[d]===true)&&AJS.DarkFeatures.isEnabled(k)};this.handleSuggestionApps=function(q){var r=_.map(q,function(s){return s.applicationType.toLowerCase()});var o=c("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");o.html(navlinks.templates.appswitcher.suggestionApps);var p=o.find(".suggestion-apps");var n=false;_.each(g,function(s){if(!_.contains(r,s.appName)){n=true;p.append(navlinks.templates.appswitcher.suggestionApp({suggestionApp:s,isBillingSystemEnabled:m.isBillingSystemEnabled()}))}});if(!n){return}c("#app-switcher").append(o);c(".app-discovery-suggestion-app").click(function(){var t=c(this).find("a");var s;if(m.envData[d]===true){s="appswitcher.discovery.siteadmin.select.inproduct."}else{s="appswitcher.discovery.user.select."}s=s+t.attr("id").toLowerCase();AJS.trigger("analytics",{name:s})});c(".app-discovery-suggestion-app").hover(function(){c(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});c(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});i(h,"true");o.remove()})};this.showError=function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});this.getDropdown().html(navlinks.templates.appswitcher.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(m.retryLoading,m))}.bind(this);this.retryLoading=function(n){this.getDropdown().html(navlinks.templates.appswitcher.loading());this.getLinks();n&&n.stopPropagation()};c(".app-switcher-trigger").on("click",function(){if(!this.$dropdown){this.getLinks()}}.bind(this))};var h="key-no-thanks";var g=[{appName:"jira",appDesc:"Issue & Project Tracking Software",discoveryUrl:"https://www.atlassian.com/software/jira",billingSystemDiscoveryUrl:"/admin/billing/addapplication"},{appName:"confluence",appDesc:"Collaboration and content sharing",discoveryUrl:"https://www.atlassian.com/software/confluence",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=confluence.ondemand"}];var i=function(j,k){c.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:j,value:k})})};c(function(){if(c(a).data("is-switcher")===true){new f.AppSwitcher({dropdownContents:a})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'soy/headerDropdown.soy' */
// This file was automatically generated from headerDropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Menu.Dropdowns.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Menu == 'undefined') { JIRA.Templates.Menu = {}; }
if (typeof JIRA.Templates.Menu.Dropdowns == 'undefined') { JIRA.Templates.Menu.Dropdowns = {}; }


JIRA.Templates.Menu.Dropdowns.dropdown2Fragment = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList3 = opt_data.sections;
  var sectionListLen3 = sectionList3.length;
  for (var sectionIndex3 = 0; sectionIndex3 < sectionListLen3; sectionIndex3++) {
    var sectionData3 = sectionList3[sectionIndex3];
    var hasItems__soy4 = sectionData3.items && sectionData3.items.length > 0;
    if (hasItems__soy4) {
      output += '<div class="aui-dropdown2-section">' + ((sectionData3.label) ? '<strong>' + soy.$$escapeHtml(sectionData3.label) + '</strong>' : '') + '<ul class=\'aui-list-truncate\'' + ((sectionData3.id) ? ' id="' + soy.$$escapeHtml(sectionData3.id) + '"' : '') + ((sectionData3.style) ? ' class="' + soy.$$escapeHtml(sectionData3.style) + '"' : '') + '>';
      var itemList25 = sectionData3.items;
      var itemListLen25 = itemList25.length;
      for (var itemIndex25 = 0; itemIndex25 < itemListLen25; itemIndex25++) {
        var itemData25 = itemList25[itemIndex25];
        output += JIRA.Templates.Menu.Dropdowns.dropdown2Item(itemData25);
      }
      output += '</ul></div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Fragment.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Fragment';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Item = function(opt_data, opt_ignored) {
  var output = '<li' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.style) ? ' class="' + soy.$$escapeHtml(opt_data.style) + '"' : '') + '><a href="' + soy.$$escapeHtml(opt_data.url) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '_lnk"' : '') + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ' class="' + ((opt_data.iconUrl) ? 'aui-icon-container' : '') + ((opt_data.parameters && opt_data.parameters['class']) ? ' ' + soy.$$escapeHtml(opt_data.parameters['class']) : '') + '"';
  if (opt_data.parameters) {
    var keyList66 = soy.$$getMapKeys(opt_data.parameters);
    var keyListLen66 = keyList66.length;
    for (var keyIndex66 = 0; keyIndex66 < keyListLen66; keyIndex66++) {
      var keyData66 = keyList66[keyIndex66];
      output += (keyData66 != 'class') ? ' ' + soy.$$escapeHtml(keyData66) + '="' + soy.$$escapeHtml(opt_data.parameters[keyData66]) + '"' : '';
    }
  }
  output += '>' + ((opt_data.iconUrl) ? '<img class="icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" />' : '') + soy.$$escapeHtml(opt_data.label) + '</a></li>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Item.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Item';
}
;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'js/init-dropdown2.js' */
require(["jira/ajs/ajax/smart-ajax","jira/skate","jira/util/data/meta","wrm/context-path","jquery"],function(a,e,o,n,t){t(document).on("aui-responsive-menu-item-created",function(a){var e=a.originalEvent.detail.originalItem,o=a.originalEvent.detail.newItem,n=!!t(e).find(".aui-dropdown2-ajax").length;n&&t(o).find("a").addClass("aui-dropdown2-ajax")}),e("aui-dropdown2-ajax",{type:e.type.CLASSNAME,attached:function(e){var r=t(document.getElementById(e.getAttribute("aria-controls")));!r.length&&e.hasAttribute("aria-owns")&&"undefined"!=typeof console&&console.warn&&console.warn('Deprecation warning: Since AUI 5.9.4 "aria-owns" attribute has been change for "aria-controls"');var d=r.data("aui-dropdown2-ajax-key");r.on("aui-dropdown2-show.aui-dropdown2-ajax",function(e,t){r.trigger("aui-dropdown2-show-before"),d?(r.empty(),r.addClass("aui-dropdown2-loading"),a.makeRequest({url:n()+"/rest/api/1.0/menus/"+d,data:{inAdminMode:o.getBoolean("in-admin-mode")},dataType:"json",cache:!1,success:function(a){r.removeClass("aui-dropdown2-loading"),r.html(JIRA.Templates.Menu.Dropdowns.dropdown2Fragment(a)),r.trigger("aui-dropdown2-show-after")}})):r.trigger("aui-dropdown2-show-after")}),e.setAttribute("data-dropdown2-loaded",""),t(e).trigger("jira-header-plugin-dropdown2-menu-loaded",{bubbles:!0})},detached:function(a){var e=t(document.getElementById(a.getAttribute("aria-controls")));e.off("aui-dropdown2-show.aui-dropdown2-ajax")}})});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'js/app-switcher-analytics.js' */
require(["jquery"],function(i){i(document).on("aui-dropdown2-show-before","#app-switcher",function(){AJS.trigger("analyticsEvent",{name:"navigation.header.appswitcher.open"})}),i(document).on("click","#app-switcher a, #app-switcher button",function(n){var e,t=i(n.target),a=t.closest("li").index();t.is(".nav-link-edit")?e="configure":t.is(".app-discovery-link")?e=this.id?this.id:"unknown.app.discovery":t.is(".app-discovery-cancel-button")?(e="dont.show",a=0):e="application",AJS.trigger("analyticsEvent",{name:"navigation.header.appswitcher.click",data:{position:a,linkType:e}})}),i(document).on("aui-dropdown2-hide","#app-switcher",function(){AJS.trigger("analyticsEvent",{name:"navigation.header.appswitcher.close"})})});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:analytics-header', location = 'js/header-analytics.js' */
require(["jira/util/logger","jquery"],function(n,e){function t(n,e){var t=void 0;return n.forEach(function(n){n.id===e&&(t=n.analyticEventKey)}),t}var i="jira.navigation.header.",o="jira.header.analytics.event",r=function(n,e){return n.some(function(n){return n.id===e})},a=function(e,r,a){var c=t(r,e),u=i+c+a;AJS.EventQueue.push({name:u}),n.trace(o)},c=e(document);c.on("click","#logo",function(){AJS.EventQueue.push({name:i+"home"}),n.trace(o)}),c.on("click","#create_link",function(){AJS.EventQueue.push({name:i+"createissue.click"})});var u=[{id:"home_link-content",analyticEventKey:"dashboards"},{id:"browse_link-content",analyticEventKey:"projects"},{id:"find_link-content",analyticEventKey:"issues"},{id:"greenhopper_menu-content",analyticEventKey:"boards"},{id:"plugins-jira-webitem-main-content",analyticEventKey:"portfolio"},{id:"system-help-menu-content",analyticEventKey:"help"},{id:"system-admin-menu-content",analyticEventKey:"admin"}],d="#system-help-menu-content, #user-options-content, #system-admin-menu-content, #app-switcher",s=u.map(function(n){return"#"+n.id}).join(", ");c.on("aui-dropdown2-show",s,function(){var n=e(this).attr("id");r(u,n)&&a(n,u,".open")}),c.on("aui-dropdown2-hide",s,function(){var n=e(this).attr("id");r(u,n)&&a(n,u,".close")}),c.on("aui-dropdown2-show",d,function(){var n=e(this);n.trigger("aui-dropdown2-show-before"),n.trigger("aui-dropdown2-show-after")});var l=u.reduce(function(n,e){return n+"a.aui-dropdown2-trigger[aria-controls="+e.id+"], "},"");c.on("click",l,function(){var n=this.getAttribute("aria-controls");r(u,n)&&a(n,u,".click")}),c.on("click",".aui-dropdown2 .aui-dropdown2-section a",function(r){var a=e(r.target).closest(s).first();if(null!==a){var c=a.find("a").index(r.target),d=a.attr("id"),l=t(u,d),p=e(this).parents("ul").attr("id"),m={name:i+l+".item.click",properties:{itemIndex:c}};p&&(m.properties.itemType=p),AJS.EventQueue.push(m),n.trace(o)}})});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/node_modules/@atlassian/cloud-analytics-js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/node_modules/@atlassian/cloud-analytics-js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/node_modules/@atlassian/cloud-analytics-js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(f){var d="x-atlassian-mau-ignore";var e=XMLHttpRequest.prototype.send;var b=window.fetch;var g=XMLHttpRequest.prototype.open;var a=false;var i=Object.create(null);var h=new RegExp("^(?:[a-z]+:)?//","i");var c=function(j){var k=document.createElement("a");k.href=j;return k.hostname};return{install:function(){if(!a&&f.supported){XMLHttpRequest.prototype.open=function(k,j){this._url=j;return g.apply(this,arguments)};XMLHttpRequest.prototype.send=function(){var j=h.test(this._url)?c(this._url) in i:true;if(f.isHidden()&&j){this.setRequestHeader(d,f.isHidden())}e.apply(this,arguments)};if(b){window.fetch=function(j,m){var k=m||{};var l=k.headers;if(f.isHidden()){k.headers=(l)?new Headers(l):new Headers();k.headers.set(d,f.isHidden())}return b.call(this,j,k)}}a=true}},uninstall:function(){if(a){XMLHttpRequest.prototype.send=e;if(b){window.fetch=b}}a=false},addHost:function(j){i[j]=true}}});require("atlassian/analytics/user-activity-xhr-header").install();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/node_modules/@atlassian/cloud-analytics-js/atlassian-analytics.js' */
(function(d){function e(x){var B=250*1024;var z="atlassian-analytics."+x;var y=z+".lock";var D="null";var A=(window.localStorage[z]||"").length;var C=(window.localStorage[y]||D)!==D;if(C&&A>B){window.localStorage[z]=JSON.stringify([{name:"grow0.event.queue.cleared",time:new Date().valueOf(),properties:{queueSize:A}}]);window.localStorage[y]=D}}["jira","confluence","unknown"].forEach(function(x){try{e(x)}catch(y){}});var q=AJS.$.ajax;var l="atlassian-analytics";var j=typeof AJS.contextPath=="function"?AJS.contextPath():typeof AJS.Confluence!="undefined"?AJS.Confluence.getContextPath():window.contextPath!=null?window.contextPath:"";var p=null;var m=null;var g=null;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var y=Math.random()*16|0,x=z=="x"?y:(y&3|8);return x.toString(16)});var t=function(){var x="unknown";if(document.body.id=="jira"){x="jira"}else{if(document.body.id=="com-atlassian-confluence"){x="confluence"}}m=l+"."+x;g=m+".lock"};var f=function(){if(store.get(g)){return false}store.set(g,r);return(store.get(g)===r)};var u=function(){store.set(g,null)};var i=function(){var y=[],A,B,x,z;if(AJS.EventQueue.length==0){return}y=store.get(m)||y;for(x=0,z=AJS.EventQueue.length;x<z;++x){B=AJS.EventQueue[x];if(B.name){A={name:B.name,properties:B.properties,time:B.time||0};y.push(A)}}AJS.EventQueue.length=0;store.set(m,y)};var v=0;var a=function(x){return Math.min(5000*Math.pow(2,x),5*60*1000)};var h=function(){var A;function y(){setTimeout(h,a(v=0))}function x(){setTimeout(h,a(++v))}if(!f()){return y()}i();A=store.get(m);if(!A||!A.length){u();return y()}store.remove(m);u();if(!o(A)){return y()}var B=new Date().getTime();for(var z=0;z<A.length;z++){if(A[z].time>0){A[z].timeDelta=A[z].time-B}else{A[z].timeDelta=z-A.length}delete A[z].time}p=q({type:"POST",url:j+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(A),contentType:"application/json",dataType:"json"});p.fail(function(){AJS.EventQueue.concat(A);i();x()});p.done(function(){y()})};var o=function(z){for(var y=z.length-1;y>=0;y--){var B="";var A=z[y];var x=A.properties;if(typeof A.name==="undefined"){B="you must provide a name for the event."}else{if(typeof x!=="undefined"&&x!==null){if(x.constructor!==Object){B="properties must be an object with key value pairs."}else{b(x)}}}if(B!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+B+"\nEvent: "+JSON.stringify(A));z.splice(y,1)}}return z.length};var b=function(z){for(var y in z){if(z.hasOwnProperty(y)){var x=z[y];if(c(x)&&k(x)){}else{if(c(x)&&x.toString){z[y]=x.toString()}else{z[y]=""}}}}};function c(x){return typeof x!=="undefined"&&x!==null}function k(x){return typeof x==="number"||typeof x==="string"||typeof x==="boolean"}var n=function(){if(p&&!(p.state()==="resolved"||p.state()==="rejected")){p.abort()}};AJS.EventQueue=AJS.EventQueue||[];var s=Array.prototype.push;AJS.EventQueue.push=function(x){x.time=new Date().getTime();s.call(AJS.EventQueue,x)};AJS.toInit(function(){t();setTimeout(h,500);w()});d(window).unload(function(){n();i()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(x,y){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:x,properties:y})}};AJS.bind("analytics",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});AJS.bind("analyticsEvent",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});var w=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var y=AJS.$(":contains(Enable Atlassian analytics)");if(y.size()>0){var x=y[y.size()-2];if(x){x.remove()}}}}}}(AJS.$));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: 'Other applications', content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){var b=false;a.AdminShortcuts=(function(){var d=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var c=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{renderLoading:function(){var e=AJS.$(navlinks.templates.appswitcher.loading());a.ApplicationHeader.Cog.getDropdown().append(e)},render:function(){if(!AJS.$("#nl-remote-admin-section").length&&!b){a.AdminShortcuts.renderLoading();b=true;d().done(function(f){f=_.reject(f,function(g){return g.local===true});if(f.length){var e=navlinks.templates.adminshortcuts.section({links:f});a.ApplicationHeader.Cog.getDropdown().append(e);c()}}).always(function(){b=false;a.ApplicationHeader.Cog.getDropdown().find(".app-switcher-loading").remove()})}}}}());return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts.js' */
AJS.$(function(){if(AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")){NavLinks.ApplicationHeader.Cog.getDropdown().on("aui-dropdown2-show",function(){NavLinks.AdminShortcuts.render()})}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.projectshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.localShortcuts && opt_data.localShortcuts.length > 0) ? navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}) : '') + ((opt_data.remoteShortcuts != null) ? (opt_data.remoteShortcuts.length > 0) ? '<h2 class="projectshortcuts-heading">Related Links</h2>' + navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentMap(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'})) : '' : navlinks.templates.projectshortcuts.dialogLoading(null));
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContent.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContent';
}


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_ignored) {
  return '<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="' + soy.$$escapeHtml(opt_data.logoUrl) + '"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="project-content-wrapper">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.headingWrapper.soyTemplateName = 'navlinks.templates.projectshortcuts.headingWrapper';
}


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output += '<li' + ((shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '') + '>' + navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcuts.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcuts';
}


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcut.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcut';
}


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="projectshortcuts-loading">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogLoading.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogLoading';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,g){var i,k={},m="key",b="name",j="entity-type";function f(s){var n=e(this),o=n.data(m),q=n.data(b),p=n.data(j);if(typeof o==="undefined"){return}s.preventDefault();i=new AJS.Dialog({width:600,keypressListener:function(u){if(u.which==jQuery.ui.keyCode.ESCAPE){i.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){i.remove()}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:q,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links"})})).show();c(i);if(!k[o]){k[o]={entity:{title:q},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+o,{entityType:p}).done(t);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+o,{entityType:p}).done(r).fail(function(){var u=i.getCurrentPanel().body.find(".project-content-wrapper");u.find(".projectshortcuts-loading").remove();AJS.messages.error(u,{body:"Could not retrieve remote project shortcuts",closeable:false});c(i)})}else{l(k[o])}function t(u){k[o].localShortcuts=u.shortcuts;l(k[o])}function r(u){k[o].remoteShortcuts=u.shortcuts;l(k[o])}}function h(){return e(".project-shortcut-dialog-trigger img").attr("src")}function l(n){if(n.localShortcuts){i.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:n.entity.title,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(n)}));c(i)}}function a(p){var o=210;if(!p||p.length<=o){return p}var n=o;while(n>0&&p.charAt(n)!=" "){n--}if(n==0){n=o}p=p.substring(0,n);if(p.length>=n){p=p+"..."}return p}function c(n){var q=n.popup.element,p=q.find(".dialog-panel-body"),o=q.find(".dialog-components");p.height("auto");q.height(o.outerHeight()-1);e(".aui-shadow").remove()}function d(n,o){return e.ajax({url:n,cache:false,data:o,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-web-plugin:issue-link-web-link', location = 'js/issuelink-weblink.js' */
define("jira-issue-link/web-link",["jquery"],function(n){function i(){c.attr("src",""),e.val(""),o.css("background-image",""),r=a(o.val()),r&&(setTimeout(function(){o.addClass("loading")},0),l=setTimeout(function(){o.removeClass("loading")},3e3),c.attr("src",r))}function a(n){var i=n.match(/^([^\/]*\/\/[^\/]+)/)[1];if(i)return i+"/favicon.ico"}var e,o,r,l,c=n("<img>");return c.load(function(){e.val(r),o.css("background-image",'url("'+r+'")'),clearTimeout(l),o.removeClass("loading")}),c.error(function(){clearTimeout(l),o.removeClass("loading")}),{init:function(a){e=n("#web-link-icon-url",a),o=n("#web-link-url",a).bind("change",i),e.val()&&o.css("background-image","url("+e.val()+")")}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-web-plugin:issue-link-web-link', location = 'js/issuelink-weblink-init.js' */
require(["jira-issue-link/web-link","jquery","jira/util/events","jira/util/events/types"],function(i,n,t,e){t.bind(e.NEW_PAGE_ADDED,function(n,t){i.init(t)}),t.bind(e.NEW_CONTENT_ADDED,function(i,t){n(".issue-link").tooltip({gravity:"s"})})});;
;
/* module-key = 'com.atlassian.jconnect.jconnect-plugin:common', location = 'js/ViewLocation.js' */
(function(g){var c=window,h="onJMCGMapsLoad";mapsCallbacks=[],googleLoaderRequested=false,googleMapsRequested=false;function i(){var m;while(m=mapsCallbacks.shift()){m()}}function e(n){var m=c.google.maps&&c.google.maps.LatLng;if(m){mapsCallbacks.push(n);i()}else{if(googleMapsRequested){mapsCallbacks.push(n)}else{googleMapsRequested=true;mapsCallbacks.push(n);google.load("maps","3",{other_params:"sensor=false",callback:i})}}}function f(n){if(c.google&&c.google.load){e(n)}else{if(googleLoaderRequested){mapsCallbacks.push(n)}else{googleLoaderRequested=true;c[h]=function(){e(n)};var m=document.createElement("script");m.src="https://www.google.com/jsapi?callback="+h;m.type="text/javascript";g("body").append(m)}}}function d(m){if(m.hasClass("open")){k(m)}else{l(m)}}function k(m){m.removeClass("open");b=false}function l(n){var m=n.find(".jConnectMap");n.addClass("open");b=true;if(!a){a=new google.maps.Map(m.get(0),{zoom:8,center:j[1].geometry.location,mapTypeId:google.maps.MapTypeId.ROADMAP});new google.maps.Marker({map:a,position:j[1].geometry.location,title:j[1].formatted_address})}}var j,a,b=false;JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(s,o,r){if(r=="panelRefreshed"||r=="pageLoad"){var p=g(".jConnectLocation.ready",o),n=p.find("> a"),m,q;if(n.length){f(function(){if(p.hasClass("ready")){m=new google.maps.LatLng(n.data("lat"),n.data("long"));q=new google.maps.Geocoder();q.geocode({latLng:m},function(u,t){if(t==google.maps.GeocoderStatus.OK){j=u;if(u[1]){n.text(u[1].formatted_address)}}});p.removeClass("ready");a=null;if(b){l(p)}n.click(function(t){t.preventDefault();t.stopPropagation();d(p)})}})}}})})(AJS.$);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:dialog-options-v5', location = 'v5/js/iframe/host/dialog-options.js' */
(function(){window._AP=window._AP||{};var a;a=WRM.data.claim("com.atlassian.plugins.atlassian-connect-plugin:dialog-options.data");for(var b in a)a.hasOwnProperty(b)&&(window._AP[b]=a[b])})();;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-core-v5', location = 'v5/js/core/connect-host.js' */
(function(y,m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define("connectHost",m):y.connectHost=m()})(this,function(){function y(){}function m(){m.init.call(this)}function Aa(b,a,d,c){var e,g;if("function"!==typeof d)throw new TypeError('"listener" argument must be a function');(e=b._events)?(e.newListener&&(b.emit("newListener",a,d.listener?d.listener:d),e=b._events),g=e[a]):(e=b._events=new y,b._eventsCount=0);g?("function"===
typeof g?g=e[a]=c?[d,g]:[g,d]:c?g.unshift(d):g.push(d),g.warned||(d=void 0===b._maxListeners?m.defaultMaxListeners:b._maxListeners)&&0<d&&g.length>d&&(g.warned=!0,d=Error("Possible EventEmitter memory leak detected. "+g.length+" "+a+" listeners added. Use emitter.setMaxListeners() to increase limit"),d.name="MaxListenersExceededWarning",d.emitter=b,d.type=a,d.count=g.length,"function"===typeof console.warn?console.warn(d):console.log(d))):(e[a]=d,++b._eventsCount);return b}function Ba(b,a,d){function c(){b.removeListener(a,
c);e||(e=!0,d.apply(b,arguments))}var e=!1;c.listener=d;return c}function Ca(b){var a=this._events;if(a){b=a[b];if("function"===typeof b)return 1;if(b)return b.length}return 0}function Q(b,a){for(var d=Array(a);a--;)d[a]=b[a];return d}function Da(b){if(!b)throw Error("No selector to escape");return b.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$\x26")}function K(b,a){return a.encode?a.strict?gb(b):encodeURIComponent(b):b}function Ea(){}function Fa(b){try{return decodeURIComponent(b)}catch(a){return String.fromCharCode(65533)}}
function hb(b){var a=4-b.length%4;1===a?b+="\x3d":2===a&&(b+="\x3d\x3d");return ib.prototype.decode(jb(b))}function ja(b){if(null===b||""===b)throw"Invalid JWT: must be neither null nor empty-string.";var a=b.indexOf("."),d=b.indexOf(".",a+1);if(0>a||d<=a)throw'Invalid JWT: must contain 2 period (".") characters.';b=b.substring(a+1,d);if(null===b||""===b)throw"Invalid JWT: encoded claims must be neither null nor empty-string.";b=hb.call(window,b);return JSON.parse(b)}function ka(b){return Z.parse(Z.extract(b)).jwt}
function Ga(b){return{addon_key:b.addon_key,key:b.key,url:b.url,options:b.options}}function aa(b){b=(b=b.attr("class"))?b.match(/ap-plugin-key-([^\s]*)/):null;return Array.isArray(b)?b[1]:!1}function la(b){b=(b=b.attr("class"))?b.match(/ap-module-key-([^\s]*)/):null;return Array.isArray(b)?b[1]:!1}function Ha(b){return aa(b)+"__"+la(b)}function Ia(b,a,d){b+="Modules";if(window._AP&&window._AP[b]&&window._AP[b][a]&&window._AP[b][a][d])return k.extend({},window._AP[b][a][d].options)}function Ja(b,a){var d=
aa(a);a=(a=a.attr("class"))?a.match(/ap-target-key-([^\s]*)/):null;a=Array.isArray(a)?a[1]:!1;return Ia(b,d,a)}function Ka(b){var a=b.attr("href"),d={},c;a||(a=b.find("a").attr("href"));if(a){var e=a.indexOf("#");if(0<=e){b=a.substring(e+1);try{c=JSON.parse(decodeURI(b))}catch(g){console.error("ACJS: cannot decode webitem anchor")}c&&window._AP&&window._AP._convertConnectOptions?d=window._AP._convertConnectOptions(c):console.error("ACJS: cannot convert webitem url to connect iframe options")}else c=
Ha(b),e=b.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",d=Ja(e,b),!d&&window._AP&&window._AP[e+"Options"]&&(d=k.extend({},window._AP[e+"Options"][c])||{}),d||(d={},console.warn("no webitem "+e+"Options for "+c)),d.productContext=d.productContext||{},a=Z.parse(Z.extract(a)),k.extend(d.productContext,a),d={addon_key:aa(b),key:la(b),options:d}}return d}function D(){var b=AJS.LayerManager.global.getTopLayer();if(b&&kb.test(b.attr("id")))return b=AJS.dialog2(b),b._id=b.$el.attr("id").replace("ap-dialog-",
""),b}function La(b){var a=b.find(".header-control-panel");a.length||(a=b.find(".aui-dialog2-footer-actions"));return a}function ba(b,a){return La(a).find(".aui-button").filter(function(){return w.getIdentifier(this)===b})}function lb(b){var a={},d=["closeable","fadeout","delay","duration","id"];"object"===("undefined"===typeof b?"undefined":u(b))&&d.forEach(function(d){d in b&&(a[d]=b[d])});return a}function mb(){h(document).on("aui-message-close",function(b,a){b=a.attr("id").replace("ap-message-",
"");if(G[b]){if(h.isFunction(G[b].onCloseTrigger))G[b].onCloseTrigger();G[b]._destroy()}})}function L(b){return{constructor:function(a,d,c,e){e=k.last(arguments);var g=e._id;"string"!==typeof a&&(a="");"string"!==typeof d&&(d="");"object"!==("undefined"===typeof c?"undefined":u(c))&&(c={});c.id="ap-message-"+g;var l=a,f=d,M=c,r=e,E="AP.messages."+b;console.warn("DEPRECATED API - AP.messages."+b+" has been deprecated since ACJS 5.0 and will be removed in a future release. Use AP.flag.create instead.");
ca.trackDeprecatedMethodUsed(E,r._context.extension);if(r=p.getFrameworkAdaptor().getProviderByModuleName("messages"))E=r[b],E||(r[b]=r.generic),E(l,f,M);else{Ma||(mb(),Ma=!0);r=h("#ac-message-container");1>r.length&&(r=h('\x3cdiv id\x3d"ac-message-container" /\x3e').appendTo("body"));M=lb(M);h.extend(M,{title:l,body:AJS.escapeHtml(f)});if(0>Na.indexOf(b))throw"Invalid message type. Must be: "+Na.join(", ");Oa.test(M.id)&&(AJS.messages[b](r,M),r.css("margin-left","-"+r.innerWidth()/2+"px"))}G[g]=
this}}}function nb(){Pa||(h(document).on("aui-flag-close",function(b){b=ma.cleanKey(b.target.id);R.closed(b)}),h(document).on("click",".ac-flag-actions",function(b){var a=h(b.target);b=a.data("key");a=a.data("flag_id");R.actionInvoked(b,a)}),Pa=!0)}function Qa(b,a,d){if(S[b]){var c=S[b].extension;d=d||{};d.flagIdentifier=b;v.broadcast(a,{extension_id:c.extension_id},d)}}function Ra(){window.removeEventListener("scroll",Sa);da=na=void 0}function Sa(){var b=document.documentElement.scrollHeight,a=window.innerHeight,
d=.1*b;window.pageYOffset<=d?Ta("nearTop"):a+window.pageYOffset+d>=b?Ta("nearBottom"):da=void 0}function Ta(b){da!==b&&(v.broadcast("scroll."+b,{id:na},{}),da=b)}function ob(b){return b.map(function(a){if(a.list&&Array.isArray(a.list)){var d={heading:a.heading};d.items=a.list.map(function(d){var a={};if("string"===typeof d)a.content=d;else if(d.text&&"string"===typeof d.text)a.content=d.text,"boolean"===typeof d.disabled&&(a.disabled=d.disabled),"undefined"!==typeof d.itemId&&(a.itemId=d.itemId);
else throw Error("Unknown dropdown list item format.");return a});return d}})}y.prototype=Object.create(null);m.EventEmitter=m;m.usingDomains=!1;m.prototype.domain=void 0;m.prototype._events=void 0;m.prototype._maxListeners=void 0;m.defaultMaxListeners=10;m.init=function(){this.domain=null;!m.usingDomains||!(void 0).active||this instanceof(void 0).Domain||(this.domain=(void 0).active);this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new y,this._eventsCount=0);this._maxListeners=
this._maxListeners||void 0};m.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw new TypeError('"n" argument must be a positive number');this._maxListeners=b;return this};m.prototype.getMaxListeners=function(){return void 0===this._maxListeners?m.defaultMaxListeners:this._maxListeners};m.prototype.emit=function(b){var a,d,c,e,g;e="error"===b;if(a=this._events)e=e&&null==a.error;else if(!e)return!1;d=this.domain;if(e){a=arguments[1];if(d)a||(a=Error('Uncaught, unspecified "error" event')),
a.domainEmitter=this,a.domain=d,a.domainThrown=!1,d.emit("error",a);else{if(a instanceof Error)throw a;d=Error('Uncaught, unspecified "error" event. ('+a+")");d.context=a;throw d;}return!1}d=a[b];if(!d)return!1;a="function"===typeof d;c=arguments.length;switch(c){case 1:if(a)d.call(this);else for(a=d.length,d=Q(d,a),e=0;e<a;++e)d[e].call(this);break;case 2:e=arguments[1];if(a)d.call(this,e);else for(a=d.length,d=Q(d,a),c=0;c<a;++c)d[c].call(this,e);break;case 3:e=arguments[1];c=arguments[2];if(a)d.call(this,
e,c);else for(a=d.length,d=Q(d,a),g=0;g<a;++g)d[g].call(this,e,c);break;case 4:e=arguments[1];c=arguments[2];g=arguments[3];if(a)d.call(this,e,c,g);else{a=d.length;d=Q(d,a);for(var l=0;l<a;++l)d[l].call(this,e,c,g)}break;default:e=Array(c-1);for(g=1;g<c;g++)e[g-1]=arguments[g];if(a)d.apply(this,e);else for(a=d.length,d=Q(d,a),c=0;c<a;++c)d[c].apply(this,e)}return!0};m.prototype.addListener=function(b,a){return Aa(this,b,a,!1)};m.prototype.on=m.prototype.addListener;m.prototype.prependListener=function(b,
a){return Aa(this,b,a,!0)};m.prototype.once=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');this.on(b,Ba(this,b,a));return this};m.prototype.prependOnceListener=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');this.prependListener(b,Ba(this,b,a));return this};m.prototype.removeListener=function(b,a){var d,c,e,g,l;if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');
c=this._events;if(!c)return this;d=c[b];if(!d)return this;if(d===a||d.listener&&d.listener===a)0===--this._eventsCount?this._events=new y:(delete c[b],c.removeListener&&this.emit("removeListener",b,d.listener||a));else if("function"!==typeof d){e=-1;for(g=d.length;0<g--;)if(d[g]===a||d[g].listener&&d[g].listener===a){l=d[g].listener;e=g;break}if(0>e)return this;if(1===d.length){d[0]=void 0;if(0===--this._eventsCount)return this._events=new y,this;delete c[b]}else{g=e+1;for(var f=d.length;g<f;e+=1,
g+=1)d[e]=d[g];d.pop()}c.removeListener&&this.emit("removeListener",b,l||a)}return this};m.prototype.removeAllListeners=function(b){var a;a=this._events;if(!a)return this;if(!a.removeListener)return 0===arguments.length?(this._events=new y,this._eventsCount=0):a[b]&&(0===--this._eventsCount?this._events=new y:delete a[b]),this;if(0===arguments.length){a=Object.keys(a);for(var d=0,c;d<a.length;++d)c=a[d],"removeListener"!==c&&this.removeAllListeners(c);this.removeAllListeners("removeListener");this._events=
new y;this._eventsCount=0;return this}a=a[b];if("function"===typeof a)this.removeListener(b,a);else if(a){do this.removeListener(b,a[a.length-1]);while(a[0])}return this};m.prototype.listeners=function(b){var a=this._events;if(a)if(b=a[b])if("function"===typeof b)b=[b.listener||b];else{for(var a=Array(b.length),d=0;d<a.length;++d)a[d]=b[d].listener||b[d];b=a}else b=[];else b=[];return b};m.listenerCount=function(b,a){return"function"===typeof b.listenerCount?b.listenerCount(a):Ca.call(b,a)};m.prototype.listenerCount=
Ca;m.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},n=function(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function");},Ua=function(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+
typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)},Va=function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?b:a},f=new (function(b){function a(){n(this,a);var d=Va(this,b.call(this));d.setMaxListeners(20);return d}Ua(a,b);a.prototype.dispatch=function(d){for(var a=
arguments.length,b=Array(1<a?a-1:0),g=1;g<a;g++)b[g-1]=arguments[g];this.emit.apply(this,["before:"+d].concat(b));this.emit.apply(this,arguments);this.emit.apply(this,["after:"+d].concat(b))};a.prototype.registerOnce=function(d,a){if("string"===typeof d)this.once(d,a);else throw"ACJS: event name must be string";};a.prototype.register=function(d,a){if("string"===typeof d)this.on(d,a);else throw"ACJS: event name must be string";};a.prototype.unregister=function(d,a){if("string"===typeof d)this.removeListener(d,
a);else throw"ACJS: event name must be string";};return a}(m)),h=window.AJS&&window.AJS.$||function(){},A=new (function(){function b(){n(this,b);this._addons={}}b.prototype._track=function(a,d){var c=window;a="connect.addon."+a;d=d||{};d.version=c._AP&&c._AP.version?c._AP.version:void 0;d.userAgent=c.navigator.userAgent;if(!c.AJS)return!1;if(c.AJS.Analytics)c.AJS.Analytics.triggerPrivacyPolicySafeEvent(a,d);else if(c.AJS.trigger)AJS.trigger("analyticsEvent",{name:a,data:d});else return!1;return!0};
b.prototype._time=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()};b.prototype.trackLoadingStarted=function(a){this._addons&&a&&a.id?(a.startLoading=this._time(),this._addons[a.id]=a):console.error("ACJS: cannot track loading analytics",this._addons,a)};b.prototype.trackLoadingEnded=function(a){if(this._addons&&a&&this._addons[a.id]){var d=a.url,d=void 0!==d&&-1===d.indexOf("xdm_e\x3d"),c=this._time()-this._addons[a.id].startLoading,b=this.getIframeLoadApdex(c);
this._track("iframe.performance.load",{addonKey:a.addon_key,moduleKey:a.key,iframeLoadMillis:c,iframeLoadApdex:b,iframeIsCacheable:d,value:2E4<c?"x":Math.ceil(c/100)})}else console.error("ACJS: cannot track loading end analytics",this._addons,a)};b.prototype.getIframeLoadApdex=function(a){return 300>=a?1:1200>=a?.5:0};b.prototype.trackLoadingTimeout=function(a){this._track("iframe.performance.timeout",{addonKey:a.addon_key,moduleKey:a.key});this.trackLoadingEnded(a)};b.prototype.trackLoadingCancel=
function(a){this._track("iframe.performance.cancel",{addonKey:a.addon_key,moduleKey:a.key})};b.prototype.trackUseOfDeprecatedMethod=function(a,d){this._track("jsapi.deprecated",{addonKey:d.addon_key,moduleKey:d.key,methodUsed:a})};b.prototype.trackMultipleDialogOpening=function(a,d){this._track("jsapi.dialog.multiple",{addonKey:d.addon_key,moduleKey:d.key,dialogType:a})};b.prototype.dispatch=function(a,d){this._track(a,d)};return b}());h.fn&&f.register("iframe-create",function(b){A.trackLoadingStarted(b.extension)});
f.register("iframe-bridge-start",function(b){A.trackLoadingStarted(b.extension)});f.register("iframe-bridge-established",function(b){A.trackLoadingEnded(b.extension)});f.register("iframe-bridge-timeout",function(b){A.trackLoadingTimeout(b.extension)});f.register("iframe-bridge-cancelled",function(b){A.trackLoadingCancel(b.extension)});f.register("analytics-deprecated-method-used",function(b){A.trackUseOfDeprecatedMethod(b.methodUsed,b.extension)});f.register("iframe-destroyed",function(b){delete A._addons[b.extension.extension_id]});
var Wa={timeout:function(b,a){f.dispatch("iframe-bridge-timeout",{$el:b,extension:a})},cancelled:function(b,a){f.dispatch("iframe-bridge-cancelled",{$el:b,extension:a})}},oa={loading:'\x3cdiv class\x3d"ap-loading"\x3e\x3cdiv class\x3d"small-spinner"\x3e\x3c/div\x3eLoading app...\x3c/div\x3e',"load-timeout":'\x3cdiv class\x3d"ap-load-timeout"\x3e\x3cdiv class\x3d"small-spinner"\x3e\x3c/div\x3eApp is not responding. Wait or \x3ca href\x3d"#" class\x3d"ap-btn-cancel"\x3ecancel\x3c/a\x3e?\x3c/div\x3e',
"load-error":"App failed to load."},T=new (function(){function b(){n(this,b);this._stateRegistry={}}b.prototype._loadingContainer=function(a){return a.find(".ap-status-indicator")};b.prototype.render=function(){var a=document.createElement("div");a.classList.add("ap-status-indicator");a.innerHTML=oa.loading;a=h(a);this._startSpinner(a);return a};b.prototype._startSpinner=function(a){setTimeout(function(){var d=a.find(".small-spinner");d.length&&d.spin&&d.spin({lines:12,length:3,width:2,radius:3,trail:60,
speed:1.5,zIndex:1})},10)};b.prototype.hide=function(a,d){clearTimeout(this._stateRegistry[d]);delete this._stateRegistry[d];this._loadingContainer(a)[0].style.display="none"};b.prototype.cancelled=function(a,d){d=oa["load-error"];this._loadingContainer(a).empty().text(d)};b.prototype._setupTimeout=function(a,d){this._stateRegistry[d.id]=setTimeout(function(){Wa.timeout(a,d)},12E3)};b.prototype.timeout=function(a,d){var c=h(oa["load-timeout"]),b=this._loadingContainer(a);b.empty().append(c);this._startSpinner(b);
h("a.ap-btn-cancel",b).click(function(){Wa.cancelled(a,d)});delete this._stateRegistry[d];return b};return b}());f.register("iframe-create",function(b){b.extension.options.noDom||T._setupTimeout(b.$el.parents(".ap-iframe-container"),b.extension)});f.register("iframe-bridge-established",function(b){b.extension.options.noDom||T.hide(b.$el.parents(".ap-iframe-container"),b.extension.id)});f.register("iframe-bridge-timeout",function(b){b.extension.options.noDom||T.timeout(b.$el,b.extension.id)});f.register("iframe-bridge-cancelled",
function(b){b.extension.options.noDom||T.cancelled(b.$el,b.extension.id)});for(var Xa=Function.prototype.bind,t={locationOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},randomString:function(){return Math.floor(1E9*Math.random()).toString(16)},isString:function(b){return"string"===typeof b||b instanceof String},argumentsToArray:function(b){return Array.prototype.slice.call(b)},
argumentNames:function(b){return b.toString().replace(/((\/\/.*$)|(\/\*[^]*?\*\/))/mg,"").replace(/[^(]+\(([^)]*)[^]+/,"$1").match(/([^\s,]+)/g)||[]},hasCallback:function(b){var a=b.length;return 0<a&&"function"===typeof b[a-1]},error:function(b){if(window.console&&window.console.error){var a=[];"string"===typeof b?(a.push("[Simple-XDM] "+b),a=a.concat(Array.prototype.slice.call(arguments,1))):(a.push("[Simple-XDM] "),a=a.concat(Array.prototype.slice.call(arguments)));window.console.error.apply(null,
a)}},warn:function(b){window.console&&console.warn("[Simple-XDM] "+b)},log:function(b){window.console&&window.console.log("[Simple-XDM] "+b)},_bind:function(b,a){return Xa&&a.bind===Xa?a.bind(b):function(){return a.apply(b,arguments)}},throttle:function(b,a,d){var c=0;return function(){var e=Date.now();e-c>a&&(c=e,b.apply(d,arguments))}},each:function(b,a){var d,c;if(b)if(d=b.length,null!=d&&"function"!==typeof b)for(c=0;c<d&&!1!==a.call(b[c],c,b[c]);)c+=1;else for(c in b)if(b.hasOwnProperty(c)&&
!1===a.call(b[c],c,b[c]))break},extend:function(b){var a=arguments;[].slice.call(a,1,a.length).forEach(function(d){"object"===("undefined"===typeof d?"undefined":u(d))&&Object.getOwnPropertyNames(d).forEach(function(a){b[a]=d[a]})});return b},sanitizeStructuredClone:function(b){function a(b){if("function"===typeof b)return e("A function was detected and removed from the message."),null;if(c.some(function(d){return b instanceof d?(e(d.name+" object was detected and removed from the message."),!0):
!1}))return{};if(b&&"object"===("undefined"===typeof b?"undefined":u(b))&&d.every(function(d){return!(b instanceof d)})){var l=void 0;if(Array.isArray(b))l=b.map(function(d){return a(d)});else{if(-1<g.indexOf(b))return e("A circular reference was detected and removed from the message."),null;g.push(b);var l={},f;for(f in b)if(b.hasOwnProperty(f)){var h=a(b[f]);null!==h&&(l[f]=h)}g.pop()}return l}return b}var d=[Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer],c=[Error,Node],e=t.warn,g=[];
return a(b)},getOrigin:function(b,a){if("function"===typeof URL)try{return(new URL(b,a)).origin}catch(e){}var d=document.implementation.createHTMLDocument("");if(a){var c=d.createElement("base");c.href=a;d.head.appendChild(c)}a=d.createElement("a");a.href=b;d.body.appendChild(a);d=a.protocol+"//"+a.hostname;b.match(/\/\/[^/]+:[0-9]+\//)&&(d+=a.port?":"+a.port:"");return d}},pb=function(b){function a(d){n(this,a);d=d||{};var c=Va(this,b.call(this,d));c._registeredExtensions=d.extensions||{};c._registeredAPIModules=
{};c._registeredAPIModules._globals={};c._pendingCallbacks={};c._keycodeCallbacks={};c._clickHandler=null;c._pendingEvents={};c._messageHandlers={init:c._handleInit,req:c._handleRequest,resp:c._handleResponse,broadcast:c._handleBroadcast,event_query:c._handleEventQuery,key_triggered:c._handleKeyTriggered,addon_clicked:c._handleAddonClick,get_host_offset:c._getHostOffset,unload:c._handleUnload,sub:c._handleSubInit};return c}Ua(a,b);a.prototype._padUndefinedArguments=function(d,a){return d.length>=
a?d:d.concat(Array(a-d.length))};a.prototype._verifyAPI=function(d,a){function c(d,a){Object.getOwnPropertyNames(a).forEach(function(b){"object"===u(a[b])&&d[b]?c(d[b],a[b]):"parent"===a[b]&&d[b]&&(f=!0)})}var b=d.data.targets;if(b){var l=this.getApiSpec(),f=!1;c(l,b);d.source.postMessage({type:"api_tamper",tampered:f},a.extension.url)}};a.prototype._handleInit=function(d,a){this._registeredExtensions[a.extension_id].source=d.source;a.initCallback&&(a.initCallback(d.data.eid),delete a.initCallback);
d.data.targets&&this._verifyAPI(d,a)};a.prototype._handleSubInit=function(a,c){this.registerExtension(a.data.ext.id,{extension:a.data.ext})};a.prototype._getHostOffset=function(a,c){var d=a.source,b=null;c=c||window;c===c.top&&"function"===typeof c.getHostOffsetFunctionOverride&&(b=c.getHostOffsetFunctionOverride(d));if("number"!==typeof b)for(b=0;!this._hasSameOrigin(d);)b++,d=d.parent;a.source.postMessage({hostFrameOffset:b},a.origin)};a.prototype._hasSameOrigin=function(a){if(a===a.top)return!0;
try{var d="test_var_"+Math.random().toString(16).substr(2);a[d]=!0;return a[d]}catch(e){}return!1};a.prototype._handleResponse=function(a){a=a.data;var d=this._pendingCallbacks[a.mid];d&&(delete this._pendingCallbacks[a.mid],d.apply(window,a.args))};a.prototype.registerRequestNotifier=function(a){this._registeredRequestNotifier=a};a.prototype._handleRequest=function(a,c){function d(){var d=t.sanitizeStructuredClone(t.argumentsToArray(arguments));a.source.postMessage({mid:a.data.mid,type:"resp",forPlugin:!0,
args:d},c.extension.url)}var b=a.data,l=this._registeredAPIModules[b.mod],f=this.getRegisteredExtensions(c.extension)[0];if(l){var h=b.fn;if(b._cls){var k=l[b._cls],E=b.mod+"-"+b._cls+"-";d._id=b._id;"constructor"===h?(k._construct||(k.constructor.prototype._destroy=function(){delete this._context._proxies[E+this._id]},k._construct=function(){for(var a=arguments.length,d=Array(a),c=0;c<a;c++)d[c]=arguments[c];a=new (Function.prototype.bind.apply(k.constructor,[null].concat(d)));d=d[d.length-1];a._id=
d._id;a._context=d._context;return a._context._proxies[E+a._id]=a}),l=k,h="_construct"):l=f._proxies[E+b._id]}var m=l[h];if(m){var n=b.args,p=m.length-1;"_construct"===h&&(p=l.constructor.length-1);d._context=f;n=this._padUndefinedArguments(n,p);n.push(d);l=m.apply(l,n);m.returnsPromise&&(l&&l instanceof Promise?l.then(function(a){d(void 0,a)}).catch(function(a){a=a instanceof Error?a.message:a;d(a)}):d("Defined module method did not return a promise."));this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,
{module:b.mod,fn:b.fn,type:b.type,addon_key:c.extension.addon_key,key:c.extension.key,extension_id:c.extension_id})}}};a.prototype._handleBroadcast=function(a,c){a=a.data;this.dispatch(a.etyp,function(a){return a.extension.addon_key===c.extension.addon_key&&a.extension_id!==c.extension_id},a.evnt,null,null)};a.prototype._handleKeyTriggered=function(a,c){var d=a.data;a=this._keycodeKey(d.keycode,d.modifiers,c.extension_id);(a=this._keycodeCallbacks[a])&&a.forEach(function(a){a.call(null,{addon_key:c.extension.addon_key,
key:c.extension.key,extension_id:c.extension_id,keycode:d.keycode,modifiers:d.modifiers})},this)};a.prototype.defineAPIModule=function(a,c){c=c||"_globals";this._registeredAPIModules[c]=t.extend({},this._registeredAPIModules[c]||{},a);return this._registeredAPIModules};a.prototype._pendingEventKey=function(a,c){var d=a.addon_key||"global";a.key&&(d=d+"@@"+a.key);return d+"@@"+c};a.prototype.queueEvent=function(a,c,b,g){if(this._findRegistrations(c).some(function(a){return void 0!==a.registered_events},
this))this.dispatch(a,c,b,g);else{this._cleanupInvalidEvents();var d=(new Date).getTime();this._pendingEvents[this._pendingEventKey(c,d)]={type:a,targetSpec:c,event:b,callback:g,time:d,uid:t.randomString()}}};a.prototype._cleanupInvalidEvents=function(){var a=this,c=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(d){3E4>=c-a._pendingEvents[d].time||delete a._pendingEvents[d]})};a.prototype._handleEventQuery=function(a,c){var d=this,b={},l=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(e){var g=
d._pendingEvents[e],f=3E4>=l-g.time,h=!g.targetSpec||0!==d._findRegistrations(g.targetSpec).length;h&&g.targetSpec.key&&(h=g.targetSpec.addon_key===c.extension.addon_key&&g.targetSpec.key===c.extension.key);f&&h?(b[e]=g,g.targetSpec=g.targetSpec||{},d.dispatch(g.type,g.targetSpec,g.event,g.callback,a.source)):f||delete d._pendingEvents[e]});this._registeredExtensions[c.extension_id].registered_events=a.data.args;return b};a.prototype._handleUnload=function(a,c){c&&(c.extension_id&&this._registeredExtensions[c.extension_id]&&
delete this._registeredExtensions[c.extension_id].source,c.unloadCallback&&c.unloadCallback(a.data.eid))};a.prototype.dispatch=function(a,c,b,g,l){function d(d,c){if(d.source&&d.source.postMessage){var b;g&&(b=t.randomString(),this._pendingCallbacks[b]=g);d.source.postMessage({type:"evt",mid:b,etyp:a,evnt:c},d.extension.url)}}this._findRegistrations(c||{}).forEach(function(a){l&&!a.source&&(a.source=l);a.source&&t._bind(this,d)(a,b)},this)};a.prototype._findRegistrations=function(a){var d=this;if(0===
this._registeredExtensions.length)return t.error("no registered extensions",this._registeredExtensions),[];var b=Object.getOwnPropertyNames(a),g=Object.getOwnPropertyNames(this._registeredExtensions).map(function(a){return d._registeredExtensions[a]});return a instanceof Function?g.filter(a):g.filter(function(d){return b.every(function(c){return d.extension[c]===a[c]})})};a.prototype.registerExtension=function(a,c){c._proxies={};c.extension_id=a;this._registeredExtensions[a]=c};a.prototype._keycodeKey=
function(a,c,b){var d=a;c&&("string"===typeof c&&(c=[c]),c.sort(),c.forEach(function(a){d+="$$"+a},this));return d+"__"+b};a.prototype.registerKeyListener=function(a,c,b,g){"string"===typeof b&&(b=[b]);var d=this._registeredExtensions[a];a=this._keycodeKey(c,b,a);this._keycodeCallbacks[a]||(this._keycodeCallbacks[a]=[],d.source.postMessage({type:"key_listen",keycode:c,modifiers:b,action:"add"},d.extension.url));this._keycodeCallbacks[a].push(g)};a.prototype.unregisterKeyListener=function(a,c,b,g){var d=
this._keycodeKey(c,b,a),e=this._keycodeCallbacks[d];a=this._registeredExtensions[a];e&&(g?(g=e.indexOf(g),this._keycodeCallbacks[d].splice(g,1)):delete this._keycodeCallbacks[d],a.source&&a.source.postMessage&&a.source.postMessage({type:"key_listen",keycode:c,modifiers:b,action:"remove"},a.extension.url))};a.prototype.registerClickHandler=function(a){if("function"!==typeof a)throw Error("callback must be a function");if(null!==this._clickHandler)throw Error("ClickHandler already registered");this._clickHandler=
a};a.prototype._handleAddonClick=function(a,b){"function"===typeof this._clickHandler&&this._clickHandler({addon_key:b.extension.addon_key,key:b.extension.key,extension_id:b.extension_id})};a.prototype.unregisterClickHandler=function(){this._clickHandler=null};a.prototype.getApiSpec=function(){function a(a){function d(a){return Object.getOwnPropertyNames(a).reduce(function(b,c){var e=a[c];switch("undefined"===typeof e?"undefined":u(e)){case "function":b[c]={args:t.argumentNames(e),returnsPromise:e.returnsPromise||
!1};break;case "object":e.hasOwnProperty("constructor")&&(b[c]=d(e))}return b},{})}var c=b._registeredAPIModules[a];if(!c)throw Error("unregistered API module: "+a);return d(c)}var b=this;return Object.getOwnPropertyNames(this._registeredAPIModules).reduce(function(d,b){d[b]=a(b);return d},{})};a.prototype._originEqual=function(a,b){function d(a){return"string"===typeof a&&0<a.length}var c=t.getOrigin(a);return d(a)&&d(b)&&d(c)?b===c:!1};a.prototype._checkOrigin=function(a,b){var d=["init"],c=b&&
!b.source&&-1<d.indexOf(a.data.type),d=b&&a.source===b.source;b=b&&this._originEqual(b.extension.url,a.origin)&&(c||d);"get_host_offset"===a.data.type&&window===window.top&&(b=!0);"unload"!==a.data.type||!d&&void 0!==a.source||(b=!0);b||t.log("Failed to validate origin: "+a.origin);return b};a.prototype.getRegisteredExtensions=function(a){return a?this._findRegistrations(a):this._registeredExtensions};a.prototype.unregisterExtension=function(a){a=this._findRegistrations(a);0!==a.length&&a.forEach(function(a){var d=
this;Object.keys(this._pendingEvents).forEach(function(b){var c=d._pendingEvents[b].targetSpec||{};c.addon_key===a.extension.addon_key&&c.key===a.extension.key&&delete d._pendingEvents[b]});delete this._registeredExtensions[a.extension_id]},this)};return a}(function(){function b(a){n(this,b);this._registerListener((a||{}).listenOn)}b.prototype._registerListener=function(a){a&&a.addEventListener||(a=window);a.addEventListener("message",t._bind(this,this._receiveMessage),!1)};b.prototype._receiveMessage=
function(a){var d=this._messageHandlers[a.data.type],b=a.data.eid,e=void 0;b&&this._registeredExtensions&&(e=this._registeredExtensions[b]);if(!d||!this._checkOrigin(a,e))return!1;d.call(this,a,e)};return b}()),q=new (function(){function b(){n(this,b);this._xdm=new pb}b.prototype.dispatch=function(a,d,b,e){this._xdm.queueEvent(a,d,b,e);return this.getExtensions(d)};b.prototype.broadcast=function(a,d,b){this._xdm.dispatch(a,d,b,null,null);return this.getExtensions(d)};b.prototype._createId=function(a){if(!a.addon_key||
!a.key)throw Error("Extensions require addon_key and key");return a.addon_key+"__"+a.key+"__"+t.randomString()};b.prototype.create=function(a,d,b){d=this.registerExtension(a,d,b);b=a.options||{};b={extension_id:d,api:this._xdm.getApiSpec(),origin:t.locationOrigin(),options:b};return{id:d,name:JSON.stringify(b),src:a.url}};b.prototype.registerRequestNotifier=function(a){this._xdm.registerRequestNotifier(a)};b.prototype.registerExtension=function(a,d,b){var c=this._createId(a);this._xdm.registerExtension(c,
{extension:a,initCallback:d,unloadCallback:b});return c};b.prototype.registerKeyListener=function(a,d,b,e){this._xdm.registerKeyListener(a,d,b,e)};b.prototype.unregisterKeyListener=function(a,d,b,e){this._xdm.unregisterKeyListener(a,d,b,e)};b.prototype.registerClickHandler=function(a){this._xdm.registerClickHandler(a)};b.prototype.unregisterClickHandler=function(){this._xdm.unregisterClickHandler()};b.prototype.defineModule=function(a,d,b){this._xdm.defineAPIModule(d,a,b)};b.prototype.defineGlobals=
function(a){this._xdm.defineAPIModule(a)};b.prototype.getExtensions=function(a){return this._xdm.getRegisteredExtensions(a)};b.prototype.unregisterExtension=function(a){return this._xdm.unregisterExtension(a)};b.prototype.returnsPromise=function(a){a.returnsPromise=!0};return b}()),v={broadcast:function(b,a,d){q.dispatch(b,a,d);f.dispatch("event-dispatch",{type:b,targetSpec:a,event:d})},broadcastPublic:function(b,a,d){f.dispatch("event-public-dispatch",{type:b,event:a,sender:d});q.dispatch(b,{},{sender:{addonKey:d.addon_key,
key:d.key,options:t.sanitizeStructuredClone(d.options)},event:a})}},Ya=Object.getOwnPropertySymbols,qb=Object.prototype.hasOwnProperty,rb=Object.prototype.propertyIsEnumerable,pa=function(){try{if(!Object.assign)return!1;var b=new String("abc");b[5]="de";if("5"===Object.getOwnPropertyNames(b)[0])return!1;for(var a={},b=0;10>b;b++)a["_"+String.fromCharCode(b)]=b;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(d){return a[d]}).join(""))return!1;var d={};"abcdefghijklmnopqrst".split("").forEach(function(a){d[a]=
a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},d)).join("")?!1:!0}catch(c){return!1}}()?Object.assign:function(b,a){var d,c;if(null===b||void 0===b)throw new TypeError("Object.assign cannot be called with null or undefined");c=Object(b);for(var e,g=1;g<arguments.length;g++){d=Object(arguments[g]);for(var l in d)qb.call(d,l)&&(c[l]=d[l]);if(Ya){e=Ya(d);for(var f=0;f<e.length;f++)rb.call(d,e[f])&&(c[e[f]]=d[e[f]])}}return c},k={escapeSelector:Da,stringToDimension:function(b){var a,
d="px";"string"===typeof b&&(a=b.indexOf("%")===b.length-1,b=parseInt(b,10),a&&(d="%"));if(!isNaN(b))return b+d},getIframeByExtensionId:function(b){return h("iframe#"+Da(b))},first:function(b,a){return a?b.slice(0,a):b[0]},last:function(b){return b[b.length-1]},pick:function(b,a){return"object"!==("undefined"===typeof b?"undefined":u(b))?{}:Object.keys(b).filter(function(d){return 0<=a.indexOf(d)}).reduce(function(a,c){var d;return pa(a,(d={},d[c]=b[c],d))},{})},debounce:function(b,a){var d;return function(){var c=
this,e=[].slice.call(arguments);d&&clearTimeout(d);d=setTimeout(function(){d=null;b.apply(c,e)},a||50)}},extend:pa},U={open:function(b,a){f.dispatch("dialog-extension-open",{extension:b,options:a})},close:function(){f.dispatch("dialog-close-active",{})},addUserButton:function(b,a){f.dispatch("dialog-button-add",{button:{text:b.text,identifier:b.identifier,data:{userButton:!0}},extension:a})}},z={close:function(b){f.dispatch("dialog-close",{dialog:b.dialog,extension:b.extension,customData:b.customData})},
closeActive:function(b){f.dispatch("dialog-close-active",b)},clickButton:function(b,a,d){f.dispatch("dialog-button-click",{identifier:b,$el:a,extension:d})},toggleButton:function(b){f.dispatch("dialog-button-toggle",b)},toggleButtonVisibility:function(b){f.dispatch("dialog-button-toggle-visibility",b)}},H={registerKeyEvent:function(b){q.registerKeyListener(b.extension_id,b.key,b.modifiers,b.callback);f.dispatch("dom-event-register",b)},unregisterKeyEvent:function(b){q.unregisterKeyListener(b.extension_id,
b.key,b.modifiers,b.callback);f.dispatch("dom-event-unregister",b)},registerWindowKeyEvent:function(b){window.addEventListener("keydown",function(a){a.keyCode===b.keyCode&&b.callback()})},registerClickHandler:function(b){q.registerClickHandler(function(a){(a=document.getElementById(a.extension_id))&&b(a)})},unregisterClickHandler:function(){q.unregisterClickHandler()}},Za=new (function(){function b(){n(this,b)}b.prototype.randomIdentifier=function(){return Math.random().toString(16).substring(7)};
return b}()),F=new (function(){function b(){n(this,b)}b.prototype._maxDimension=function(a,d){a=k.stringToDimension(a);var b=parseInt(a,10);d=parseInt(d,10);return-1<a.indexOf("%")&&100<=b||b>d?"100%":a};b.prototype._closeOnEscape=function(a){return!1===a.closeOnEscape?!1:!0};b.prototype._size=function(a){var d=a.size;"x-large"===a.size&&(d="xlarge");"maximum"!==a.size&&"100%"===a.width&&"100%"===a.height&&(d="fullscreen");return d};b.prototype._header=function(a){var d="";switch("undefined"===typeof a?
"undefined":u(a)){case "string":d=a;break;case "object":d=a.value}return d};b.prototype._hint=function(a){return"string"===typeof a?a:""};b.prototype._chrome=function(a){var d=!1;"boolean"===typeof a.chrome&&(d=a.chrome);"fullscreen"===a.size&&(d=!0);"maximum"===a.size&&(d=!1);return d};b.prototype._width=function(a){if(!a.size)return a.width?this._maxDimension(a.width,h(window).width()):"50%"};b.prototype._height=function(a){if(!a.size)return a.height?this._maxDimension(a.height,h(window).height()):
"50%"};b.prototype._actions=function(a){var d=[];a=a||{};a.actions||(d=[{name:"submit",identifier:"submit",text:a.submitText||"Submit",type:"primary",disabled:!0},{name:"cancel",identifier:"cancel",text:a.cancelText||"Cancel",type:"link",immutable:!0}]);a.buttons&&(d=d.concat(this._buttons(a)));return d};b.prototype._id=function(a){"string"!==typeof a&&(a=Math.random().toString(36).substring(2,8));return a};b.prototype._buttons=function(a){var d=[];a.buttons&&Array.isArray(a.buttons)&&a.buttons.forEach(function(a){var b,
c,l=!1;a.text&&"string"===typeof a.text&&(b=a.text);c=a.identifier&&"string"===typeof a.identifier?a.identifier:Za.randomIdentifier();a.disabled&&!0===a.disabled&&(l=!0);d.push({text:b,identifier:c,type:"secondary",custom:!0,disabled:l})});return d};b.prototype._onHide=function(a){return"function"===typeof a.onHide?a.onHide:function(){}};b.prototype.sanitizeOptions=function(a){a=a||{};a={chrome:this._chrome(a),header:this._header(a.header),hint:this._hint(a.hint),width:this._width(a),height:this._height(a),
$content:a.$content,extension:a.extension,actions:this._actions(a),id:this._id(a.id),size:a.size,closeOnEscape:this._closeOnEscape(a),onHide:this._onHide(a)};a.size=this._size(a);return a};b.prototype.moduleOptionsFromGlobal=function(a,d){var b={chrome:!0};return window._AP&&window._AP.dialogModules&&window._AP.dialogModules[a]&&window._AP.dialogModules[a][d]?k.extend({},b,window._AP.dialogModules[a][d].options):!1};b.prototype.trackMultipleDialogOpening=function(a,d){d=this._size(d);h(".ap-aui-dialog2:visible").length&&
(d=h("#macro-browser-dialog").length||AJS.Confluence&&AJS.Confluence.Editor&&AJS.Confluence.Editor.currentEditMode?"fullscreen"===d?"connect-macro-multiple-fullscreen":"connect-macro-multiple":"connect-multiple",A.trackMultipleDialogOpening(d,a))};b.prototype.assertActiveDialogOrThrow=function(a,d){if(!a.isActiveDialog(d))throw Error("Failed to find an active dialog for: "+d);};return b}()),ea={notifyIframeCreated:function(b,a){f.dispatch("iframe-create",{$el:b,extension:a})},notifyBridgeEstablished:function(b,
a){f.dispatch("iframe-bridge-established",{$el:b,extension:a})},notifyIframeDestroyed:function(b){"string"===typeof b&&(b={id:b});q.getExtensions(b).forEach(function(a){f.dispatch("iframe-destroyed",{extension:a});q.unregisterExtension({id:a.extension_id})},this)},notifyUnloaded:function(b,a){f.dispatch("iframe-unload",{$el:b,extension:a})}},gb=function(b){return encodeURIComponent(b).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})},Z={extract:function(b){return b.split("?")[1]||
""},parse:function(b){var a=Object.create(null);if("string"!==typeof b)return a;b=b.trim().replace(/^(\?|#|&)/,"");if(!b)return a;b.split("\x26").forEach(function(d){var b=d.replace(/\+/g," ").split("\x3d");d=b.shift();b=0<b.length?b.join("\x3d"):void 0;d=decodeURIComponent(d);b=void 0===b?null:decodeURIComponent(b);void 0===a[d]?a[d]=b:Array.isArray(a[d])?a[d].push(b):a[d]=[a[d],b]});return a},stringify:function(b,a){a=pa({encode:!0,strict:!0},a);return b?Object.keys(b).sort().map(function(d){var c=
b[d];if(void 0===c)return"";if(null===c)return K(d,a);if(Array.isArray(c)){var e=[];c.slice().forEach(function(b){void 0!==b&&(null===b?e.push(K(d,a)):e.push(K(d,a)+"\x3d"+K(b,a)))});return e.join("\x26")}return K(d,a)+"\x3d"+K(c,a)}).filter(function(a){return 0<a.length}).join("\x26"):""}},jb=function(b){var a,d;d=b.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");var c=b.indexOf("\x3d");-1===c&&(c=d);d=[c,c===d?0:4-c%4];a=d[0];d=d[1];for(var c=new sb(3*(a+d)/4-d),e=
0,g=0<d?a-4:a,l=0;l<g;l+=4)a=x[b.charCodeAt(l)]<<18|x[b.charCodeAt(l+1)]<<12|x[b.charCodeAt(l+2)]<<6|x[b.charCodeAt(l+3)],c[e++]=a>>16&255,c[e++]=a>>8&255,c[e++]=a&255;2===d&&(a=x[b.charCodeAt(l)]<<2|x[b.charCodeAt(l+1)]>>4,c[e++]=a&255);1===d&&(a=x[b.charCodeAt(l)]<<10|x[b.charCodeAt(l+1)]<<4|x[b.charCodeAt(l+2)]>>2,c[e++]=a>>8&255,c[e++]=a&255);return c},x=[],sb="undefined"!==typeof Uint8Array?Uint8Array:Array,fa=0;64>fa;++fa)x["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(fa)]=
fa;x[45]=62;x[95]=63;Ea.prototype.decode=function(b){for(var a=b.length,d="",c="",a=Math.min(b.length,a||Infinity),e=0;e<a;e++)127>=b[e]?(d+=Fa(c)+String.fromCharCode(b[e]),c=""):c+="%"+b[e].toString(16);return d+Fa(c)};var ib=Ea,$a=60;f.register("jwt-skew-set",function(b){$a=b.skew});var ab={parseJwtIssuer:function(b){return ja(b).iss},parseJwtClaims:ja,isJwtExpired:function(b,a){void 0===a&&(a=$a);b=ja(b);var d=0,c=Math.floor(Date.now()/1E3);b&&b.exp&&(d=b.exp);return d-a<c?!0:!1}},N={hasJwt:function(b){return ka(b)&&
0!==ka(b).length},isJwtExpired:function(b){b=ka(b);return ab.isJwtExpired(b)}},qa={registerContentResolver:function(b){f.dispatch("content-resolver-register-by-extension",b)},requestRefreshUrl:function(b){if(!b.resolver)throw Error("ACJS: No content resolver supplied");var a=b.resolver.call(null,k.extend({classifier:"json"},b.extension));a.fail(function(a,c){f.dispatch("jwt-url-refreshed-failed",{extension:b.extension,$container:b.$container,errorText:c.text})});a.done(function(a){var d={};if("object"===
("undefined"===typeof a?"undefined":u(a)))d=a;else if("string"===typeof a)try{d=JSON.parse(a)}catch(e){console.error("ACJS: invalid response from content resolver")}b.extension.url=d.url;k.extend(b.extension.options,d.options);f.dispatch("jwt-url-refreshed",{extension:b.extension,$container:b.$container,url:b.extension.url})});f.dispatch("jwt-url-refresh-request",{data:b})},setClockSkew:function(b){"number"===typeof b?f.dispatch("jwt-skew-set",{skew:b}):console.error("ACJS: invalid JWT clock skew set")}},
tb={optionsToAttributes:function(b){var a={};b&&"object"===("undefined"===typeof b?"undefined":u(b))&&(b.width&&(a.width=k.stringToDimension(b.width)),b.height&&(a.height=k.stringToDimension(b.height)));return a}},ra=new (function(){function b(){n(this,b);this.store={}}b.prototype.set=function(a,d){if(d){var b={};b[a]=d}else b=a;k.extend(this.store,b)};b.prototype.get=function(a){return a?this.store[a]:k.extend({},this.store)};return b}()),sa={createSimpleXdmExtension:function(b){var a=Ga(b),d=ra.get();
b.options=a.options=k.extend({},a.options);b.options.globalOptions=d;d=q.create(a,function(){b.options.noDOM||(b.$el=h(document.getElementById(b.id)));ea.notifyBridgeEstablished(b.$el,b)},function(){ea.notifyUnloaded(b.$el,b)});a.id=d.id;b.id=d.id;k.extend(d,tb.optionsToAttributes(b.options));return{iframeAttributes:d,extension:b}},extensionConfigSanitizer:Ga},I=new (function(){function b(){n(this,b);this._contentResolver=!1}b.prototype.setContentResolver=function(a){this._contentResolver=a};b.prototype.resize=
function(a,d,b){a=k.stringToDimension(a);d=k.stringToDimension(d);b.css({width:a,height:d});b.trigger("resized",{width:a,height:d})};b.prototype.simpleXdmExtension=function(a,d){!a.url||N.hasJwt(a.url)&&N.isJwtExpired(a.url)?this._contentResolver?qa.requestRefreshUrl({extension:a,resolver:this._contentResolver,$container:d}):console.error("JWT is expired and no content resolver was specified"):this._appendExtension(d,this._simpleXdmCreate(a))};b.prototype._simpleXdmCreate=function(a){var d=sa.createSimpleXdmExtension(a);
a.id=d.iframeAttributes.id;a.$el=this.render(d.iframeAttributes);return a};b.prototype._appendExtension=function(a,d){var b=a.find("iframe");0<b.length&&b.destroy();d.options.hideIframeUntilLoad&&d.$el.css({visibility:"hidden"}).load(function(){d.$el.css({visibility:""})});a.prepend(d.$el);ea.notifyIframeCreated(d.$el,d)};b.prototype._appendExtensionError=function(a,d){var b=h('\x3cdiv class\x3d"connect-resolve-error"\x3e\x3c/div\x3e');d=h("\x3cp /\x3e").text(d);b.append('\x3cp class\x3d"error"\x3eError: The content resolver threw the following error:\x3c/p\x3e');
b.append(d);a.prepend(b)};b.prototype.resolverResponse=function(a){var b=this._simpleXdmCreate(a.extension);this._appendExtension(a.$container,b)};b.prototype.resolverFailResponse=function(a){this._appendExtensionError(a.$container,a.errorText)};b.prototype.render=function(a){a=a||{};a.referrerpolicy="no-referrer";return h("\x3ciframe /\x3e").attr(a).addClass("ap-iframe")};return b}());f.register("iframe-resize",function(b){I.resize(b.width,b.height,b.$el)});f.register("content-resolver-register-by-extension",
function(b){I.setContentResolver(b.callback)});f.register("jwt-url-refreshed",function(b){I.resolverResponse(b)});f.register("jwt-url-refreshed-failed",function(b){I.resolverFailResponse(b)});f.register("after:iframe-bridge-established",function(b){b.extension.options.noDom?b.extension.options.bridgeEstablished=!0:b.$el[0].bridgeEstablished=!0});var ta={clicked:function(b){f.dispatch("button-clicked",{$el:b})},toggle:function(b,a){f.dispatch("button-toggle",{$el:b,disabled:a})},toggleVisibility:function(b,
a){f.dispatch("button-toggle-visibility",{$el:b,hidden:a})}},ub=["primary","link","secondary"],bb=0,w=new (function(){function b(){n(this,b);this.AP_BUTTON_CLASS="ap-aui-button"}b.prototype.setType=function(a,b){b&&0<=ub.indexOf(b)&&a.addClass("aui-button-"+b);return a};b.prototype.setDisabled=function(a,b){"undefined"===typeof b||a.data("immutable")||a.attr("aria-disabled",b);return a};b.prototype.setHidden=function(a,b){"undefined"===typeof b||a.data("immutable")||a.toggle(!b);return a};b.prototype._setId=
function(a,b){b||(b="ap-button-"+bb,bb++);a.attr("id",b);return a};b.prototype._additionalClasses=function(a,b){b&&("string"!==typeof b&&(b=b.join(" ")),a.addClass(b));return a};b.prototype.getName=function(a){return h(a).data("name")};b.prototype.getText=function(a){return h(a).text()};b.prototype.getIdentifier=function(a){return h(a).data("identifier")};b.prototype.isVisible=function(a){return h(a).is(":visible")};b.prototype.isEnabled=function(a){return"true"!==h(a).attr("aria-disabled")};b.prototype.render=
function(a){var b=h("\x3cbutton /\x3e");a=a||{};b.addClass("aui-button "+this.AP_BUTTON_CLASS);b.text(a.text);b.data(a.data);b.data({name:a.name||a.identifier,identifier:a.identifier||Za.randomIdentifier(),immutable:a.immutable||!1});this._additionalClasses(b,a.additionalClasses);this.setType(b,a.type);this.setDisabled(b,a.disabled||!1);this._setId(b,a.id);return b};return b}());h(function(){h("body").on("click","."+w.AP_BUTTON_CLASS,function(b){b=h(b.target).closest("."+w.AP_BUTTON_CLASS);"true"!==
b.attr("aria-disabled")&&ta.clicked(b)})});f.register("button-toggle",function(b){w.setDisabled(b.$el,b.disabled)});f.register("button-toggle-visibility",function(b){w.setHidden(b.$el,b.hidden)});var vb=["ap-iframe-container"],ua=new (function(){function b(){n(this,b)}b.prototype.createExtension=function(a,b){var d=this._renderContainer();b&&!1===b.loadingIndicator||d.append(this._renderLoadingIndicator());I.simpleXdmExtension(a,d);return d};b.prototype._renderContainer=function(a){a=h("\x3cdiv /\x3e").attr(a||
{});a.addClass(vb.join(" "));return a};b.prototype._renderLoadingIndicator=function(){return T.render()};return b}());f.register("iframe-create",function(b){var a="embedded-"+b.extension.id;b.extension.$el.parents(".ap-iframe-container").attr("id",a)});var wb={defineCustomModule:function(b,a){var d={};a?(d.methods=a,d.name=b):d.methods=b;f.dispatch("module-define-custom",d)}},ca={trackDeprecatedMethodUsed:function(b,a){f.dispatch("analytics-deprecated-method-used",{methodUsed:b,extension:a})},trackIframeBridgeStart:function(b){f.dispatch("iframe-bridge-start",
{extension:b})}},B={sanitizeTriggers:function(b){var a;Array.isArray(b)?a=b.join(" "):"string"===typeof b&&(a=b.trim());return a},uniqueId:function(){return"webitem-"+Math.floor(1E9*Math.random()).toString(16)},getExtensionKey:aa,getKey:la,getOptionsForWebItem:function(b){var a=Ha(b),d=b.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",c=Ja(d,b);!c&&window._AP&&window._AP[d+"Options"]&&(c=k.extend({},window._AP[d+"Options"][a])||{});c||(c={},console.warn("no webitem "+d+"Options for "+a));c.productContext=
c.productContext||{};c.structuredContext=c.structuredContext||{};(b=Ka(b))&&b.options&&(k.extend(c.productContext,b.options.productContext),k.extend(c.structuredContext,b.options.structuredContext),c.contextJwt=b.options.contextJwt);return c},getModuleOptionsByAddonAndModuleKey:Ia,getConfigFromTarget:Ka},V=new function a(){var d=this;n(this,a);this._providers={};this.registerProvider=function(a,e){d._providers[a]=e};this.getProvider=function(a){return d._providers[a]}},xb=new (function(){function a(){this.moduleNamesToModules=
new Map}a.prototype.registerModule=function(a,c){c=a.getModuleRegistrationName();this.moduleNamesToModules.set(c,a)};a.prototype.getModuleByName=function(a){return this.moduleNamesToModules.get(a)};a.prototype.getProviderByModuleName=function(a){if((a=this.moduleNamesToModules.get(a))&&a.isEnabled())return a.getProvider()};return a}()),p=new (function(){function a(){var d=this;n(this,a);this.create=function(a){return ua.createExtension(sa.extensionConfigSanitizer(a))};this.dialog={create:function(a,
d){var c=B.getModuleOptionsByAddonAndModuleKey("dialog",a.addon_key,a.key);d=k.extend({},c||{},d);U.open(a,d)},close:function(){U.close()}};this.registerContentResolver={resolveByExtension:function(a){d._contentResolver=a;qa.registerContentResolver({callback:a})}};this.getContentResolver=function(){return d._contentResolver};this.registerProvider=function(a,d){V.registerProvider(a,d)};this.getProvider=function(a){return V.getProvider(a)};this.frameworkAdaptor=xb}a.prototype.createExtension=function(a){a.options=
a.options||{};a.options.noDom=!0;a=sa.createSimpleXdmExtension(a);ca.trackIframeBridgeStart(a.extension);return a};a.prototype.setFrameworkAdaptor=function(a){this.frameworkAdaptor=a};a.prototype.getFrameworkAdaptor=function(){return this.frameworkAdaptor};a.prototype._cleanExtension=function(a){return k.pick(a,["id","addon_key","key","options","url"])};a.prototype.onIframeEstablished=function(a){a._wrapper=function(d){a.call({},{$el:d.$el,extension:this._cleanExtension(d.extension)})}.bind(this);
f.register("after:iframe-bridge-established",a._wrapper)};a.prototype.offIframeEstablished=function(a){if(a._wrapper)f.unregister("after:iframe-bridge-established",a._wrapper);else throw Error("cannot unregister event dispatch listener without _wrapper reference");};a.prototype.onIframeUnload=function(a){var d=this;f.register("after:iframe-unload",function(c){a.call({},{$el:c.$el,extension:d._cleanExtension(c.extension)})})};a.prototype.onPublicEventDispatched=function(a){a._wrapper=function(d){a.call({},
{type:d.type,event:d.event,extension:this._cleanExtension(d.sender)})}.bind(this);f.register("after:event-public-dispatch",a._wrapper)};a.prototype.offPublicEventDispatched=function(a){if(a._wrapper)f.unregister("after:event-public-dispatch",a._wrapper);else throw Error("cannot unregister event dispatch listener without _wrapper reference");};a.prototype.onKeyEvent=function(a,c,e,g){H.registerKeyEvent({extension_id:a,key:c,modifiers:e,callback:g})};a.prototype.offKeyEvent=function(a,c,e,g){H.unregisterKeyEvent({extension_id:a,
key:c,modifiers:e,callback:g})};a.prototype.onFrameClick=function(a){if("function"!==typeof a)throw Error("handleIframeClick must be a function");H.registerClickHandler(a)};a.prototype.offFrameClick=function(){H.unregisterClickHandler()};a.prototype.destroy=function(a){ea.notifyIframeDestroyed({id:a})};a.prototype.defineModule=function(a,c){wb.defineCustomModule(a,c)};a.prototype.broadcastEvent=function(a,c,e){v.broadcast(a,c,e)};a.prototype.getExtensions=function(a){return q.getExtensions(a)};a.prototype.trackDeprecatedMethodUsed=
function(a,c){ca.trackDeprecatedMethodUsed(a,c)};a.prototype.setJwtClockSkew=function(a){qa.setClockSkew(a)};a.prototype.isJwtExpired=function(a,c){return c?ab.isJwtExpired(a):N.isJwtExpired(a)};a.prototype.hasJwt=function(a){return N.hasJwt(a)};a.prototype.setExtensionConfigurationOptions=function(a,c){ra.set(a,c)};a.prototype.getExtensionConfigurationOption=function(a){return ra.get(a)};return a}()),kb=/^ap-dialog-[0-9A-Za-z]+$/,yb="small medium large xlarge fullscreen maximum".split(" "),J=new (function(){function a(){n(this,
a)}a.prototype._renderHeaderCloseBtn=function(){var a=h("\x3ca /\x3e").addClass("aui-dialog2-header-close"),c=h("\x3cspan /\x3e").addClass("aui-icon aui-icon-small aui-iconfont-close-dialog").text("Close");a.append(c);return a};a.prototype._renderFullScreenHeader=function(a,c){var d=h("\x3cdiv /\x3e").addClass("header-title-container aui-item expanded"),g=h("\x3cdiv /\x3e").append(h("\x3cspan /\x3e").addClass("header-title").text(c.header||""));d.append(g);a.append(d).append(this._renderHeaderActions(c.actions,
c.extension));return a};a.prototype._renderHeader=function(a){var d=h("\x3cheader /\x3e").addClass("aui-dialog2-header");if("fullscreen"===a.size)return this._renderFullScreenHeader(d,a);a.header&&(a=h("\x3ch2 /\x3e").addClass("aui-dialog2-header-main").text(a.header),d.append(a));d.append(this._renderHeaderCloseBtn());return d};a.prototype._renderHeaderActions=function(a,c){var d=h("\x3cdiv /\x3e").addClass("aui-item header-control-panel");a[0].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-success"];
a[1].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-close-dialog"];this._renderActionButtons(a,c).forEach(function(a){d.append(a)});return d};a.prototype._renderContent=function(a){var d=h("\x3cdiv /\x3e").addClass("aui-dialog2-content");a&&d.append(a);return d};a.prototype._renderFooter=function(a){var d=h("\x3cfooter /\x3e").addClass("aui-dialog2-footer");if("fullscreen"!==a.size){var e=this._renderFooterActions(a.actions,a.extension);d.append(e)}a.hint&&(a=h("\x3cdiv /\x3e").addClass("aui-dialog2-footer-hint").text(a.hint),
d.append(a));return d};a.prototype._renderActionButtons=function(a,c){var d=this,g=[];[].concat(a).forEach(function(a){g.push(d._renderDialogButton({text:a.text,name:a.name,type:a.type,additionalClasses:a.additionalClasses,custom:a.custom||!1,identifier:a.identifier,immutable:a.immutable,disabled:a.disabled||!1},c))});return g};a.prototype._renderFooterActions=function(a,c){var d=h("\x3cdiv /\x3e").addClass("aui-dialog2-footer-actions");this._renderActionButtons(a,c).forEach(function(a){d.append(a)});
return d};a.prototype._renderDialogButton=function(a,c){a.additionalClasses=a.additionalClasses||[];a.additionalClasses.push("ap-aui-dialog-button");a.custom&&a.additionalClasses.push("ap-dialog-custom-button");a=w.render(a);a.extension=c;return a};a.prototype.render=function(a){var d=k.extend({},a);a=F.sanitizeOptions(a);var e=h("\x3csection /\x3e").attr({role:"dialog",id:"ap-dialog-"+a.id});e.attr("data-aui-modal","true");e.data({"aui-remove-on-hide":!0,extension:a.extension});e.addClass("aui-layer aui-dialog2 ap-aui-dialog2");
0<=yb.indexOf(a.size)&&e.addClass("aui-dialog2-"+a.size);if("fullscreen"===a.size||"maximum"===a.size)a.chrome&&e.addClass("ap-header-controls"),e.addClass("aui-dialog2-maximum");e.append(this._renderContent(a.$content));a.chrome?(e.prepend(this._renderHeader({header:a.header,actions:a.actions,size:a.size})),e.append(this._renderFooter({extension:a.extension,actions:a.actions,hint:a.hint,size:a.size}))):e.addClass("aui-dialog2-chromeless");var g=AJS.dialog2(e);g._id=a.id;"fullscreen"===a.size&&(a.height=
a.width="100%");a.size&&"fullscreen"!==a.size||AJS.layer(e).changeSize(a.width,a.height);if(a.onHide)g.on("hide",a.onHide);g.show();g.$el.data("extension",a.extension);g.$el.data("originalOptions",d);return e};a.prototype.setIframeDimensions=function(a){I.resize("100%","100%",a)};a.prototype.getActive=function(){return D()};a.prototype.buttonIsEnabled=function(a){var d=D();if(d)return a=ba(a,d.$el),w.isEnabled(a)};a.prototype.buttonIsVisible=function(a){var d=D();if(d)return a=ba(a,d.$el),w.isVisible(a)};
a.prototype.getByExtension=function(a){var d;if("function"===typeof a)d=a;else{var e=Object.getOwnPropertyNames(a);d=function(d){var c=h(d).data("extension");return e.every(function(d){return c[d]===a[d]})}}return h(".ap-aui-dialog2").toArray().filter(d).map(function(a){return AJS.dialog2(a)})};a.prototype.addButton=function(a,c){c.custom=!0;c=this._renderDialogButton(c,a);a=this.getByExtension({addon_key:a.addon_key,key:a.key})[0].$el;La(a).append(c);return a};return a}());f.register("iframe-bridge-established",
function(a){if(a.extension.options.isDialog){var d=void 0,c=p.getFrameworkAdaptor().getProviderByModuleName("dialog");c?(d=c.close,c.setButtonDisabled("submit",!1)):(z.toggleButton({identifier:"submit",enabled:!0}),d=function(){z.close({dialog:D(),extension:a.extension})});a.extension.options.preventDialogCloseOnEscape||(H.registerKeyEvent({extension_id:a.extension.id,key:27,callback:d}),f.registerOnce("dialog-close",function(d){H.unregisterKeyEvent({extension_id:a.extension.id,key:27})}))}});f.register("dialog-close-active",
function(a){var d=D();d&&z.close({customData:a.customData,dialog:d,extension:a.extension})});f.register("dialog-close",function(a){a.dialog&&a.dialog.hide()});f.register("dialog-button-toggle",function(a){var d=D();d&&(d=ba(a.identifier,d.$el),ta.toggle(d,!a.enabled))});f.register("dialog-button-toggle-visibility",function(a){var d=D();d&&(d=ba(a.identifier,d.$el),ta.toggleVisibility(d,a.hidden))});f.register("button-clicked",function(a){a=a.$el;if(a.hasClass("ap-aui-dialog-button")){var d=a.parents(".ap-aui-dialog2"),
c=d.find("iframe");c.length&&c[0].bridgeEstablished?z.clickButton(w.getIdentifier(a),a,d.data("extension")):z.close({dialog:D(),extension:a.extension})}});h.fn&&(f.register("iframe-create",function(a){a.extension.options&&a.extension.options.isDialog&&J.setIframeDimensions(a.extension.$el)}),f.register("dialog-button-add",function(a){J.addButton(a.extension,a.button)}),f.register("host-window-resize",k.debounce(function(){h(".ap-aui-dialog2").each(function(a,d){a=h(d);a=F.sanitizeOptions(a.data("originalOptions"));
d.style.width=a.width;d.style.height=a.height})},100)));H.registerWindowKeyEvent({keyCode:27,callback:function(){z.closeActive({customData:{},extension:null})}});var O=new (function(){function a(){n(this,a)}a.prototype.render=function(a,c){a.options=a.options||{};c=c||{};a.options.isDialog=!0;a.options.dialogId=c.id;a.options.preventDialogCloseOnEscape=!1===c.closeOnEscape;a.options.hideIframeUntilLoad=!0;var d=ua.createExtension(a);return J.render({extension:a,$content:d,chrome:c.chrome,width:c.width,
height:c.height,size:c.size,header:c.header,hint:c.hint,submitText:c.submitText,cancelText:c.cancelText,buttons:c.buttons,onHide:c.onHide})};a.prototype.getActiveDialog=function(){return J.getActive()};a.prototype.buttonIsEnabled=function(a){return J.buttonIsEnabled(a)};a.prototype.buttonIsVisible=function(a){return J.buttonIsVisible(a)};a.prototype.getByExtension=function(a){"string"===typeof a&&(a={id:a});return J.getByExtension(a)};return a}());f.register("dialog-extension-open",function(a){O.render(a.extension,
a.options)});var cb={};f.register("dialog-close",function(a){a.dialog&&a.extension&&v.broadcast("dialog.close",{addon_key:a.extension.addon_key},a.customData)});f.register("dialog-button-click",function(a){var d={button:{name:w.getName(a.$el),identifier:w.getIdentifier(a.$el),text:w.getText(a.$el)}};a.$el.hasClass("ap-dialog-custom-button")||v.broadcast("dialog."+d.button.name,{addon_key:a.extension.addon_key,key:a.extension.key},d);v.broadcast("dialog.button.click",{addon_key:a.extension.addon_key,
key:a.extension.key},d)});var C=function(){function a(d,c){n(this,a);c=k.last(arguments);var e=p.getFrameworkAdaptor().getProviderByModuleName("dialog");if(e)F.assertActiveDialogOrThrow(e,c._context.extension.addon_key),this.identifier=this.name=d;else{if(!O.getActiveDialog())throw Error("Failed to find an active dialog.");this.identifier=this.name=d;this.enabled=O.buttonIsEnabled(d);this.hidden=!O.buttonIsVisible(d)}}a.prototype.enable=function(){this.setState({enabled:!0})};a.prototype.disable=
function(){this.setState({enabled:!1})};a.prototype.isEnabled=function(a){a=k.last(arguments);var d=p.getFrameworkAdaptor().getProviderByModuleName("dialog");d?a(!d.isButtonDisabled(this.identifier)):a(this.enabled)};a.prototype.toggle=function(){var a=p.getFrameworkAdaptor().getProviderByModuleName("dialog");a?a.toggleButton(this.identifier):this.setState({enabled:!this.enabled})};a.prototype.setState=function(a){var d=p.getFrameworkAdaptor().getProviderByModuleName("dialog");d?d.setButtonDisabled(this.identifier,
!a.enabled):(this.enabled=a.enabled,z.toggleButton({identifier:this.identifier,enabled:this.enabled}))};a.prototype.trigger=function(a){a=k.last(arguments);this.enabled&&z.dialogMessage({name:this.name,extension:a._context.extension})};a.prototype.isHidden=function(a){a=k.last(arguments);var d=p.getFrameworkAdaptor().getProviderByModuleName("dialog");d?a(d.isButtonHidden(this.identifier)):a(this.hidden)};a.prototype.hide=function(){this.setHidden(!0)};a.prototype.show=function(){this.setHidden(!1)};
a.prototype.setHidden=function(a){var d=p.getFrameworkAdaptor().getProviderByModuleName("dialog");d?d.setButtonHidden(this.identifier,a):(this.hidden=a,z.toggleButtonVisibility({identifier:this.identifier,hidden:this.hidden}))};return a}(),zb={create:{constructor:function d(c,e){n(this,d);e=k.last(arguments);var g=e._id,f=e._context.extension,f={addon_key:f.addon_key,key:c.key,options:k.pick(f.options,["customData","productContext"])};f.options.customData=c.customData;var h=F.moduleOptionsFromGlobal(f.addon_key,
f.key);c=k.extend({},h||{},c);c.id=g;if(h=p.getFrameworkAdaptor().getProviderByModuleName("dialog")){var m=function(d){var c=e._context.extension.key,g=e._context.extension.addon_key,f={button:{identifier:d.identifier,name:d.identifier,text:d.text}};0<=["submit","cancel"].indexOf(d.identifier)&&v.broadcast("dialog."+d.identifier,{addon_key:g,key:c},f);v.broadcast("dialog.button.click",{addon_key:g,key:c},f)},r=F.sanitizeOptions(c);f.options.preventDialogCloseOnEscape=!1===r.closeOnEscape;r.actions.map(function(d){return d.onClick=
m.bind(null,d)});h.create(r,f)}else F.trackMultipleDialogOpening(f,c),U.open(f,c);this.customData=c.customData;cb[g]=this}},close:function(d,c){c=k.last(arguments);var e=p.getFrameworkAdaptor().getProviderByModuleName("dialog");e?(F.assertActiveDialogOrThrow(e,c._context.extension.addon_key),v.broadcast("dialog.close",{addon_key:c._context.extension.addon_key},d),e.close()):(e=c._context.extension.options.isDialog?O.getByExtension(c._context.extension.id)[0]:O.getActiveDialog(),z.close({customData:d,
dialog:e,extension:c._context.extension}))},getCustomData:function(d){d=k.last(arguments);var c=cb[d._context.extension.options.dialogId];c?d(c.customData):d(void 0)},getButton:{constructor:C,enable:C.prototype.enable,disable:C.prototype.disable,toggle:C.prototype.toggle,isEnabled:C.prototype.isEnabled,trigger:C.prototype.trigger,hide:C.prototype.hide,show:C.prototype.show,isHidden:C.prototype.isHidden},createButton:{constructor:function c(e,g){n(this,c);g=k.last(arguments);var f=p.getFrameworkAdaptor().getProviderByModuleName("dialog");
f?(F.assertActiveDialogOrThrow(f,g._context.extension.addon_key),f.createButton({identifier:e.identifier,text:e.text,hidden:!1,disabled:e.disabled||!1,onClick:function(){v.broadcast("dialog.button.click",{addon_key:g._context.extension.addon_key,key:g._context.extension.key},{button:{identifier:e.identifier,text:e.text}})}})):U.addUserButton({identifier:e.identifier,text:e.text},g._context.extension)}}};f.register("iframe-resize",function(c){I.resize(c.width,c.height,c.$el)});f.register("iframe-size-to-parent",
function(c){var e=k.getIframeByExtensionId(c.extensionId);c.hideFooter?(e.addClass("full-size-general-page-no-footer"),h("#footer").css({display:"none"}),c=h(window).height()-h("#header \x3e nav").outerHeight()):(c=h(window).height()-h("#header \x3e nav").outerHeight()-h("#footer").outerHeight()-1,e.removeClass("full-size-general-page-no-footer"),h("#footer").css({display:"block"}));f.dispatch("iframe-resize",{width:"100%",height:c+"px",$el:e})});f.register("hide-footer",function(c){c&&h("#footer").css({display:"none"})});
window.addEventListener("resize",function(c){f.dispatch("host-window-resize",c)},!0);var ga={iframeResize:function(c,e,g){var l;l=g.extension_id?k.getIframeByExtensionId(g.extension_id):g;f.dispatch("iframe-resize",{width:c,height:e,$el:l,extension:g.extension})},sizeToParent:function(c,e){f.dispatch("iframe-size-to-parent",{hideFooter:e,extensionId:c})},hideFooter:function(c){f.dispatch("hide-footer",c)}},db=k.debounce,ha={},P=[],ia={},Ab={getLocation:function(c){c=k.last(arguments);c(window.location.href)},
resize:function(c,e,g){g=k.last(arguments);var f=V.getProvider("addon");if(f)f.resize(c,e,g._context);else{var f=g._context.extension.id,h=g._context.extension.options;if(-1!==P.indexOf(f)||h&&h.isDialog)return!1;ha[f]||(ha[f]=db(function(c,e,g){ga.iframeResize(c,e,g._context)},50));ha[f](c,e,g)}return!0},sizeToParent:db(function(c,e){e=k.last(arguments);var g=V.getProvider("addon");g?g.sizeToParent(c,e._context):e._context.extension.options.isFullPage?(k.getIframeByExtensionId(e._context.extension_id).addClass("full-size-general-page"),
ga.sizeToParent(e._context.extension_id,c),ia[e._context.extension_id]={hideFooter:c}):k.getIframeByExtensionId(e._context.extension_id).addClass("full-size-general-page-fail")}),hideFooter:function(c){c&&ga.hideFooter(c)}};f.register("host-window-resize",function(c){Object.getOwnPropertyNames(ia).forEach(function(c){ga.sizeToParent(c,ia[c].hideFooter)})});f.register("after:iframe-unload",function(c){delete ha[c.extension.id];delete ia[c.extension.id];-1!==P.indexOf(c.extension.id)&&P.splice(P.indexOf(c.extension.id),
1)});f.register("before:iframe-size-to-parent",function(c){-1===P.indexOf(c.extensionId)&&P.push(c.extensionId)});var va={hide:function(c){f.dispatch("inline-dialog-hide",{$el:c})},refresh:function(c){f.dispatch("inline-dialog-refresh",{$el:c})},hideTriggered:function(c,e){f.dispatch("inline-dialog-hidden",{extension_id:c,$el:e})},close:function(){f.dispatch("inline-dialog-close",{})},created:function(c){f.dispatch("inline-dialog-opened",{$el:c.$el,trigger:c.trigger,extension:c.extension})}},Na="generic error warning success info hint".split(" "),
Oa=/^ap-message-[0-9A-fa-f]+$/,G={},Ma=!1,Bb={clear:function(c){c="ap-message-"+c._id;if(Oa.test(c)){var e=p.getFrameworkAdaptor().getProviderByModuleName("messages");e?e.clear(c):h("#"+c).closeMessage()}},onClose:function(c,e){e=k.last(arguments);var g=c._id,f=p.getFrameworkAdaptor().getProviderByModuleName("messages");if(f)f.onClose("ap-message-"+c._id,e);else G[g]&&(G[g].onCloseTrigger=e)},generic:L("generic"),error:L("error"),warning:L("warning"),success:L("success"),info:L("info"),hint:L("hint")},
R={actionInvoked:function(c,e){f.dispatch("flag-action-invoked",{id:e,actionId:c})},open:function(c){f.dispatch("flag-open",{id:c})},close:function(c){f.dispatch("flag-close",{id:c})},closed:function(c){f.dispatch("flag-closed",{id:c})}},ma=new (function(){function c(){n(this,c)}c.prototype.cleanKey=function(c){return(c=c.match(/^ap-flag-(.+)$/))&&c[1]?c[1]:null};c.prototype._toHtmlString=function(c){if("string"===h.type(c))return c;if("object"===h.type(c)&&c instanceof h)return c.html()};c.prototype._renderBody=
function(c){c=this._toHtmlString(c);c=h("\x3cdiv /\x3e").html(c);h("\x3cp /\x3e").addClass("ac-flag-actions").appendTo(c);return c.html()};c.prototype._renderActions=function(c,g,f){var e=c.find(".ac-flag-actions");f=f||{};var l;Object.getOwnPropertyNames(f).forEach(function(c){l=h("\x3ca /\x3e").attr("href","#").data({key:c,flag_id:g}).text(f[c]);e.append(l)},this);return c};c.prototype.render=function(c){nb();var e="ap-flag-"+c.id,f=AJS.flag({type:c.type,title:c.title,body:this._renderBody(c.body),
close:c.close});f.setAttribute("id",e);e=h(f);this._renderActions(e,c.id,c.actions);e.addClass("ac-aui-flag");e.close=f.close;return e};c.prototype.close=function(c){document.getElementById(c).close()};return c}()),Pa=!1;f.register("flag-close",function(c){ma.close(c.id)});var S={},eb=function(){function c(e,g){n(this,c);g=k.last(arguments);if("object"===("undefined"===typeof e?"undefined":u(e))){var f=g._id,h=p.getFrameworkAdaptor().getProviderByModuleName("flag");if(h){var m=[];"object"===u(e.actions)&&
(m=Object.getOwnPropertyNames(e.actions).map(function(c){return{actionKey:c,actionText:e.actions[c],executeAction:R.actionInvoked.bind(null,c,f)}}));m={id:f,title:e.title,body:e.body,actions:m,onClose:R.closed,close:e.close,type:(e.type||"info").toLowerCase()};this.flag=h.create(m);(h=V.getProvider("addon"))&&h.registerUnmountCallback&&h.registerUnmountCallback(this.close.bind(this),g._context)}else this.flag=ma.render({type:e.type,title:e.title,body:AJS.escapeHtml(e.body),actions:e.actions,close:e.close,
id:f}),R.open(this.flag.attr("id"));this.onTriggers={};this.extension=g._context.extension;S[g._id]=this;g.call(null,g._id)}}c.prototype.close=function(){this.flag.close()};return c}();f.register("flag-closed",function(c){Qa(c.id,"flag.close");S[c.id]&&delete S[c.id]});f.register("flag-action-invoked",function(c){Qa(c.id,"flag.action",{actionIdentifier:c.actionId})});var Cb={create:{constructor:eb,close:eb.prototype.close}},na=void 0,da=void 0;f.register("iframe-bridge-established",function(c){c.extension.options.isFullPage&&
(window.addEventListener("scroll",Sa),na=c.extension.id)});f.register("iframe-destroyed",function(c){Ra()});f.register("iframe-unload",function(c){Ra()});var fb={itemSelected:function(c,e,g){f.dispatch("dropdown-item-selected",{id:c,item:e,extension:g})}};f.register("dropdown-item-selected",function(c){v.broadcast("dropdown-item-selected",{addon_key:c.extension.addon_key,key:c.extension.key},{dropdownId:c.id,item:c.item})});f.register("iframe-destroyed",function(c){var e=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");
e&&e.destroyByExtension(c.extension.extension_id)});f.register("after:iframe-unload",function(c){var e=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");e&&e.destroyByExtension(c.extension.extension_id)});var W=new (function(){function c(){n(this,c);this._webitems={};this._contentResolver=function(){}}c.prototype.setContentResolver=function(c){this._contentResolver=c};c.prototype.requestContent=function(c){if(c.addon_key&&c.key)return this._contentResolver.call(null,k.extend({classifier:"json"},
c))};c.prototype.getWebItemsBySelector=function(c){var e=this,f=void 0;Object.getOwnPropertyNames(this._webitems).some(function(g){g=e._webitems[g];return g.selector&&g.selector.trim()===c.trim()?(f=g,!0):!1});return f};c.prototype.setWebItem=function(c){return this._webitems[c.name]={name:c.name,selector:c.selector,triggers:c.triggers}};c.prototype._removeTriggers=function(c){var e=this,f=B.sanitizeTriggers(c.triggers);h(function(){h("body").off(f,c.selector,e._webitems[c.name]._on)});delete this._webitems[c.name]._on};
c.prototype._addTriggers=function(c){var e=B.sanitizeTriggers(c.triggers);c._on=function(e){e.preventDefault();var g=h(e.target).closest(c.selector),f=B.getConfigFromTarget(g),f=f&&f.url?f.url:void 0,g={addon_key:B.getExtensionKey(g),key:B.getKey(g),options:B.getOptionsForWebItem(g),url:f};wa.webitemInvoked(c,e,g)};h(function(){h("body").on(e,c.selector,c._on)})};return c}());f.register("webitem-added",function(c){W._addTriggers(c.webitem)});f.register("content-resolver-register-by-extension",function(c){W.setContentResolver(c.callback)});
document.addEventListener("aui-responsive-menu-item-created",function(c){var e=c.detail.originalItem.querySelector('a[class*\x3d"ap-"]');if(e){var g=c.detail.newItem.querySelector("a");[].slice.call(e.classList).forEach(function(c){/^ap-/.test(c)&&g.classList.add(c)})}});var wa={addWebItem:function(c){if(W.getWebItemsBySelector(c.selector))return!1;c=W.setWebItem(c);f.dispatch("webitem-added",{webitem:c})},webitemInvoked:function(c,e,g){f.dispatch("webitem-invoked:"+c.name,{webitem:c,event:e,extension:g})}},
Db={addExtension:function(c){f.dispatch("inline-dialog-extension",{$el:c.$el,extension:c.extension})}},X=new (function(){function c(){n(this,c)}c.prototype.resize=function(c){var e=k.stringToDimension(c.width),f=k.stringToDimension(c.height),h=c.$el.find(".contents");1===h.length&&(h.css({width:e,height:f}),va.refresh(c.$el))};c.prototype.refresh=function(c){c[0].popup.reset()};c.prototype._getInlineDialog=function(c){return AJS.InlineDialog(c)};c.prototype._renderContainer=function(){return h("\x3cdiv /\x3e").addClass("aui-inline-dialog-contents")};
c.prototype._displayInlineDialog=function(c){va.created({$el:c.$el,trigger:c.trigger,extension:c.extension})};c.prototype.hideInlineDialog=function(c){c.hide()};c.prototype.closeInlineDialog=function(){h(".aui-inline-dialog").filter(function(){return 0<h(this).find(".ap-iframe-container").length}).hide()};c.prototype.render=function(c){var e=this,f=h(document.getElementById("inline-dialog-"+c.id));0!==f.length&&f.remove();return AJS.InlineDialog(c.bindTo,c.id,function(g,f,h){g.append(c.$content);
e._displayInlineDialog({extension:c.extension,$el:g,trigger:f});h()},c.inlineDialogOptions)};return c}());f.register("iframe-resize",function(c){var e=c.$el.parents(".aui-inline-dialog");1===e.length&&X.resize({width:c.width,height:c.height,$el:e})});f.register("inline-dialog-refresh",function(c){X.refresh(c.$el)});f.register("inline-dialog-hide",function(c){X.hideInlineDialog(c.$el)});f.register("inline-dialog-close",function(c){X.closeInlineDialog()});var Eb=["mouseover","click"],Y=new (function(){function c(){n(this,
c);this._inlineDialogWebItemSpec={name:"inline-dialog",selector:".ap-inline-dialog",triggers:Eb};this._inlineDialogWebItems={}}c.prototype.getWebItem=function(){return this._inlineDialogWebItemSpec};c.prototype._createInlineDialog=function(c){return X.render({extension:c.extension,id:c.id,bindTo:c.$target,$content:h("\x3cdiv /\x3e"),inlineDialogOptions:c.extension.options})};c.prototype.triggered=function(c){if("click"===c.event.type||c.extension.options.onHover){var e=h(c.event.currentTarget),f=
e.data("inline-dialog-target-uid");this._createInlineDialog({id:f,extension:c.extension,$target:e,options:c.extension.options||{}}).show()}};c.prototype.opened=function(c){var e=c.$el.find("iframe");if(e&&1===e.length&&(e=e.attr("src"),0<e.length)){var f=N.hasJwt(e);if(f&&!N.isJwtExpired(e)||!f)return!1}e=W.requestContent(c.extension);if(!e)return console.warn("no content resolver found"),!1;e.then(function(e){e.options=e.options||{};k.extend(e.options,{autoresize:!0,widthinpx:!0});Db.addExtension({$el:c.$el,
extension:e})});return!0};c.prototype.addExtension=function(c){var e=ua.createExtension(c.extension);c.$el.empty().append(e)};c.prototype.createIfNotExists=function(c){c=h(c.event.currentTarget);var e=c.data("inline-dialog-target-uid");e||(e=B.uniqueId(),c.data("inline-dialog-target-uid",e))};return c}()),xa=Y.getWebItem();f.register("before:webitem-invoked:"+xa.name,function(c){Y.createIfNotExists(c)});f.register("webitem-invoked:"+xa.name,function(c){Y.triggered(c)});f.register("inline-dialog-opened",
function(c){Y.opened(c)});f.register("inline-dialog-extension",function(c){Y.addExtension(c)});wa.addWebItem(xa);var Fb=["click"],Gb={chrome:!0},ya=new (function(){function c(){n(this,c);this._dialogWebItem={name:"dialog",selector:".ap-dialog",triggers:Fb}}c.prototype.getWebItem=function(){return this._dialogWebItem};c.prototype._dialogOptions=function(c){return k.extend({},Gb,c||{})};c.prototype.triggered=function(c){var e=h(c.event.currentTarget).data("dialog-target-uid"),f=this._dialogOptions(c.extension.options);
f.id=e;U.open(c.extension,f)};c.prototype.createIfNotExists=function(c){c=h(c.event.currentTarget);var e=c.data("dialog-target-uid");e||(e=B.uniqueId(),c.data("dialog-target-uid",e))};return c}()),za=ya.getWebItem();f.register("webitem-invoked:"+za.name,function(c){ya.triggered(c)});f.register("before:webitem-invoked:"+za.name,ya.createIfNotExists);wa.addWebItem(za);window._AP||(window._AP={});window._AP.version||(window._AP.version="5.1.69");q.defineModule("messages",Bb);q.defineModule("flag",Cb);
q.defineModule("dialog",zb);q.defineModule("inlineDialog",{hide:function(c){c=k.last(arguments);var e=p.getFrameworkAdaptor().getProviderByModuleName("inlineDialog");e?e.hide(c._context):va.close()}});q.defineModule("env",Ab);q.defineModule("events",{emit:function(c){for(var e=arguments.length,f=Array(1<e?e-1:0),h=1;h<e;h++)f[h-1]=arguments[h];e=k.last(f);f=k.first(f,-1);v.broadcast(c,{addon_key:e._context.extension.addon_key},f)},emitPublic:function(c){for(var e=arguments.length,f=Array(1<e?e-1:
0),h=1;h<e;h++)f[h-1]=arguments[h];e=k.last(f)._context.extension;f=k.first(f,-1);v.broadcastPublic(c,f,e)}});q.defineModule("_analytics",{trackDeprecatedMethodUsed:function(c,e){e=k.last(arguments);ca.trackDeprecatedMethodUsed(c,e._context.extension)}});q.defineModule("scrollPosition",{getPosition:function(c){c=k.last(arguments);if(c._context.extension.options.isFullPage){var e=k.getIframeByExtensionId(c._context.extension_id).offset(),f=h(window);c({scrollY:f.scrollTop()-e.top,scrollX:f.scrollLeft()-
e.left,width:window.innerWidth,height:window.innerHeight})}},setVerticalPosition:function(c,e){e=k.last(arguments);if(e._context.extension.options&&e._context.extension.options.isFullPage){var f=k.getIframeByExtensionId(e._context.extension_id).offset();"number"===typeof c&&(document.documentElement.scrollTop=f.top+c)}}});q.defineModule("dropdown",{create:function(c,e){e=k.last(arguments);if("object"===("undefined"===typeof c?"undefined":u(c))){var f=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");
if(f){var h=ob(c.list),h={dropdownId:c.dropdownId,dropdownGroups:h,dropdownItemNotifier:function(c){fb.itemSelected(c.dropdownId,c.item,e._context.extension)}};f.create(h,e._context);return h}}},showAt:function(c,e,f,h){var g=k.last(arguments),l={left:0,top:0},m=document.getElementById(g._context.extension_id);m?l=m.getBoundingClientRect():console.error("ACJS: no iframe found for dropdown");(m=p.getFrameworkAdaptor().getProviderByModuleName("dropdown"))&&m.showAt({dropdownId:c,x:e,y:f,width:h},{iframeDimensions:l,
onItemSelection:function(c,e){fb.itemSelected(c,e,g._context.extension)}})},hide:function(c){var e=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");e&&e.hide(c)},itemDisable:function(c,e){var f=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");f&&f.itemDisable(c,e)},itemEnable:function(c,e){var f=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");f&&f.itemEnable(c,e)}});f.register("module-define-custom",function(c){q.defineModule(c.name,c.methods)});q.registerRequestNotifier(function(c){A.dispatch("bridge.invokemethod",
{module:c.module,fn:c.fn,addonKey:c.addon_key,moduleKey:c.key})});return p});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/iframe/host/_uritemplate.js' */
(function(x){function n(a){var b;if(null===a||void 0===a)return!1;if(e.isArray(a))return 0<a.length;if("string"===typeof a||"number"===typeof a||"boolean"===typeof a)return!0;for(b in a)if(a.hasOwnProperty(b)&&n(a[b]))return!0;return!1}var m=function(){function a(b){this.options=b}a.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options};return a}(),e=function(){function a(b){if("function"===typeof Object.freeze&&"object"===typeof b&&null!==b){Object.freeze(b);
var c,k;for(k in b)b.hasOwnProperty(k)&&(c=b[k],"object"===typeof c&&a(c))}return b}return{isArray:function(b){return"[object Array]"===Object.prototype.toString.apply(b)},isString:function(b){return"[object String]"===Object.prototype.toString.apply(b)},isNumber:function(b){return"[object Number]"===Object.prototype.toString.apply(b)},isBoolean:function(b){return"[object Boolean]"===Object.prototype.toString.apply(b)},join:function(b,c){var a="",d=!0,f;for(f=0;f<b.length;f+=1)d?d=!1:a+=c,a+=b[f];
return a},map:function(b,c){for(var a=[],d=0;d<b.length;d+=1)a.push(c(b[d]));return a},filter:function(b,c){for(var a=[],d=0;d<b.length;d+=1)c(b[d])&&a.push(b[d]);return a},deepFreeze:a}}(),t=function(){function a(b){return"0"<=b&&"9">=b}return{isAlpha:function(b){return"a"<=b&&"z">=b||"A"<=b&&"Z">=b},isDigit:a,isHexDigit:function(b){return a(b)||"a"<=b&&"f">=b||"A"<=b&&"F">=b}}}(),u=function(){function a(b,a){return"%"===b.charAt(a)&&t.isHexDigit(b.charAt(a+1))&&t.isHexDigit(b.charAt(a+2))}var b=
{encode:function(b){return unescape(encodeURIComponent(b))},numBytes:function(b){return 127>=b?1:194<=b&&223>=b?2:224<=b&&239>=b?3:240<=b&&244>=b?4:0},isValidFollowingCharCode:function(b){return 128<=b&&191>=b}};return{encodeCharacter:function(a){var c="";a=b.encode(a);var d,f;for(f=0;f<a.length;f+=1)d=a.charCodeAt(f),c+="%"+(16>d?"0":"")+d.toString(16).toUpperCase();return c},isPctEncoded:function(c){if(!a(c,0))return!1;var k=parseInt(c.substr(1,2),16),k=b.numBytes(k);if(0===k)return!1;for(var d=
1;d<k;d+=1)if(!a(c,3*d)||!b.isValidFollowingCharCode(parseInt(c.substr(3*d+1,2),16)))return!1;return!0},pctCharAt:function(c,k){var d=c.charAt(k);if(!a(c,k))return d;var f=parseInt(c.substr(k+1,2),16),f=b.numBytes(f);if(0===f)return d;for(var e=1;e<f;e+=1)if(!a(c,k+3*e)||!b.isValidFollowingCharCode(parseInt(c.substr(k+3*e+1,2),16)))return d;return c.substr(k,3*f)}}}(),v=function(){return{isVarchar:function(a){return t.isAlpha(a)||t.isDigit(a)||"_"===a||u.isPctEncoded(a)},isUnreserved:function(a){return t.isAlpha(a)||
t.isDigit(a)||"-"===a||"."===a||"_"===a||"~"===a},isReserved:function(a){return":"===a||"/"===a||"?"===a||"#"===a||"["===a||"]"===a||"@"===a||"!"===a||"$"===a||"\x26"===a||"("===a||")"===a||"*"===a||"+"===a||","===a||";"===a||"\x3d"===a||"'"===a}}}(),w=function(){function a(b,a){var c="",d,f;if("number"===typeof b||"boolean"===typeof b)b=b.toString();for(d=0;d<b.length;d+=f.length)f=b.charAt(d),c+=v.isUnreserved(f)||a&&v.isReserved(f)?f:u.encodeCharacter(f);return c}return{encode:a,encodePassReserved:function(b){return a(b,
!0)},encodeLiteral:function(b){var a="",k,d;for(k=0;k<b.length;k+=d.length)d=u.pctCharAt(b,k),a=1<d.length?a+d:a+(v.isReserved(d)||v.isUnreserved(d)?d:u.encodeCharacter(d));return a},encodeLiteralCharacter:function(b,a){b=u.pctCharAt(b,a);return 1<b.length?b:v.isReserved(b)||v.isUnreserved(b)?b:u.encodeCharacter(b)}}}(),A=function(){function a(a){b[a]={symbol:a,separator:"?"===a?"\x26":""===a||"+"===a||"#"===a?",":a,named:";"===a||"\x26"===a||"?"===a,ifEmpty:"\x26"===a||"?"===a?"\x3d":"",first:"+"===
a?"":a,encode:"+"===a||"#"===a?w.encodePassReserved:w.encode,toString:function(){return this.symbol}}}var b={};a("");a("+");a("#");a(".");a("/");a(";");a("?");a("\x26");return{valueOf:function(a){return b[a]?b[a]:0<="\x3d,!@|".indexOf(a)?null:b[""]}}}(),y=function(){function a(b){this.literal=w.encodeLiteral(b)}a.prototype.expand=function(){return this.literal};a.prototype.toString=a.prototype.expand;return a}(),C=function(){function a(b){function a(){var a=b.substring(q,g);if(0===a.length)throw new m({expressionText:b,
message:"a varname must be specified",position:g});e={varname:a,exploded:!1,maxLength:null};q=null}function k(){if(p===g)throw new m({expressionText:b,message:"after a ':' you have to specify the length",position:g});e.maxLength=parseInt(b.substring(p,g),10);p=null}var d,f=[],e=null,q=null,p=null,g,h="";d=function(a){var c=A.valueOf(a);if(null===c)throw new m({expressionText:b,message:"illegal use of reserved operator",position:g,operator:a});return c}(b.charAt(0));for(q=g=d.symbol.length;g<b.length;g+=
h.length){h=u.pctCharAt(b,g);if(null!==q){if("."===h){if(q===g)throw new m({expressionText:b,message:"a varname MUST NOT start with a dot",position:g});continue}if(v.isVarchar(h))continue;a()}if(null!==p){if(g===p&&"0"===h)throw new m({expressionText:b,message:"A :prefix must not start with digit 0",position:g});if(t.isDigit(h)){if(4<=g-p)throw new m({expressionText:b,message:"A :prefix must have max 4 digits",position:g});continue}k()}if(":"===h){if(null!==e.maxLength)throw new m({expressionText:b,
message:"only one :maxLength is allowed per varspec",position:g});if(e.exploded)throw new m({expressionText:b,message:"an exploeded varspec MUST NOT be varspeced",position:g});p=g+1}else if("*"===h){if(null===e)throw new m({expressionText:b,message:"exploded without varspec",position:g});if(e.exploded)throw new m({expressionText:b,message:"exploded twice",position:g});if(e.maxLength)throw new m({expressionText:b,message:"an explode (*) MUST NOT follow to a prefix",position:g});e.exploded=!0}else if(","===
h)f.push(e),e=null,q=g+1;else throw new m({expressionText:b,message:"illegal character",character:h,position:g});}null!==q&&a();null!==p&&k();f.push(e);return new B(b,d,f)}return function(b){var c,e,d=[],f=null,n=0;for(c=0;c<b.length;c+=1)if(e=b.charAt(c),null!==n){if("}"===e)throw new m({templateText:b,message:"unopened brace closed",position:c});"{"===e&&(n<c&&d.push(new y(b.substring(n,c))),n=null,f=c)}else if(null!==f){if("{"===e)throw new m({templateText:b,message:"brace already opened",position:c});
if("}"===e){if(f+1===c)throw new m({templateText:b,message:"empty braces",position:f});try{d.push(a(b.substring(f+1,c)))}catch(q){if(q.prototype===m.prototype)throw new m({templateText:b,message:q.options.message,position:f+q.options.position,details:q.options});throw q;}f=null;n=c+1}}else throw Error("reached unreachable code");if(null!==f)throw new m({templateText:b,message:"unclosed brace",position:f});n<b.length&&d.push(new y(b.substr(n)));return new z(b,d)}}(),B=function(){function a(a){if(!n(a))return!0;
if(e.isString(a))return""===a;if(e.isNumber(a)||e.isBoolean(a))return!1;if(e.isArray(a))return 0===a.length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function b(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push({name:c,value:a[c]});return b}function c(a,b,c){this.templateText=a;this.operator=b;this.varspecs=c}function k(a,b,c){var d="";c=c.toString();if(b.named){d+=w.encodeLiteral(a.varname);if(""===c)return d+=b.ifEmpty;d+="\x3d"}null!==a.maxLength&&(c=c.substr(0,a.maxLength));return d+=
b.encode(c)}function d(a){return n(a.value)}function f(c,g,f){var h=[],l="";if(g.named){l+=w.encodeLiteral(c.varname);if(a(f))return l+=g.ifEmpty;l+="\x3d"}e.isArray(f)?(h=e.filter(f,n),h=e.map(h,g.encode)):(h=b(f),h=e.filter(h,d),h=e.map(h,function(a){return g.encode(a.name)+","+g.encode(a.value)}));return l+=e.join(h,",")}function m(c,g,f){var h=[];e.isArray(f)?(h=e.filter(f,n),h=e.map(h,function(b){var d=w.encodeLiteral(c.varname);return d=a(b)?d+g.ifEmpty:d+("\x3d"+g.encode(b))})):(h=b(f),h=e.filter(h,
d),h=e.map(h,function(b){var c=w.encodeLiteral(b.name);return c=a(b.value)?c+g.ifEmpty:c+("\x3d"+g.encode(b.value))}));return e.join(h,g.separator)}function q(a,c){var d=[],f="";e.isArray(c)?(d=e.filter(c,n),d=e.map(d,a.encode)):(d=b(c),d=e.filter(d,function(a){return n(a.value)}),d=e.map(d,function(b){return a.encode(b.name)+"\x3d"+a.encode(b.value)}));return f+=e.join(d,a.separator)}c.prototype.toString=function(){return this.templateText};c.prototype.expand=function(b){var c=[],d,p,l,r=this.operator;
for(d=0;d<this.varspecs.length;d+=1)if(p=this.varspecs[d],l=b[p.varname],null!==l&&void 0!==l)if(e.isArray(l),"string"===typeof l||"number"===typeof l||"boolean"===typeof l)c.push(k(p,r,l));else{if(p.maxLength&&n(l))throw b=Error,l=JSON&&JSON.stringify?JSON.stringify(l):l,new b("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+l);p.exploded?n(l)&&(r.named?c.push(m(p,r,l)):c.push(q(r,l))):!r.named&&a(l)||c.push(f(p,r,l))}return 0===c.length?
"":r.first+e.join(c,r.separator)};return c}(),z=function(){function a(a,c){this.templateText=a;this.expressions=c;e.deepFreeze(this)}a.prototype.toString=function(){return this.templateText};a.prototype.expand=function(a){var b,e="";for(b=0;b<this.expressions.length;b+=1)e+=this.expressions[b].expand(a);return e};a.parse=C;a.UriTemplateError=m;return a}();x(z)})(function(x){"function"===typeof define?define("_uritemplate",[],function(){return x}):"undefined"!==typeof window?window.UriTemplate=x:global.UriTemplate=
x});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/context.js' */
define("ac/navigator/context",function(){var a;return{setContextFunction:function(b){a=b},getContextFunction:function(){return a}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/module.js' */
define("ac/navigator/module",["ac/navigator/utils","ac/navigator/routes","ac/navigator/context"],function(d,e,f){return{getLocation:function(a){var b=f.getContextFunction();$.isFunction(b)?(context=b(),"object"===$.type(context)?a(context):console.error("navigator context callback did not return an object")):console.error("no context function defined")},go:function(a,b,c){a=a.toLowerCase();b=b||{};b.addonKey||(b.addonKey=c._context.extension.addon_key);if(d.isApiEnabled())if(c=e.getRoutes(),e.hasRoutes()&&
a in c)if("function"===typeof c[a])c[a](b,d.goToUrl);else d.goToUrl(d.buildUrl(c[a],b));else console.error("The URL target "+a+" is not available. Valid targets are: "+Object.keys(c).toString());else console.error("connect navigation api not yet implemented for this product")},reload:function(){window.location.reload()}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/routes.js' */
define("ac/navigator/routes",function(){function f(a){return Object.keys(a).map(function(b){return["ac."+b,a[b]].map(encodeURIComponent).join("\x3d")}).join("\x26")}var b={addonmodule:function(a,b){var d=a&&a.addonKey,e=a&&a.moduleKey;if(!d)throw Error("Missing addonKey parameter in the context.");if(!e)throw Error("Missing moduleKey parameter in the context.");var c=[d,e].map(encodeURIComponent).join("/"),c=AJS.contextPath()+"/plugins/servlet/ac/"+c;void 0!=a.context&&(console.warn("DEPRECATED API - The context field has been deprecated in favor of customData."),
connectHost.trackDeprecatedMethodUsed("AP.navigate-context",{addon_key:d,moduleKey:e}));a=AJS.$.extend({},a.context||{},a.customData||{});a=f(a);b.apply(this,[""!=a?c+"?"+a:c])}};return{hasRoutes:function(){return b&&0!==Object.getOwnPropertyNames(b).length},addRoutes:function(a){b=AJS.$.extend(b,a)},getRoutes:function(){return b}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/utils.js' */
define("ac/navigator/utils",["_uritemplate"],function(d){var c=!1;return{enableApi:function(){c=!0},disableApi:function(){c=!1},isApiEnabled:function(){return c},buildUrl:function(a,b){"/"!==a[0]&&(a="/"+a);return AJS.contextPath()+d.parse(a).expand(b)},goToUrl:function(a){window.location.href=a},hasContext:function(a,b){return a[b]?!0:(AJS.error("Missing "+b+" in navigator context"),!1)},appendQueryParam:function(a,b,c){return a+(-1<a.indexOf("?")?"\x26":"?")+b+"\x3d"+encodeURIComponent(c)}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions-v5', location = 'v5/js/core/connect-host-cookie.js' */
(function(p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.amd?define([],p):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).connectHostCookie=p()})(function(){return function r(k,h,l){function m(b,e){if(!h[b]){if(!k[b]){var f="function"==typeof require&&require;if(!e&&f)return f(b,!0);if(n)return n(b,!0);e=Error("Cannot find module '"+b+"'");throw e.code="MODULE_NOT_FOUND",e;
}e=h[b]={exports:{}};k[b][0].call(e.exports,function(e){var a=k[b][1][e];return m(a?a:e)},e,e.exports,r,k,h,l)}return h[b].exports}for(var n="function"==typeof require&&require,f=0;f<l.length;f++)m(l[f]);return m}({1:[function(r,k,h){function l(a){a=new RegExp("\\b"+a.replace(q,"\\$\x26")+"\x3d((?:[^\\\\;]+|\\\\.)*)(?:;|$)");return(a=document.cookie.match(a))&&a[1].replace(b,"")}function m(a,d,c){var g=l("AJS.conglomerate.cookie"),b=new RegExp("(\\s|\\|)*\\b"+a.replace(q,"\\$\x26")+"\x3d[^|]*[|]*"),
g=(g||"").replace(b,"|");""!==d&&(a=a+"\x3d"+d,4020>g.length+a.length&&(g+="|"+a));g=g.replace(e,"|");c=c||365;a="";d='"'+g.replace(t,'\\"')+'"';c&&(a=new Date,a.setTime(+a+864E5*c),a="; expires\x3d"+a.toGMTString());document.cookie="AJS.conglomerate.cookie\x3d"+d+a+";path\x3d/"}function n(a,d){if(!a||0===a.length)throw Error("addon key must be defined on cookies");if(!d||0===d.length)throw Error("Name must be defined");return a+"$$"+d}function f(a){if(a&&a._context)return a._context.extension.addon_key;
throw Error("addon key not found in callback");}Object.defineProperty(h,"__esModule",{value:!0});var b=/(\\|^"|"$)/g,e=/\|\|+/g,t=/"/g,q=/[.*+?|^$()[\]{\\]/g;h["default"]={save:function(a,d,c){var g=arguments[arguments.length-1],b=n(f(g),a);g._context&&m(b,d,c)},read:function(a,d){d=arguments[arguments.length-1];var c;var b=n(f(d),a);c=(c=l("AJS.conglomerate.cookie"))||"";b=new RegExp(b.replace(q,"\\$\x26")+"\x3d([^|]+)");c=(c=c.match(b))&&c[1];c=null!=c?c:void 0;d(c);return c},erase:function(a){var b=
n(f(arguments[arguments.length-1]),a);m(b,"")}};k.exports=h["default"]},{}]},{},[1])(1)});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions-v5', location = 'v5/js/core/connect-host-history.js' */
(function(C){"object"===typeof exports&&"undefined"!==typeof module?module.exports=C():"function"===typeof define&&define.amd?define([],C):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).connectHostHistory=C()})(function(){return function p(t,c,k){function g(f,b){if(!c[f]){if(!t[f]){var e="function"==typeof require&&require;if(!b&&e)return e(f,!0);if(m)return m(f,!0);b=Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b;
}b=c[f]={exports:{}};t[f][0].call(b.exports,function(a){var b=t[f][1][a];return g(b?b:a)},b,b.exports,p,t,c,k)}return c[f].exports}for(var m="function"==typeof require&&require,q=0;q<k.length;q++)g(k[q]);return g}({1:[function(p,t,c){function k(a,r){(0,e.callConnectHost)(function(h){(0,e.values)(h.getExtensions()).forEach(function(e){e=e.extension.addon_key;var f=new b.Current({url:window.location.href,state:r.state}),f=new b.Route(f);h.broadcastEvent(a,{addon_key:e},f.render(e))})})}function g(){a||
(window.addEventListener("popstate",function(a){var b=(0,e.createEvent)("ap_popstate");b.state=(0,e.unwrapState)(a.state);window.dispatchEvent(b)}),window.addEventListener("ap_popstate",function(a){var b=(0,e.createEvent)("ap_changestate");b.state=a.state;window.dispatchEvent(b);k(f.HISTORY_POPSTATE,a)}),window.addEventListener("ap_pushstate",function(a){var b=(0,e.createEvent)("ap_changestate");b.state=a.state;window.dispatchEvent(b);k(f.HISTORY_PUSHSTATE,a)}),window.addEventListener("ap_replacestate",
function(a){var b=(0,e.createEvent)("ap_changestate");b.state=a.state;window.dispatchEvent(b);k(f.HISTORY_REPLACESTATE,a)}),window.addEventListener("ap_changestate",function(a){k(f.HISTORY_CHANGESTATE,a)}),a=!0)}function m(a){var b=a.state.render();a=a.url.render();window.history.pushState((0,e.wrapState)(b),a.title,a.url)}function q(a){var b=a.state.render();a=a.url.render();window.history.replaceState((0,e.wrapState)(b),a.title,a.url)}Object.defineProperty(c,"__esModule",{value:!0});var f=p("./constants"),
b=p("./models"),e=p("./utils"),a=!1;c["default"]={_registerWindowListeners:function(){g()},back:function(a){a=arguments[arguments.length-1];this.go(-1,a)},forward:function(a){a=arguments[arguments.length-1];this.go(1,a)},go:function(a){arguments[arguments.length-1]._context.extension.options.isFullPage?window.history.go(a):(0,e.log)("History is only available to page modules")},getState:function(a,f){f=arguments[arguments.length-1];var c=f._context.extension.addon_key,h=new b.Current({url:window.location.href,
state:(0,e.unwrapState)(window.history.state)}),c=(new b.Route(h)).render(c);a=a?"string"===typeof a?a:"hash":"hash";if("hash"===a)f(c.hash);else if("all"===a)f(c);else throw Error("invalid type for getState");},pushState:function(a,f){f=arguments[arguments.length-1];var c=f._context.extension.addon_key,h=new b.Current({url:window.location.href,state:(0,e.unwrapState)(window.history.state)}),h=new b.Route(h),c=new b.Change(a,c),c=new b.Route(c);f._context.extension.options.isFullPage?(c.url.isURLEqual(h.url)?
(h.merge(c),q(h)):c.url.isPathnameEqual(h.url)?(h.merge(c),m(h)):m(c),h=(0,e.createEvent)("ap_pushstate"),h.state=(0,e.unwrapState)(window.history.state),window.dispatchEvent(h)):(0,e.log)("History is only available to page modules")},replaceState:function(a,f){f=arguments[arguments.length-1];var c=f._context.extension.addon_key,h=new b.Current({url:window.location.href,state:(0,e.unwrapState)(window.history.state)}),h=new b.Route(h),c=new b.Change(a,c),c=new b.Route(c);f._context.extension.options.isFullPage?
(c.url.isURLEqual(h.url)?(h.merge(c),q(h)):c.url.isPathnameEqual(h.url)?(h.merge(c),q(h)):q(c),h=(0,e.createEvent)("ap_replacestate"),h.state=(0,e.unwrapState)(window.history.state),window.dispatchEvent(h)):(0,e.log)("History is only available to page modules")}};t.exports=c["default"]},{"./constants":7,"./models":8,"./utils":9}],2:[function(p,t,c){(function(k){(function(g){function m(a){throw RangeError(d[a]);}function q(a,d){for(var b=a.length;b--;)a[b]=d(a[b]);return a}function f(a,d){return q(a.split(w),
d).join(".")}function b(a){for(var d=[],b=0,l=a.length,e,c;b<l;)e=a.charCodeAt(b++),55296<=e&&56319>=e&&b<l?(c=a.charCodeAt(b++),56320==(c&64512)?d.push(((e&1023)<<10)+(c&1023)+65536):(d.push(e),b--)):d.push(e);return d}function e(a){return q(a,function(a){var d="";65535<a&&(a-=65536,d+=A(a>>>10&1023|55296),a=56320|a&1023);return d+=A(a)}).join("")}function a(a,d){return a+22+75*(26>a)-((0!=d)<<5)}function h(a,d,b){var l=0;a=b?z(a/700):a>>1;for(a+=z(a/d);455<a;l+=36)a=z(a/35);return z(l+36*a/(a+38))}
function r(a){var d=[],b=a.length,l,c=0,f=128,y=72,g,r,n,k,w;g=a.lastIndexOf("-");0>g&&(g=0);for(r=0;r<g;++r)128<=a.charCodeAt(r)&&m("not-basic"),d.push(a.charCodeAt(r));for(g=0<g?g+1:0;g<b;){r=c;l=1;for(n=36;;n+=36){g>=b&&m("invalid-input");k=a.charCodeAt(g++);k=10>k-48?k-22:26>k-65?k-65:26>k-97?k-97:36;(36<=k||k>z((2147483647-c)/l))&&m("overflow");c+=k*l;w=n<=y?1:n>=y+26?26:n-y;if(k<w)break;k=36-w;l>z(2147483647/k)&&m("overflow");l*=k}l=d.length+1;y=h(c-r,l,0==r);z(c/l)>2147483647-f&&m("overflow");
f+=z(c/l);c%=l;d.splice(c++,0,f)}return e(d)}function x(d){var l,e,c,f,g,k,r,y,n,w=[],u,x,q;d=b(d);u=d.length;l=128;e=0;g=72;for(k=0;k<u;++k)n=d[k],128>n&&w.push(A(n));for((c=f=w.length)&&w.push("-");c<u;){r=2147483647;for(k=0;k<u;++k)n=d[k],n>=l&&n<r&&(r=n);x=c+1;r-l>z((2147483647-e)/x)&&m("overflow");e+=(r-l)*x;l=r;for(k=0;k<u;++k)if(n=d[k],n<l&&2147483647<++e&&m("overflow"),n==l){y=e;for(r=36;;r+=36){n=r<=g?1:r>=g+26?26:r-g;if(y<n)break;q=y-n;y=36-n;w.push(A(a(n+q%y,0)));y=z(q/y)}w.push(A(a(y,
0)));g=h(e,x,c==f);e=0;++c}++e;++l}return w.join("")}var u="object"==typeof c&&c,p="object"==typeof t&&t&&t.exports==u&&t,v="object"==typeof k&&k;if(v.global===v||v.window===v)g=v;var B=/^xn--/,l=/[^ -~]/,w=/\x2E|\u3002|\uFF0E|\uFF61/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input \x3e\x3d 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=Math.floor,A=String.fromCharCode,n,v={version:"1.2.4",ucs2:{decode:b,encode:e},decode:r,encode:x,toASCII:function(a){return f(a,
function(a){return l.test(a)?"xn--"+x(a):a})},toUnicode:function(a){return f(a,function(a){return B.test(a)?r(a.slice(4).toLowerCase()):a})}};if(u&&!u.nodeType)if(p)p.exports=v;else for(n in v)v.hasOwnProperty(n)&&(u[n]=v[n]);else g.punycode=v})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],3:[function(p,t,c){function k(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=
this.auth=this.slashes=this.protocol=null}function g(a,b,d){if(a&&m(a)&&a instanceof k)return a;var l=new k;l.parse(a,b,d);return l}function m(a){return"object"===typeof a&&null!==a}var q=p("punycode");c.parse=g;c.resolve=function(a,b){return g(a,!1,!0).resolve(b)};c.resolveObject=function(a,b){return a?g(a,!1,!0).resolveObject(b):b};c.format=function(a){"string"===typeof a&&(a=g(a));return a instanceof k?a.format():k.prototype.format.call(a)};c.Url=k;var f=/^([a-z0-9.+-]+:)/i,b=/:[0-9]*$/;t="{}|\\^`".split("").concat('\x3c\x3e"` \r\n\t'.split(""));
var e=["'"].concat(t),a=["%","/","?",";","#"].concat(e),h=["/","?","#"],r=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,u={javascript:!0,"javascript:":!0},D={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},B=p("querystring");k.prototype.parse=function(b,c,d){if("string"!==typeof b)throw new TypeError("Parameter 'url' must be a string, not "+typeof b);b=b.trim();var l=f.exec(b);if(l){var l=l[0],k=l.toLowerCase();
this.protocol=k;b=b.substr(l.length)}if(d||l||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var n="//"===b.substr(0,2);!n||l&&D[l]||(b=b.substr(2),this.slashes=!0)}if(!D[l]&&(n||l&&!v[l])){n=-1;for(d=0;d<h.length;d++)l=b.indexOf(h[d]),-1!==l&&(-1===n||l<n)&&(n=l);n=-1===n?b.lastIndexOf("@"):b.lastIndexOf("@",n);-1!==n&&(d=b.slice(0,n),b=b.slice(n+1),this.auth=decodeURIComponent(d));n=-1;for(d=0;d<a.length;d++)l=b.indexOf(a[d]),-1!==l&&(-1===n||l<n)&&(n=l);-1===n&&(n=b.length);this.host=b.slice(0,n);b=b.slice(n);
this.parseHost();this.hostname=this.hostname||"";n="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!n){var g=this.hostname.split(/\./);d=0;for(l=g.length;d<l;d++){var m=g[d];if(m&&!m.match(r)){for(var w="",p=0,t=m.length;p<t;p++)w=127<m.charCodeAt(p)?w+"x":w+m[p];if(!w.match(r)){l=g.slice(0,d);d=g.slice(d+1);if(m=m.match(x))l.push(m[1]),d.unshift(m[2]);d.length&&(b="/"+d.join(".")+b);this.hostname=l.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();
if(!n){m=this.hostname.split(".");g=[];for(d=0;d<m.length;++d)l=m[d],g.push(l.match(/[^A-Za-z0-9_-]/)?"xn--"+q.encode(l):l);this.hostname=g.join(".")}d=this.port?":"+this.port:"";this.host=(this.hostname||"")+d;this.href+=this.host;n&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!u[k])for(d=0,l=e.length;d<l;d++)n=e[d],m=encodeURIComponent(n),m===n&&(m=escape(n)),b=b.split(n).join(m);d=b.indexOf("#");-1!==d&&(this.hash=b.substr(d),b=b.slice(0,d));d=b.indexOf("?");
-1!==d?(this.search=b.substr(d),this.query=b.substr(d+1),c&&(this.query=B.parse(this.query)),b=b.slice(0,d)):c&&(this.search="",this.query={});b&&(this.pathname=b);v[k]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)d=this.pathname||"",l=this.search||"",this.path=d+l;this.href=this.format();return this};k.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",d=this.pathname||"",e=this.hash||
"",c=!1,f="";this.host?c=a+this.host:this.hostname&&(c=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(c+=":"+this.port));this.query&&m(this.query)&&Object.keys(this.query).length&&(f=B.stringify(this.query));a=this.search||f&&"?"+f||"";b&&":"!==b.substr(-1)&&(b+=":");this.slashes||(!b||v[b])&&!1!==c?(c="//"+(c||""),d&&"/"!==d.charAt(0)&&(d="/"+d)):c||(c="");e&&"#"!==e.charAt(0)&&(e="#"+e);a&&"?"!==a.charAt(0)&&(a="?"+a);d=d.replace(/[?#]/g,function(a){return encodeURIComponent(a)});
a=a.replace("#","%23");return b+c+d+a+e};k.prototype.resolve=function(a){return this.resolveObject(g(a,!1,!0)).format()};k.prototype.resolveObject=function(a){if("string"===typeof a){var b=new k;b.parse(a,!1,!0);a=b}var d=new k;Object.keys(this).forEach(function(a){d[a]=this[a]},this);d.hash=a.hash;if(""===a.href)return d.href=d.format(),d;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(d[b]=a[b])}),v[d.protocol]&&d.hostname&&!d.pathname&&(d.path=d.pathname="/"),
d.href=d.format(),d;if(a.protocol&&a.protocol!==d.protocol){if(!v[a.protocol])return Object.keys(a).forEach(function(b){d[b]=a[b]}),d.href=d.format(),d;d.protocol=a.protocol;if(a.host||D[a.protocol])d.pathname=a.pathname;else{for(var e=(a.pathname||"").split("/");e.length&&!(a.host=e.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==e[0]&&e.unshift("");2>e.length&&e.unshift("");d.pathname=e.join("/")}d.search=a.search;d.query=a.query;d.host=a.host||"";d.auth=a.auth;d.hostname=a.hostname||
a.host;d.port=a.port;if(d.pathname||d.search)d.path=(d.pathname||"")+(d.search||"");d.slashes=d.slashes||a.slashes;d.href=d.format();return d}var b=d.pathname&&"/"===d.pathname.charAt(0),c=a.host||a.pathname&&"/"===a.pathname.charAt(0),f=b=c||b||d.host&&a.pathname,h=d.pathname&&d.pathname.split("/")||[],e=a.pathname&&a.pathname.split("/")||[],g=d.protocol&&!v[d.protocol];g&&(d.hostname="",d.port=null,d.host&&(""===h[0]?h[0]=d.host:h.unshift(d.host)),d.host="",a.protocol&&(a.hostname=null,a.port=null,
a.host&&(""===e[0]?e[0]=a.host:e.unshift(a.host)),a.host=null),b=b&&(""===e[0]||""===h[0]));if(c)d.host=a.host||""===a.host?a.host:d.host,d.hostname=a.hostname||""===a.hostname?a.hostname:d.hostname,d.search=a.search,d.query=a.query,h=e;else if(e.length)h||(h=[]),h.pop(),h=h.concat(e),d.search=a.search,d.query=a.query;else if(null!=a.search){g&&(d.hostname=d.host=h.shift(),g=d.host&&0<d.host.indexOf("@")?d.host.split("@"):!1)&&(d.auth=g.shift(),d.host=d.hostname=g.shift());d.search=a.search;d.query=
a.query;if(null!==d.pathname||null!==d.search)d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"");d.href=d.format();return d}if(!h.length)return d.pathname=null,d.path=d.search?"/"+d.search:null,d.href=d.format(),d;for(var c=h.slice(-1)[0],e=(d.host||a.host)&&("."===c||".."===c)||""===c,l=0,r=h.length;0<=r;r--)c=h[r],"."==c?h.splice(r,1):".."===c?(h.splice(r,1),l++):l&&(h.splice(r,1),l--);if(!b&&!f)for(;l--;l)h.unshift("..");!b||""===h[0]||h[0]&&"/"===h[0].charAt(0)||h.unshift("");e&&"/"!==h.join("/").substr(-1)&&
h.push("");f=""===h[0]||h[0]&&"/"===h[0].charAt(0);g&&(d.hostname=d.host=f?"":h.length?h.shift():"",g=d.host&&0<d.host.indexOf("@")?d.host.split("@"):!1)&&(d.auth=g.shift(),d.host=d.hostname=g.shift());(b=b||d.host&&h.length)&&!f&&h.unshift("");h.length?d.pathname=h.join("/"):(d.pathname=null,d.path=null);if(null!==d.pathname||null!==d.search)d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"");d.auth=a.auth||d.auth;d.slashes=d.slashes||a.slashes;d.href=d.format();return d};k.prototype.parseHost=
function(){var a=this.host,e=b.exec(a);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),a=a.substr(0,a.length-e.length));a&&(this.hostname=a)}},{punycode:2,querystring:6}],4:[function(p,t,c){t.exports=function(c,m,q,f){q=q||"\x3d";var b={};if("string"!==typeof c||0===c.length)return b;var e=/\+/g;c=c.split(m||"\x26");m=1E3;f&&"number"===typeof f.maxKeys&&(m=f.maxKeys);f=c.length;0<m&&f>m&&(f=m);for(m=0;m<f;++m){var a=c[m].replace(e,"%20"),h=a.indexOf(q),g;0<=h?(g=a.substr(0,h),a=a.substr(h+1)):(g=a,a=
"");g=decodeURIComponent(g);a=decodeURIComponent(a);Object.prototype.hasOwnProperty.call(b,g)?k(b[g])?b[g].push(a):b[g]=[b[g],a]:b[g]=a}return b};var k=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)}},{}],5:[function(p,t,c){function k(c,b){if(c.map)return c.map(b);for(var e=[],a=0;a<c.length;a++)e.push(b(c[a],a));return e}var g=function(c){switch(typeof c){case "string":return c;case "boolean":return c?"true":"false";case "number":return isFinite(c)?c:"";default:return""}};
t.exports=function(c,b,e,a){b=b||"\x26";e=e||"\x3d";null===c&&(c=void 0);return"object"===typeof c?k(q(c),function(a){var h=encodeURIComponent(g(a))+e;return m(c[a])?k(c[a],function(a){return h+encodeURIComponent(g(a))}).join(b):h+encodeURIComponent(g(c[a]))}).join(b):a?encodeURIComponent(g(a))+e+encodeURIComponent(g(c)):""};var m=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)},q=Object.keys||function(c){var b=[],e;for(e in c)Object.prototype.hasOwnProperty.call(c,
e)&&b.push(e);return b}},{}],6:[function(p,t,c){c.decode=c.parse=p("./decode");c.encode=c.stringify=p("./encode")},{"./decode":4,"./encode":5}],7:[function(p,t,c){Object.defineProperty(c,"__esModule",{value:!0});c.STATE_AP_KEY="_AP";c.QUERY_KEY_PREFIX="ac";c.QUERY_KEY_DELIMITER=".";c.ANCHOR_PREFIX="!";c.HISTORY_POPSTATE="history_popstate";c.HISTORY_PUSHSTATE="history_pushstate";c.HISTORY_REPLACESTATE="history_replacestate";c.HISTORY_CHANGESTATE="history_changestate"},{}],8:[function(p,t,c){function k(a){a=
a||{};if(!a.key)throw Error("missing key for addon");this.key=a.key;this.state=a.state;this.query=a.query||{};return this}function g(a){a=a||{};a.models=a.models||[];a.models instanceof Array||(a.models=[a.models]);a.models=a.models.map(function(a){return a instanceof k?a:new k(a)});this.models=a.models;return this}function m(a){a=a||{};a.addons=a.addons||[];a.addons instanceof g||(a.addons=new g(a.addons));this.addons=a.addons;return this}function q(a){a=a||{};a.addons=a.addons||[];a.global=a.global||
[];a.parsed instanceof b["default"].Url||(a.parsed=b["default"].parse(a.url));a.addons instanceof g||(a.addons=new g(a.addons));this.parsed=a.parsed;this.addons=a.addons;this.global=a.global;this.title=a.title||window.document.title}function f(a){a=a||{};if(!a.url)throw Error("missing url option");a.url instanceof q||(a.url=new q(a.url));if(!a.state)throw Error("missing state option");a.state instanceof m||(a.state=new m(a.state));this.url=a.url;this.state=a.state}Object.defineProperty(c,"__esModule",
{value:!0});c.Addon=k;c.Addons=g;c.Current=function(a){a=a||{};if(!a.url)throw Error("missing url");var c=b["default"].parse(a.url),f=new g,c=(0,e.parseQuery)(c.query).map(e.stripAddonQueryPrefix),x=(0,e.normalizeQueryByAddons)(c),c=x.filter(function(a){return a.key}),x=x.filter(function(a){return!a.key});c.forEach(function(a){a=new k(a);f.add(a)});this.url=new q({url:a.url,addons:f,global:x});this.state=new m(a.state);return this};c.Change=function(a,c){var h=typeof a,f=b["default"].parse(window.location.href),
u={},p,t;if("string"===h)u.protocol=f.protocol,u.slashes=f.slashes,u.hostname=f.hostname,u.pathname=f.pathname,u.port=f.port,u.search=f.search,u.query=f.query,u.hash=(0,e.addHash)((0,e.addHashPrefix)(a));else if("object"===h)t=a.href?b["default"].parse(a.href):f,u.protocol=f.protocol,u.slashes=f.slashes,u.hostname=f.hostname,u.port=f.port,u.pathname=t.pathname||f.pathname,u.search=null,u.query=null,u.hash=a.hash?(0,e.addHash)((0,e.addHashPrefix)(a.hash)):null,p=a.state,t=a.query;else throw Error("invalid option type");
f=new g;a=new g;p&&(p=new k({key:c,state:p}),f.add(p));t&&(c=new k({key:c,query:t}),a.add(c));c=new m({addons:f});u=new q({url:b["default"].format(u),addons:a});this.state=c;this.url=u;return this};c.State=m;c.URL=q;c.Route=f;var b=(t=p("url"))&&t.__esModule?t:{"default":t},e=p("./utils");g.prototype.add=function(a){this.models.push(a)};g.prototype.remove=function(a){this.models.splice(this.models.indexOf(a),1)};g.prototype.find=function(a){return(0,e.find)(this.models,function(b){return b.key===
a})};g.prototype.merge=function(a){var b=this.find(a.key);b&&this.remove(b);this.add(a)};m.prototype.merge=function(a){var b=this;a.addons.models.forEach(function(a){b.addons.merge(a)})};m.prototype.render=function(){return(0,e.deepCopy)(this)};q.prototype.isURLEqual=function(a){return this.render().url===a.render().url};q.prototype.isPathnameEqual=function(a){var b=this.parsed.slashes===a.parsed.slashes,c=this.parsed.hostname===a.parsed.hostname,e=this.parsed.pathname===a.parsed.pathname;return this.parsed.protocol===
a.parsed.protocol&&b&&c&&e};q.prototype.merge=function(a){var b=this;b.parsed.hash=a.parsed.hash;a.addons.models.forEach(function(a){b.addons.merge(a)})};q.prototype.render=function(){var a=(0,e.deepCopy)(this),c=a.parsed,f=(0,e.denormalizeQueryByAddons)(this.addons.models),g=(0,e.denormalizeQueryByAddons)(this.global),f=f.concat(g).map(e.addAddonQueryPrefix),f=(0,e.formatQuery)(f);c.query=f;c.search=c.query?"?"+c.query:null;a.url=b["default"].format(c);return a};f.prototype.merge=function(a){this.url.merge(a.url);
this.state.merge(a.state)};f.prototype.render=function(a){return(0,e.deepCopy)({key:a,hash:(0,e.stripHashPrefix)((0,e.stripHash)(this.url.parsed.hash)),query:this.url.addons.find(a)?this.url.addons.find(a).query:null,title:this.url.title,href:this.url.parsed.href,state:this.state.addons.find(a)?this.state.addons.find(a).state:null})}},{"./utils":9,url:3}],9:[function(p,t,c){function k(b,c,a){c in b?Object.defineProperty(b,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):b[c]=a;return b}function g(b){return void 0===
b||null===b||""===b?"":b.toString().replace(new RegExp("^"+f.ANCHOR_PREFIX),"")}function m(b){b=b?b.split("\x3d"):[];return 2===b.length?{key:b[0],value:b[1]}:null}function q(b){return"key"in b&&"value"in b?[b.key,"\x3d",b.value].join(""):null}Object.defineProperty(c,"__esModule",{value:!0});c.find=function(b,c){for(var a=0,e=b.length;a<e;a+=1)if(c(b[a]))return b[a]};c.values=function(b){var c=[];if(!b)return c;for(var a in b)c.push(b[a]);return c};c.stripHash=function(b){return b?b.slice(b.search("#")+
1):null};c.stripHashPrefix=g;c.addHash=function(b){return"#"+b};c.addHashPrefix=function(b){if(void 0===b||null===b)throw"You must supply text to prefix";return f.ANCHOR_PREFIX+g(b)};c.splitQueryParam=m;c.joinQueryParam=q;c.parseQuery=function(b){return(b?b.split("\x26"):[]).map(function(b){return m(b)}).filter(function(b){return b})};c.formatQuery=function(b){b=b.map(function(b){return q(b)}).filter(function(b){return b});return b.length?b.join("\x26"):null};c.stripAddonQueryPrefix=function(b){var c=
b.key?b.key.split(f.QUERY_KEY_DELIMITER):[],a=f.QUERY_KEY_PREFIX;return 3<=c.length&&a===c[0]?(a=c.slice(1,c.length-1).join(f.QUERY_KEY_DELIMITER),c=c.slice(c.length-1).join(f.QUERY_KEY_DELIMITER),{addonKey:a,key:c,value:b.value}):b};c.addAddonQueryPrefix=function(b){var c=f.QUERY_KEY_PREFIX;return"addonKey"in b&&b.addonKey?{key:[c,b.addonKey,b.key].join(f.QUERY_KEY_DELIMITER),value:b.value}:b};c.normalizeQueryByAddons=function(b){var c=[];b.forEach(function(a){var b=a.key,e=a.value,f=a.addonKey;
(a=c.filter(function(a){return a.key===f}))&&a.length?a[0].query[b]=e:c.push({key:f,query:k({},b,e)})});return c};c.denormalizeQueryByAddons=function(b){var c=[];b.forEach(function(a){var b=a.key;Object.keys(a.query).forEach(function(e){c.push({addonKey:b,key:e,value:a.query[e]})})});return c};c.deepCopy=function(b){return JSON.parse(JSON.stringify(b))};c.wrapState=function(b){var c={};c[f.STATE_AP_KEY]=b;return c};c.unwrapState=function(b){return b&&b[f.STATE_AP_KEY]?b[f.STATE_AP_KEY]:null};c.createEvent=
function(b){if("function"===typeof Event)var c=new Event(b);else c=document.createEvent("Event"),c.initEvent(b,!1,!1);return c};c.callConnectHost=function(b){p&&p.amd?p(["connect-host"],function(c){b(c)}):b(window.connectHost)};c.log=function(b,c){c||(c="log");console[c].call(null,"Atlassian Connect JS History: ",b)};var f=p("./constants")},{"./constants":7}]},{},[1])(1)});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions-v5', location = 'v5/js/core/connect-host-request.js' */
(function(q){"object"===typeof exports&&"undefined"!==typeof module?module.exports=q():"function"===typeof define&&define.amd?define([],q):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).connectHostRequest=q()})(function(){return function t(n,h,l){function m(d,f){if(!h[d]){if(!n[d]){var k="function"==typeof require&&require;if(!f&&k)return k(d,!0);if(p)return p(d,!0);f=Error("Cannot find module '"+d+"'");throw f.code="MODULE_NOT_FOUND",f;
}f=h[d]={exports:{}};n[d][0].call(f.exports,function(a){var e=n[d][1][a];return m(e?e:a)},f,f.exports,t,n,h,l)}return h[d].exports}for(var p="function"==typeof require&&require,k=0;k<l.length;k++)m(l[k]);return m}({1:[function(t,n,h){function l(a){return a.replace(/(http[s]?:\/\/[^"]*?&jwt=[A-Za-z0-9-_=]+\.[A-Za-z0-9-_=]+\.?[A-Za-z0-9-_.+/=]*.*?)\\"/gi,'\\"')}function m(a){var e={headers:{}};d.forEach(function(c,d){e[c]=a[c];if("responseText"===c)try{JSON.parse(a[c]),e[c]=l(a[c])}catch(v){}},this);
f.forEach(function(c,d){e.headers[c]=a.getResponseHeader(c)},this);return e}function p(a,e,c){c._isBlob&&c.blob&&c.name?a.append(e,c.blob,c.name):a.append(e,c);return a}function k(a){a.contentType=!1;a.processData=!1;if(a.data&&"object"===typeof a.data){var e=new FormData;Object.keys(a.data).forEach(function(c){var d=a.data[c];Array.isArray(d)?d.forEach(function(a,b){e=p(e,c+"["+b+"]",a)}):e=p(e,c,d)});a.data=e;a.headers["X-Atlassian-Token"]="no-check"}else throw Error("For a Multipart request, data must to be an Object");
return a}Object.defineProperty(h,"__esModule",{value:!0});var d=["status","statusText","responseText"],f=["Content-Type","ETag"],u=["If-Match","If-None-Match"];h.stripJWTUrls=l;h["default"]={request:function(a,e){function c(a,b,c){e(c,m(a),c)}var d=AJS.contextPath(),f={};e=arguments[arguments.length-1];"string"===typeof a&&(a={url:a});d+=a.url;d=d.replace(/\/\.\.\//ig,"");a.headers=a.headers||{};Object.getOwnPropertyNames(a.headers).forEach(function(b){f[b.toLowerCase()]=a.headers[b]},this);var b=
{url:d,type:a.type||"GET",data:a.data,dataType:"text",contentType:a.contentType,cache:"undefined"!==typeof a.cache?!!a.cache:void 0,headers:{Accept:f.accept||"*/*","AP-Client-Key":e._context.extension.addon_key}};"multipart/form-data"===b.contentType&&(b=k(b));b.data&&"object"===typeof b.data&&"GET"===b.type.toUpperCase()&&Object.keys(b.data).forEach(function(a){b.url+=(0<=b.url.indexOf("?")?"\x26":"?")+encodeURIComponent(a)+"\x3d"+encodeURIComponent(b.data[a])});!0===a.experimental&&(b.headers["X-ExperimentalApi"]=
"opt-in");u.forEach(function(a,c){f[a.toLowerCase()]&&(b.headers[a]=f[a.toLowerCase()])},this);b.cache||(b.url+=(0<=b.url.indexOf("?")?"\x26":"?")+"_r\x3d"+(new Date).getTime());var g=new XMLHttpRequest;g.open(b.type,b.url,!0);b.contentType&&(b.headers["Content-type"]=b.contentType);Object.getOwnPropertyNames(b.headers).forEach(function(a){g.setRequestHeader(a,b.headers[a])});g.onload=function(){if(200<=this.status&&300>this.status){var a=g.responseText;e(!1,m(g),a)}else c(g,g.statusText,g.responseText)};
g.onerror=function(){c(g,g.statusText,g.responseText)};try{g.send(b.data||null)}catch(r){c(g,void 0,r),console.error("ACJS Request: ",r.message,r)}}}},{}]},{},[1])(1)});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-user-v5', location = 'v5/js/iframe/host/user.js' */
define("ac/user",function(){return{getUser:function(a){var b=a._context.extension.options.apiMigrations;if(b&&b.gdpr)throw Error("ACJS: Deprecated API usage while in GDPR mode.");var b=a._context.extension.options.user,c=AJS.Meta.get("remote-user-fullname")||AJS.Meta.get("current-user-fullname")||null;a({fullName:c,id:b.uid,key:b.ukey})},getCurrentUser:function(a){var b=AJS.Meta.get("atlassian-account-id")||null;a({atlassianAccountId:b})},getTimeZone:function(a){a(a._context.extension.options.user.timeZone)}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:content-resolver-v5', location = 'v5/js/iframe/host/content-resolver.js' */
(function(){function g(a,b){return AJS.contextPath()+"/plugins/servlet/ac/"+encodeURIComponent(a)+"/"+encodeURIComponent(b)}function h(a){var b={};_.keys(a).forEach(function(d){b["ac."+d]=a[d]});return b}function k(a,b){var d={};_.keys(a).forEach(function(c){b(c,a[c])&&(d[c]=a[c])});return d}function f(a){a=a.getResponseHeader("Date");a=Math.round(Date.parse(a)/1E3);var b=Math.round(Date.now()/1E3);isNaN(a)||(a=Math.abs(b-a),connectHost.setJwtClockSkew(a+60))}function e(a,b){return AJS.$.Deferred(function(d){var c=
{"plugin-key":a.addon_key,"product-context":JSON.stringify(a.options.productContext||{}),key:a.key,width:a.width||"100%",height:a.height||"100%",classifier:a.classifier||"raw"};a.options.contentClassifier&&(c.classifier=[a.options.contentClassifier,c.classifier]);var e=k(a.options.customData||{},function(a,b){return _.isObject(b)?!1:"string"===typeof b||b instanceof String?255>b.length:!0});AJS.$.ajax(g(a.addon_key,a.key),{dataType:"json"===a.classifier?"json":"html",data:AJS.$.extend({},c,h(e)),
type:"POST"}).then(function(a,c,e){f(e);b?d.resolve(window._AP._convertConnectOptions(a)):require(["ac/create"],function(b){d.resolve(window._AP._convertConnectOptions(a))})}).fail(function(b,c,e){f(b);d.reject({addon_key:a.addon_key,key:a.key,options:a.options},{text:"Unable to retrieve addon module URL. Please check your specified module key."})})}).promise()}define("ac/content-resolver",function(){return{resolveByExtension:e}});connectHost.registerContentResolver.resolveByExtension(e)})();;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-context-v5', location = 'v5/js/context/main.js' */
define("ac/context",["ac/content-resolver"],function(k){function d(a){if(a.id&&1<a.id.length)return a.id;throw Error("ACJS: cannot generate cache key for extension");}function g(a,b){var e={};if(b=c[b].context.license)e.license=b;a.confluence&&(e.confluence=a.confluence);a.jira&&(e.jira=a.jira);return e}function l(a){a=3E4+a;var b=Date.now();return a<b}function h(a,b){return{license:a.license,cachedAt:Date.now(),contextJwt:b}}function f(a){var b=d(a);if(!c[b]||!c[b].promise&&c[b].context&&l(c[b].context.cachedAt))a.classifier=
"json",c[b]={promise:k.resolveByExtension(a,!0).done(function(a){c[b].context=h(a.options.structuredContext,a.options.contextJwt)})}}var c={};window.connectHost.onIframeEstablished(function(a){var b=a.extension.options;b.contextJwt&&connectHost.isJwtExpired(b.contextJwt,!0)||!b.structuredContext?f(a.extension):(b=d(a.extension),c[b]={context:h(a.extension.options.structuredContext,a.extension.options.contextJwt)})});window.connectHost.onIframeUnload(function(a){delete c[d(a.extension)]});return{getToken:function(a){var b=
d(a._context.extension);f(a._context.extension);if(!a._context.extension.options.contextJwt||2>a._context.extension.options.contextJwt.length)throw Error("ACJS: Cannot get token. Add-on does not support JWT authentication");c[b].promise?c[b].promise.done(function(b){try{a(b.options.contextJwt)}catch(m){}}.bind(this)).fail(function(){console.error("ACJS: content resolver failed to get context jwt token")}).always(function(){delete c[b].promise}.bind(this)):a(c[b].context.contextJwt)},getContext:function(a){var b=
d(a._context.extension);f(a._context.extension);c[b].promise?c[b].promise.done(function(c){try{a(g(c.options.structuredContext,b))}catch(m){}}.bind(this)).fail(function(){console.error("ACJS: content resolver failed to get context")}).always(function(){delete c[b].promise}.bind(this)):a(g(a._context.extension.options.structuredContext,b))}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:module-loader-v5', location = 'v5/js/iframe/host/module-loader.js' */
connectHost.defineModule("cookie",connectHostCookie);connectHost.defineModule("history",connectHostHistory);connectHost.defineModule(connectHostRequest.default);connectHost.defineModule("navigator",require("ac/navigator/module"));connectHost.defineModule("user",require("ac/user"));connectHost.defineModule("context",require("ac/context"));;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-insertion-v5', location = 'v5/js/iframe/combined/iframe-insertion.js' */
(function(){function h(a){var c;if("string"===typeof a&&1<a.length)try{c=JSON.parse(a)}catch(b){console.error("ACJS: failed to decode context",a)}"object"!==typeof c&&(c={});return c}function l(a,c){if("number"!==typeof a)return window.top;c=c||window;for(var b=0;b<a;b++)c=c.parent;return c}function g(a){function c(){var a=document.getElementById(b.containerId);window._AP.addonAttemptCounter[b.containerId]++;if(a)if(delete window._AP.addonAttemptCounter[b.containerId],window._AP.isSubHost){a.appendChild(d);
var a=d.contentDocument,f="(function(){ var w \x3d window; for (var i\x3d0; i\x3c"+b.options.hostFrameOffset+"; i++){w \x3d w.parent; } w.postMessage("+JSON.stringify({type:"set_inner_iframe_url",iframeData:b})+', "*");}());';a.open();a.write("\x3cscript\x3e"+f+"\x3c/script\x3e");a.close()}else{if(f=a.querySelector(".ap-iframe-container"))f.parentNode.removeChild(f),AJS.log&&AJS.log("AJS: duplicate iframe removed",b,a);d.appendTo(a);d.data("addon-key",b.addon_key);d.data("key",b.key)}else 10>=window._AP.addonAttemptCounter[b.containerId]&&
m(c)}window._AP.isSubHost=l(a.hostFrameOffset)!==window;var b=window._AP._convertConnectOptions(a),d;window._AP.isSubHost?d=window._AP._createSub(b):(n({addon_key:b.addon_key,key:b.key}).forEach(function(a){if(a.extension.options.uniqueKey===b.options.uniqueKey){var c=document.getElementById(a.extension_id);e().destroy(a.extension_id);c&&AJS.$(c).closest(".ap-iframe-container").remove()}},this),d=e().create(b));window._AP.addonAttemptCounter[b.containerId]=0;c()}var m=function(){return window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,50)}}(),e=function(){return window.connectHost||window.AP},n=function(a){return e().getExtensions(a).filter(function(a){return!!document.getElementById(a.extension_id)})},k=function(a,c,b){try{var d=require(a);c(d)}catch(p){0>=b?(console.error("Unable to load module: "+a),c(null)):setTimeout(function(){k(a,c,b-1)},500)}};window._AP=window._AP||{};window._AP.addonAttemptCounter=window._AP.addonAttemptCounter||
{};window._AP._convertConnectOptions=function(a){var c={url:a.url,ns:a.uniqueKey,addon_key:a.addon_key,key:a.key,containerId:"embedded-"+a.uniqueKey,options:{history:{state:""},uniqueKey:a.uniqueKey,origin:a.origin,hostOrigin:a.hostOrigin,isFullPage:"1"===a.general,autoresize:!0,user:{timeZone:a.timeZone,fullName:a.fullName,uid:a.uid,ukey:a.ukey},productContext:h(a.productCtx),structuredContext:h(a.structuredContext),contextJwt:a.contextJwt,contextPath:a.cp,width:a.w||a.width,height:a.h||a.height,
targets:{env:{resize:"both"}}}};"string"===typeof a.contentClassifier&&(c.options.contentClassifier=a.contentClassifier);"number"===typeof a.hostFrameOffset&&(c.options.hostFrameOffset=a.hostFrameOffset+1);window._AP.isSubHost||(c.options.history.state=window.location.hash?window.location.hash.substr(2):"");return c};window._AP._createSub=function(a){var c=document.createElement("iframe"),b=e().subCreate(a);b.width=a.options.width||"";b.height=a.options.height||"";b.style="border:0;";b["class"]="ap-iframe";
b["data-addon-key"]=a.addon_key;b["data-key"]=a.key;delete b.src;Object.getOwnPropertyNames(b).forEach(function(a){c.setAttribute(a,b[a])});return c};window._AP.appendConnectAddon=function(a){var c=!1;try{window.top.karma&&(c=!0)}catch(d){}if(window===window.top||c)/com\.atlassian\.(jira|confluence)\.emcee(;|$|\.local|\.staging)/g.test(a.addon_key)?k("ac/marketplace",function(b){b&&e().defineModule("marketplace",b);g(a)},20):g(a);else{var b=function(c){c.source===window.top&&c.data&&void 0!==c.data.hostFrameOffset&&
(window.removeEventListener("message",b),a.hostFrameOffset=c.data.hostFrameOffset,g(a))};window.addEventListener("message",b);window.top.postMessage({type:"get_host_offset"},"*")}}})();;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-host-js-v5', location = 'v5/js/iframe/host/util.js' */
_AP.util={escapeSelector:function(a){if(!a)throw Error("No selector to escape");return a.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$\x26")}};;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-host-js-v5', location = 'v5/js/iframe/host/main.js' */
_AP.addonAttemptCounter={};connectHost.onIframeEstablished(function(a){a.$el.closest(".ap-iframe-container").addClass("iframe-init")});AJS.$(window).on("blur",function(){var a=AJS.LayerManager.global.getTopLayer();if(a&&a.hasClass("aui-dialog2"))return!1;AJS.$(document.activeElement).hasClass("ap-iframe")&&document.documentElement.click()});define("ac/create",function(){return{appendConnectAddon:function(a){return window._AP.appendConnectAddon(a)}}});
window.addEventListener("message",function(a){"set_inner_iframe_url"===a.data.type&&(a.source.location=a.data.iframeData.url)});connectHost.setExtensionConfigurationOptions("crev",window._AP.allJsVersion);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-workflow-post-function-v5', location = 'v5/js/jira/workflow-post-function/workflow-post-function.js' */
define("ac/jira/workflow-post-function",["ac/jira/workflow-post-function-utils"],function(a){var d=function(){};connectHost.onIframeEstablished(function(b){if(a.isOnWorkflowPostFunctionPage()&&a.isPostFunctionExtension(b.extension)){var c=a.getPostFunctionId();"string"===typeof c&&a.registerSubmissionButton(c,function(a){d=a;connectHost.broadcastEvent("jira_workflow_post_function_submit",{id:b.extension.id})})}});return{getWorkflowConfiguration:function(b){if(!a.isOnWorkflowPostFunctionPage()||"function"!==
typeof b)return!1;var c=a.postFunctionConfigInput(b._context.extension.options.productContext["postFunction.id"]);b&&b(c)},_submitWorkflowConfigurationResponse:function(b,a){d(b)}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-workflow-post-function-v5', location = 'v5/js/jira/workflow-post-function/workflow-post-function-utils.js' */
(function(c,e){e("ac/jira/workflow-post-function-utils",function(){function f(a,b){a=c("#postFunction-config-"+a);b&&a.val(b);return a.val()}function d(){return 0<c("input[name\x3d'postFunction.id']").length}return{postFunctionConfigInput:f,isOnWorkflowPostFunctionPage:d,registerSubmissionButton:function(a,b,e){if(!d())throw"Not on a workflow configuration page";var g=!1;c(document).delegate("#add_submit, #update_submit","click",function(d){if(!g||e)d.preventDefault(),b(function(b){b.valid&&(f(a,
b.value),g=!0,c(d.target).click())})})},getPostFunctionId:function(){return c("input[name\x3d'postFunction.id']").val()},isPostFunctionExtension:function(a){return a&&a.options&&a.options.productContext&&(a=a.options.productContext,a["postFunction.id"]&&5<a["postFunction.id"].length)?!0:!1}}})})(AJS.$,define);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-date-picker-widget-v5', location = 'v5/js/jira/date-picker/date-picker.js' */
(function(e,b){b("ac/jira/date-picker",["ac/jira/date-picker-utils"],function(b){var d={_options:function(a,c){a.onSelect=function(a,b){connectHost.broadcastEvent("jira_date_selected",{id:c._context.extension_id},{isoDate:a.date.toISOString(),date:b});a.dateClicked&&a.callCloseHandler()}.bind(this);var b=document.getElementById(c._context.extension_id).getBoundingClientRect();a.position=a.position||{top:0,left:0};a.position.top+=b.top;a.position.left+=b.left;return a},openDatePicker:function(a,c){a=
d._options(a,c);b.show(a);return a}};return d})})(AJS.$,define);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-date-picker-widget-v5', location = 'v5/js/jira/date-picker/date-picker-utils.js' */
define("ac/jira/date-picker-utils",["underscore"],function(c){var d=WRM.data.claim("com.atlassian.plugins.atlassian-connect-plugin:jira-date-picker-widget.config");return{show:function(a){var b=window.calendar,e=Calendar._FD?void 0:1;b&&b.hide();a=a||{};a=c.extend(a,d,{singleClick:"true",inputField:{}});window.calendar=b=new Calendar(a.useISO8601WeekNumbers?1:e,a.date,(new Date).toISOString(),a.onSelect||function(){},function(a){a.hide();a.destroy()});b.weekNumbers=!0;b.showsOtherMonths=!1;b.params=
a;b.showsTime=a.showTime;b.time24="24"==a.timeFormat;b.setDateFormat(a.showTime?a.dateTimeFormat:a.dateFormat);b.create();b.refresh();b.showAt(a.position.left||0,a.position.top||0);return b}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-events-v5', location = 'v5/js/jira/events/events.js' */
(function(d,c){c("ac/jira/events",function(){return{refreshIssuePage:function(){try{JIRA.trigger(JIRA.Events.REFRESH_ISSUE_PAGE,[JIRA.Issue.getIssueId(),{mergeIntoCurrent:!1}])}catch(a){throw Error("Failed to refresh the issue page");}},updateIssueGlance:function(a,b){try{JIRA.trigger(JIRA.Events.UPDATE_ISSUE_GLANCE,[JIRA.Issue.getIssueId(),{addonKey:b._context.extension.addon_key,moduleKey:b._context.extension.key,data:a}])}catch(e){throw Error("Failed to update issue glance");}}}})})(AJS.$,define);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-create-issue-dialog-v5', location = 'v5/js/jira/issue/issue.js' */
define("ac/jira/issue",function(){return{openCreateIssueDialog:function(e,b){WRM.require(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"]).then(function(){if(!JIRA||!JIRA.Forms||!JIRA.Forms.createCreateIssueForm)return console&&console.warn&&console.warn("Connect: Create issue form is not available"),!1;var a=JIRA.Forms.createCreateIssueForm(e).asDialog({trigger:document.createElement("a"),id:"create-issue-dialog",windowTitle:AJS.I18n.getText("admin.issue.operations.create")});
a.show();var c=[];JIRA.one("QuickCreateIssue.sessionComplete",function(b,a){var d;c=[];for(d in a)c.push(a[d].createdIssueDetails)});a.bind("Dialog.hide",function(){$.isFunction(b)&&b.call({},c)})}.bind(this))}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-dashboard-item-v5', location = 'v5/js/jira/dashboard-item/dashboard-item.js' */
define("ac/jira/dashboard-item",[],function(){function c(a,b){a=AJS.$(a).parents(".gadget-inline");if(0<a.length){a=a.first();var c=a.attr("id");new AG.InlineGadgetAPI(a);var d=AG.DashboardManager.getLayout(),e=d.getGadgets().filter(function(a){return"gadget-".concat(a.getId())==c});b&&a.find("iframe").css("height",b);e[0].resize();d.refresh()}}connectHost.onIframeEstablished(function(a){c(a.$el)});AJS.$(document).ready(function(){AJS.$("body").on("resized",".ap-container",function(a,b){c(a.target,
b.height)})});return{setDashboardItemTitle:function(a,b){b=document.getElementById(b._context.extension_id);$(b).parents(".gadget-container").find("h3.dashboard-item-title").text(a)},isDashboardItemEditable:function(a){var b=document.getElementById(a._context.extension_id),b=$(b).parents(".gadget-container").find("li.configure");a(0!==b.length)}}});
define("atlassian-connect/connect-dashboard-item",function(){return function(){return{render:function(){},renderEdit:function(c){c=c.find("iframe");1===c.parent().length&&connectHost.broadcastEvent("jira_dashboard_item_edit",{id:c.attr("id")})}}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-navigator-routes-v5', location = 'v5/js/jira/navigator/routes.js' */
(function(f,b){b(["ac/navigator/routes","ac/navigator/utils"],function(b,c){var d=c.hasContext,e=c.appendQueryParam;b.addRoutes({dashboard:"/secure/Dashboard.jspa?selectPageId\x3d{dashboardId}",issue:"/browse/{issueKey}",userprofile:function(a,b){a=d(a,"userAccountId")?e("/secure/admin/user/ViewProfile.jspa","accountId",a.userAccountId):d(a,"username")?e("/secure/admin/user/ViewProfile.jspa","username",a.username):"/secure/admin/user/ViewProfile.jspa?name\x3d";b(a)},projectadminsummary:"/plugins/servlet/project-config/{projectKey}/summary",
projectadmintabpanel:"/plugins/servlet/ac/{addonKey}/{adminPageKey}?project.key\x3d{projectKey}\x26project.id\x3d{projectId}"});c.enableApi()})})(AJS.$,require);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-product-extensions-v5', location = 'v5/js/jira/main.js' */
define("ac/jira",["ac/jira/events","ac/jira/workflow-post-function","ac/jira/dashboard-item","ac/jira/date-picker","ac/jira/issue"],function(a,b,c,d,e){return{refreshIssuePage:a.refreshIssuePage,updateIssueGlance:a.updateIssueGlance,getWorkflowConfiguration:b.getWorkflowConfiguration,_submitWorkflowConfigurationResponse:b._submitWorkflowConfigurationResponse,isDashboardItemEditable:c.isDashboardItemEditable,openCreateIssueDialog:e.openCreateIssueDialog,setDashboardItemTitle:c.setDashboardItemTitle,
openDatePicker:d.openDatePicker}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-dropdown-list-v5', location = 'v5/js/jira/dropdown-list/dropdown-list-component.js' */
define("ac/jira/dropdown-list/component",["jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jira/ajs/layer/layer-constants","jira/ajs/list/item-descriptor","jquery"],function(f,g,h,k,d){var e=JIRA.Connect.Suggestions,b=function(a){a=a||{};a.maxInlineResultsDisplayed=a.maxInlineResultsDisplayed||5;a.expandAllResults=a.expandAllResults||!1;this.$container=d(e.container({id:a.id}));this.$target=d(e.target()).appendTo(d("body"));this.listController=new g({containerSelector:this.$container,maxInlineResultsDisplayed:a.maxInlineResultsDisplayed,
expandAllResults:a.expandAllResults,selectionHandler:function(){var a=this.getCurrent();this.onSelected(a);this.hide()}.bind(this)});this.inlineLayer=f.createInlineLayers({alignment:h.LEFT,offsetTarget:this.$target,maxInlineResultsDisplayed:a.maxInlineResultsDisplayed,content:this.$container});this.inlineLayer.onhide(function(){this.hide()}.bind(this));this.visible=!1};b.prototype.showAt=function(a,b,l){var c=arguments[arguments.length-1];this.visible||(c=document.getElementById(c._context.extension_id).getBoundingClientRect(),
a+=c.left,b+=c.top,this.$target.css({left:a+"px",top:b+"px"}),this.listController.enable(),this.inlineLayer.show(),this.inlineLayer.setPosition(),this.inlineLayer.setWidth(l),this.visible=!0)};b.prototype.setItems=function(a,b){b="string"===typeof b||"";this.suggestions=a.map(function(a){return new k({value:a.value,label:a.label,icon:a.iconUrl})});this.listController.generateListFromJSON(this.suggestions,b)};b.prototype.hide=function(){this.visible&&(this.visible=!1,this.listController.disable(),
this.inlineLayer.hide(),this.onHidden())};b.prototype.moveUp=function(){this.listController.moveToPrevious()};b.prototype.moveDown=function(){this.listController.moveToNext()};b.prototype.query=function(a){this.listController.generateListFromJSON(this.suggestions,a)};b.prototype.select=function(){var a=this.listController.getFocused();0!==a.length&&a.is(":visible")&&this.listController._acceptSuggestion(a)};b.prototype.isVisible=function(a){a(this.visible)};b.prototype.getSelected=function(a){a(this.getCurrent())};
b.prototype.getCurrent=function(){var a=this.listController.getFocused();return 0!==a.length&&a.is(":visible")?(a=a.data("descriptor"),{value:a.value(),label:a.label(),iconUrl:a.icon()}):null};b.prototype.onSelected=function(a){connectHost.broadcastEvent("dropdown_list_select",{addon_key:this._context.extension.addon_key,key:this._context.extension.key},{id:this._id,data:a})};b.prototype.onHidden=function(){connectHost.broadcastEvent("dropdown_list_hide",{addon_key:this._context.extension.addon_key,
key:this._context.extension.key},{id:this._id})};return b});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-dropdown-list-v5', location = 'v5/js/jira/dropdown-list/dropdown-list.soy' */
// This file was automatically generated from dropdown-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Connect.Suggestions.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Connect == 'undefined') { JIRA.Connect = {}; }
if (typeof JIRA.Connect.Suggestions == 'undefined') { JIRA.Connect.Suggestions = {}; }


JIRA.Connect.Suggestions.container = function(opt_data, opt_ignored) {
  return '<div class="aui-list ac-suggestions-container" ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '></div>';
};
if (goog.DEBUG) {
  JIRA.Connect.Suggestions.container.soyTemplateName = 'JIRA.Connect.Suggestions.container';
}


JIRA.Connect.Suggestions.target = function(opt_data, opt_ignored) {
  return '<div class="ac-suggestions-target"></div>';
};
if (goog.DEBUG) {
  JIRA.Connect.Suggestions.target.soyTemplateName = 'JIRA.Connect.Suggestions.target';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-dropdown-list-v5', location = 'v5/js/jira/dropdown-list/dropdown-list.js' */
define("ac/dropdown-list",["ac/jira/dropdown-list/component"],function(a){return{create:{constructor:a,showAt:a.prototype.showAt,setItems:a.prototype.setItems,hide:a.prototype.hide,moveUp:a.prototype.moveUp,moveDown:a.prototype.moveDown,query:a.prototype.query,select:a.prototype.select,isVisible:a.prototype.isVisible,getSelected:a.prototype.getSelected,onHide:function(){},onSelect:function(){}}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-module-loader-v5', location = 'v5/js/jira/module-loader.js' */
connectHost.defineModule("jira",require("ac/jira"));connectHost.defineModule("dropdownList",require("ac/dropdown-list"));;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-spa-inlinedialog-cleanup', location = 'v5/js/iframe/host/spa-inline-dialog-cleanup.js' */
require(["skate"],function(a){a("ap-inline-dialog",{type:function(){var b;(b=a&&a.types&&a.types.CLASS)||(b=a&&a.type&&a.type.CLASSNAME);return b}(),detached:function(a){document.querySelectorAll('iframe[id^\x3d"'+window._AP.util.escapeSelector(a.id)+'"]').forEach(function(a){AJS.$(a).parents(".aui-inline-dialog").remove()})}})});;
;
/* module-key = 'com.atlassian.product.fabric.pf-jira-confluence-integration-plugin:app-switcher-initial-resources', location = 'webpack/init.js' */
!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(501),o=i(s),a=n(503),u=i(a),c=n(504),d=i(c);AJS.toInit(function(){function e(e,t){AJS.EventQueue.push({name:e,properties:r({},t)})}function t(t){if(c(t)){t.preventDefault(),h("#appswitcher-button").unbind("click").unbind("keydown"),h("body").addClass("loading-cursor"),e("appswitcher.trigger.click");var o=WRM.require("wr!com.atlassian.product.fabric.pf-jira-confluence-integration-plugin:app-switcher-resources"),d=h.ajax({url:p+"/rest/menu/latest/appswitcher",dataType:"json"}),f=v?h.Deferred().reject():h.ajax({url:n()+"/api/client/recent/containers?cloudId="+g,xhrFields:{withCredentials:!0}});i([o,d,f]).then(function(t,n,i){if(h("body").removeClass("loading-cursor"),e("appswitcher.dropdown.show"),!t.success)return void e("appswitcher.dropdown.display.error",{reason:"WRM.require() failed"});n.success||e("appswitcher.dropdown.display.error");var o=s(n.response),c={recentContainers:i.success?i.response.data:[],linkedApplications:{configureLink:!!y.isUserAdmin&&m,apps:n.success?n.response.map(function(e){return{name:e.label,url:e.link,product:e.applicationType}}):[],error:!n.success},suggestedApplication:0===o.length?{show:!1}:r({show:y.isAppSuggestionAvailable,onDontShowAgainClick:function(){return a("key-no-thanks","true")}},o[0]),isAnonymousUser:v,i18n:u.default,analytics:e};requirejs("fabric/app-switcher").initAppSwitcher(c)})}}function n(){var e=window.location.hostname;return e.indexOf("jira-dev.com")>-1?"https://activity.staging.atlassian.io":"https://activity.atlassian.io"}function i(e){return h.when.apply(h,h.map(e,function(e){var t=h.Deferred();return e.done(function(e){t.resolve({success:!0,response:e})}).fail(function(e){t.resolve({success:!1,response:e})}),t.promise()}))}function s(e){var t=[{application:"jira",url:y.isUserAdmin?"/admin/billing/addapplication":"https://www.atlassian.com/software/jira"},{application:"confluence",url:y.isUserAdmin?"/admin/billing/addapplication?product=confluence.ondemand":"https://www.atlassian.com/software/confluence"}],n=new Set;return e.map(function(e){return e.applicationType.toLowerCase()}).forEach(function(e){return n.add(e)}),t.filter(function(e){return!n.has(e.application)})}function a(e,t){h.ajax({url:p+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:e,value:t})})}function c(e){return"click"===e.type||"keydown"===e.type&&(40===e.which||32===e.which||13===e.which)}(0,d.default)();var p=AJS.contextPath(),f=p.indexOf("/wiki")===-1,l=requirejs(f?"jira/util/data/meta":"confluence/meta"),h=requirejs("jquery"),g=WRM.data.claim("com.atlassian.product.fabric.pf-jira-confluence-integration-plugin:app-switcher-initial-resources.cloud-id"),v=WRM.data.claim("com.atlassian.product.fabric.pf-jira-confluence-integration-plugin:app-switcher-initial-resources.is-anonymous"),y=h("#app-switcher").data("environment"),m=p+"/plugins/servlet/customize-application-navigator";l.getBoolean("show-new-app-switcher")&&(h(".app-switcher-trigger").filter(":visible").length&&(h(".app-switcher-trigger, #app-switcher").remove(),h(".aui-header-before").append('\n            <span id="appswitcher-container">\n                <a id="appswitcher-button" tabindex="0">\n                    <span class="aui-icon aui-icon-small aui-iconfont-appswitcher"></span>\n                </a>\n            </span>'),h("#appswitcher-button").click(t).keydown(t)),h(window).load(o.default))})},501:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e={analyticsscheme:"https",analyticsserver:"analytics.atlassian.com",server:window.location.hostname,product:"home",queue:[],storage_key:"atlassian.home.analytics",save_interval:5e3,publish_interval:1e4},t=(0,s.default)(e);t.start()};var r=n(502),s=i(r)},502:function(e,t,n){!function(){var t,n;t=function(){var e={},t={};return e.getLocalStorage=function(){return window.localStorage},e.getSessionStorage=function(){return window.sessionStorage},e.getInternalStorage=function(){return t.getItem=function(e){return t[e]},t.setItem=function(e,n){t[e]=n},t.clear=function(){t={}},t},e.getStorage=function(){var t;try{var n=e.getLocalStorage();t="undefined"!=typeof n?n:e.getSessionStorage()}catch(e){}return"undefined"==typeof t&&(t=e.getInternalStorage()),t},e.isCORSRequest=function(e){var t=document.createElement("a");return t.href=e,t.host!==window.location.host},e.useXDomainRequest=function(t){return e.isCORSRequest(t)&&!!window.XDomainRequest&&(navigator.appVersion.indexOf("MSIE 8.")!==-1||navigator.appVersion.indexOf("MSIE 9.")!==-1)},e.getCookieValue=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},e}(),n=function(e){function t(e){return i&&i.is_started?(i.stop(),i.config=i.parseConfig(e)):(i=new n(e),window["herment-gas-client"]=i),i}function n(t){return this.STORAGE_KEY_PREAMBLE="herment",this.MAXEVENTS=100,this.PUBLISH_INTERVAL=5e3,this.SAVE_INTERVAL=1e3,this.config=this.parseConfig(t),this.storage=e.getStorage(),this.is_started=!1,"undefined"!=typeof window.addEventListener?window.addEventListener("unload",function(){this.moveQueueToStorage()}.bind(this)):window.attachEvent("onunload",function(){this.moveQueueToStorage()}.bind(this)),this}var i=window["herment-gas-client"];return n.prototype={getAtlPath:function(){return e.getCookieValue("__atl_path")},getServerName:function(){var e;return"undefined"!=typeof document.location&&"undefined"!=typeof document.location.hostname&&(e=document.location.hostname),""===e&&(e="-"),e},getProductNameFromServerName:function(e){return"undefined"!=typeof e?e.replace(".com","").replace(".net","").replace(".org","").replace(".au","").replace(".io",""):"-"},getSubdomain:function(e){var t="-",n=e.match(/^([a-z0-9\.]*)[\-\.]{1}([a-z0-9]+)+\.([a-z]{2,6})$/i);if(n){var i=e.split(".");i=2===i[i.length-1].length?i.slice(0,i.length-3):i.slice(0,i.length-2),0!==i.length&&(t=i.join("."))}return t},generateRandomStorageKey:function(){var e=2,t=12,n=(Math.random()+"").slice(e,t),i=(Math.random()+"").slice(e,t);return n.concat(i)},ajaxPost:function(t,n){var i;if(e.useXDomainRequest(t))i=new window.XDomainRequest;else if(window.XMLHttpRequest)i=new XMLHttpRequest;else{if(!window.ActiveXObject)return;i=new window.ActiveXObject("Microsoft.XMLHTTP")}i.open("POST",t,!0),"undefined"!=typeof i.setRequestHeader&&(i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Accept","application/json, text/javascript, */*;")),i.send(n)},parseConfig:function(e){var t,n,i,r,s,o,a,u,c,d,p,f,l,h,g,v,y,m,w,S,b;if("undefined"==typeof e||"undefined"==typeof e.queue){var _=window.AJS=window.AJS||{};_.EventQueue=_.EventQueue||[],t=_.EventQueue}else t=e.queue;return n="undefined"==typeof e||"undefined"==typeof e.analyticsscheme?"https":e.analyticsscheme,i="undefined"==typeof e||"undefined"==typeof e.analyticsserver?"mgas.prod.public.atl-paas.net":e.analyticsserver,r="undefined"==typeof e||"undefined"==typeof e.analyticsurl?"/v1/events":e.analyticsurl,s="undefined"==typeof e||"undefined"==typeof e.server?this.getServerName():e.server,o="undefined"==typeof e||"undefined"==typeof e.product?this.getProductNameFromServerName(s):e.product,"undefined"==typeof e||"undefined"==typeof e.subproduct?(a=this.getSubdomain(s),"undefined"==typeof a&&(a="-")):a=e.subproduct,u="undefined"==typeof e||"undefined"==typeof e.version?null:e.version,c="undefined"==typeof e||"undefined"==typeof e.session?null:e.session,d="undefined"==typeof e||"undefined"==typeof e.sen?null:e.sen,p="undefined"==typeof e||"undefined"==typeof e.sourceip?null:e.sourceip,f="undefined"==typeof e||"undefined"==typeof e.atlpath?this.getAtlPath():e.atlpath,l="undefined"==typeof e||"undefined"==typeof e.ajax?this.ajaxPost:e.ajax,h="undefined"==typeof e||"undefined"==typeof e.maxevents?this.MAXEVENTS:e.maxevents,g="undefined"==typeof e||"undefined"==typeof e.storage_key?this.STORAGE_KEY_PREAMBLE+this.generateRandomStorageKey()+this.generateRandomStorageKey():e.storage_key,v="undefined"==typeof e||"undefined"==typeof e.user?"default":e.user,y="undefined"==typeof e||"undefined"==typeof e.publish_interval?this.PUBLISH_INTERVAL:e.publish_interval,m="undefined"==typeof e||"undefined"==typeof e.save_interval?this.SAVE_INTERVAL:e.save_interval,w="undefined"==typeof e||"undefined"==typeof e.cloud_id?null:e.cloud_id,S="undefined"==typeof e||"undefined"==typeof e.user_id?null:e.user_id,b="undefined"==typeof e||"undefined"==typeof e.user_id_type?null:e.user_id_type,{cloud_id:w,queue:t,gasScheme:n,gasServer:i,gasUrl:r,serverName:s,productName:o,subProductName:a,version:u,session:c,sen:d,sourceIP:p,atlPath:f,post:l,maxevents:h,storageKey:g,user:v,user_id:S,user_id_type:b,publishInterval:y,saveInterval:m}},pushToServer:function(e,t){var n="undefined"!=typeof t?t:this.config.post,i=this.config.gasScheme+"://"+this.config.gasServer+this.config.gasUrl,r={events:e},s=JSON.stringify(r);n(i,s)},addEventsToArray:function(e,t,n){if("undefined"!=typeof n&&"undefined"!=typeof n.server&&"undefined"!=typeof n.product&&"undefined"!=typeof n.subproduct&&"undefined"!=typeof n.user)for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(t.length>=this.config.maxevents)break;if(r.name&&r.properties){var s={cloud_id:n.cloud_id,name:r.name,properties:r.properties,serverTime:r.time||(new Date).getTime(),server:n.server,user:r.user||n.user,user_id:n.user_id,user_id_type:n.user_id_type,product:n.product,subproduct:n.subproduct,version:n.version,session:n.session,sen:n.sen,sourceIP:n.sourceIP,atlPath:n.atlPath};t.push(s)}}},publishFromQueueAndStorage:function(e){try{var t="undefined"!=typeof e?e:this.pushToServer.bind(this),n=[];if(this.config.queue.length<1&&("undefined"==typeof this.storage||this.storage.length<1))return;var i={cloud_id:this.config.cloud_id,server:this.config.serverName,user:this.config.user,user_id:this.config.user_id,user_id_type:this.config.user_id_type,product:this.config.productName,subproduct:this.config.subProductName,version:this.config.version,session:this.config.session,sen:this.config.sen,sourceIP:this.config.sourceIP,atlPath:this.config.atlPath};this.addEventsToArray(this.config.queue,n,i);var r=this.popEventsFromStorage();this.addEventsToArray(r,n,i),this.config.queue.length=0,n&&n.length&&t(n)}catch(e){}},serialiseEventsToString:function(e){return JSON.stringify(e)},deserialiseEvents:function(e){return JSON.parse(e)},storeEvents:function(e){if("undefined"!=typeof this.storage)try{if(this.storage[this.config.storageKey]){var t=this.deserialiseEvents(this.storage[this.config.storageKey])||[];t.length<this.config.maxevents&&t.push.apply(t,e),e=t}this.storage.setItem(this.config.storageKey,this.serialiseEventsToString(e))}catch(e){}},popEventsFromStorage:function(){if("undefined"==typeof this.storage)return[];try{if(this.storage[this.config.storageKey]){var e=this.deserialiseEvents(this.storage[this.config.storageKey]);return this.storage[this.config.storageKey]=this.serialiseEventsToString([]),e}}catch(e){}return[]},moveQueueToStorage:function(){0!==this.config.queue.length&&"undefined"!=typeof this.storage&&(this.storeEvents(this.config.queue),this.config.queue.length=0)},start:function(){this.is_started=!0;var e=Array.prototype.push;this.config.queue.push=function(t){t.time=(new Date).getTime(),e.call(this.config.queue,t)}.bind(this),this.initialSaveTimeout=setTimeout(this.publishFromQueueAndStorage.bind(this),this.config.saveInterval),this.saveInterval=setInterval(this.moveQueueToStorage.bind(this),this.config.saveInterval),this.startPublisher()},stop:function(){this.is_started=!1,this.publishFromQueueAndStorage(),clearTimeout(this.initialSaveTimeout),clearInterval(this.saveInterval),this.stopPublisher()},stopPublisher:function(){clearInterval(this.publishInterval)},startPublisher:function(){this.publishInterval=setInterval(this.publishFromQueueAndStorage.bind(this),this.config.publishInterval)},destroy:function(){this.stop(),window["herment-gas-client"]=t}},t}(t),window["herment-gas-client"]=n,e.exports=n}()},503:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={home:"Home",apps:"Apps",configure:"Configure",recent:"Recent","try.other.apps":"Try other Atlassian apps","don't.show.this.again":"Don\'t show this again","container.confluence-space":"Space","container.jira-project":"Project","suggested.application.description.confluence":"Collaboration and content sharing","suggested.application.description.jira":"Issue & Project Tracking Software","applinks.error":"Unable to load linked applications"}},504:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n})}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-menu-link-init', location = 'js/menu/initAttachmentMenuLink.js' */
require(["jquery","dndattachment/aui","jira/util/events","dndattachment/util/events/types","dndattachment/integration-register","dndattachment/upload/handler"],function(t,n,e,a,i,c){var l="issueaction-attach-file",u=function(t){t.addClass(l),t.click()},r=function(){var n=t('<input type="file" multiple />');n.change(function(t){e.trigger(a.ATTACHMENT_FOR_PAGE_RECEIVED,{files:n[0].files})}),n.click()},s=function(t){return!!t.data("issuekey")},d=function(e){var a=t(e.target);if(n.trigger("analytics",{name:"issue.dnd.attachment.opsbar.attachFiles.linkClick",data:{}}),!a.hasClass(l)){e.preventDefault();var i=t(".issue-drop-zone").length;i&&!s(a)?r():u(a)}},f=function(){t(document).on("click",".unified-attach-file",function(t){var n=i.getAttachmentMenuHandler();"function"==typeof n&&c.isDefaultExecutor({})?n.call(null,t):d.call(null,t)})},o=function(){f()};t.isReady?o():n.$(o)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-administer-notifier', location = 'templates/repository-shortcuts/admin-notifications.soy' */
// This file was automatically generated from admin-notifications.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Software.RepositoryShortcuts.Notification.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Software == 'undefined') { JIRA.Software = {}; }
if (typeof JIRA.Software.RepositoryShortcuts == 'undefined') { JIRA.Software.RepositoryShortcuts = {}; }
if (typeof JIRA.Software.RepositoryShortcuts.Notification == 'undefined') { JIRA.Software.RepositoryShortcuts.Notification = {}; }
if (typeof JIRA.Software.RepositoryShortcuts.Notification.Templates == 'undefined') { JIRA.Software.RepositoryShortcuts.Notification.Templates = {}; }


JIRA.Software.RepositoryShortcuts.Notification.Templates.notifyAdminProjectLinkFragment = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/projects/' + soy.$$escapeHtml(opt_data.projectKey) + '" class="repo-shortcuts-notification__show-me-link">' + ((opt_data.isAdg3AddItemEnabled) ? soy.$$escapeHtml('See request from project admin') : soy.$$escapeHtml('Show me where')) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Notification.Templates.notifyAdminProjectLinkFragment.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Notification.Templates.notifyAdminProjectLinkFragment';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-administer-notifier', location = 'js/repository-shortcuts/services/URLMatcher.js' */
"use strict";define("repository-shortcuts/services/url-matcher",[],function(){return{parseUrl:function(t){function s(t,s,e){if(t&&t[1]&&s.indexOf(t[1])===-1&&e.indexOf(t[2])===-1)return{dvcsOrg:t[1],dvcsRepo:t[2]}}function e(){var e=/https:\/\/bitbucket\.org(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["snippets","account","dashboard"],i=["profile"];return s(r,c,i)}function r(){var e=/https:\/\/github\.com(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["pulls","issues","notifications","explore","integrations","settings","blog","about","site","security"],i=[];return s(r,c,i)}if("string"!=typeof t)throw new Error("parseUrl expects URLs to be strings");return e()?{dvcsType:"bitbucket",dvcsOrg:e().dvcsOrg,dvcsRepo:e().dvcsRepo}:r()?{dvcsType:"github",dvcsOrg:r().dvcsOrg,dvcsRepo:r().dvcsRepo}:{dvcsType:"unsupported"}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-administer-notifier', location = 'js/repository-shortcuts/services/DVCSAccountMatcher.js' */
"use strict";define("repository-shortcuts/services/dvcs-account-matcher",["jquery","underscore","bluebird/Promise","wrm/context-path","repository-shortcuts/services/url-matcher","jira/featureflags/feature-manager"],function(e,t,r,n,s,i){return{matchUrlAgainstNetwork:function(u){function c(s){var i=n()+"/rest/bitbucket/1.0/repository/summary/find?type="+s.dvcsType+"&orgName="+s.dvcsOrg+"&repoSlug="+s.dvcsRepo;return r.resolve(e.get(i)).then(function(e){return t.extend({},s,e)})["catch"](function(e){return e&&404===e.status?a(s):s})}function a(t){var s=n()+"/rest/bitbucket/1.0/organization/find?name="+t.dvcsOrg+"&type="+t.dvcsType;return r.resolve(e.get(s)).then(function(e){var r=e.dvcsType,n=e.name,s=e.approvalState,i=r===t.dvcsType,u=n===t.dvcsOrg,c="APPROVED"===s;return t.isOrganisationLinked=i&&u&&c,t})["catch"](function(e){return t})}function o(t){var s=n()+"/rest/devinfoadmin/1.0/githubAppDetails";return r.resolve(e.get(s)).then(function(e){var r=e.githubAppInstalled;return r&&(t.isOrganisationLinked=!0,t.isRepositoryLinked=!0),t.githubAppInstalled=r,t})["catch"](function(e){return t})}try{var d=s.parseUrl(u);if("unsupported"===d.dvcsType)return r.resolve(d);var v=i.isFeatureEnabled("fusion-dvcs-new-github-integrations-allowed");return d.newGithubDvcsIntegrationsAllowed=v,v||"github"!==d.dvcsType?d.dvcsRepo?c(d):a(d):o(d)}catch(p){return r.reject(p)}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-administer-notifier', location = 'js/repository-shortcuts/notify-admin.js' */
"use strict";require(["jquery","bluebird/Promise","wrm/context-path","repository-shortcuts/services/dvcs-account-matcher","jira/featureflags/simplified-ux-feature-manager"],function(t,e,o,r,i){function n(e){e.forEach(function(e){var o=!0;r.matchUrlAgainstNetwork(e.shortcutUrl).then(function(r){if(o=!r.isRepositoryLinked,o===!0){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.integration-request.show",data:{projectId:e.projectId}});var n="bitbucket"===e.dvcsType?"Bitbucket":"GitHub",a=i.isAdg3ModeOn(),c=a?AJS.format("{0} integration requested",n):AJS.format("{0} integration request",n),s=AJS.flag({type:"info",title:c,body:JIRA.Software.RepositoryShortcuts.Notification.Templates.notifyAdminProjectLinkFragment({projectKey:e.projectKey,isAdg3AddItemEnabled:a})});t(s).find(".repo-shortcuts-notification__show-me-link").on("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.integration-request.show-me.click",data:{projectId:e.projectId}})})}})["catch"](function(t){console.error("Caught Error"+t)})})}var a="repository-shortcuts-pending-requests",c=localStorage.getItem(a)||Date.now(),s=36e5;c+s<Date.now()&&(e.resolve(t.ajax({type:"POST",url:o()+"/rest/projects/1.0/project/shortcut/pending",data:JSON.stringify({clearPendingFlag:!0}),contentType:"application/json"})).then(function(t){n(t)})["catch"](function(t){console.error(t)}),localStorage.setItem(a,Date.now()))});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devsummarycf-resources-init', location = 'js/customfields/devsummary/dev-summary-custom-field-init.js' */
"use strict";require(["jira/skate","jquery"],function(e,t){var i="wrc!com.atlassian.jira.plugins.jira-development-integration-plugin:devsummarycf-resources";e("fusion-devsummary-cf",{type:e.type.CLASS,created:function(e){WRM.require([i],function(){var i=require("jira-development-status/customfields/dev-summary-custom-field-column-view"),r=require("jira-development-status/component/tooltip"),o=t(e);new i({el:o}),r.tipsify({selector:".fusion-widget-tooltip",context:o,html:!0})})}})});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:lodash-amd', location = 'applinks/internal/lib/lodash-jslibs.js' */
define('applinks/lib/lodash', ['atlassian/libs/underscore-1.5.2'], function(lodash) {
        return lodash;
    });;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/lib-version.js' */
// NOTE: this is in "lib" because it's required by aui-amd.js. This module _cannot_ have any dependencies on non-lib
// modules (like "common")
define('applinks/lib/version', [
    'applinks/lib/lodash'
], function(
    _
) {

    function checkIntValue(value, desc) {
        if (_.isUndefined(value)) {
            return 0;
        } else if (typeof value !== 'number' || isNaN(value)) {
            throw new Error(desc + ': expected a number, was: <' + value + '>');
        } else {
            return Math.floor(value);
        }
    }

    function checkVersionObject(object, desc) {
        if (!object || !(object instanceof Version)) {
            throw new Error(desc + ': expected a Version object, was: <' + object + '>');
        }
        return object;
    }

    function compareInt(intOne, intTwo) {
        return intOne > intTwo ? 1 : intOne == intTwo ? 0 : -1;
    }

    /**
     * Constructs a version object that contains version information and can be compared with other version objects.
     *
     * @param major major version component
     * @param minor minor version component
     * @param bugfix bugfix version component
     * @constructor
     */
    function Version(major, minor, bugfix) {
        this.major = checkIntValue(major, 'major');
        this.minor = checkIntValue(minor, 'minor');
        this.bugfix = checkIntValue(bugfix, 'bugfix');
    }

    /**
     * Constructs a Version by parsing a version string.
     *
     * @param versionString version string to parse, expected to be in the form of <major>.<minor>.<bugfix>
     * @param versionDesc what version does the `versionString` represent
     */
    Version.parse = function(versionString, versionDesc) {
        versionDesc = versionDesc || 'versionString';
        if (!versionString) {
            throw new Error(versionDesc + ': expected a non-empty string');
        }
        var versionSplit = versionString.split('.');
        if (versionSplit.length !== 3) {
            throw new Error(versionDesc + ': expected <major>.<minor>.<bugfix> string, was: <' + versionString + '>');
        }
        return new Version(parseInt(versionSplit[0]), parseInt(versionSplit[1]), parseInt(versionSplit[2]));
    };

    /**
     * Comparator function to sort Version objects.
     *
     * @param versionOne first version object
     * @param versionTwo second version object
     * @returns {Number} comparison result
     * @see Version.compareTo(that)
     */
    Version.comparator = function(versionOne, versionTwo) {
        return checkVersionObject(versionOne, 'versionOne').compareTo(checkVersionObject(versionTwo, 'versionTwo'));
    };

    /**
     * Return -1, 0 or 1 as this Version object represents a version less than, equal to, or greater than `that`.
     *
     * @param that the other version to compare to
     * @returns {Number} comparison result
     */
    Version.prototype.compareTo = function(that) {
        checkVersionObject(that, 'that');
        var majorResult = compareInt(this.major, that.major);
        if (majorResult != 0) {
            return majorResult;
        }
        var minorResult = compareInt(this.minor, that.minor);
        if (minorResult != 0) {
            return minorResult;
        }
        return compareInt(this.bugfix, that.bugfix);
    };

    Version.prototype.greaterThan = function(that) {
        return this.compareTo(that) > 0;
    };

    Version.prototype.greaterThanOrEqual = function(that) {
        return this.compareTo(that) >= 0;
    };

    Version.prototype.lessThan = function(that) {
        return this.compareTo(that) < 0;
    };

    Version.prototype.lessThanOrEqual = function(that) {
        return this.compareTo(that) <= 0;
    };

    Version.prototype.equals = function(that) {
        return this.compareTo(that) == 0;
    };

    Version.prototype.toMinor = function() {
        return new Version(this.major, this.minor);
    };

    Version.prototype.toMajor = function() {
        return new Version(this.major);
    };

    Version.prototype.toString = function() {
        return this.major + '.' + this.minor + '.' + this.bugfix;
    };

    return Version;
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-version-details.js' */
define('applinks/lib/aui-version-details', [
    'applinks/lib/version'
], function(
    Version
) {
    // minimum 5.8.x and 5.9.x AUI versions - lower versions ship with bugs that break some of the Applinks functionality
    var MINIMUM_58_VERSION = new Version(5, 8, 15);
    var MINIMUM_59_VERSION = new Version(5, 9, 13);
    var VERSION_58 = new Version(5, 8);
    var VERSION_59 = new Version(5, 9);

    function checkVersion(version) {
        // must be >= the minimum required 5.8.x version
        if (version.lessThan(MINIMUM_58_VERSION)) {
            throw new Error('AUI version ' + version + ' is too low, you need to upgrade AUI to ' + MINIMUM_58_VERSION +
                ' or ' + MINIMUM_59_VERSION + ' for Applinks to work');
        }
        // if 5.9, must be >= the minimum required 5.9.x version
        if (version.greaterThanOrEqual(VERSION_59) && version.lessThan(MINIMUM_59_VERSION)) {
            throw new Error('AUI version ' + version + ' is too low, you need to upgrade AUI to ' + MINIMUM_59_VERSION +
                ' for Applinks to work');
        }
    }

    function addVersionDetails(AJS) {
        var ajsVersion = Version.parse(AJS.version, 'AUI version');
        checkVersion(ajsVersion);

        AJS.versionDetails = ajsVersion;
        AJS.versionDetails.is58 = ajsVersion.toMinor().equals(VERSION_58);
        AJS.versionDetails.is59 = ajsVersion.toMinor().equals(VERSION_59);

        return AJS;
    }

    return  {
        /**
         * Check AUI version for compatibility with Applinks and add `versionDetails` field.
         */
        addVersionDetails: addVersionDetails
    };
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/console-amd.js' */
define('applinks/lib/console', function() {
    return window.console;
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/jquery-amd.js' */
define('applinks/lib/jquery', function() {
   return window.jQuery;
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-amd.js' */
define('applinks/lib/aui', [
    'applinks/lib/window',
    'applinks/lib/aui-version-details'
], function(
    window,
    VersionDetails
) {
    var AJS = window.AJS;
    if (!AJS) {
        throw new Error('window.AJS not defined, cannot load AUI');
    }

    return VersionDetails.addVersionDetails(AJS);
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/wrm-amd.js' */
/**
 * Define Web resource manager as an AMD dependency. This should also be present in apps using Atlassian Plugins Web
 * Resources framework.
 */
define('applinks/lib/wrm', function() {
   return window.WRM;
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/skate-amd.js' */
define('applinks/lib/skate', function() {
   // window.skate is not exposed as a global from AUI 5.9, this will return undefined with that version or later
   return window.skate;
});
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/window-amd.js' */
/**
 * Define window as AMD module to facilitate unit testing of some modules
 */
define('applinks/lib/window', function() {
    return window;
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-public', location = 'js/applinks.public.js' */
// NOTE: this is used outside of Applinks. See atlassian-plugin.xml for more details about the associated restrictions

/**
 * Support code to provide appropriate behavior for HTML elements created by
 * ApplicationLinkUIService; also, public functions that can be used from JS code
 * in other plugins to create the same kinds of HTML elements, in case it's not
 * convenient to do so on the back end.
 */
var ApplinksUtils = ApplinksUtils || (function($) {

    var pendingRequests = {},
        pendingConfirmations = {};
    
    // Provide a well-defined name for the authentication window/tab we create with
    // window.open() - may be useful in debugging, and is used by integration tests.
    // Note, IE8 does not allow this name to contain hyphens or periods.
    var authWindowName = "com_atlassian_applinks_authentication";

    /**
     * This function is basically duplicated from messages.js in AJS, because some products
     * only provide a stub version of messages.js within gadgets.
     */
    function makeCloseable(message) {
        var $icon = $('<span class="aui-icon icon-close"></span>').click(function () {
            message.trigger("messageClose", [this]).remove();
        });
        message.append($icon);
    }

    /**
     * Helper function to get the DOM object of the current iframe.
     * @return {Object} a DOM object, or null if we are not in an iframe
     */
    function getCurrentIframe() {
        if (window === parent.window) {
            return null;
        }
        var ret = null,
            myFrameWindow = window;
        $('iframe', parent.document.body).each(function(index) {
            if (this.contentWindow.window === myFrameWindow) {
                ret = this;
            }
        });
        return ret;
    }

    /**
     * Event handler that is called by the applinks authorization completion servlet.  It triggers
     * the completion function for any pending authorization request that matches the given applink
     * ID, and also redispatches the event to any other iframes in the current window.
     * @param {Object} eventObject  JQuery event object
     * @param {string} applinkId  application link ID
     * @param {boolean} success  true if the request was approved
     * @param {string} authAdminUri  URI of the "OAuth Access Tokens" page (will be displayed in the
     *   confirmation message)
     * @param {boolean} wasRedispatched  true if the event has been retriggered from another frame
     * @param {Object} [messages]
     *      'userError': an error message relevant to a non-admin user,
     *      'adminError': an error message relevant to an admin user,
     *      'adminErrorDetails': a list of details related to the admin message if there is one 
     */
    function onAuthCompletion(eventObject, applinkId, success, authAdminUri, wasRedispatched, messages) {
        if (applinkId in pendingRequests) {
            var request = pendingRequests[applinkId];
            if (success) {
                request.authAdminUri = authAdminUri;
                delete pendingRequests[applinkId];
            }
            completeAuthRequest(request, success, messages);
        }
        if (!wasRedispatched && parent && (parent !== window)) {
            var myWindow = window;
            $('iframe', parent.document.body).each(function(index, frame) {
                var scope = frame.contentWindow;
                if (scope !== myWindow) {
                    if (scope.AJS && scope.AJS.$) {
                        scope.AJS.$(scope.document).trigger('applinks.auth.completion',
                            [applinkId, success, authAdminUri, true, messages]);
                    }
                }
            });
        }
    }
      
    /**
     * Fires the appropriate event when the authorization flow has completed.  On approval, reloads
     * the window/frame unless an event handler calls {@code preventDefault()} on the event.
     * @param {Object} applinkProperties  has the same properties passed to {@link createAuthRequestBanner}
     * @param {boolean} approved  true if the request was approved
     * @param {Object} [messages]
     *      'userError': an error message relevant to a non-admin user,
     *      'adminError': an error message relevant to an admin user,
     *      'adminErrorDetails': a list of details related to the admin message if there is one
     */
    function completeAuthRequest(applinkProperties, approved, messages) {
        var $scope = $(document);
        if (approved) {
            // Temporarily bind an event handler so our handler runs after any other handlers that
            // may exist.
            var defaultApprovalHandler = function (eventObject) {
                if (eventObject.isDefaultPrevented()) {
                    // Don't reload, just show the confirmation message
                    showAuthConfirmationBanner(applinkProperties);
                } else {
                    // Reload, but first save a reminder to make us show a confirmation message
                    // after we've reloaded.
                    registerPendingConfirmation(applinkProperties);
                    document.location.reload(true);
                }
            };
            $scope.bind('applinks.auth.approved', defaultApprovalHandler);
            $scope.trigger('applinks.auth.approved', applinkProperties);
            $scope.unbind('applinks.auth.approved', defaultApprovalHandler);
        } else {
            // There's no default behavior for a request that was denied, but fire an event in case
            // anyone is interested.
            $scope.trigger('applinks.auth.denied', [applinkProperties, messages]);
        }
    }

    /**
     * Used internally to make the applink support code aware of a "please authenticate" message
     * element that has been displayed, by wiring the appropriate event handlers and adding the
     * applink's properties to an internal list of authentication requests.
     * @param $element {Object}  a JQuery object
     * @param applinkProperties {Object}  has the same properties passed to {@link createAuthRequestBanner}
     */
    function initAuthRequest($element, applinkProperties) {
        var $authLink = $element.find("a.applink-authenticate");
        
        if ($element.hasClass('aui-message')) {
            // Workaround for incomplete AJS availability in some products
            makeCloseable($element);
        }
        
        $authLink.click(function(e) {
            window.open(applinkProperties.authUri, authWindowName);
            e.preventDefault();
        });
        
        pendingRequests[applinkProperties.id] = applinkProperties;
        
        return $element;
    }
    
    /**
     * Used internally to ensure that {@link initAuthRequest} is called for every
     * authorisation request element that was generated as HTML from the back end,
     * rather than by calling {@link createAuthRequestBanner} or
     * {@link createAuthRequestInline}.  The parameters of the request are passed
     * from the back end in hidden input elements.
     */
    function initAuthRequestElements() {
        $('.applinks-auth-request').each(function(index) {
            var $e = $(this),
                applinkId = $e.find(".applinkId").val(),
                appName = $e.find(".appName").val(),
                appUri = $e.find(".appUri").val(),
                authUri = $e.find(".authUri").val();
            // Ignore request banners that have already been created (by {@link createAuthRequestBanner} or
            // {@link createAuthRequestInline})
            if (applinkId && authUri) {
                initAuthRequest($e, {
                    id: applinkId,
                    appName: appName,
                    appUri: appUri,
                    authUri: authUri});
            }
        });
    }

    /**
     * Builds a "please authenticate" banner (in a standard AUI message box) containing a link that
     * that will start authorization for an application link that needs credentials.
     * <p>
     * On completion of the authorization flow, a JQuery event will be triggered on the document,
     * with the event type "applinks.auth.approved" or "applinks.auth.denied", and an additional
     * parameter equal to the {@code applinkProperties} parameter that was passed here.
     * <p>
     * If authorization is granted (event "applinks.auth.approved"), the default behavior is for the
     * window or frame to be reloaded; also, a confirmation banner will be displayed either within
     * a &lt;div&gt; element of class "applinks-auth-confirmation-container" if one exists, or at the top of
     * the document otherwise.  Reloading of the window/frame can be disabled by having an event
     * handler call {@code preventDefault()} on the event.
     *
     * @param {Object} applinkProperties contains the following application link properties:
     *   {@code id}: the application link identifier;
     *   {@code appName}: the name of the remote application;
     *   {@code appUri}: the base URI of the remote application;
     *   {@code authUri}: the URI for starting the authorization flow
     * @return {Object} a JQuery object referring to a {@code <div>} element, which has not yet
     *   been inserted anywhere on the page; its class is "applinks-auth-request"
     */
    function createAuthRequestBanner(applinkProperties) {
        var $banner = $('<div class="aui-message warning closeable applinks-auth-request"><p><span class="aui-icon icon-applinks-key"></span></p></div>');
        // Note that we can't just use the AJS.messages.warning() function, because it will put a
        // standard warning icon in the message box and we want a custom icon.
        $banner.append(AJS.format("Additional information may be available, please \u003ca class=\"applink-authenticate\" href=\"{0}\"\u003eauthenticate\u003c/a\u003e with \u003ca href=\"{1}\"\u003e{2}\u003c/a\u003e.",
                                        AJS.escapeHtml(applinkProperties.authUri),
                                        AJS.escapeHtml(applinkProperties.appUri),
                                        AJS.escapeHtml(applinkProperties.appName)));
        initAuthRequest($banner, applinkProperties);
        return $banner;
    }

    /**
     * Builds a "please authenticate" message suitable for displaying inline (in a span
     * with the class "applinks-auth-request"), containing a link that will start authorization.
     * This behaves identically to {@link createAuthRequestBanner}, except it creates a {@code <span>}
     * element instead of a {@code div} and also allows additional text to be displayed.
     * 
     * @param {string} content  optional HTML content to be displayed within the inline
     *   element (e.g. a description of the entity for which authorization is required);
     *   will not be escaped; may be null
     * @param {Object} applinkProperties  see {@link createAuthRequestBanner}
     * @return {Object} a JQuery object referring to a {@code <span>} element, which has not yet
     *   been inserted anywhere on the page; its class is "applinks-auth-request"
     */
    function createAuthRequestInline(content, applinkProperties) {
        var $lozenge = $('<span class="applinks-auth-request"></span>'),
            $contentSpan = $('<span class="applinks-request-description"></span>'),
            message = AJS.format("\u003ca class=\"applink-authenticate\" href=\"{0}\"\u003eAuthenticate\u003c/a\u003e to see additional information.", AJS.escapeHtml(applinkProperties.authUri));
        if (content) {
            $contentSpan.append(content);
            $contentSpan.append(" - ");
        }
        $contentSpan.append(message);
        $lozenge.append($contentSpan);
        initAuthRequest($lozenge, applinkProperties);
        return $lozenge;
    }

    /**
     * Used internally to remember the fact that we have just completed authorizing an
     * applink and are about to refresh the iframe associated with it, so that we can
     * display a confirmation message after the iframe is refreshed.
     */
    function registerPendingConfirmation(applinkProperties) {
        var frame = getCurrentIframe();
        if ((!frame) || (!frame.id)) {
            return;
        }
        if (! parent.ApplinksUtils.pendingConfirmations) {
            parent.ApplinksUtils.pendingConfirmations = { };
        }
        if (!(frame.id in parent.ApplinksUtils.pendingConfirmations)) {
            parent.ApplinksUtils.pendingConfirmations[frame.id] = [];
        }
        parent.ApplinksUtils.pendingConfirmations[frame.id].push(applinkProperties);
        return;
    }

    /**
     * Called after a page load, to see if we've been refreshed due to a successful authorization.
     * If we're in an iframe, a variable will have been set on the parent window to tell us that
     * this happened.  If so, insert a confirmation banner at the top of the iframe.
     */
    function checkForPendingConfirmations() {
        if (parent && parent.ApplinksUtils && parent.ApplinksUtils.pendingConfirmations) {
            var myFrame = getCurrentIframe();
            if (myFrame) {
                if (myFrame.id in parent.ApplinksUtils.pendingConfirmations) {
                    var pendingConfirmations = parent.ApplinksUtils.pendingConfirmations[myFrame.id];
                    delete parent.ApplinksUtils.pendingConfirmations[myFrame.id];
                    for (var i = 0, n = pendingConfirmations.length; i < n; i++) {
                        showAuthConfirmationBanner(pendingConfirmations[i]);
                    }
                }
            }
        }
    }

    /**
     * Displays a confirmation banner.  If an element exists with the class
     * "applinks-auth-confirmation-contianer", it is inserted there, otherwise at the top of the
     * document.
     */
    function showAuthConfirmationBanner(applinkProperties) {
        var scope = $(document),
            banner = $('<div class="aui-message success closeable applinks-auth-confirmation"><p><span class="aui-icon icon-applinks-key-success"></span></p></div>'),
            container = scope.find('div.applinks-auth-confirmation-container');
        if (!container.length) {
            container = scope.find('body');
        }
        banner.append(AJS.format("This application is now using \u003ca href=\"{0}\"\u003e{1}\u003c/a\u003e\'\'s credentials. Revoke access at any time by going to \u003ca href=\"{2}\"\u003eOAuth access tokens\u003c/a\u003e.",
                                        AJS.escapeHtml(applinkProperties.appUri),
                                        AJS.escapeHtml(applinkProperties.appName),
                                        AJS.escapeHtml(applinkProperties.authAdminUri)));
        makeCloseable(banner);
        container.prepend(banner);
        setTimeout(function() {
            banner.fadeOut(1000, function() {
                $(this).remove();
            });
        }, 5000);
    }
    
    /**
     * Initialization function to be called once at document ready time.
     */
    function setup() {
        // If we're in an iframe, set up an object in the parent window that we can use to
        // keep track of state even if the iframe is refreshed.
        if (parent && !(parent === window)) {
            if (! parent.ApplinksUtils) {
                parent.ApplinksUtils = { };
            }
        }
        
        $(document).bind('applinks.auth.completion', onAuthCompletion);

        initAuthRequestElements();
        checkForPendingConfirmations();
    }

    $(document).ready(setup);
    
    return {      
        createAuthRequestBanner: createAuthRequestBanner,
        createAuthRequestInline: createAuthRequestInline
    };
})(AJS.$);
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/docs.js' */
define('applinks/common/docs', [
    'applinks/lib/jquery',
    'applinks/lib/aui',
    'applinks/common/help-paths'
], function(
    $,
    AJS,
    ApplinksHelpPaths
) {
    // NOTE: should be moved to applinks/feature/help-link, see APLDEV-593

    return {
        /**
         * NOTE: this is a dynamically generated version of the link build in _help_link.vm, any update here should be
         * applied there.
         * @method createDocLink
         * @param pageKey a key that maps to a page in ual-help-paths.properties
         * @param sectionKey (Optional) a key that maps to an anchor section id in ual-help-paths.properties
         * @param classNames (Optional) Whitespace separated list of additional class names
         * @return an html &lt;a&gt; element targeting the specified page & section
         */
        createDocLink: function(pageKey, sectionKey, classNames) {
            if (!classNames) {
                classNames = '';
            } else {
                classNames = ' ' + classNames;
            }
            return $('<a/>', {
                'class': 'ual-help-link help-link' + classNames,
                href: this.getDocHref(pageKey, sectionKey),
                target: '_blank',
                'data-help-link-key': pageKey,
                text: "Help",
                title: "Help"
            });
        },
        /**
         * @method getDocHref
         * @param pageKey a key that maps to a page in ual-help-paths.properties
         * @param sectionKey (Optional) a key that maps to an anchor section id in ual-help-paths.properties
         * @return the url of the given page and section (if specified)
         */
        getDocHref: function(pageKey, sectionKey) {
            var link = ApplinksHelpPaths.getFullPath(pageKey);
            if (sectionKey) {
                link += '#' + ApplinksHelpPaths.getPath(sectionKey);
            }
            return link;
        }
    };

});
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/help-paths.js' */
define('applinks/common/help-paths', [
    'applinks/lib/console',
    'applinks/lib/wrm',
    'applinks/lib/lodash',
    'applinks/common/modules',
    'applinks/common/preconditions'
], function(
    console,
    WRM,
    _,
    ApplinksModules,
    Preconditions
) {
    // NOTE: should be moved to applinks/feature/help-link, see APLDEV-593

    // lazy-load help paths, facilitates unit-testing
    var allHelpPaths = _.memoize(function() {
        var helpPaths = WRM.data.claim(ApplinksModules.dataFqn(ApplinksModules.COMMON_EXPORTED, 'applinks-help-paths'));
        if (!helpPaths.entries) {
            console.warn('Help paths not found, all help links are likely to be broken.');
        }
        return helpPaths.entries || {};
    });

    var getPath = function(key, sectionKey) {
        Preconditions.nonEmptyString(key, 'key');
        var path = allHelpPaths()[key] || key;
        if (sectionKey) {
            Preconditions.nonEmptyString(sectionKey, 'sectionKey');
            var prefix = path.replace(/\+/g, ''); // "g" flag to remove _all_ '+' signs
            path += '#' +prefix + '-' + sectionKey;
        }
        return path;
    };

    function endsWith(string, suffix) {
        return string.indexOf(suffix, string.length - suffix.length) !== -1;
    }

    function addSuffixIfRequired(string, suffix) {
        return endsWith(string, suffix) ? string : string + suffix;
    }

    return {
        /**
         * @param key {string} key to get the path for
         * @returns {string} relative help path that can be appended to any relevant docs base URL
         */
        getPath: getPath,

        /**
         * @param key {string} key to get the path for
         * @param sectionKey {string} optional key of the anchor on the target page
         * @returns {string} full help path including the base URL
         */
        getFullPath: function(key, sectionKey) {
            var baseUrl = this.baseUrl();
            return addSuffixIfRequired(baseUrl, '/') + this.getPath(key, sectionKey);
        },

        /**
         * @returns {string} configured base URL for the help paths
         */
        baseUrl: _.partial(getPath, 'applinks.docs.root')
    }
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/events.js' */
define('applinks/common/events', [
    'applinks/lib/jquery',
    'applinks/lib/lodash',
    'applinks/lib/window',
    'applinks/common/preconditions'
], function(
    $,
    _,
    window,
    Preconditions
) {
    var PREFIX = 'applinks.event.';

    function applinksEvent(eventId) {
        return PREFIX + Preconditions.nonEmptyString(eventId, 'eventId');
    }

    /**
     * Provides common Applinks event IDs and a simple event system facade API. This is a preferred way to subscribe to
     * and raise Applinks-specific events as it does not depend on a specific event bus or event target (such as
     * `document`), as well as facilitates unit testing.
     */
    return {
        PREREADY: applinksEvent('preready'),
        READY: applinksEvent('ready'),

        /**
         * Raised when applinks list is first loaded
         */
        APPLINKS_LOADED: applinksEvent('loaded'),
        /**
         * Raised when applinks list is updated
         */
        APPLINKS_UPDATED: applinksEvent('updated'),

        /**
         * This event is only raised when linking to Atlassian applications
         * Can be consumed by other plugins
         */
        NEW_APPLINK_CREATED: applinksEvent('created'),

        /**
         * Raised when v3 onboarding has finished or, or has never run on the current page (and won't).
         */
        V3_ONBOARDING_FINISHED: applinksEvent('v3-onboarding-finished'),

        // legacy events
        Legacy: {
            MESSAGE_BOX_DISPLAYED: applinksEvent('message-box-displayed')
        },

        applinksEvent: applinksEvent,

        on: function(events, handler, context) {
            var handlerWithContext = context ? _.bind(handler, context) : handler;
            $(window.document).on(events, handlerWithContext);
        },

        off: function(events, handler) {
            $(window.document).off(events, handler);
        },

        trigger: function(event, data) {
            $(window.document).trigger(event, data);
        }
    }
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/i18n.js' */
define('applinks/common/i18n', [
    'applinks/lib/lodash',
    'applinks/lib/jquery',
    'applinks/lib/wrm',
    'applinks/common/modules',
    'applinks/common/preconditions',
    'applinks/common/products'
], function(
    _,
    $,
    WRM,
    ApplinksModules,
    Preconditions,
    ApplinksProducts
) {
    var getAllEntityTypes = _.memoize(function() {
        var val = WRM.data.claim(ApplinksModules.dataFqn(ApplinksModules.COMMON_EXPORTED, 'entity-types'));
        return Preconditions.hasValue(val, 'entity-types', 'Entity Types data not found');
    });

    var getAllAuthTypes = _.memoize(function() {
        var val = WRM.data.claim(ApplinksModules.dataFqn(ApplinksModules.COMMON_EXPORTED, 'authentication-types'));
        return Preconditions.hasValue(val, 'authentication-types', 'Authentication Types data not found');
    });

    return {
        
        /**
         * @param typeId ID of the application type to resolve
         * @returns {string} resolved i18n-ed type name, or the original `typeId` if there is no mapping
         */
        getApplicationTypeName: function(typeId) {
            return ApplinksProducts.getTypeName(typeId);
        },

        /**
         * @param typeId ID of the entity type to resolve
         * @returns {string} resolved i18n-ed singular entity type name, or the original `typeId` if there is no mapping
         */
        getEntityTypeName: function(typeId) {
            return getAllEntityTypes().singular[typeId] || typeId;
        },

        /**
         * @param typeId ID of the entity type to resolve
         * @returns {string} resolved i18n-ed plural entity type name, or the original `typeId` if there is no mapping
         */
        getPluralizedEntityTypeName: function(typeId) {
            return getAllEntityTypes().plural[typeId] || typeId;
        },

        /**
         * @param type ID of the authentication type to resolve (usually in a form of full class name)
         * @returns {string} resolved i18n-ed authentication type name, or the original `type` if there is no mapping
         */
        getAuthenticationTypeName: function(type) {
            return getAllAuthTypes()[type] || type;
        }
    };
});
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/modules.js' */
/**
 * Applinks plugin modules core constants and definitions.
 */
define('applinks/common/modules', function() {
    return {
        /**
         * Applinks plugin key
         */
        PLUGIN_KEY: 'com.atlassian.applinks.applinks-plugin',

        // key web resource keys
        COMMON_EXPORTED: 'applinks-common-exported',
        COMMON: 'applinks-common',

        /**
         * Fully qualifies a module name using the plugin key.
         *
         * @param {string} moduleName module name to qualify
         * @returns {string} fully qualified name
         */
        fqn: function(moduleName) {
            return this.PLUGIN_KEY + ':' + moduleName;
        },

        /**
         * Fully qualifies web-resource data using module name and data key.
         *
         * @param {string} moduleName module name
         * @param {string} dataKey key of the data element
         * @returns {string} fully qualified name
         */
        dataFqn: function(moduleName, dataKey) {
            return this.fqn(moduleName) + '.' + dataKey;
        }
    };
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/preconditions.js' */
define('applinks/common/preconditions', [
    'applinks/lib/lodash'
], function(
    _
) {
    function nonEmptyString(value, varName, customMessage) {
        return _checkArgument(
            _.isString(value) && !_.isEmpty(value),
            customMessage,
            _withVarName(varName, ': expected a non-empty string, was: <' + value + '>'),
            value
        );
    }

    function isFunction(value, varName, customMessage) {
        return _checkArgument(
            _.isFunction(value),
            customMessage,
            _withVarName(varName, ': expected a function, was: ' + value),
            value
        );
    }

    function isArray(value, varName, customMessage) {
        return _checkArgument(
            _.isArray(value),
            customMessage,
            _withVarName(varName, ': expected an array, was: ' + value),
            value
        );
    }

    function hasValue(value, varName, customMessage) {
        return _checkArgument(
            value,
            customMessage,
            _withVarName(varName, ': expected a value'),
            value
        );
    }

    function _checkArgument(test, message, defaultMessage, actualValue) {
        var actualMessage = message ? message : defaultMessage;
        if (!test) {
            throw new Error(actualMessage)
        }
        return actualValue || test;
    }

    function _withVarName(varName, msg) {
        return (varName || '[unspecified]') + msg;
    }

    return {
        checkArgument: _.partial(_checkArgument, _, _, '', _),
        nonEmptyString: nonEmptyString,
        isArray: isArray,
        isFunction: isFunction,
        hasValue: hasValue
    };
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/products.js' */
define('applinks/common/products', [
    'applinks/lib/lodash',
    'applinks/lib/wrm',
    'applinks/common/modules',
    'applinks/common/preconditions'
], function(
    _,
    WRM,
    ApplinksModules,
    Preconditions
) {
    var getAllTypes = _.memoize(function() {
        var val = WRM.data.claim(ApplinksModules.dataFqn(ApplinksModules.COMMON_EXPORTED, 'applinks-types'));
        return Preconditions.hasValue(val, 'types', 'Application Types data not found');
    });

    /**
     * @param typeId ID of the application type to resolve
     * @returns {string} resolved i18n-ed type name, or the original `typeId` if there is no mapping
     */
    function getTypeName(typeId) {
        return getAllTypes()[typeId] || typeId;
    }

    /**
     * Map of Atlassian product keys to application type IDs
     */
    return {
        BAMBOO: 'bamboo',
        BITBUCKET: 'stash', // special case, see java class com.atlassian.applinks.application.bitbucket.BitbucketApplicationTypeImpl.TYPE_ID
        CONFLUENCE: 'confluence',
        FECRU: 'fecru',
        JIRA: 'jira',
        REFAPP: 'refapp',
        STASH: 'stash',
        getTypeName: getTypeName
    };
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/non-amd/rest-service.js' */
// NOTE: this is used outside of Applinks. See atlassian-plugin.xml for more details about the associated restrictions

(function(AppLinksI18n, ApplinksDocs, ApplinksEvents) {
    /**
     * The triggering of AppLinks initialisation can be customised by setting a function on
     * AJS.AppLinksInitialisationBinder. The binder function should take a single argument which is a zero-arg function to
     * run and should execute this function when appropriate.
     */
    AppLinks = AJS.$.extend(window.AppLinks || {}, {
        Event: {
            NAMESPACE: 'applinks'
        },
        I18n: AppLinksI18n,
        Docs: ApplinksDocs
    });
    AppLinks.Event = AJS.$.extend(window.AppLinks.Event, ApplinksEvents);

    // Is there an overridden initialisation binder?
    if (AJS.AppLinksInitialisationBinder) {
        AppLinks.initialisationBinder = AJS.AppLinksInitialisationBinder;
    } else {
        // The default bind if no specific binder is specified
        AppLinks.initialisationBinder = function(f) {
            AJS.toInit(f);
        }
    }

    AppLinks.initialisationBinder(function() {
        //$ is passed in by AJS.toInit but initilizationBinder can be over loaded by products so that $ is unsafe.
        var $ = AJS.$;
        AppLinks = $.extend(window.AppLinks || {}, {
            failure: function(data) {
                if (data.status == 401) {
                    window.location.reload();
                } else {
                    var message = AppLinks.parseError(data);
                    var errorDivs = $('.page-error');

                    if (errorDivs.length > 0) {
                        errorDivs.html(message).fadeIn('slow');
                    } else {
                        alert('REST request failed: ' + message);
                    }
                }
            },
            jsonRequest: function(url, type, data, success, error) {
                if (data) {
                    data = JSON.stringify(data);
                }
                $(".page-error").fadeOut('fast');
                if (!error) error = AppLinks.failure;
                return jQuery.ajax({
                    url: url,
                    type: type,
                    data: data,
                    dataType: 'json',
                    contentType: "application/json; charset=utf-8",
                    cache: false,
                    success: success,
                    error: error
                });
            },
            xmlRequest: function(url, type, data, success, error) {
                if (data) {
                    data = JSON.stringify(data);
                }
                $(".page-error").fadeOut('fast');
                if (!error) error = AppLinks.failure;
                return jQuery.ajax({
                    url: url,
                    type: type,
                    data: data,
                    dataType: 'xml',
                    contentType: "application/xml; charset=utf-8",
                    cache: false,
                    success: success,
                    error: error
                });
            },
            parseError: function(errorData) {
                var error;
                try {
                    error = JSON.parse(errorData.responseText);
                } catch (e) {
                    if (errorData.statusText) {
                        return error = errorData.statusText;
                    } else {
                        return errorData;
                    }
                }
                if (error.message) {
                    if ($.isArray(error.message)) {
                        return error.message.join(' ');
                    }
                    return error.message;
                }
                else {
                    return errorData.statusText;
                }
            },
            put: function(url, data, success, error) {
                return AppLinks.jsonRequest(url, 'PUT', data, success, error);
            },
            post: function(url, data, success, error) {
                return AppLinks.jsonRequest(url, 'POST', data, success, error);
            },
            update: function(data, success, error) {
                AppLinks.put(AppLinks.self_link(data), data, success, error);
            },
            get: function(url, success, error) {
                return AppLinks.jsonRequest(url, 'GET', null, success, error);
            },
            getXml: function(url, success, error) {
                return AppLinks.xmlRequest(url, 'GET', null, success, error);
            },
            self_link: function(item) {
                for (var i = 0, _i = item.link.length; i < _i; i++) {
                    var link = item.link[i];
                    if (link.rel == "self") return link.href;
                }

                throw "No self-link found";
            },
            del: function(urlOrObject, success, error) {
                var url;
                if (typeof(urlOrObject) == 'string') url = urlOrObject;
                else url = AppLinks.self_link(urlOrObject);
                return AppLinks.jsonRequest(url, 'DELETE', null, success, error);
            },
            SPI: $.extend({}, {
                API_VERSION: "1.0",
                REST_RESOURCE_URL: AJS.contextPath() + "/rest/applinks/",
                BASE_URL: AJS.contextPath() + "/rest/applinks/1.0",
                OAUTH_REST_RESOURCE_URL: AJS.contextPath() + "/rest/applinks-oauth/",
                OAUTH_BASE_URL: AJS.contextPath() + "/rest/applinks-oauth/1.0",

                /**
                 * Update the API version and associated urls.
                 * @param version
                 */
                setApiVersion: function(version){
                    AppLinks.SPI.API_VERSION = version;
                    AppLinks.SPI.setBaseUrl(AppLinks.SPI.REST_RESOURCE_URL + AppLinks.SPI.API_VERSION);
                },
                setBaseUrl: function(url){
                    AppLinks.SPI.BASE_URL = url;
                },
                setOAuthBaseUrl: function(url){
                    AppLinks.SPI.OAUTH_BASE_URL = url;
                },
                /**
                 * Build a base URL for rest calls using the specified baseUrl.
                 * @param baseUrl
                 * @returns {string}
                 */
                getRemoteRestBaseUrl: function(baseUrl) {
                    return baseUrl + "/rest/applinks/" + AppLinks.SPI.API_VERSION;
                },
                /**
                 * Build a base URL for plugin servlet calls using the specified baseUrl.
                 * @param baseUrl
                 * @returns {string}
                 */
                getRemotePluginServletBaseUrl: function(baseUrl) {
                    return baseUrl + "/plugins/servlet";
                },
                getAllLinks: function(success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink";
                    return AppLinks.get(url, success, failure);
                },
                getAllLinksWithAuthInfo: function(success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/listApplicationlinks";
                    return AppLinks.get(url, success, failure);
                },
                getApplicationLinkState: function(id, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/listApplicationlinkstates/id/" + id;
                    return AppLinks.get(url, success, failure);
                },
                getLinksOfType: function(typeId, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink/type/" + typeId;
                    return AppLinks.get(url, success, failure);
                },
                tryToFetchManifest: function(url, success, failure) {
                    var restUrl = AppLinks.SPI.BASE_URL + '/applicationlinkForm/manifest.json?url=' + encodeURIComponent(url);
                    return AppLinks.get(restUrl, success, failure);
                },
                getManifestFor: function(id, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/manifest/' + id + ".json";
                    return AppLinks.get(url, success, failure);
                },
                getLocalManifest: function(success, failure){
                    var url = AppLinks.SPI.BASE_URL + '/manifest.json';
                    return AppLinks.get(url, success, failure);
                },
                /**
                 * Attempt to get the Manifest of the remote application, via a direct REST call.
                 * Requires CORS enabled on the REST resource.
                 * @param url
                 * @param success
                 * @param failure
                 * @returns {*}
                 */
                getRemoteManifest: function(remoteBaseUrl, success, failure){
                    var remoteManifestUrl = AppLinks.SPI.getRemoteRestBaseUrl(remoteBaseUrl) + '/manifest.json';
                    return AppLinks.get(remoteManifestUrl, success, failure);
                },
                /**
                 * Attempt to get the OAuth Consumer Info of the remote application, via a direct call.
                 * Requires CORS enabled on the REST resource.
                 * @param url
                 * @param success
                 * @param failure
                 * @returns {*}
                 */
                getRemoteOAuthConsumerInfo: function(remoteBaseUrl, success, failure){
                    var remoteManifestUrl = AppLinks.SPI.getRemotePluginServletBaseUrl(remoteBaseUrl) + '/oauth/consumer-info';
                    return AppLinks.getXml(remoteManifestUrl, success, failure);
                },
                getApplinkStatus: function (applinkId, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/status/' + applinkId;
                    return AppLinks.get(url, success, failure);
                },
                createStaticUrlAppLink: function(applicationType, success, failure) {
                    var restUrl = AppLinks.SPI.BASE_URL + '/applicationlinkForm/createStaticUrlAppLink?typeId=' + applicationType;
                    return AppLinks.post(restUrl, null, success, failure);
                },
                createLink: function(applicationLink, username, password, createTwoWayLink, customRpcUrl, rpcUrl, configFormValues, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlinkForm/createAppLink';
                    var data = {
                        applicationLink: applicationLink,
                        username: username,
                        password: password,
                        createTwoWayLink: createTwoWayLink,
                        customRpcURL: customRpcUrl,
                        rpcUrl: rpcUrl,
                        configFormValues: configFormValues
                    };
                    return AppLinks.post(url, data, success, failure);
                },
                verifyTwoWayLinkDetails : function (remoteUrl, rpcUrl, username, password, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlinkForm/details';
                    var data = {
                        username: username,
                        password: password,
                        remoteUrl: remoteUrl,
                        rpcUrl: rpcUrl
                    };
                    return AppLinks.post(url, data, success, failure);
                },
                getApplicationLinkInfo: function (appId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlinkInfo/id/" + appId;
                    return AppLinks.get(url, success, error);
                },
                deleteLink: function(applicationLink, reciprocate, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink/" + applicationLink.id;
                    if (reciprocate) url += "?reciprocate=true";
                    return AppLinks.del(url, success, error);
                },
                makePrimary: function(applicationLink, success) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink/primary/" + applicationLink.id;
                    return AppLinks.post(url, null, success);
                },
                relocate: function(applicationLink, newUrl, suppressWarnings, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/relocateApplicationlink/" + applicationLink.id + "?newUrl=" + encodeURIComponent(newUrl) +
                        "&nowarning=" + (suppressWarnings ? "true" : "false");
                    return AppLinks.post(url, null, success, error);
                },
                legacyUpgrade: function(applicationLink, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/upgrade/legacy/" + applicationLink.id;
                    return AppLinks.post(url, null, success, error);
                },
                ualUpgrade: function(applicationLink, body, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/upgrade/ual/" + applicationLink.id;
                    return AppLinks.post(url, body, success, error);
                },
                getEntityTypesForApplicationType: function(applicationType, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/type/entity/" + applicationType;
                    return AppLinks.get(url, success, error);
                },
                getLocalEntitiesWithLinksToApplication: function(applicationLinkId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/localEntitiesWithLinksTo/" + applicationLinkId + ".json";
                    return AppLinks.get(url, success, error);
                },
                getEntityLinksForApplication: function(applicationLinkId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entities/" + applicationLinkId + ".json";
                    AppLinks.get(url, success, error);
                },
                getEntityLinksForApplicationUsingAnonymousAccess: function(applicationLinkId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entities/anonymous/" + applicationLinkId + ".json";
                    return AppLinks.get(url, success, error);
                },
                createNonUalEntityLink: function(localType, localKey, applicationId, remoteTypeId, remoteKey, name, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/" + localType + "/" + localKey + "?reciprocate=false";
                    var data = {
                        applicationId: applicationId,
                        typeId: remoteTypeId,
                        key: remoteKey,
                        name: name,
                        isPrimary: false
                    };
                    return AppLinks.put(url, data, success, error);
                },
                createEntityLink: function(localType, localKey, entity, reciprocate, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/" + localType + "/" + localKey + "?reciprocate=";
                    url += (reciprocate ? "true" : "false");
                    return AppLinks.put(url, entity, success, failure);
                },
                getConfiguredEntityLinks: function(localType, localKey, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/primaryLinks/" + localType + "/" + localKey + ".json";
                    return AppLinks.get(url, success, error);
                },
                deleteEntityLink: function(localTypeId, localKey, entity, reciprocate, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/" + localTypeId + "/" + localKey + "?typeId=" + entity.typeId + "&key=" + entity.key + "&applicationId=" + entity.applicationId + "&reciprocate=" + reciprocate;
                    return AppLinks.del(url, success, error);
                },
                makePrimaryEntityLink: function(localTypeID, localKey, entity, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/primary/" + localTypeID + "/" + localKey + "?typeId=" + entity.typeId + "&key=" + entity.key + "&applicationId=" + entity.applicationId;
                    return AppLinks.post(url, null, success, error);
                },
                canDeleteAppLink: function(applicationId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/permission/reciprocate-application-delete/" + applicationId;
                    return AppLinks.get(url, success, error);
                },
                canDeleteEntityLink: function(localTypeId, localKey, entity, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/permission/reciprocate-entity-delete/" + entity.applicationId + "/" + localTypeId + "/" + localKey + "/" + entity.typeId + "/" + entity.key;
                    return AppLinks.get(url, success, error);
                },
                canCreateReciprocateEntityLink: function(applicationId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/permission/reciprocate-entity-create/" + applicationId;
                    return AppLinks.get(url, success, error);
                },
                processPermissionCode: function(settings) {
                    var config = {
                        noPermission: function() {},
                        missing: function() {},
                        credentialsRequired: function(authUrl) {},
                        authenticationFailed: function(authUrl) {},
                        noAuthentication: function(authUrl) {},
                        noAuthenticationConfigured: function() {},
                        noConnection: function() {},
                        allowed: function() {},
                        unrecognisedCode: function(code) {},
                        updateView: function(message, icon, button) {}
                    };

                    if (!settings) settings = {};

                    settings = $.extend(config, settings);

                    return function(data) {
                        var code = data.code;
                        if (code == "NO_PERMISSION") {
                            settings.noPermission();
                        } else if (code == "MISSING") {
                            settings.missing();
                        } else if (code == "CREDENTIALS_REQUIRED") {
                            settings.credentialsRequired(data.url);
                        } else if (code == "AUTHENTICATION_FAILED") {
                            settings.authenticationFailed(data.url);
                        } else if (code == "NO_AUTHENTICATION") {
                            settings.noAuthentication(data.url);
                        } else if (code == "NO_AUTHENTICATION_CONFIGURED") {
                            settings.noAuthenticationConfigured();
                        } else if (code == "NO_CONNECTION") {
                            settings.noConnection();
                        } else if (code == "ALLOWED") {
                            settings.allowed();
                        } else {
                            settings.unrecognisedCode(data.code);
                        }
                    };
                },
                addAuthenticationTrigger: function(target, authUrl, callbacks) {
                    if (!callbacks) {
                        callbacks = {};
                    }

                    if (typeof callbacks.onSuccess == "undefined") {
                        callbacks.onSuccess = function() {
                            location.reload();
                        }
                    }

                    if (typeof callbacks.onFailure == "undefined") {
                        callbacks.onFailure = function() {
                            return true;
                        }
                    }
                    //Unbind previous click listener, otherwise we might end up opening multiple windows.
                    $(target).unbind('click');
                    $(target).click(function() {
                        if (callbacks.before) {
                            callbacks.before();
                        }
                        AppLinks.authenticateRemoteCredentials(authUrl, callbacks.onSuccess, callbacks.onFailure);
                    });
                },
                showCreateEntityLinkSuggestion: function() {
                    return true;
                },
                getApplicationLink: function(id, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlink/' + id;
                    return AppLinks.get(url, success, failure);
                },
                createApplicationLink: function(id, name, rpcUrl, displayUrl, typeId, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlink';
                    var data = {
                        id: id,
                        name: name,
                        rpcUrl: rpcUrl,
                        displayUrl: displayUrl,
                        typeId: typeId
                    };
                    return AppLinks.put(url, data, success, failure);
                },
// TODO APLDEV-3 extract OAuth creation code into OAuth specific js files in the Oauth plugin.
                createConsumer: function(id, key, name, description, sharedSecret, publicKey, twoLOAllowed, executingTwoLOUser, twoLOImpersonationAllowed, outgoing, success, failure) {
                    var url = AppLinks.SPI.OAUTH_BASE_URL + '/applicationlink/' + id + '/authentication/consumer';
                    var data = {
                        key: key,
                        name: name,
                        description: description,
                        sharedSecret: sharedSecret,
                        publicKey: publicKey,
                        outgoing: outgoing,
                        twoLOAllowed: twoLOAllowed,
                        executingTwoLOUser: executingTwoLOUser,
                        twoLOImpersonationAllowed: twoLOImpersonationAllowed
                    };
                    return AppLinks.put(url, data, success, failure);
                },
                createConsumerAutoConfigure: function(id, twoLOAllowed, executingTwoLOUser, twoLOImpersonationAllowed, success, failure) {
                    var url = AppLinks.SPI.OAUTH_BASE_URL + '/applicationlink/' + id + '/authentication/consumer?autoConfigure=true';
                    var data = {
                        twoLOAllowed: twoLOAllowed,
                        executingTwoLOUser: executingTwoLOUser,
                        twoLOImpersonationAllowed: twoLOImpersonationAllowed
                    };
                    return AppLinks.put(url, data, success, failure);
                },
                registerProvider: function(id, provider, config, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlink/' + id + '/authentication/provider';
                    var data = {
                        config : config,
                        provider : provider
                    };
                    return AppLinks.put(url, data, success, failure);
                },
                enableFeature: function(featureName, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/features/' + featureName;
                    return AppLinks.put(url, {}, success, failure);
                },
                disableFeature: function(featureName, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/features/' + featureName;
                    return AppLinks.del(url, success, failure);
                }
            }, (window.AppLinks && window.AppLinks.SPI) || {})
        });

        AppLinks.UI = {
            showInfoBox: function(message) {
                $('.aui-message.success').remove();
                AppLinks.UI.createMessage('success', message, 'page-info');
            },
            hideInfoBox: function() {
                $('.aui-message.success').remove();
            },
            showErrorBox: function(message) {
                AppLinks.UI.createMessage('error', message, 'page-error');
            },
            hideErrorBox: function() {
                $('.aui-message.error').remove();
            },
            showWarningBox: function(messages) {
                if ($.isArray(messages) && messages.length > 0) {
                    var ulEl = $("<ul></ul>");
                    $(messages).each(function(index) {
                        ulEl.append($("<li/>", {
                            text: messages[index]
                        }));
                    });
                    var messageEl = $('<div class="page-warning"></div>').append(ulEl);
                    AppLinks.UI.createMessage('warning', messageEl.html(), 'page-warning');
                } else {
                    AppLinks.UI.createMessage('warning', messages, 'page-warning');
                }
            },
            hideWarningBox: function() {
                $('.aui-message.warning').remove();
            },
            shortenString: function(message, maxLength) {
                if (message.length  > maxLength) {
                    message = message.substring(0, maxLength) + "...";
                }
                return message;
            },
            createMessage: function(type, message, cssClass) {
                var messageEl = $('<div class="' + cssClass + '">');
                messageEl.html(message);
                AJS.messages[type](".applinks-message-bar", {
                    title: "",
                    body: messageEl.wrap('<div></div>').parent().html(),
                    closeable: true
                });
                $(document).trigger(AppLinks.Event.Legacy.MESSAGE_BOX_DISPLAYED);
            },
            displayValidationErrorMessages: function (errorClass, rootEl, messages) {
                if ($.isArray(messages)) {
                    $(messages).each(function(i,v) {
                        var d = $('<div class="error applinks-error">');
                        d.text(v);
                        $(rootEl).find("." + errorClass).append(d);
                    });
                } else if(typeof messages != 'undefined'){
                    var d = $('<div class="error applinks-error">');
                    d.text(messages.toString());
                    $(rootEl).find("." + errorClass).append(d);
                }
            },
            displayValidationError: function(errorClass, rootEl, errorFn) {
                return function(xhr) {
                    if (xhr.status == 401) {
                        window.location.reload();
                        return;
                    }

                    $('.applinks-error').remove();
                    $('.loading').remove();
                    var respJSON = xhr.responseText;
                    var respObj = $.parseJSON(respJSON);
                    var messages = respObj.message;
                    if (typeof respObj.fields == "undefined") {
                        AppLinks.UI.displayValidationErrorMessages(errorClass, rootEl, messages);
                    } else {
                        var fields = respObj.fields;
                        $(fields).each(function(index) {
                            var d = $('<div class="error applinks-error" id="' + fields[index] + '-error">');
                            d.text(messages[index]);
                            if ($(rootEl).find('.' + fields[index]).length > 0) {
                                d.insertAfter($(rootEl).find('.' + fields[index]));
                            } else {
                                d.insertAfter($(rootEl).find('.' + errorClass).append(d));
                            }
                        });
                    }
                    $(rootEl).find('.' + errorClass).addClass("fully-populated-errors");
                    if (errorFn) {
                        errorFn();
                    }
                }
            },
            addProtocolToURL : function(url) {
                var newUrl = $.trim(url);
                var tempURL = newUrl.toLowerCase();
                var hasProtocol = false;
                if (tempURL.length >= 7) {
                    if (tempURL.substring(0,7).indexOf('http') != -1) {
                        hasProtocol = true;
                    }
                }
                //default protocol is http
                if (!hasProtocol) {
                    newUrl = 'http://' + newUrl;
                }
                return newUrl;
            },
            /**
             * Similar to the standard Javascript join() method, but nicer in that
             * it uses a different delimiter for the last node (by default "and"),
             * so that:
             * {code}
             * "1, 2 and 3" == prettyJoin(['1', '2', '3'], function(value) {return value;});
             * {code}
             *
             * @param inputArray
             * @param resolveFn
             * @param finalDelimiter
             */
            prettyJoin : function(inputArray, resolveFn, finalDelimiter) {
                if (!finalDelimiter) {
                    finalDelimiter = "and";
                }
                var maxLength = inputArray.length;
                var message = "";
                $.each(inputArray, function(index, value) {
                    if (index == (maxLength - 1) && maxLength > 1) {
                        message += " " + finalDelimiter + "  " + resolveFn(value);
                    } else {
                        message += resolveFn(value);
                        if (index + 2 < maxLength) {
                            message += ", ";
                        }
                    }
                });
                return message;
            },
            showLoadingIcon: function(element) {
                $('<span class="loading">&nbsp;</span>').insertAfter(element);
            },
            hideLoadingIcon: function(element) {
                $(element).next('.loading').remove();
            },
            findUrl: function(text) {
                var url = undefined;
                var lcText = text.toLowerCase();
                var startOfUrl = lcText.indexOf('http:');
                if (startOfUrl == -1) {
                    startOfUrl = lcText.indexOf('https:');
                }
                if (startOfUrl > -1) {
                    var endOfUrl = lcText.indexOf(' ', startOfUrl);
                    if (endOfUrl == -1) {
                        endOfUrl = lcText.length;
                    }
                    url = text.substring(startOfUrl, endOfUrl); // use _case-sensitive_ version to retrieve the actual URL
                }
                return url;
            },
            findApplicationType : function(id) {
                id = id.toLowerCase();
                if (id.indexOf("jira") != -1) {
                    return "jira";
                } else if (id.indexOf("fisheye") != -1) {
                    return "fecru";
                } else if (id.indexOf("confluence") != -1) {
                    return "confluence";
                } else if (id.indexOf("refapp") != -1) {
                    return "refapp";
                } else {
                    return undefined;
                }
            },
            escapeSelector: function(selector) {
                // based on http://samuelsjoberg.com/archive/2009/09/escape-jquery-selectors
                return selector.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g, "\\$1");
            },
            sanitiseHTML: function(input) {
                var replacements = {
                    "<": "&lt;",
                    '"': "&quot;",
                    "&": "&amp;"
                };
                return input.replace(/[<"&]/g, function(match) {
                    return replacements[match];
                });
            },
            removeCssClass: function(element, prefix) {
                $(element).removeClass( function(index, className) {
                    var classes = className.split(' ');
                    var classToRemove = "";
                    $.each(classes, function(index, value) {
                        if (value.indexOf(prefix) != -1) {
                            classToRemove = value;
                        }
                    });
                    return classToRemove;
                } );
            }
        };

        /**
         * Add jQuery event system to AppLinks.UI namespace.
         */
        (function(){
            var eventBus = $({});
            $.each(['bind', 'unbind', 'trigger'], function(i, current){
                AppLinks.UI[current] = function(){
                    return eventBus[current].apply(eventBus, arguments);
                }
            });
        })();

        $(document).trigger(AppLinks.Event.PREREADY);
        $(document).trigger(AppLinks.Event.READY);
    });
})(require('applinks/common/i18n'), require('applinks/common/docs'), require('applinks/common/events'));
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/non-amd/autocomplete.js' */
// NOTE: this is used outside of Applinks. See atlassian-plugin.xml for more details about the associated restrictions

AJS.$(document).bind(AppLinks.Event.READY, function() {
/**
 * TODO: THIS CODE IS COPIED FROM CONFLUENCE and should be part of AUI/AJS.
 * IF AUI comes with the InputDrivenDropDown when can remove this file.
 * https://studio.atlassian.com/browse/AJS-471
 *
 * A simple cache manager that supports a
 * FIFO cache invalidation strategy.
 *
 * @class cacheManager
 * @namespace AJS.Confluence
 * @constructor
 * @param cacheSize the size of the cache before keys are invalidated
 */
AppLinks.autoComplete = {
        cacheManager : function (cacheSize) {
    var cache = {},
        cacheStack = [],
        cacheSize = cacheSize || 30;

    return {
        /**
         * Return the value stored in the cache for the given key
         * @method get
         * @param key {String}
         */
        get: function(key) {
            return cache[key];
        },
        /**
         * Put the given key, value in the cache
         * @method put
         * @param key {String}
         * @param value {Object}
         */
        put: function(key, value) {
            cache[key] = value;
            cacheStack.push(key);
            if (cacheStack.length > cacheSize) {
                delete cache[cacheStack.shift()];
            }
        },
        /**
         * Clear the cache.
         */
        clear : function() {
            cache = {};
            cacheStack = [];
        }
    };
}};


(function($){
    /**
     * Check that all items in the drop down can be displayed - show ellipses at the end of any that
     * are too long. Also remove any unused properties that the dropDown may have stored for each
     * item in the list.
     *
     * @method truncateText
     * @private
     */
    var truncateText = function (dd) {
        AJS.log("InputDrivenDropDown: truncating text");
        var width = dd.$.closest(".aui-dropdown").width(),
            rightPadding = 20; // add some padding so the ellipsis doesn't run over the edge of the box

        $("a span:not(.icon)", dd.$).each(function () {
            var $a = $(this),
                elpss = AJS("var", "&#8230;"),
                elwidth = elpss.width(),
                isLong = false;

            $a.wrapInner($("<em>"));
            $("em", $a).each(function () {
                var $label = $(this);

                $label.show();
                if (this.offsetLeft + this.offsetWidth > width) {
                    var childNodes = this.childNodes,
                        success = false;

                    for (var j = childNodes.length - 1; j >= 0; j--) {
                        var childNode = childNodes[j],
                            truncatedChars = 1,
                            valueAttr = (childNode.nodeType == 3) ? "nodeValue" : "innerHTML",
                            nodeText = childNode[valueAttr];

                        do {
                            if (truncatedChars <= nodeText.length) {
                                childNode[valueAttr] = nodeText.substr(0, nodeText.length - truncatedChars++);
                            } else { // if we cannot fit even one character of the next word, then try truncating the node just previous to this
                                break;
                            }
                        } while (this.offsetLeft + this.offsetWidth + elwidth > width - rightPadding);

                        if (truncatedChars <= nodeText.length) {
                            // we've managed truncate part of the word and fit it in
                            success = true;
                            break;
                        }
                    }

                    if (success) {
                        isLong = true;
                    } else {
                        $label.hide();
                    }
                }
            });
            if (isLong) {
                $a.append(elpss);
                this.elpss = elpss;
            }
        });
    };

    var highlightTokens = function(dd, tokens) {
        if (!tokens.length || !tokens[0]) return;

        AJS.log("InputDrivenDropDown: highlighting tokens");

        // escape regex chars .*+?|()[]{}\ first
        for (var i = 0, ii = tokens.length; i < ii; i++) {
            var token = tokens[i];
            tokens[i] = token ? token.replace(/[\.\*\+\?\|\(\)\[\]{}\\]/g, "\\$") : "";
        }

        var regex = new RegExp("(" + tokens.join("|") + ")", "gi");

        $("li a:not(.dropdown-prevent-highlight) span", dd.$).each(function() {
            var span = $(this),
                html = span.html().replace(regex, "<strong>$1</strong>");
            span.html(html);
        });
    };

    /**
     * Builds and shows the dropdown.
     *
     * @param idd the InputDrivenDropdown
     * @param dropdownData in the form { matrix, query, queryTokens }
     * @private
     */
    var makeDropdown = function (idd, dropdownData) {
        var options = idd.options,
            old_dd = idd.dd;

        if (old_dd) {
            old_dd.hide();
            old_dd.$.remove();
        }

        options.ajsDropDownOptions = options.ajsDropDownOptions || {};
        if (options.ajsDropDownOptions && !options.ajsDropDownOptions.alignment) { // default to left alignment
            options.ajsDropDownOptions.alignment = "left";
        }
        //this needs to be moved into aui
        options.ajsDropDownOptions.selectionHandler = options.ajsDropDownOptions.selectionHandler || function(e, element) {
            if(e.type != "click") {
                e.preventDefault();
                $("a",element).click();
                document.location = $("a",element).attr("href");
            }
        };

        /* Fixing an AUI bug in here:  AJS.dropdown puts the raw 'matrix[i].name' as html, without escaping it !
           The solution is to override their displayHandler
         */
        /**
         * Escape obj.name and return it
         */
        options.ajsDropDownOptions.displayHandler = function (obj) {
            return AJS.escapeHtml(obj.name);
        }

        var dd = idd.dd = new AJS.dropDown(dropdownData.matrix, options.ajsDropDownOptions)[0];

        // could move into dropdown.js in AUI
        if (options.ajsDropDownOptions && options.ajsDropDownOptions.className) {
            dd.$.addClass(options.ajsDropDownOptions.className);
        }

        // place the created drop down using the configured dropdownPlacement function
        // if there is none then use a default behaviour
        if (options.dropdownPlacement) {
            options.dropdownPlacement(dd.$);
        } else {
            AJS.log("No dropdownPlacement function specified. Appending dropdown to the body.");
            $("body").append(dd.$);
        }

        highlightTokens(dd, dropdownData.queryTokens || [dropdownData.query]);
        truncateText(dd);

        if (options.dropdownPostprocess) {
            options.dropdownPostprocess(dd.$);
        }
        dd.show(idd._effect);

        if (typeof options.onShow == "function") {
            options.onShow.call(dd, dd.$);
        }

        return dd;
    };

    /**
     * Provides a controller-agnostic object that listens for controller changes and populates a dropdown
     * via a callback. Most aspects can be customized via the options object parameter.
     * <br>
     * Options are:
     * <li>
     *   getDataAndRunCallback - (required) callback method used to provide data for the dropdown. It must take
     *                          two parameters, user input value and the callback function to execute.
     * </li>
     * <li>
     *   onShow - function to call when the drop-down is displayed
     * </li>
     * <li>
     *   dropdownPlacement - a function that will be called with the drop down and which should place it in the
     *                          correct place on the page. The supplied arguments are 1) the input that issued the
     *                          search, 2) the dropDown to be placed.
     * </li>
     * <li>
     *   ajsDropDownOptions - any options the underlying dropDown component can handle expects
     * </li>
     * <li>
     *   onDeath - callback to run when dropdown dies
     * </li>
     * @class InputDrivenDropDown
     * @namespace AJS
     */
    function InputDrivenDropDown(id, options) {
        this._effect = "appear";
        this._timer = null;

        this.id = id;
        this.options = options;
        this.inactive = false;
        this.busy = false;
        this.cacheManager = AppLinks.autoComplete.cacheManager();
    }

    /**
     * Clears the cache.
     */
    InputDrivenDropDown.prototype.clearCache = function () {
        this.cacheManager.clear();
    };

    /**
     * This method should be called when the user input for this dropdown has changed.
     * It will check the cache before fetching data (via options.getDataAndRunCallback)
     * and displaying the dropdown.
     *
     * @param value {String} the new value of the user input
     * @param force {Boolean} force a change to occur regardless of user input
     */
    InputDrivenDropDown.prototype.change = function (value, force) {
        var t = this;
        if (value != t._value || force) {
            t._value = value;
            t.busy = false;

            clearTimeout(t._timer);

            if (force || (/\S{0,}/).test(value)) {
                var cachedVal = t.cacheManager.get(value);
                if (cachedVal) {
                    makeDropdown(t, cachedVal);
                } else {
                    t.busy = true;
                    t._timer = setTimeout(function () { // delay sending a request to give the user a chance to finish typing their search term(s)
                        t.options.getDataAndRunCallback.call(t, value, t.show);
                    }, 200);
                }
            } else {
                t.dd && t.dd.hide();
            }
        }
    };

    /**
     * Gets the number of visible options in the dropdown.
     */
    InputDrivenDropDown.prototype.dropDownLength = function () {
        return this.dd.links ? this.dd.links.length : 0;
    };
    
    /**
     * Gets the specified menu item from the dropdown list.
     * 
     * @param index {Integer} the 0-based index of the dropdown option list
     */
    InputDrivenDropDown.prototype.dropDownItem = function (index) {
        return this.dropDownLength() > index ? this.dd.links[index] : null;
    };
    
    /**
     * Hides the drop down
     */
    InputDrivenDropDown.prototype.hide = function () {
        this.dd && this.dd.hide();
    };

    /**
     * Hides and removes the drop down from the DOM.
     */
    InputDrivenDropDown.prototype.remove = function () {
        var dd = this.dd;
        if (dd) {
            this.hide();
            dd.$.remove();
        }
        this.inactive = true;
        this.options.onDeath && this.options.onDeath();
    };

    /**
     * Shows the drop down with the given matrix data and query.
     * <br>
     * Matrix property should be an array of arrays, where the sub-arrays represent the different
     * search categories.
     *
     * Expected properties of category sub-array objects are:
     *  - href
     *  - name
     *  - className
     *  - html (optional, replaces href and name)
     *  - icon (optional)
     *
     *
     * @param matrix {Array} matrix to populate the drop down from
     * @param query {String} the user input string that triggered this show
     * @param queryTokens {Array} an array of strings of the query tokens. Use for highlighting search terms.
     */
    InputDrivenDropDown.prototype.show = function (matrix, query, queryTokens) {
        if (this.inactive) {
            AJS.log("Quick search abandoned before server response received, ignoring. " + this);
            return;
        }

        var dropdownData = {
            matrix: matrix,
            query: query,
            queryTokens: queryTokens
        };
        this.cacheManager.put(query, dropdownData);

        makeDropdown(this, dropdownData);
        this.busy = false;
    };

    /**
     * Returns an InputDrivenDropDown. See InputDrivenDropDown for more documentation.
     * @param options {Object} options for the InputDrivenDropDown
     * @constructor
     */
    AppLinks.inputDrivenDropdown = function (options) {
        return new InputDrivenDropDown("inputdriven-dropdown", options);
    };

})(jQuery);
});
;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-applinks-common-plugin:issue-link-applinks', location = 'js/issuelink-applinks.js' */
define("issue-link-app-links/app-links",["jquery","wrm/context-path","jira/util/formatter","aui/message","require"],function(e,n,i,t,a){function s(n,a,s){function l(e){f=u(n,e);var i=f&&f.requireCredentials;return c(i,a),{authenticationRequired:i}}function r(e,i){var t=u(n,e);t&&(t.requireCredentials=i,f&&f.id===e&&c(i,a))}function c(n,i){e(".issue-link-applinks-authentication-message",i).empty(),n?(p(e(".issue-link-applinks-authentication-message",i),i),e(".issue-link-oauth-toggle").hide(),e(".buttons-container input[type=submit]",i).attr("disabled","disabled")):(e(".issue-link-oauth-toggle").show(),e(".buttons-container input[type=submit]",i).removeAttr("disabled"))}function p(n,a){var u={onSuccess:function(){f.requireCredentials=!1,c(!1,a),s.onAuthenticationSuccessCallback&&s.onAuthenticationSuccessCallback(a,f.id,k)},onFailure:function(){s.onAuthenticationFailedCallback&&s.onAuthenticationFailedCallback(a,f.id,k)}},l=AJS.escapeHtml(f.name);if(f.authUrl){var o=e('<div class="aui-message warning closeable shadowed applinks-auth-request"><p><span class="aui-icon icon-applinks-key"></span></p></div>');o.append(i.format("Authorization required to create issue link. Please \u003ca href=\"{0}\" class=\"applink-authenticate\"\u003eauthenticate\u003c/a\u003e with \u003ca href=\"{1}\"\u003e{2}\u003c/a\u003e.",f.authUrl,f.url,l)),e("a",o).addClass("applink-authenticate"),e(".applink-authenticate",o).click(function(e){d(f.authUrl,u.onSuccess,u.onFailure),e.preventDefault()}),n.append(o)}else{var r=i.format("Unable to create a link to \u003ca href=\"{0}\"\u003e{1}\u003c/a\u003e as the application does not have any authentication configured.",f.url,l);t.warning(n,{body:r})}}function h(){o.OAuthCallback||"undefined"!=typeof window.oauthCallback||(o.OAuthCallback=function(){},o.OAuthCallback.prototype.success=function(){this.aouthWindow.close(),this.onSuccess(),delete window.oauthCallback,delete o.OAuthCallback},o.OAuthCallback.prototype.failure=function(){this.aouthWindow.close(),this.onFailure(),delete window.oauthCallback,delete o.OAuthCallback},o.OAuthCallback.prototype.show=function(e,n,i){this.onSuccess=n,this.onFailure=i,this.aouthWindow=window.open(e,"com_atlassian_applinks_authentication")},window.oauthCallback=new o.OAuthCallback)}function d(n,i,t){h(),e(".applinks-error").remove(),window.oauthCallback.show(n,i,t)}var k={},f=null;return e.extend(k,{selectServer:l,setAuthenticationRequired:r})}function u(e,n){var i;if(e.length)for(i=0;i<e.length;i++)if(e[i].id===n)return e[i];return null}function l(i,t,a){var l=i.getCurrentAppId(t),o=e(".issue-link-applinks-application-type",t).val(),r=i.getIssueId(t);e.get(n()+"/rest/issueLinkAppLink/1/appLink/info",{type:o,issueIdOrKey:r},function(n){var o,r=s(n,t,i);if(n&&n.length){var c=u(n,l);c&&(o=e(".issue-link-applinks-authentication-message",t).hasClass("required"),o&&(c.requireCredentials=!0),r.selectServer(l)),a.resolve(t,r)}else a.reject(t)})}var o=window.AppLinks;return{init:function(n,i){var t=e.Deferred(),a=0!==e(".issue-link-applinks-authentication-message",i).length;return a&&n.shouldExecute(i)&&l(n,i,t),t.promise()}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-remote-jira-js', location = 'js/issuelink-jira.js' */
require(["jquery","wrm/context-path","jira/util/events","jira/util/events/types","issue-link-app-links/app-links"],function(e,t,a,r,i){e(function(){var n={getCurrentAppId:function(t){return e("#jira-app-link",t).val()},shouldExecute:function(t){return 0!==e("#jira-app-link",t).length},getIssueId:function(t){return e("input[name=id]",t).val()}},c=function(e,a){e.length&&(e.attr("data-ajax-options.data.app-id",a),a&&""!==a?e.attr("data-ajax-options.url",t()+"/rest/remoteJiraIssueLink/1/remoteJira/picker"):e.attr("data-ajax-options.url",t()+"/rest/api/2/issue/picker"),e.trigger("updateOptions"),e.trigger("clearSelection"))},l=function(t,a){var r=e("#create-reciprocal",a);if(r.length)if(t&&""!==t){var i="true"==e("#create-reciprocal-default",a).val();i?r.attr("checked","checked"):r.removeAttr("checked"),r.removeAttr("disabled"),e("#create-reciprocal-fieldset",a).removeClass("disabled")}else r.attr("checked","checked"),r.attr("disabled","disabled"),e("#create-reciprocal-fieldset",a).addClass("disabled")};a.bind(r.NEW_PAGE_ADDED,function(t,a){var r=e("#jira-issue-keys",a);if(r.length){var s=e("#jira-app-link",a).val();c(r,s),l(s,a)}i.init(n,a).done(function(t,a){e("#jira-app-link",t).change(function(){var i=e(this).val();a.selectServer(i),c(r,i),l(i,t)})})})})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'js/issuelink-jira-jqlautocomplete.js' */
define("jira-issue-link-remote-jira/issue-link-jira/jql-autocomplete",["jquery","jira/util/forms","require"],function(e,r,t){return{initialize:function(i){var l=t("jira/autocomplete/jql-autocomplete"),o=t("jira/jql/jql-parser"),n=i.fieldID,a=i.errorID,u=i.autoCompleteUrl,s=i.autoCompleteData,d=i.formSubmitFunction,c=e("#"+n),m=c.length>0&&c[0]==document.activeElement,p=s.visibleFieldNames||[],j=s.visibleFunctionNames||[],f=s.jqlReservedWords||[],q=function(){var e=t("jira/featureflags/feature-manager");return e.isFeatureEnabled("jira.jql.autoselectfirst")},C=l({fieldID:n,parser:o(f),queryDelay:.65,jqlFieldNames:p,jqlFunctionNames:j,minQueryLength:0,allowArrowCarousel:!0,autoSelectFirst:q(),errorID:a,autoCompleteUrl:u});c.unbind("keypress",r.submitOnEnter),d&&c.keypress(function(e){if(null===C.dropdownController||!C.dropdownController.displayed||C.selectedIndex<0)return!(13===e.keyCode&&!e.ctrlKey&&!e.shiftKey)||(d(),!1)}),C.buildResponseContainer(),C.parse(c.text()),C.updateColumnLineCount(),c.click(function(){C.dropdownController.hideDropdown()}),m&&c.select()}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'templates/dialog/linkjiraissue-search.soy' */
// This file was automatically generated from linkjiraissue-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.RemoteJiraIssueSearch.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.RemoteJiraIssueSearch == 'undefined') { JIRA.Templates.RemoteJiraIssueSearch = {}; }


JIRA.Templates.RemoteJiraIssueSearch.dialog = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Find Jira issues') + '</h2><form class="aui search-form" id="remote-jira-simple-search-form" action="#" method="post"><div class="field-group"><label for="link-search-text">' + soy.$$escapeHtml('Search') + ':</label><input id="link-search-text" type="text" tabindex="0" class="text" size="50"> <input type="submit" tabindex="0" class="button" id="simple-search-panel-button" value="' + soy.$$escapeHtml('Search') + '"> <a id="advanced-search-toggle" href="#" title="' + soy.$$escapeHtml('Perform a JQL search') + '">' + soy.$$escapeHtml('Advanced Search') + '</a><span id="link-search-loading" class="icon loading throbber hidden"/></div></form><form class="aui search-form" id="remote-jira-advanced-search-form" action="#" method="post"><div class="field-group"><label for="jql-search-text">' + soy.$$escapeHtml('JQL Search') + '<span id="autocomplete-loading" class="hidden"><span class="icon loading throbber"/>' + soy.$$escapeHtml('Loading auto-complete') + '</span><span id="autocomplete-failed" class="hidden">' + soy.$$escapeHtml('(auto-complete unavailable)') + '</span></label><div id="jql-search-container"><span id="jql-search-error" class="icon jqlgood" /><div class="atlassian-autocomplete"><textarea id="jql-search-text" class="text full-width-field" tabindex="0" /></div></div><button class="aui-button aui-button-subtle search-button" id="advanced-search-panel-button" type="submit"><span class="aui-icon aui-icon-small aui-iconfont-search" title="' + soy.$$escapeHtml('Search') + '"></span></button> <a id="simple-search-toggle" href="#" title="' + soy.$$escapeHtml('Perform a plain text search') + '">' + soy.$$escapeHtml('Simple Search') + '</a><span id="link-search-loading" class="icon loading throbber hidden"/></div></form><div class="message-panel hidden"></div><div id="search-results-table" class="data-table"></div><div class="buttons-container form-footer"><div class="buttons"><button type="button" class="aui-button" id="linkjiraissue-add-selected">' + soy.$$escapeHtml('Add') + '</button><button class="aui-button aui-button-link cancel" href="#" id="remote-jira-link-cancel" title="' + soy.$$escapeHtml('Press Esc to close') + '">' + soy.$$escapeHtml('Close') + '</button></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.RemoteJiraIssueSearch.dialog.soyTemplateName = 'JIRA.Templates.RemoteJiraIssueSearch.dialog';
}


JIRA.Templates.RemoteJiraIssueSearch.resultsTable = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.result.issues.length > 0) {
    output += '<table id="remote-jira-searchresult" class="aui"><thead><tr><th class="selection" ><input id="linkjiraissue-select-all" type="checkbox"/></th><th class="type">' + soy.$$escapeHtml('Type') + '</th><th class="key">' + soy.$$escapeHtml('Key') + '</th><th class="summary">' + soy.$$escapeHtml('Summary') + '</th><th class="status">' + soy.$$escapeHtml('Status') + '</th></tr></thead><tbody>';
    var issueList44 = opt_data.result.issues;
    var issueListLen44 = issueList44.length;
    for (var issueIndex44 = 0; issueIndex44 < issueListLen44; issueIndex44++) {
      var issueData44 = issueList44[issueIndex44];
      output += '<tr title="' + soy.$$escapeHtml(issueData44.key) + '"><td class="selection" data-key="' + soy.$$escapeHtml(issueData44.key) + '"><input type="checkbox"/></td><td class="type">' + JIRA.Templates.RemoteJiraIssueSearch.issueType({issueType: issueData44.fields.issuetype}) + '</td><td class="key" title="' + soy.$$escapeHtml(issueData44.key) + '">' + soy.$$escapeHtml(issueData44.key) + '</td><td class="summary" title="' + soy.$$escapeHtml(issueData44.fields.summary) + '">' + soy.$$escapeHtml(issueData44.fields.summary) + '</td><td class="status">' + JIRA.Templates.RemoteJiraIssueSearch.status({status: issueData44.fields.status}) + '</td></tr>';
    }
    output += '</tbody></table>';
  } else {
    output += '<div class="aui-message info"><span class="aui-icon icon-info"></span><p>' + soy.$$escapeHtml('Search returned no results.') + '</p></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.RemoteJiraIssueSearch.resultsTable.soyTemplateName = 'JIRA.Templates.RemoteJiraIssueSearch.resultsTable';
}


JIRA.Templates.RemoteJiraIssueSearch.issueType = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.issueType.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.issueType.name) + '" title="' + soy.$$escapeHtml(opt_data.issueType.name) + ' - ' + soy.$$escapeHtml(opt_data.issueType.description) + '"/>';
};
if (goog.DEBUG) {
  JIRA.Templates.RemoteJiraIssueSearch.issueType.soyTemplateName = 'JIRA.Templates.RemoteJiraIssueSearch.issueType';
}


JIRA.Templates.RemoteJiraIssueSearch.status = function(opt_data, opt_ignored) {
  return '' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status});
};
if (goog.DEBUG) {
  JIRA.Templates.RemoteJiraIssueSearch.status.soyTemplateName = 'JIRA.Templates.RemoteJiraIssueSearch.status';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'js/remote-jira-issue-search-template.js' */
define("jira-issue-link-remote-jira/dialog/remote-jira-issue-search/templates",[],function(){"use strict";return window.JIRA.Templates.RemoteJiraIssueSearch});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'js/issuelink-jira-search.js' */
require(["jquery","wrm/context-path","jira/dialog/form-dialog","jira-issue-link-remote-jira/dialog/remote-jira-issue-search/templates","jira/ajs/ajax/smart-ajax","aui/message","jira/util/formatter","wrm/require","jira-issue-link-remote-jira/issue-link-jira/jql-autocomplete"],function(e,t,r,a,i,s,l,n,o){e(function(){function c(t){var r=e("#jira-app-link").val(),a=v(r);e("#simple-search-panel-button",t).click(function(){e("#search-results-table",t).empty();var r=e("#link-search-text",t).val();return r=e.trim(r),r?j(r,t):s.info("#search-results-table",{body:"Please enter search value.",closeable:!1}),!1}),e("#advanced-search-panel-button",t).click(function(){return d(t),!1}),e("#simple-search-toggle",t).click(function(){return e("#remote-jira-simple-search-form",t).show(),e("#remote-jira-advanced-search-form",t).hide(),!1}),e("#linkjiraissue-add-selected",t).click(function(){e("table tbody tr:visible  td.selection input:checked",t).each(function(){var t=e(this).parent().data("key");e("#jira-issue-keys").trigger("selectOption",[{value:t}])}),e("#link-issue-dialog .error").hide(),x.hide(),e("#link-issue-dialog").show().trigger("multiSelectRevealed"),e("#jira-issue-keys-textarea").focus().select()}),e("#advanced-search-toggle",t).click(function(){e("#remote-jira-advanced-search-form",t).show(),e("#remote-jira-simple-search-form",t).hide();var i=e("#jql-search-text");return i.attr("jql-initialized")||(p(!0,t),n("wr!jira.webresources:jqlautocomplete",function(){a.done(function(e){e.successful?o.initialize({fieldID:"jql-search-text",errorID:"jql-search-error",autoCompleteUrl:u(r),autoCompleteData:e.data,formSubmitFunction:function(){d(t)}}):(f(!1,t),h(!0,t)),p(!1,t),i.attr("jql-initialized",1)})})),i.focus(),!1}),e("#simple-search-toggle",t).trigger("click")}function u(e){return e&&""!==e?y+"/rest/remoteJiraIssueLink/1/remoteJira/autocomplete?appId="+e:""}function d(t){e("#search-results-table",t).empty();var r=e("#jql-search-text",t).val();r=e.trim(r),r?k(r,t):s.info("#search-results-table",{body:"Please enter search value.",closeable:!1})}function m(t,r){e("#link-search-loading",r).toggleClass("hidden",!t)}function p(t,r){e("#autocomplete-loading",r).toggleClass("hidden",!t)}function h(t,r){e("#autocomplete-failed",r).toggleClass("hidden",!t)}function f(t,r){e("#jql-search-error",r).toggleClass("hidden",!t)}function j(t,r){m(!0,r);var a=e("#jira-app-link").val(),i='key = "'+t+'"',s='project = "'+t+'"',l='summary ~ "'+t+'" OR description ~ "'+t+'" OR comment ~ "'+t+'"';g(i,a).done(function(e){e.successful&&e.data.issues.length>0?(m(!1,r),b(e,r)):g(s,a).done(function(e){e.successful&&e.data.issues.length>0?(m(!1,r),b(e,r)):g(l,a).done(function(e){m(!1,r),e.successful?b(e,r):q(e)})})})}function k(t,r){m(!0,r);var a=e("#jira-app-link").val();g(t,a).done(function(e){m(!1,r),e.successful?b(e,r):400===e.status?s.warning("#search-results-table",{body:"Invalid JQL query.",closeable:!1}):q(e)})}function g(t,r){var a,s=e.Deferred();if(r&&""!==r)a=y+"/rest/remoteJiraIssueLink/1/remoteJira/search?jql="+t+"&appId="+r+"&maxResults=10";else{var l=e("#current-issue-key").val();t="("+t+") and key != "+l,a=y+"/rest/api/2/search?jql="+t+"&maxResults=10"}return i.makeRequest({url:a,complete:function(e,t,r){s.resolve(r)}}),s.promise()}function v(t){var r,a,s=e.Deferred();return t&&""!==t?(a=y+"/rest/remoteJiraIssueLink/1/remoteJira/autocompletedata?appId="+t,r=!0):(a=y+"/rest/api/2/jql/autocompletedata",r=!1),i.makeRequest({url:a,complete:function(e,a,l){!l.successful&&r?i.makeRequest({url:y+"/rest/remoteJiraIssueLink/1/remoteJira/autocompletedata/legacy?appId="+t,complete:function(e,t,r){s.resolve(r)}}):s.resolve(l)}}),s.promise()}function b(t,r){var i=a.resultsTable({result:t.data});e("#search-results-table",r).html(i),e("#linkjiraissue-select-all",r).click(function(){var t=e(this).prop("checked");e("tbody tr td.selection input",r).prop("checked",t)}),e("tbody tr",r).click(function(t){if(!e(t.target).is(":checkbox")){var r=e(this).find("td.selection input");r.prop("checked",!r.prop("checked"))}})}function q(e){s.error("#search-results-table",{body:i.buildSimpleErrorContent(e),closeable:!1})}var y=t(),x=new r({id:"remote-jira-search-dialog",trigger:"#link-jira-issue .remote-jira-search-trigger",widthClass:"large",content:function(e){e(a.dialog()),c(this.$popup)},submitHandler:function(t,r){t.preventDefault(),e("#simple-search-panel-button").removeAttr("disabled"),e("#advanced-search-panel-button").removeAttr("disabled"),"remote-jira-simple-search-form"===e(t.target).attr("id")?e("#simple-search-panel-button").click():e("#advanced-search-panel-button").click(),r()}})})});;
;
/* module-key = 'com.atlassian.teams:teams-wr-custom-field-scripts-common', location = '/teams/scripts-plugin/field-common.min.js' */
(function(){define("com/atlassian/rm/common/customfields/common",[],function(){var a,b,c,d,e,f,g,h,i,j;return c=window.JIRA,a=AJS.$,d=AJS.SingleSelect,b=AJS.ItemDescriptor,j=AJS.escapeHTML,f=function(a){return c.bind(c.Events.NEW_CONTENT_ADDED,function(b,d,e){if(e!==c.CONTENT_ADDED_REASON.panelRefreshed)return a({context:d})})},g=function(a){var b,c,d;return d=a.url,b=a.createQueryData,c=a.formatResponse,{url:d,type:"POST",query:!0,data:function(a){return b({query:a})},dataType:"json",contentType:"application/json",formatResponse:c,keyInputPeriod:200}},i=function(a){var c,d;return d=a.text,c=a.additionalStyles,new b({label:d,html:j(d),highlighted:!0,styleClass:"jpo-dropdown-item-unselectable "+c,unselectableItem:!0})},e=function(a){var b;if(b=a.items,0===b.length)return b.push(i({text:"No Matches",additionalStyles:"jpo-dropdown-item-italic"}))},h=function(b){var c,e;return c=b.ajaxOptions,e=b.getNoMatchingValueMessage,d.extend({init:function(b){return a.extend(b,{submitInputVal:!0,showDropdownButton:!0,ajaxOptions:c}),this._super(b)},setSelection:function(a){if(!a.properties.unselectableItem)return this._super.apply(this,arguments)},handleFreeInput:function(b){var c,d;if(this._super.apply(this,arguments),null==b&&(b=a.trim(this.$field.val())),d=this.model.getDescriptor(b),null==d&&this.$container.hasClass("aui-ss-editing"))return c=null!=b&&b.length>0,c?(this.options.errorMessage=e(b),this.showErrorMessage(b),this.clear(),this.model.removeFreeInputVal()):this.hideErrorMessage()}})},{bindInitializationCallback:f,createDropdownAjaxOptions:g,createInfoMessageListItem:i,addNoMatchesItemIfEmpty:e,createDropdownClass:h}})}).call(this);;
;
/* module-key = 'com.atlassian.teams:teams-wr-custom-field-team', location = '/teams/scripts-plugin/field-team.min.js' */
(function(){require(["com/atlassian/rm/common/customfields/common"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return b=AJS.$,e=AJS.ItemDescriptor,d=AJS.GroupDescriptor,j=AJS.contextPath,f=100,g=".jpo-team-selection-dropdown",h=j()+"/rest/teams/1.0/teams/find",c=j()+"/download/resources/com.atlassian.teams:jpo-wr-images-and-fonts/images/teams/default-avatar.svg",p=function(a){var b,c,e;return e=a.teams,b=new d({weight:0,items:[k()]}),c=new d({weight:1,label:"Shared teams",items:o({teams:e})}),[b,c]},n=function(a){var b,d,f;return d=a.id,f=a.title,b=a.avatarUrl,new e({value:""+d,fieldText:f,label:f,icon:b||c})},o=function(b){var c,d,e;return e=b.teams,c=function(){var a,b,c;for(c=[],a=0,b=e.length;a<b;a++)d=e[a],c.push(n(d));return c}(),a.addNoMatchesItemIfEmpty({items:c}),c},k=function(){return a.createInfoMessageListItem({text:"Plan-specific teams can only be selected through a Portfolio plan",additionalStyles:"jpo-dropdown-item-italic"})},l=function(a){var b;return b=a.query,JSON.stringify({query:b,excludedIds:[],maxResults:f})},i=a.createDropdownClass({ajaxOptions:a.createDropdownAjaxOptions({url:h,createQueryData:l,formatResponse:p}),getNoMatchingValueMessage:function(a){return AJS.format("No team matching query \'\'{0}\'\' was found.",a)}}),m=function(a){return b(g,a).each(function(){return new i({element:b(this)})})},a.bindInitializationCallback(function(a){var b;return b=a.context,m(b)})})}).call(this);;
;
/* module-key = 'com.atlassian.growth.product-growth-jira-plugin:growth-web-resources', location = 'js/growth-helper.js' */
var GROW=GROW||{};(function(c){var b=require("jira/util/users/logged-in-user");var a=require("jira/util/browser");GROW.isLoggedIn=function(){return b.isAnonymous()!==true};GROW.isAdmin=function(){return b.isAdmin()};AJS.toInit(function(){if(location.search.indexOf("triggerCreateProject=true")>-1){if(b.isAnonymous()){var d=c("#header nav .login-link");if(d.size()===1){a.reloadViaWindowLocation(d.attr("href"))}}else{JPT.DialogController.handleProjectTemplateTriggered()}}})})(AJS.$);;
;
/* module-key = 'com.atlassian.growth.product-growth-jira-plugin:growth-web-resources', location = 'js/store.js' */
var GROW=GROW||{};GROW.Store=GROW.Store||{};(function(a){GROW.Store.get=function(b){return AJS.Meta.get(b)};GROW.Store.getNumber=function(b){return AJS.Meta.getNumber(b)};GROW.Store.getBoolean=function(b){return AJS.Meta.getBoolean(b)};GROW.Store.set=function(c,d,b){AJS.Meta.set(c,d);return a.ajax({url:contextPath+"/rest/growth/1/store",type:"PUT",contentType:"application/json",data:JSON.stringify({key:c,value:d,eventName:b})})};GROW.Store.setGlobal=function(c,d,b){AJS.Meta.set(c,d);return a.ajax({url:contextPath+"/rest/growth/1/store/global",type:"PUT",contentType:"application/json",data:JSON.stringify({key:c,value:d,eventName:b})})};GROW.Store.remove=function(c,b){AJS.Meta.set(c,null);return a.ajax({url:contextPath+"/rest/growth/1/store",type:"DELETE",contentType:"application/json",data:JSON.stringify({key:c,eventName:b})})};GROW.Store.removeGlobal=function(c,b){AJS.Meta.set(c,null);return a.ajax({url:contextPath+"/rest/growth/1/store/global",type:"DELETE",contentType:"application/json",data:JSON.stringify({key:c,eventName:b})})}})(AJS.$);;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:util-resources', location = '/js/atlassian/um-utils.js' */
define('user-management/helpers/um-utils', [
    'jquery'
], function (
    $
) {
    var isSiteAdminWRM = WRM.data.claim("com.atlassian.crowd.user-provisioning-plugin:create-users-resources.isSiteAdmin");
    /*
        This is going to have to change when UM moves to a different URL.
        We'll also need to look at usages of this because commumication
        will need to be a bit different, eg. using CORS
     */
    function restBaseUrl() {
        return '/admin';
    }

    return {

        /**
         * @returns A promise which resolves to a boolean.
         */
        isSiteAdmin: function() {
            return $.when(isSiteAdminWRM).promise();
        },
        restBaseUrl: restBaseUrl,
        productName: function() {
            var contextPath = AJS.contextPath();
            var productName = "Unknown";
            if (contextPath === "") {
                productName = "jira";
            } else if (contextPath === "/builds") {
                productName = "bamboo";
            } else if (contextPath === "/wiki") {
                productName = "confluence";
            }
            return productName;
        }
    };
});;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:adminmenu-analytics', location = 'js/atlassian/analytics-upp.js' */
require([
    'user-management/helpers/um-utils'
], function(
    umUtils
) {
    var triggerAnalytics = function (name, properties) {
        AJS.trigger("analytics", {
            name: "unified.admin." + name,
            data: properties || {}
        });
    };

    var getProductName = umUtils.productName;

    AJS.$(document)
        .on("click", "#admin-billing-link", function () {
            triggerAnalytics("menu.billing.click", {product:getProductName()});
        })
        .on("click", "#admin-discovernewapps-link", function () {
            triggerAnalytics("menu.addApplications.click", {product:getProductName()});
        })
        .on("click", "#admin-management-link", function () {
            triggerAnalytics("menu.userManagement.click", {product:getProductName()});
        })
        // handle admin menu links from JIRA due to required use of web sections
        .on("click", "#admin_billing_section", function () {
            triggerAnalytics("menu.billing.click", {product:getProductName()});
        })
        .on("click", "#admin_discovernewapps_section", function () {
            triggerAnalytics("menu.addApplications.click", {product:getProductName()});
        })
        .on("click", "#user_management_section", function () {
            triggerAnalytics("menu.userManagement.click", {product:getProductName()});
        })
        .on("click", "#pending-invites-flag .icon-close", function () {
            triggerAnalytics("inproduct.invite.pending.message.dismissed")
        })
    ;

});
;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:common-flag-resources', location = '/js/atlassian/aui-polyfill/flag.js' */
/*
 * Polyfill for aui/flag for use in products that don't provide a version (due to using an ancient AUI version).
 */
(function() {
    try {
        require('aui/flag')
    } catch (e) {
        define('aui/flag', [], displayFlagAsMessage);
    }

    function displayFlagAsMessage(args) {
        var type = (args.type || "").toLowerCase();
        var message = typeof AJS.messages[type] == 'function' ? AJS.messages[type] : AJS.messages.generic;

        // for some reason we display info messages as warnings... keeping that for backward compatibility
        message(".notifications", { body: args.message });
    }
})();
;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:common-flag-resources', location = '/js/atlassian/flag.js' */
/**
 * This is a wrapper around AUI Flag which will escape the body text of the Flag unless explicitly told not to.
 *
 * The body will NOT be escaped iff the passed in object has an attribute 'isHtml' and it is set to true.
 */
define('user-management-common/flag', [
    'aui/flag',
    'underscore',
    'jquery'
], function(
    flag,
    _,
    $
) {
    return function(options){
        var createdFlag;
        // If not explicitly HTML, escape the body
        if(!options.isHtml) {
            options.body = _.escape(options.body);
        }

        createdFlag = flag(options);
        $(createdFlag).on('aui-flag-close', function(){
            createdFlag.dispatchEvent(new CustomEvent('um-flag-close', { bubbles: true }));
        });
        return createdFlag;
    };
});
;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:impersonation-resources', location = '/js/atlassian/helpers/cookies.js' */
define('user-management-common/helpers/cookies', [], function() {
    return {
        readCookie: function (name) {
            //document.cookie lists cookies in the format "name1=value1; name2=value2" etc
            //see https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie
            var nameEQ = name + "=";
            var cookieList = document.cookie.split(';');
            for (var i = 0; i < cookieList.length; i++) {
                var cookie = cookieList[i];

                //Remove any leading spaces (normally 1, but I don't want to make assumptions)
                while (cookie.charAt(0) == ' ') {
                    cookie = cookie.substring(1, cookie.length);
                }

                //Remove the name1= part and return what is left
                if (cookie.indexOf(nameEQ) === 0) {
                    return decodeURIComponent(cookie.substring(nameEQ.length, cookie.length));
                }
            }
            return null;
        }
    };
});
;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:impersonation-resources', location = '/js/atlassian/impersonation/impersonation.js' */
/**
 * This module displays an informational message with a link to drop the impersonation, if the current user is
 * being impersonated. This script is used in both user management and user provisioning plugins.
 */
define('user-management-common/impersonation/impersonation', [
    'jquery',
    'underscore',
    'user-management-common/flag',
    'user-management-common/helpers/cookies'
], function(
    $,
    _,
    flag,
    cookies
) {
    var showImpersonationMessaging = function(username){
        var message = AJS.format("You\'\'re temporarily logged in as {0}. When you\'\'re done, {1}switch back{2} to your account.",
            _.escape(impersonation.getDisplayName()),
            '<a id="impersonation-dismiss-trigger" href="#">', '</a>');

        var messageFlag = flag({ type: 'info', isHtml: true, body: message });

        $(messageFlag).find("#impersonation-dismiss-trigger").click(function (e) {
            e.preventDefault();
            impersonation.dropImpersonation().then(function () {
                if (username) {
                    window.open("/admin/users/view?username=" + encodeURIComponent(username), "_top");
                } else {
                    window.open("/admin/users", "_top");
                }
            });
        });
    };

    var impersonation = {
        init: function () {
            if (impersonation.isImpersonated()) {
                showImpersonationMessaging(impersonation.getUsername());
            }
        },

        getUsername: function () {
            return cookies.readCookie("um.user.impersonated.username");
        },

        getDisplayName: function () {
            return cookies.readCookie("um.user.impersonated.displayname");
        },

        dropImpersonation: function () {
            return $.ajax({
                type: "POST",
                contentType: 'application/json',
                url: "/admin/rest/um/1/impersonate/release"
            });
        },

        isImpersonated: function () {
            return !!impersonation.getUsername();
        }
    };
    return impersonation;
});
;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:impersonation-resources', location = '/js/atlassian/impersonation-init.js' */
require(['jquery', 'user-management-common/impersonation/impersonation'],
function($, impersonation) {
    $(impersonation.init);
});;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:create-users-resources', location = '/js/atlassian/create-user/request-invite.js' */
/**
 * This module allows external products to request an invite for a user.
 */
define('user-management-common/create-user/request-invite', [
    'jquery',
    'user-management/helpers/um-utils'
], function(
    $,
    umUtils
) {
    function requestInvite(emailAddresses, extraProductId, extraGroups){
        return $.ajax({
            type: 'PUT',
            url: umUtils.restBaseUrl() + '/rest/um/1/requestaccess',
            contentType: 'application/json',
            data: JSON.stringify({
                emailAddresses: emailAddresses,
                extraProductId: extraProductId,
                extraGroups: extraGroups
            })
        });
    }
    return {
        createUser: requestInvite
    };
});;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:create-users-resources', location = '/js/atlassian/create-user/pending-invites.js' */
/**
 * This module allows external products to request an invite for a user.
 */
define('user-management-common/create-user/pending-invites', [
    'jquery',
    'user-management-common/flag',
    'user-management-common/create-user/request-invite',
    'user-management/helpers/um-utils'
], function(
    $,
    flag,
    requestInvite,
    umUtils
) {
    var pendingInvites = {};
    pendingInvites.hasCompleted = false;
    var pendingInvitesFlag;
    var INVITES_FLAG_CLOSED_KEY = "uppPendingInvitesFlagClosed";
    var LAST_CHECK_FOR_PENDING_INVITES_TIME = "uppLastCheckForPendingInvitesTime";
    var PENDING_INVITES = "uppLastPendingInvites";
    var ONE_HOUR = (1000 * 60 * 60);

    pendingInvites.flagHasBeenDismissed = function () { //visible for testing
        var dismissed = false;
        var lastClosed = localStorage[INVITES_FLAG_CLOSED_KEY];
        if (lastClosed) {
            dismissed = (new Date().getTime() - lastClosed) < ONE_HOUR; // Show the flag again after one hour
        }
        return dismissed;
    };

    function pendingInviteCount() {
        var deferredCount = $.Deferred();
        if (localStorage[LAST_CHECK_FOR_PENDING_INVITES_TIME] != null && (new Date().getTime() - localStorage[LAST_CHECK_FOR_PENDING_INVITES_TIME]) < ONE_HOUR) {
            deferredCount.resolve(localStorage[PENDING_INVITES]);
        } else {
            $.ajax({
                url: umUtils.restBaseUrl() + '/rest/um/1/user/search?activeFilter=pending&max-results=1',
                dataType: 'json',
                // Revert JIRA's override of jQuery's default. This means the &_=<timestamp>
                // query param is not included on requests
                cache: true
            }).then(function (invites) {
                localStorage[PENDING_INVITES] = invites.length;
                localStorage[LAST_CHECK_FOR_PENDING_INVITES_TIME] = new Date().getTime();
                deferredCount.resolve(invites.length);
            }, deferredCount.reject);
        }

        return deferredCount.promise();
    }

    function showPendingInvitesFlag() {
        pendingInvitesFlag = flag({
            id: 'pending-invites-flag',
            type: 'info',
            isHtml: true,
            body: AJS.format("There are users with pending invites to your Atlassian Cloud. {0}Approve here{1}.", '<a href="/admin/users?activeFilter=pending&src=pending.flag.' + encodeURIComponent(umUtils.productName()) + '">', '</a>')
        });
        $(pendingInvitesFlag).on('um-flag-close', function() {
            localStorage[INVITES_FLAG_CLOSED_KEY] = new Date().getTime();
        });
    }

    pendingInvites.closePendingInvitesFlag = function() {
        if (pendingInvitesFlag != null) {
            pendingInvitesFlag.close();
        }
    };

    pendingInvites.init = function() {
        umUtils.isSiteAdmin().then(function (isSiteAdmin) {
            if (isSiteAdmin && !pendingInvites.flagHasBeenDismissed()) {
                return pendingInviteCount().then(function (inviteCount) {
                    if (inviteCount > 0) {
                        showPendingInvitesFlag();
                    }
                });
            }
        }).always(function() { pendingInvites.hasCompleted = true; })
    };

    return pendingInvites;
});;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:create-users-resources', location = '/js/atlassian/create-user-init.js' */
require(['jquery', 'user-management-common/create-user/request-invite', 'user-management-common/create-user/pending-invites'],
function($, requestInvite, pendingInvites) {
    $(pendingInvites.init);
});;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'js/ajs-amd.js' */
define("pas/ajs",[],function(){"use strict";return AJS});;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'js/store_js/store.js' */
!function(){var t=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e=function(e){var r=0;for(var i in e)t(e,i)&&r++;return r},r=function(t,e,r){for(var i=t.length>>>0,s=r<0?Math.max(0,i+r):r||0;s<i;s++)if(t[s]===e)return s;return-1},i=function(t,e,i){return r(t,e,i)!==-1},s=function(t,e){return i(t,e)||t.push(e),t},n=this.Store=function(t,e,r){this.name=t,this.defaults=e||{},this.watcherSpeed=r||500,this.listeners={},this.applyDefaults()};n.clear=function(){localStorage.clear()},n.prototype.applyDefaults=function(){for(var e in this.defaults)t(this.defaults,e)&&void 0===this.get(e)&&this.set(e,this.defaults[e]);return this},n.prototype.watcher=function(r){if(this.watcherTimer&&clearTimeout(this.watcherTimer),e(this.listeners)||r){if(this.newObject=this.toObject(),this.oldObject){for(var i in this.newObject)t(this.newObject,i)&&this.newObject[i]!==this.oldObject[i]&&this.fireEvent(i,this.newObject[i]);for(var i in this.oldObject)t(this.oldObject,i)&&!t(this.newObject,i)&&this.fireEvent(i,this.newObject[i])}this.oldObject=this.newObject;var s=this;this.watcherTimer=setTimeout(function(){s.watcher()},this.watcherSpeed)}return this},n.prototype.get=function(t){var e=localStorage.getItem("store."+this.name+"."+t);if(null!==e)try{return JSON.parse(e)}catch(t){return null}},n.prototype.set=function(t,e){if(void 0===e)this.remove(t);else{"function"==typeof e&&(e=null);try{e=JSON.stringify(e)}catch(t){e=null}localStorage.setItem("store."+this.name+"."+t,e)}return this},n.prototype.remove=function(t){return localStorage.removeItem("store."+this.name+"."+t),this.applyDefaults()},n.prototype.reset=function(){for(var t="store."+this.name+".",e=localStorage.length-1;e>=0;e--)localStorage.key(e).substring(0,t.length)===t&&localStorage.removeItem(localStorage.key(e));return this.applyDefaults()},n.prototype.toObject=function(){for(var t={},e="store."+this.name+".",r=localStorage.length-1;r>=0;r--)if(localStorage.key(r).substring(0,e.length)===e){var i=localStorage.key(r).substring(e.length),s=this.get(i);void 0!==s&&(t[i]=s)}return t},n.prototype.fromObject=function(e,r){r||this.reset();for(var i in e)t(e,i)&&this.set(i,e[i]);return this},n.prototype.addEvent=function(t,e){return this.watcher(!0),this.listeners[t]||(this.listeners[t]=[]),s(this.listeners[t],e),this},n.prototype.removeEvent=function(t,e){for(var r=this.listeners[t].length-1;r>=0;r--)this.listeners[t][r]===e&&this.listeners[t].splice(r,1);return this.listeners[t].length||delete this.listeners[t],this},n.prototype.fireEvent=function(t,e){for(var r=[t,"*"],i=0;i<r.length;i++){var s=r[i];if(this.listeners[s])for(var n=0;n<this.listeners[s].length;n++)this.listeners[s][n](e,t,this.name)}return this}}();;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'js/store_js/store-amd.js' */
define("pas/js/store_js/store",function(){return Store});;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'js/pasConfig.js' */
define("pas/js/pas-config",["jquery","pas/ajs","pas/js/store_js/store"],function(e,t,n){"use strict";var a=6e4;return{timeUpdateInterval:a,pollingInterval:15*a,url:t.contextPath()+"/rest/pas/latest/announcement",store:new n("Atlassian.PAS.Announcements."+document.location.hostname+t.contextPath()+"."+e("meta[name='ajs-remote-user']").attr("content")),nextAnnouncementKey:"nextAnnouncement",timeStampKey:"timeStamp",config:{url:t.contextPath()+"/rest/pas/latest/settings",timeStampKey:"configTimeStampKey",pollingInterval:18e5,currentConfigKey:"currentConfigKey"},cookieKey:t.contextPath().replace("/","")+"_pas.dismiss"}});;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'js/pas.js' */
require(["jquery","aui/flag","pas/ajs","pas/js/pas-config"],function(n,e,t,a){"use strict";t.toInit(function(){function i(e){n.ajax({type:"GET",contentType:"application/json",url:a.url,cache:!1,global:!1,timeout:5e3,success:function(n,t){o(a.timeStampKey,E()),o(a.nextAnnouncementKey,n),e()},error:function(n,e,a){t.log("Could not get announcement from server: "+a)}})}function r(n){return a.store.get(n)}function o(n,e){return a.store.set(n,e)}function u(n,e){var t=r(n),a=E()-t;return void 0==t||a>e}function c(){return u(a.timeStampKey,a.pollingInterval)}function s(){n("#more-info").live("click",function(e){t.trigger("analyticsEvent",{name:"com.atlassian.plugins.pas.more-info.click",data:{message:n("#pas-announcement span:first").text()}})})}function l(){c()?i(b):b()}var m,f,p,g=null,d=null,T=null,v=0,h=function(n){var e=function(n,e,t){for(n=""+n;n.length<t;)n=e+n;return n},t=function(n,e){var t=n+" "+e;return 1!=n&&(t+="s"),t},a=6e4,i=36e5,r=864e5;if(n<a)return"in less than a minute";if(n<i)return"in "+t(Math.round(n/a),"min");if(n<r)return"in "+t(Math.round(n/i),"hour")+" "+t(Math.round(n%i/a),"minute");var o=new Date;return o.setSeconds(o.getSeconds()+Math.round(n/1e3)),e(o.getFullYear(),"0",4)+"/"+e(o.getMonth()+1,"0",2)+"/"+e(o.getDate(),"0",2)+" "+e(o.getHours(),"0",2)+":"+e(o.getMinutes(),"0",2)},y=function(){null!=g&&clearTimeout(g),null!=d&&clearTimeout(d),null!=T&&clearInterval(T),document.getElementById("pas-announcement").close()},S=function(){function n(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var i=a.announcementText,r=a.announcementUrl||"",o=a.announcementTime,u=a.announcementId,c=a.announcementTicket;m=a.announcementSource;var s=/([A-Z])\w+/g,l=/\d+/g;f=s.exec(c),p=l.exec(c);var g,d=n(a.announcementTargetPath)||"",T=new RegExp(d);null!==location.href.match(T)&&(g=e({type:"info",title:"Public service announcement",body:i+r+o,close:"manual"}),"alertr"==m&&M({name:"pas.alertr.announcement.display"})),void 0!==g&&(g.setAttribute("id","pas-announcement"),g.setAttribute("announcementId",u),g.addEventListener("aui-flag-close",function(){x()})),k()},k=function(){t.$("#more-info").on("click",function(){"alertr"==m&&M({name:"pas.alertr.announcement.url.clicked"})})},x=function(){var e,i=a.announcementId,r=new Date;r.setMonth(r.getMonth()+1),e=i+"; expires="+r.toUTCString(),document.cookie=a.cookieKey+"="+e+"; path=/",t.trigger("analyticsEvent",{name:"com.atlassian.plugins.pas.dismiss-announcement.click",data:{message:n("#pas-announcement span:first").text()}}),"alertr"==m&&M({name:"pas.alertr.announcement.dismissed"})},I=function(n,e){for(var t=document.cookie.split(";"),a=0;a<t.length;a++){var i=t[a],r=i.indexOf("="),o=i.substr(0,r).trim(),u=i.substr(r+1).trim();if(o==e)return u==n}return!1},A=function(){if(v>0){var n=v-a.timeUpdateInterval;v=n,a.announcementTime=Atlassian.PAS.Templates.pasTime({time:h(n)})}else clearInterval(T),T=null},M=function(n){var e=f[0];t.trigger("analyticsEvent",{name:n.name,data:{issueNumber:p,project:e}})},b=function(){function n(){return e.timeToStart-K()}var e=r(a.nextAnnouncementKey);if(null!=e&&null!=e.message&&!I(e.id,a.cookieKey)){v=e.timeLeft,a.announcementText=e.message,a.announcementTime=Atlassian.PAS.Templates.pasTime({time:h(v)}),T=setInterval(A,a.timeUpdateInterval),e.url&&(a.announcementUrl=Atlassian.PAS.Templates.pasUrl({url:e.url})),a.announcementTargetPath=e.targetPath,a.announcementId=e.id;var t=e.duration;e.timeToStart=n(),e.source&&(a.announcementSource=e.source),e.incidentTicket&&(a.announcementTicket=e.incidentTicket),e.timeToStart>0?(t+=e.timeToStart,g=setTimeout(function(){S()},e.timeToStart)):S(),t>0&&(d=setTimeout(function(){y()},t))}},E=function(){return(new Date).getTime()},K=function(){return E()-r(a.timeStampKey)};s(),l()})});;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'templates/soy/pas.soy' */
// This file was automatically generated from pas.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Atlassian.PAS.Templates.
 */

if (typeof Atlassian == 'undefined') { var Atlassian = {}; }
if (typeof Atlassian.PAS == 'undefined') { Atlassian.PAS = {}; }
if (typeof Atlassian.PAS.Templates == 'undefined') { Atlassian.PAS.Templates = {}; }


Atlassian.PAS.Templates.pasTime = function(opt_data, opt_ignored) {
  return '<span class="pas-announcement-time">' + soy.$$escapeHtml(opt_data.time) + '</span>';
};
if (goog.DEBUG) {
  Atlassian.PAS.Templates.pasTime.soyTemplateName = 'Atlassian.PAS.Templates.pasTime';
}


Atlassian.PAS.Templates.pasUrl = function(opt_data, opt_ignored) {
  return '<p><a id="more-info" target="_blank" href=\'' + soy.$$escapeHtml(opt_data.url) + '\'>' + soy.$$escapeHtml('More information') + '</a></p>';
};
if (goog.DEBUG) {
  Atlassian.PAS.Templates.pasUrl.soyTemplateName = 'Atlassian.PAS.Templates.pasUrl';
}
;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/jquery/plugins/avataror/avataror.js' */
jQuery.fn.avataror=function(i){var t=jQuery,e=t(document);this.each(function(){var r=t(this),a=r.find("img").attr("src");r.css({"-moz-border-radius":"10px","-webkit-border-radius":"10px"}),r.html("<p>Loading?</p>");var o={previewSize:48};o.preview=t("<div/>").addClass("avataror-preview").css({border:"solid 1px #000",float:"left",height:o.previewSize+"px",overflow:"hidden",width:o.previewSize+"px",position:"relative",top:"-9999em",left:"-9999em"}),o.preview.prependTo(i.previewElement),o.img=t('<img alt="Avatar Source"/>'),o.img.load(function(){o.image=t("<div/>").css({background:"url('"+a+"') no-repeat",clear:"left",position:"relative","background-size":"cover"}),o.marker=t("<div/>").css({cursor:"move",position:"relative"}),o.dash=t("<div/>"),o.shadow=t("<div/>"),o.dash.add(o.shadow).css({cursor:"move",opacity:.5,left:0,top:0,position:"absolute"}),o.image.append(o.shadow).append(o.dash).append(o.marker),r.append(o.image),o.marker.html("<div></div><div></div><div></div><div></div>"),t("div",o.marker).each(function(i){var e=t(this);e.css({background:"#000",border:"solid 1px #fff",width:"10px",height:"10px",position:"absolute","font-size":"1px"}),e.css(["left","right","right","left"][i],"-6px"),e.css(["top","top","bottom","bottom"][i],"-6px"),e.css("cursor",["nw-resize","ne-resize","se-resize","sw-resize"][i]),e.mousedown(function(t){t.preventDefault(),t.stopPropagation(),o.dragging={x:t.pageX,y:t.pageY,ax:o.x,ay:o.y,w:o.width,h:o.height,i:i+1},o.shadow.hide()})}),o.marker.add(o.image).mousedown(function(i){i.preventDefault(),o.dragging={x:i.pageX,y:i.pageY,ax:o.x,ay:o.y,w:o.width,h:o.height},o.shadow.hide()}),e.mouseup(function(i){o.handleMouseUp(i)}),e.mousemove(function(i){o.dragging&&(o.handleMouseMove(i.pageX,i.pageY),i.preventDefault())}),o.imgwidth=o.img[0].naturalWidth,o.imgheight=o.img[0].naturalHeight,o.imgwidth>500?(o.ratio=o.imgwidth/500,o.imgwidth=500,o.imgheight/=o.ratio):o.ratio=1;var i=+t("#avatar-offsetX").val(),g=+t("#avatar-offsetY").val(),h=+t("#avatar-width").val();if(i+h>o.imgwidth||g+h>o.imgheight){i=h>=o.imgwidth?0:(o.imgwidth-h)/5,g=h>=o.imgheight?0:(o.imgheight-h)/5;var d=Math.min(o.imgwidth,o.imgheight);d<=h&&(h=d)}o.x=i,o.y=g,o.width=h,o.height=h,o.image.css({width:o.imgwidth+"px",height:o.imgheight+"px"}),o.setMarker(),r.css({width:o.imgwidth+"px"}),o.preview.css({position:"static"}),t("p",r).remove(),r.trigger("AvatarImageLoaded"),o.adjustPreview()}),o.img.attr("src",a),o.preview.append(o.img),o.setMarker=function(){o.marker.css("border","dashed 1px #fff"),o.dash.css("border","solid 1px #000"),o.shadow.css("border","solid 1px #000"),o.marker.add(this.dash).css("left",this.x-1+"px"),o.marker.add(o.dash).css("top",o.y-1+"px"),o.shadow.css("border-left-width",o.x+"px"),o.shadow.css("border-right-width",o.imgwidth-o.x-o.width+"px"),o.shadow.css("border-top-width",o.y+"px"),o.shadow.css("border-bottom-width",o.imgheight-o.y-o.height+"px"),o.shadow.css("width",o.width+"px"),o.shadow.css("height",o.height+"px"),o.marker.add(o.dash).css("width",o.width+"px"),o.marker.add(o.dash).css("height",o.height+"px")},o.adjustPreview=function(){o.img.attr("width",o.imgwidth*o.previewSize/o.width),o.img.attr("height",o.imgheight*o.previewSize/o.height),o.img.css("margin-left","-"+o.x*o.previewSize/o.width+"px"),o.img.css("margin-top","-"+o.y*o.previewSize/o.height+"px"),o.preview.select()},o.handleMouseMove=function(i,t){var e=i-o.dragging.x,r=t-o.dragging.y;if(this.dragging.i){var a=o.resizeHandlers[this.dragging.i-1];a(e,r)}else o.x=o.dragging.ax+e,o.y=o.dragging.ay+r,o.x+o.width>o.imgwidth&&(o.x=o.imgwidth-o.width),o.y+o.height>o.imgheight&&(o.y=o.imgheight-o.height),o.x<0&&(o.x=0),o.y<0&&(o.y=0);o.setMarker(),o.adjustPreview()},o.handleMouseUp=function(i){t("#avatar-offsetX").val(Math.floor(o.x*o.ratio)),t("#avatar-offsetY").val(Math.floor(o.y*o.ratio)),t("#avatar-width").val(Math.floor(o.width*o.ratio)),o.dragging=null,o.shadow.show()},o.originX=function(){return o.dragging.ax},o.originY=function(){return o.dragging.ay},o.originBottomX=function(){return o.dragging.ax+o.dragging.w},o.originBottomY=function(){return o.dragging.ay+o.dragging.h},o.originNw=function(){return{x:o.originX(),y:o.originY()}},o.originNe=function(){return{x:o.originBottomX(),y:o.originY()}},o.originSe=function(){return{x:o.originBottomX(),y:o.originBottomY()}},o.originSw=function(){return{x:o.originX(),y:o.originBottomY()}},o.nwHandler=function(i,t){var e=o.originSe(),r={x:o.originX()+i,y:o.originY()+t},a=Math.abs(r.x-e.x),g=Math.abs(r.y-e.y),h=Math.min(a,g);h<20&&(h=20),e.x-h<0&&(h=e.x),e.y-h<0&&(h=e.y),o.x=e.x-h,o.y=e.y-h,o.width=o.height=h},o.neHandler=function(i,t){var e=o.originSw(),r={x:o.originBottomX()+i,y:o.originY()+t},a=Math.abs(r.x-e.x),g=Math.abs(r.y-e.y),h=Math.min(a,g);h<20&&(h=20),e.x+h>o.imgwidth&&(h=o.imgwidth-e.x),e.y-h<0&&(h=e.y),o.y=e.y-h,o.width=o.height=h},o.seHandler=function(i,t){var e=o.originNw(),r={x:o.originBottomX()+i,y:o.originBottomY()+t},a=Math.abs(r.x-e.x),g=Math.abs(r.y-e.y),h=Math.min(a,g);h<20&&(h=20),e.x+h>o.imgwidth&&(h=o.imgwidth-e.x),e.y+h>o.imgheight&&(h=o.imgheight-e.y),o.width=o.height=h},o.swHandler=function(i,t){var e=o.originNe(),r={x:o.originX()+i,y:o.originBottomY()+t},a=Math.abs(r.x-e.x),g=Math.abs(r.y-e.y),h=Math.min(a,g);h<20&&(h=20),e.x-h<0&&(h=e.x),e.y+h>o.imgheight&&(h=o.imgheight-e.y),o.x=e.x-h,o.width=o.height=h},o.resizeHandlers=[o.nwHandler,o.neHandler,o.seHandler,o.swHandler]})};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/Avatar.js' */
define("jira/ajs/avatarpicker/avatar",["jira/lib/class"],function(t){return t.extend({init:function(t){this._id=t.id,this._isSystemAvatar=t.isSystemAvatar,this._isSelected=t.isSelected,this._urls=t.urls},setUnSelected:function(){this._isSelected=!1},setSelected:function(){this._isSelected=!0},isSelected:function(){return!!this._isSelected},isSystemAvatar:function(){return this._isSystemAvatar},getId:function(){return this._id},getUrl:function(t){return this._urls[t]},toJSON:function(){return{id:this._id,isSystemAvatar:this._isSystemAvatar,isSelected:this._isSelected,urls:this._urls}}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/avatar-sizes.js' */
define("jira/ajs/avatarpicker/avatar/sizes",["exports","jquery"],function(a,e){a.getSizeObjectFromName=function(r){if("object"==typeof r)return r;"string"==typeof r?e.trim(r):"";return a.LARGE.param===r?a.LARGE:a.MEDIUM.param===r?a.MEDIUM:a.SMALL.param===r?a.SMALL:"xsmall"===r?a.SMALL:a.LARGE},a.LARGE={param:"large",height:48,width:48},a.MEDIUM={param:"medium",width:32,height:32},a.SMALL={param:"small",width:16,height:16}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/avatar-factory.js' */
define("jira/ajs/avatarpicker/avatar-factory",["jira/ajs/avatarpicker/avatar","exports"],function(a,t){t.createCustomAvatar=function(t){return t.isSystemAvatar=!1,new a(t)},t.createSystemAvatar=function(t){return t.isSystemAvatar=!0,new a(t)}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarManager.js' */
define("jira/ajs/avatarpicker/avatar-manager",["jira/util/formatter","jira/lib/class","wrm/context-path","jquery"],function(t,r,e,a){var s=e();return r.extend({init:function(t){this.store=t.store,this.ownerId=t.ownerId,this.username=t.username,this.anonymousAvatarId=t.anonymousAvatarId,this.avatarSrcBaseUrl=t.avatarSrcBaseUrl},selectAvatar:function(t,r){return this.store.selectAvatar(t,r)},getById:function(t){return this.store.getById(t)},destroy:function(t,r){this.store.destroy(t,r)},update:function(t,r){this.store.update(t,r)},add:function(t,r){this.store._add(t,r)},getAllSystemAvatars:function(){return this.store.getAllSystemAvatars()},getAllCustomAvatars:function(){return this.store.getAllCustomAvatars()},getSelectedAvatar:function(){return this.store.getSelectedAvatar()},getAllAvatars:function(){return this.store.getAllAvatars()},getAllAvatarsRenderData:function(t){var r,e=this,a=this.getAllAvatars(),s={system:[],custom:[]};for(r=0;r<a.system.length;r++)s.system.push(e.getAvatarRenderData(a.system[r],t));for(r=0;r<a.custom.length;r++)s.custom.push(e.getAvatarRenderData(a.custom[r],t));return s},getAvatarRenderData:function(t,r){var e=t.toJSON();return e.src=this.getAvatarSrc(t,r),e.width=r.width,e.height=r.height,e},refreshStore:function(t){this.store.refresh(t)},getAvatarSrc:function(r,e){return this.store.isTempAvatar(r)?s+"/secure/temporaryavatar?"+a.param({cropped:!0,magic:(new Date).getTime(),size:e.param}):r.getUrl(t.format("{0}x{1}",e.height,e.width))},createTemporaryAvatar:function(t,r){this.store.createTemporaryAvatar(t,r)},createAvatar:function(t,r,e){this.store.createAvatar(t,r,e)},createAvatarFromTemporary:function(t,r){this.store.createAvatarFromTemporary(t,r)},getAnonymousAvatarId:function(){return this.anonymousAvatarId}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = 'includes/ajs/avatarpicker/avatar-manager-factory.js' */
define("jira/ajs/avatarpicker/avatar-manager-factory",["jira/ajs/avatarpicker/avatar-store","jira/ajs/avatarpicker/avatar-manager","wrm/context-path","exports"],function(a,r,e,t){var s=e();t.createUniversalAvatarManager=function(e){var t,v="",n="",p="",l="",c="";if(e.projectId){var o=s+"/rest/api/latest/universal_avatar/type/"+e.avatarType+"/owner/"+e.projectId;t=o;var u=o+"/avatar";v=null,n=o+"/temp",p=o,l=u,c=u}else t=s+"/rest/api/latest/avatar/project/system",n=s+"/rest/api/latest/avatar/project/temporary",l=s+"/rest/api/latest/avatar/project/temporaryCrop";var i=new a({restQueryUrl:t,restUpdateUrl:v,restCreateTempUrl:n,restCreateUrl:p,restUpdateTempUrl:l,restSingleAvatarUrl:c,defaultAvatarId:e.defaultAvatarId});return new r({store:i,ownerId:e.projectId,avatarSrcBaseUrl:s+"/secure/projectavatar"})},t.createProjectAvatarManager=function(a){return a.avatarType="project",t.createUniversalAvatarManager(a)},t.createUserAvatarManager=function(e){var t=s+"/rest/api/latest/user",v=new a({restQueryUrl:t+"/avatars",restUpdateUrl:t+"/avatar",restCreateTempUrl:t+"/avatar/temporary",restUpdateTempUrl:t+"/avatar",restSingleAvatarUrl:t+"/avatar",restParams:{username:e.username},defaultAvatarId:e.defaultAvatarId});return new r({store:v,username:e.username,avatarSrcBaseUrl:s+"/secure/useravatar"})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarStore.js' */
define("jira/ajs/avatarpicker/avatar-store",["jira/util/formatter","jira/ajs/avatarpicker/avatar-util","jira/ajs/avatarpicker/avatar-factory","jira/ajs/ajax/smart-ajax","jira/lib/class","jquery"],function(t,e,r,a,s,i){return s.extend({TEMP_ID:"TEMP",init:function(t){if(!t.restQueryUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restQueryUrl], The rest url for querying avatars (see class description)");if(!t.restCreateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restCreateTempUrl], The rest url for creating a temporary avatar (see class description)");if(!t.restUpdateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restUpdateTempUrl], The rest url for updating a temporary avatar (see class description)");if(!t.defaultAvatarId)throw new Error("JIRA.AvatarStore.init: You must specify [defaultAvatarId] to the contructor so the store knows what to select if you delete the selected one");this.restQueryUrl=t.restQueryUrl,this.restUpdateUrl=t.restUpdateUrl,this.restCreateTempUrl=t.restCreateTempUrl,this.restCreateUrl=t.restCreateUrl,this.restUpdateTempUrl=t.restUpdateTempUrl,this.restSingleAvatarUrl=t.restSingleAvatarUrl,this.restParams=t.restParams||{},this.restParams.atl_token=atl_token(),this.defaultAvatarId=t.defaultAvatarId,this.avatars={system:[],custom:[]}},_buildCompleteUrl:function(e){var r=e;if(this.restParams){var a="";for(var s in this.restParams)a+=t.format("&{0}={1}",encodeURIComponent(s),encodeURIComponent(this.restParams[s]));r+="?"+a.substr(1)}return r},getById:function(t){var e;return i.each(this.avatars.system,function(r,a){if(this.getId()===t)return e=a,!1}),e||i.each(this.avatars.custom,function(r,a){if(this.getId()===t)return e=a,!1}),e},isTempAvatar:function(t){return t.getId()===this.TEMP_ID},_selectAvatar:function(t){var e=this.getSelectedAvatar();e&&e.setUnSelected(),t.setSelected()},selectAvatar:function(t,e){var r=this;if(!t)throw new Error("JIRA.AvatarStore.selectAvatar: Cannot select Avatar that does not exist");this.restUpdateUrl?a.makeRequest({type:"PUT",contentType:"application/json",dataType:"json",url:this._buildCompleteUrl(this.restUpdateUrl),data:JSON.stringify(t.toJSON()),success:function(){r._selectAvatar(t),e.success&&e.success.call(this,t)},error:e.error}):(r._selectAvatar(t),e.success&&e.success.call(this,t))},_destory:function(t){var e=i.inArray(t,this.avatars.custom);if(e===-1)throw new Error("JIRA.AvatarStore._destroy: Cannot remove avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");this.avatars.custom.splice(e,1)},destroy:function(t,e){var r=this;if(e=e||{},!t)throw new Error("JIRA.AvatarStore.destroy: Cannot delete Avatar that does not exist");a.makeRequest({type:"DELETE",url:this.getRestUrlForAvatar(t),success:function(){r._destory(t),t.isSelected()?r.selectAvatar(r.getById(r.defaultAvatarId),e):e.success&&e.success.apply(this,arguments)},error:e.error})},getSelectedAvatar:function(){for(var t=0;t<this.avatars.custom.length;t++)if(this.avatars.custom[t].isSelected())return this.avatars.custom[t];for(t=0;t<this.avatars.system.length;t++)if(this.avatars.system[t].isSelected())return this.avatars.system[t]},_update:function(t){var e=this;if(!this.getById(t.getId()))throw new Error("JIRA.AvatarStore._update: Cannot update avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");i.each(this.avatars.custom,function(r){this.getId()===t.getId()&&(e.avatars.custom[r]=t)})},update:function(t,e){var r=this;e=e||{},a.makeRequest({type:"PUT",url:this.getRestUrlForAvatar(t),error:e.error,success:function(){r._update(t),e.success&&e.success.apply(this,arguments)}})},_add:function(t){t.isSystemAvatar()?this.avatars.system.push(t):this.avatars.custom.push(t)},createAvatarFromTemporary:function(t,e){var s=this;e=e||{},this.restUpdateTempUrl&&a.makeRequest({type:"POST",url:this._buildCompleteUrl(this.restUpdateTempUrl),data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(t){t||(t={id:s.TEMP_ID,isSelected:!0});var a=r.createCustomAvatar(t);s._add(a),e.success&&e.success.call(this,t)},error:e.error})},createTemporaryAvatar:function(t,r){r=i.extend(!0,{},r,{params:this.restParams}),e.uploadTemporaryAvatar(this.restCreateTempUrl,t,r)},createAvatar:function(t,r,a){var s={x:r.cropperOffsetX,y:r.cropperOffsetY,size:r.cropperWidth};a=i.extend(!0,{},a,{params:this.restParams},{params:s}),e.uploadAvatar(this.restCreateUrl,t,a)},_refresh:function(t){var e=this;e.avatars.system=[],e.avatars.custom=[],t.system&&i.each(t.system,function(t,a){e.avatars.system.push(r.createSystemAvatar(a))}),t.custom&&i.each(t.custom,function(t,a){e.avatars.custom.push(r.createCustomAvatar(a))})},refresh:function(t){var e=this,r=this.getById(e.TEMP_ID);t=t||{},a.makeRequest({url:this._buildCompleteUrl(this.restQueryUrl),error:t.error,success:function(a){e._refresh(a),r&&e._add(r),t.success&&t.success.apply(this,arguments)}})},getAllAvatars:function(){return this.avatars},getAllSystemAvatars:function(){return this.avatars.system},getAllCustomAvatars:function(){return this.avatars.custom},getRestUrlForAvatar:function(t){return this._buildCompleteUrl(this.restSingleAvatarUrl+"/"+t.getId())}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarUtil.js' */
define("jira/ajs/avatarpicker/avatar-util",["jira/util/logger","jira/attachment/inline-attach","jquery"],function(r,e,a){var n={uploadUsingIframeRemoting:function(o,t,i){i=i||{};var s=t.val(),l=new e.Form(new e.FileInput(t,(!1))),u=l.addStaticProgress(s),d=l.cloneFileInput();l.fileSelector.clear();var c=new e.Timer(function(){},this),p=new e.FormUpload({$input:d,url:o,params:a.extend({},i.params,{filename:s,atl_token:window.atl_token()}),scope:this,before:function(){!this.cancelled&&u.start()},success:function(r,e){r.errorMessages&&r.errorMessages.length?l.addErrorWithFileName(r.errorMessages[0],s,n.getErrorTarget(l)):i.success&&i.success(r,e)},error:function(a){r.log(a),this.cancelled||(a.indexOf("SecurityTokenMissing")>=0?l.addError(e.Text.tr("upload.xsrf.timeout",s),n.getErrorTarget(l)):l.addError(e.Text.tr("upload.error.unknown",s),n.getErrorTarget(l)))},after:function(){c.cancel(),u.remove(),this.cancelled||l.enable()}});u.onCancel(function(){p.abort()}),p.upload()},uploadTemporaryUsingFileApi:function(r,n,o){var t=new e.Form(new e.FileInput(n,(!1))),i=n[0].files[0];o=o||{},o.params=a.extend({},o.params,{filename:i.name,size:i.size,atl_token:window.atl_token()}),this.handleFileUpload(r,n,i,t,o)},uploadUsingFileApi:function(r,o,t){var i=a(o),s=new e.Form(new e.FileInput(a(i),(!1)));e.AjaxPresenter.isSupported(i)||s.addError(e.Text.tr("upload.error.unsupported.browser"),n.getErrorTarget(s));var l=o.files[0];this.handleFileUpload(r,i,l,s,t||{})},handleFileUpload:function(r,o,t,i,s){var l,u=i.addProgress(t),d=new e.Timer(function(){l||u.show()}),c=new e.AjaxUpload({file:t,params:a.extend({},s.params),scope:this,url:r,before:function(){o.hide(),!l&&u.start()},progress:function(r){u.progress.$progress.parent().parent().show(),!l&&u.update(r)},success:function(r,e){l||(r.errorMessages&&r.errorMessages.length?(i.addErrorWithFileName(r.errorMessages[0],t.name,n.getErrorTarget(i)),s.error&&s.error(r.errorMessages[0],e)):201===e&&s.success(r,e))},error:function(r,a){a<0?i.addError(r,n.getErrorTarget(i)):i.addError(e.Text.tr("upload.error.unknown",t.name),n.getErrorTarget(i)),s.error&&s.error(r,a)},after:function(){d.cancel(),u.finish().remove(),o.val("").show()}});c.upload(),u.onCancel(function(){c.abort()})},getErrorTarget:function(r){return{$element:r.$form.find(".error")}},uploadTemporaryAvatar:function(r,a,n){e.AjaxPresenter.isSupported(a)?this.uploadTemporaryUsingFileApi(r,a,n):this.uploadUsingIframeRemoting(r,a,n)},uploadAvatar:function(r,e,a){this.uploadUsingFileApi(r,e,a)}};return n});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/ClientFileReader.js' */
define("jira/ajs/avatarpicker/client-file-reader",["jira/attachment/inline-attach","jira/util/formatter","underscore"],function(e,t,i){"use strict";var r=function(e){this.init(e)};return r.prototype.defaults={fileTypeFilter:/^image.*/,fileSizeLimit:10485760},r.prototype.init=function(e){this.options=i.defaults({},e,this.defaults)},r.prototype.readFileAsDataUri=function(e){var t=Array.prototype.slice.call(e,0,1)[0],i=this.validateFile(t);if(i.valid===!1){var r=new Error(i.error);return r.name="ValidationError",Promise.reject(r)}var a=new FileReader,n=new Promise(function(e,t){a.addEventListener("load",function(){e(a.result)}),a.addEventListener("error",function(e){t(e)})});return a.readAsDataURL(t),n},r.prototype.validateFile=function(i){var r="";return this.options.fileTypeFilter.test(i.type)?i.size>this.options.fileSizeLimit&&(r=t.format("The image {0} is too big. The maximum allowed upload size is {1}.",i.name,e.Text.fileSize(this.options.fileSizeLimit))):r="The file content you have provided is not a supported image format. Please try a JPEG, GIF or PNG file.",""===r?{valid:!0}:{valid:!1,error:r}},r});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/avatar-picker.js' */
define("jira/ajs/avatarpicker/avatar-picker",["jira/util/logger","jira/util/formatter","jira/ajs/avatarpicker/client-file-reader","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/ajax/smart-ajax","jira/dialog/dialog","jira/ajs/control","jquery","underscore"],function(a,e,r,t,i,n,o,c,l){return o.extend({defaults:{cropOffline:!1,maxImageDimension:2e3},init:function(a){a=l.defaults(a,this.defaults),this.avatarManager=a.avatarManager,this.avatarRenderer=a.avatarRenderer,this.imageEditor=a.imageEditor,this.size=a.size,this.selectCallback=a.select,this.cropperDialog=null,this.initialSelection=a.initialSelection,this.cropOffline=a.cropOffline,this.maxImageDimension=a.maxImageDimension},render:function(a){var e=this;this.avatarManager.refreshStore({success:function(){e.cropperDialog instanceof n&&(e.cropperDialog.hide(),delete e.cropperDialog),e.element=c('<div id="jira-avatar-picker" />'),e.element.html(JIRA.Templates.AvatarPicker.picker({avatars:e.avatarManager.getAllAvatarsRenderData(e.size)})),e._assignEvents("selectAvatar",e.element.find(".jira-avatar button")),e._assignEvents("deleteAvatar",e.element.find(".jira-delete-avatar")),e._assignEvents("uploader",e.element.find("#jira-avatar-uploader")),e._assignEvents("selectFilePicker",e.element.find("label.jira-avatar-uploader")),e._assignEvents("selectFilePicker",e.element.find("#jira-avatar-uploader-button")),e.$fileErrorContainer=e.element.find(".jira-avatar-upload-form .error"),void 0!==e.initialSelection&&e.getAvatarElById(e.initialSelection).addClass("jira-selected-avatar"),a(e.element),e.element.find("#jira-avatar-uploader-button").addClass("aui-button")},error:function(r,t,i,n){e.appendErrorContent(e.element,n),a(e.element)}})},appendErrorContent:function(a,e){try{var r=JSON.parse(e.data);r&&r.errorMessages?c.each(r.errorMessages,function(e,r){AJS.messages.error(a,{body:AJS.escapeHTML(r),closeable:!1,shadowed:!1})}):a.append(i.buildDialogErrorContent(e,!0))}catch(r){a.append(i.buildDialogErrorContent(e,!0))}},showFileError:function(a){this.$fileErrorContainer.text(a)},clearFileError:function(){this.$fileErrorContainer.text("")},createCropperDialog:function(a,e){var r=this;return new n({id:"project-avatar-cropper",width:560,content:function(t){var i=r.imageEditor.render(e);r.imageEditor.edit({confirm:function(e){r.imageEditor.startProgress(),r.avatarManager.createAvatar(a,e,{success:function(a){r.render(function(){r.selectAvatar(a.id)})},error:function(){r.resetCropping()}})},cancel:r.resetCropping.bind(r)}),t(i)}})},cropLocalFile:function(e){var i,n=this,o=new r;o.readFileAsDataUri(e.files).then(function(a){return i=a,n.validateImage(i)}).then(function(){var a={cropperOffsetX:100,cropperOffsetY:100,cropperWidth:100,url:i};n.cropperDialog=n.createCropperDialog(e,a),n.cropperDialog.bind("dialogContentReady",function(){c(n).trigger(t.LOADED)}),n.cropperDialog.bind("Dialog.hide",function(){c(n).trigger(t.DISMISSED)}),n.cropperDialog.show()}).catch(function(e){"ValidationError"===e.name?n.showFileError(e.message):a.error(e)})},resetCropping:function(){this.cropperDialog&&this.cropperDialog.hide(),this.element.find("#jira-avatar-uploader").val("")},validateImage:function(a){var r=new Image,t=this,i=new Promise(function(a,i){r.onload=function(){if(this.naturalHeight>t.maxImageDimension||this.naturalWidth>t.maxImageDimension){var r=new Error(e.format("The selected image size is too big. The maximum allowed image size is {0}px * {0}px",t.maxImageDimension));r.name="ValidationError",i(r)}else a(this.naturalWidth,this.naturalHeight)},r.onerror=function(){var a=new Error("Cannot read selected image. Please try again or choose a different image.");a.name="ValidationError",i(a)}});return r.src=a,i},uploadTempAvatar:function(e){var r=this;this.avatarManager.createTemporaryAvatar(e,{success:function(a){a.id?r.render(function(){r.selectAvatar(a.id)}):(e.val(""),r.cropperDialog=new n({id:"project-avatar-cropper",width:560,content:function(e){function t(){var a=i.find("input[type=submit]"),e=c("<span class='icon throbber loading'></span>");return a.attr("aria-disabled","true").attr("disabled",""),a.before(e),function(){e.remove(),a.removeAttr("aria-disabled").removeAttr("disabled")}}var i=r.imageEditor.render(a);r.imageEditor.edit({confirm:function(a){var e=t();r.avatarManager.createAvatarFromTemporary(a,{success:function(a){r.render(function(){r.selectAvatar(a.id)})},error:e})}}),i.find(".cancel").click(function(){r.cropperDialog.hide()}),e(i)}}),r.cropperDialog.bind("dialogContentReady",function(){c(r).trigger(t.LOADED)}),r.cropperDialog.bind("Dialog.hide",function(){c(r).trigger(t.DISMISSED)}),r.cropperDialog.show())},error:function(){a.log(arguments)}})},getAvatarElById:function(a){return this.element.find(".jira-avatar[data-id='"+a+"']")},selectAvatar:function(a){var e=this.avatarManager.getById(a),r=this;this.avatarManager.selectAvatar(this.avatarManager.getById(a),{error:function(){},success:function(){r.getAvatarElById(a).remove(),r.selectCallback&&r.selectCallback.call(r,e,r.avatarManager.getAvatarSrc(e,r.size))}})},selectFilePicker:function(){var a=c("#jira-avatar-uploader");a&&a.click()},deleteAvatar:function(a){var r=this;confirm("Are you sure you want to delete avatar?")&&this.avatarManager.destroy(this.avatarManager.getById(a),{error:function(){},success:function(){var e=r.avatarManager.getSelectedAvatar(),t=r.getAvatarElById(a);t.fadeOut(function(){t.remove()}),e.getId()!==a&&(r.getAvatarElById(e.getId()).addClass("jira-selected-avatar"),r.selectCallback.call(r,e,r.avatarManager.getAvatarSrc(e,r.size),!0))}})},_events:{uploader:{change:function(a,e){this.clearFileError(),this.cropOffline?this.cropLocalFile(e[0]):this.uploadTempAvatar(e)}},deleteAvatar:{click:function(a,e){this.deleteAvatar(e.attr("data-id"))}},selectAvatar:{click:function(a,e){"select-avatar-button"===e[0].id&&this.selectAvatar(e.attr("data-id"))}},selectFilePicker:{click:function(a,e){this.selectFilePicker()}}}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/avatar-picker-factory.js' */
define("jira/ajs/avatarpicker/avatar-picker-factory",["jira/util/formatter","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/avatarpicker/avatar-manager","jira/ajs/avatarpicker/avatar-manager-factory","jira/ajs/avatarpicker/avatar","jira/ajs/avatarpicker/avatar/sizes","jira/dialog/form-dialog","wrm/context-path","wrm/data","jquery","exports"],function(a,e,t,r,i,c,n,o,d,v,p,l){l.createUniversalAvatarPicker=function(a){return new e({avatarManager:i.createUniversalAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,avatarType:a.avatarType}),initialSelection:a.initialSelection,imageEditor:new t,size:a.hasOwnProperty("avatarSize")?a.avatarSize:n.LARGE,select:a.select,cropOffline:!0})},l.createProjectAvatarPicker=function(a){return new e({avatarManager:i.createProjectAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId}),imageEditor:new t,size:n.LARGE,select:a.select,cropOffline:!0})},l.createUserAvatarPicker=function(a){return new e({avatarManager:i.createUserAvatarManager({username:a.username,defaultAvatarId:a.defaultAvatarId}),imageEditor:new t,size:n.LARGE,select:a.select})},l.createUniversalAvatarPickerDialog=function(e){var t=e.initialSelection||e.defaultAvatarId,r=new o({trigger:e.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(i){var c,n;n=p('<div id="projectavatar-content-wrapper"/>'),p("<h2 />").text(e.title||"Select a Project Avatar").appendTo(n),c=l.createUniversalAvatarPicker({projectKey:e.projectKey,projectId:e.projectId,defaultAvatarId:e.defaultAvatarId,initialSelection:t,avatarType:e.avatarType,avatarSize:e.avatarSize,select:function(a,i,c){t=String(a.getId()),e.select&&e.select.apply(this,arguments),c||r.hide()}}),c.render(function(a){n.append(a),i(n)})}});r._focusFirstField=function(){}},l.createProjectAvatarPickerDialog=function(e){var t=new o({trigger:e.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(r){var i,c;c=p('<div id="projectavatar-content-wrapper"/>'),p("<h2 />").text("Select a Project Avatar").appendTo(c),i=l.createProjectAvatarPicker({projectKey:e.projectKey,projectId:e.projectId,defaultAvatarId:e.defaultAvatarId,select:function(a,r,i){e.select&&e.select.apply(this,arguments),i||t.hide()}}),i.render(function(a){c.append(a),r(c)})}});t._focusFirstField=function(){}};var s=v.claim("jira.webresources:avatar-picker.data");l.createUserAvatarPickerDialog=function(e){if(s&&s.isEnabled)return void p(e.trigger).click(function(a){var e=d()+s.url,t=e.indexOf("?")>-1?"&":"?";e+=t+"continue="+encodeURIComponent(window.location.href),a.preventDefault(),a.stopPropagation(),AJS.reloadViaWindowLocation(e)});var t=new o({trigger:e.trigger,id:"user-avatar-picker",width:600,stacked:!0,content:function(r){var i,c;c=p('<div id="useravatar-content-wrapper"/>'),p("<h2 />").text("Select a User Avatar").appendTo(c),i=l.createUserAvatarPicker({username:e.username,defaultAvatarId:e.defaultAvatarId,select:function(a,r,i){e.select&&e.select.apply(this,arguments),p(".avatar-image").attr("src",r),i||t.hide()}}),i.render(function(a){c.append(a),r(c)})}})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/avatar-picker-image-editor.js' */
define("jira/ajs/avatarpicker/avatar-picker/image-editor",["jira/ajs/control","jquery"],function(e,t){var a=e.extend({render:function(e){return this.element=t('<div id="avatar-picker-image-editor"/>').html(JIRA.Templates.AvatarPicker.imageEditor(e)),this.element},edit:function(e){var a=this,i=this.element.find(".avataror");e=e||{},i.unbind(),i.bind("AvatarImageLoaded",function(){e.ready&&e.ready()}),i.find("img").load(function(){i.avataror({previewElement:a.element.find(".jira-avatar-cropper-header"),parent:a.element})}),this.element.find("#avataror").submit(function(a){a.preventDefault(),e.confirm&&e.confirm({cropperOffsetX:t("#avatar-offsetX").val(),cropperOffsetY:t("#avatar-offsetY").val(),cropperWidth:t("#avatar-width").val()})}).find(".cancel").click(function(t){t.preventDefault(),e.cancel&&e.cancel()})},startProgress:function(){this.element.find("input[type=submit]").attr("aria-disabled","true").attr("disabled",""),this.element.find(".spinner").spin()},stopProgress:function(){this.element.find("input[type=submit]").removeAttr("aria-disabled").removeAttr("disabled"),this.element.find(".spinner").spinStop()}});return a.LOADED="imageEditorLoaded",a.DISMISSED="imageEditorDismissed",a});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/GravatarUtil.js' */
define("jira/ajs/avatarpicker/gravatar-util",["jquery","exports"],function(a,e){e.showGravatarHelp=function(e){"undefined"!=typeof e&&"undefined"!=typeof e.entry&&(a(".gravatar-signup-text").addClass("hidden"),a(".gravatar-login-text").removeClass("hidden"))},e.displayGravatarHelp=function(){var r=a("#gravatar_json_url");r.length&&a.ajax(r.val(),{dataType:"jsonp",success:e.showGravatarHelp})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/initAvatarPicker.js' */
!function(){var a=require("jquery"),r=require("jira/ajs/avatarpicker/avatar/sizes"),e=require("jira/ajs/avatarpicker/avatar-factory"),t=require("jira/ajs/avatarpicker/avatar-manager-factory"),c=require("jira/ajs/avatarpicker/avatar-picker-factory"),A=require("jira/ajs/avatarpicker/gravatar-util");AJS.namespace("JIRA.Avatar",null,require("jira/ajs/avatarpicker/avatar")),AJS.namespace("JIRA.Avatar.createCustomAvatar",null,e.createCustomAvatar),AJS.namespace("JIRA.Avatar.createSystemAvatar",null,e.createSystemAvatar),AJS.namespace("JIRA.Avatar.getSizeObjectFromName",null,r.getSizeObjectFromName),AJS.namespace("JIRA.Avatar.LARGE",null,r.LARGE),AJS.namespace("JIRA.Avatar.MEDIUM",null,r.MEDIUM),AJS.namespace("JIRA.Avatar.SMALL",null,r.SMALL),AJS.namespace("JIRA.AvatarManager",null,require("jira/ajs/avatarpicker/avatar-manager")),AJS.namespace("JIRA.AvatarManager.createUniversalAvatarManager",null,t.createUniversalAvatarManager),AJS.namespace("JIRA.AvatarManager.createProjectAvatarManager",null,t.createProjectAvatarManager),AJS.namespace("JIRA.AvatarManager.createUserAvatarManager",null,t.createUserAvatarManager),AJS.namespace("JIRA.AvatarPicker",null,require("jira/ajs/avatarpicker/avatar-picker")),AJS.namespace("JIRA.AvatarPicker.ImageEditor",null,require("jira/ajs/avatarpicker/avatar-picker/image-editor")),AJS.namespace("JIRA.AvatarPicker.createUniversalAvatarPicker",null,c.createUniversalAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createProjectAvatarPicker",null,c.createProjectAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createUserAvatarPicker",null,c.createUserAvatarPicker),AJS.namespace("JIRA.createUniversalAvatarPickerDialog",null,c.createUniversalAvatarPickerDialog),AJS.namespace("JIRA.createProjectAvatarPickerDialog",null,c.createProjectAvatarPickerDialog),AJS.namespace("JIRA.createUserAvatarPickerDialog",null,c.createUserAvatarPickerDialog),AJS.namespace("JIRA.AvatarStore",null,require("jira/ajs/avatarpicker/avatar-store")),AJS.namespace("JIRA.AvatarUtil",null,require("jira/ajs/avatarpicker/avatar-util")),AJS.namespace("JIRA.GravatarUtil.showGravatarHelp",null,A.showGravatarHelp),a(function(){c.createUserAvatarPickerDialog({trigger:"#user_avatar_image",username:a("#avatar-owner-id").text(),defaultAvatarId:a("#default-avatar-id").text()}),a("#gravatar_help_params")&&A.displayGravatarHelp()})}();;
;
/* module-key = 'jira.webresources:avatar-picker', location = 'includes/ajs/avatarpicker/AvatarPicker.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.AvatarPicker&&(JIRA.Templates.AvatarPicker={}),JIRA.Templates.AvatarPicker.picker=function(a,t){for(var e='<form class="jira-avatar-upload-form aui top-label" action="#"><input name="id" value="10000" type="hidden" ><input name="pid" value="10000" type="hidden" ><div class="field-group"><button id="jira-avatar-uploader-button" type="button">'+soy.$$escapeHtml("Upload a new avatar")+'</button><input type="file" class="ignore-inline-attach" name="avatar" id="jira-avatar-uploader" style="visibility:hidden;"/><div class="error"></div></div></form><div class="form-body"><ul class="jira-avatars">',i=a.avatars.system,s=i.length,r=0;r<s;r++){var l=i[r];e+='<li class="jira-avatar jira-system-avatar '+(l.isSelected?"jira-selected-avatar":"")+'" title="Select this Avatar" data-id="'+soy.$$escapeHtml(l.id)+'"><button id="select-avatar-button" data-id="'+soy.$$escapeHtml(l.id)+'" class="jira-icon-button" title="'+soy.$$escapeHtml("Select this Avatar")+'"><img id="avatar-'+soy.$$escapeHtml(l.id)+'" src="'+soy.$$escapeHtml(l.src)+'" width="'+soy.$$escapeHtml(l.width)+'" height="'+soy.$$escapeHtml(l.height)+'" alt="'+soy.$$escapeHtml("Select this Avatar")+'"/></button></li>'}for(var c=a.avatars.custom,o=c.length,p=0;p<o;p++){var d=c[p];e+='<li class="jira-avatar jira-custom-avatar '+(d.isSelected?"jira-selected-avatar":"")+'" title="Select this avatar" data-id="'+soy.$$escapeHtml(d.id)+'"><button id="select-avatar-button" data-id="'+soy.$$escapeHtml(d.id)+'" class="jira-icon-button" title="'+soy.$$escapeHtml("Select this Avatar")+'"><img id="avatar-'+soy.$$escapeHtml(d.id)+'" src="'+soy.$$escapeHtml(d.src)+'" width="'+soy.$$escapeHtml(d.width)+'" height="'+soy.$$escapeHtml(d.height)+'" alt="'+soy.$$escapeHtml("Select this Avatar")+'" /></span><button class="jira-delete-avatar jira-icon-button" data-id="'+soy.$$escapeHtml(d.id)+'" title="'+soy.$$escapeHtml("Delete this Avatar")+'">'+soy.$$escapeHtml("Delete this Avatar")+"</button></li>"}return e+="</ul></div>"},JIRA.Templates.AvatarPicker.imageEditor=function(a,t){return'<form id="avataror" class="jira-avatar-cropper-form aui" action="/jira/secure/project/AvatarPicker.jspa"><input type="hidden" name="cropperOffsetX" id="avatar-offsetX" value="'+soy.$$escapeHtml(a.cropperOffsetX)+'"><input type="hidden" name="cropperOffsetY" id="avatar-offsetY" value="'+soy.$$escapeHtml(a.cropperOffsetY)+'"><input type="hidden" name="cropperWidth" id="avatar-width"  value="'+soy.$$escapeHtml(a.cropperWidth)+'"><div class="jira-avatar-cropper-header"><p>'+soy.$$escapeHtml("Please select which part of the uploaded image you wish to use as the avatar.")+'</p></div><div class="form-body"><div class="avataror"><img src="'+soy.$$escapeHtml(a.url)+'" height="300" /></div></div><div class="form-footer buttons-container"><div class="buttons"><span class="icon spinner"></span><input type="submit" class="aui-button aui-button-primary" value="'+soy.$$escapeHtml("Confirm")+'"><a class="aui-button aui-button-link cancel" href="#">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"};;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/initAvatarPickerTrigger.js' */
define("jira/admin/init/avatar-picker-trigger",["jira/ajs/layer/layer-constants","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jira/ajs/avatarpicker/avatar","jira/ajs/avatarpicker/avatar-picker-factory","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jquery"],function(t,a,e,r,i,n,c,s,v,o,d){"use strict";function f(t){var a=d(".jira-avatar-picker-trigger"),e=d(".jira-avatar-picker-trigger img, img.jira-avatar-picker-trigger",t),r=d(t).find("#avatar-picker-avatar-id"),i=d(t).find("#avatar-picker-iconurl"),n=d(t).find("#avatar-type");""!==n.text()&&s.createUniversalAvatarPickerDialog({trigger:a,title:d(t).find("#avatar-dialog-title").text(),projectId:d(t).find("#avatar-owner-id").text(),projectKey:d(t).find("#avatar-owner-key").text(),defaultAvatarId:d(t).find("#default-avatar-id").text(),initialSelection:r.val(),avatarSize:c.getSizeObjectFromName(d(t).find("#avatar-size").text()),avatarType:n.text(),select:function(t,a){e.attr("src",a),i.val(a),r.val(t.getId())}})}function l(a){var e=d(".jira-inline-avatar-picker-trigger",a);e.length&&new j({offsetTarget:e,projectId:d(a).find("#avatar-owner-id").text(),projectKey:d(a).find("#avatar-owner-key").text(),defaultAvatarId:d(a).find("#default-avatar-id").text(),alignment:t.LEFT,width:420,allowDownsize:!0})}var g=n.extend({init:function(t){this.avatarPicker=t},content:function(t){this.avatarPicker.render(function(a){t(d("<div />").html(a))})},cache:function(){return!1},isLocked:function(){},startingRequest:function(){},finishedRequest:function(){}}),j=i.extend({init:function(t){var a=this;this.avatarPicker=v.createProjectAvatarPicker({projectId:t.projectId,projectKey:t.projectKey,defaultAvatarId:t.defaultAvatarId,select:function(e,r,i){t.select&&t.select.apply(this,arguments),i||a.hide(),a.offsetTarget().attr("src",r),a.offsetTarget().trigger("AvatarSelected")}}),t.contentRetriever=new g(this.avatarPicker),d(this.avatarPicker.imageEditor).bind(o.LOADED,function(){a.setWidth(a.layer().attr("scrollWidth"))}),this._super(t);var e=this.offsetTarget(),r=d("<span class='jira-avatar-picker-trigger'></span>");r.insertBefore(e).append(e),this._assignEvents("offsetTarget",r)},_events:{offsetTarget:{click:function(t){this.show()}}}});a.bind(e.NEW_CONTENT_ADDED,function(t,a,e){e!==r.panelRefreshed&&(f(a),l(a))})});;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/init/init-avatar-picker.js' */
require("jira/admin/init/avatar-picker-trigger");;
;
/* module-key = 'jira.webresources:croneditor', location = '/includes/js/cron/croneditor.js' */
define("jira/util/cron",["exports"],function(n){n.hideCronEdit=function(n){document.getElementById(n).style.display="none"},n.showCronEdit=function(n){document.getElementById(n).style.display=""},n.toggleFrequencyControl=function(n,i){var e=document.getElementById(n+"interval");0==e.value?switchToOnce(n,i):switchToMany(n,i)},n.switchToOnce=function(n,i){hideCronEdit(n+"runMany"),showCronEdit(n+"runOnce"),i&&(timesOnce[n]=!0)},n.switchToMany=function(n,i){hideCronEdit(n+"runOnce"),showCronEdit(n+"runMany"),i&&(timesOnce[n]=!1)},n.switchToDaysOfMonth=function(n){hideCronEdit(n+"daysOfWeek"),showCronEdit(n+"daysOfMonth"),showCronEdit(n+"freqDiv"),hideCronEdit(n+"innerFreqDiv"),hideCronEdit(n+"advanced"),switchToOnce(n,!1)},n.switchToDaysOfWeek=function(n){showCronEdit(n+"daysOfWeek"),hideCronEdit(n+"daysOfMonth"),showCronEdit(n+"freqDiv"),showCronEdit(n+"innerFreqDiv"),hideCronEdit(n+"advanced"),switchToOriginal(n)},n.switchToDaily=function(n){hideCronEdit(n+"daysOfWeek"),hideCronEdit(n+"daysOfMonth"),showCronEdit(n+"freqDiv"),showCronEdit(n+"innerFreqDiv"),hideCronEdit(n+"advanced"),switchToOriginal(n)},n.switchToAdvanced=function(n){hideCronEdit(n+"daysOfWeek"),hideCronEdit(n+"daysOfMonth"),hideCronEdit(n+"runOnce"),hideCronEdit(n+"runMany"),hideCronEdit(n+"freqDiv"),showCronEdit(n+"advanced")},n.switchToOriginal=function(n){timesOnce[n]?switchToOnce(n,!1):switchToMany(n,!1)}}),AJS.namespace("hideCronEdit",null,require("jira/util/cron").hideCronEdit),AJS.namespace("showCronEdit",null,require("jira/util/cron").showCronEdit),AJS.namespace("toggleFrequencyControl",null,require("jira/util/cron").toggleFrequencyControl),AJS.namespace("switchToOnce",null,require("jira/util/cron").switchToOnce),AJS.namespace("switchToMany",null,require("jira/util/cron").switchToMany),AJS.namespace("switchToDaysOfMonth",null,require("jira/util/cron").switchToDaysOfMonth),AJS.namespace("switchToDaysOfWeek",null,require("jira/util/cron").switchToDaysOfWeek),AJS.namespace("switchToDaily",null,require("jira/util/cron").switchToDaily),AJS.namespace("switchToAdvanced",null,require("jira/util/cron").switchToAdvanced),AJS.namespace("switchToOriginal",null,require("jira/util/cron").switchToOriginal);;
;
/* module-key = 'com.atlassian.jira.jira-npmbridge-plugin:atlassiansox-origin-tracing', location = 'node_modules/@atlassiansox/origin-tracing/dist/origin-tracing.js' */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("OriginTracing",[],t):"object"==typeof exports?exports.OriginTracing=t():e.OriginTracing=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64ToBase64Url=function(e){if(null==e)return"";return String(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},t.base64UrlToBase64=function(e){if(null==e)return"";var t=String(e).replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4,n="===".slice(0,r);return t+n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function(e){var t=JSON.stringify(i(e)),r=btoa(t);return(0,n.base64ToBase64Url)(r)},t.decode=function(e){var t=(0,n.base64UrlToBase64)(e),r=atob(t);return u(JSON.parse(r))},t.toJSONObject=i,t.fromJSONObject=u;var n=r(0),o={confluence:"c",jira:"j",stride:"s",bitbucket:"b",trello:"t"};function i(e){var t=e.id,r=e.product;return{i:t,p:r in o?o[r]:r}}function u(e){var t={};return e.i&&(t.id=e.i),e.p&&(t.product=function(e){for(var t=Object.keys(o),r=0;r<t.length;r++){var n=t[r],i=o[n];if(e===i)return n}return e}(e.p)),t}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty;function o(e){return decodeURIComponent(e.replace(/\+/g," "))}t.stringify=function(e,t){t=t||"";var r=[];for(var o in"string"!=typeof t&&(t="?"),e)n.call(e,o)&&r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return r.length?t+r.join("&"):""},t.parse=function(e){for(var t,r=/([^=?&]+)=?([^&]*)/g,n={};t=r.exec(e);n[o(t[1])]=o(t[2]));return n}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t,r){var n=r(4),o=r(3);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var u=(e=e||{}).random||(e.rng||n)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t)for(var a=0;a<16;++a)t[i+a]=u[a];return t||o(u)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(5),u=(n=i)&&n.__esModule?n:{default:n},a=f(r(2)),c=f(r(1));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=function(){function e(t){var r=t.id,n=void 0===r?e.generateId():r,o=t.product,i=t.dangerouslySkipValidation,u=void 0!==i&&i;p(this,e),this.id=n,this.product=o,u||this.validate()}return o(e,[{key:"encode",value:function(){return c.encode({id:this.id,product:this.product})}},{key:"addToUrl",value:function(e){var t=this;return b(e,function(e){var r=a.parse(e);return r.atlOrigin=t.encode(),a.stringify(r)})}},{key:"isEmpty",value:function(){return!1}},{key:"isMalformed",value:function(){return!this.isEmpty()&&!this.isValid()}},{key:"isValid",value:function(){return!0}},{key:"toAnalyticsAttributes",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.transformValue,n=void 0===r?function(e){return e}:r,o=t.hasGeneratedId;return s(e={},void 0!==o&&o?"originIdGenerated":"originId",n(this.id)),s(e,"originProduct",n(this.product)),e}},{key:"validate",value:function(){if(!e.isValidId(this.id))throw new TypeError("Invalid Origin id");if(!e.isValidProduct(this.product))throw new TypeError("Missing/invalid Origin product")}}],[{key:"isValidId",value:function(e){return"string"==typeof e&&/^[-a-zA-Z0-9]{1,36}$/.test(e)}},{key:"isValidProduct",value:function(e){return"string"==typeof e&&/^[-a-zA-Z0-9]{1,20}$/.test(e)}},{key:"generateId",value:function(){return(0,u.default)().replace(/-/g,"")}},{key:"createEmpty",value:function(){return new v}},{key:"createMalformed",value:function(){return new g}},{key:"fromUrl",value:function(t){var r={};return b(t,function(e){r=a.parse(e)}),e.fromEncoded(r.atlOrigin)}},{key:"fromEncoded",value:function(t){if(!t)return e.createEmpty();try{return e.decode(t)}catch(t){return e.createMalformed()}}},{key:"removeFromUrl",value:function(e){return b(e,function(e){var t=a.parse(e);return delete t.atlOrigin,a.stringify(t)})}},{key:"decode",value:function(t){return new e(c.decode(t))}}]),e}();t.default=y;var v=function(e){function t(){return p(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{id:null,product:null,dangerouslySkipValidation:!0}))}return d(t,y),o(t,[{key:"isValid",value:function(){return!1}},{key:"isEmpty",value:function(){return!0}},{key:"toAnalyticsAttributes",value:function(){return{}}}]),t}(),g=function(e){function t(){return p(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{id:null,product:null,dangerouslySkipValidation:!0}))}return d(t,y),o(t,[{key:"isValid",value:function(){return!1}},{key:"isEmpty",value:function(){return!1}},{key:"toAnalyticsAttributes",value:function(){return{originMalformed:!0}}}]),t}();function b(e,t){return String(e).replace(/(^[^?]*)(?:\?)?([^#]*?)(#.*|$)$/,function(e,r,n,o){var i=t(n);return i&&(i="?"+i),""+r+i+o})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=n,e&&e.__esModule?e:{default:e}).default;var e}})}])});;
;
/* module-key = 'com.atlassian.jira.jira-npmbridge-plugin:atlassiansox-origin-tracing-amd', location = 'origin-tracing/origin-tracing-amd.js' */
!function(n){define("OriginTracing",function(){return n.default})}(window.OriginTracing);;
;
/* module-key = 'jira.webresources:origin-tracing', location = '/js/handle-origin-tracing.js' */
define("jira/handle-origin-tracing",["OriginTracing","jira/featureflags/feature-manager","jira/analytics"],function(i,r,a){var e="jira.origin-tracing.share-issue.urls",t=r.isFeatureEnabled(e);if(t){var n=window.location.href,o=i.fromUrl(n);if(!o.isEmpty()){var s=i.removeFromUrl(n);window.history.replaceState({},document.title,s),a.send({name:"jira.page.with-atl-origin.viewed",properties:o.toAnalyticsAttributes()})}}});;
;
/* module-key = 'jira.webresources:origin-tracing-init', location = '/js/handle-origin-tracing-init.js' */
require("jira/handle-origin-tracing");;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'js/banner/update-hipchat-link-banner.js' */
(function(a){AJS.toInit(function(){var e="HIPCHAT_ADMIN_BANNER_DISMISS_2";var c;if(!d()&&AJS.Meta.get("is-admin")&&!g()){a.ajax({url:AJS.contextPath()+"/rest/hipchat/integrations/1.0/configuration/status",dataType:"json",cache:false}).done(function(i){if(i.installationCheckResult.required||i.v1){c=b(i)}})}function b(k){var j=JIRA.Templates.HipChat.Banner.updateHipChatLink({removeV1link:!k.v2&&k.v1,reinstallationDiscoveryTitle:k.installationCheckResult.discoveryTitle,reinstallationDiscoveryText:k.installationCheckResult.discoveryText,reinstallationDiscoveryButton:k.installationCheckResult.discoveryButton});var i=JIRA.Messages.showWarningMsg(j);a(document).on("click","#remove-hipchat-v1-link",h);a(document).on("aui-flag-close",".aui-flag",f);return i}function d(){return window.location.toString().indexOf("/plugins/servlet/hipchat/configure")>0}function f(i){if(a(i.target).find(".hipchat-update-banner").length>0){AJS.Cookie.save(e,true)}}function g(){return AJS.Cookie.read(e)=="true"}function h(i){i.preventDefault();a.ajax({url:AJS.contextPath()+"/rest/hipchat/integrations/1.0/configuration/v1",cache:false,type:"DELETE"}).error(function(j){if(c){c.hide()}JIRA.Messages.showErrorMsg(AJS.format("We couldn\'\'t find your integration. If the problem persists, contact Atlassian Support.\u003cbr/\u003e Error Status [{0}]",j.status))}).done(function(j){if(c){c.hide()}JIRA.Messages.showSuccessMsg("Integration has been removed successfully")})}})})(AJS.$);;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:update-plugin-banner-resources', location = 'soy/banner/update-hipchat-link-banner.soy' */
// This file was automatically generated from update-hipchat-link-banner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.HipChat.Banner.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.HipChat == 'undefined') { JIRA.Templates.HipChat = {}; }
if (typeof JIRA.Templates.HipChat.Banner == 'undefined') { JIRA.Templates.HipChat.Banner = {}; }


JIRA.Templates.HipChat.Banner.updateHipChatLink = function(opt_data, opt_ignored) {
  return '<div class="hipchat-update-banner"><b>' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryTitle) + '</b><p>' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryText) + '</p><p/><a href="' + soy.$$escapeHtml("" + '/plugins/servlet/hipchat/configure') + '">' + soy.$$escapeHtml(opt_data.reinstallationDiscoveryButton) + '</a>' + ((opt_data.removeV1link) ? '<a id="remove-hipchat-v1-link">' + soy.$$escapeHtml('Remove Integration') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.HipChat.Banner.updateHipChatLink.soyTemplateName = 'JIRA.Templates.HipChat.Banner.updateHipChatLink';
}
;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:button-resources-loader', location = '/js/feedback-resource-loader.js' */
define("jira/feedback/loader",["wrm/require","jira/skate"],function(e,a){"use strict";a("jira-feedback-plugin",{type:a.type.CLASS,attached:function(){e(["wrc!com.atlassian.feedback.jira-feedback-plugin:button-resources"])}})});;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:button-resources-init', location = '/js/feedback-init.js' */
require(["jira/feedback/loader"],function(){"use strict"});;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:umux-resources', location = '/template/umux.soy' */
// This file was automatically generated from umux.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Feedback.Plugin.Umux.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Feedback == 'undefined') { JIRA.Feedback = {}; }
if (typeof JIRA.Feedback.Plugin == 'undefined') { JIRA.Feedback.Plugin = {}; }
if (typeof JIRA.Feedback.Plugin.Umux == 'undefined') { JIRA.Feedback.Plugin.Umux = {}; }


JIRA.Feedback.Plugin.Umux.renderIntroducer = function(opt_data, opt_ignored) {
  return '<div id="umux-introducer-dialog-id"><div class="umux-introducer-dialog-id-imageContainer"><img class="umux-introducer-dialog-id-image" src="' + soy.$$escapeHtml("") + '/download/resources/com.atlassian.feedback.jira-feedback-plugin:umux-resources/lingbo.jpg"></div><div><p>Hi! I\'m Lingbo, a product manager at Atlassian.<br>I\'d love to hear your thoughts on Jira.</p><button class="umux-introducer-dialog-id-showMe aui-button aui-button-link">Answer 3 short questions</button></div><div class="umux-introducer-dialog-id-dismiss"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">Close survey dialog</span></div></div>';
};
if (goog.DEBUG) {
  JIRA.Feedback.Plugin.Umux.renderIntroducer.soyTemplateName = 'JIRA.Feedback.Plugin.Umux.renderIntroducer';
}


JIRA.Feedback.Plugin.Umux.renderSurvey = function(opt_data, opt_ignored) {
  return '<div id="umux-survey-dialog-id"><form class="aui">' + JIRA.Feedback.Plugin.Umux.renderQuestion({questionNo: 1, questionText: '1. The capabilities of Jira meet my requirements.', type: 'radio'}) + JIRA.Feedback.Plugin.Umux.renderQuestion({questionNo: 2, questionText: '2. Jira is easy to use.', type: 'radio'}) + JIRA.Feedback.Plugin.Umux.renderQuestion({questionNo: 3, questionText: '3. Tell us why you rate Jira this way?', type: 'text'}) + '</form></div>';
};
if (goog.DEBUG) {
  JIRA.Feedback.Plugin.Umux.renderSurvey.soyTemplateName = 'JIRA.Feedback.Plugin.Umux.renderSurvey';
}


JIRA.Feedback.Plugin.Umux.renderQuestion = function(opt_data, opt_ignored) {
  var output = '<div class="question" data-question-id="' + soy.$$escapeHtml(opt_data.questionNo) + '"><p class="question-text">' + soy.$$escapeHtml(opt_data.questionText) + '</p>';
  if (opt_data.type == 'radio') {
    output += '<div class="group q1"><div><p class="scale-text">Strongly disagree</p></div>';
    for (var score30 = 1; score30 < 8; score30++) {
      var inputId__soy31 = 'q' + opt_data.questionNo + 'rating' + score30;
      var inputName__soy32 = 'q' + opt_data.questionNo;
      output += '<div class="horizontal-radio"><input class="radio" type="radio" name="' + soy.$$escapeHtml(inputName__soy32) + '" id="' + soy.$$escapeHtml(inputId__soy31) + '" data-rating="' + soy.$$escapeHtml(score30) + '"><label for="' + soy.$$escapeHtml(inputId__soy31) + '">' + soy.$$escapeHtml(score30) + '</label></div>';
    }
    output += '<div><p class="scale-text">Strongly agree</p></div></div>';
  } else if (opt_data.type == 'text') {
    output += '<div class="group q1">';
    var textAreaName__soy47 = 'q' + opt_data.questionNo + 'text';
    output += '<textarea class="textarea long-field" name="' + soy.$$escapeHtml(textAreaName__soy47) + '" placeholder="Your comment here..."></textarea></div>';
  }
  output += '<div class="validation-message">Please select a rating.</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Feedback.Plugin.Umux.renderQuestion.soyTemplateName = 'JIRA.Feedback.Plugin.Umux.renderQuestion';
}
;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:umux-resources', location = '/js/umux-init.js' */
require(["jira/feedback/umux/controller","jira/feedback/umux/common","jira/featureflags/simplified-ux-feature-manager","jquery"],function(e,a,r,t){"use strict";t(document).ready(function(){var t=a.locationPathname(),u=!!AJS.Meta.get("remote-user"),n=0===t.indexOf(AJS.contextPath()+"/secure/WelcomeToJIRA.jspa"),i=r.isUmuxLiteInAdg2Enabled();i&&u&&!n&&e.run()})});;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:umux-resources', location = '/js/umux-common.js' */
define("jira/feedback/umux/common",[],function(){"use strict";function n(){return null==a&&(a=""===AJS.Meta.get("adg3-start-time")),a}function t(){if("undefined"!=typeof window)return window.location}function e(){var n=t();return n?n.pathname:""}var a=null;return{hasNeverOptedInAdg3:n,locationPathname:e}});;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:umux-resources', location = '/js/umux-survey.js' */
define("jira/feedback/umux/survey",["jquery","aui/dialog"],function(n,e){"use strict";function i(){return new Promise(function(n){v=n,t()})}function t(){var i=JIRA.Feedback.Plugin.Umux.renderSurvey(),t=new e(700,420);t.addHeader("").addPanel("Survey",i).addSubmit("Send",function(n){s(n)}).addCancel("Cancel",function(n){c(n)}).show(),n(t.popup.element).find("button").focus(),u()}function u(){a(1).find("input").change(function(){d(1)}),a(2).find("input").change(function(){d(2)})}function a(n){var e=r();return e.find(".question[data-question-id="+n+"]")}function r(){return l||(l=n("#umux-survey-dialog-id")),l}function d(n){var e=Boolean(o(n));return a(n).find(".validation-message").toggleClass("show",!e),e}function o(n){return a(n).find("input:checked").data("rating")}function f(n){return a(n).find("textarea").val()}function c(n){n.hide(),v()}function s(n){var e=d(1),i=d(2);if(e&&i){var t=o(1),u=o(2),a=f(3);n.hide(),v({ratingQ1:t,ratingQ2:u,textQ3:a})}}var l,v;return{start:i}});;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:umux-resources', location = '/js/umux-introducer.js' */
define("jira/feedback/umux/introducer",["jira/feedback/umux/common","jquery"],function(e,t){"use strict";function a(){return new Promise(function(e){n(),r(e)})}function n(){var t=document.createElement("div");t.innerHTML=JIRA.Feedback.Plugin.Umux.renderIntroducer(),document.body.appendChild(t),AJS.trigger("analytics",{name:"grow0.umux.adg2.introducer.dialog.show",data:{where:e.locationPathname(),hasNeverOptedInAdg3:e.hasNeverOptedInAdg3()}})}function r(t){var a=document.querySelector("#"+u),n=document.querySelector("."+u+"-showMe"),r=document.querySelector("."+u+"-dismiss");n.addEventListener("click",function(){a.open=!1,t({showme:!0}),d(!1),AJS.trigger("analytics",{name:"grow0.umux.adg2.introducer.dialog.showme",data:{where:e.locationPathname(),hasNeverOptedInAdg3:e.hasNeverOptedInAdg3()}})},!1),r.addEventListener("click",function(){a.open=!1,t({showme:!1}),d(!0),AJS.trigger("analytics",{name:"grow0.umux.adg2.introducer.dialog.dismiss",data:{where:e.locationPathname(),hasNeverOptedInAdg3:e.hasNeverOptedInAdg3()}})},!1)}function d(a){localStorage.setItem(u,!0),AJS.trigger("analytics",{name:"grow0.umux.adg2.introducer.set.introduced.success",data:{where:e.locationPathname(),hasNeverOptedInAdg3:e.hasNeverOptedInAdg3()}});var n="grow0.umux.adg2.update.survey.time."+(a?"ondismiss.":"ondone.");t.ajax({context:this,type:"POST",url:AJS.contextPath()+"/rest/internal/2/umuxLite/updateSurveyTime"}).done(function(){AJS.trigger("analytics",{name:n+"success",data:{where:e.locationPathname(),hasNeverOptedInAdg3:e.hasNeverOptedInAdg3()}})}).fail(function(){AJS.trigger("analytics",{name:n+"fail",data:{where:e.locationPathname(),hasNeverOptedInAdg3:e.hasNeverOptedInAdg3()}})})}function o(){localStorage.removeItem(u),AJS.trigger("analytics",{name:"grow0.umux.adg2.introducer.reset.success",data:{where:e.locationPathname(),hasNeverOptedInAdg3:e.hasNeverOptedInAdg3()}})}function i(){t("#"+u).fadeOut(500)}var u="umux-introducer-dialog-id";return{run:a,reset:o,hideDialog:i}});;
;
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:umux-resources', location = '/js/umux-controller.js' */
define("jira/feedback/umux/controller",["jquery","jira/feedback/umux/common","jira/feedback/umux/introducer","jira/feedback/umux/survey","aui/flag","jira/moment"],function(e,t,a,r,n,o){"use strict";function u(){AJS.trigger("analytics",{name:"grow0.umux.adg2.run",data:{where:t.locationPathname(),hasNeverOptedInAdg3:t.hasNeverOptedInAdg3()}});try{window.UMUX_ADG2_RESET=function(){localStorage.removeItem(I),localStorage.removeItem(x),localStorage.removeItem(p),localStorage.removeItem(w),localStorage.removeItem(h),localStorage.removeItem(A),localStorage.removeItem(D)},window.UMUX_ADG2_DEBUG=function(e,t,a,r){localStorage.setItem(p,"true"),localStorage.setItem(w,e),localStorage.setItem(h,t),localStorage.setItem(A,a),localStorage.setItem(D,r)}}catch(e){}e.ajax({type:"GET",url:AJS.contextPath()+"/rest/internal/2/umuxLite/info"}).done(function(e){i(e)?g():v()})}function i(e){return y()||m(e.currentTime,e.npsSurveyInfo.lastSurveyDate,e.npsSurveyInfo.nextSurveyDate)&&s(e.currentTime,e.umuxLiteSurveyInfo.nextSurveyDate)&&l()&&c()}function s(e,t){if(t){var a=o(parseInt(e)),r=o(parseInt(t));return a.isSame(r,"days")||a.isAfter(r,"days")}return!0}function c(){return 0===e("body.adg3").size()}function l(){return!localStorage.getItem(I)}function m(e,t,a){var r=!0,n=!1,u=o(parseInt(e)),i=AJS.Meta.get("remote-user"),s=t||localStorage.getItem("nps-"+i+"-lastSurveyDate");if(s){var c=o(parseInt(t)),l=c.add(14,"days");r=l.isSame(u,"days")||l.isBefore(u,"days")}if(a){var m=o(parseInt(a)),g=m.subtract(14,"days");n=g.isSame(u,"days")||g.isAfter(u,"days")}return r&&n}function g(){var e=localStorage.getItem(x);if(e){var t=parseInt(e);t>=3?S():localStorage.setItem(x,t+1)}else localStorage.setItem(x,1);a.run().then(function(e){a.hideDialog(),e.showme&&d()})}function d(){r.start().then(function(a){a?(AJS.trigger("analytics",{name:"grow0.umux.adg2.survey.results",data:{ratingQ1:a.ratingQ1,ratingQ2:a.ratingQ2,textQ3:a.textQ3,where:t.locationPathname(),hasNeverOptedInAdg3:t.hasNeverOptedInAdg3()}}),e.ajax({type:"POST",url:AJS.contextPath()+"/rest/internal/2/umuxLite/saveSurvey",data:JSON.stringify({ratingQ1:a.ratingQ1,ratingQ2:a.ratingQ2,surveyText:a.textQ3}),contentType:"application/json",success:function(){AJS.trigger("analytics",{name:"grow0.umux.adg2.survey.results.success",data:{where:t.locationPathname(),hasNeverOptedInAdg3:t.hasNeverOptedInAdg3()}})}}),f()):AJS.trigger("analytics",{name:"grow0.umux.adg2.survey.cancel",data:{where:t.locationPathname(),hasNeverOptedInAdg3:t.hasNeverOptedInAdg3()}}),S()})}function S(){e.ajax({type:"POST",url:AJS.contextPath()+"/rest/internal/2/umuxLite/updateSurveyTime"})}function v(){localStorage.removeItem(I),localStorage.removeItem(x)}function f(){n({type:"success",title:"Thanks! We'll use your response to improve Jira.",close:"auto"})}function y(){try{var e="true"===localStorage.getItem(p);if(e){var t="true"===localStorage.getItem(w);if(t)return!0;var a=localStorage.getItem(h),r=localStorage.getItem(A),n=localStorage.getItem(D);return m(Date.now(),o(a,"MM-DD-YYYY").valueOf(),o(r,"MM-DD-YYYY").valueOf())&&s(Date.now(),o(n,"MM-DD-YYYY").valueOf())&&l()&&c()}}catch(e){}return!1}var I="umux-introducer-dialog-id",x="umux-introducer-times",p="umux-debug",h="umux-debug-npsLastSurveyDate",A="umux-debug-npsNextSurveyDate",D="umux-debug-umuxLiteNextSurveyDate",w="umux-always-show-introducer";return{run:u}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/dialog.js' */
define("jira/admin-helper/dialog",["jquery","jira/dialog/dialog","jira/focus/set-focus"],function(e,t,i){return t.extend({_getDefaultOptions:function(){return e.extend(this._super(),{cached:!1,widthClass:"large",stacked:!0})},defineResources:function(){this._super(),this.requireResource("com.atlassian.jira.plugins.jira-admin-helper-plugin:whereismycf-resources")},decorateContent:function(){var e=this;this.get$popupContent().find(".cancel").click(function(t){e.hide(),t.preventDefault()})},_onShowContent:function(){if(this._super(),t.current===this){var e=new i.FocusConfiguration;e.context=this.get$popup()[0],e.parentElementSelectors=[".form-body"],i.pushConfiguration(e),i.triggerFocus()}},hide:function(e){return this._super(e)!==!1&&void i.popConfiguration()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/notification-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta"],function(e,i,n){n.get("is-admin")&&e(document).delegate(".notificationhelper-trigger","click",function(e){e.preventDefault(),new i({id:"notification-helper-dialog",content:function(e){var i=this;require(["jira/admin-helper/notification-helper/content-loader"],function(n){n.loadContent(i,e)})}}).show()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/permission-helper-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta","jira/featureflags/simplified-ux-feature-manager"],function(e,i,r,a){r.get("is-admin")&&e(document).delegate(".permissionhelper-trigger","click",function(e){e.preventDefault(),new i({id:"permission-helper-dialog",widthClass:a.isAdg3StylesEnabled()?"medium":"large",content:function(e){var i=this;require(["jira/admin-helper/permission-helper/content-loader"],function(r){r.loadContent(i,e)})}}).show()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/whereismycf-init.js' */
require(["jquery","jira/admin-helper/dialog","jira/util/data/meta","jira/dialog/dialog","jira/featureflags/simplified-ux-feature-manager"],function(e,i,n,r,a){function t(){AJS.InlineDialog.current=null}if(n.get("is-admin")){var l="Where is my field?";e(document).delegate(".whereismycf-trigger","click",function(e){e.preventDefault(),new i({id:"whereismycf-dialog",widthClass:a.isAdg3StylesEnabled()?"small":"large",content:function(e){var i=this;require(["jira/admin-helper/whereismycf/content-loader"],function(n){n.loadContentForView(i,e)})}}).show()}),e(document).bind("showLayer",function(n,o,d){if("inlineDialog"==o&&"inline-dialog-field_picker_popup"==d.popup.attr("id")&&0==d.popup.find("#whereismycf-qfpicker-link-id").length){var c=e("<a href='#' id='whereismycf-qfpicker-link-id'>"+l+"</a>").appendTo(d.popup.find("#qf-picker-custom-link"));c.click(function(e){e.preventDefault(),d.hide(),t();var n=r.current;new i({id:"whereismycf-dialog",widthClass:a.isAdg3StylesEnabled()?"small":"large",content:function(e){var i=this;require(["jira/admin-helper/whereismycf/content-loader"],function(r){r.loadContentForEditAndCreate(i,n,e)})}}).show()})}})}});;
;
/* module-key = 'jira.webresources:field-templates', location = 'includes/jira/field/templates/singleUserPicker.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),"undefined"==typeof JIRA.Templates.Fields.Pickers&&(JIRA.Templates.Fields.Pickers={}),"undefined"==typeof JIRA.Templates.Fields.Pickers.User&&(JIRA.Templates.Fields.Pickers.User={}),JIRA.Templates.Fields.Pickers.User.single=function(e,s){for(var t='<select id="'+soy.$$escapeHtml(e.field.id)+'" name="'+soy.$$escapeHtml(e.field.name)+'" class="single-user-picker js-'+(e.type?soy.$$escapeHtml(e.type):"default-user-picker")+'"'+(e.inputText?' data-input-text="'+soy.$$escapeHtml(e.inputText)+'"':"")+(e.editValue?' data-edit-value="'+soy.$$escapeHtml(e.editValue)+'"':"")+(e.showDropdownButton?' data-show-dropdown-button="true"':"")+(e.userType?' data-user-type="'+soy.$$escapeHtml(e.userType)+'"':"")+(e.containerClass?' data-container-class="'+soy.$$escapeHtml(e.containerClass)+'"':"")+">",a=e.options,l=a.length,o=0;o<l;o++){var i=a[o];if(i.optionGroup){t+='<optgroup id="'+soy.$$escapeHtml(e.field.id)+"-group-"+soy.$$escapeHtml(i.id)+'" label="'+soy.$$escapeHtml(i.display)+'"'+(i.footer?' data-footer-text="'+soy.$$escapeHtml(i.footer)+'"':"")+(i.weight!=-1?' data-weight="'+soy.$$escapeHtml(i.weight)+'"':"")+">";for(var p=i.groupOptions,d=p.length,r=0;r<d;r++){var n=p[r];t+=JIRA.Templates.Fields.Pickers.User.option(n)}t+="</optgroup>"}else t+=JIRA.Templates.Fields.Pickers.User.option(i)}return t+="</select>"},JIRA.Templates.Fields.Pickers.User.option=function(e,s){return"<option "+(e.loggedInUser?'class="current-user" ':"")+(e.selected?'selected="selected" ':"")+'value="'+soy.$$escapeHtml(e.optionName)+'" data-field-text="'+soy.$$escapeHtml(e.displayName)+'" data-field-label="'+soy.$$escapeHtml(e.displayName)+(e.emailAddress?" - "+soy.$$escapeHtml(e.emailAddress):"")+(e.optionName&&"-1"!=e.optionName?" ("+soy.$$escapeHtml(e.optionName)+")":"")+'" data-icon="'+soy.$$escapeHtml(e.avatarURL)+'" >'+soy.$$escapeHtml(e.displayName)+"</option>"};;
;
/* module-key = 'jira.webresources:field-templates', location = 'includes/jira/field/templates/assigneeField.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),"undefined"==typeof JIRA.Templates.Fields.Pickers&&(JIRA.Templates.Fields.Pickers={}),"undefined"==typeof JIRA.Templates.Fields.Pickers.User&&(JIRA.Templates.Fields.Pickers.User={}),JIRA.Templates.Fields.Pickers.User.assignee=function(e,s){return""+JIRA.Templates.Fields.Pickers.User.single(soy.$$augmentMap(e,{options:e.assigneeOptions.options,showDropdownButton:!0,userType:"assignee",type:"assignee-picker",containerClass:"long-field"}))+(e.isLoggedInUserAssignable?'<a href="#'+soy.$$escapeHtml(e.field.id)+'" id="assign-to-me-trigger">'+soy.$$escapeHtml("Assign to me")+"</a>":"")+'<fieldset class="hidden parameters"><input type="hidden" title="projectKeys" value="'+soy.$$escapeHtml(e.projectKeys)+'"/>'+(e.issueKey?'<input type="hidden" title="assigneeEditIssueKey" value="'+soy.$$escapeHtml(e.issueKey)+'"/>':"")+(e.actionDescriptorId?'<input type="hidden" title="actionDescriptorId" value="'+soy.$$escapeHtml(e.actionDescriptorId)+'"/>':"")+"</fieldset>"};;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/user-picker-template-wrapper.js' */
define("jira/field/user-picker/templates",[],function(){"use strict";return window.JIRA.Templates.Fields.Pickers.User});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/lib/jquery.dotdotdot-1.5.7.js' */
!function(t){function e(t,e,n){var o=t.children(),i=!1;t.empty();for(var d=0,a=o.length;d<a;d++){var l=o.eq(d);if(t.append(l),n&&t.append(n),r(t,e)){l.remove(),i=!0;break}n&&n.remove()}return i}function n(e,i,d,a,l){var u=e.contents(),f=!1;e.empty();for(var c="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style",s=0,h=u.length;s<h&&!f;s++){var p=u[s],g=t(p);"undefined"!=typeof p&&(e.append(g),l&&e[e.is(c)?"after":"append"](l),3==p.nodeType?r(d,a)&&(f=o(g,i,d,a,l)):f=n(g,i,d,a,l),f||l&&l.remove())}return f}function o(t,e,n,d,u){var f=!1,c=t[0];if("undefined"==typeof c)return!1;for(var s="letter"==d.wrap?"":" ",h=l(c).split(s),p=-1,g=-1,v=0,w=h.length-1;v<=w;){var m=Math.floor((v+w)/2);if(m==g)break;g=m,a(c,h.slice(0,g+1).join(s)+d.ellipsis),r(n,d)?w=g:(p=g,v=g)}if(p==-1||1==h.length&&0==h[0].length){var y=t.parent();t.remove();var b=u?u.length:0;if(y.contents().size()>b){var x=y.contents().eq(-1-b);f=o(x,e,n,d,u)}else{var c=y.prev().contents().eq(-1)[0];if("undefined"!=typeof c){var T=i(l(c),d);a(c,T),y.remove(),f=!0}}}else{var T=i(h.slice(0,p+1).join(s),d);f=!0,a(c,T)}return f}function r(t,e){return t.innerHeight()>e.maxHeight}function i(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function a(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function l(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function u(e,n){return"undefined"!=typeof e&&(!!e&&("string"==typeof e?(e=t(e,n),!!e.length&&e):"object"==typeof e&&("undefined"!=typeof e.jquery&&e)))}function f(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],o=0,r=n.length;o<r;o++){var i=parseInt(t.css(n[o]),10);isNaN(i)&&(i=0),e-=i}return e}function c(t,e){return!!t&&(e="string"==typeof e?"dotdotdot: "+e:["dotdotdot:",e],"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log&&window.console.log(e),!1)}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(o){if(0==this.length)return o&&o.debug===!1||c(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(o)});var i=this;i.data("dotdotdot")&&i.trigger("destroy.dot"),i.bind_events=function(){return i.bind("update.dot",function(o,d){o.preventDefault(),o.stopPropagation(),l.maxHeight="number"==typeof l.height?l.height:f(i),l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||d instanceof HTMLElement)&&(d=t("<div />").append(d).contents()),d instanceof t&&(a=d)),v=i.wrapInner('<div class="dotdotdot" />').children(),v.empty().append(a.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var u=!1,c=!1;return h.afterElement&&(u=h.afterElement.clone(!0),h.afterElement.remove()),r(v,l)&&(c="children"==l.wrap?e(v,l,u):n(v,i,v,l,u)),v.replaceWith(v.contents()),v=null,t.isFunction(l.callback)&&l.callback.call(i[0],c,a),h.isTruncated=c,c}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(i[0],h.isTruncated),h.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(i[0],a),a}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),i.unwatch().unbind_events().empty().append(a).data("dotdotdot",!1)}),i},i.unbind_events=function(){return i.unbind(".dot"),i},i.watch=function(){if(i.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),o=e.height();e.bind("resize.dot"+h.dotId,function(){n==e.width()&&o==e.height()&&l.windowResizeFix||(n=e.width(),o=e.height(),g&&clearInterval(g),g=setTimeout(function(){i.trigger("update.dot")},10))})}else p=d(i),g=setInterval(function(){var t=d(i);p.width==t.width&&p.height==t.height||(i.trigger("update.dot"),p=d(i))},100);return i},i.unwatch=function(){return t(window).unbind("resize.dot"+h.dotId),g&&clearInterval(g),i};var a=i.contents(),l=t.extend(!0,{},t.fn.dotdotdot.defaults,o),h={},p={},g=null,v=null;return h.afterElement=u(l.after,i),h.isTruncated=!1,h.dotId=s++,i.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&i.watch(),i},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1};var s=1,h=t.fn.html;t.fn.html=function(t){return"undefined"!=typeof t?this.data("dotdotdot")&&"function"!=typeof t?this.trigger("update",[t]):h.call(this,t):h.call(this)};var p=t.fn.text;t.fn.text=function(e){if("undefined"!=typeof e){if(this.data("dotdotdot")){var n=t("<div />");return n.text(e),e=n.html(),n.remove(),this.trigger("update",[e])}return p.call(this,e)}return p.call(this)}}}(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/ProjectTemplatesList.soy' */
// This file was automatically generated from ProjectTemplatesList.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.renderProjectTemplates = function(opt_data, opt_ignored) {
  return '' + ((soy.$$getMapKeys(opt_data.projectTemplates).length == 0) ? JIRA.Templates.errorMsg({closeable: false, msg: 'No project templates could be found.'}) : JIRA.Templates.ProjectTemplates.renderTemplates(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplates';
}


JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.projectTemplatesByType.length == 0) {
    output += JIRA.Templates.errorMsg({closeable: false, msg: 'No project templates could be found.'});
  } else {
    var projectTypeTemplatesGroupList18 = opt_data.projectTemplatesByType;
    var projectTypeTemplatesGroupListLen18 = projectTypeTemplatesGroupList18.length;
    for (var projectTypeTemplatesGroupIndex18 = 0; projectTypeTemplatesGroupIndex18 < projectTypeTemplatesGroupListLen18; projectTypeTemplatesGroupIndex18++) {
      var projectTypeTemplatesGroupData18 = projectTypeTemplatesGroupList18[projectTypeTemplatesGroupIndex18];
      output += '<div class="template-group" id="project-template-group-' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeKey) + '"><div class="template-group-header"><h6><img class="project-type-icon" src="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.icon) + ' "/><span>' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeDisplayKey) + '</span></h6></div>' + JIRA.Templates.ProjectTemplates.renderTemplates({projectTemplates: projectTypeTemplatesGroupData18.projectTemplates, projectTypeKey: projectTypeTemplatesGroupData18.projectTypeBean.projectTypeKey}) + '</div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType';
}


JIRA.Templates.ProjectTemplates.renderTemplates = function(opt_data, opt_ignored) {
  return '<div class="pt-templates-list">' + JIRA.Templates.ProjectTemplates.renderItems(opt_data) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderTemplates';
}


JIRA.Templates.ProjectTemplates.renderItems = function(opt_data, opt_ignored) {
  var output = '<ol class="templates" tabindex="100">';
  var maxItemsWithoutViewMoreLink__soy39 = 4;
  if (opt_data.projectTemplates.length > maxItemsWithoutViewMoreLink__soy39 && opt_data.projectTypeKey == 'business') {
    output += JIRA.Templates.ProjectTemplates.renderBusinessTemplatesWithViewMoreTemplate({templates: opt_data.projectTemplates, maxItemsWithoutViewMoreLink: maxItemsWithoutViewMoreLink__soy39});
  } else {
    var templateList46 = opt_data.projectTemplates;
    var templateListLen46 = templateList46.length;
    for (var templateIndex46 = 0; templateIndex46 < templateListLen46; templateIndex46++) {
      var templateData46 = templateList46[templateIndex46];
      output += JIRA.Templates.ProjectTemplates.renderItem({templateItem: templateData46});
    }
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderItems.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderItems';
}


JIRA.Templates.ProjectTemplates.renderItem = function(opt_data, opt_ignored) {
  return '<li class="template ' + ((opt_data.additionalClasses) ? soy.$$escapeHtml(opt_data.additionalClasses) : '') + '"' + ((opt_data.templateItem.itemModuleCompleteKey) ? 'data-item-module-complete-key="' + soy.$$escapeHtml(opt_data.templateItem.itemModuleCompleteKey) + '"' : '') + ((opt_data.templateItem.projectTemplateModuleCompleteKey) ? 'data-project-template-module-complete-key="' + soy.$$escapeHtml(opt_data.templateItem.projectTemplateModuleCompleteKey) + '"' : '') + ((opt_data.templateItem.createProject) ? 'data-create-project="' + soy.$$escapeHtml(opt_data.templateItem.createProject) + '"' : '') + ((opt_data.templateItem.demoProject) ? 'data-demo-project="' + soy.$$escapeHtml(opt_data.templateItem.demoProject) + '"' : '') + ((opt_data.templateItem.backgroundIconUrl) ? 'data-background-icon-url="' + soy.$$escapeHtml(opt_data.templateItem.backgroundIconUrl) + '"' : '') + ((opt_data.templateItem.name) ? 'data-name="' + soy.$$escapeHtml(opt_data.templateItem.name) + '"' : '') + ((opt_data.templateItem.description) ? 'data-description="' + soy.$$escapeHtml(opt_data.templateItem.description) + '"' : '') + ((opt_data.templateItem.longDescriptionContent) ? 'data-long-description-content="' + soy.$$escapeHtml(opt_data.templateItem.longDescriptionContent) + '"' : '') + ((opt_data.templateItem.infoSoyPath) ? 'data-info-soy-path="' + soy.$$escapeHtml(opt_data.templateItem.infoSoyPath) + '"' : '') + ((opt_data.templateItem.projectTypeKey) ? 'data-project-type="' + soy.$$escapeHtml(opt_data.templateItem.projectTypeKey) + '"' : '') + '><img class="template-preview" src="' + soy.$$escapeHtml(opt_data.templateItem.iconUrl) + '" /><div class="template-meta"><div class="template-name">' + soy.$$escapeHtml(opt_data.templateItem.name) + '</div><div class="template-description">' + soy.$$escapeHtml(opt_data.templateItem.description) + '</div></div></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderItem.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderItem';
}


JIRA.Templates.ProjectTemplates.renderBusinessTemplatesWithViewMoreTemplate = function(opt_data, opt_ignored) {
  var output = '';
  var iLimit115 = opt_data.templates.length;
  for (var i115 = 0; i115 < iLimit115; i115++) {
    var firstIndexToHide__soy116 = opt_data.maxItemsWithoutViewMoreLink - 1;
    output += JIRA.Templates.ProjectTemplates.renderItem({templateItem: opt_data.templates[i115], additionalClasses: '' + ((i115 >= firstIndexToHide__soy116) ? 'more-business-templates' : '')});
  }
  output += JIRA.Templates.ProjectTemplates.renderViewMoreBusinessTemplatesItem(null);
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderBusinessTemplatesWithViewMoreTemplate.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderBusinessTemplatesWithViewMoreTemplate';
}


JIRA.Templates.ProjectTemplates.renderViewMoreBusinessTemplatesItem = function(opt_data, opt_ignored) {
  var output = '';
  var name__soy125 = 'More project templates';
  var description__soy126 = 'Choose from other project types, such as content management or recruitment.';
  output += '<li id="view-more-business-templates" class="template"><div class="template-preview" /><div class="template-meta"><div class="template-name">' + soy.$$escapeHtml(name__soy125) + '</div><div class="template-description">' + soy.$$escapeHtml(description__soy126) + '</div></div></li>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderViewMoreBusinessTemplatesItem.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderViewMoreBusinessTemplatesItem';
}


JIRA.Templates.ProjectTemplates.loadingTemplatesList = function(opt_data, opt_ignored) {
  return '<div class="wait-container"><img class="wait-icon" src="' + soy.$$escapeHtml("") + '/images/icons/wait.gif"><span class="wait-text">' + soy.$$escapeHtml('Loading project templates') + '&hellip;</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loadingTemplatesList.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loadingTemplatesList';
}


JIRA.Templates.ProjectTemplates.footerLinks = function(opt_data, opt_ignored) {
  return '<div class="footer-links">' + ((opt_data.projectImportAvailable) ? '<a class="import-project-trigger button-panel-link" href="' + soy.$$escapeHtml("") + '/secure/admin/views/ExternalImport1.jspa">' + soy.$$escapeHtml('Import a project') + '</a>|' : '') + '<a class="create-with-shared-config button-panel-link" href="#"><span class="aui-icon aui-icon-create-shared">' + soy.$$escapeHtml('Create with shared configuration') + '</span> ' + soy.$$escapeHtml('Create with shared configuration') + '</a>' + ((opt_data.showDemoLink && opt_data.projectImportAvailable) ? '| <a class="add-demo-project-trigger button-panel-link" href="#">' + soy.$$escapeHtml('Create sample data') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.footerLinks.soyTemplateName = 'JIRA.Templates.ProjectTemplates.footerLinks';
}


JIRA.Templates.ProjectTemplates.addWorkflowsLink = function(opt_data, opt_ignored) {
  return '<a class="add-workflow-link" href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/plugins/servlet/wfshare-import?src=projecttemplates" tabindex="-1">' + soy.$$escapeHtml('View Marketplace Workflows') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addWorkflowsLink.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addWorkflowsLink';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/AddProject.soy' */
// This file was automatically generated from AddProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.addProjectForm = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.warnUserUnableToAccessApplication) ? JIRA.Templates.ProjectTemplates.warnApplicationAccess(opt_data) : '');
  if (opt_data.errors.errorMessages) {
    var errorList9 = opt_data.errors.errorMessages;
    var errorListLen9 = errorList9.length;
    for (var errorIndex9 = 0; errorIndex9 < errorListLen9; errorIndex9++) {
      var errorData9 = errorList9[errorIndex9];
      output += JIRA.Templates.errorMsg({closeable: false, msg: errorData9});
    }
  }
  output += '<div class="add-project-wrapper"><div class="add-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({legendContent: '', content: '' + JIRA.Templates.ProjectTemplates.longTextField({id: 'name', name: 'name', isRequired: false, maxLength: opt_data.maxNameLength, labelContent: 'Name', descriptionText: AJS.format('Max. {0} characters.',opt_data.maxNameLength), value: opt_data.currentName ? opt_data.currentName : '', errorTexts: opt_data.errors.errors.projectName ? [opt_data.errors.errors.projectName] : []}) + JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon({id: 'key', name: 'key', isRequired: false, maxLength: opt_data.maxKeyLength, labelContent: 'Key', descriptionText: AJS.format('Max. {0} characters.',opt_data.maxKeyLength), helpTitle: 'What\x27s a project key?', value: opt_data.currentKey ? opt_data.currentKey : '', errorTexts: opt_data.errors.errors.projectKey ? [opt_data.errors.errors.projectKey] : []}) + ((opt_data.shouldShowLead) ? JIRA.Templates.ProjectTemplates.projectLeadField({field: opt_data.projectLeadPickerField, isRequired: false, errorTexts: opt_data.errors.errors.projectLead ? [opt_data.errors.errors.projectLead] : [], options: opt_data.leadOptions}) : '') + '<input type="hidden" name="keyEdited" id="keyEdited" value="false"><input type="hidden" name="projectTemplateWebItemKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateWebItemKey) + '"><input type="hidden" name="projectTemplateModuleKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateModuleKey) + '"><input type="submit" class="pt-hidden-submit offscreen-left">'}), id: 'add-project-form'}) + '</div>' + ((opt_data.projectTemplateDescriptionContent) ? '<div class="add-project-description-wrapper"><div class="project-template-title"><h3>' + soy.$$escapeHtml(opt_data.projectTemplateTitle) + '</h3></div><div class="project-template-description">' + soy.$$filterNoAutoescape(opt_data.projectTemplateDescriptionContent) + '</div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addProjectForm';
}


JIRA.Templates.ProjectTemplates.keyHelp = function(opt_data, opt_ignored) {
  return '<div class="project-key-help"><h6>' + soy.$$escapeHtml('PROJECT KEY') + '</h6><p>' + soy.$$filterNoAutoescape('The project key is a unique code that distinguishes a project from another.\x3cbr/\x3eIt also prefixes all issues in the project.') + '</p></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.keyHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.keyHelp';
}


JIRA.Templates.ProjectTemplates.projectLeadField = function(opt_data, opt_ignored) {
  var param70 = '' + aui.form.label({forField: opt_data.field.name + '-field', isRequired: opt_data.isRequired, content: 'Project lead'}) + JIRA.Templates.Fields.Pickers.User.single({field: opt_data.field, options: opt_data.options, editValue: opt_data.value}) + aui.form.fieldDescription({message: 'Enter the username of the project lead.'});
  if (opt_data.errorTexts) {
    var errorList83 = opt_data.errorTexts;
    var errorListLen83 = errorList83.length;
    for (var errorIndex83 = 0; errorIndex83 < errorListLen83; errorIndex83++) {
      var errorData83 = errorList83[errorIndex83];
      param70 += aui.form.fieldError({message: errorData83});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param70});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.projectLeadField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.projectLeadField';
}


JIRA.Templates.ProjectTemplates.warnApplicationAccess = function(opt_data, opt_ignored) {
  var output = '';
  var helpLinkTag__soy89 = '' + JIRA.Templates.Links.basicHelpLink({url: '/admin/apps', desc: 'Update your access', title: 'Update your access', isLocal: false});
  var message__soy95 = '' + ((opt_data.applicationName != null && opt_data.applicationName.length > 2) ? soy.$$filterNoAutoescape(AJS.format('Uh-oh. You can create this project, but it won\x27\x27t be fully functional until you have the right access for {0}. {1} now or contact your site administrator.',opt_data.applicationName,helpLinkTag__soy89)) : soy.$$filterNoAutoescape(AJS.format('Uh-oh. You can create this project, but it won\x27\x27t be fully functional until you have the right access for this application. {0} now or contact your site administrator.',helpLinkTag__soy89)));
  output += aui.message.hint({id: 'project-create-admin-access-error', content: '' + soy.$$filterNoAutoescape(message__soy95)});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.warnApplicationAccess.soyTemplateName = 'JIRA.Templates.ProjectTemplates.warnApplicationAccess';
}


JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon = function(opt_data, opt_ignored) {
  var param109 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value}) + '<a class="help-lnk" title="' + soy.$$escapeHtml(opt_data.helpTitle) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml(opt_data.helpTitle) + '</span></a>' + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList133 = opt_data.errorTexts;
    var errorListLen133 = errorList133.length;
    for (var errorIndex133 = 0; errorIndex133 < errorListLen133; errorIndex133++) {
      var errorData133 = errorList133[errorIndex133];
      param109 += aui.form.fieldError({message: errorData133});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param109});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon.soyTemplateName = 'JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon';
}


JIRA.Templates.ProjectTemplates.longTextField = function(opt_data, opt_ignored) {
  var param139 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value, extraClasses: 'long-field'}) + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList157 = opt_data.errorTexts;
    var errorListLen157 = errorList157.length;
    for (var errorIndex157 = 0; errorIndex157 < errorListLen157; errorIndex157++) {
      var errorData157 = errorList157[errorIndex157];
      param139 += aui.form.fieldError({message: errorData157});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param139});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.longTextField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.longTextField';
}


JIRA.Templates.ProjectTemplates.spinner = function(opt_data, opt_ignored) {
  return '<span id=\'' + soy.$$escapeHtml(opt_data.id) + '\' class=\'icon throbber loading\'/>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.spinner.soyTemplateName = 'JIRA.Templates.ProjectTemplates.spinner';
}


JIRA.Templates.ProjectTemplates.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.formatAnchor.soyTemplateName = 'JIRA.Templates.ProjectTemplates.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/CreateSharedProject.soy' */
// This file was automatically generated from CreateSharedProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.createSharedProjectForm = function(opt_data, opt_ignored) {
  return '<div class="create-shared-project-wrapper"><div class="create-shared-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({content: '<p>' + soy.$$escapeHtml('Select the existing project that you\x27d like to share configurations with.') + '<a class="help-lnk" title="' + soy.$$escapeHtml('What will be shared?') + '" id="shared-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml('What will be shared?') + '</span></a></p>' + aui.form.fieldGroup({extraClasses: 'project-picker-group', content: '' + aui.form.label({forField: 'project-picker', isRequired: false, content: 'Choose a project'}) + aui.form.input({id: 'project-picker', name: 'project', type: 'text'}) + '<div id="project-picker-options" data-suggestions="' + soy.$$escapeHtml(opt_data.projectSuggestions) + '"></div>'}) + '<p class="create-shared-info">' + soy.$$escapeHtml('When a configuration is shared with several projects, it means that any changes made to the configuration will affect all the projects.') + '</p>'}), id: 'create-shared-project-form'}) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.createSharedProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.createSharedProjectForm';
}


JIRA.Templates.ProjectTemplates.loading = function(opt_data, opt_ignored) {
  return '<div><div class="dialog-spinner"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loading.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loading';
}


JIRA.Templates.ProjectTemplates.noProjects = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Looks like no other projects exist yet. Please create a brand new project first before trying to share an existing project\x27s configuration.') + '</p>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.noProjects.soyTemplateName = 'JIRA.Templates.ProjectTemplates.noProjects';
}


JIRA.Templates.ProjectTemplates.sharedHelp = function(opt_data, opt_ignored) {
  return '<div class="shared-help"><p><strong>' + soy.$$escapeHtml('What will be shared?') + '</strong></p><p>' + soy.$$escapeHtml('Configuration refers to the set of schemes used by a project') + '</p><ul><li>' + soy.$$escapeHtml('Permission Scheme') + '</li><li>' + soy.$$escapeHtml('Notification Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Security Scheme') + '</li><li>' + soy.$$escapeHtml('Workflow Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Type Scheme') + '</li><li>' + soy.$$escapeHtml('Issue Type Screen Scheme') + '</li><li>' + soy.$$escapeHtml('Field Configuration Scheme') + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.sharedHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.sharedHelp';
}
;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/config.js' */
define("jira/project-templates/config",{model:{}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/project-key-generator.js' */
define("jira/project-templates/project-key-generator",["jquery","underscore"],function(A,e){var R={};return R.IGNORED_WORDS=["THE","A","AN","AS","AND","OF","OR"],R.CHARACTER_MAP={},R.CHARACTER_MAP[199]="C",R.CHARACTER_MAP[231]="c",R.CHARACTER_MAP[252]="u",R.CHARACTER_MAP[251]="u",R.CHARACTER_MAP[250]="u",R.CHARACTER_MAP[249]="u",R.CHARACTER_MAP[233]="e",R.CHARACTER_MAP[234]="e",R.CHARACTER_MAP[235]="e",R.CHARACTER_MAP[232]="e",R.CHARACTER_MAP[226]="a",R.CHARACTER_MAP[228]="a",R.CHARACTER_MAP[224]="a",R.CHARACTER_MAP[229]="a",R.CHARACTER_MAP[225]="a",R.CHARACTER_MAP[239]="i",R.CHARACTER_MAP[238]="i",R.CHARACTER_MAP[236]="i",R.CHARACTER_MAP[237]="i",R.CHARACTER_MAP[196]="A",R.CHARACTER_MAP[197]="A",R.CHARACTER_MAP[201]="E",R.CHARACTER_MAP[230]="ae",R.CHARACTER_MAP[198]="Ae",R.CHARACTER_MAP[244]="o",R.CHARACTER_MAP[246]="o",R.CHARACTER_MAP[242]="o",R.CHARACTER_MAP[243]="o",R.CHARACTER_MAP[220]="U",R.CHARACTER_MAP[255]="Y",R.CHARACTER_MAP[214]="O",R.CHARACTER_MAP[241]="n",R.CHARACTER_MAP[209]="N",R.desiredKeyLength=4,R.maxKeyLength=10,R.getTotalLength=function(A){return A.join("").length},R.removeIgnoredWords=function(C){return e.reject(C,function(e){return A.inArray(e,R.IGNORED_WORDS)!==-1})},R.createAcronym=function(e){var R="";return A.each(e,function(A,e){R+=e.charAt(0)}),R},R.getFirstSyllable=function(A){var e,C=!1;for(e=0;e<A.length;e++)if(R.isVowelOrY(A[e]))C=!0;else if(C)return A.substring(0,e+1);return A},R.isVowelOrY=function(A){return A&&1===A.length&&A.search("[AEIOUY]")!==-1},R.init=function(A,e){R.desiredKeyLength=A,R.maxKeyLength=e},R.generate=function(e){if(e=A.trim(e),!e)return"";for(var C=[],r=0,n=e.length;r<n;r++){var t=R.CHARACTER_MAP[e.charCodeAt(r)];C.push(t?t:e[r])}e=C.join("");var i=[];A.each(e.split(/\s+/),function(A,e){e&&(e=e.replace(/[^a-zA-Z]/g,""),e=e.toUpperCase(),e.length&&i.push(e))}),R.desiredKeyLength&&R.getTotalLength(i)>R.desiredKeyLength&&(i=R.removeIgnoredWords(i));var E;if(0==i.length)E="";else if(1==i.length){var a=i[0];E=R.desiredKeyLength&&a.length>R.desiredKeyLength?R.getFirstSyllable(a):a}else E=R.createAcronym(i);return R.maxKeyLength&&E.length>R.maxKeyLength&&(E=E.substr(0,R.maxKeyLength)),E},R});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/dialog-view.js' */
define("jira/project-templates/dialog-view",["jira/project-templates/dialog-view-impl","jquery"],function(e,i){return new e({el:i(document)})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/dialog-view-impl.js' */
define("jira/project-templates/dialog-view-impl",["require","backbone","underscore","jira/featureflags/simplified-ux-feature-manager","jira/featureflags/feature-manager"],function(e,t,o,i,r){var a=AJS.Dialog,l=AJS.trigger;return t.View.extend({events:{"click   .add-project-trigger":"_onClickAddProject","click   .add-demo-project-trigger":"_onClickAddDemoProject","click   .add-workflow-link":"_onClickViewMarketplaceWorkflows","click   #add-project-dialog .add-demo-project-trigger":"_onCreateProjectAddDemoProjectClick","click   #add-project-dialog .import-project-trigger":"_onClickImportProject","click   #add-project-dialog .create-with-shared-config":"_onClickCreateShared","keydown #add-project-dialog .pt-templates-list":"_onKeydownInTemplatesList"},initialize:function(){i.isGlobalSidebarEnabled()&&JIRA.API.getSidebar().then(function(e){e.on(e.events.JIRA_SUMMON_CREATE_PROJECT_DIALOG,function(){this.getDialogController().handleProjectTemplateTriggered()}.bind(this))}.bind(this))},draw:function(){var e=new a({width:840,height:400,id:"add-project-dialog",closeOnOutsideClick:!1,keypressListener:o.bind(this._onKeyPressed,this)}),t=e.popup.element;return e.addPage("project-templates-page"),e.addHeader("Create project","add-project-dialog-header"),e.addPanel("ProjectTemplatesListPanel",JIRA.Templates.ProjectTemplates.loadingTemplatesList(),"pt-content"),this._dialog=e,this._$dialogElement=t,e.show(),e},remove:function(){this._dialog&&this._dialog.remove()},showErrorMessage:function(e){this._dialog.getPanel(1,0).html(JIRA.Templates.errorMsg({closable:!1,msg:e}))},get$PTContent:function(){return this.getDialogController().$dialogElement.find(".pt-content")},_onKeyPressed:function(e){var t=27;return!this._dialog||e.keyCode!==t||(this.getDialogController().hideDialogFromNewUser("dismissed"),this._dialog.remove(),!1)},_onKeydownInTemplatesList:function(e){var t=13;return!this._dialog||e.keyCode!==t||(this._$dialogElement.find(".pt-submit-button:visible").click(),!1)},_onClickAddProject:function(e){e.preventDefault(),this.getDialogController().handleProjectTemplateTriggered()},_onCreateProjectAddDemoProjectClick:function(){l("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.create.project.clicked"})},_onClickViewMarketplaceWorkflows:function(){l("analyticsEvent",{name:"jira.project.templates.dialog.create.viewmarketplaceworkflows.clicked"})},_onClickAddDemoProject:function(e){e.preventDefault();var t=this.getDialogController().dialog;t&&t.popup&&t.popup.element&&t.remove(),this.getDialogController().handleDemoProjectTemplateTriggered()},_onClickImportProject:function(e){this.getDialogController().hideDialogFromNewUser("importproject")},_onClickCreateShared:function(e){this.getDialogController().handleCreateShared()},getDialogController:function(){return e("jira/project-templates/dialog-controller")}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/dialog-controller.js' */
define("jira/project-templates/dialog-controller",["jira/project-templates/dialog-view","jira/project-templates/config","jira/ajs/ajax/smart-ajax","jira/util/data/meta","jira/lib/class","jquery","underscore","wrm/data"],function(e,t,a,i,o,r,n,l){function d(e,t){AJS.trigger("analyticsEvent",{name:e,data:t})}var s,c=AJS.contextPath(),m=AJS.isDevMode,p=AJS.log,u=function(){return s||(s=l.claim("com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData")||{}),s},h=o.extend({WELCOME_REST_URL:c+"/rest/welcome/1.0/show/welcome",onboarding:{isOptimusPrimeOnboarding:!1},initialize:function(){n.bindAll(this,"handleProjectTemplateTriggered","hideDialogFromNewUser"),i.getBoolean("show-welcome-screen")&&this.handleProjectTemplateTriggered()},handleProjectTemplateTriggered:function(e){e&&e.onboarding&&(this.onboarding=e.onboarding),this.demoProject=!1,d("jira.project.templates.dialog.create.show"),this.openWithFirstProjectTemplateOfTypePreSelected()},handleDemoProjectTemplateTriggered:function(e){e&&e.onboarding&&(this.onboarding=e.onboarding),this.demoProject=!0;var t=this.getTemplateController().loadDemoProjectTemplatesData();this.openWithFirstProjectTemplateOfTypePreSelected(null,t),this._addAnalyticsToCreateDemoShow(t)},_addAnalyticsToCreateDemoShow:function(e){e.done(function(e){var t={},a=function(e){return e.projectTemplatesGroupedByType.map(function(e){return e.projectTemplates.map(function(e){return e.itemModuleCompleteKey}).join()}).join()};t.demoSets=a(e),t.instanceCreatedDate=u().instanceCreatedDate,d("jira.project.templates.dialog.create.demo.show",t)}.bind(this))},openWithFirstProjectTemplateOfTypePreSelected:function(a,i){var o=this.onboarding;i=i||this.getTemplateController().loadProjectTemplatesData(),this.dialog=e.draw(),i.fail(n.bind(function(e){this._handleUnknownErrorOfPTRetrieval()},this)),i.done(function(e){this.$dialogElement=this.dialog.popup.element;var i;n.isUndefined(t.model.selectedTemplate)||(i=t.model.selectedTemplate),t.model=e,t.model.selectedTemplate=i,this.getTemplateController().init(e,a,o)}.bind(this))},handleCreateShared:function(){d("jira.project.templates.dialog.create.shared.clicked"),this.demoProject=!1,this.openWithCreateShared()},openWithCreateShared:function(){var e=require("jira/project-templates/create-shared-controller");e.initCreateShared()},callbackWithResize:function(e){return n.bind(n.wrap(e,function(e){e.call(this),this.dialog.updateHeight()}),this)},addPage:function(e){var t=this.dialog.addPage(e.name).page[this.dialog.curpage];this.dialog.addHeader(e.title,"add-project-dialog-header"),this.dialog.addPanel(e.panelName,"","pt-content"),e.backButton&&this._addBackButton(t,{panelName:e.panelName}),this.dialog.addButton(e.submitButtonText,this.callbackWithResize(e.submitButtonCallback),e.submitButtonClass+" pt-submit-button");var a=this.$dialogElement.find("."+e.submitButtonClass);return a.removeClass("button-panel-button").addClass("aui-button aui-button-primary"),a.focus(),this.onboarding.isOptimusPrimeOnboarding||this.dialog.addCancel("Cancel",n.bind(function(e){this.hideDialogFromNewUser("dismissed"),this.dialog.remove()},this)),t},_backButtonOnClickCallback:function(t,a){if(this.onboarding.isOptimusPrimeOnboarding&&"ProjectTemplatesListPanel"===a.panelName){var i=function(){this.dialog.remove()}.bind(this);return i}return n.bind(function(){d(this.demoProject?"jira.project.templates.dialog.demo.back":"jira.project.templates.dialog.create.back");var a=e.get$PTContent();a.css("background-image","none"),this.dialog.prevPage(),t.remove(),this.dialog.page.pop()},this)},_addBackButton:function(e,t){this.dialog.addButton("Back",this.callbackWithResize(this._backButtonOnClickCallback(e,t)),"add-project-back-button");var a=this.$dialogElement.find(".add-project-back-button");a.removeClass("button-panel-button").addClass("aui-button")},_handleUnknownErrorOfPTRetrieval:function(){e.showErrorMessage("An error occurred while trying to contact Jira")},hideDialogFromNewUser:function(e){"dismissed"===e?d(this.demoProject?"jira.project.templates.dialog.demo.dismissed":"jira.project.templates.dialog.create.dismissed"):"importproject"===e?d("jira.project.templates.dialog.import.clicked"):"templateselected"===e&&d(this.demoProject?"jira.project.templates.dialog.demo.templateselected":"jira.project.templates.dialog.create.templateselected"),i.getBoolean("show-welcome-screen")&&r.ajax({url:this.WELCOME_REST_URL+"/"+e,type:"DELETE",success:function(){m&&m()&&p("don't show project template dialog anymore")}})},getTemplateController:function(){return require("jira/project-templates/select-project-template-controller")}});return new h});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/add-project-view.js' */
define("jira/project-templates/add-project-view",["jira/project-templates/add-project-view-impl","jira/project-templates/dialog-view","jquery"],function(e,t,i){return new e({el:i(document),dialogView:t})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/add-project-view-impl.js' */
define("jira/project-templates/add-project-view-impl",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/util/events","jira/util/events/types","require","backbone","jquery","underscore"],function(e,t,n,i,a,r,o,l){var d=AJS.InlineDialog;return r.View.extend({TIMEOUT_MS:100,postDrawCallbacks:[],events:{"submit #add-project-form":"onSubmitForm"},page:void 0,isSubmitting:!1,initialize:function(e){l.bindAll(this,"bindHook")},addPostDrawCallback:function(e){this.postDrawCallbacks.push(e)},prepareDialog:function(t){this.page=e.addPage({name:"add-project",title:t,panelName:"add-project",backButton:!0,submitButtonText:"Submit",submitButtonCallback:this.onSubmitForm.bind(this),submitButtonClass:"add-project-dialog-create-button"})},draw:function(r){function s(e){return e.errors||(e.errors={}),e}this.isSubmitting=!1,e.dialog.gotoPage(this.page.id);var m=r.webItemData.projectTemplateModuleCompleteKey||r.webItemData.itemModuleCompleteKey,c=l.find(t.model.projectTemplatesGroupedByType,function(e){return l.any(e.projectTemplates,function(e){return e.itemModuleCompleteKey===m})}),u=c&&c.applicationInfo||{},p={maxNameLength:t.model.maxNameLength,maxKeyLength:t.model.maxKeyLength,shouldShowLead:t.model.shouldShowProjectLead,projectTemplateWebItemKey:t.model.selectedTemplate||r.webItemData.itemModuleCompleteKey,projectTemplateModuleKey:m,projectTemplateTitle:r.webItemData.name,projectTemplateDescriptionContent:r.webItemData.longDescriptionContent,currentKey:r.currentKey||"",currentName:r.currentName||"",errors:s(r.errors),projectLeadPickerField:{id:"lead",name:"lead"},leadOptions:[{selected:!0,displayName:r.currentUserDisplayName,optionName:r.currentUserName,avatarURL:r.currentUserAvatarUrl}],applicationName:u.applicationName||"",warnUserUnableToAccessApplication:!u.canUserUseApplication},h=JIRA.Templates.ProjectTemplates.addProjectForm(p);if(e.dialog.getPanel(this.page.id,0).html(h),r.webItemData&&r.webItemData.backgroundIconUrl){var f=e.$dialogElement.find(".pt-content");f.css("background-image",'url("'+r.webItemData.backgroundIconUrl+'")')}var g=o("#add-project-form");n.trigger(i.NEW_CONTENT_ADDED,[g]),this.nameElement=e.$dialogElement.find("#name"),this.keyElement=e.$dialogElement.find("#key"),this.keyEditedElement=e.$dialogElement.find("#keyEdited"),this.leadDisplayElement=e.$dialogElement.find("#lead-field"),this.leadValueElement=e.$dialogElement.find("#lead");var b=this.keyElement.parent().find(".aui-icon-help");b.length&&new d(b,"project-key-help-popup",function(e,t,n){e.html(JIRA.Templates.ProjectTemplates.keyHelp()),n()},{width:280,gravity:"w"}),this.keyElement.attr("style","text-transform: uppercase");var E=a("jira/project-templates/add-project-controller");this.nameElement.focus(l.bind(function(e){this.bindHook(e,E.nameTimeout)},this));var y=this;this.nameElement.change(function(e){E.validateName(),y.unbindHook(e)}),this.nameElement.focus(),this.keyElement.focus(l.bind(function(e){var t=o(e.target);t.data("lastValue",t.val()),this.bindHook(e,E.keyTimeout)},this)),this.keyElement.blur(l.bind(function(e){this.unbindHook(e)},this)),this.keyElement.change(function(){E.validateKey(),E.autofillKeyIfNeeded()}),l.isEmpty(this.postDrawCallbacks)||l.each(this.postDrawCallbacks,function(e){e({projectType:r&&r.webItemData&&(r.webItemData.projectTemplateModuleCompleteKey||r.webItemData.itemModuleCompleteKey)})}),e.dialog.updateHeight()},onSubmitForm:function(e){var t=a("jira/project-templates/add-project-controller");return t.submit(),!1},get$SubmitButton:function(){return e.$dialogElement.find(".add-project-dialog-create-button")},get$BackButton:function(){return e.$dialogElement.find(".add-project-back-button")},bindHook:function(e,t){var n=o(e.target),i=l.bind(function(){this.unbindHook(e),t.apply(),n.is(":visible")&&n.data("checkHook",setTimeout(i,this.TIMEOUT_MS))},this);n.data("checkHook")||n.data("checkHook",setTimeout(i,0))},unbindHook:function(e){var t=o(e.target);clearTimeout(t.data("checkHook")),t.removeData("checkHook")},showInlineError:function(e,t){if(!this.isSubmitting){var n=e.parent().find(".error");n.length||(n=o("<div class='error'></div>"),e.parent().append(n)),n.text(t),n.show()}},showInlineErrorForName:function(e){this.showInlineError(this.nameElement,e)},showInlineErrorForKey:function(e){this.showInlineError(this.keyElement,e)},hideInlineError:function(e){e.parent().find(".error").hide()},hideInlineErrorForName:function(){this.hideInlineError(this.nameElement)},hideInlineErrorForKey:function(){this.hideInlineError(this.keyElement)},setName:function(e){this.nameElement.val(e)},getName:function(){return this.nameElement.val()},setKey:function(e){this.keyElement.val(e)},getKey:function(){return this.keyElement.val().toUpperCase()},getLeadDisplayName:function(){return this.leadDisplayElement.val()},getLeadUserName:function(){return this.leadValueElement.val()},getAvatarUrlOfSelectedLead:function(){var t=e.$dialogElement.find("#lead-single-select .aui-ss-entity-icon").css("background-image");if(l.isUndefined(t))return"";var n=t.match(/^url\((.+)\)$/);return n&&n[1]?n[1]:""},setKeyEdited:function(e){this.keyEditedElement.val(e)},getKeyEdited:function(){return this.keyEditedElement.val()},setKeyEdited:function(){var e=this.getKey();this.keyElement.data("lastValue")!==e&&this.keyEditedElement.val(e?"true":"false"),this.keyElement.data("lastValue",e)},hasNameErrors:function(){return this.nameElement.parent().find(".error").size()>0},getAddProjectForm:function(){return o("#add-project-form")},get$FormFields:function(){return e.$dialogElement.find(":input")},enterLoadingState:function(){var e=this.get$SubmitButton();if(e.attr("disabled"))return!1;var t=this.get$BackButton();return e.attr("disabled","disabled"),t.attr("disabled","disabled"),t.before(JIRA.Templates.ProjectTemplates.spinner({id:"addproject-loading"})),this.get$FormFields().attr("disabled","disabled"),this.isSubmitting=!0,!0},hideLoadingState:function(){e.$dialogElement.find("#addproject-loading").remove(),this.get$SubmitButton().removeAttr("disabled"),this.get$BackButton().removeAttr("disabled"),this.get$FormFields().removeAttr("disabled")},avoidDirtyFormWarning:function(){o.fn.removeDirtyWarning&&this.getAddProjectForm().removeDirtyWarning()},hasInlineErrors:function(){return 0!==e.$dialogElement.find(".field-group .error:visible").length}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/add-project-controller.js' */
define("jira/project-templates/add-project-controller",["jira/project-templates/add-project-controller-impl","jquery"],function(e,r){return new e({el:r(document)})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/add-project-controller-impl.js' */
define("jira/project-templates/add-project-controller-impl",["jira/project-templates/add-project-view","jira/project-templates/project-key-generator","jira/project-templates/dialog-controller","jira/project-templates/config","jira/lib/class","jira/analytics/web-client","jira/featureflags/feature-manager","jquery","underscore"],function(e,t,r,a,i,o,s,n,c){var d=AJS.contextPath(),l=AJS.trigger;return i.extend({postProjectCreationCallbacks:[],projectKeyValidationCallbacks:[],projectNamesUpperCased:[],init:function(e){this._window=e.window||window,c.bindAll(this,"projectCreatedHandler","projectValidationFailedHandler","nameTimeout","keyTimeout","submit")},initCreateShared:function(e){this.existingProjectData=e,this._initAddProject("Create with shared configuration")},initProjectTemplate:function(e){this.existingProjectData=void 0,this.webItemData=e,this._initAddProject(e.name)},_initAddProject:function(r){this.desiredKeyLength=4,this.lastKeyValidated="",this._getExistingProjects(),t.init(this.desiredKeyLength,a.model.maxKeyLength),e.prepareDialog(r),e.draw({webItemData:this.webItemData||{},maxKeyLength:a.model.maxKeyLength,maxNameLength:a.model.maxNameLength,currentUserName:a.model.currentUserName,currentUserDisplayName:a.model.currentUserDisplayName,currentUserAvatarUrl:a.model.currentUserAvatarUrl,errors:{}})},_resetProjectLeadValues:function(){a.model.currentUserDisplayName="",a.model.currentUserName="",a.model.currentUserAvatarUrl=""},_hasFullyConfiguredProjectLead:function(){return e.getLeadDisplayName()&&""!=e.getAvatarUrlOfSelectedLead()},submit:function(t){var r;r=this.existingProjectData?{key:e.getKey(),name:e.getName(),lead:e.getLeadUserName()&&e.getLeadUserName()[0]}:jQuery.param(e.getAddProjectForm().serializeArray().map(function(e){return"key"===e.name&&(e.value=e.value.toUpperCase()),e})),e.hasInlineErrors()||e.enterLoadingState()&&(this._hasFullyConfiguredProjectLead()?(a.model.currentUserDisplayName=e.getLeadDisplayName(),a.model.currentUserName=a.model.currentUserDisplayName?e.getLeadUserName():"",a.model.currentUserAvatarUrl=e.getAvatarUrlOfSelectedLead()):this._resetProjectLeadValues(),this.existingProjectData?n.ajax({url:d+"/rest/project-templates/1.0/createshared/"+this.existingProjectData.existingProjectId,type:"POST",contentType:"application/json",data:JSON.stringify(r)}).then(this.projectCreatedHandler,this.projectValidationFailedHandler):n.ajax({url:d+(this.webItemData.demoProject?"/rest/jira-importers-plugin/1.0/demo/create":"/rest/project-templates/1.0/templates"),type:"POST",data:r,headers:{"X-Atlassian-Token":"no-check"}}).then(this.projectCreatedHandler,this.projectValidationFailedHandler))},registerPostProjectCreationCallback:function(e){this.postProjectCreationCallbacks.push(e)},registerProjectKeyValidationCallback:function(e){this.projectKeyValidationCallbacks.push(e)},localStoragePrefix:"jira.projecttemplates.",isSimplified:function(){return"com.pyxis.greenhopper.jira:simplified-project-template"===this.webItemData.projectTemplateModuleCompleteKey},projectCreatedHandler:function(t){this.existingProjectData?l("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.success"}):this.webItemData.demoProject?l("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.success"}):l("analyticsEvent",{name:"jira.project.templates.dialog.create.project.success"});const a={action:"created",source:"createProjectModal",actionSubject:"project",containerType:"project",containerId:String(t.projectId),attributes:{}};this.existingProjectData?(a.attributes.sharedConfigurationProjectId=this.existingProjectData.existingProjectId,a.attributes.createdUsing="sharedConfiguration"):this.webItemData.demoProject?a.attributes.createdUsing="sample":(a.attributes.projectTemplateKey=this.webItemData.projectTemplateModuleCompleteKey,a.attributes.createdUsing="template",a.attributes.projectType=this.webItemData.projectType,a.attributes.simplified=this.isSimplified(),a.attributes.projectAccessLevel=this.isSimplified()?"open":""),o.sendTrackEvent(a),e.avoidDirtyFormWarning();var i=this.localStoragePrefix,s=["confluenceProject","fisheyeProject","crucibleProject","bambooProject"];c.map(s,function(e){t.remoteProjectLinks&&t.remoteProjectLinks[e]&&localStorage.setItem(i+e,t.remoteProjectLinks[e])}),c.isEmpty(this.postProjectCreationCallbacks)?this._window.location=d+t.returnUrl:(r.dialog.addPage("post-project-created-page"),c.each(this.postProjectCreationCallbacks,function(e){e(r.dialog,t.returnUrl,t.projectId,t.projectKey,t.projectName)}))},projectValidationFailedHandler:function(t,r){this.existingProjectData?l("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.failure"}):this.webItemData.demoProject?l("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.failure"}):l("analyticsEvent",{name:"jira.project.templates.dialog.create.project.failure"});var i={};if(this.isBadRequest(t))i=JSON.parse(t.responseText);else if(this.isUnDefinedServerSideError(t))i={errorMessages:["Hmm... we couldn\'t create your project due to an unknown error. Try refreshing the page to start again."]};else{if(this.isDefinedServerSideError(t)){var o=JSON.parse(t.responseText);return JIRA.Messages.showReloadErrorMsg(o.message),e.avoidDirtyFormWarning(),void(this._window.location=d+o.returnUrl)}i=this.isTimeoutError(r)?{errorMessages:["Request timeout when creating project"]}:{errorMessages:[AJS.format("Error creating project, {0}",t.responseText)]}}e.draw({webItemData:this.webItemData||{},errors:i,currentName:e.getName(),currentKey:e.getKey(),currentUserDisplayName:a.model.currentUserDisplayName,currentUserName:a.model.currentUserName,currentUserAvatarUrl:a.model.currentUserAvatarUrl}),e.hideLoadingState()},isBadRequest:function(e){return 400===e.status},isUnDefinedServerSideError:function(e){if(500===e.status)try{JSON.parse(e.responseText)}catch(e){return!0}return!1},isDefinedServerSideError:function(e){return 500===e.status&&!c.isUndefined(JSON.parse(e.responseText).message)},isTimeoutError:function(e){return"timeout"===e},_updateAndValidateKey:function(t){e.setKey(t),this.validateKey()},_shouldUpdateKey:function(){return"true"!=e.getKeyEdited()},autofillKeyIfNeeded:function(){if(this._shouldUpdateKey()){var r=t.generate(e.getName());r.length>1?this._updateAndValidateKey(r):e.setKey("")}},_doesProjectNameExists:function(e){var t;for(t in this.projectNamesUpperCased)if(e.toUpperCase()==this.projectNamesUpperCased[t])return!0;return!1},validateName:function(){var t=n.trim(e.getName());if(t)return t.length<a.model.minNameLength?void e.showInlineErrorForName(AJS.format("The project name should be at least {0} characters in length.",a.model.minNameLength)):t.length>a.model.maxNameLength?void e.showInlineErrorForName(AJS.format("The project name must not exceed {0} characters in length.",a.model.maxNameLength)):this._doesProjectNameExists(t)?void e.showInlineErrorForName("A project with that name already exists."):void e.hideInlineErrorForName()},_performKeyValidationChecks:function(t){var r=n.ajax({url:d+"/rest/api/latest/projectvalidate/key?key="+t.toUpperCase()});r.done(c.bind(function(r){if(r.errors&&r.errors.projectKey)e.showInlineErrorForKey(r.errors.projectKey);else{var a=!1;c.each(this.projectKeyValidationCallbacks,function(r){var i=r(t.toUpperCase());i.errors&&i.errors.projectKey&&(a=!0,e.showInlineErrorForKey(i.errors.projectKey))}),a||e.hideInlineErrorForKey()}},this))},validateKey:function(){var t=e.getKey();this.lastKeyValidated!==t&&(t?(this.lastKeyValidated=t,this._performKeyValidationChecks(t)):e.hideInlineErrorForKey())},nameTimeout:function(){this.autofillKeyIfNeeded()},keyTimeout:function(){e.setKeyEdited()},_getExistingProjects:function(){if(this.projectNamesUpperCased.length>0)return this.projectNamesUpperCased;var e=n.ajax({url:d+"/rest/api/latest/project"});e.done(c.bind(function(e){this.projectNamesUpperCased=c.map(e,function(e){return e.name.toUpperCase()})},this))}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/template-info-view.js' */
define("jira/project-templates/template-info-view",["jira/project-templates/dialog-controller","require","backbone","jquery","underscore"],function(t,e,n,a,i){var o=AJS.trigger;return n.View.extend({initialize:function(t){i.bindAll(this,"draw","onNext")},draw:function(e,n){var a=t.addPage({name:"template-info",title:n,panelName:"template-info",backButton:!0,submitButtonText:"Select",submitButtonCallback:this.onNext,submitButtonClass:"template-info-dialog-create-button"}),i=this._nameToObj(e)();t.dialog.getPanel(a.id,0).html(i),t.dialog.gotoPage(a.id)},_nameToObj:function(t){return i.reduce(t.split("."),function(t,e){if(t)return t[e]},window)},onNext:function(t){o("analyticsEvent",{name:"jira.project.templates.dialog.create.templateinfo.next"});var n=e("jira/project-templates/template-info-controller");return n.next(),!1}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/template-info-controller.js' */
define("jira/project-templates/template-info-controller",["jira/project-templates/template-info-view","jira/lib/class","require","underscore"],function(e,t,n,a){var i=t.extend({init:function(e){a.bindAll(this,"initTemplateInfo","next")},initTemplateInfo:function(t){this.projectTemplateData=t;var n=new e;n.draw(t.infoSoyPath,t.name)},next:function(){var e=n("jira/project-templates/select-project-template-controller");e.openAddProjectPage(this.projectTemplateData)}});return new i});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/select-project-template-view.js' */
define("jira/project-templates/select-project-template-view",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/featureflags/feature-manager","require","backbone","jquery","underscore"],function(e,t,i,a,o,r,n){var l=AJS.contextPath(),s=AJS.preventDefault,c=AJS.trigger;return{ROW_LENGTH:2,DIALOG_BODY_CLASS:"select-project-templates-page",DIALOG_WIDTH:800,draw:function(o,n,s){function p(){return m.isProjectTypesEnabled(o)?JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType({projectTemplatesByType:o.projectTemplatesGroupedByType}):JIRA.Templates.ProjectTemplates.renderProjectTemplates({projectTemplates:o.projectTemplates})}function d(e){return!e.isOptimusPrimeOnboarding||e.isOptimusPrimeOnboarding&&e.hasProjectsInSystem}var m=a("jira/project-templates/select-project-template-controller");this.page=e.addPage({name:this.DIALOG_BODY_CLASS,title:o.demoProjects?"Create project with sample data":"Create project",panelName:"ProjectTemplatesListPanel",backButton:s.isOptimusPrimeOnboarding,submitButtonText:"Next",submitButtonCallback:m.dialogSubmitted,submitButtonClass:"create-project-dialog-create-button"}),e.dialog.getPanel(this.page.id,0).html(p()),t.model.projectCount>=2&&!o.demoProjects&&r(JIRA.Templates.ProjectTemplates.addWorkflowsLink({baseUrl:l})).appendTo(e.$dialogElement.find(".dialog-title"));var u=e.$dialogElement.find(".create-project-dialog-create-button"),f=this;this.getTemplateItems().click(function(){var e=r(this);e.addClass("selected"),f.getTemplateItems().not(this).removeClass("selected")}).dblclick(function(){u.click()}).focus(function(){r(this).click()});var g=this.get$TemplatesContainer();!o.demoProjects&&d(s)&&r(JIRA.Templates.ProjectTemplates.footerLinks({showDemoLink:i.isFeatureEnabled("jira.onboarding.cyoa"),projectImportAvailable:o.projectImportAvailable})).prependTo(e.$dialogElement.find(".dialog-button-panel")),this.bindKeyboardEvents(g),m.isProjectTypesEnabled(o)?0==o.projectTemplatesGroupedByType.length&&u.attr("disabled","disabled"):0==o.projectTemplates.length&&u.attr("disabled","disabled"),this.focusOnFirstTemplate(g,n),e.dialog.updateHeight(),this.truncateTemplateDescriptions(),this.resizeTemplateWidths();var h=e.$dialogElement.find("#view-more-business-templates");h.click(function(){c("analyticsEvent",{name:"jira.project.templates.dialog.create.more-business-templates.clicked"}),e.$dialogElement.find("#project-template-group-business").addClass("view-more-business-templates-selected"),requestAnimationFrame(function(){e.dialog.updateHeight(),this.resizeTemplateWidths()}.bind(this)),this.focusOnFirstTemplate(this.get$TemplatesContainer())}.bind(this))},get$TemplatesContainer:function(){return e.$dialogElement.find(".templates")},focusOnFirstTemplate:function(e,t){t?this.getFirstTemplateItemOfProjectType(t).click():this.getFirstTemplateItem().click(),setTimeout(function(){e.focus()},0)},getSelectedTemplateData:function(){var t=e.$dialogElement.find(".template.selected");return t.data()},getMoveDeltaForKey:function(e){switch(e){case 37:return-1;case 39:return 1;case 38:return-this.ROW_LENGTH;case 40:return+this.ROW_LENGTH}return 0},bindKeyboardEvents:function(e){e.bind("keydown",n.bind(function(t){var i=this.getMoveDeltaForKey(t.which);if(i)return this.moveSelection(e,i),s(t)},this))},moveSelection:function(e,t){var i=e.find(".template"),a=i.filter(".selected"),o=i.index(a)+t;if(o<i.length&&o>=0){var r=i.eq(o);r.click().focus(),this.scrollToSelectedElement(r)}},scrollToSelectedElement:function(e){var t=r(".dialog-panel-body.pt-content"),i=t.offset().top,a=e.offset().top,o=a+e.height(),n=i+t.height();a<i?t.scrollTop(t.scrollTop()-(i-a)):o>i+t.height()&&t.scrollTop(t.scrollTop()+o-n)},get$NextButton:function(){return e.$dialogElement.find(".create-project-dialog-create-button")},disableNextButton:function(){this.get$NextButton().attr("disabled","disabled")},truncateTemplateDescriptions:function(){var t=AJS.Meta.get("user-locale"),i="word";"ja_JP"===t&&(i="letter"),e.$dialogElement.find(".template-description").each(function(){r(this).dotdotdot({wrap:i,lastCharacter:{remove:[" ",",",";",".","!","?",""],noEllipsis:[]}})})},getTemplatesDialogContainer:function(){return e.$dialogElement.find("."+this.DIALOG_BODY_CLASS).find(".dialog-panel-body.pt-content").get(0)},getFirstTemplateItem:function(){return this.getTemplateItems().first()},getFirstTemplateItemOfProjectType:function(e){return this.getTemplateItems().filter("#project-template-group-"+e+" *").first()},getTemplateItems:function(){return e.$dialogElement.find(".template")},widthOfScrollbarForElement:function(e){var t=e.offsetWidth,i=e.clientWidth;return t-i},widthOfDialogAvailableForTemplateList:function(){var e=this.getTemplatesDialogContainer(),t=this.widthOfScrollbarForElement(e),i=r(e).width()||this.DIALOG_WIDTH;return i-t},widthOfTemplateItem:function(){var e=this.widthOfDialogAvailableForTemplateList()/this.ROW_LENGTH;return e-this.borderWidthOfTemplateItem()},borderWidthOfTemplateItem:function(){var e=this.getFirstTemplateItem().css("border-top-width");return parseInt(e,10)},resizeTemplateWidths:function(){this.getTemplateItems().each(n.bind(function(e,t){r(t).css("width",this.widthOfTemplateItem())},this))}}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/select-project-template-controller.js' */
define("jira/project-templates/select-project-template-controller",["jira/project-templates/select-project-template-view","jira/project-templates/template-info-controller","jira/project-templates/add-project-controller","jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/project-templates/config","wrm/context-path","jquery","underscore"],function(e,t,o,r,a,l,n,i,p){var c=n(),s={init:function(t,o,r){this.onboarding=r,e.draw(t,o,r)},isProjectTypesEnabled:function(e){return null!=e.projectTemplatesGroupedByType},loadProjectTemplatesData:function(){return i.ajax({url:c+"/rest/project-templates/1.0/templates",type:"GET"})},loadDemoProjectTemplatesData:function(){return i.ajax({url:c+"/rest/project-templates/1.0/templates/demo-projects",type:"GET"}).then(function(e){return e.demoProjects=!0,e})},dialogSubmitted:function(){var o=e.getSelectedTemplateData();r.hideDialogFromNewUser("templateselected"),s.raiseAtlassianEvent(o.itemModuleCompleteKey),p.isUndefined(o.infoSoyPath)?s.openAddProjectPage(o):t.initTemplateInfo(o)},openAddProjectPage:function(e){return e?void(e.createProject?(o.initProjectTemplate(e),this.onboarding&&"function"==typeof this.onboarding.handleSuccessfulProjectCreation&&o.registerPostProjectCreationCallback(this.onboarding.handleSuccessfulProjectCreation)):(r.dialog.addPage("blank-template-page"),i("body").trigger(e.itemModuleCompleteKey,r.dialog))):void a.showErrorMessage("An error occurred while trying to contact Jira")},raiseAtlassianEvent:function(e){l.model.selectedTemplate=e,AJS.EventQueue&&AJS.EventQueue.push({name:"projecttemplates.templateselected",properties:{selectedTemplate:e}})}};return s});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/create-shared-view.js' */
define("jira/project-templates/create-shared-view",["jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","require","backbone","jquery"],function(e,t,r,o,a,i,n){"use strict";var l=AJS.InlineDialog,s=AJS.trigger,c=i.View.extend({events:{"submit #create-shared-project-form":"onSubmitForm"},page:void 0,prepareDialog:function(t){var r=a("jira/project-templates/create-shared-controller");this.page=e.addPage({name:"create-shared-project",title:t,panelName:"create-shared-project",backButton:!0,submitButtonText:"Next",submitButtonCallback:r.dialogSubmitted,submitButtonClass:"create-shared-dialog-button"})},draw:function(t){e.dialog.gotoPage(this.page.id);var r=JIRA.Templates.ProjectTemplates.createSharedProjectForm({projectSuggestions:JSON.stringify(t.projectSuggestions)});e.dialog.getPanel(this.page.id,0).html(r),this._createProjectPicker();var o=e.$dialogElement.find("#shared-help-icon");o.length&&new l(o,"shared-project-help-popup",function(e,t,r){e.html(JIRA.Templates.ProjectTemplates.sharedHelp()),r()},{width:330,offsetX:-30}),e.$dialogElement.find(".dialog-button-panel button").removeAttr("disabled")},showProjectMissingError:function(){this._clearFormErrors(),this._getProjectPickerInput().after(aui.form.fieldError({extraClasses:"project-picker-missing-error",message:"Please select an existing project first."}))},drawEmptyInfo:function(){var t=JIRA.Templates.ProjectTemplates.noProjects();e.dialog.getPanel(this.page.id,0).html(t),e.$dialogElement.find(".dialog-button-panel button").hide()},drawError:function(t){e.dialog.getPanel(this.page.id,0).html(JIRA.Templates.errorMsg({closable:!1,msg:t}))},drawLoading:function(){e.dialog.gotoPage(this.page.id);var t=JIRA.Templates.ProjectTemplates.loading();e.dialog.getPanel(this.page.id,0).html(t),e.$dialogElement.find(".dialog-spinner").spin(),e.$dialogElement.find(".dialog-button-panel button").attr("disabled","disabled")},_clearFormErrors:function(){e.$dialogElement.find(".project-picker-missing-error").remove()},_getProjectPickerInput:function(){return e.$dialogElement.find("#project-picker")},onSubmitForm:function(e){this._clearFormErrors();var t=a("jira/project-templates/create-shared-controller");return t.dialogSubmitted(),!1},_getExtraInfoMessage:function(){return e.$dialogElement.find(".create-shared-info")},_createProjectPicker:function(){this._getExtraInfoMessage().hide(),this.projectSelect=new r({element:this._getProjectPickerInput(),revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:o}),this.projectSelect.$field.focus();var e=this;this._getProjectPickerInput().on("selected",function(t,r){r.value()&&(s("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.selected"}),e._getExtraInfoMessage().show())})},getSelectedProject:function(){return this.projectSelect.getSelectedDescriptor()&&this.projectSelect.getSelectedDescriptor().value()}});return new c({el:n(document),dialogView:t})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/create-shared-controller.js' */
define("jira/project-templates/create-shared-controller",["jira/project-templates/create-shared-controller-impl","jquery"],function(e,r){return new e({el:r(document)})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/create-shared-controller-impl.js' */
define("jira/project-templates/create-shared-controller-impl",["jira/project-templates/add-project-controller","jira/project-templates/create-shared-view","jira/lib/class","jquery","underscore"],function(e,t,r,i,a){"use strict";var n=AJS.contextPath();return r.extend({init:function(e){this._window=e.window||window,a.bindAll(this,"dialogSubmitted")},initCreateShared:function(){t.prepareDialog("Create with shared configuration");var e=this;this._getProjectSuggestions().done(function(r){e._hasSuggestions(r)?t.draw({projectSuggestions:r}):t.drawEmptyInfo()}).fail(function(){t.drawError("An error occurred while trying to contact Jira")}),t.drawLoading()},_hasSuggestions:function(e){var t=!1;return i.each(e,function(e,r){r&&r.items&&r.items.length>0&&(t=!0)}),t},_getProjectSuggestions:function(){return i.ajax({url:n+"/rest/project-templates/1.0/createshared"})},dialogSubmitted:function(){var r=t.getSelectedProject();r?e.initCreateShared({existingProjectId:r}):t.showProjectMissingError()}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/RemoteProjectsCreatedMessage.js' */
var $=require("jquery");$(function(){function e(e,o){return JIRA.Templates.ProjectTemplates.formatAnchor({href:e,body:o,title:o})}function o(o,t,r,a){var c=[];return c.push("a Jira project"),o&&c.push(e(o,"a Confluence space")),t&&c.push(e(t,"a FishEye repository")),r&&c.push(e(r,"a Crucible project")),a&&c.push(e(a,"a Bamboo project")),c}function t(e,t,r,c){var l="The following entities were created: {0} and {1}.",m=o(e,t,r,c),n=m.pop();return m.length>0?a(l,m.join(", "),n):null}function r(e){var o=$(e).offset();o&&window.scrollTo(o.left,o.top)}var a=AJS.format,c=require("jira/project-templates/add-project-controller"),l=localStorage.getItem(c.localStoragePrefix+"confluenceProject"),m=localStorage.getItem(c.localStoragePrefix+"fisheyeProject"),n=localStorage.getItem(c.localStoragePrefix+"crucibleProject"),s=localStorage.getItem(c.localStoragePrefix+"bambooProject");localStorage.removeItem(c.localStoragePrefix+"confluenceProject"),localStorage.removeItem(c.localStoragePrefix+"fisheyeProject"),localStorage.removeItem(c.localStoragePrefix+"crucibleProject"),localStorage.removeItem(c.localStoragePrefix+"bambooProject");var g;(l||m||n||s)&&(g=t(l,m,n,s),g&&JIRA.Messages.showSuccessMsg(g,{closeable:!0}),r("#project-config-webpanel-summary-settings"))});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/namespace.js' */
AJS.namespace("JPT.AddProjectController",null,require("jira/project-templates/add-project-controller")),AJS.namespace("JPT.AddProjectView",null,require("jira/project-templates/add-project-view")),AJS.namespace("JPT.CreateSharedController",null,require("jira/project-templates/create-shared-controller")),AJS.namespace("JPT.DialogView",null,require("jira/project-templates/dialog-view")),AJS.namespace("JPT.ConfigModel",null,require("jira/project-templates/config")),AJS.namespace("JPT.CreateSharedView",null,require("jira/project-templates/create-shared-view")),AJS.namespace("JPT.DialogController",null,require("jira/project-templates/dialog-controller")),AJS.namespace("JPT.ProjectKeyGenerator",null,require("jira/project-templates/project-key-generator")),AJS.namespace("JPT.SelectProjectTemplateController",null,require("jira/project-templates/select-project-template-controller")),AJS.namespace("JPT.SelectProjectTemplateView",null,require("jira/project-templates/select-project-template-view")),AJS.namespace("JPT.TemplateInfoControllerImpl",null,require("jira/project-templates/template-info-controller")),AJS.namespace("JPT.TemplateInfoView",null,require("jira/project-templates/template-info-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/project-create-bridge.js' */
!function(){function e(e){n(e)}var n,t=new Promise(function(e){n=e});t.done=function(e){return this.then(e)},define("jira/project-templates/new-project-create/bridge",function(){return e}),define("jira/project-templates/new-project-create",function(){return t})}();;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/project-create-experience.js' */
define("jira/project-templates/project-create-experience",["jira/featureflags/simplified-ux-feature-manager","jira/project-templates/dialog-controller"],function(e,r){return{trigger:function(t){t.preventDefault(),e.isGlobalSidebarEnabled()?JIRA.API.getSidebar().then(function(e){e.openDrawerForProjectCreate()}):r.handleProjectTemplateTriggered()}}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/project-create-onboarding-experience.js' */
define("jira/project-templates/project-create-onboarding-experience",["jquery","jira/featureflags/simplified-ux-feature-manager","jira/project-templates/dialog-controller","jira/project-templates/new-project-create","jira/featureflags/feature-manager"],function(e,r,t,a,n){function o(e){AJS.trigger("analyticsEvent",{name:e})}var c="project.config.dw.onboarding.project.create",i="jira.project.templates.onboarding.",l=i+"new-project-create.",d=i+"old-project-create.",p=l+"opened",j=l+"created",g=l+"cancelled",f=l+"load-error",u=d+"opened";return{trigger:function(i){if(i.preventDefault(),n.isFeatureEnabled(c)&&r.isGlobalSidebarEnabled()){o(p);const l=e("#onboarding");a.then(function(e){l.hide();var r=document.getElementById("new-project-create");e.renderNewProjectCreate(r,function(e){o(j),window.location.assign(e.returnUrl)},function(){o(g),l.show()})}).catch(function(){o(f),l.show(),t.handleProjectTemplateTriggered()})}else o(u),t.handleProjectTemplateTriggered()}}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'js/project-create-experience-init.js' */
require(["jquery","jira/project-templates/project-create-experience","jira/project-templates/project-create-onboarding-experience"],function(e,r,c){e(document).ready(function(){e(".trigger-project-create-experience").click(r.trigger),e(document).on("click",".trigger-onboarding-project-create-experience",c.trigger)})});;
;
/* module-key = 'com.atlassian.jira-core-project-templates:jira-core-project-templates-resources', location = '/soy/CoreProjectTemplates.soy' */
// This file was automatically generated from CoreProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.CoreTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }
if (typeof JIRA.Templates.ProjectTemplates.CoreTemplates == 'undefined') { JIRA.Templates.ProjectTemplates.CoreTemplates = {}; }


JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create and assign everyday tasks for your team.', projectTemplate: 'taskManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Estimate tasks, predict work volumes, set due dates, and easily report on project progress.', projectTemplate: 'projectManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Monitor recurring activities, such as expense approvals, design development, or reporting processes.', projectTemplate: 'processManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.contentManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create an issue for each piece of content and manage it through your publishing process.', projectTemplate: 'contentManagement', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.assetIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.contentManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.contentManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.recruitmentInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create an issue for each candidate and manage them through your company\x27s hiring process.', projectTemplate: 'recruitment', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.candidateIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.recruitmentInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.recruitmentInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.documentApprovalInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create an issue for each document and manage it though the authoring, review and approval process.', projectTemplate: 'documentApproval', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.documentIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.documentApprovalInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.documentApprovalInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.leadTrackingInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create an issue for each lead and trace the opportunity through negotiation to conversion.', projectTemplate: 'leadTracking', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.leadIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.leadTrackingInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.leadTrackingInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.procurementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: 'Create an issue for each procurement request and trace it through the approval process to final delivery.', projectTemplate: 'procurement', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.orderIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.procurementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.procurementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list">' + ((opt_data.issueTypesHtml != null) ? soy.$$filterNoAutoescape(opt_data.issueTypesHtml) : JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null) + JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType(null)) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('Workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.projectTemplate) + '"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.issueType = function(opt_data, opt_ignored) {
  return '<li><span class="issuetype-list-label"><span class="issuetype-icon ' + soy.$$escapeHtml(opt_data.iconKey) + '"></span><span class="issuetype-name">' + soy.$$escapeHtml(opt_data.label) + '</span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.issueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.issueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'task', label: 'Task'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'subtask', label: 'Sub-task'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.assetIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'asset', label: 'Asset'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.assetIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.assetIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.candidateIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'candidate', label: 'Candidate'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.candidateIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.candidateIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.documentIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'document', label: 'Document'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.documentIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.documentIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.leadIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'lead', label: 'Lead'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.leadIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.leadIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.orderIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'order', label: 'Order'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.orderIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.orderIssueType';
}
;
;
/* module-key = 'com.atlassian.jira.ui.selector:ui-selector', location = 'js/ui-version-selector.js' */
define("jira/ui-selector",["jquery","wrm/context-path","wrm/data"],function(i,t,e){var o=t(),r=e.claim("com.atlassian.jira.ui.selector:ui-selector.uri-override");return{init:function(t){function e(i){var e=t.find("span");i?(e.removeClass("aui-iconfont-workflow").addClass("aui-iconfont-approve"),e.attr("title",i)):(e.removeClass("aui-iconfont-approve").addClass("aui-iconfont-workflow"),e.removeAttr("title"))}const a=i("#jira-ui-selector-form"),n=i("#jira-ui-selector-dialog-submit-button"),u=i("#jira-ui-selector-dialog-delete-button"),l=i("#jira-ui-selector-dialog"),c=i("#jira-ui-selector-url");c.val(r.uri),e(r.uri),t.click(function(i){i.preventDefault(),AJS.dialog2(l).show()}),n.click(function(){a.submit()}),u.click(function(){i.ajax({url:o+"/rest/uiselector/1.0/uri",contentType:"application/json",type:"POST",data:JSON.stringify({uri:""})}).then(function(){c.val(""),AJS.dialog2(l).hide(),e()})}),a.submit(function(t){t.preventDefault();var r=c.val();i.ajax({url:o+"/rest/uiselector/1.0/uri",contentType:"application/json",type:"POST",data:JSON.stringify({uri:r})}).then(function(){AJS.dialog2(l).hide(),e(r)})})}}}),AJS.$(function(){require("jira/ui-selector").init(AJS.$("#jira-ui-selector-link"))});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:issue-link-confluence-js', location = 'js/issuelink-confluence.js' */
require(["jquery","jira/util/events","jira/util/events/types","issue-link-app-links/app-links"],function(n,e,i,u){var t={getCurrentAppId:function(e){return n("#issue-link-confluence-app-id",e).val()},shouldExecute:function(e){return 0!==n("#confluence-page-link",e).length},getIssueId:function(e){return n("input[name=id]",e).val()}};e.bind(i.NEW_PAGE_ADDED,function(n,e){u.init(t,e)})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:confluence-page-resource', location = 'templates/dialog/searchresult.soy' */
// This file was automatically generated from searchresult.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ConfluencePageSearch.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ConfluencePageSearch == 'undefined') { JIRA.Templates.ConfluencePageSearch = {}; }


JIRA.Templates.ConfluencePageSearch.result = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Find a Confluence page') + '</h2><form class="aui search-form" id="confluence-page-search-form" action="#" method="post"><div class="field-group"><label for="confluence-app-link">' + soy.$$escapeHtml('Server') + ':</label>';
  if (opt_data.appLinks.length == 1) {
    output += '<span class="field-value">' + soy.$$escapeHtml(opt_data.appLinks[0].name) + '</span><input id="confluence-app-link" class="hidden" type="hidden" name="appId" value="' + soy.$$escapeHtml(opt_data.appLinks[0].id) + '"/>';
  } else {
    output += '<select id="confluence-app-link" class="select medium-field" name="appId">';
    var appLinkList17 = opt_data.appLinks;
    var appLinkListLen17 = appLinkList17.length;
    for (var appLinkIndex17 = 0; appLinkIndex17 < appLinkListLen17; appLinkIndex17++) {
      var appLinkData17 = appLinkList17[appLinkIndex17];
      output += '<option value="' + soy.$$escapeHtml(appLinkData17.id) + '">' + soy.$$escapeHtml(appLinkData17.name) + '</option>';
    }
    output += '</select>';
  }
  output += '</div><div class="issue-link-applinks-authentication-message applinks-message-bar"></div><div class="hidden"><input class="issue-link-applinks-application-type" type="hidden" value="com.atlassian.applinks.api.application.confluence.ConfluenceApplicationType"/></div><div class="issue-link-oauth-toggle field-group"><label for="link-search-text" id="linkSearch-label">' + soy.$$escapeHtml('Search') + ':</label><input id="link-search-text" type="text" tabindex="0" class="text" name="linkSearch" size="50" /> <select tabindex="0" class="search-space select" id="search-panel-space"><option value="">' + soy.$$escapeHtml('All Spaces') + '</option></select> <input type="submit" tabindex="0" class="aui-button" id="search-panel-button" value="' + soy.$$escapeHtml('Search') + '"/><span id="link-search-loading" class="icon loading throbber hidden"/></div><div class="message-panel hidden"></div><div id="search-results-table" class="data-table"></div><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-link cancel" id="confluence-link-cancel" title="' + soy.$$escapeHtml('Press Esc to close') + '">' + soy.$$escapeHtml('Close') + '</button></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ConfluencePageSearch.result.soyTemplateName = 'JIRA.Templates.ConfluencePageSearch.result';
}


JIRA.Templates.ConfluencePageSearch.resultsTable = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.results.length > 0) {
    output += '<table id="confluence-searchresult" class="aui"><thead><tr><th width="180px">' + soy.$$escapeHtml('Title') + '</th><th width="550px">' + soy.$$escapeHtml('Excerpt') + '</th></tr></thead><tbody>';
    var resultList44 = opt_data.results;
    var resultListLen44 = resultList44.length;
    for (var resultIndex44 = 0; resultIndex44 < resultListLen44; resultIndex44++) {
      var resultData44 = resultList44[resultIndex44];
      output += '<tr title="' + soy.$$escapeHtml(resultData44.title) + '"><td class="title" data-url="' + soy.$$escapeHtml(resultData44.url) + '">' + soy.$$escapeHtml(resultData44.title) + '</td><td class="excerpt">' + soy.$$escapeHtml(resultData44.excerpt) + '</td></tr>';
    }
    output += '</tbody></table>';
  } else {
    output += '<div class="aui-message info"><span class="aui-icon icon-info"></span><p>' + soy.$$escapeHtml('Search returned no results.') + '</p></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ConfluencePageSearch.resultsTable.soyTemplateName = 'JIRA.Templates.ConfluencePageSearch.resultsTable';
}


JIRA.Templates.ConfluencePageSearch.spaceOptions = function(opt_data, opt_ignored) {
  var output = '<option value="">' + soy.$$escapeHtml('All Spaces') + '</option>';
  var spaceList64 = opt_data.spaces;
  var spaceListLen64 = spaceList64.length;
  for (var spaceIndex64 = 0; spaceIndex64 < spaceListLen64; spaceIndex64++) {
    var spaceData64 = spaceList64[spaceIndex64];
    output += '<option value="' + soy.$$escapeHtml(spaceData64.key) + '">' + soy.$$escapeHtml(spaceData64.name) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ConfluencePageSearch.spaceOptions.soyTemplateName = 'JIRA.Templates.ConfluencePageSearch.spaceOptions';
}


JIRA.Templates.ConfluencePageSearch.allSpacesOption = function(opt_data, opt_ignored) {
  return '<option value="">' + soy.$$escapeHtml('All Spaces') + '</option><option value="" disabled="disabled">' + soy.$$escapeHtml('Loading...') + '</option>';
};
if (goog.DEBUG) {
  JIRA.Templates.ConfluencePageSearch.allSpacesOption.soyTemplateName = 'JIRA.Templates.ConfluencePageSearch.allSpacesOption';
}
;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:confluence-page-resource', location = 'templates/dialog/template-wrapper.js' */
define("jira-issue-link-confluence/dialog/searchresult/templates",[],function(){"use strict";return window.JIRA.Templates.ConfluencePageSearch});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:confluence-page-resource', location = 'js/ConfluencePageSearch.js' */
require(["jquery","wrm/context-path","jira/util/formatter","aui/message","jira/ajs/ajax/smart-ajax","jira-issue-link-confluence/dialog/searchresult/templates","jira/dialog/form-dialog","issue-link-app-links/app-links"],function(e,a,n,t,s,l,r,c){e(function(){function i(a,s){e("#confluence-app-link",a).change(function(){var n=s.selectServer(e(this).val()).authenticationRequired;n||u(a,e(this).val(),s),e("#search-results-table",a).empty(),o(!0,a)}),e("#search-panel-button",a).click(function(){e("#search-results-table",a).empty();var s=e("#link-search-text",a).val();return s=e.trim(s),s?d(s,a):t.info("#search-results-table",{body:"Please enter search value.",closeable:!1}),!1})}function u(r,c,i){e("select#search-panel-space",r).html(l.allSpacesOption());var u=++m;s.makeRequest({url:a()+"/rest/confluenceIssueLink/1/confluence/space?appId="+c,complete:function(a,s,p){if(u===m)if(p.successful){var d=p.data.spaces;e("select#search-panel-space",r).html(l.spaceOptions({spaces:d}))}else if(401===p.status)i.setAuthenticationRequired(c,!0);else{o(!1,r);var f;f=403===p.status?"Content on the Confluence site could not be accessed because the Confluence server\'s \'Remote API\' feature is disabled. The Confluence system administrator must enable this \'Remote API\' feature for Jira to successfully access this content.":"Unable to gather information from the selected Confluence instance.",t.error("#search-results-table",{body:f,closeable:!1})}}})}function o(a,n){a?(e("#link-search-text",n).removeAttr("disabled"),e("#search-panel-space",n).removeAttr("disabled"),e("#search-panel-button",n).removeAttr("disabled")):(e("#link-search-text",n).attr("disabled","disabled"),e("#search-panel-space",n).attr("disabled","disabled"),e("#search-panel-button",n).attr("disabled","disabled"))}function p(a,n){e("#link-search-loading",n).toggleClass("hidden",!a)}function d(r,c){p(!0,c);var i=e("#confluence-app-link",c).val(),u=e("#search-panel-space option:selected",c).val();s.makeRequest({url:a()+"/rest/confluenceIssueLink/1/confluence/search?query="+r+"&appId="+i+"&spaceKey="+u+"&maxResults=10",complete:function(a,s,r){if(p(!1,c),r.successful){var i=r.data.result,u=l.resultsTable({results:i});e("#search-results-table",c).html(u)}else{var o;o=r.hasData?"The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.":"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.",t.error("#search-results-table",{body:o,closeable:!1})}e("#confluence-searchresult tbody tr",c).click(function(){var a=e(this).children().first().data("url");e("#confluence-page-url").val(a),e("#link-issue-dialog .error").hide(),h.hide(),e("#link-issue-dialog").show(),e("#confluence-page-url").focus().select()})}})}function f(a){var n={getCurrentAppId:function(a){return e("#confluence-app-link",a).val()},shouldExecute:function(a){return 0!==e("#confluence-app-link",a).length},onAuthenticationSuccessCallback:function(e,a,n){u(e,a,n)},getIssueId:function(a){return e("#confluence-page-link input[name=id]").val()}};return c.init(n,a.$popup).done(function(e,a){u(e,n.getCurrentAppId(e),a)})}var h=new r({id:"confluence-page-search-dialog",trigger:"#confluence-page-link .confluence-search-trigger",widthClass:"large",height:"565px",content:function(r){var c=this;s.makeRequest({url:a()+"/rest/confluenceIssueLink/1/confluence/applink",complete:function(a,s,u){if(u.successful){var o=u.data.applicationLinks;r(l.result({appLinks:o})),f(c).done(function(a,n){i(a,n),e("#link-search-text",a).focus()})}else t.error("#search-results-table",{body:"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.",closeable:!1}),r()}})},submitHandler:function(a,n){a.preventDefault(),e("#search-panel-button").click().removeAttr("disabled"),n()}}),m=0})});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:nps-amd-shims', location = '/js/amd-shims/ajs.js' */
define("atlassian-nps-plugin/js/amd-shims/ajs",function(){return AJS});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:nps-amd-shims', location = '/js/amd-shims/templates.js' */
define("atlassian-nps-plugin/js/amd-shims/templates",function(){return NPS.Templates});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:nps-amd-shims', location = '/js/amd-shims/wrm.js' */
define("atlassian-nps-plugin/js/amd-shims/wrm",function(){return WRM});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:nps-util', location = '/js/nps/util.js' */
define("atlassian-nps-plugin/js/nps/util",["atlassian-nps-plugin/js/nps/product","atlassian-nps-plugin/js/amd-shims/ajs"],function(b,a){var c={};c.kfyShuffle=function(g){for(var f=g.length-1;f>0;f--){var d=Math.floor(Math.random()*(f+1));var e=g[f];g[f]=g[d];g[d]=e}return g};c.sendAnalyticsEvent=function(d,e){e=e||{};e.product=b.getProductName().toLowerCase();e.page=window.location.pathname.replace(/\//g," ");var f={name:"nps."+d,data:e};a.trigger("analyticsEvent",f)};c.hasShowingDialog=function(){return a.$(".aui-dialog:visible, aui-dialog2:visible").length>0};return c});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:nps-util', location = '/js/nps/submission.js' */
define("atlassian-nps-plugin/js/nps/submission",["atlassian-nps-plugin/js/nps/util"],function(b){var a={};a.showNotification=function(c){b.sendAnalyticsEvent("notification.show",c)};a.startSurvey=function(){b.sendAnalyticsEvent("survey.start",{})};a.cancelSurvey=function(c){var d={};if(c){d.cancelContext=c}b.sendAnalyticsEvent("survey.cancel",d)};a.ignoreSurvey=function(){b.sendAnalyticsEvent("survey.ignore",{})};a.submitSurvey=function(c){b.sendAnalyticsEvent("survey.submit",c)};a.scheduleNextSurveyDate=function(c){b.sendAnalyticsEvent("survey.schedule",c)};a.showAcknowledgementFlag=function(c){b.sendAnalyticsEvent("server.acknowledge.show",c)};a.acceptAcknowledgementFlag=function(c){b.sendAnalyticsEvent("server.acknowledge.accept",c)};a.closeAcknowledgementFlag=function(c){b.sendAnalyticsEvent("server.acknowledge.close",c)};a.updateNpsStatus=function(c){b.sendAnalyticsEvent("server.status.changed",c)};return a});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/nps/product/jira.js' */
define("atlassian-nps-plugin/js/nps/product",["atlassian-nps-plugin/js/amd-shims/ajs","atlassian-nps-plugin/js/amd-shims/wrm"],function(h,b){var a="#navigation-app";var c;var g;var i;var f="JIRA";require(["atlassian-nps-plugin/js/nps/client-storage"],function(k){var j=k.get("application-key");var l=h.Meta.get("application-key");if(d()){f="jira-service-desk"}else{if(e(l)){f=l;k.set("application-key",l)}else{if(e(j)){f=j}}}});function e(j){return j==="jira-software"||j==="jira-core"}function d(){if(g===undefined){var j=b.data.claim("com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources.is-current-user-jsd-agent-data-provider");g=(j===true)}return g}return{getProductName:function(){if(d()===true){return"JIRA Service Desk"}else{return"JIRA"}},setBindings:function(){return false},getUserKey:function(){return h.Meta.get("remote-user")},hasAdg3NavigationSidebar:function(){return h.$(a).length>0},getAdg3SurveyInlineDialogClass:function(){return"jira-adg3-nps-survey-dialog"},getAdg3Flags:function(){var j=h.Meta.get("feature-flags");var k=h.Meta.get("enabled-dark-features");var l=j?JSON.parse(j):{};return{simplifiedNavigationEnabled:Boolean(l["fd-77.labs.navigation.simplified.ux"]),adg3GraduatedStylesEnabled:Boolean(l["fd-81.labs.navigation.adg3.styles.graduated"]),userAdg3Enabled:k?k.indexOf("labs.navigation.user.opt-in.simplified.ux.enabled")>-1:false}},isServerMode:function(){if(c===undefined){var j=b.data.claim("com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources.is-server-instance-data-provider");c=(j===true)}return c},allowDisplayNotification:function(){var l=(window.location.pathname.toLowerCase().indexOf("/servicedesk/agent/")>=0);var k=h.Meta.getBoolean("is-servicedesk-rendered");var j=l||k;if(d()===true){return j}else{return !j}},getSurveyTrigger:function(){return this.hasAdg3NavigationSidebar()?a:"#header-details-user-fullname"},getInlineDialogAlignment:function(){return this.hasAdg3NavigationSidebar()?"right top":"bottom right"},allowDisplayAcknowledgementFlag:function(){return true},enableABTesting:function(){return this.isServerMode()},getApplicationKey:function(){return f},isUserSiteAdmin:function(){if(i===undefined){var j=b.data.claim("com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources.is-user-site-admin");i=(j===true)}return i}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/nps/client-storage.js' */
define("atlassian-nps-plugin/js/nps/client-storage",["atlassian-nps-plugin/js/amd-shims/ajs","atlassian-nps-plugin/js/nps/product"],function(b,d){var f;function c(){if(f===undefined){f="nps-"+d.getUserKey()}return f}function a(g){return c()+"-"+g}function e(g){return a(d.getProductName().toLowerCase().replace(/\s+/g,"")+"-"+g)}return{set:function(g,h){try{localStorage.setItem(a(g),h)}catch(i){b.warn("Could not set NPS value: "+i)}},setProductValue:function(g,h){try{localStorage.setItem(e(g),h)}catch(i){b.warn("Could not set NPS value: "+i)}},get:function(g){return localStorage.getItem(a(g))},getProductValue:function(g){return localStorage.getItem(e(g))},remove:function(g){localStorage.removeItem(a(g))},removeProductValue:function(g){localStorage.removeItem(e(g))},containsKey:function(g){return localStorage.getItem(a(g))!==null},getNumber:function(g){var h=parseInt(this.get(g),10);if(isNaN(h)){return 0}return h},increment:function(g){this.set(g,(this.getNumber(g)+1))}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/nps/config-manager-server.js' */
define("atlassian-nps-plugin/js/nps/config-manager-server",["atlassian-nps-plugin/js/amd-shims/ajs","jquery","atlassian-nps-plugin/js/nps/client-storage","atlassian-nps-plugin/js/nps/submission"],function(a,e,d,b){var c={optedOut:null,dismissedCount:null,timeToNextSurvey:null};return{getCachedData:function(){return c},removeCachedData:function(){c={optedOut:null,dismissedCount:null,timeToNextSurvey:null}},fetchConfig:function(){return e.ajax({url:a.contextPath()+"/rest/nps/1.0/config",type:"GET",contentType:"application/json",cache:false,success:function(f){if(f.dismissedCount===null){f.dismissedCount=0}c=f;d.setProductValue("nextSurveyDate",Date.now()+c.timeToNextSurvey)},error:function(f){a.warn("Error getting NPS config: ",f)}})},setConfig:function(){var f;if(typeof arguments[0]==="object"){f=arguments[0]}else{if(arguments.length!==2){throw ("Need to provide key/value as argument to set NPS server config")}f={};f[arguments[0]]=arguments[1]}if(localStorage&&localStorage.getItem("nps-testing")==="true"){f.forceUpdate=true}return e.ajax({url:a.contextPath()+"/rest/nps/1.0/config",type:"PUT",contentType:"application/json",data:JSON.stringify(f),success:function(){e.extend(c,f)},error:function(g){a.warn("Error setting NPS config: ",g)}})},scheduleNextSurveyDate:function(){return e.ajax({url:a.contextPath()+"/rest/nps/1.0/config/nextSurveyDate",type:"POST",contentType:"application/json",success:function(f){b.scheduleNextSurveyDate({nextSurveyDate:f});d.setProductValue("nextSurveyDate",f)},error:function(f){a.warn("Error scheduling next survey date for NPS: ",f)}})}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/nps/session-manager.js' */
define("atlassian-nps-plugin/js/nps/session-manager",["atlassian-nps-plugin/js/nps/client-storage"],function(e){var b=1000*60;var c=5*b;var g=60*b;var f=10*b;function a(){if(!e.containsKey("sessionStart")){e.set("sessionStart",Date.now())}else{if((Date.now()-e.getNumber("lastActive"))>g){e.set("sessionStart",Date.now())}}}function d(){if(!e.containsKey("idleStart")){e.set("idleStart",Date.now())}}return{update:function(){d();a();e.set("lastActive",Date.now())},isSurveyTime:function(){return this.isInSession()&&this.isIdle()},isIdle:function(){var h=Date.now()-e.getNumber("idleStart");return h>c},isInSession:function(){var h=Date.now()-e.getNumber("sessionStart");return h>f},reset:function(){e.remove("lastActive");e.remove("sessionStart");e.remove("idleStart")}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/atlassian-nps-plugin.js' */
define("atlassian-nps-plugin/js/atlassian-nps-plugin",["atlassian-nps-plugin/js/amd-shims/ajs","atlassian-nps-plugin/js/amd-shims/wrm","atlassian-nps-plugin/js/nps/client-storage","atlassian-nps-plugin/js/nps/product","atlassian-nps-plugin/js/nps/session-manager","atlassian-nps-plugin/js/nps/submission","atlassian-nps-plugin/js/nps/util","jquery"],function(j,a,b,g,d,i,k,e){var m;var o=1000*60*60*24*30;function n(p){m=p;var q=b.getNumber("displayCount");g.setBindings();d.update();if(b.get("optedOut")==="true"){m.setConfig("optedOut",true)}else{if(q!==0){l()}else{if(Date.now()-b.get("lastSurveyDate")>=o){if(b.getProductValue("nextSurveyDate")===null){m.fetchConfig().then(h)}else{if(b.getProductValue("nextSurveyDate")-Date.now()<0){m.fetchConfig().then(h)}}}}}}function h(){c().then(f)}function c(){var q=30000;var p=e.Deferred();if(j.DarkFeatures&&j.DarkFeatures.isEnabled("nps.survey.inline.dialog")){q=5000}if(localStorage&&localStorage.getItem("nps-testing")==="true"){q=0}setTimeout(function(){var r=!k.hasShowingDialog();if(r&&d.isSurveyTime()&&m.getCachedData().timeToNextSurvey!=null&&m.getCachedData().timeToNextSurvey<=0){p.resolve()}},q);return p.promise()}function f(){if(g.allowDisplayNotification()===true){a.require("wr!com.atlassian.plugins.atlassian-nps-plugin:nps-specific-resources-async",function(){require(["atlassian-nps-plugin/js/nps/main"],function(p){p.launch(m);b.increment("displayCount");i.showNotification({displayCount:b.getNumber("displayCount"),dismissedCount:parseInt(m.getCachedData().dismissedCount,10)});b.set("lastSurveyDate",Date.now())})})}}function l(){a.require("wr!com.atlassian.plugins.atlassian-nps-plugin:nps-submission-resources",function(){require(["atlassian-nps-plugin/js/nps/submission"],function(p){b.remove("displayCount");p.ignoreSurvey();m.scheduleNextSurveyDate();d.reset()})})}return{init:n}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources', location = '/js/bootstrap.js' */
require(["atlassian-nps-plugin/js/amd-shims/ajs","atlassian-nps-plugin/js/atlassian-nps-plugin","atlassian-nps-plugin/js/nps/config-manager-server","atlassian-nps-plugin/js/nps/product"],function(b,d,a,c){if(!c.getUserKey()){return}var e=function(){b.toInit(function(){d.init(a)})};if(c.waitBeforeStart){c.waitBeforeStart(e)}else{e()}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:client-analytics-runtime', location = '/client-analytics/project-api-resolver/project-api-resolver.js' */
define("client-analytics/project-api-resolver/project-api-resolver",["jquery","exports"],function(e,r){r.resolve=function(){return new Promise(function(r,t){window.JIRA&&window.JIRA.API&&window.JIRA.API.getSidebar?JIRA.API.getSidebar().done(function(){var t=JIRA.Issues&&JIRA.Issues.Api&&JIRA.Issues.Api.getSelectedIssueId;r({getCurrentProjectId:JIRA.API.Projects.getCurrentProjectId,getCurrentProjectType:JIRA.API.Projects.getCurrentProjectType,getCurrentIssueId:t||e.noop})}).fail(t):t()})}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:client-analytics-runtime', location = '/client-analytics/runtime/client-analytics-runtime.js' */
define("client-analytics/runtime/client-analytics-runtime",["jquery","jira/analytics","client-analytics/project-api-resolver/project-api-resolver","exports"],function(e,t,r,n){function i(e,t){var r=t.trigger.split(" "),n=r[0],i=r[1],c=Object.keys(t.properties||{}).map(function(e){var r=t.properties[e].split(" "),n=r[0],i=r[1];return{analyticEventPropertyName:e,elementAttribute:n,elementSelector:i}});return{analyticEventName:e,trigger:{eventType:n,selector:i},properties:c}}function c(e){return Object.keys(e).map(function(t){var r=e[t].events||{};return Object.keys(r).map(function(e){var n=r[e],c=["jira",t,e].join(".");return i(c,n)})}).reduce(function(e,t){return e.concat(t)},[])}function a(t){var r=e(t.elementSelector),n=u[t.elementAttribute];if(r.length&&n)return n(r)}function o(n){e(document).on(n.trigger.eventType,n.trigger.selector,function(){var e=n.analyticEventName,i={};n.properties.forEach(function(e){var t;t=a(e),t&&(i[e.analyticEventPropertyName]=t)}),r.resolve().then(function(r){var n=r.getCurrentProjectId(),c=r.getCurrentProjectType(),a=r.getCurrentIssueId();n&&(i.projectId=n),c&&(i.projectType=c),a&&(i.issueId=a),t.send({name:e,properties:i})}).catch(function(){t.send({name:e,properties:i})})})}var u={"value.length":function(e){var t=e.val();if(t)return t.length}};n.registerEvents=function(e){var t=c(e);t.forEach(o)}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:client-analytics-runtime-init', location = '/client-analytics/client-analytics-init.js' */
require(["jira/analytics/context-provider","client-analytics/runtime/client-analytics-runtime"],function(t,e){var i=t.getContext();i&&e.registerEvents(i.analyticsResource)});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:logging-client', location = '/client-analytics/logging-client.js' */
define("jira/analytics/logging-client",["jquery","wrm/context-path","jira/featureflags/feature-manager"],function(a,n,t){function e(){return t.isFeatureEnabled(u)}var r=n()+"/rest/internal/2/log/unsafe/emau",u="jira.tracking.subproduct.and.url.emau";return{logEMAU:function(n,t,u){e()&&a.ajax({url:r,contentType:"application/json",type:"POST",data:JSON.stringify({eventData:{url:t,urlParams:u,subproduct:n}})})}}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:track-emau', location = '/client-analytics/track-emau.js' */
require(["jira/analytics/web-client","jira/analytics/logging-client","jquery"],function(n,i,t){t(document).ready(function(){n.startUIViewedEvent(function(n){i.logEMAU(n.subproduct,window.location.pathname,window.location.search)})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-issue-type-whitelist', location = 'includes/js/rapid/analytics/register-software-issue-types.js' */
function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}require(["jira/analytics/transformers/issue-type"],function(e){var r,t=(r={},_defineProperty(r,"Story","Story"),_defineProperty(r,"Epic","Epic"),r);e.registerAll(t)});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/ui/help/HelpAnalytics.js' */
AJS.$(function(){var e=require("jira-agile/rapid/analytics-tracker"),r=function(r){return new e(r).setAsync(!1)};AJS.$("#gh_view_help").click(function(e){return r("gh.gethelp").trigger("usermenu","docs"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement").click(function(e){return r("gh.myjirahome").trigger("usermenu","enabled"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-disablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","disable"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-set").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#beta_gh\\.configuration\\.rapid\\.removal").click(function(e){var n=AJS.$(this),t=n.attr("checked")?"on":"off";return r("gh.labs.feature").trigger("rapid_removal",t),!0}),AJS.$(document).delegate("#js-classic-link_lnk","click",function(e){return r("gh.agile.menu").trigger("classic"),!0});var n=function(e){return"_blank"==e.attr("target")||(setTimeout('document.location = "'+e.attr("href")+'"',100),!1)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/rapid/Analytics.js' */
"undefined"==typeof GH&&(window.GH={}),function(n,a,e,i){function t(){a(document).on(c,function(n,a){l(a)})}function l(a){var i={},t=a.category;e.isUndefined(a.action)||(t=t+"."+a.action),e.isUndefined(a.label)||(i.label=a.label),e.isUndefined(a.value)||(i.value=a.value),n.trigger("analytics",{name:t,data:i})}i.AnalyticsEnabled=!0;var c="gh.analytics.async";t()}(AJS,AJS.$,_,GH);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalissueoperations', location = 'includes/js/gh-globalissueoperations.js' */
!function(){var r=require("jira-agile/rapid/analytics-tracker"),i=new r("gh.issueaction.gotorapidboard").setAsync(!1),e=require("jira/dialog/form-dialog"),a=require("jira/dialog/dialog-register"),o=e.extend({_performRedirect:function(r){i.trigger("direct"),window.location.href=r}}),n=new o({id:"gh-rapidboard-dialog",trigger:"a.issueaction-greenhopper-rapidboard-operation",ajaxOptions:function(){return a.getDefaultAjaxOptions.apply(this,arguments)}}),t=function(r,i){var e="",a=AJS.$(r);return a.hasClass("js-rapidboard-operation-sprint")?e="sprint.":a.hasClass("js-rapidboard-operation-issue")&&(e="issue."),e+=i};AJS.$(function(){AJS.$(document).on("simpleClick",".issueaction-greenhopper-rapidboard-operation",function(r){r.preventDefault();var e=t(r.currentTarget,"open");i.trigger(e),n.show()}),AJS.$(document).on("simpleClick",".js-select-rapidboard",function(r){var e=t(r.currentTarget,"chosen");i.trigger(e)})})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/initFieldPickers.js' */
!function(e){function i(i){e(".js-epic-picker",i).each(function(){var i=e(this),n=new JIRA.EpicPicker({element:i});e(document).trigger(JIRA.EpicPicker.READY_EVENT,n)})}function n(i){e(".js-sprint-picker",i).each(function(){var i=e(this),n=new JIRA.SprintPicker({element:i});e(document).trigger(JIRA.SprintPicker.READY_EVENT,n)})}var r=require("jira/util/events/types");JIRA.bind(r.NEW_CONTENT_ADDED,function(e,r,t){t!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&(i(r),n(r))})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicPicker.js' */
!function(){"use strict";var e=require("jira/ajs/select/single-select");JIRA.EpicPicker=e.extend({init:function(e){function r(e){var r=!p();return{searchQuery:e,projectKey:AJS.$(g).attr("data-project-key"),maxResults:100,hideDone:r}}function t(e,r,t,i){e=AJS.escapeHTML(String(e)),r=AJS.escapeHTML(String(r)),t=t,i=AJS.escapeHTML(String(i));var n,o=i.toUpperCase(),s=e.toUpperCase(),a=r.toUpperCase(),o=(o+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1"),c=new RegExp("("+o+")","gi"),l=s.search(c);l>-1&&(n=e.slice(l,l+i.length),e=e.replace(n,"<em>"+n+"</em>")),l=a.search(c),l>-1&&(n=r.slice(l,l+i.length),r=r.replace(n,"<em>"+n+"</em>"));var p=t?" &#8226; "+"Done":"";return e+" - <span class='epic-menu-metadata'>("+r+p+")</span>"}function i(e){if(!e||!e.epicLists||0===e.total)return[];for(var r=[],t=d.getQueryVal(),i=0,s=0;s<e.epicLists.length;s++){var a=e.epicLists[s],c=a.epicNames,l=o(s+1,a.listDescriptor);c.length>0&&(_.each(c,function(e){l.addItem(n(e,t))}),r.push(l)),i+=c.length}if(i>0){var h=new AJS.GroupDescriptor({weight:0,showLabel:!1,items:[new AJS.ItemDescriptor({label:t,highlighted:!0,styleClass:"ghx-epic-menu-header",customItem:!0,html:"<li><h5>"+AJS.format("Showing {0} of {1} matching epics",i,e.total)+"</h5><label for='chkShowDoneEpic'><input type='checkbox' id='chkShowDoneEpic'"+(p()?" checked":"")+">"+"Show done epics"+"</label></li>"})]});r.unshift(h)}return r}function n(e,r){var i=e.key,n=e.name,o=e.isDone,s=t(n,i,o,r);return new AJS.ItemDescriptor({value:"key:"+i,fieldText:n,label:s,html:s,allowDuplicate:!1,highlighted:!0})}function o(e,r){return new AJS.GroupDescriptor({weight:e,label:r,replace:!0})}function s(e,r,t){var i=AJS.$(g);i.siblings(".ghx-error").remove(),i.before(GH.tpl.rapid.notification.renderAuiMessage({message:"Error"+": "+t,type:"error",className:"ghx-error aui-ss"}))}function a(e){var r="",t=!1;return e&&e.length>0&&(r=AJS.format("Epic with key \'\'{0}\'\' does not exist.",e),t=!0),{isError:t,message:r}}function c(e){var r,t;u.apply(d,[e]),e=e||AJS.$.trim(d.$field.val()),t=d.model.getDescriptor(e),!t&&d.$container.hasClass("aui-ss-editing")&&(r=a(e),r.isError?(d.options.errorMessage=r.message,d.showErrorMessage(e)):d.hideErrorMessage())}function l(){d._super(e),u=d.handleFreeInput,d.handleFreeInput=c;var r=require("jira/ajs/layer/inline-layer");d.dropdownController.bind(r.EVENTS.show,function(e,r){r.off("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',h),r.on("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',h)})}function p(){return"true"===localStorage.getItem("gh.epicpicker.showdone")}function h(e){e.preventDefault();var r=!p();return localStorage.setItem("gh.epicpicker.showdone",r),d.$field.click(),!1}var u,g=e.element,d=this;AJS.$.extend(e,{submitInputVal:!0,showDropdownButton:!0,removeDuplicates:!0,ajaxOptions:{url:contextPath+"/rest/greenhopper/1.0/epics",query:!0,data:r,formatResponse:i,error:s}});var m=this.setSelection;this.setSelection=function(e,r){e.properties.customItem||m.apply(this,arguments)},l()}}),JIRA.EpicPicker.READY_EVENT="gh.epic-picker.ready"}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintPicker.js' */
JIRA.SprintPicker=AJS.SingleSelect.extend({init:function(e){function n(e){var n=h.apply(this,arguments);return n.find("a").append(GH.tpl.customfields.sprintpicker.renderSuggestionMeta(e.properties)),n}function t(e){var n,t=this.getSelectedDescriptor();e||t||p(null),o(),this.hideErrorMessage(),n=t?r(t):i(e),n.message&&(this.options.errorMessage=n.message,f.apply(this,arguments),this.$errorMessage.addClass("inline-edit-error")),n.needsScopeChangeWarning&&s()}function i(e){var n=null,t=!1;return e&&e.length>0?v?(n=AJS.format("{0} is not a valid sprint name. This issue will be returned to the backlog.",e),v===m.ACTIVE&&(t=!0)):n=AJS.format("{0} is not a valid sprint name.",e):v===m.ACTIVE&&(t=!0),{message:n,needsScopeChangeWarning:t}}function r(e){var n=!1;return v===m.ACTIVE?n=!!u()||x!=e.properties.value:v===m.FUTURE?e.properties.stateKey===m.ACTIVE&&(n=!0):v||e.properties.stateKey===m.ACTIVE&&(n=!0),{message:null,needsScopeChangeWarning:n}}function s(){if(!S){u()||(S=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"Sprint scope will be affected by this action."})));var e=I.$container.closest(".inline-edit-fields");e.size()>0?u()?(S=AJS.$('<div class="ghx-estimate-scope-warning"></div>'),S.text("Sprint scope will be affected by this action."),0===e.find(".field-group .ghx-estimate-scope-warning").length&&e.find(".field-group").append(S)):0===e.find(".field-group .ghx-estimate-scope-warning").length&&e.closest(".editable-field").append(S):(u()&&(S=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"Sprint scope will be affected by this action."}))),0===I.$container.closest(".field-group .ghx-sprint-picker-scope-warning").length&&I.$container.closest(".field-group").append(S))}S.show()}function o(){S&&(S.remove(),S=null)}function a(e){if(!e.suggestions&&!e.allMatches)return[];var n=new AJS.GroupDescriptor({weight:0,label:"Suggestions"}),t=new AJS.GroupDescriptor({weight:1,label:"All sprints"});return _.each(l(e.suggestions),function(e){n.addItem(g(e,!0))}),_.each(l(e.allMatches),function(e){t.addItem(g(e,!1))}),[n,t]}function g(e,n){var t=AJS.escapeHTML(String(e.name));return new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:t,stateKey:e.stateKey,boardName:e.boardName,allowDuplicate:!1,isSuggestion:n})}function l(e){return _.sortBy(e,function(e){return e.name.toLowerCase()})}function p(e){GH.SprintConfig&&AJS.$(GH).trigger("QuickEdit.fieldChange",{fieldId:GH.SprintConfig.getSprintFieldId(),fieldChangeData:{original:x,updated:e?e.properties.value:null}})}function d(){if(I._super(e),h=I.listController._renders.suggestion,f=I.showErrorMessage,I.listController._renders.suggestion=n,I.showErrorMessage=t,u()){var i=I.$container.closest(".inline-edit-fields"),r=i.size()>0;if(r){var s=w.parent().find("input");s.on("focus",function(){I.showErrorMessage()})}}w.bind("selected",function(e,n,t){u()&&r||t.showErrorMessage(t.getQueryVal()),p(n),I.showErrorMessage()}),I.suggestionsHandler=new J(I.options,I.model)}function c(e,n,t){var i=AJS.$(w);i.siblings(".ghx-error").remove(),i.before(GH.tpl.rapid.notification.renderAuiMessage({message:"Error"+": "+t,type:"error",className:"ghx-error aui-ss"}))}function u(){return GH&&GH.DetailsView}var h,f,S,m={ACTIVE:"ACTIVE",FUTURE:"FUTURE",CLOSED:"CLOSED"},A=10,w=e.element,v=w.data("saved-state"),x=w.data("saved-id"),I=this,J=AJS.SelectSuggestHandler.extend({formatSuggestions:function(e,n){return e=this._super(e,n),0===n.length&&e[e.length-1].footerText("Start typing for sprints."),e}});AJS.$.extend(e,{submitInputVal:!1,showDropdownButton:!0,removeOnUnSelect:!1,maxInlineResultsDisplayed:A,ajaxOptions:{url:contextPath+"/rest/greenhopper/1.0/sprint/picker",query:!0,formatResponse:a,error:c}}),d()}}),JIRA.SprintPicker.READY_EVENT="gh.sprint-picker.ready";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintPicker.soy' */
// This file was automatically generated from SprintPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintpicker == 'undefined') { GH.tpl.customfields.sprintpicker = {}; }


GH.tpl.customfields.sprintpicker.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '' + ((opt_data.boardName && ! opt_data.isSuggestion) ? '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithBoardName(opt_data) + ')</span>' : '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName(opt_data) + ')</span>');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderSuggestionMeta';
}


GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml('Active sprint') : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future sprint') : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintpicker.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Active sprint in {0}',opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format('Future sprint in {0}',opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithBoardName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/rapid/ui/notification/Notification.js' */
!function(){AJS.namespace("GH.Notification"),GH.Notification.autoHideEnabled=!0;var e=Object.freeze({INFO:"info",SUCCESS:"success"});GH.Notification.showErrors=function(e,i){var t=GH.Notification.prepareNotificationDiv(),a=GH.tpl.rapid.notification.renderErrorMessages(e);"undefined"==typeof i&&(i=!0),AJS.messages.error(t,{title:"Error",body:a,closeable:i}),GH.Notification._divStyle(t)&&t.css(GH.Notification._divStyle(t)),t.show()},GH.Notification.showError=function(e,i,t){var a=GH.Notification.prepareNotificationDiv();"undefined"==typeof t&&(t=!0),AJS.messages.error(a,{title:e,body:i,closeable:t}),GH.Notification._divStyle(a)&&a.css(GH.Notification._divStyle(a)),a.show()},GH.Notification.showWarnings=function(e,i){var t={autoHide:!0,autoHideDelay:5e3,preRendered:!1,showTitle:!1};i=_.extend({},t,i);var a,o=GH.Notification.prepareNotificationDiv();a=i.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e});var s={body:a,closeable:!0};i.showTitle&&(s.title="Warning"),AJS.messages.warning(o,s),GH.Notification._divStyle(o)&&o.css(GH.Notification._divStyle(o)),o.show(),i.autoHide&&GH.Notification.autoHideEnabled&&setTimeout(function(){o.hide()},i.autoHideDelay)},GH.Notification.showWarning=function(e){var i=GH.Notification.prepareNotificationDiv();AJS.messages.warning(i,{body:e,closeable:!0}),GH.Notification._divStyle(i)&&i.css(GH.Notification._divStyle(i)),i.show()},GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()},GH.Notification.handleDateFormatMismatchError=function(e){var i='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';i+="Advanced Settings",i+="</a>";var t=AJS.format("It appears your Jira date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",i);GH.Notification.showWarnings(t,{autoHide:!1,preRendered:!0})},GH.Notification.auiMessage=function(e){var i=_.extend({type:"generic",icon:!0,messageHtml:!1},e);return GH.tpl.rapid.notification.renderAuiMessage({type:i.type,title:i.title,icon:i.icon,messageHtml:i.messageHtml,message:i.message})},GH.Notification.Handler={_defaultNotificationHandler:function(){var e=AJS.$("<div/>");return AJS.$(".global-msg").remove(),e.addClass("global-msg").appendTo("body"),e},_defaultDivStyleHandler:function(e){return{marginLeft:-e.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(e){this._customDivStyleHandler=e,this._useDefault=!1},_useDefault:!0,setCustomNotificationHandler:function(e){this._customNotificationHandler=e,this._useDefault=!1},removeCustomHandlers:function(){this._useDefault=!0},getNotificationHandler:function(){return this._useDefault||null==this._customNotificationHandler?this._defaultNotificationHandler:this._customNotificationHandler},getDivStyleHandler:function(){return this._useDefault||null==this._customDivStyleHandler?this._defaultDivStyleHandler:this._customDivStyleHandler}},GH.Notification._divStyle=function(e){var i=GH.Notification.Handler.getDivStyleHandler();return i(e)},GH.Notification.prepareNotificationDiv=function(){var e=GH.Notification.Handler.getNotificationHandler();return e()},GH.Notification.showSuccess=function(t,a){i(e.SUCCESS,t,a)},GH.Notification.showInfo=function(t,a){i(e.INFO,t,a)};var i=function(e,i,t){clearTimeout(GH.Notification.current);var a={timeout:5e3,closeable:!0,shadowed:!0};t=_.extend(a,t,{body:i});var o=GH.Notification.prepareNotificationDiv();AJS.messages[e](o,t),GH.Notification._divStyle(o)&&o.css(GH.Notification._divStyle(o)),o.show(),GH.Notification.autoHideEnabled&&(GH.Notification.current=setTimeout(function(){AJS.$(".global-msg").hide()},t.timeout))};GH.Notification.showIssueMessage=function(e){var i=JIRA.SessionStorage,t=null,a=null;e||(e=i.getItem("selectedIssueId")),e&&(a=i.getItem("selectedIssueKey"),t=i.getItem("selectedIssueMsg"),GH.Notification.showIssueMessageImpl(e,t,a)),i.removeItem("selectedIssueId"),i.removeItem("selectedIssueKey"),i.removeItem("selectedIssueMsg")},GH.Notification.showIssueMessageImpl=function(e,i,t){i||(i="thanks_issue_updated");var a=AJS.params[i];a&&t&&(a=AJS.format(a,t),GH.Notification.showSuccess(a))},GH.Notification.addPageLoadMessage=function(e,i){var t=GH.storage.get("gh.pageloadmessages",!0)||[];t.push({message:e,type:i||"success"}),GH.storage.put("gh.pageloadmessages",t,!0)},GH.Notification._displayPageLoadMessages=function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var i=e[0].type,t="";switch(_.each(e,function(e){t.length>0&&(t+="<br>"),t+=e.message}),i){case"warning":GH.Notification.showWarning(t);break;case"success":default:GH.Notification.showSuccess(t)}GH.storage.put("gh.pageloadmessages",null,!0)}};var t=null;GH.Notification.showBoardUpdatedMessage=function(){var e=require("jira/featureflags/simplified-ux-feature-manager"),i=void 0,a=AJS.$.Deferred();if(e.isAdg3StylesEnabled()){if(0===AJS.$(".aui-flag[aria-hidden=false]").length){var o=GH.tpl.rapid.notification.renderGHtvMessage({showIgnore:!1});t=AJS.flag({type:"info",body:o}),i=AJS.$(o)}}else GH.Notification.clearBoardUpdatedMessage(),i=AJS.$(GH.tpl.rapid.notification.renderGHtvMessage({showIgnore:!0})).appendTo("#gh"),i.data("deferred",a);if(e.isAdg3StylesEnabled()){var s=function(e){e.preventDefault(),GH.Notification.clearBoardUpdatedMessage(),a.resolve()};AJS.$(".js-refresh-now").off("click",s).click(s)}else i.find(".js-refresh-now").click(function(e){e.preventDefault(),i.removeData("deferred"),GH.Notification.clearBoardUpdatedMessage(),a.resolve()}),i.find(".js-ignore-refresh").click(function(e){e.preventDefault(),GH.Notification.clearBoardUpdatedMessage()});return a.promise()},GH.Notification.clearBoardUpdatedMessage=function(){var e=require("jira/featureflags/simplified-ux-feature-manager");if(e.isAdg3StylesEnabled())t&&t.close();else{var i=AJS.$("#ghx-update-message");if(i.length){var a=i.data("deferred");a&&a.reject&&a.reject(),i.remove()}}},GH.Notification.isBoardUpdatedMessageVisible=function(){var e=AJS.$("#ghx-update-message");return e.length>0},AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('This version of {0} is not a supported browser.',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('See our documentation for the list of supported browsers.') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-global-message" class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('This board has been updated') + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml('Refresh') + '</a>' + ((opt_data.showIgnore) ? '<span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml('Ignore') + '</a>' : '') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintMultiselect.js' */
!function(){"use strict";var e=require("jira/util/events/types");JIRA.bind(e.NEW_CONTENT_ADDED,function(e,t){function n(e){var t=new AJS.GroupDescriptor({weight:0,label:"Suggestions",items:_.map(e.suggestions,s)}),n=new AJS.GroupDescriptor({weight:1,label:"All sprints",items:_.map(e.allMatches,s)});return[t,n]}function s(e){e.date=moment(e.date,"YYYY-MM-DDTHH:mm:ssZ").format("LL");var t=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(e);return new AJS.ItemDescriptor({value:e.id,label:e.name,html:t,title:GH.tpl.customfields.sprintmultiselect.renderTooltip(e),date:e.date,boardName:e.boardName,stateKey:e.stateKey,highlighted:!0,allowDuplicate:!1})}AJS.$(".js-sprint-checkboxmultiselect",t).each(function(){var e=new AJS.CheckboxMultiSelect({element:this,maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/sprint/picker",error:function(){e._setSuggestions([])},data:{excludeCompleted:!1},query:!0,formatResponse:n},suggestionsHandler:GH.SprintSuggestHandler})})})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintMultiselect.soy' */
// This file was automatically generated from SprintMultiselect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintmultiselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintmultiselect == 'undefined') { GH.tpl.customfields.sprintmultiselect = {}; }


GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(opt_data.name) + '</div><div><span class=\'ghx-sprint-multiselect-meta\'> ' + ((opt_data.boardName) ? GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName(opt_data) : GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName(opt_data)) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml('Active') : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future') : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml('Closed') : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Active \xb7 {0}',opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format('Future \xb7 {0}',opt_data.boardName)) : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format('Closed \xb7 {0}',opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderTooltip = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Started on {0}',opt_data.date)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future') : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format('Closed on {0}',opt_data.date)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderTooltip.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/SprintSuggestHandler.js' */
function prepareSelectedDescriptors(e){_.each(e,function(e){var t=JSON.parse(e.properties.meta);t.date=moment(t.date).format("LL"),e.properties.title=GH.tpl.customfields.sprintmultiselect.renderTooltip(t),e.properties.html=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(t)})}define("includes/js/field/sprint-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){return e.extend({formatSuggestions:function(e,t){var r=this.model.getDisplayableSelectedDescriptors();prepareSelectedDescriptors(r);var s=function(e){var t;for(t in r)if(r[t].properties.value===e.properties.value.toString())return!1;return!0};return e=_.map(e,function(e){var t=_.filter(e.properties.items,s);return e.properties.items=t,e}),this._super(e,t)}})}),AJS.namespace("GH.SprintSuggestHandler",null,require("includes/js/field/sprint-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicLinkMultiselect.js' */
require(["require"],function(e){function t(e){return 0!==e.indexOf("project")?"":i(e).trim()}function i(e){function t(e){var t=e.match(/\bproject\s*=\s*(\S+)/i);return t?t[1]:null}function i(e){var t=e.match(/\bproject\s+in\s+\((.*?)\)/i);return t?t[1]:null}return t(e)||i(e)}var n=e("jquery"),r=e("underscore"),s=e("jira/util/events/types");JIRA.bind(s.NEW_CONTENT_ADDED,function(e,i){var s=n("#jql",this).val();i.find(".js-epiclink-checkboxmultiselect").each(function(){var e=new AJS.CheckboxMultiSelect({element:this,matchingStrategy:"(^|.*?(.*))({0})(.*)",maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/epics",error:function(){e._setSuggestions([])},data:{searchQuery:"",projectKey:t(s),filterEpicsByGivenProjects:!0,maxResults:100},query:!0,minQueryLength:0,formatResponse:function(e){var t=[];if(t.push(new AJS.GroupDescriptor({weight:1,items:[new AJS.ItemDescriptor({highlighted:!0,label:"No Epic Link",value:"EMPTY",title:"EMPTY"})]})),!e||!e.epicLists||0===e.total)return t;for(var i=0;i<e.epicLists.length;i++){var n=e.epicLists[i],s=n.epicNames,c=new AJS.GroupDescriptor({label:n.listDescriptor,weight:i});s.length>0&&(r.each(s,function(e){c.addItem(new AJS.ItemDescriptor({highlighted:!0,label:e.name+" - ("+e.key+")",value:e.key,title:e.key}))}),t.push(c))}return t}},suggestionsHandler:GH.EpicLinkSuggestHandler})})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/field/EpicLinkSuggestHandler.js' */
define("includes/js/field/epic-link-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){return e.extend({formatSuggestions:function(e,r){var i=this.model.getDisplayableSelectedDescriptors(),t=function(e){var r;for(r in i)if(i[r].properties.value===e.properties.value.toString())return!1;return!0};return e=_.map(e,function(e){var r=_.filter(e.properties.items,t);return e.properties.items=r,e}),this._super(e,r)}})}),AJS.namespace("GH.EpicLinkSuggestHandler",null,require("includes/js/field/epic-link-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:project-template-resources', location = '/projecttemplates/soy/ProjectTemplates.soy' */
// This file was automatically generated from ProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.projecttemplates.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.projecttemplates == 'undefined') { GH.tpl.projecttemplates = {}; }


GH.tpl.projecttemplates.simpleProjectInfoPage = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.simpleInfoDialog({description: 'The setup\x27s simple, which means your team can be up-and-running faster.', workflowScreenshotClass: 'simple-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.simpleProjectInfoPage.soyTemplateName = 'GH.tpl.projecttemplates.simpleProjectInfoPage';
}


GH.tpl.projecttemplates.agilityProjectInfoPage = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml('The setup\x27s simple, which means your team can be up-and-running faster.') + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li></ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('workflow') + '</h6><div class="workflow simple-workflow-screenshot"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.agilityProjectInfoPage.soyTemplateName = 'GH.tpl.projecttemplates.agilityProjectInfoPage';
}


GH.tpl.projecttemplates.kanbanInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to optimize the flow of work in your development project. Add constraints to work-in-progress, analyze how long it takes to complete issues, find bottlenecks in your process, and more. This project includes a Kanban board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'kanban-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.kanbanInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.kanbanInfoPageJira7';
}


GH.tpl.projecttemplates.scrumInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to manage your Agile development work. Create a backlog, organise work into sprints, check progress using reports, and more. This project includes a Scrum board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'scrum-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.scrumInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.scrumInfoPageJira7';
}


GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this template to track development tasks and bugs. It provides you with a basic workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon improvement"></span><span class="issuetype-name">' + soy.$$escapeHtml('Improvement') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon newfeature"></span><span class="issuetype-name">' + soy.$$escapeHtml('New Feature') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'basic-development-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7';
}


GH.tpl.projecttemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon bug"></span><span class="issuetype-name">' + soy.$$escapeHtml('Bug') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon task"></span><span class="issuetype-name">' + soy.$$escapeHtml('Task') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon subtask"></span><span class="issuetype-name">' + soy.$$escapeHtml('Sub-task') + '</span></span></li>' + soy.$$filterNoAutoescape(opt_data.extraIssueTypes) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.workflowScreenshotClass) + '"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.templateInfoDialog.soyTemplateName = 'GH.tpl.projecttemplates.templateInfoDialog';
}


GH.tpl.projecttemplates.simpleInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon task"></span><span class="issuetype-name">' + soy.$$escapeHtml('Task') + '</span></span></li></ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.workflowScreenshotClass) + '"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.simpleInfoDialog.soyTemplateName = 'GH.tpl.projecttemplates.simpleInfoDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalkeyboardshortcuts', location = 'includes/js/gh-globalkeyboardshortcuts.js' */
!function(e){e.namespace("gh.app.globalkeyboardshortcuts");var s=gh.app.globalkeyboardshortcuts;s.findSelectedIssueId=function(){var e;return jira&&jira.app&&jira.app.issuenavigator&&jira.app.issuenavigator.getSelectedIssueId&&(e=jira.app.issuenavigator.getSelectedIssueId()),!e&&jira&&jira.app&&jira.app.issue&&jira.app.issue.getIssueId&&(e=jira.app.issue.getIssueId()),e},s.goToAgile=function(){var e=(contextPath?contextPath:"")+"/secure/RapidBoard.jspa";window.location.href=e},s.followLink=function(s){var t=e(s);t.length>0&&("a"===t[0].nodeName.toLowerCase()||"link"===t[0].nodeName.toLowerCase())&&(t.click(),window.location.href=t.attr("href"))},s.sendToTop=function(e,t,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToTop)return GH.Shortcut.sendToTop(e,o),void s.closeDialogAndPopMessage();if("Action"===e){var a=t||s.findSelectedIssueId();contextPath||(contextPath=""),JIRA.SmartAjax.makeRequest({type:"post",contentType:"application/json",url:contextPath+"/rest/greenhopper/1.0/rank/global/first",data:JSON.stringify({issueId:a}),success:s.handleRankSuccess}),AJS.$(AJS).trigger("gh.global.rankissues",{action:"rankToTop"+(e?e:""),count:1})}},s.sendToBottom=function(e,t,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToBottom)return GH.Shortcut.sendToBottom(e,o),void s.closeDialogAndPopMessage();if("Action"===e){var a=t||s.findSelectedIssueId();contextPath||(contextPath=""),JIRA.SmartAjax.makeRequest({type:"post",contentType:"application/json",url:contextPath+"/rest/greenhopper/1.0/rank/global/last",data:JSON.stringify({issueId:a}),success:s.handleRankSuccess}),AJS.$(AJS).trigger("gh.global.rankissues",{action:"rankToBottom"+(e?e:""),count:1})}},s.closeDialogAndPopMessage=function(){JIRA.IssueNavigator.isNavigator()?AJS.reloadViaWindowLocation():(JIRA.Dialog&&JIRA.Dialog.current&&JIRA.Dialog.current.hide(),window.GH?(GH.Message&&GH.Message.showIssueMessage?GH.Message.showIssueMessage():GH.RapidBoard&&GH.Notification&&GH.Notification.showIssueMessage&&GH.Notification.showIssueMessage(),window.Boards&&Boards.refreshAll()):JIRA.IssueNavigator&&JIRA.IssueNavigator.Shortcuts&&JIRA.IssueNavigator.Shortcuts.flashIssueRow&&JIRA.IssueNavigator.Shortcuts.flashIssueRow())},s.handleRankSuccess=function(e,t,o){s.storeSuccessMessage(e.issueId,e.issueKey,"thanks_issue_updated"),s.closeDialogAndPopMessage()},s.storeSuccessMessage=function(e,s,t){var o=JIRA.SessionStorage;o.setItem("selectedIssueId",e),o.setItem("selectedIssueKey",s),o.setItem("selectedIssueMsg",t)},AJS.$(function(){AJS.$(document).delegate(".issueaction-greenhopper-rank-top-operation","click",function(e){e.preventDefault();var t=AJS.$(this).attr("data-issueid");s.sendToTop("Action",t)}),AJS.$(document).delegate(".issueaction-greenhopper-rank-bottom-operation","click",function(e){e.preventDefault();var t=AJS.$(this).attr("data-issueid");s.sendToBottom("Action",t)})})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.plugin.ext.bamboo:bamboo-soy-resources', location = 'templates/plugins/bamboo/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.components.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.components == 'undefined') { bamboo.components = {}; }


bamboo.components.pageHeader = function(opt_data, opt_ignored) {
  return '' + aui.page.pageHeader({content: '' + ((opt_data.headerImageContent) ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + aui.page.pageHeaderMain({content: opt_data.headerMainContent}) + ((opt_data.headerActionsContent) ? aui.page.pageHeaderActions({content: opt_data.headerActionsContent}) : '')});
};
if (goog.DEBUG) {
  bamboo.components.pageHeader.soyTemplateName = 'bamboo.components.pageHeader';
}


bamboo.components.icon = function(opt_data, opt_ignored) {
  return '<span class="bamboo-icon bamboo-icon-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.components.icon.soyTemplateName = 'bamboo.components.icon';
}


bamboo.components.buildDetail = function(opt_data, opt_ignored) {
  return '<dl><dt class="' + soy.$$escapeHtml(opt_data.keyClass) + '">' + soy.$$escapeHtml(opt_data.key) + '</dt><dd>' + soy.$$filterNoAutoescape(opt_data.value) + '</dd></dl>';
};
if (goog.DEBUG) {
  bamboo.components.buildDetail.soyTemplateName = 'bamboo.components.buildDetail';
}


bamboo.components.artifacts = function(opt_data, opt_ignored) {
  var output = '<ul id="shared-artifacts">';
  var artifactList42 = opt_data.artifacts;
  var artifactListLen42 = artifactList42.length;
  for (var artifactIndex42 = 0; artifactIndex42 < artifactListLen42; artifactIndex42++) {
    var artifactData42 = artifactList42[artifactIndex42];
    output += bamboo.components.artifactItem(soy.$$augmentMap(artifactData42, {id: artifactData42.name, url: artifactData42.link.href}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.artifacts.soyTemplateName = 'bamboo.components.artifacts';
}


bamboo.components.artifactItem = function(opt_data, opt_ignored) {
  return '<li>' + bamboo.components.icon({type: 'artifact-shared'}) + ' <a class="artifact-link" id="artifact-' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a><span class="filesize">(' + soy.$$escapeHtml(opt_data.prettySizeDescription) + ')</span></li>';
};
if (goog.DEBUG) {
  bamboo.components.artifactItem.soyTemplateName = 'bamboo.components.artifactItem';
}


bamboo.components.labels = function(opt_data, opt_ignored) {
  var output = '<ul class="labels">';
  var labelList65 = opt_data.labels;
  var labelListLen65 = labelList65.length;
  for (var labelIndex65 = 0; labelIndex65 < labelListLen65; labelIndex65++) {
    var labelData65 = labelList65[labelIndex65];
    output += bamboo.components.labelItem(soy.$$augmentMap(labelData65, {url: opt_data.baseBambooUrl + '/browse/label/' + labelData65.name}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.labels.soyTemplateName = 'bamboo.components.labels';
}


bamboo.components.labelItem = function(opt_data, opt_ignored) {
  return '<li><a class="lozenge" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '"><span>' + soy.$$escapeHtml(opt_data.name) + '</span></a></li>';
};
if (goog.DEBUG) {
  bamboo.components.labelItem.soyTemplateName = 'bamboo.components.labelItem';
}


bamboo.components.errorResponseMessage = function(opt_data, opt_ignored) {
  return '' + bamboo.components.auiWarning({body: '' + ((opt_data.errorMessage.messageBody) ? '<p>' + soy.$$escapeHtml(opt_data.errorMessage.messageBody) + '</p>' : (opt_data.errorMessage.oauthCallback) ? '<p><a href="' + soy.$$filterNoAutoescape(opt_data.errorMessage.oauthCallback) + '&amp;redirectUrl=' + soy.$$filterNoAutoescape(opt_data.oAuthDanceReturnUrl) + '">' + soy.$$escapeHtml('bamboo.loginAndApprove') + '</a></p>' : '<p>' + soy.$$escapeHtml(opt_data.errorMessage.message) + '</p>')});
};
if (goog.DEBUG) {
  bamboo.components.errorResponseMessage.soyTemplateName = 'bamboo.components.errorResponseMessage';
}


bamboo.components.auiWarning = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning"><span class="aui-icon icon-warning"></span>' + soy.$$filterNoAutoescape(opt_data.body) + '</div>';
};
if (goog.DEBUG) {
  bamboo.components.auiWarning.soyTemplateName = 'bamboo.components.auiWarning';
}
;
;
/* module-key = 'com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources', location = 'com/atlassian/administration/quicksearch/jira/js/adminQuickNav.js' */
require(["jquery","underscore","jira/ajs/ajax/smart-ajax","jira/shifter","wrm/context-path"],function(e,n,t,r,i){r.register(function(){function r(e){return{label:e.label,value:e.linkUrl,keywords:e.aliases}}function a(e){return n.map(e.items,r).concat(n.map(e.sections,a))}function u(e){return n.flatten(a(e))}var o=e.Deferred();return t.makeRequest({dataType:"json",url:i()+"/rest/adminquicksearch/latest/links/default"}).pipe(u).done(function(e){o.resolve(e)}).fail(function(){o.reject()}),{id:"admin",name:"Administration",weight:500,getSuggestions:function(){return o},onSelection:function(n){return window.location=n,e.Deferred()}}})});;
;
/* module-key = 'com.atlassian.jpo:jpo-wr-custom-field-scripts-parent', location = '/jpo2/scripts-plugin/field-parent.min.js' */
(function(){require(["com/atlassian/rm/common/customfields/common"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;if(j=window.JIRA,b=AJS.$,i=AJS.ItemDescriptor,d=AJS.GroupDescriptor,p=AJS.contextPath,w=AJS.escapeHTML,k=100,l=".jpo-parent-selection-dropdown",f=".jpo-initial-issue-type-name",e=".jpo-initial-epic-link",g=".jpo-initial-issue-project",c=".jpo-client-error-message-container",h="#issuetype-field",m=p()+"/rest/jpo/1.0/parent/suggest",B="",E=void 0,v=void 0,F=void 0,z=function(a){var b,c,d,e;for(b={},d=0,e=a.length;d<e;d++)c=a[d],b[c.id]=c;return b},I=function(){return B=b(f).val()},D=function(){return b(h).change(function(a){var b;if(b=a.target.value,null!=b&&b.length>0)return B=b})},A=function(){return null!=v&&v.length>0},H=function(){return v=b(e).val()},J=function(){return F=b(g).val()},C=function(a){return a.$field.change(function(a){return v=a.target.value,o()})},o=function(){return A()?L("Cannot use parent link when epic link is set."):y()},K=function(a){if(null!=E)return E.$container.toggle(a)},L=function(a){return K(!1),b(c).html("<span class='error'>"+w(a)+"</span>")},y=function(){return K(!0),b(c).empty()},x=function(a){var b,c,e,f,g;return e=a.issues,c=a.issueTypes,g=a.projects,b=new d({weight:0,showLabel:!1,items:[q()]}),f=new d({weight:1,items:u({issues:e,issueTypes:c,projects:g})}),[b,f]},t=function(a){var b,c,d,e,f,g,h;return d=a.issue,g=a.issueType,h=a.project,e=d.issueKey,f=d.issueSummary,b=h.key+"-"+e,c=b+" "+f,new i({value:b,fieldText:c,label:c,icon:g.iconUrl})},u=function(b){var c,d,e,f,g,h,i;return f=b.issues,d=b.issueTypes,h=b.projects,e=z(d),i=z(h),g=function(){var a,b,d;for(d=[],a=0,b=f.length;a<b;a++)c=f[a],d.push(t({issue:c,issueType:e[c.issueTypeId],project:i[c.projectId]}));return d}(),a.addNoMatchesItemIfEmpty({items:g}),g},q=function(){return a.createInfoMessageListItem({text:"To set an epic as the parent, use the epic link instead",additionalStyles:"jpo-dropdown-item-italic"})},r=function(a){var b;return b=a.query,JSON.stringify({query:b,issueTypeName:B,maxResults:k,projectId:F})},n=a.createDropdownClass({ajaxOptions:a.createDropdownAjaxOptions({url:m,createQueryData:r,formatResponse:x}),getNoMatchingValueMessage:function(a){return AJS.format("No valid parent matching \'\'{0}\'\' was found.",a)}}),s=function(a){return b(l,a).each(function(){return E=new n({element:b(this)}),o()})},a.bindInitializationCallback(function(a){var b;return b=a.context,H(),I(),J(),D(),s(b)}),null!=(null!=(G=j.EpicPicker)?G.READY_EVENT:void 0))return j.bind(j.EpicPicker.READY_EVENT,function(a,b){return C(b)})})}).call(this);;
;
/* module-key = 'com.atlassian.jira.ext.calendar:browse-project-tip', location = 'com/atlassian/jira/ext/calendar/resources/js/BrowseProjectTip.js' */
require(["jira/util/formatter","jira/util/events","jira/util/events/types","wrm/data","jquery"],function(e,t,a,n,i){AJS.toInit(function(){var r=n.claim("com.atlassian.jira.ext.calendar:tipDataProvider.tip").suppressTip;if(!r){var s="browse-project-calendar-info",o=function(t){if(t.length){var a=i("<div/>");AJS.messages.info(a,{body:e.format("This calendar shows when issues are due to be completed. This is set by the {0} field for an issue.","Due date"),closeable:!0}),a.find(".aui-message").attr("id",s),t.prepend(a)}};t.bind(a.NEW_CONTENT_ADDED,function(e,t,a){var n;n="project-tab"==t.attr("id")?i(".issues-calendar-container",t):i("#project-tab .issues-calendar-container",t),o(n)}),o(i("#project-tab .issues-calendar-container")),AJS.bind("messageClose",function(e,t){t.attr("id")==s&&(AJS.EventQueue&&AJS.EventQueue.push({name:"browseprojectcalendarinfo.closebutton"}),i.ajax({data:{tipKey:"browseProjectCalendarTab",atl_token:atl_token()},type:"POST",url:contextPath+"/rest/calendar-plugin/1.0/suppressedTips"}))})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:sensors', location = 'sensors.js' */
require(["internal/browser-metrics","jira/util/events","jira/featureflags/feature-manager","jira/featureflags/simplified-ux-feature-manager"],function(e,i,a,o){var d,t={},r={},l={};t=function(e,i,a){function o(){function e(e){return o.hasOwnProperty(e)?o[e]:null}var o={"browse_link-content":"jira.header.menu.projects","find_link-content":"jira.header.menu.issues","greenhopper_menu-content":"jira.header.menu.agile","home_link-content":"jira.header.menu.dashboards","plugins-jira-webitem-main-content":"jira.header.menu.portfolio","servicedesk-section-content":"jira.header.menu.service-desk","system-admin-menu-content":"jira.header.menu.admin","system-help-menu-content":"jira.header.menu.help","user-options-content":"jira.header.menu.profile"};i.bind("aui-dropdown2-show-before",function(i){var o=i.target,d=e(o&&o.id);d&&a.start({key:d,isInitial:!1,threshold:250})}),i.bind("aui-dropdown2-show-after",function(i){var o=i.target,d=e(o&&o.id);d&&a.end({key:d})})}return e.applicationMenusSensorInit=o,e}(t,i,e),r=function(e){function i(e){var i;if(a.hasOwnProperty(e))return e;for(i=0;i<o.length;i++)if(e.match(o[i].pattern))return o[i].dialogId;return null}e.safeDialogId=i;var a=["about-dialog","add-basicuser-dialog","add-developer-dialog","add-field-configuration-dialog","add-field-configuration-scheme-dialog","add-field-dialog","add-field-screen-dialog","add-field-screen-scheme-dialog","add-incoming-mail-handler-dialog","add-issue-type-dialog","add-issue-type-field-configuration-association-dialog","add-issue-type-screen-scheme-configuration-association-dialog","add-issue-type-screen-scheme-dialog","add-new-issue-type-to-scheme-dialog","add-screen-scheme-item-dialog","add-subtask-type-dialog","add-workflow-dialog","add_workflowscheme-dialog","assign-dialog","assign-issue-types-dialog","assign-to-me-link-handler","attach-file-dialog","attach-screenshot-dialog","auditing-settings-dialog","clone-issue-dialog","comment-add-dialog","configure_wallboard_dialog","confluence-page-search-dialog","copy_classic default workflow-dialog","copy-filter-dialog","copy_jira-dialog","create-issue-dialog","create-issue-dialog.issueType","create-issue-dialog.projectId","create-request-dialog","create-service-desk-dialog","create-status-dialog","create-story-dialog","create-story-dialog.issueType","create-story-dialog.projectId","create-subtask-dialog","create-subtask-dialog.issueType","create-team-dialog","create_user-dialog","credits-dialog","delete-attachment-dialog","delete-comment-dialog","delete-dshboard","delete-filter-dialog","delete-issue-dialog","delete-issue-link-dialog","delete-log-work-dialog","delete-metric","delete-queue","delete-status-dialog","deleteuser_link-dialog","devstatus-branch-detail-dialog","devstatus-build-detail-dialog","devstatus-commit-detail-dialog","devstatus-cta-dialog","devstatus-deployment-detail-dialog","devstatus-pullrequest-detail-dialog","devstatus-review-detail-dialog","discard-draft-dialog","discard_draft_workflow-dialog","edit-attachments-dialog","edit-comment","editgroups_admin-dialog","editgroups_link-dialog","editgroups_sysadmin-dialog","edit-issue-dialog","edit-labels-dialog","edit-log-work-dialog","edit-status-dialog","edituser_link_admin-dialog","edit-workflow-dialog","gh-rapidboard-dialog","inline-issue-create-dialog","invite_user-dialog","issue-actions-dialog","issue-tab-error-dialog","jim-create-project-dialog","keyboard-shortcuts-dialog","link-issue-dialog","log-work-dialog","manage-attachment-dialog","metric-pre-save-dialog","modal-field-view","permission-helper-dialog","project-avatar-cropper","project-avatar-picker","project-config-details-project-category-dialog","project-config-project-edit-dialog","project-config-project-edit-lead-and-default-assignee-dialog","project-email-dialog","publish_draft_workflow-dialog","queue-dirty-edits","QuickCreateIssue.error","QuickCreateIssue.success","QuickCreateSubtask.error","QuickCreateSubtask.success","QuickEdit.error","QuickEdit.success","remote-jira-search-dialog","rename-filter-dialog","report-dirty-edits","save-filter-dialog","sd-add-default-value","sd-add-remove-agent-dialog","sd-remove-field-dialog","server-error-dialog","report-delete-confirm","user-avatar-picker","user-defaults-edit-dialog","versionsMergeDialog","view-workflow-dialog","view-workflow-dialog-project-admin","view-workflow-dialog-workflow-schemes","wait-migrate-dialog","whereismycf-dialog","workflow-text-view"].reduce(function(e,i){return e[i]=!0,e},{}),o=[{dialogId:"component-delete-dialog",pattern:/^component-\d+-delete-dialog$/i},{dialogId:"version-delete-dialog",pattern:/^version-\d+-delete-dialog$/i},{dialogId:"workflow-transition-dialog",pattern:/^workflow-transition-\d+-dialog$/i}];return e}(r),l=function(e,i,a,o){function d(){i.bind("beforeShow",function(e,i){if("string"==typeof i){var d=(0,o.safeDialogId)(i);d&&a.start({key:"jira.dialog.open."+d,isInitial:!1,threshold:1e3})}}),i.bind("dialogContentReady",function(e,i){if("string"==typeof i.options.id){var d=(0,o.safeDialogId)(i.options.id);d&&a.end({key:"jira.dialog.open."+d})}})}return e.dialogsSensorInit=d,e}(l,i,e,r),d=function(e,i){(0,e.applicationMenusSensorInit)(),(0,i.dialogsSensorInit)()}(t,l)});;
;
/* module-key = 'com.atlassian.plugin.jslibs:keymaster-1.6.2', location = 'libs/keymaster/1.6.2/keymaster-1.6.2.js' */
(function(e){define("atlassian/libs/keymaster-1.6.2",function(){var j={};e(j);return"undefined"!==typeof module?module.exports.noConflict():j.key.noConflict()})})(function(e){function j(a,b){for(var d=a.length;d--;)if(a[d]===b)return d;return-1}function v(a){var b,d,c,e,o,r;b=a.keyCode;-1==j(l,b)&&l.push(b);if(93==b||224==b)b=91;if(b in f)for(c in f[b]=!0,k)k[c]==b&&(m[c]=!0);else{for(g in f)f[g]=a[w[g]];if(m.filter.call(this,a)&&b in h){r=p();for(e=0;e<h[b].length;e++)if(d=h[b][e],d.scope==r||"all"==
d.scope){o=0<d.mods.length;for(c in f)if(!f[c]&&-1<j(d.mods,+c)||f[c]&&-1==j(d.mods,+c))o=!1;if((0==d.mods.length&&!f[16]&&!f[18]&&!f[17]&&!f[91]||o)&&!1===d.method(a,d))a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0)}}}}function m(a,b,d){var c,e;c=s(a);void 0===d&&(d=b,b="all");for(var f=0;f<c.length;f++)e=[],a=c[f].split("+"),1<a.length&&(e=t(a),a=[a[a.length-1]]),a=a[0],a=n[a]||a.toUpperCase().charCodeAt(0),a in h||
(h[a]=[]),h[a].push({shortcut:c[f],scope:b,method:d,key:c[f],mods:e})}function p(){return u||"all"}function s(a){a=a.replace(/\s/g,"");a=a.split(",");""==a[a.length-1]&&(a[a.length-2]+=",");return a}function t(a){for(var a=a.slice(0,a.length-1),b=0;b<a.length;b++)a[b]=k[a[b]];return a}function q(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent&&a.attachEvent("on"+b,function(){d(window.event)})}var g,h={},f={16:!1,18:!1,17:!1,91:!1},u="all",k={"\u21e7":16,shift:16,"\u2325":18,alt:18,
option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},n={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=[];for(g=1;20>g;g++)n["f"+g]=111+g;var w={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(g in k)m[g]=!1;q(document,"keydown",function(a){v(a)});q(document,"keyup",function(a){var a=
a.keyCode,b,d=j(l,a);0<=d&&l.splice(d,1);if(93==a||224==a)a=91;if(a in f)for(b in f[a]=!1,k)k[b]==a&&(m[b]=!1)});q(window,"focus",function(){for(g in f)f[g]=!1;for(g in k)m[g]=!1});var x=e.key;e.key=m;e.key.setScope=function(a){u=a||"all"};e.key.getScope=p;e.key.deleteScope=function(a){var b,d,c;for(b in h){d=h[b];for(c=0;c<d.length;)d[c].scope===a?d.splice(c,1):c++}};e.key.filter=function(a){a=(a.target||a.srcElement).tagName;return!("INPUT"==a||"SELECT"==a||"TEXTAREA"==a)};e.key.isPressed=function(a){"string"==
typeof a&&(a=n[a]||a.toUpperCase().charCodeAt(0));return-1!=j(l,a)};e.key.getPressedKeyCodes=function(){return l.slice(0)};e.key.noConflict=function(){var a=e.key;e.key=x;return a};e.key.unbind=function(a,b){var d,c,e=[],f,g;d=s(a);for(g=0;g<d.length;g++){c=d[g].split("+");1<c.length&&(e=t(c),a=c[c.length-1]);a=n[a]||a.toUpperCase().charCodeAt(0);void 0===b&&(b=p());if(!h[a])break;for(f in h[a]){c=h[a][f];var i;if(i=c.scope===b)a:if(c=c.mods,c.length!=e.length)i=!1;else{for(i=0;i<c.length;i++)if(c[i]!==
e[i]){i=!1;break a}i=!0}i&&(h[a][f]={})}}};"undefined"!==typeof module&&(module.exports=e.key)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachments-api', location = 'js/AttachmentsAPI.js' */
define("jira/attachments/api",["dndattachment/upload/handler"],function(n){return{doUpload:function(a){return n.doUpload(a)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'js/wrappers/aui.js' */
define("wiki-edit/aui",function(){return AJS});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'js/wrappers/jira.js' */
define("wiki-edit/JIRA",function(){return JIRA});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'js/wrappers/keymaster.js' */
define("wiki-edit/keymaster",["wiki-edit/aui","atlassian/libs/keymaster-1.6.2"],function(e,i){return e.Meta.get("keyboard-shortcuts-enabled")===!1?function(){}:i});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/templates/wiki-editor.soy' */
// This file was automatically generated from wiki-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Plugins.WikiEditor.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Plugins == 'undefined') { JIRA.Templates.Plugins = {}; }
if (typeof JIRA.Templates.Plugins.WikiEditor == 'undefined') { JIRA.Templates.Plugins.WikiEditor = {}; }


JIRA.Templates.Plugins.WikiEditor.renderEditor = function(opt_data, opt_ignored) {
  var output = '<div id="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="paragraph" title="' + soy.$$escapeHtml('Paragraph') + '">' + soy.$$escapeHtml('Paragraph') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h1" data-operation="h1" title="' + soy.$$escapeHtml('Heading 1') + '">' + soy.$$escapeHtml('Heading 1') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h2" data-operation="h2" title="' + soy.$$escapeHtml('Heading 2') + '">' + soy.$$escapeHtml('Heading 2') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h3" data-operation="h3" title="' + soy.$$escapeHtml('Heading 3') + '">' + soy.$$escapeHtml('Heading 3') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h4" data-operation="h4" title="' + soy.$$escapeHtml('Heading 4') + '">' + soy.$$escapeHtml('Heading 4') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h5" data-operation="h5" title="' + soy.$$escapeHtml('Heading 5') + '">' + soy.$$escapeHtml('Heading 5') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h6" data-operation="h6" title="' + soy.$$escapeHtml('Heading 6') + '">' + soy.$$escapeHtml('Heading 6') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-monospace" data-operation="monospace" title="' + soy.$$escapeHtml('Preformatted') + '">' + soy.$$escapeHtml('Preformatted') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="paragraph-quote" title="' + soy.$$escapeHtml('Paragraph quote') + '">' + soy.$$escapeHtml('Paragraph quote') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="block-quote" title="' + soy.$$escapeHtml('Block quote') + '">' + soy.$$escapeHtml('Block quote') + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="delete" data-shortcut="ctrl+shift+s, command+shift+s" title="' + soy.$$escapeHtml('Strikethrough') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+S)">' + soy.$$escapeHtml('Strikethrough') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="superscript">' + soy.$$escapeHtml('Superscript') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="subscript">' + soy.$$escapeHtml('Subscript') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="cite">' + soy.$$escapeHtml('Citation') + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-link"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="link" data-shortcut="ctrl+k, command+k" title="' + soy.$$escapeHtml('External link') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)">' + soy.$$escapeHtml('External link') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-mail">' + soy.$$escapeHtml('Mail link') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-anchor">' + soy.$$escapeHtml('Anchor link') + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-attachment"><div class="aui-dropdown2-section wiki-edit-insert-attachment"><ul class="aui-list-truncate"><li><a href="#"></a></li></ul></div><div class="aui-dropdown2-section wiki-edit-browse-image"><ul class="aui-list-truncate"><li><a href="#" class="wiki-attachment-browse"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>&nbsp;&nbsp;' + soy.$$escapeHtml('Browse') + '</a></li></ul></div></div><div id="wiki-edit-color-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-color-picker">';
  var colors__soy78 = ['333333', '707070', 'cccccc', '205081', '59afe1', '14892c', '8eb021', 'd04437', 'f79232', 'f6c342', '654982', 'f691b2'];
  output += '<div class="aui-dropdown2-section"><ul>';
  var colorList80 = colors__soy78;
  var colorListLen80 = colorList80.length;
  for (var colorIndex80 = 0; colorIndex80 < colorListLen80; colorIndex80++) {
    var colorData80 = colorList80[colorIndex80];
    output += '<li><a href="#" style="background-color: #' + soy.$$escapeHtml(colorData80) + '" data-operation="color" data-color="#' + soy.$$escapeHtml(colorData80) + '">&nbsp;</a></li>';
  }
  output += '</ul></div></div><div id="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-icon-picker"><div class="aui-dropdown2-section"><ul><li><a href="#" class="wiki-edit-operation" title=":)" data-operation=":)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/smile.gif" alt="' + soy.$$escapeHtml('smile') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":(" data-operation=":("><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/sad.gif" alt="' + soy.$$escapeHtml('sad') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":P" data-operation=":P"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/tongue.gif" alt="' + soy.$$escapeHtml('tongue') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":D" data-operation=":D"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/biggrin.gif" alt="' + soy.$$escapeHtml('biggrin') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=";)" data-operation=";)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/wink.gif" alt="' + soy.$$escapeHtml('wink') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(y)" data-operation="(y)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/thumbs_up.gif" alt="' + soy.$$escapeHtml('thumbs up') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(n)" data-operation="(n)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/thumbs_down.gif" alt="' + soy.$$escapeHtml('thumbs down') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(i)" data-operation="(i)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/information.gif" alt="' + soy.$$escapeHtml('information') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(/)" data-operation="(/)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/check.gif" alt="' + soy.$$escapeHtml('check') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(x)" data-operation="(x)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/error.gif" alt="' + soy.$$escapeHtml('error') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(!)" data-operation="(!)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/warning.gif" alt="' + soy.$$escapeHtml('warning') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(+)" data-operation="(+)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/add.gif" alt="' + soy.$$escapeHtml('add') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(-)" data-operation="(-)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/forbidden.gif" alt="' + soy.$$escapeHtml('forbidden') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(?)" data-operation="(?)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/help_16.gif" alt="' + soy.$$escapeHtml('help') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(on)" data-operation="(on)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/lightbulb_on.gif" alt="' + soy.$$escapeHtml('lightbulb on') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(off)" data-operation="(off)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/lightbulb.gif" alt="' + soy.$$escapeHtml('lightbulb') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*)" data-operation="(*)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_yellow.gif" alt="' + soy.$$escapeHtml('star yellow') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*r)" data-operation="(*r)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_red.gif" alt="' + soy.$$escapeHtml('star red') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*g)" data-operation="(*g)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_green.gif" alt="' + soy.$$escapeHtml('star green') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*b)" data-operation="(*b)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_blue.gif" alt="' + soy.$$escapeHtml('star blue') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*y)" data-operation="(*y)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_yellow.gif" alt="' + soy.$$escapeHtml('star yellow') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flag)" data-operation="(flag)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/flag.gif" alt="' + soy.$$escapeHtml('flag') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flagoff)" data-operation="(flagoff)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/flag_grey.gif" alt="' + soy.$$escapeHtml('flag off') + '" /></a></li></ul></div></div><div id="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="mention">' + soy.$$escapeHtml('User mention') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="table">' + soy.$$escapeHtml('Table') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="code">' + soy.$$escapeHtml('Code') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="noformat">' + soy.$$escapeHtml('Preformatted') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="panel">' + soy.$$escapeHtml('Panel') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="hr">' + soy.$$escapeHtml('Horizontal ruler') + '</a></li><li class="wiki-edit-speech-item hidden"><a href="#" class="wiki-edit-operation" data-operation="speech">' + soy.$$escapeHtml('Speech recognition') + '</a></li></ul></div></div><div class="wiki-edit-toolbar" id="wiki-edit-' + soy.$$escapeHtml(opt_data.editorId) + '"><div class="aui-toolbar2"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-style-picker-trigger" aria-owns="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '">' + soy.$$escapeHtml('Style') + '</a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bold" data-shortcut="ctrl+b, command+b" title="' + soy.$$escapeHtml('Bold') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-bold">' + soy.$$escapeHtml('Bold') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="italic" data-shortcut="ctrl+i, command+i" title="' + soy.$$escapeHtml('Italic') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+I)"><span class="aui-icon aui-icon-small aui-iconfont-editor-italic">' + soy.$$escapeHtml('Italic') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="underline" data-shortcut="ctrl+u, command+u" title="' + soy.$$escapeHtml('Underline') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+U)"><span class="aui-icon aui-icon-small aui-iconfont-editor-underline">' + soy.$$escapeHtml('Underline') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation wiki-edit-operation-color" data-operation="color" data-color="red" title="' + soy.$$escapeHtml('Text color') + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-color">' + soy.$$escapeHtml('Text color') + '</span><span class="wiki-edit-color-indicator"></span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-color-picker-trigger" data-operation="color-parameter" aria-owns="wiki-edit-color-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" title="' + soy.$$escapeHtml('More colors') + '"><span>' + soy.$$escapeHtml('More colors') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-more-picker-trigger" aria-owns="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('More') + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-styles">' + soy.$$escapeHtml('More') + '</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-link-picker-trigger" aria-owns="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('Link') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)"><span class="aui-icon aui-icon-small aui-iconfont-link">' + soy.$$escapeHtml('Link') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-attachment-picker-trigger" aria-owns="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('Attachment') + '"><span class="aui-icon aui-icon-small aui-iconfont-file-generic">' + soy.$$escapeHtml('Attachment') + '</span></a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bullet-list" data-shortcut="ctrl+shift+b, command+shift+b" title="' + soy.$$escapeHtml('Bullet list') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-bullet">' + soy.$$escapeHtml('Bullet list') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="numbered-list" data-shortcut="ctrl+shift+n, command+shift+n" title="' + soy.$$escapeHtml('Numbered list') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+N)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-number">' + soy.$$escapeHtml('Numbered list') + '</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-icon-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('Icons') + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-emoticon">' + soy.$$escapeHtml('Icons') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-other-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('Other') + '"><span class="aui-icon aui-icon-small aui-iconfont-add">' + soy.$$escapeHtml('Other') + '</span></a></div><div class="aui-buttons wiki-edit-toolbar-last"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-visible-toggle wiki-edit-tooltip" title="' + soy.$$escapeHtml('Toggle visibility') + '"><span class="aui-icon icon-toolbartoggle">Lock / Unlock</span></a></div></div></div><!-- .aui-toolbar-inner --></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.renderEditor.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.renderEditor';
}


JIRA.Templates.Plugins.WikiEditor.renderListItem = function(opt_data, opt_ignored) {
  return '<li><a href="#" ' + soy.$$escapeHtml(opt_data.attachmentType ? 'data-attachment-type=' + opt_data.attachmentType : '') + '><span class="wiki-edit-attachment-type-icon aui-icon aui-icon-small ' + soy.$$escapeHtml(((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.cssClass) != null ? ((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.cssClass) : 'aui-iconfont-file-txt') + '" title="' + soy.$$escapeHtml(((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.title) != null ? ((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.title) : 'File') + '"></span>&nbsp;&nbsp;<span class="wiki-edit-attachment-name">' + soy.$$escapeHtml(opt_data.text) + '</span></a></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.renderListItem.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.renderListItem';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/Analytics.js' */
define("wiki-edit/analytics",["wiki-edit/aui"],function(i){function r(i){var r,t=0;if(!i)return"";for(var a=0;a<i.length;a+=1)r=i.charCodeAt(a),t=32*t-t+r,t|=0;return t}var t=i.Analytics&&i.Analytics.triggerPrivacyPolicySafeEvent?function(r,t){i.Analytics.triggerPrivacyPolicySafeEvent("jira.wikieditor."+r,t||{})}:function(r,t){i.trigger("analytics",{name:"jira.wikieditor."+r,data:t||{}})};return{trigger:t,hashCode:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/KeyTester.js' */
define("wiki-edit/KeyTester",function(){return{getActionType:function(i){return this.isNavigation(i)?"navigating":this.isDeleting(i)?"deleting":this.isReturn(i)?"newline":this.isEscape(i)?"escape":this.isTyping(i)?"typing":void 0},isNavigation:function(i){return i>=33&&i<=40||i>=63232&&i<=63235},isDeleting:function(i){return 8==i||46==i||127==i},isReturn:function(i){return 13==i},isEscape:function(i){return 27==i},isTyping:function(i){return i>47&&i<58||i>95&&i<112||i>64&&i<91||i>185&&i<193||i>218&&i<223||32==i||13==i}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/UndoManager.js' */
define("wiki-edit/UndoManager",function(){var t=function(){this._undoStack=[],this._redoStack=[],this._current=void 0};return t.prototype.MAX_STACK=1e3,t.prototype.updateCurrent=function(t,n){t!=this._current&&(this._current=t,n||(this._redoStack.length=0))},t.prototype.push=function(t){this._redoStack.length=0,this._undoStack.length&&_.isEqual(t,this._undoStack[this._undoStack.length-1])||(this._undoStack.push(t),this._current=t),this._undoStack.length>this.MAX_STACK&&this._undoStack.splice(0,this._undoStack.length-this.MAX_STACK)},t.prototype.undo=function(){if(this.canUndo()){var t;do t=this._undoStack.pop();while(_.isEqual(t,this._current)&&this.canUndo());return this._redoStack.push(this._current),this._current=t,t}},t.prototype.redo=function(){if(this.canRedo()){var t=this._redoStack.pop();return this._undoStack.push(this._current),this._current=t,t}},t.prototype.canUndo=function(){return!!this._undoStack.length},t.prototype.canRedo=function(){return!!this._redoStack.length},t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/UndoableTextarea.js' */
define("wiki-edit/UndoableTextarea",["wiki-edit/UndoManager","wiki-edit/KeyTester","jquery"],function(e,t,n){function i(e,t){t!==a&&o==t||("newline"!=o&&e.recordHistoryItem(),o=t)}function r(e,t){if(e.undoManager["can"+t[0].toUpperCase()+t.substring(1)]()){var n=e.undoManager[t]();e.element.value=n.value,e.element.selectionStart=n.selectionStart,e.element.selectionEnd=n.selectionEnd}}var a="cut-paste",o="",s=function(r){this.element=r,this.$el=n(r),this.undoManager=new e,this.undoManager.updateCurrent(this.getValue()),this.undoManager.push(this.getValue());var o=function(e){var n=e.keyCode,r=String.fromCharCode(n);if(n)if(e.ctrlKey||e.metaKey){if((e.ctrlKey||e.metaKey)&&!e.altKey)switch(r.toLowerCase()){case"y":this.undoManager.updateCurrent(this.getValue(),!0),this.redo(),e.preventDefault();break;case"z":this.undoManager.updateCurrent(this.getValue(),!0),e.shiftKey?this.redo():this.undo(),e.preventDefault()}}else this.undoManager.updateCurrent(this.getValue()),i(this,t.getActionType(n));else this.undoManager.updateCurrent(this.getValue()),i(this,"other")}.bind(this);this.$el.on("keydown",o),this.$el.on("paste cut",function(){this.undoManager.updateCurrent(this.getValue()),i(this,a)}.bind(this))};return s.prototype.getValue=function(){return{value:this.element.value,selectionStart:this.element.selectionStart,selectionEnd:this.element.selectionEnd}},s.prototype.updateCurrent=function(){this.undoManager.updateCurrent(this.getValue())},s.prototype.recordHistoryItem=function(){this.undoManager.push(this.getValue())},s.prototype.undo=function(){i(this,"undo"),r(this,"undo"),this.element.scrollTop=this.element.scrollHeight},s.prototype.redo=function(){r(this,"redo"),this.element.scrollTop=this.element.scrollHeight},s});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/TextareaManipulator.js' */
define("wiki-edit/TextareaManipulator",function(){var t=function(t){this.el=t};return t.prototype.NEW_LINE_TOKEN="\n",t.prototype.getSelection=function(){return{start:this.el.selectionStart,end:this.el.selectionEnd,length:this.el.selectionEnd-this.el.selectionStart,text:this.el.value.substring(this.el.selectionStart,this.el.selectionEnd)}},t.prototype.setSelection=function(t,e){1===arguments.length&&(e=t),this.el.selectionStart=t,this.el.selectionEnd=e},t.prototype.replaceSelectionWith=function(t,e){var n=this.el.selectionStart,i=this.el.value;this.el.value=i.substring(0,this.el.selectionStart)+t+i.substring(this.el.selectionEnd,i.length),this.el.selectionEnd=n+t.length,this.el.selectionStart=e?n:this.el.selectionEnd},t.prototype.wrapSelectionWith=function(t,e,n){arguments.length<3&&(n=""),1===arguments.length&&(e=t);var i=this.getSelection(),s=this.el.value;if(s.substring(i.start-t.length,i.start)!==t||s.substring(i.end,i.end+e.length)!==e){var l=s.substring(i.start,i.end);0==l.length&&(l=n),this.el.value=s.substring(0,i.start)+t+l+e+s.substring(i.end,s.length);var r=i.start+t.length;this.setSelection(r,r+l.length)}},t.prototype._getSelectedLines=function(){var t=this.el.value,e=this.getSelection(),n=t.substring(0,e.start).split(this.NEW_LINE_TOKEN).length-1,i=n+t.substring(e.start,e.end).split(this.NEW_LINE_TOKEN).length-1,s=t.split(this.NEW_LINE_TOKEN);return{lines:s,start:n,end:i}},t.prototype.getLineAtCursor=function(){var t=this._getSelectedLines();return t.lines[t.end]},t.prototype.getFirstLineMatch=function(t){var e=this._getSelectedLines(),n=e.lines[e.start].match(t);if(n)return n[0]},t.prototype.areSelectedLinesPrefixed=function(t){var e,n=this._getSelectedLines();for(e=n.start;e<=n.end;e++)if(0==n.lines[e].indexOf(t))return!0;return!1},t.prototype.prefixSelectedLines=function(t){var e,n=this.getSelection(),i=this._getSelectedLines(),s=0,l=!0;for(e=i.start;e<=i.end;e++)0!=i.lines[e].indexOf(t)?(s+=1,i.lines[e]=t+i.lines[e]):e==i.start&&(l=!1);this.el.value=i.lines.join(this.NEW_LINE_TOKEN);var r=t.length*s;this.setSelection(n.start+(l?t.length:0),n.end+r)},t.prototype.unprefixSelectedLines=function(t){var e,n=this.getSelection(),i=this._getSelectedLines(),s=!1,l=0;for(e=i.start;e<=i.end;e++)0==i.lines[e].indexOf(t)&&(l+=1,i.lines[e]=i.lines[e].substring(t.length),e==i.start&&(s=!0));this.el.value=i.lines.join(this.NEW_LINE_TOKEN);var r=t.length*l;this.setSelection(n.start-(s?t.length:0),n.end-r)},t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/keymaster-setup.js' */
define("wiki-edit/keymaster-setup",["jquery","wiki-edit/keymaster"],function(e,i){return{init:function(){i.filter=function(t){var n,r=t.target||t.srcElement||!1;return!!(r&&(" "+r.className+" ").indexOf(" wiki-textfield ")>-1&&(n=e(r).data("wikiEditor")))&&(i.setScope(n.id),!0)}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEnabledTextarea.js' */
define("wiki-edit/WikiEnabledTextarea",["wiki-edit/TextareaManipulator","wiki-edit/UndoableTextarea","wiki-edit/keymaster","wiki-edit/keymaster-setup","wiki-edit/SpeechRecognition","jquery"],function(e,i,t,n,o,r){n.init();var a=0,l=/^[#\*]+ /,p=function(n){if(this.el=n,this.$el=r(n),this.$el.data("wikiEditor"))return this.$el.data("wikiEditor");this.id="wikiEdit"+a,a+=1,this.manipulationEngine=new e(this.el),this.undoRedoEl=new i(n);var o=this;t("enter",o.id,function(e){var i=o.manipulationEngine.getSelection(),t=o.manipulationEngine.getFirstLineMatch(l);t&&(0==i.length&&o.manipulationEngine.getLineAtCursor()===t?o.manipulationEngine.unprefixSelectedLines(t):o.manipulationEngine.replaceSelectionWith("\n"+t),e.preventDefault())}),this.$el.data("wikiEditor",this)},d={bold:["*","*","strong text"],italic:["_","_","emphasized text"],underline:["+","+","underlined text"],delete:["-","-","deleted text"],superscript:["^","^","superscript text"],subscript:["~","~","subscript text"],monospace:["{{","}}","monospaced text"],cite:["??","??","citation"],"block-quote":["{quote}","{quote}","quoted text"],color:["{color:$1}","{color}","colored text","red"],link:["[","|http://example.com]","link title"],"link-anchor":["[#","]","anchor"],"link-mail":["[mailto:","]","mail@example.com"],image:["!","!","http://example.com/image.png"],mention:["@","","Mention someone by typing their name..."],code:["\n{code:java}\n","\n{code}\n","// Some comments here\npublic String getFoo()\n{\n    return foo;\n}"],noformat:["\n{noformat}\n","\n{noformat}\n","*no* further _formatting_ is done here"],panel:["\n{panel:title="+"My title"+"}\n","\n{panel}\n","Some text with a title"],table:["\n||"+"Heading"+" 1||"+"Heading"+" 2||\n|","|"+"Col"+" A2|\n","Col"+" A1"]};for(var h in d)p.prototype[h]=function(e,i){var t=0;return e.length>3&&(t=e.length-3),function(){var i,n=e[0],o=e[1],r=e[2];for(i=1;i<=t;i++)n=n.replace("$"+i,arguments[i-1]||e[2+i]),o=o.replace("$"+i,arguments[i-1]||e[2+i]);var a=this.el.value,l=this.manipulationEngine.getSelection();this.undoRedoEl.recordHistoryItem(),a.substring(l.start-n.length,l.start)===n&&a.substring(l.end,l.end+o.length)===o?(this.el.value=a.substring(0,l.start-n.length)+a.substring(l.start,l.end)+a.substring(l.end+o.length,a.length),this.manipulationEngine.setSelection(l.start-n.length,l.end-n.length)):this.manipulationEngine.wrapSelectionWith.call(this.manipulationEngine,n,o,r),this.undoRedoEl.recordHistoryItem(),this.$el.trigger("input")}}(d[h],h);var c={paragraph:"","bullet-list":"* ","numbered-list":"# ",h1:"h1. ",h2:"h2. ",h3:"h3. ",h4:"h4. ",h5:"h5. ",h6:"h6. ","paragraph-quote":"bq. "};for(var h in c)p.prototype[h]=function(e){return function(){this.undoRedoEl.recordHistoryItem();for(var i in c)this.manipulationEngine.areSelectedLinesPrefixed(c[i])&&this.manipulationEngine.unprefixSelectedLines(c[i]);this.manipulationEngine.prefixSelectedLines.call(this.manipulationEngine,e),this.undoRedoEl.recordHistoryItem(),this.$el.trigger("input")}}(c[h]);var g={hr:"\n----\n",":)":":)",":(":":(",":P":":P",":D":":D",";)":";)","(y)":"(y)","(n)":"(n)","(i)":"(i)","(/)":"(/)","(x)":"(x)","(!)":"(!)","(+)":"(+)","(-)":"(-)","(?)":"(?)","(on)":"(on)","(off)":"(off)","(*)":"(*)","(*r)":"(*r)","(*g)":"(*g)","(*b)":"(*b)","(*y)":"(*y)","(flag)":"(flag)","(flagoff)":"(flagoff)","image-attachment":[" !$1|thumbnail! ","attachment-name.jpg"],"image-attachment-full":[" !$1! ","attachment-name.gif"],"link-attachment":[" [^$1] ","attachment-name.zip"]};for(var h in g)p.prototype[h]=function(e){var i,t=0;return _.isArray(e)&&(t=e.length-1,i=e.slice(1),e=e[0]),function(){var n,o=e;for(n=1;n<=t;n++)o=e.replace("$"+n,arguments[n-1]||i[n-1]);this.undoRedoEl.recordHistoryItem(),this.manipulationEngine.replaceSelectionWith.call(this.manipulationEngine,o,!1),this.undoRedoEl.recordHistoryItem(),this.$el.trigger("input")}}(g[h]);return p.prototype.speech=function(){o.start(this)},p});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEditor.js' */
define("wiki-edit/WikiEditor",["wiki-edit/WikiEnabledTextarea","jquery","underscore","wiki-edit/JIRA","wiki-edit/keymaster","wiki-edit/analytics","wiki-edit/WikiEditorUtil","jira/util/events","jira/attachments/api","jira/featureflags/feature-manager"],function(t,e,i,a,n,o,r,d,l,c){function s(t){var e=AJS.$(t).closest(".aui-dropdown2");e.length&&e[0].hide()}var f="Ctrl";navigator.platform.indexOf("Mac")!=-1&&(f="");var h=function(t){return t.match(/\.(bmp|gif|jpg|jpeg|png|tiff|webp)$/i)?"image":"file"},p=function(t,e,i){"image"==i?(e.match(/\.gif$/i)?t["image-attachment-full"](e):t["image-attachment"](e),o.trigger("operation.attachment.image")):(t["link-attachment"](e),o.trigger("operation.attachment.link"))};return{create:function(i){function d(t){t.preventDefault(),t.stopPropagation(),W=!W,S.toggleClass("active",W),u.toggleClass("wiki-edit-toolbar-compact",W),localStorage.setItem("jira.wikieditor.visibility"+i.name+"."+i.id,W?"true":"false"),o.trigger(W?"hide":"show")}if("undefined"!=typeof i.selectionStart){var l=e(i);if(!l.data("wikiEditor")){var c=new t(i);this.wikiEditor=c;var g=e(a.Templates.Plugins.WikiEditor.renderEditor({editorId:c.id,controlKey:f})),u=g.filter(".wiki-edit-toolbar");"webkitSpeechRecognition"in window&&g.find(".wiki-edit-speech-item").removeClass("hidden"),l.parent().before(g);var m,v=l.closest(".jira-dialog").length>0||l.closest("form#issue-create").length>0,k=l.closest("#create-issue-dialog").length>0,w=e("#issue-content").length>0,b=l.closest("#addcomment").length>0,y=g.find(".wiki-edit-operation[title], .aui-dropdown2-trigger, .wiki-edit-tooltip");m=v?"Dialog.beforeHide":a.Events.BEFORE_INLINE_EDIT_CANCEL,y.each(function(){var t=e(this),i={aria:!0,hideOnClick:!0,hoverable:!1};t.parent().is("li")&&(i.gravity="w"),t.tooltip(i)});var E=function(){y.each(function(){e(this).tooltip("hide")})};a.bind(m,E);var C=!1,T=g.filter(".aui-dropdown2");T.on({"aui-dropdown2-show":function(){C=!0,l.focus()},"aui-dropdown2-hide":function(){C=!1,E()}}),l.on("keydown",function(t){C&&t.keyCode===AJS.keyCode.ESCAPE&&(v?a.one("Dialog.beforeHide",function(t){t.preventDefault()}):w&&!b&&a.one(a.Events.BEFORE_INLINE_EDIT_CANCEL,function(t){t.preventDefault()}))});var I=g.filter(".wiki-edit-dropdown-image, .wiki-edit-dropdown-attachment"),_=I.find(".wiki-edit-insert-image, .wiki-edit-insert-attachment"),j=I.find(".wiki-edit-insert-image ul, .wiki-edit-insert-attachment ul");j.on("click","a",function(t){t.preventDefault(),s(t.target);var i=e(this).attr("data-attachment-type");"undefined"==typeof i&&(i="file");var a=e(this).find(".wiki-edit-attachment-name").text();p(c,a,i)}),I.on("aui-dropdown2-show",function(){var t=[],i=[];v&&e(".upload-progress-bar:not(.upload-progress-bar__upload-error) span.upload-progress-bar__file-name").each(function(e,i){t.push(i)}),!k&&w&&e("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content").each(function(e,i){t.push(i)});var n=function(t,e){if(!t)return null;var i=r.getFileExtension(t);return{name:t,type:e,icon:r.translateFileExtensionToAttachmentTypeIcon(i)}},o=e("#ghx-tab-attachments .ghx-container");o.find("#file_attachments li.attachment-content > dl dt.attachment-title a, #file_attachments div.verbose dt.attachment-title a").each(function(t,e){var a=n(e.textContent,"file");a&&i.push(a)}),o.find("#attachment_thumbnails a.attachment-title").each(function(t,e){var a=n(e.textContent,"image");a&&i.push(a)}),j.empty(),_.addClass("hidden"),(v||w)&&t.length?(_.removeClass("hidden"),e(t).each(function(){var t=e(this).is("span.upload-progress-bar__file-name")?e(this).text():e(this).find("a.attachment-title, .attachment-title a").first().text(),i=e(this).attr("data-attachment-type");void 0===i&&(i=h(t));var n=r.defaultAttachmentTypeIcon,o=e(this).attr("data-downloadurl");if(void 0===o&&(o=e(this).find("[data-downloadurl]").attr("data-downloadurl")),void 0!==o&&"string"==typeof o){var d=o.split(":");if(d.length>0){var l=d[0];n=r.translateMimeTypeToAttachmentTypeIcon(l)}}else if(void 0!==t&&"string"==typeof t){var c=t.match(/\.(\w{1,5})$/i);if(c&&c.length>1){var s=c[1];n=r.translateFileExtensionToAttachmentTypeIcon(s)}}j.append(e(a.Templates.Plugins.WikiEditor.renderListItem({text:t,attachmentType:i,attachmentTypeIcon:n})))})):!k&&i.length>0&&(_.removeClass("hidden"),i.forEach(function(t){if(null!=t&&null!=t.name){var i=t.name,n=t.type?t.type:"file",o=t.icon?t.icon:{cssClass:"aui-iconfont-devtools-file",title:""};j.append(e(a.Templates.Plugins.WikiEditor.renderListItem({text:i,attachmentType:n,attachmentTypeIcon:o})))}}))}),r.compareVersion(AJS.version,"5.8.0")<0&&I.on("aui-dropdown2-item-selected",function(){var t=e(this).find(".aui-dropdown2-active");if("object"==typeof t){var i=t.closest("div");if("object"==typeof i){var a=i.offset().top,n=a+i.height(),o=t.offset().top,r=o+t.height();o<a&&i.scrollTop(i.scrollTop()-(a-o)),r>n&&i.scrollTop(i.scrollTop()+(r-n))}}}),g.filter(".wiki-edit-dropdown, .wiki-edit-picker").on("mousedown",function(t){t.preventDefault()}),g.find(".wiki-edit-operation:not(.wiki-edit-operation-color)").each(function(){var t=e(this),i=function(e){e&&(e.preventDefault&&e.preventDefault(),s(e.target),l.focus(),c[t.data("operation")](),o.trigger("operation",{name:t.data("operation"),nameHash:o.hashCode(t.data("operation")),trigger:e.type}),o.trigger("operation."+t.data("operation"),{trigger:e.type}))};t.click(i),t.data("shortcut")&&n(t.data("shortcut"),c.id,i)}),g.find(".wiki-edit-operation-color").each(function(){var t=e(this),i=function(e){e&&(e.preventDefault&&e.preventDefault(),s(e.target),l.focus(),c[t.data("operation")](t.data("color")),o.trigger("operation",{name:t.data("operation"),nameHash:o.hashCode(t.data("operation")),trigger:e.type}),o.trigger("operation."+t.data("operation"),{trigger:e.type}))};t.click(i),t.data("shortcut")&&n(t.data("shortcut"),c.id,i)});var x=window.localStorage.getItem("jira.wikieditor.last.color")?window.localStorage.getItem("jira.wikieditor.last.color"):"red",D=g.find(".wiki-edit-operation-color");D.data("color",x);var A=u.find(".wiki-edit-color-indicator");A.css("background-color",x),g.filter(".wiki-edit-color-picker").on("click","a",function(t){t.preventDefault(),s(t.target),l.focus();var i=e(this).data("color");c.color(i),o.trigger("operation",{name:"color"}),o.trigger("operation.color.picked",{color:i}),D.data("color",i),A.css("background-color",i),window.localStorage.setItem("jira.wikieditor.last.color",i)});var S=g.find(".wiki-edit-visible-toggle"),W="true"===localStorage.getItem("jira.wikieditor.visibility"+i.name+"."+i.id);W&&(S.addClass("active"),u.addClass("wiki-edit-toolbar-compact")),S.on("click",d),u.parent().on("click",".wiki-edit-toolbar-compact",d),e(document).on("showWikiPreview",function(t,a){e(a).find(i).length&&u.addClass("hidden")}),e(document).on("showWikiInput",function(t,a){e(a).find(i).length&&u.removeClass("hidden")})}}},initBrowseLink:function(t){var i=this.wikiEditor,a=e(t),n=a.parent().siblings().find(".wiki-attachment-browse"),r=e("#dnd-metadata-webpanel").data("can-attach"),c=a.closest(".jira-dialog").length>0||a.closest("form#issue-create").length>0;if(c){var f=["#create-issue-dialog:visible","#create-subtask-dialog:visible","#edit-issue-dialog:visible","#create-linked-issue-dialog:visible"],g=e(f.join(",")),u=g.length>0;r=e(".jira-dialog fieldset span:contains('Attachment')").length>0,u||(g=a.closest(".dialog-can-receive-files:visible"),u=g.length>0,r=g.data("can-attach"));var m=g.data("insert-markup-on-browse")}var v=a.parent().siblings().find(".wiki-edit-attachment-picker-trigger");if(!r||c&&!u){n.closest("div").addClass("hidden");var k=e("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content"),w=k.length>0,b=c&&u&&("create-issue-dialog"===g.attr("id")||"create-subtask-dialog"===g.attr("id")),y=w&&!b;y||v.addClass("hidden")}else n.closest("div").removeClass("hidden"),v.removeClass("hidden"),n.data("initialised")||(n.on("click",function(t){t.preventDefault(),s(t.target);var a=function(){var t=e('<input type="file" multiple />');t.change(function(a){var n=t[0].files;if(c){var o=e.Event("drop");o.dataTransfer={files:n},g.find(".issue-drop-zone__target").trigger(o)}else d.trigger("attachmentForPageReceived",{files:n,isWikiTextfieldFocused:!0});if(!c||m)for(var r=0;r<n.length;r++){var l=n[r].name;p(i,l,h(l))}}),t.click(),o.trigger("attachment.dropdown.button.clicked.browse")},n={onFileUploadStarted:function(t){p(i,t.name,h(t.name))},blockWikiEditorMarkupInsert:!0};l.doUpload(n)?o.trigger("issue.wiki-editor.browse-link.media-picker"):(o.trigger("issue.wiki-editor.browse-link.fallback"),a())}),n.data("initialised",!0))}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEditorUtil.js' */
define("wiki-edit/WikiEditorUtil",["jquery","underscore"],function(i,e){var t={cssClass:"aui-iconfont-devtools-file",title:"File"},n={pdf:"aui-iconfont-file-pdf",gif:"aui-iconfont-image",png:"aui-iconfont-image",jpeg:"aui-iconfont-image",jpg:"aui-iconfont-image",xml:"aui-iconfont-file-code",html:"aui-iconfont-file-code",htm:"aui-iconfont-file-code",txt:"aui-iconfont-file-txt",zip:"aui-iconfont-file-zip",gz:"aui-iconfont-file-zip",tar:"aui-iconfont-file-zip",rar:"aui-iconfont-file-zip","7z":"aui-iconfont-file-zip",doc:"aui-iconfont-file-doc",docx:"aui-iconfont-file-doc",xls:"aui-iconfont-file-xls",xlsx:"aui-iconfont-file-xls",xlsm:"aui-iconfont-file-xls",ppt:"aui-iconfont-file-ppt",pptx:"aui-iconfont-file-ppt",java:"aui-iconfont-file-code",c:"aui-iconfont-file-code",h:"aui-iconfont-file-code",cpp:"aui-iconfont-file-code",hpp:"aui-iconfont-file-code",scala:"aui-iconfont-file-code",php:"aui-iconfont-file-code",css:"aui-iconfont-file-code",less:"aui-iconfont-file-code",soy:"aui-iconfont-file-code",js:"aui-iconfont-file-code",jar:"aui-iconfont-file-zip",war:"aui-iconfont-file-zip",obr:"aui-iconfont-file-zip"},o={pdf:"PDF File",gif:"GIF File",png:"PNG File",jpeg:"JPEG File",jpg:"JPEG File",xml:"XML File",html:"HTML File",htm:"HTML File",txt:"Text File",zip:"Zip Archive",gz:"GZip Archive",doc:"Microsoft Word",docx:"Microsoft Word",xls:"Microsoft Excel",xlsx:"Microsoft Excel",xlsm:"Microsoft Excel",ppt:"Microsoft PowerPoint",pptx:"Microsoft PowerPoint",java:"Java Source File",jar:"Java Archive File",war:"Java Archive File"};return{defaultAttachmentTypeIcon:t,translateMimeTypeToAttachmentTypeIcon:function(i){return{cssClass:JIRA.Templates.ViewIssue.matchFileClass({mimetype:i}),title:JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype:i})}},translateFileExtensionToAttachmentTypeIcon:function(i){var c=e.clone(t);if("string"!=typeof i)return c;i=i.toLowerCase(),i=i.replace(/^\.+/,"");var f=n[i];"string"==typeof f&&(c.cssClass=f);var a=o[i];return"string"==typeof a&&(c.title=a),c},compareVersion:function(e,t){var n=e.split("."),o=t.split("."),c=NaN;return i(n).each(function(i,e){if(i>=o.length)return!1;var t=Number(e),n=Number(o[i]);return isNaN(t)||isNaN(n)?(c=NaN,!1):t<n?(c=-1,!1):t>n?(c=1,!1):void(c=0)}),0==c&&n.length!=o.length?n.length>o.length?1:-1:c},getFileExtension:function(i){if("string"!=typeof i)return"";var e=i.match(/\.(\w{1,5})$/i);return e&&e.length>1?e[1]:""}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/SpeechRecognition.js' */
define("wiki-edit/SpeechRecognition",["jquery","aui/flag"],function(e,t){function i(e){return e&&e[0]&&e[0].isFinal}function r(e){return e&&e[0]&&e[0][0]&&e[0][0].transcript||""}return{start:function(e){var t=this,o=new webkitSpeechRecognition;o.continuous=!1,o.interimResults=!0,o.lang=AJS.Meta.get("user-locale").replace("_","-"),o.stop(),o.start(),o.onstart=function(){t.showTimedMessage({title:"You can start speaking now :)"},"info",10),t.selectionStart=e.manipulationEngine.getSelection().start},o.onresult=function(n){t.dismissCurrentMessage();var s=i(n.results),a=r(n.results);a=a.charAt(0).toUpperCase()+a.slice(1),s&&e.undoRedoEl.recordHistoryItem(),e.manipulationEngine.replaceSelectionWith.call(e.manipulationEngine,a,!1);var l=t.selectionStart+a.length;s?(e.manipulationEngine.setSelection(l),e.undoRedoEl.recordHistoryItem(),e.$el.trigger("input"),o.stop()):e.manipulationEngine.setSelection(t.selectionStart,l)},o.onerror=function(e){o.stop();var i={title:"Sorry, I can\'t hear you :(",body:""};switch(e.error){case"not-allowed":i.title="Speech recognition is currently disabled",i.body="Click the camera icon in the browser\'s address bar to enable it.";break;case"network":i.title="No internet connection",i.body="You need a working internet connection to use speech recognition.";break;case"no-speech":i.title="Sorry, I couldn\'t hear anything :(",i.body="Is your microphone working and unmuted?";break;case"aborted":return}t.showTimedMessage(i,"warning",5)},o.onend=function(){o.stop()}},showTimedMessage:function(e,i,r){this.dismissCurrentMessage(),this.speakFlag=t({type:i,title:e.title,body:e.body,persistent:!0}),clearTimeout(this.flagTimer),this.flagTimer=setTimeout(this.dismissCurrentMessage.bind(this),1e3*r)},dismissCurrentMessage:function(){this.speakFlag&&this.speakFlag.close&&(this.speakFlag.close(),this.speakFlag=null)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:skate', location = '/js/lib/skate.js' */
define("wiki-edit/skate",["jira/skate"],function(e){return e});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources-init', location = '/js/wiki-editor-init.js' */
require(["wiki-edit/WikiEditor","wiki-edit/JIRA","wiki-edit/skate","jquery","underscore"],function(i,t,e,o,n){function s(t){var e=this instanceof Element?this:t,s=function(t){i.create(t),i.initBrowseLink(t),t.wikiEnabled=!0};e.wikiEnabled===!1&&(o(e).is(":hidden")?n.defer(s,e):s(e))}function d(){return{type:e.type.CLASSNAME,attached:s,prototype:{wikiEnabled:!1}}}e("wiki-textfield",d()),e("wiki-enabled-textfield",d()),o(function(){o("#gh").length>0&&(t.Dialogs.comment.options.width=810,t.Dialogs.assignIssue.options.width=810,t.Dialogs.attachFile.options.width=810,t.Dialogs.logWork.options.width=810,t.Dialogs.logWork.options.width=810)})});;
;
/* module-key = 'jira.webresources:calendar-localisation-moment', location = '/includes/lib/calendar/Calendar-localisation-moment.js' */
define("jira/calendar/localisation-moment",["require"],function(a){"use strict";if("function"==typeof moment&&null!==moment&&"function"==typeof Calendar&&null!==Calendar){var e=moment.langData("jira");null!==e&&"object"==typeof e&&(Calendar._DN=e._weekdays.concat(e._weekdays[0]),Calendar._SDN=e._weekdaysShort.concat(e._weekdaysShort[0]),Calendar._MN=[].concat(e._months),Calendar._SMN=[].concat(e._monthsShort))}}),require("jira/calendar/localisation-moment");;
;
/* module-key = 'com.atlassian.jira.jira-tzdetect-plugin:tzdetect-lib', location = 'banner/tzdetect-banner.js' */
!function(){"use strict";require(["jquery","jira/flag","jira/featureflags/simplified-ux-feature-manager"],function(e,t,n){function i(e){return 60*(+e||0)*1e3}function a(e){return Math.floor((+e||0)/1e3/60)}function r(e){return function(t){1!==t.which||t.shiftKey||t.ctrlKey||t.metaKey||e.apply(this,arguments)}}var s=AJS.contextPath()+"/rest/tzdetect/1",o={$tzFlag:null,$link:null,$dropdown:null,prefs:{},detected:{}};o.init=function(){if(!o.$tzFlag&&(o.detectTimezoneOffsets(),null!=o.detected.janOffset&&null!=o.detected.julyOffset&&o.prefs.tzid)){var e=o.detected.janOffset!=o.prefs.janOffset||o.detected.julyOffset!=o.prefs.julyOffset;e&&o.prefs.enabled&&o.create()}},o.detectTimezoneOffsets=function(){o.prefs=o.getPreferences(),o.prefs.tzid&&(o.detected.janOffset=o.getTzOffset(0),o.detected.julyOffset=o.getTzOffset(6))},o.create=function(){var a=n.isPeopleProfileEnabled()?o.personalSettingsLink():o.profileLink()+"#zone-set",s=AJS.format("Your computer\'\'s time zone does not appear to match your Jira time zone preference of {0}.",o.prefs.tzname),f="Update your Jira preference",c=JIRA.plugins.tzdetect.soy.banner({message:s,updateLinkText:f,updateLink:a}),l=[i(o.detected.janOffset),i(o.detected.julyOffset)].join(","),u=t.showInfoMsg(null,c,{dismissalKey:"com.atlassian.jira.tzdetect."+l});u&&(o.$tzFlag=e(u),o.getPotentialZones(),o.$tzFlag.on("aui-flag-close",function(){o.track("clicked.nothanks"),o.$tzFlag=void 0}),o.$link=o.$tzFlag.find(".tz-yes"),o.$link.click(r(function(e){e.preventDefault(),o.getPotentialZones().then(o.handleZoneData)})),o.track("shown"))},o.track=function(e,t){var n={name:"tzdetect.banner."+e};t&&(n.data=t),AJS.trigger("analyticsEvent",n)},o.profileLink=function(){return AJS.contextPath()+"/secure/ViewProfile.jspa"},o.personalSettingsLink=function(){return AJS.contextPath()+"/secure/ViewPersonalSettings.jspa"},o.redirect=function(e){window.location=e},o.getPreferences=function(){var e=WRM.data.claim("com.atlassian.jira.jira-tzdetect-plugin:tzdetect-lib.time-zone-data");return e.janOffset=a(e.janOffset),e.julyOffset=a(e.julyOffset),e},o.handleZoneData=function(e){var t=o.filterZoneData(e.zones),n=t.length;t.regions={};for(var i,a=e.regions.length;a--;)i=e.regions[a],t.regions[i.key]=i.displayName;if(t.sort(function(e,t){var n=e.regionKey,i=t.regionKey;return n==i?e.city<t.city?-1:1:n<i?-1:1}),o.track("clicked.update",{matchingZoneCount:n}),!n)return void o.redirect(o.$link.attr("href"));if(1===n)return void o.setUserTimeZone(t[0].timeZoneId,"banner");if(!o.$dropdown){var s="timezone-selection-list";o.$link.addClass("aui-dropdown2-trigger").attr("aria-owns",s).attr("aria-haspopup","true"),o.$dropdown=AJS.$(JIRA.plugins.tzdetect.soy.dropdown({id:s,sections:o.getListSections(t),baseHref:o.profileLink()})).css("z-index",5e3).on("click","a",r(function(e){var t=AJS.$(this),n=t.attr("data-tzid");if(n)e.preventDefault(),o.setUserTimeZone(n,"menu");else if(t.attr("data-tzother")){var i={offsets:[o.detected.janOffset,o.detected.julyOffset].join(",")};o.track("menu.other",i)}})).appendTo("body")}o.$dropdown.trigger("aui-button-invoke")},o.filterZoneData=function(e){var t=["Antarctica","Etc"];return _.filter(e,function(e){return!_.contains(t,e.regionKey)})},o.getListSections=function(e){for(var t,n,i,a=[],r=0,s=e.length;r<s;r++)t=e[r].regionKey,t!==n&&(i={region:e.regions[t]||t,zones:[]},a.push(i),n=t),i.zones.push(e[r]);return a.push({other:"Other\u2026"}),a},o.getTzOffset=function(e){var t=(new Date).getFullYear(),n=new Date(t,e,1,12,0,0);return-n.getTimezoneOffset()},o.getPotentialZones=function(){var t=e.Deferred();if(o.zoneList)t.resolve(o.zoneList);else{var n={janOffset:i(o.detected.janOffset),julyOffset:i(o.detected.julyOffset)};JIRA.SmartAjax.makeRequest({url:s+"/zones",type:"GET",data:n,contentType:"application/json",complete:function(e,n,i){"abort"!=n&&i.successful?(o.zoneList=i.data,t.resolve(o.zoneList)):t.reject(i)}})}return t.promise()},o.setUserTimeZone=function(e,t){o.track("setzone",{zoneId:e,source:t}),JIRA.SmartAjax.makeRequest({url:s+"/update",type:"POST",data:e,contentType:"application/json",complete:function(e,t,n){if("abort"!=t&&n.successful&&(o.$tzFlag&&o.$tzFlag.find(".aui-icon.icon-close").click(),JIRA.Messages)){var i=n.data,a=AJS.format("Your default time zone has been set to {0}.",i.gmtOffset+" "+i.city);JIRA.Messages.showSuccessMsg(a,{closeable:!0})}}})},e(function(){window.__tzTesting||o.init()}),(JIRA.plugins||(JIRA.plugins={})).tzBanner=o})}();;
;
/* module-key = 'com.atlassian.jira.jira-tzdetect-plugin:tzdetect-lib', location = 'banner/tzdetect-banner.soy' */
// This file was automatically generated from tzdetect-banner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.plugins.tzdetect.soy.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.plugins == 'undefined') { JIRA.plugins = {}; }
if (typeof JIRA.plugins.tzdetect == 'undefined') { JIRA.plugins.tzdetect = {}; }
if (typeof JIRA.plugins.tzdetect.soy == 'undefined') { JIRA.plugins.tzdetect.soy = {}; }


JIRA.plugins.tzdetect.soy.banner = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.message) + '<p><a class="tz-yes" href="' + soy.$$escapeHtml(opt_data.updateLink) + '">' + soy.$$escapeHtml(opt_data.updateLinkText) + '</a></p>';
};
if (goog.DEBUG) {
  JIRA.plugins.tzdetect.soy.banner.soyTemplateName = 'JIRA.plugins.tzdetect.soy.banner';
}


JIRA.plugins.tzdetect.soy.dropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-dropdown2 aui-style-default"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '>';
  var sectionList17 = opt_data.sections;
  var sectionListLen17 = sectionList17.length;
  for (var sectionIndex17 = 0; sectionIndex17 < sectionListLen17; sectionIndex17++) {
    var sectionData17 = sectionList17[sectionIndex17];
    output += '<div class="aui-dropdown2-section">';
    if (sectionData17.region) {
      output += '<strong>' + soy.$$escapeHtml(sectionData17.region) + '</strong><ul class="aui-list-truncate">';
      var zoneList24 = sectionData17.zones;
      var zoneListLen24 = zoneList24.length;
      for (var zoneIndex24 = 0; zoneIndex24 < zoneListLen24; zoneIndex24++) {
        var zoneData24 = zoneList24[zoneIndex24];
        output += '<li><a href="' + soy.$$escapeHtml(opt_data.baseHref) + '#zone-' + soy.$$escapeHtml(zoneData24.timeZoneId) + '" data-tzid="' + soy.$$escapeHtml(zoneData24.timeZoneId) + '">' + soy.$$escapeHtml(zoneData24.gmtOffset) + ' ' + soy.$$escapeHtml(zoneData24.city) + '</a></li>';
      }
      output += '</ul>';
    } else if (sectionData17.other) {
      output += '<ul class="aui-list-truncate"><li><a href="' + soy.$$escapeHtml(opt_data.baseHref) + '#zone-other" data-tzother="true">' + soy.$$escapeHtml(sectionData17.other) + '</a></li></ul>';
    }
    output += '</div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.plugins.tzdetect.soy.dropdown.soyTemplateName = 'JIRA.plugins.tzdetect.soy.dropdown';
}
;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:resources-init', location = 'js/resources-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.labs.hipchat.hipchat-for-jira-plugin:resources-init.is-hipchat-enabled-data-provider");if(a){WRM.require("wrc!com.atlassian.labs.hipchat.hipchat-for-jira-plugin:resources")}});;
;
/* module-key = 'jira.webresources:user-message-flags', location = '/includes/jira/admin/admin-flags.js' */
require(["jira/util/logger","wrm/data","jquery","jira/flag"],function(s,a,e,i){"use strict";e(function(){var c=a.claim("jira.webresources:user-message-flags.adminLockout")||{};if(c.noprojects){var n=JIRA.Templates.Flags.Admin,r=n.adminIssueAccessFlagTitle({}),l=n.adminIssueAccessFlagBody({manageAccessUrl:c.manageAccessUrl}),g=i.showWarningMsg(r,l,{dismissalKey:c.flagId});e(g).find("a").on("click",function(){g.dismiss()})}s.trace("admin.flags.done")})});;
;
/* module-key = 'jira.webresources:user-message-flags', location = 'includes/jira/admin/admin-flags.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Flags&&(JIRA.Templates.Flags={}),"undefined"==typeof JIRA.Templates.Flags.Admin&&(JIRA.Templates.Flags.Admin={}),JIRA.Templates.Flags.Admin.adminIssueAccessFlagTitle=function(e,s){return""+soy.$$escapeHtml("Your current restrictions")},JIRA.Templates.Flags.Admin.adminIssueAccessFlagBody=function(e,s){var a="";'<a href="'+soy.$$escapeHtml(AJS.contextPath())+"/"+soy.$$escapeHtml(e.manageAccessUrl)+'">';return a+='<p id="admin-noprojects">'+soy.$$escapeHtml("You\'ve logged in as an administrator, but you don\'t have access to any Jira applications. You can perform administration tasks, but you won\'t be able to view or edit issues.")+'</p><p><a href="'+soy.$$escapeHtml(AJS.contextPath())+"/"+soy.$$escapeHtml(e.manageAccessUrl)+'">'+soy.$$escapeHtml("Manage your application access.")+"</a></p>"};;