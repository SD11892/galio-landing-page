var AP=function(){function n(c,b){b=b||aa;var a=[];if(c)if("string"===typeof c)c=b.querySelectorAll(c),c=Array.prototype.slice.call(c),Array.prototype.push.apply(a,c);else if(1===c.nodeType)a.push(c);else if(c===window)a.push(c);else if("function"===typeof c)n.onDomLoad(c);p.extend(a,{each:function(a){W(this,a);return this},bind:function(a,b){this.each(function(d,c){this.bind(c,a,b)})},attr:function(a){var d;this.each(function(b,c){d=c[a]||c.getAttribute&&c.getAttribute(a);return!d});return d},removeClass:function(a){return this.each(function(d,
b){b.className&&(b.className=b.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," "))})},html:function(a){return this.each(function(d,b){b.innerHTML=a})},append:function(a){return this.each(function(d,c){var g=b.createElement(a.tag);W(a,function(a,d){"$text"===a?g.styleSheet?g.styleSheet.cssText=d:g.appendChild(b.createTextNode(d)):"tag"!==a&&(g[a]=d)});c.appendChild(g)})}});return a}function u(c,b){c+="EventListener";b+="Event";return function(a,d,g){if(a[c])a[c](d,g,!1);else if(a[b])a[b]("on"+
d,g)}}function r(){var c=n(".ac-content, #content");return 0<c.length?c[0]:document.body}function w(){this.q=[];this.add=function(a){this.q.push(a)};var c,b;this.call=function(){c=0;for(b=this.q.length;c<b;c++)this.q[c].call()}}function t(c,b){if(!c.resizedAttached)c.resizedAttached=new w,c.resizedAttached.add(b);else if(c.resizedAttached){c.resizedAttached.add(b);return}"BODY"===c.nodeName&&["padding","margin"].forEach(function(a){c.style[a+"-bottom"]="0px";c.style[a+"-top"]="0px"},this);c.resizeSensor=
document.createElement("div");c.resizeSensor.className="ac-resize-sensor";c.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;";c.resizeSensor.innerHTML='<div class="ac-resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0;"></div></div><div class="ac-resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; width: 200%; height: 200%"></div></div>';
c.appendChild(c.resizeSensor);"BODY"!==c.nodeName&&window.getComputedStyle&&"static"===window.getComputedStyle(c).position&&(c.style.position="relative");var a=c.resizeSensor.childNodes[0],d=a.childNodes[0],g=c.resizeSensor.childNodes[1],m,q,e=function(){d.style.width=a.offsetWidth+10+"px";d.style.height=a.offsetHeight+10+"px";a.scrollLeft=a.scrollWidth;a.scrollTop=a.scrollHeight;g.scrollLeft=g.scrollWidth;g.scrollTop=g.scrollHeight;m=c.offsetWidth;q=c.offsetHeight};e();b=function(){(c.offsetWidth!==
m||c.offsetHeight!==q)&&c.resizedAttached&&c.resizedAttached.call();e()};a.addEventListener("scroll",b);g.addEventListener("scroll",b);b=new MutationObserver(b);c.resizeObserver=b;b.observe(c,{attributes:!0,attributeFilter:["style"]})}function y(c,b){var a,d;if(c)if(a=c.length,null!=a&&"function"!==typeof c)for(d=0;d<a&&!1!==b.call(c[d],d,c[d]);)d+=1;else for(d in c)if(c.hasOwnProperty(d)&&!1===b.call(c[d],d,c[d]))break}function k(c,b){c+="EventListener";b+="Event";return function(a,d,g){if(a[c])a[c](d,
g,!1);else if(a[b])a[b]("on"+d,g)}}function e(){var c=this.console;if(c&&c.log){var b=[].slice.call(arguments);if(c.log.apply)c.log.apply(c,b);else{for(var a=0,d=b.length;a<d;a+=1)b[a]=JSON.stringify(b[a]);c.log(b.join(" "))}return!0}}function f(c,b){if((c=G[c])&&0!==c.length)try{c.forEach(function(a){a.call(null,b)})}catch(a){console.error(a)}}function h(c,b){var a=G[c],d="close"!==c,g=null;if(!d||"undefined"!==typeof b.button){"submit"===c&&l.dialog._disableCloseOnSubmit&&(d=!1);try{a&&(b&&b.button&&
b.button.name&&(g=l.dialog.getButton(b.button.name)),d=a.reduce(function(a,d){return d.call(g,b)&&a},d))}catch(m){console.error(m)}finally{delete G[c]}d&&l.dialog.close()}}function D(c,b){"function"===typeof b&&(G[c]||(G[c]=[]),G[c].push(b))}function E(c,b){var a=[],d=0,g=c.length;if(c&&0<c.length)for(;d<g;d+=1){var m=A(c[d]);a.push(m);if(a.length===g){for(var m=[],q=0;q<g;q+=1)m[q]=a[q].exports;b&&b.apply(window,m)}}else b&&b()}function A(c){if(M[c])return M[c];var b=C(c);return b?M[c]=b:M[c]={name:c,
exports:function(){function a(){var d=a.__target__;if(d)return d.apply(window,arguments)}return a}()}}function C(c){var b;if(l._hostModules&&(l._hostModules[c]&&(b=l._hostModules[c]),l._hostModules._globals&&l._hostModules._globals[c]&&(b=l._hostModules._globals[c]),b))return{name:c,exports:b}}function H(c){return J("meta[name='ap-"+c+"']").attr("content")}var v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&
c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},z=function(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");},ba=Object.assign||function(c){for(var b=1;b<arguments.length;b++){var a=arguments[b],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d])}return c},N=function(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,
{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)},O=function(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b},X=Function.prototype.bind,p={locationOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:
"")},randomString:function(){return Math.floor(1E9*Math.random()).toString(16)},isString:function(c){return"string"===typeof c||c instanceof String},argumentsToArray:function(c){return Array.prototype.slice.call(c)},argumentNames:function(c){return c.toString().replace(/((\/\/.*$)|(\/\*[^]*?\*\/))/mg,"").replace(/[^(]+\(([^)]*)[^]+/,"$1").match(/([^\s,]+)/g)||[]},hasCallback:function(c){var b=c.length;return 0<b&&"function"===typeof c[b-1]},error:function(c){if(window.console&&window.console.error){var b=
[];"string"===typeof c?(b.push("[Simple-XDM] "+c),b=b.concat(Array.prototype.slice.call(arguments,1))):(b.push("[Simple-XDM] "),b=b.concat(Array.prototype.slice.call(arguments)));window.console.error.apply(null,b)}},warn:function(c){window.console&&console.warn("[Simple-XDM] "+c)},log:function(c){window.console&&window.console.log("[Simple-XDM] "+c)},_bind:function(c,b){return X&&b.bind===X?b.bind(c):function(){return b.apply(c,arguments)}},throttle:function(c,b,a){var d=0;return function(){var g=
Date.now();g-d>b&&(d=g,c.apply(a,arguments))}},each:function(c,b){var a,d;if(c)if(a=c.length,null!=a&&"function"!==typeof c)for(d=0;d<a&&!1!==b.call(c[d],d,c[d]);)d+=1;else for(d in c)if(c.hasOwnProperty(d)&&!1===b.call(c[d],d,c[d]))break},extend:function(c){var b=arguments;[].slice.call(b,1,b.length).forEach(function(a){"object"===("undefined"===typeof a?"undefined":v(a))&&Object.getOwnPropertyNames(a).forEach(function(d){c[d]=a[d]})});return c},sanitizeStructuredClone:function(c){function b(c){if("function"===
typeof c)return g("A function was detected and removed from the message."),null;if(d.some(function(a){return c instanceof a?(g(a.name+" object was detected and removed from the message."),!0):!1}))return{};if(c&&"object"===("undefined"===typeof c?"undefined":v(c))&&a.every(function(a){return!(c instanceof a)})){var q=void 0;if(Array.isArray(c))q=c.map(function(a){return b(a)});else{if(-1<m.indexOf(c))return g("A circular reference was detected and removed from the message."),null;m.push(c);var q=
{},e;for(e in c)if(c.hasOwnProperty(e)){var f=b(c[e]);null!==f&&(q[e]=f)}m.pop()}return q}return c}var a=[Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer],d=[Error,Node],g=p.warn,m=[];return b(c)},getOrigin:function(c,b){if("function"===typeof URL)try{return(new URL(c,b)).origin}catch(g){}var a=document.implementation.createHTMLDocument("");if(b){var d=a.createElement("base");d.href=b;a.head.appendChild(d)}b=a.createElement("a");b.href=c;a.body.appendChild(b);a=b.protocol+"//"+b.hostname;
c.match(/\/\/[^/]+:[0-9]+\//)&&(a+=b.port?":"+b.port:"");return a}},B=function(){function c(b){z(this,c);this._registerListener((b||{}).listenOn)}c.prototype._registerListener=function(b){b&&b.addEventListener||(b=window);b.addEventListener("message",p._bind(this,this._receiveMessage),!1)};c.prototype._receiveMessage=function(b){var a=this._messageHandlers[b.data.type],d=b.data.eid,c=void 0;d&&this._registeredExtensions&&(c=this._registeredExtensions[d]);if(!a||!this._checkOrigin(b,c))return!1;a.call(this,
b,c)};return c}(),da=function(c){function b(a){z(this,b);a=a||{};var d=O(this,c.call(this,a));d._registeredExtensions=a.extensions||{};d._registeredAPIModules={};d._registeredAPIModules._globals={};d._pendingCallbacks={};d._keycodeCallbacks={};d._clickHandler=null;d._pendingEvents={};d._messageHandlers={init:d._handleInit,req:d._handleRequest,resp:d._handleResponse,broadcast:d._handleBroadcast,event_query:d._handleEventQuery,key_triggered:d._handleKeyTriggered,addon_clicked:d._handleAddonClick,get_host_offset:d._getHostOffset,
unload:d._handleUnload,sub:d._handleSubInit};return d}N(b,c);b.prototype._padUndefinedArguments=function(a,d){return a.length>=d?a:a.concat(Array(d-a.length))};b.prototype._verifyAPI=function(a,d){function b(a,d){Object.getOwnPropertyNames(d).forEach(function(c){"object"===v(d[c])&&a[c]?b(a[c],d[c]):"parent"===d[c]&&a[c]&&(e=!0)})}var c=a.data.targets;if(c){var q=this.getApiSpec(),e=!1;b(q,c);a.source.postMessage({type:"api_tamper",tampered:e},d.extension.url)}};b.prototype._handleInit=function(a,
d){this._registeredExtensions[d.extension_id].source=a.source;d.initCallback&&(d.initCallback(a.data.eid),delete d.initCallback);a.data.targets&&this._verifyAPI(a,d)};b.prototype._handleSubInit=function(a,d){this.registerExtension(a.data.ext.id,{extension:a.data.ext})};b.prototype._getHostOffset=function(a,d){var b=a.source,c=null;d=d||window;d===d.top&&"function"===typeof d.getHostOffsetFunctionOverride&&(c=d.getHostOffsetFunctionOverride(b));if("number"!==typeof c)for(c=0;!this._hasSameOrigin(b);)c++,
b=b.parent;a.source.postMessage({hostFrameOffset:c},a.origin)};b.prototype._hasSameOrigin=function(a){if(a===a.top)return!0;try{var d="test_var_"+Math.random().toString(16).substr(2);a[d]=!0;return a[d]}catch(g){}return!1};b.prototype._handleResponse=function(a){a=a.data;var d=this._pendingCallbacks[a.mid];d&&(delete this._pendingCallbacks[a.mid],d.apply(window,a.args))};b.prototype.registerRequestNotifier=function(a){this._registeredRequestNotifier=a};b.prototype._handleRequest=function(a,d){function b(){var b=
p.sanitizeStructuredClone(p.argumentsToArray(arguments));a.source.postMessage({mid:a.data.mid,type:"resp",forPlugin:!0,args:b},d.extension.url)}var c=a.data,q=this._registeredAPIModules[c.mod],e=this.getRegisteredExtensions(d.extension)[0];if(q){var f=c.fn;if(c._cls){var h=q[c._cls],l=c.mod+"-"+c._cls+"-";b._id=c._id;"constructor"===f?(h._construct||(h.constructor.prototype._destroy=function(){delete this._context._proxies[l+this._id]},h._construct=function(){for(var a=arguments.length,d=Array(a),
b=0;b<a;b++)d[b]=arguments[b];a=new (Function.prototype.bind.apply(h.constructor,[null].concat(d)));d=d[d.length-1];a._id=d._id;a._context=d._context;return a._context._proxies[l+a._id]=a}),q=h,f="_construct"):q=e._proxies[l+c._id]}var v=q[f];if(v){var P=c.args,k=v.length-1;"_construct"===f&&(k=q.constructor.length-1);b._context=e;P=this._padUndefinedArguments(P,k);P.push(b);q=v.apply(q,P);v.returnsPromise&&(q&&q instanceof Promise?q.then(function(a){b(void 0,a)}).catch(function(a){a=a instanceof
Error?a.message:a;b(a)}):b("Defined module method did not return a promise."));this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,{module:c.mod,fn:c.fn,type:c.type,addon_key:d.extension.addon_key,key:d.extension.key,extension_id:d.extension_id})}}};b.prototype._handleBroadcast=function(a,d){a=a.data;this.dispatch(a.etyp,function(a){return a.extension.addon_key===d.extension.addon_key&&a.extension_id!==d.extension_id},a.evnt,null,null)};b.prototype._handleKeyTriggered=function(a,
d){var b=a.data;a=this._keycodeKey(b.keycode,b.modifiers,d.extension_id);(a=this._keycodeCallbacks[a])&&a.forEach(function(a){a.call(null,{addon_key:d.extension.addon_key,key:d.extension.key,extension_id:d.extension_id,keycode:b.keycode,modifiers:b.modifiers})},this)};b.prototype.defineAPIModule=function(a,d){d=d||"_globals";this._registeredAPIModules[d]=p.extend({},this._registeredAPIModules[d]||{},a);return this._registeredAPIModules};b.prototype._pendingEventKey=function(a,d){var b=a.addon_key||
"global";a.key&&(b=b+"@@"+a.key);return b+"@@"+d};b.prototype.queueEvent=function(a,d,b,c){if(this._findRegistrations(d).some(function(a){return void 0!==a.registered_events},this))this.dispatch(a,d,b,c);else{this._cleanupInvalidEvents();var g=(new Date).getTime();this._pendingEvents[this._pendingEventKey(d,g)]={type:a,targetSpec:d,event:b,callback:c,time:g,uid:p.randomString()}}};b.prototype._cleanupInvalidEvents=function(){var a=this,d=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(b){3E4>=
d-a._pendingEvents[b].time||delete a._pendingEvents[b]})};b.prototype._handleEventQuery=function(a,d){var b=this,c={},q=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(g){var m=b._pendingEvents[g],e=3E4>=q-m.time,f=!m.targetSpec||0!==b._findRegistrations(m.targetSpec).length;f&&m.targetSpec.key&&(f=m.targetSpec.addon_key===d.extension.addon_key&&m.targetSpec.key===d.extension.key);e&&f?(c[g]=m,m.targetSpec=m.targetSpec||{},b.dispatch(m.type,m.targetSpec,m.event,m.callback,a.source)):
e||delete b._pendingEvents[g]});this._registeredExtensions[d.extension_id].registered_events=a.data.args;return c};b.prototype._handleUnload=function(a,d){d&&(d.extension_id&&this._registeredExtensions[d.extension_id]&&delete this._registeredExtensions[d.extension_id].source,d.unloadCallback&&d.unloadCallback(a.data.eid))};b.prototype.dispatch=function(a,d,b,c,q){function g(d,b){if(d.source&&d.source.postMessage){var g;c&&(g=p.randomString(),this._pendingCallbacks[g]=c);d.source.postMessage({type:"evt",
mid:g,etyp:a,evnt:b},d.extension.url)}}this._findRegistrations(d||{}).forEach(function(a){q&&!a.source&&(a.source=q);a.source&&p._bind(this,g)(a,b)},this)};b.prototype._findRegistrations=function(a){var d=this;if(0===this._registeredExtensions.length)return p.error("no registered extensions",this._registeredExtensions),[];var b=Object.getOwnPropertyNames(a),c=Object.getOwnPropertyNames(this._registeredExtensions).map(function(a){return d._registeredExtensions[a]});return a instanceof Function?c.filter(a):
c.filter(function(d){return b.every(function(b){return d.extension[b]===a[b]})})};b.prototype.registerExtension=function(a,d){d._proxies={};d.extension_id=a;this._registeredExtensions[a]=d};b.prototype._keycodeKey=function(a,d,b){var c=a;d&&("string"===typeof d&&(d=[d]),d.sort(),d.forEach(function(a){c+="$$"+a},this));return c+"__"+b};b.prototype.registerKeyListener=function(a,d,b,c){"string"===typeof b&&(b=[b]);var g=this._registeredExtensions[a];a=this._keycodeKey(d,b,a);this._keycodeCallbacks[a]||
(this._keycodeCallbacks[a]=[],g.source.postMessage({type:"key_listen",keycode:d,modifiers:b,action:"add"},g.extension.url));this._keycodeCallbacks[a].push(c)};b.prototype.unregisterKeyListener=function(a,b,c,m){var d=this._keycodeKey(b,c,a),g=this._keycodeCallbacks[d];a=this._registeredExtensions[a];g&&(m?(m=g.indexOf(m),this._keycodeCallbacks[d].splice(m,1)):delete this._keycodeCallbacks[d],a.source&&a.source.postMessage&&a.source.postMessage({type:"key_listen",keycode:b,modifiers:c,action:"remove"},
a.extension.url))};b.prototype.registerClickHandler=function(a){if("function"!==typeof a)throw Error("callback must be a function");if(null!==this._clickHandler)throw Error("ClickHandler already registered");this._clickHandler=a};b.prototype._handleAddonClick=function(a,b){"function"===typeof this._clickHandler&&this._clickHandler({addon_key:b.extension.addon_key,key:b.extension.key,extension_id:b.extension_id})};b.prototype.unregisterClickHandler=function(){this._clickHandler=null};b.prototype.getApiSpec=
function(){function a(a){function d(a){return Object.getOwnPropertyNames(a).reduce(function(b,c){var g=a[c];switch("undefined"===typeof g?"undefined":v(g)){case "function":b[c]={args:p.argumentNames(g),returnsPromise:g.returnsPromise||!1};break;case "object":g.hasOwnProperty("constructor")&&(b[c]=d(g))}return b},{})}var c=b._registeredAPIModules[a];if(!c)throw Error("unregistered API module: "+a);return d(c)}var b=this;return Object.getOwnPropertyNames(this._registeredAPIModules).reduce(function(b,
d){b[d]=a(d);return b},{})};b.prototype._originEqual=function(a,b){function d(a){return"string"===typeof a&&0<a.length}var c=p.getOrigin(a);return d(a)&&d(b)&&d(c)?b===c:!1};b.prototype._checkOrigin=function(a,b){var d=["init"],c=b&&!b.source&&-1<d.indexOf(a.data.type),d=b&&a.source===b.source;b=b&&this._originEqual(b.extension.url,a.origin)&&(c||d);"get_host_offset"===a.data.type&&window===window.top&&(b=!0);"unload"!==a.data.type||!d&&void 0!==a.source||(b=!0);b||p.log("Failed to validate origin: "+
a.origin);return b};b.prototype.getRegisteredExtensions=function(a){return a?this._findRegistrations(a):this._registeredExtensions};b.prototype.unregisterExtension=function(a){a=this._findRegistrations(a);0!==a.length&&a.forEach(function(a){var b=this;Object.keys(this._pendingEvents).forEach(function(d){var c=b._pendingEvents[d].targetSpec||{};c.addon_key===a.extension.addon_key&&c.key===a.extension.key&&delete b._pendingEvents[d]});delete this._registeredExtensions[a.extension_id]},this)};return b}(B),
S=function(){function c(){z(this,c);this._xdm=new da}c.prototype.dispatch=function(b,a,d,c){this._xdm.queueEvent(b,a,d,c);return this.getExtensions(a)};c.prototype.broadcast=function(b,a,d){this._xdm.dispatch(b,a,d,null,null);return this.getExtensions(a)};c.prototype._createId=function(b){if(!b.addon_key||!b.key)throw Error("Extensions require addon_key and key");return b.addon_key+"__"+b.key+"__"+p.randomString()};c.prototype.create=function(b,a,d){a=this.registerExtension(b,a,d);d=b.options||{};
d={extension_id:a,api:this._xdm.getApiSpec(),origin:p.locationOrigin(),options:d};return{id:a,name:JSON.stringify(d),src:b.url}};c.prototype.registerRequestNotifier=function(b){this._xdm.registerRequestNotifier(b)};c.prototype.registerExtension=function(b,a,d){var c=this._createId(b);this._xdm.registerExtension(c,{extension:b,initCallback:a,unloadCallback:d});return c};c.prototype.registerKeyListener=function(b,a,d,c){this._xdm.registerKeyListener(b,a,d,c)};c.prototype.unregisterKeyListener=function(b,
a,d,c){this._xdm.unregisterKeyListener(b,a,d,c)};c.prototype.registerClickHandler=function(b){this._xdm.registerClickHandler(b)};c.prototype.unregisterClickHandler=function(){this._xdm.unregisterClickHandler()};c.prototype.defineModule=function(b,a,d){this._xdm.defineAPIModule(a,b,d)};c.prototype.defineGlobals=function(b){this._xdm.defineAPIModule(b)};c.prototype.getExtensions=function(b){return this._xdm.getRegisteredExtensions(b)};c.prototype.unregisterExtension=function(b){return this._xdm.unregisterExtension(b)};
c.prototype.returnsPromise=function(b){b.returnsPromise=!0};return c}(),ea="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Y=function(c,b){return b={exports:{}},c(b,b.exports),b.exports}(function(c){(function(b){function a(){}function d(a,b){return function(){a.apply(b,arguments)}}function g(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");
this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];v(a,this)}function m(a,b){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(b):(a._handled=!0,g._immediateFn(function(){var d=1===a._state?b.onFulfilled:b.onRejected;if(null===d)(1===a._state?e:f)(b.promise,a._value);else{var c;try{c=d(a._value)}catch(ca){f(b.promise,ca);return}e(b.promise,c)}}))}function e(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"===typeof b||"function"===
typeof b)){var c=b.then;if(b instanceof g){a._state=3;a._value=b;h(a);return}if("function"===typeof c){v(d(c,b),a);return}}a._state=1;a._value=b;h(a)}catch(R){f(a,R)}}function f(a,b){a._state=2;a._value=b;h(a)}function h(a){2===a._state&&0===a._deferreds.length&&g._immediateFn(function(){a._handled||g._unhandledRejectionFn(a._value)});for(var b=0,d=a._deferreds.length;b<d;b++)m(a,a._deferreds[b]);a._deferreds=null}function l(a,b,d){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===
typeof b?b:null;this.promise=d}function v(a,b){var d=!1;try{a(function(a){d||(d=!0,e(b,a))},function(a){d||(d=!0,f(b,a))})}catch(R){d||(d=!0,f(b,R))}}var k=setTimeout;g.prototype["catch"]=function(a){return this.then(null,a)};g.prototype.then=function(b,d){var c=new this.constructor(a);m(this,new l(b,d,c));return c};g.all=function(a){var b=Array.prototype.slice.call(a);return new g(function(a,d){function c(m,e){try{if(e&&("object"===typeof e||"function"===typeof e)){var f=e.then;if("function"===typeof f){f.call(e,
function(a){c(m,a)},d);return}}b[m]=e;0===--g&&a(b)}catch(fa){d(fa)}}if(0===b.length)return a([]);for(var g=b.length,m=0;m<b.length;m++)c(m,b[m])})};g.resolve=function(a){return a&&"object"===typeof a&&a.constructor===g?a:new g(function(b){b(a)})};g.reject=function(a){return new g(function(b,d){d(a)})};g.race=function(a){return new g(function(b,d){for(var c=0,g=a.length;c<g;c++)a[c].then(b,d)})};g._immediateFn="function"===typeof setImmediate&&function(a){setImmediate(a)}||function(a){k(a,0)};g._unhandledRejectionFn=
function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};g._setImmediateFn=function(a){g._immediateFn=a};g._setUnhandledRejectionFn=function(a){g._unhandledRejectionFn=a};c.exports?c.exports=g:b.Promise||(b.Promise=g)})(ea)}),W=p.each,aa=window.document;n.bind=u("add","attach");n.unbind=u("remove","detach");n.onDomLoad=function(c){var b=window;"complete"===b.document.readyState?c.call(b):n.bind(b,"load",function(){c.call(b)})};var K=new (function(){function c(){z(this,
c);this.options={}}c.prototype._flush=function(){this.options={}};c.prototype.get=function(b){return b?this.options[b]:this.options};c.prototype.set=function(b,a){var d=this;if(b){if(a){var c;b=(c={},c[b]=a,c)}Object.getOwnPropertyNames(b).forEach(function(a){d.options[a]=b[a]},this)}};return c}()),T=function(c,b,a){var d=function(){var b=window.innerWidth-a.clientWidth,b=0>b?0:b;return 50<b?50:b},g=function(){var b=window.innerHeight-Math.min(a.clientHeight,document.documentElement.clientHeight),
b=0>b?0:b;return 50<b?50:b};c=null==c?"100%":c;var m,e=!!K.get("widthinpx");(a=a||r())||p.warn("size called before container or body appeared, ignoring");e&&"string"===typeof c&&-1!==c.search("%")&&(c=Math.max(a.scrollWidth,a.offsetWidth,a.clientWidth));if(b)m=b;else if(b=Math.max(a.scrollHeight,document.documentElement.scrollHeight,a.offsetHeight,document.documentElement.offsetHeight,a.clientHeight,document.documentElement.clientHeight),a===document.body)m=b;else{var f=window.getComputedStyle(a);
m=a.getBoundingClientRect().height;0===m?m=b:["margin-top","margin-bottom"].forEach(function(a){a=parseFloat(f[a]);m+=a})}c="number"===typeof c&&Math.min(a.scrollHeight,document.documentElement.scrollHeight)>Math.min(a.clientHeight,document.documentElement.clientHeight)?c+d():c;m="number"===typeof m&&a.scrollWidth>a.clientWidth?m+g():m;return{w:c,h:m}},ga={add:function(c){var b=r();t(b,c)},remove:function(){var c=r();c.resizeSensor&&(c.resizeObserver.disconnect(),c.removeChild(c.resizeSensor),delete c.resizeSensor,
delete c.resizedAttached)}},ha=function(){function c(b){z(this,c);this.resizeError=p.throttle(function(a){console.info(a)},1E3);this.dimensionStores={width:[],height:[]};this.callback=b}c.prototype._setVal=function(b,a,d){this.dimensionStores[a]=this.dimensionStores[a].filter(function(a){return 400>d-a.setAt});this.dimensionStores[a].push({val:parseInt(b,10),setAt:d})};c.prototype._isFlicker=function(b,a){return 5<=this.dimensionStores[a].length};c.prototype.triggered=function(b){b=b||T();var a=Date.now();
this._setVal(b.w,"width",a);this._setVal(b.h,"height",a);var d=this._isFlicker(b.w,"width",a),a=this._isFlicker(b.h,"height",a);d&&(b.w="100%",this.resizeError("SIMPLE XDM: auto resize flickering width detected, setting to 100%"));a&&(d=this.dimensionStores.height.map(function(a){return a.val}),b.h=Math.max.apply(null,d)+"px",this.resizeError("SIMPLE XDM: auto resize flickering height detected, setting to: "+b.h));this.callback(b.w,b.h)};return c}(),F=new (function(){function c(){z(this,c)}c.prototype._elementExists=
function(b){return b&&1===b.length};c.prototype._elementOptions=function(b){return b.attr("data-options")};c.prototype._getConsumerOptions=function(){var b={},a=n("#ac-iframe-options"),d=n("script[src*='/atlassian-connect/all']"),c=n("script[src*='/connect-cdn.atl-paas.net/all']");this._elementExists(a)&&this._elementOptions(a)||(this._elementExists(d)?a=d:this._elementExists(c)&&(a=c));this._elementExists(a)&&(a=this._elementOptions(a))&&a.split(";").forEach(function(a){if(a=a.trim()){var d=a.split(":");
a=d[0].trim();d=d[1].trim();a&&null!=d&&(b[a]="true"===d||"false"===d?"true"===d:d)}});return b};c.prototype._flush=function(){delete this._options};c.prototype.get=function(b){this._options||(this._options=this._getConsumerOptions());return b?this._options[b]:this._options};return c}()),ia=["ctrl","shift","alt","meta"],ja=function(c){function b(a){z(this,b);var d=O(this,c.call(this));K.set(a);d._data=d._parseInitData();K.set(d._data.options);d._data.options=d._data.options||{};d._hostOrigin=d._data.options.hostOrigin||
"*";d._top=window.top;d._host=window.parent||window;d._topHost=d._getHostFrame(d._data.options.hostFrameOffset);d._topHost!==d._top&&d._verifyHostFrameOffset();d._isKeyDownBound=!1;d._hostModules={};d._eventHandlers={};d._pendingCallbacks={};d._keyListeners=[];d._version="5.1.67";d._apiTampered=void 0;d._isSubIframe=d._topHost!==window.parent;d._onConfirmedFns=[];d._promise=Y;d._data.api&&(d._setupAPI(d._data.api),d._setupAPIWithoutRequire(d._data.api));d._messageHandlers={resp:d._handleResponse,
evt:d._handleEvent,key_listen:d._handleKeyListen,api_tamper:d._handleApiTamper};d._data.origin&&(d._sendInit(d._host,d._data.origin),d._isSubIframe&&d._sendInit(d._topHost,d._hostOrigin));d._registerOnUnload();d.resize=p._bind(d,function(a,b){if(r()){var c=T();a||(a=c.w);b||(b=c.h);d._hostModules.env&&d._hostModules.env.resize&&d._hostModules.env.resize(a,b)}else p.warn("resize called before container or body appeared, ignoring")});n(p._bind(d,d._autoResizer));d.container=r;d.size=T;window.addEventListener("click",
function(a){d._host.postMessage({eid:d._data.extension_id,type:"addon_clicked"},d._hostOrigin)});return d}N(b,c);b.prototype._getHostFrame=function(a){if(a&&"number"===typeof a){for(var b=window,c=0;c<a;c++)b=b.parent;return b}return this._top};b.prototype._verifyHostFrameOffset=function(){var a=this;window.addEventListener("message",function g(b){b.source===a._top&&b.data&&"number"===typeof b.data.hostFrameOffset&&(window.removeEventListener("message",g),a._getHostFrame(b.data.hostFrameOffset)!==
a._topHost&&(p.error("hostFrameOffset tampering detected, setting host frame to top window"),a._topHost=a._top))});this._top.postMessage({type:"get_host_offset"},this._hostOrigin)};b.prototype._handleApiTamper=function(a){!1!==a.data.tampered?(this._host=void 0,this._apiTampered=!0,p.error("XDM API tampering detected, api disabled")):(this._apiTampered=!1,this._onConfirmedFns.forEach(function(a){a.apply(null)}));this._onConfirmedFns=[]};b.prototype._registerOnUnload=function(){n.bind(window,"unload",
p._bind(this,function(){this._sendUnload(this._host,this._data.origin);this._isSubIframe&&this._sendUnload(this._topHost,this._hostOrigin)}))};b.prototype._sendUnload=function(a,b){a.postMessage({eid:this._data.extension_id,type:"unload"},b||"*")};b.prototype._bindKeyDown=function(){this._isKeyDownBound||(n.bind(window,"keydown",p._bind(this,this._handleKeyDownDomEvent)),this._isKeyDownBound=!0)};b.prototype._autoResizer=function(){this._enableAutoResize=!!K.get("autoresize");if(!1===F.get("resize")||
!0===F.get("sizeToParent"))this._enableAutoResize=!1;this._enableAutoResize&&this._initResize()};b.prototype._parseInitData=function(a){try{return JSON.parse(a||window.name)}catch(d){return{}}};b.prototype._findTarget=function(a,b){return this._data.options&&this._data.options.targets&&this._data.options.targets[a]&&this._data.options.targets[a][b]?this._data.options.targets[a][b]:"top"};b.prototype._createModule=function(a,b){var c=this;return Object.getOwnPropertyNames(b).reduce(function(d,g){var m=
b[g];m.hasOwnProperty("constructor")?d[g]=c._createProxy(a,m,g):d[g]=c._createMethodHandler({mod:a,fn:g,returnsPromise:m.returnsPromise});return d},{})};b.prototype._setupAPI=function(a){var b=this;this._hostModules=Object.getOwnPropertyNames(a).reduce(function(c,d){c[d]=b._createModule(d,a[d],a[d]._options);return c},{});Object.getOwnPropertyNames(this._hostModules._globals||{}).forEach(function(a){b[a]=b._hostModules._globals[a]})};b.prototype._setupAPIWithoutRequire=function(a){var b=this;Object.getOwnPropertyNames(a).forEach(function(c){if("undefined"!==
typeof b[c])throw Error("XDM module: "+c+" will collide with existing variable");b[c]=b._createModule(c,a[c])},this)};b.prototype._pendingCallback=function(a,b){this._pendingCallbacks[a]=b};b.prototype._createProxy=function(a,b,c){function d(a){if(!(this instanceof d))return new d(arguments);this._cls=c;this._id=p.randomString();g.constructor.apply(this,a);return this}var g=this._createModule(a,b);Object.getOwnPropertyNames(g).forEach(function(a){"constructor"!==a&&(d.prototype[a]=g[a])});return d};
b.prototype._createMethodHandler=function(a){var b=this;return function(){var c=p.argumentsToArray(arguments),d={eid:b._data.extension_id,type:"req",mod:a.mod,fn:a.fn},e,f,h=void 0,l=p.randomString();"top"===b._findTarget(a.mod,a.fn)?(f=b._topHost,e=b._hostOrigin):(f=b._host,e=b._data.origin);p.hasCallback(c)?(d.mid=l,b._pendingCallback(d.mid,c.pop())):a.returnsPromise&&(d.mid=l,h=new Y(function(a,c){b._pendingCallback(d.mid,function(b,d){b?c(b):a(d)})}),h.catch(function(a){p.warn("Failed promise: "+
a)}));this&&this._cls&&(d._cls=this._cls,d._id=this._id);d.args=p.sanitizeStructuredClone(c);b._isSubIframe&&"undefined"===typeof b._apiTampered?b._onConfirmedFns.push(function(){f.postMessage(d,e)}):f.postMessage(d,e);if(h)return h}};b.prototype._handleResponse=function(a){a=a.data;if(a.forPlugin){var b=this._pendingCallbacks[a.mid];if(b){delete this._pendingCallbacks[a.mid];try{b.apply(window,a.args)}catch(g){p.error(g.message,g.stack)}}}};b.prototype._handleEvent=function(a){function b(a){return a?
(Array.isArray(a)||(a=[a]),a):[]}var c=function(){var b=p.argumentsToArray(arguments);a.source.postMessage({eid:this._data.extension_id,mid:a.data.mid,type:"resp",args:b},this._data.origin)},m=a.data,c=p._bind(this,c);c._context={eventName:m.etyp};var e=b(this._eventHandlers[m.etyp]),e=e.concat(b(this._eventHandlers._any));e.forEach(function(a){try{a(m.evnt,c)}catch(pa){p.error("exception thrown in event callback for:"+m.etyp)}},this);m.mid&&c()};b.prototype._handleKeyDownDomEvent=function(a){var b=
[];ia.forEach(function(c){a[c+"Key"]&&b.push(c)},this);var c=this._keyListenerId(a.keyCode,b);0<=this._keyListeners.indexOf(c)&&this._host.postMessage({eid:this._data.extension_id,keycode:a.keyCode,modifiers:b,type:"key_triggered"},this._data.origin)};b.prototype._keyListenerId=function(a,b){var c=a;b&&("string"===typeof b&&(b=[b]),b.sort(),b.forEach(function(a){c+="$$"+a},this));return c};b.prototype._handleKeyListen=function(a){var b=this._keyListenerId(a.data.keycode,a.data.modifiers);"remove"===
a.data.action?(a=this._keyListeners.indexOf(b),this._keyListeners.splice(a,1)):"add"===a.data.action&&(this._bindKeyDown(),this._keyListeners.push(b))};b.prototype._checkOrigin=function(a){var b=["api_tamper"];return a.data&&-1<b.indexOf(a.data.type)||this._isSubIframe&&a.source===this._topHost?!0:a.origin===this._data.origin&&a.source===this._host};b.prototype._sendInit=function(a,b){var c;a===this._topHost&&this._topHost!==window.parent&&(c=K.get("targets"));a.postMessage({eid:this._data.extension_id,
type:"init",targets:c},b||"*")};b.prototype.sendSubCreate=function(a,b){b.id=a;this._topHost.postMessage({eid:this._data.extension_id,type:"sub",ext:b},this._hostOrigin)};b.prototype.broadcast=function(a,b){if(!p.isString(a))throw Error("Event type must be string");this._host.postMessage({eid:this._data.extension_id,type:"broadcast",etyp:a,evnt:b},this._data.origin)};b.prototype.require=function(a,b){var c=this;a=(Array.isArray(a)?a:[a]).map(function(a){return c._hostModules[a]||c._hostModules._globals[a]});
b.apply(window,a)};b.prototype.register=function(a){"object"===("undefined"===typeof a?"undefined":v(a))&&(this._eventHandlers=ba({},this._eventHandlers,a)||{},this._host.postMessage({eid:this._data.extension_id,type:"event_query",args:Object.getOwnPropertyNames(a)},this._data.origin))};b.prototype.registerAny=function(a){this.register({_any:a})};b.prototype._initResize=function(){this.resize();var a=new ha(this.resize);ga.add(p._bind(a,a.triggered))};return b}(B),l=new (function(c){function b(){z(this,
b);var a=O(this,c.call(this));a.parentTargets={_globals:{}};var d=new ja;Object.getOwnPropertyNames(d).forEach(function(a){-1===["_hostModules","_globals"].indexOf(a)&&void 0===this[a]&&(this[a]=d[a])},a);["registerAny","register"].forEach(function(a){this[a]=Object.getPrototypeOf(d)[a].bind(d)},a);var g=d._data.api;"object"===("undefined"===typeof g?"undefined":v(g))&&Object.getOwnPropertyNames(g).forEach(function(a){var b={};Object.getOwnPropertyNames(g[a]).forEach(function(c){g[a][c].hasOwnProperty("constructor")?
b[c]=d._hostModules[a][c].prototype:b[c]=d._hostModules[a][c]},this);this._xdm.defineAPIModule(b,a)},a);a._hostModules=d._hostModules;a.defineGlobal=function(a){this.parentTargets._globals=p.extend({},this.parentTargets._globals,a);this._xdm.defineAPIModule(a)};a.defineModule=function(a,b){this._xdm.defineAPIModule(b,a);this.parentTargets[a]={};Object.getOwnPropertyNames(b).forEach(function(b){this.parentTargets[a][b]="parent"},this)};a.subCreate=function(a,b){a.options=a.options||{};a.options.targets=
p.extend({},this.parentTargets,a.options.targets);b=this.create(a,b);d.sendSubCreate(b.id,a);return b};return a}N(b,c);return b}(S)),I=function(c,b,a,d){var g=!1;return function(){!g&&"undefined"!==typeof console&&console.warn&&(g=!0,console.warn("DEPRECATED API - "+b+" has been deprecated since ACJS "+d+(" and will be removed in a future release. "+(a?"Use "+a+" instead.":"No alternative will be provided."))),l._analytics&&l._analytics.trackDeprecatedMethodUsed(b));return c.apply(void 0,arguments)}},
x={each:y,log:e,decodeQueryComponent:function(c){return null==c?null:decodeURIComponent(c.replace(/\+/g,"%20"))},bind:k("add","attach"),unbind:k("remove","detach"),extend:function(c){var b=arguments,b=[].slice.call(b,1,b.length);y(b,function(a,b){y(b,function(a,b){c[a]=b})});return c},trim:function(c){return c&&c.replace(/^\s+|\s+$/g,"")},debounce:function(c,b){var a;return function(){var d=this,g=[].slice.call(arguments);a&&clearTimeout(a);a=setTimeout(function(){a=null;c.apply(d,g)},b||50)}},isFunction:function(c){return"function"===
typeof c},handleError:function(c){if(!e.apply(this,c&&c.message?[c,c.message]:[c]))throw c;}},U=x.each,Z=x.extend,ka=window.document,J=Z(function(c,b){b=b||ka;var a=[];c&&("string"===typeof c?(c=b.querySelectorAll(c),U(c,function(b,c){a.push(c)})):1===c.nodeType?a.push(c):c===window&&a.push(c));Z(a,{each:function(a){U(this,a);return this},bind:function(a,b){this.each(function(c,d){x.bind(d,a,b)})},attr:function(a){var b;this.each(function(c,d){b=d[a]||d.getAttribute&&d.getAttribute(a);return!b});
return b},removeClass:function(a){return this.each(function(b,c){c.className&&(c.className=c.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," "))})},html:function(a){return this.each(function(b,c){c.innerHTML=a})},append:function(a){return this.each(function(c,d){var g=b.createElement(a.tag);U(a,function(a,c){"$text"===a?g.styleSheet?g.styleSheet.cssText=c:g.appendChild(b.createTextNode(c)):"tag"!==a&&(g[a]=c)});d.appendChild(g)})}});return a},x),B=function(){function c(){z(this,c);this._events=
{};this.ANY_PREFIX="_any";this.methods="off offAll offAny on onAny once".split(" ")}c.prototype._anyListener=function(b,a){var c=a._context.eventName;a=this._events[this.ANY_PREFIX]||[];var g=this._events[c]||[];Array.isArray(b)||(b=[b]);a.forEach(function(a){var d=b.slice(0);d.unshift(c);d.push({args:b,name:c});a.apply(null,d)});g.forEach(function(a){a.apply(null,b)})};c.prototype.off=function(b,a){this._events[b]&&(a=this._events[b].indexOf(a),-1<a&&this._events[b].splice(a,1),0===this._events[b].length&&
delete this._events[b])};c.prototype.offAll=function(b){delete this._events[b]};c.prototype.offAny=function(b){this.off(this.ANY_PREFIX,b)};c.prototype.on=function(b,a){this._events[b]||(this._events[b]=[]);this._events[b].push(a)};c.prototype.onAny=function(b){this.on(this.ANY_PREFIX,b)};c.prototype.once=function(b,a){function c(){a.apply(null,arguments);g.off(b,c)}var g=this;this.on(b,c)};return c}(),L=new B,V=new (function(c){function b(){z(this,b);var a=O(this,c.call(this));a.methods="offPublic offAllPublic offAnyPublic onPublic onAnyPublic oncePublic".split(" ");
return a}N(b,c);b.prototype._filterEval=function(a,b){var c=!0;if(!a)return c;switch("undefined"===typeof a?"undefined":v(a)){case "function":c=!!a.call(null,b);break;case "object":c=Object.getOwnPropertyNames(a).every(function(c){return b[c]===a[c]})}return c};b.prototype.once=function(a,b,c){function d(c){b.apply(null,c);g.off(a,d)}var g=this;this.on(a,d,c)};b.prototype.on=function(a,b,g){b._wrapped=function(a){this._filterEval(g,a.sender)&&b.apply(null,a.event)}.bind(this);c.prototype.on.call(this,
a,b._wrapped)};b.prototype.off=function(a,b){b._wrapped?c.prototype.off.call(this,a,b._wrapped):c.prototype.off.call(this,a,b)};b.prototype.onAny=function(a,b){a._wrapped=function(c){c.sender&&this._filterEval(b,c.sender)&&a.apply(null,c.event)};c.prototype.onAny.call(this,a._wrapped)};b.prototype.offAny=function(a){a._wrapped?c.prototype.offAny.call(this,name,a._wrapped):c.prototype.offAny.call(this,name,a)};return b}(B)),la=1,B=I(function(){return l._data.options.customData},"AP.dialog.customData",
"AP.dialog.getCustomData()","5.0");l._hostModules&&l._hostModules.dialog&&(Object.defineProperty(l._hostModules.dialog,"customData",{get:B}),Object.defineProperty(l.dialog,"customData",{get:B}),l.dialog._disableCloseOnSubmit=!1,l.dialog.disableCloseOnSubmit=function(){l.dialog._disableCloseOnSubmit=!0});var G={};L.onAny(function(c,b){var a=c.match(/^dialog\.(\w+)/);a&&("dialog.button.click"===c?f(b.button.identifier,b):h(a[1],b))});if(l.dialog&&l.dialog.create){var ma=l.dialog.create.prototype.constructor.bind({});
l.dialog.create=l._hostModules.dialog.create=function(){var c=ma.apply(void 0,arguments);c.on=I(D,'AP.dialog.on("close", callback)','AP.events.on("dialog.close", callback)',"5.0");return c}}if(l.dialog&&l.dialog.getButton){var na=l.dialog.getButton.prototype.constructor.bind({});l.dialog.getButton=l._hostModules.dialog.getButton=function(c){try{var b=na(c);b.bind=I(function(a){return D(c,a)},"AP.dialog.getDialogButton().bind()",'AP.events.on("dialog.message", callback)',"5.0");return b}catch(a){return{}}}}if(l.dialog&&
l.dialog.createButton){var oa=l.dialog.createButton.prototype.constructor.bind({});l.dialog.createButton=l._hostModules.dialog.createButton=function(c){var b={};"object"!==("undefined"===typeof c?"undefined":v(c))?(b.text=c,b.identifier=c):b=c;b.identifier||(b.identifier="user.button."+la++);oa(b);return l.dialog.getButton(b.identifier)}}l.dialog&&(l.dialog.onDialogMessage=l._hostModules.dialog.onDialogMessage=I(D,"AP.dialog.onDialogMessage()",'AP.events.on("dialog.message", callback)',"5.0"));l.Dialog||
(l.Dialog=l._hostModules.Dialog=l.dialog);var M={},Q={define:function(c,b,a){var d=A(c),e;a||(a=b,b=[]);a&&(e="function"!==typeof a?function(){return a}:a,E(b,function(){var a=e.apply(window,arguments);if(a){"function"===typeof a&&(d.exports.__target__=a);for(var b in a)a.hasOwnProperty(b)&&(d.exports[b]=a[b])}}))},require:function(c,b){E("string"===typeof c?[c]:c,b)}},B=new (function(){function c(){z(this,c);this.store={}}c.prototype.set=function(b,a){if(a){var c={};c[b]=a}else c=b;x.extend(this.store,
c)};c.prototype.get=function(b){return b?this.store[b]:x.extend({},this.store)};return c}());l._hostModules._dollar=J;l._hostModules["inline-dialog"]=l._hostModules.inlineDialog;!0===F.get("sizeToParent")?l.env.sizeToParent(!0===F.get("hideFooter")):l.env.hideFooter(!0===F.get("hideFooter"));!0===F.get("base")&&l.env.getLocation(function(c){J("head").append({tag:"base",href:c,target:"_parent"})});J.each(L.methods,function(c,b){l._hostModules&&l._hostModules.events&&(l._hostModules.events[b]=l.events[b]=
L[b].bind(L),l._hostModules.events[b+"Public"]=l.events[b+"Public"]=V[b].bind(V))});l.define=I(function(){return Q.define.apply(Q,arguments)},"AP.define()",null,"5.0");l.require=I(function(){return Q.require.apply(Q,arguments)},"AP.require()",null,"5.0");S=l._data.options.isDialog?"10px 10px 0 10px":"0";!1!==F.get("margin")&&J("head").append({tag:"style",type:"text/css",$text:"body {margin: "+S+" !important;}"});l.Meta={get:H};l.meta=H;l.localUrl=function(c){var b=H("local-base-url");return"undefined"===
typeof b||"undefined"===typeof c?b:""+b+c};l._hostModules._util=l._util={each:x.each,log:x.log,decodeQueryComponent:x.decodeQueryComponent,bind:x.bind,unbind:x.unbind,extend:x.extend,trim:x.trim,debounce:x.debounce,isFunction:x.isFunction,handleError:x.handleError};l.defineModule&&l.defineModule("env",{resize:function(c,b,a){a=document.getElementById(a._context.extension_id);a.style.width=c+("number"===typeof c?"px":"");a.style.height=b+("number"===typeof b?"px":"")}});l._data&&l._data.origin&&l.registerAny(function(c,
b){c&&c.event&&c.sender?V._anyListener(c,b):L._anyListener(c,b)});B.set(l._data.options.globalOptions);return l}();(function(){function n(e){var f;if("string"===typeof e&&1<e.length)try{f=JSON.parse(e)}catch(h){console.error("ACJS: failed to decode context",e)}"object"!==typeof f&&(f={});return f}function u(e,f){if("number"!==typeof e)return window.top;f=f||window;for(var h=0;h<e;h++)f=f.parent;return f}function r(e){function f(){var e=document.getElementById(h.containerId);window._AP.addonAttemptCounter[h.containerId]++;if(e)if(delete window._AP.addonAttemptCounter[h.containerId],window._AP.isSubHost){e.appendChild(k);
var e=k.contentDocument,n="(function(){ var w = window; for (var i=0; i<"+h.options.hostFrameOffset+"; i++){w = w.parent; } w.postMessage("+JSON.stringify({type:"set_inner_iframe_url",iframeData:h})+', "*");}());';e.open();e.write("<script>"+n+"\x3c/script>");e.close()}else{if(n=e.querySelector(".ap-iframe-container"))n.parentNode.removeChild(n),AJS.log&&AJS.log("AJS: duplicate iframe removed",h,e);k.appendTo(e);k.data("addon-key",h.addon_key);k.data("key",h.key)}else 10>=window._AP.addonAttemptCounter[h.containerId]&&
w(f)}window._AP.isSubHost=u(e.hostFrameOffset)!==window;var h=window._AP._convertConnectOptions(e),k;window._AP.isSubHost?k=window._AP._createSub(h):(y({addon_key:h.addon_key,key:h.key}).forEach(function(e){if(e.extension.options.uniqueKey===h.options.uniqueKey){var f=document.getElementById(e.extension_id);t().destroy(e.extension_id);f&&AJS.$(f).closest(".ap-iframe-container").remove()}},this),k=t().create(h));window._AP.addonAttemptCounter[h.containerId]=0;f()}var w=function(){return window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,50)}}(),t=function(){return window.connectHost||window.AP},y=function(e){return t().getExtensions(e).filter(function(e){return!!document.getElementById(e.extension_id)})},k=function(e,f,h){try{var n=require(e);f(n)}catch(E){0>=h?(console.error("Unable to load module: "+e),f(null)):setTimeout(function(){k(e,f,h-1)},500)}};window._AP=window._AP||{};window._AP.addonAttemptCounter=window._AP.addonAttemptCounter||
{};window._AP._convertConnectOptions=function(e){var f={url:e.url,ns:e.uniqueKey,addon_key:e.addon_key,key:e.key,containerId:"embedded-"+e.uniqueKey,options:{history:{state:""},uniqueKey:e.uniqueKey,origin:e.origin,hostOrigin:e.hostOrigin,isFullPage:"1"===e.general,autoresize:!0,user:{timeZone:e.timeZone,fullName:e.fullName,uid:e.uid,ukey:e.ukey},productContext:n(e.productCtx),structuredContext:n(e.structuredContext),contextJwt:e.contextJwt,contextPath:e.cp,width:e.w||e.width,height:e.h||e.height,
targets:{env:{resize:"both"}}}};"string"===typeof e.contentClassifier&&(f.options.contentClassifier=e.contentClassifier);"number"===typeof e.hostFrameOffset&&(f.options.hostFrameOffset=e.hostFrameOffset+1);window._AP.isSubHost||(f.options.history.state=window.location.hash?window.location.hash.substr(2):"");return f};window._AP._createSub=function(e){var f=document.createElement("iframe"),h=t().subCreate(e);h.width=e.options.width||"";h.height=e.options.height||"";h.style="border:0;";h["class"]="ap-iframe";
h["data-addon-key"]=e.addon_key;h["data-key"]=e.key;delete h.src;Object.getOwnPropertyNames(h).forEach(function(e){f.setAttribute(e,h[e])});return f};window._AP.appendConnectAddon=function(e){var f=!1;try{window.top.karma&&(f=!0)}catch(D){}if(window===window.top||f)/com\.atlassian\.(jira|confluence)\.emcee(;|$|\.local|\.staging)/g.test(e.addon_key)?k("ac/marketplace",function(f){f&&t().defineModule("marketplace",f);r(e)},20):r(e);else{var h=function(f){f.source===window.top&&f.data&&void 0!==f.data.hostFrameOffset&&
(window.removeEventListener("message",h),e.hostFrameOffset=f.data.hostFrameOffset,r(e))};window.addEventListener("message",h);window.top.postMessage({type:"get_host_offset"},"*")}}})();function _defineProperty(n,u,r){return u in n?Object.defineProperty(n,u,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[u]=r,n}
!function(){function n(e,f){for(var h=0,v=e.length;h<v;h+=1)if(f(e[h]))return e[h]}function u(e){var k=this,v={pop:f,push:h,replace:D,change:E};if(!e.listener)throw Error("missing listener for subscription");if(!e.type)throw Error("missing type for subscription");if(!v[e.type])throw Error("invalid type for subscription");this.listener=e.listener;this.type=e.type;this.eventName=v[this.type];this.lastValue=e.lastValue;this.attribute=e.attribute;this.handler=function(e){return"string"!=typeof k.attribute?
k.listener(e):k.lastValue!==e[k.attribute]?(e.newURL=e[k.attribute],e.oldURL=k.lastValue,k.lastValue=e[k.attribute],k.listener(e)):void 0}}function r(e){return e.models=e.models||[],e.models instanceof Array||(e.models=[e.models]),e.models=e.models.map(function(e){return e instanceof u?e:new u(e)}),this.models=e.models,this}function w(e){return function(f){A.models.filter(function(f){return f.eventName===e}).forEach(function(e){e.handler(f)})}}function t(e){AP.history._registerWindowListeners();var f=
A.find("change",e);f||(f=new u({type:"change",attribute:"hash",listener:e}),A.add(f))}function y(e,f){AP.history._registerWindowListeners();var h=A.find(e,f);h||(h=new u({type:e,listener:f}),A.add(h))}function k(e,f){(e=A.find(e,f))&&A.remove(e)}var e;if(AP._hostModules.history){var f="history_popstate",h="history_pushstate",D="history_replacestate",E="history_changestate";r.prototype.add=function(e){this.models.push(e)};r.prototype.remove=function(e){this.models.splice(this.models.indexOf(e),1)};
r.prototype.find=function(e,f){return n(this.models,function(h){return h.type===e&&h.listener===f})};var A=new r({models:[]});AP.register((e={},_defineProperty(e,f,w(f)),_defineProperty(e,h,w(h)),_defineProperty(e,D,w(D)),_defineProperty(e,E,w(E)),e));AP._hostModules.history.popState=t;AP.history.popState=t;AP._hostModules.history.subscribeState=y;AP.history.subscribeState=y;AP._hostModules.history.unsubscribeState=k;AP.history.unsubscribeState=k;var C=null;AP._data.options&&AP._data.options.history&&
AP._data.options.history.state&&(C={hash:AP._data.options.history.state});AP.history.getState("all",function(e){C=e});AP.history.subscribeState("change",function(e){C=e});var H=AP._hostModules.history.getState.bind({});AP.history.getState=AP._hostModules.history.getState=function(e,f){if(f=arguments[arguments.length-1],"function"==typeof f)return"string"==typeof e?H(e,f):H(f);if(e=e||"hash","hash"===e)return C&&C.hash?C.hash:"";if("all"===e)return C;throw Error("invalid type for getState");}}}();(function(){function n(e){return"function"===typeof e}if(AP.jira){var u,r,w=function(){},t,y={onSaveValidation:function(e){r=e},onSave:function(e){u=e},trigger:function(){var e=!0;n(r)&&(e=r.call());var h;u&&(h=u.call());e={valid:e,value:e?""+h:void 0};AP.jira._submitWorkflowConfigurationResponse(e);return e}};AP.register({jira_workflow_post_function_submit:function(){y.trigger()}});AP.jira.WorkflowConfiguration=AP._hostModules.jira.WorkflowConfiguration=y;AP.register({jira_dashboard_item_edit:function(){w.call()}});
AP.jira.DashboardItem=AP._hostModules.jira.DashboardItem={onDashboardItemEdit:function(e){w=e}};var k=AP._hostModules.jira.openDatePicker.bind({});AP.jira.openDatePicker=AP._hostModules.jira.openDatePicker=function(e){if(!e.position||"object"!==typeof e.position){var f=e.element;if(!f||!f.nodeType||1!=f.nodeType)throw Error("Providing either options.position or options.element is required.");e.position={}}if(!e.onSelect||!n(e.onSelect))throw Error("options.onSelect function is a required parameter.");
e={element:e.element,position:{top:e.position.top||0,left:e.position.left||0},date:e.date,showTime:!!e.showTime,onSelect:e.onSelect};t=e.onSelect;delete e.onSelect;e.element&&(f=e.element.getBoundingClientRect(),e.position={left:f.left,top:f.top+f.height},delete e.element);k(e)};AP.register({jira_date_selected:function(e){n(t)&&t.call({},e.isoDate,e.date)}});var e=AP._hostModules.jira.openCreateIssueDialog.bind({});AP.jira.openCreateIssueDialog=AP._hostModules.jira.openCreateIssueDialog=function(f,
h){e(h,f)}}})();(function(){if(AP.dropdownList){var n={},u={},r=AP._hostModules.dropdownList.create,w=function(){var t=r();t.onSelect=function(r){n[t._id]=r};t.onHide=function(n){u[t._id]=n};return t};AP._hostModules.dropdownList.create=w;AP.dropdownList.create=w;AP.register({dropdown_list_select:function(t){var r=n[t.id];r&&r.call({},t.data)},dropdown_list_hide:function(n){(n=u[n.id])&&n.call({})}})}})();(function(){function n(k,e){var f,h;if(k)if(f=k.length,null!=f&&"function"!==typeof k)for(h=0;h<f&&!1!==e.call(k[h],h,k[h]);)h+=1;else for(h in k)if(k.hasOwnProperty(h)&&!1===e.call(k[h],h,k[h]))break}function u(k){var e=arguments,e=[].slice.call(e,1,e.length);n(e,function(e,h){n(h,function(e,f){k[e]=f})});return k}function r(k){return k instanceof Blob&&k.name?{blob:k,name:k.name,_isBlob:!0}:k}function w(k){var e=u({},k),f=k.headers||{};delete e.headers;return u(e,{getResponseHeader:function(e){var h=
null;e&&(e=e.toLowerCase(),n(f,function(f,k){if(f.toLowerCase()===e)return h=k,!1}));return h},getAllResponseHeaders:function(){var e="";n(f,function(f,h){e+=(e?"\r\n":"")+f+": "+h});return e}})}function t(k,e){return new AP._promise(function(f,h){"string"===typeof k&&("object"===typeof e?(e.url=k,k=e):k={url:k});if(k.success){var n=k.success;delete k.success;var t=k.error||function(){};delete k.error;e=function(e,f,h){!1===e?n(h,"success",w(f)):t(w(f),"error",e)}}else"function"!==typeof e&&(e=function(e,
k,n){!1===e?f({body:n,xhr:w(k)}):h({xhr:w(k),err:e})});"multipart/form-data"===k.contentType&&Object.keys(k.data).forEach(function(e){var f=k.data[e];Array.isArray(f)?f.forEach(function(f,h){k.data[e][h]=r(f)}):k.data[e]=r(f)});y(k,e)})}if(AP._hostModules&&AP._hostModules._globals&&AP._hostModules._globals.request){try{new File([],"")}catch(k){File=function(e,f,h){e=new Blob(e,h);e.name=f;e.lastModifiedDate=new Date;return e}}var y=AP._hostModules._globals.request.bind({});AP._hostModules._globals.request=
t;AP.request=t}})();AP._hostModules.user&&AP._hostModules.env&&Object.getOwnPropertyNames(AP._hostModules.user).forEach(function(n){AP[n]=AP.env[n]=AP._hostModules.env[n]=AP._hostModules.user[n]});AP.env&&(AP.getLocation=AP._hostModules._globals.getLocation=AP._hostModules.env.getLocation,AP.sizeToParent=AP._hostModules._globals.sizeToParent=AP._hostModules.env.sizeToParent);
if(AP._hostModules.dialog&&AP._hostModules.Dialog){var isCloseOnEscape=function(n){n(!AP._data.options.preventDialogCloseOnEscape)};AP._hostModules.dialog.isCloseOnEscape=AP._hostModules.Dialog.isCloseOnEscape=isCloseOnEscape;AP.dialog.isCloseOnEscape=AP.Dialog.isCloseOnEscape=isCloseOnEscape};if(AP._hostModules.confluence){var original_onMacroPropertyPanelEvent=AP._hostModules.confluence.onMacroPropertyPanelEvent.bind({});AP.confluence.onMacroPropertyPanelEvent=AP._hostModules.confluence.onMacroPropertyPanelEvent=function(n){AP.register(n);original_onMacroPropertyPanelEvent()}};
